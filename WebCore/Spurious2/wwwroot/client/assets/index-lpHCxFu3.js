var GZ=Object.defineProperty;var WZ=(e,t,n)=>t in e?GZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var nv=(e,t,n)=>WZ(e,typeof t!="symbol"?t+"":t,n);function KZ(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function zS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wM={exports:{}},X0={},xM={exports:{}},yo={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $B;function YZ(){if($B)return yo;$B=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(le){return le===null||typeof le!="object"?null:(le=v&&le[v]||le["@@iterator"],typeof le=="function"?le:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,k={};function P(le,pe,Fe){this.props=le,this.context=pe,this.refs=k,this.updater=Fe||C}P.prototype.isReactComponent={},P.prototype.setState=function(le,pe){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,le,pe,"setState")},P.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")};function O(){}O.prototype=P.prototype;function L(le,pe,Fe){this.props=le,this.context=pe,this.refs=k,this.updater=Fe||C}var D=L.prototype=new O;D.constructor=L,T(D,P.prototype),D.isPureReactComponent=!0;var N=Array.isArray,F=Object.prototype.hasOwnProperty,B={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function G(le,pe,Fe){var Be,Ze={},it=null,ot=null;if(pe!=null)for(Be in pe.ref!==void 0&&(ot=pe.ref),pe.key!==void 0&&(it=""+pe.key),pe)F.call(pe,Be)&&!V.hasOwnProperty(Be)&&(Ze[Be]=pe[Be]);var ut=arguments.length-2;if(ut===1)Ze.children=Fe;else if(1<ut){for(var st=Array(ut),ct=0;ct<ut;ct++)st[ct]=arguments[ct+2];Ze.children=st}if(le&&le.defaultProps)for(Be in ut=le.defaultProps,ut)Ze[Be]===void 0&&(Ze[Be]=ut[Be]);return{$$typeof:e,type:le,key:it,ref:ot,props:Ze,_owner:B.current}}function q(le,pe){return{$$typeof:e,type:le.type,key:pe,ref:le.ref,props:le.props,_owner:le._owner}}function z(le){return typeof le=="object"&&le!==null&&le.$$typeof===e}function $(le){var pe={"=":"=0",":":"=2"};return"$"+le.replace(/[=:]/g,function(Fe){return pe[Fe]})}var K=/\/+/g;function te(le,pe){return typeof le=="object"&&le!==null&&le.key!=null?$(""+le.key):pe.toString(36)}function re(le,pe,Fe,Be,Ze){var it=typeof le;(it==="undefined"||it==="boolean")&&(le=null);var ot=!1;if(le===null)ot=!0;else switch(it){case"string":case"number":ot=!0;break;case"object":switch(le.$$typeof){case e:case t:ot=!0}}if(ot)return ot=le,Ze=Ze(ot),le=Be===""?"."+te(ot,0):Be,N(Ze)?(Fe="",le!=null&&(Fe=le.replace(K,"$&/")+"/"),re(Ze,pe,Fe,"",function(ct){return ct})):Ze!=null&&(z(Ze)&&(Ze=q(Ze,Fe+(!Ze.key||ot&&ot.key===Ze.key?"":(""+Ze.key).replace(K,"$&/")+"/")+le)),pe.push(Ze)),1;if(ot=0,Be=Be===""?".":Be+":",N(le))for(var ut=0;ut<le.length;ut++){it=le[ut];var st=Be+te(it,ut);ot+=re(it,pe,Fe,st,Ze)}else if(st=w(le),typeof st=="function")for(le=st.call(le),ut=0;!(it=le.next()).done;)it=it.value,st=Be+te(it,ut++),ot+=re(it,pe,Fe,st,Ze);else if(it==="object")throw pe=String(le),Error("Objects are not valid as a React child (found: "+(pe==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":pe)+"). If you meant to render a collection of children, use an array instead.");return ot}function oe(le,pe,Fe){if(le==null)return le;var Be=[],Ze=0;return re(le,Be,"","",function(it){return pe.call(Fe,it,Ze++)}),Be}function ue(le){if(le._status===-1){var pe=le._result;pe=pe(),pe.then(function(Fe){(le._status===0||le._status===-1)&&(le._status=1,le._result=Fe)},function(Fe){(le._status===0||le._status===-1)&&(le._status=2,le._result=Fe)}),le._status===-1&&(le._status=0,le._result=pe)}if(le._status===1)return le._result.default;throw le._result}var Q={current:null},ce={transition:null},ae={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:ce,ReactCurrentOwner:B};function fe(){throw Error("act(...) is not supported in production builds of React.")}return yo.Children={map:oe,forEach:function(le,pe,Fe){oe(le,function(){pe.apply(this,arguments)},Fe)},count:function(le){var pe=0;return oe(le,function(){pe++}),pe},toArray:function(le){return oe(le,function(pe){return pe})||[]},only:function(le){if(!z(le))throw Error("React.Children.only expected to receive a single React element child.");return le}},yo.Component=P,yo.Fragment=n,yo.Profiler=o,yo.PureComponent=L,yo.StrictMode=r,yo.Suspense=f,yo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ae,yo.act=fe,yo.cloneElement=function(le,pe,Fe){if(le==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+le+".");var Be=T({},le.props),Ze=le.key,it=le.ref,ot=le._owner;if(pe!=null){if(pe.ref!==void 0&&(it=pe.ref,ot=B.current),pe.key!==void 0&&(Ze=""+pe.key),le.type&&le.type.defaultProps)var ut=le.type.defaultProps;for(st in pe)F.call(pe,st)&&!V.hasOwnProperty(st)&&(Be[st]=pe[st]===void 0&&ut!==void 0?ut[st]:pe[st])}var st=arguments.length-2;if(st===1)Be.children=Fe;else if(1<st){ut=Array(st);for(var ct=0;ct<st;ct++)ut[ct]=arguments[ct+2];Be.children=ut}return{$$typeof:e,type:le.type,key:Ze,ref:it,props:Be,_owner:ot}},yo.createContext=function(le){return le={$$typeof:l,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},le.Provider={$$typeof:i,_context:le},le.Consumer=le},yo.createElement=G,yo.createFactory=function(le){var pe=G.bind(null,le);return pe.type=le,pe},yo.createRef=function(){return{current:null}},yo.forwardRef=function(le){return{$$typeof:c,render:le}},yo.isValidElement=z,yo.lazy=function(le){return{$$typeof:g,_payload:{_status:-1,_result:le},_init:ue}},yo.memo=function(le,pe){return{$$typeof:p,type:le,compare:pe===void 0?null:pe}},yo.startTransition=function(le){var pe=ce.transition;ce.transition={};try{le()}finally{ce.transition=pe}},yo.unstable_act=fe,yo.useCallback=function(le,pe){return Q.current.useCallback(le,pe)},yo.useContext=function(le){return Q.current.useContext(le)},yo.useDebugValue=function(){},yo.useDeferredValue=function(le){return Q.current.useDeferredValue(le)},yo.useEffect=function(le,pe){return Q.current.useEffect(le,pe)},yo.useId=function(){return Q.current.useId()},yo.useImperativeHandle=function(le,pe,Fe){return Q.current.useImperativeHandle(le,pe,Fe)},yo.useInsertionEffect=function(le,pe){return Q.current.useInsertionEffect(le,pe)},yo.useLayoutEffect=function(le,pe){return Q.current.useLayoutEffect(le,pe)},yo.useMemo=function(le,pe){return Q.current.useMemo(le,pe)},yo.useReducer=function(le,pe,Fe){return Q.current.useReducer(le,pe,Fe)},yo.useRef=function(le){return Q.current.useRef(le)},yo.useState=function(le){return Q.current.useState(le)},yo.useSyncExternalStore=function(le,pe,Fe){return Q.current.useSyncExternalStore(le,pe,Fe)},yo.useTransition=function(){return Q.current.useTransition()},yo.version="18.3.1",yo}var HB;function w_(){return HB||(HB=1,xM.exports=YZ()),xM.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VB;function ZZ(){if(VB)return X0;VB=1;var e=w_(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,p){var g,v={},w=null,C=null;p!==void 0&&(w=""+p),f.key!==void 0&&(w=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!i.hasOwnProperty(g)&&(v[g]=f[g]);if(c&&c.defaultProps)for(g in f=c.defaultProps,f)v[g]===void 0&&(v[g]=f[g]);return{$$typeof:t,type:c,key:w,ref:C,props:v,_owner:o.current}}return X0.Fragment=n,X0.jsx=l,X0.jsxs=l,X0}var qB;function XZ(){return qB||(qB=1,wM.exports=ZZ()),wM.exports}var ie=XZ(),A=w_();const Es=zS(A),sD=KZ({__proto__:null,default:Es},[A]);var nT={},CM={exports:{}},Gu={},SM={exports:{}},EM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GB;function QZ(){return GB||(GB=1,function(e){function t(ce,ae){var fe=ce.length;ce.push(ae);e:for(;0<fe;){var le=fe-1>>>1,pe=ce[le];if(0<o(pe,ae))ce[le]=ae,ce[fe]=pe,fe=le;else break e}}function n(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var ae=ce[0],fe=ce.pop();if(fe!==ae){ce[0]=fe;e:for(var le=0,pe=ce.length,Fe=pe>>>1;le<Fe;){var Be=2*(le+1)-1,Ze=ce[Be],it=Be+1,ot=ce[it];if(0>o(Ze,fe))it<pe&&0>o(ot,Ze)?(ce[le]=ot,ce[it]=fe,le=it):(ce[le]=Ze,ce[Be]=fe,le=Be);else if(it<pe&&0>o(ot,fe))ce[le]=ot,ce[it]=fe,le=it;else break e}}return ae}function o(ce,ae){var fe=ce.sortIndex-ae.sortIndex;return fe!==0?fe:ce.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var f=[],p=[],g=1,v=null,w=3,C=!1,T=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(ce){for(var ae=n(p);ae!==null;){if(ae.callback===null)r(p);else if(ae.startTime<=ce)r(p),ae.sortIndex=ae.expirationTime,t(f,ae);else break;ae=n(p)}}function N(ce){if(k=!1,D(ce),!T)if(n(f)!==null)T=!0,ue(F);else{var ae=n(p);ae!==null&&Q(N,ae.startTime-ce)}}function F(ce,ae){T=!1,k&&(k=!1,O(G),G=-1),C=!0;var fe=w;try{for(D(ae),v=n(f);v!==null&&(!(v.expirationTime>ae)||ce&&!$());){var le=v.callback;if(typeof le=="function"){v.callback=null,w=v.priorityLevel;var pe=le(v.expirationTime<=ae);ae=e.unstable_now(),typeof pe=="function"?v.callback=pe:v===n(f)&&r(f),D(ae)}else r(f);v=n(f)}if(v!==null)var Fe=!0;else{var Be=n(p);Be!==null&&Q(N,Be.startTime-ae),Fe=!1}return Fe}finally{v=null,w=fe,C=!1}}var B=!1,V=null,G=-1,q=5,z=-1;function $(){return!(e.unstable_now()-z<q)}function K(){if(V!==null){var ce=e.unstable_now();z=ce;var ae=!0;try{ae=V(!0,ce)}finally{ae?te():(B=!1,V=null)}}else B=!1}var te;if(typeof L=="function")te=function(){L(K)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,oe=re.port2;re.port1.onmessage=K,te=function(){oe.postMessage(null)}}else te=function(){P(K,0)};function ue(ce){V=ce,B||(B=!0,te())}function Q(ce,ae){G=P(function(){ce(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ce){ce.callback=null},e.unstable_continueExecution=function(){T||C||(T=!0,ue(F))},e.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<ce?Math.floor(1e3/ce):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(ce){switch(w){case 1:case 2:case 3:var ae=3;break;default:ae=w}var fe=w;w=ae;try{return ce()}finally{w=fe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ce,ae){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var fe=w;w=ce;try{return ae()}finally{w=fe}},e.unstable_scheduleCallback=function(ce,ae,fe){var le=e.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?le+fe:le):fe=le,ce){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=fe+pe,ce={id:g++,callback:ae,priorityLevel:ce,startTime:fe,expirationTime:pe,sortIndex:-1},fe>le?(ce.sortIndex=fe,t(p,ce),n(f)===null&&ce===n(p)&&(k?(O(G),G=-1):k=!0,Q(N,fe-le))):(ce.sortIndex=pe,t(f,ce),T||C||(T=!0,ue(F))),ce},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(ce){var ae=w;return function(){var fe=w;w=ae;try{return ce.apply(this,arguments)}finally{w=fe}}}}(EM)),EM}var WB;function JZ(){return WB||(WB=1,SM.exports=QZ()),SM.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KB;function eX(){if(KB)return Gu;KB=1;var e=w_(),t=JZ();function n(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,o={};function i(a,s){l(a,s),l(a+"Capture",s)}function l(a,s){for(o[a]=s,a=0;a<s.length;a++)r.add(s[a])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(a){return f.call(v,a)?!0:f.call(g,a)?!1:p.test(a)?v[a]=!0:(g[a]=!0,!1)}function C(a,s,d,m){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function T(a,s,d,m){if(s===null||typeof s>"u"||C(a,s,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function k(a,s,d,m,_,x,I){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=m,this.attributeNamespace=_,this.mustUseProperty=d,this.propertyName=a,this.type=s,this.sanitizeURL=x,this.removeEmptyString=I}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){P[a]=new k(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0];P[s]=new k(s,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){P[a]=new k(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){P[a]=new k(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){P[a]=new k(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){P[a]=new k(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){P[a]=new k(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){P[a]=new k(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){P[a]=new k(a,5,!1,a.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function L(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var s=a.replace(O,L);P[s]=new k(s,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var s=a.replace(O,L);P[s]=new k(s,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(O,L);P[s]=new k(s,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){P[a]=new k(a,1,!1,a.toLowerCase(),null,!1,!1)}),P.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){P[a]=new k(a,1,!1,a.toLowerCase(),null,!0,!0)});function D(a,s,d,m){var _=P.hasOwnProperty(s)?P[s]:null;(_!==null?_.type!==0:m||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(T(s,d,_,m)&&(d=null),m||_===null?w(s)&&(d===null?a.removeAttribute(s):a.setAttribute(s,""+d)):_.mustUseProperty?a[_.propertyName]=d===null?_.type===3?!1:"":d:(s=_.attributeName,m=_.attributeNamespace,d===null?a.removeAttribute(s):(_=_.type,d=_===3||_===4&&d===!0?"":""+d,m?a.setAttributeNS(m,s,d):a.setAttribute(s,d))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F=Symbol.for("react.element"),B=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),$=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),ce=Symbol.iterator;function ae(a){return a===null||typeof a!="object"?null:(a=ce&&a[ce]||a["@@iterator"],typeof a=="function"?a:null)}var fe=Object.assign,le;function pe(a){if(le===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);le=s&&s[1]||""}return`
`+le+a}var Fe=!1;function Be(a,s){if(!a||Fe)return"";Fe=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var m=H}Reflect.construct(a,[],s)}else{try{s.call()}catch(H){m=H}a.call(s.prototype)}else{try{throw Error()}catch(H){m=H}a()}}catch(H){if(H&&m&&typeof H.stack=="string"){for(var _=H.stack.split(`
`),x=m.stack.split(`
`),I=_.length-1,R=x.length-1;1<=I&&0<=R&&_[I]!==x[R];)R--;for(;1<=I&&0<=R;I--,R--)if(_[I]!==x[R]){if(I!==1||R!==1)do if(I--,R--,0>R||_[I]!==x[R]){var U=`
`+_[I].replace(" at new "," at ");return a.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",a.displayName)),U}while(1<=I&&0<=R);break}}}finally{Fe=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?pe(a):""}function Ze(a){switch(a.tag){case 5:return pe(a.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return a=Be(a.type,!1),a;case 11:return a=Be(a.type.render,!1),a;case 1:return a=Be(a.type,!0),a;default:return""}}function it(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case V:return"Fragment";case B:return"Portal";case q:return"Profiler";case G:return"StrictMode";case te:return"Suspense";case re:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case $:return(a.displayName||"Context")+".Consumer";case z:return(a._context.displayName||"Context")+".Provider";case K:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case oe:return s=a.displayName||null,s!==null?s:it(a.type)||"Memo";case ue:s=a._payload,a=a._init;try{return it(a(s))}catch{}}return null}function ot(a){var s=a.type;switch(a.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=s.render,a=a.displayName||a.name||"",s.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return it(s);case 8:return s===G?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function ut(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function st(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ct(a){var s=st(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),m=""+a[s];if(!a.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,x=d.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return _.call(this)},set:function(I){m=""+I,x.call(this,I)}}),Object.defineProperty(a,s,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(I){m=""+I},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Ae(a){a._valueTracker||(a._valueTracker=ct(a))}function Z(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var d=s.getValue(),m="";return a&&(m=st(a)?a.checked?"true":"false":a.value),a=m,a!==d?(s.setValue(a),!0):!1}function ne(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function ee(a,s){var d=s.checked;return fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??a._wrapperState.initialChecked})}function ye(a,s){var d=s.defaultValue==null?"":s.defaultValue,m=s.checked!=null?s.checked:s.defaultChecked;d=ut(s.value!=null?s.value:d),a._wrapperState={initialChecked:m,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ie(a,s){s=s.checked,s!=null&&D(a,"checked",s,!1)}function ge(a,s){Ie(a,s);var d=ut(s.value),m=s.type;if(d!=null)m==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(m==="submit"||m==="reset"){a.removeAttribute("value");return}s.hasOwnProperty("value")?nt(a,s.type,d):s.hasOwnProperty("defaultValue")&&nt(a,s.type,ut(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(a.defaultChecked=!!s.defaultChecked)}function $e(a,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var m=s.type;if(!(m!=="submit"&&m!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+a._wrapperState.initialValue,d||s===a.value||(a.value=s),a.defaultValue=s}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function nt(a,s,d){(s!=="number"||ne(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var pt=Array.isArray;function wt(a,s,d,m){if(a=a.options,s){s={};for(var _=0;_<d.length;_++)s["$"+d[_]]=!0;for(d=0;d<a.length;d++)_=s.hasOwnProperty("$"+a[d].value),a[d].selected!==_&&(a[d].selected=_),_&&m&&(a[d].defaultSelected=!0)}else{for(d=""+ut(d),s=null,_=0;_<a.length;_++){if(a[_].value===d){a[_].selected=!0,m&&(a[_].defaultSelected=!0);return}s!==null||a[_].disabled||(s=a[_])}s!==null&&(s.selected=!0)}}function mt(a,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return fe({},s,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function zt(a,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(n(92));if(pt(d)){if(1<d.length)throw Error(n(93));d=d[0]}s=d}s==null&&(s=""),d=s}a._wrapperState={initialValue:ut(d)}}function Pt(a,s){var d=ut(s.value),m=ut(s.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),s.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),m!=null&&(a.defaultValue=""+m)}function Zt(a){var s=a.textContent;s===a._wrapperState.initialValue&&s!==""&&s!==null&&(a.value=s)}function We(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ge(a,s){return a==null||a==="http://www.w3.org/1999/xhtml"?We(s):a==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Rt,Dt=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,d,m,_){MSApp.execUnsafeLocalFunction(function(){return a(s,d,m,_)})}:a}(function(a,s){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=s;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Rt.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)a.appendChild(s.firstChild)}});function qt(a,s){if(s){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=s;return}}a.textContent=s}var Yt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(Yt).forEach(function(a){xt.forEach(function(s){s=s+a.charAt(0).toUpperCase()+a.substring(1),Yt[s]=Yt[a]})});function Et(a,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||Yt.hasOwnProperty(a)&&Yt[a]?(""+s).trim():s+"px"}function St(a,s){a=a.style;for(var d in s)if(s.hasOwnProperty(d)){var m=d.indexOf("--")===0,_=Et(d,s[d],m);d==="float"&&(d="cssFloat"),m?a.setProperty(d,_):a[d]=_}}var kt=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cn(a,s){if(s){if(kt[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function an(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qn=null;function tr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var lr=null,Le=null,de=null;function xe(a){if(a=Vh(a)){if(typeof lr!="function")throw Error(n(280));var s=a.stateNode;s&&(s=gp(s),lr(a.stateNode,a.type,s))}}function Ee(a){Le?de?de.push(a):de=[a]:Le=a}function Ye(){if(Le){var a=Le,s=de;if(de=Le=null,xe(a),s)for(a=0;a<s.length;a++)xe(s[a])}}function lt(a,s){return a(s)}function Ce(){}var ke=!1;function De(a,s,d){if(ke)return a(s,d);ke=!0;try{return lt(a,s,d)}finally{ke=!1,(Le!==null||de!==null)&&(Ce(),Ye())}}function He(a,s){var d=a.stateNode;if(d===null)return null;var m=gp(d);if(m===null)return null;d=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,s,typeof d));return d}var vt=!1;if(c)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){vt=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{vt=!1}function Nt(a,s,d,m,_,x,I,R,U){var H=Array.prototype.slice.call(arguments,3);try{s.apply(d,H)}catch(J){this.onError(J)}}var jt=!1,Ht=null,Ft=!1,vn=null,gn={onError:function(a){jt=!0,Ht=a}};function _n(a,s,d,m,_,x,I,R,U){jt=!1,Ht=null,Nt.apply(gn,arguments)}function Dn(a,s,d,m,_,x,I,R,U){if(_n.apply(this,arguments),jt){if(jt){var H=Ht;jt=!1,Ht=null}else throw Error(n(198));Ft||(Ft=!0,vn=H)}}function ft(a){var s=a,d=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,s.flags&4098&&(d=s.return),a=s.return;while(a)}return s.tag===3?d:null}function dt(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function Wt(a){if(ft(a)!==a)throw Error(n(188))}function Mn(a){var s=a.alternate;if(!s){if(s=ft(a),s===null)throw Error(n(188));return s!==a?null:a}for(var d=a,m=s;;){var _=d.return;if(_===null)break;var x=_.alternate;if(x===null){if(m=_.return,m!==null){d=m;continue}break}if(_.child===x.child){for(x=_.child;x;){if(x===d)return Wt(_),a;if(x===m)return Wt(_),s;x=x.sibling}throw Error(n(188))}if(d.return!==m.return)d=_,m=x;else{for(var I=!1,R=_.child;R;){if(R===d){I=!0,d=_,m=x;break}if(R===m){I=!0,m=_,d=x;break}R=R.sibling}if(!I){for(R=x.child;R;){if(R===d){I=!0,d=x,m=_;break}if(R===m){I=!0,m=x,d=_;break}R=R.sibling}if(!I)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:s}function Bn(a){return a=Mn(a),a!==null?dr(a):null}function dr(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var s=dr(a);if(s!==null)return s;a=a.sibling}return null}var qn=t.unstable_scheduleCallback,to=t.unstable_cancelCallback,la=t.unstable_shouldYield,ua=t.unstable_requestPaint,lo=t.unstable_now,_i=t.unstable_getCurrentPriorityLevel,$n=t.unstable_ImmediatePriority,no=t.unstable_UserBlockingPriority,vr=t.unstable_NormalPriority,uo=t.unstable_LowPriority,ur=t.unstable_IdlePriority,ci=null,Mo=null;function Vi(a){if(Mo&&typeof Mo.onCommitFiberRoot=="function")try{Mo.onCommitFiberRoot(ci,a,void 0,(a.current.flags&128)===128)}catch{}}var Ji=Math.clz32?Math.clz32:nl,tl=Math.log,di=Math.LN2;function nl(a){return a>>>=0,a===0?32:31-(tl(a)/di|0)|0}var ba=64,Or=4194304;function Ua(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function wr(a,s){var d=a.pendingLanes;if(d===0)return 0;var m=0,_=a.suspendedLanes,x=a.pingedLanes,I=d&268435455;if(I!==0){var R=I&~_;R!==0?m=Ua(R):(x&=I,x!==0&&(m=Ua(x)))}else I=d&~_,I!==0?m=Ua(I):x!==0&&(m=Ua(x));if(m===0)return 0;if(s!==0&&s!==m&&!(s&_)&&(_=m&-m,x=s&-s,_>=x||_===16&&(x&4194240)!==0))return s;if(m&4&&(m|=d&16),s=a.entangledLanes,s!==0)for(a=a.entanglements,s&=m;0<s;)d=31-Ji(s),_=1<<d,m|=a[d],s&=~_;return m}function Y(a,s){switch(a){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(a,s){for(var d=a.suspendedLanes,m=a.pingedLanes,_=a.expirationTimes,x=a.pendingLanes;0<x;){var I=31-Ji(x),R=1<<I,U=_[I];U===-1?(!(R&d)||R&m)&&(_[I]=Y(R,s)):U<=s&&(a.expiredLanes|=R),x&=~R}}function Ue(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Je(){var a=ba;return ba<<=1,!(ba&4194240)&&(ba=64),a}function Mt(a){for(var s=[],d=0;31>d;d++)s.push(a);return s}function It(a,s,d){a.pendingLanes|=s,s!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,s=31-Ji(s),a[s]=d}function Gt(a,s){var d=a.pendingLanes&~s;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=s,a.mutableReadLanes&=s,a.entangledLanes&=s,s=a.entanglements;var m=a.eventTimes;for(a=a.expirationTimes;0<d;){var _=31-Ji(d),x=1<<_;s[_]=0,m[_]=-1,a[_]=-1,d&=~x}}function Cn(a,s){var d=a.entangledLanes|=s;for(a=a.entanglements;d;){var m=31-Ji(d),_=1<<m;_&s|a[m]&s&&(a[m]|=s),d&=~_}}var kn=0;function yr(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Sr,Ho,Is,Qa,wa,Pl=!1,ds=[],hs=null,xa=null,ks=null,fs=new Map,Ja=new Map,Ps=[],ps="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Im(a,s){switch(a){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":fs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(s.pointerId)}}function Mu(a,s,d,m,_,x){return a===null||a.nativeEvent!==x?(a={blockedOn:s,domEventName:d,eventSystemFlags:m,nativeEvent:x,targetContainers:[_]},s!==null&&(s=Vh(s),s!==null&&Ho(s)),a):(a.eventSystemFlags|=m,s=a.targetContainers,_!==null&&s.indexOf(_)===-1&&s.push(_),a)}function Bh(a,s,d,m,_){switch(s){case"focusin":return hs=Mu(hs,a,s,d,m,_),!0;case"dragenter":return xa=Mu(xa,a,s,d,m,_),!0;case"mouseover":return ks=Mu(ks,a,s,d,m,_),!0;case"pointerover":var x=_.pointerId;return fs.set(x,Mu(fs.get(x)||null,a,s,d,m,_)),!0;case"gotpointercapture":return x=_.pointerId,Ja.set(x,Mu(Ja.get(x)||null,a,s,d,m,_)),!0}return!1}function es(a){var s=Cc(a.target);if(s!==null){var d=ft(s);if(d!==null){if(s=d.tag,s===13){if(s=dt(d),s!==null){a.blockedOn=s,wa(a.priority,function(){Is(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function eu(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var d=tu(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);Qn=m,d.target.dispatchEvent(m),Qn=null}else return s=Vh(d),s!==null&&Ho(s),a.blockedOn=d,!1;s.shift()}return!0}function Ru(a,s,d){eu(a)&&d.delete(s)}function po(){Pl=!1,hs!==null&&eu(hs)&&(hs=null),xa!==null&&eu(xa)&&(xa=null),ks!==null&&eu(ks)&&(ks=null),fs.forEach(Ru),Ja.forEach(Ru)}function As(a,s){a.blockedOn===s&&(a.blockedOn=null,Pl||(Pl=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,po)))}function Dr(a){function s(_){return As(_,a)}if(0<ds.length){As(ds[0],a);for(var d=1;d<ds.length;d++){var m=ds[d];m.blockedOn===a&&(m.blockedOn=null)}}for(hs!==null&&As(hs,a),xa!==null&&As(xa,a),ks!==null&&As(ks,a),fs.forEach(s),Ja.forEach(s),d=0;d<Ps.length;d++)m=Ps[d],m.blockedOn===a&&(m.blockedOn=null);for(;0<Ps.length&&(d=Ps[0],d.blockedOn===null);)es(d),d.blockedOn===null&&Ps.shift()}var Al=N.ReactCurrentBatchConfig,Ca=!0;function fc(a,s,d,m){var _=kn,x=Al.transition;Al.transition=null;try{kn=1,Aa(a,s,d,m)}finally{kn=_,Al.transition=x}}function ea(a,s,d,m){var _=kn,x=Al.transition;Al.transition=null;try{kn=4,Aa(a,s,d,m)}finally{kn=_,Al.transition=x}}function Aa(a,s,d,m){if(Ca){var _=tu(a,s,d,m);if(_===null)Ni(a,s,m,Ou,d),Im(a,m);else if(Bh(_,a,s,d,m))m.stopPropagation();else if(Im(a,m),s&4&&-1<ps.indexOf(a)){for(;_!==null;){var x=Vh(_);if(x!==null&&Sr(x),x=tu(a,s,d,m),x===null&&Ni(a,s,m,Ou,d),x===_)break;_=x}_!==null&&m.stopPropagation()}else Ni(a,s,m,null,d)}}var Ou=null;function tu(a,s,d,m){if(Ou=null,a=tr(m),a=Cc(a),a!==null)if(s=ft(a),s===null)a=null;else if(d=s.tag,d===13){if(a=dt(s),a!==null)return a;a=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null);return Ou=a,null}function Xc(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_i()){case $n:return 1;case no:return 4;case vr:case uo:return 16;case ur:return 536870912;default:return 16}default:return 16}}var Ml=null,qd=null,nu=null;function Qc(){if(nu)return nu;var a,s=qd,d=s.length,m,_="value"in Ml?Ml.value:Ml.textContent,x=_.length;for(a=0;a<d&&s[a]===_[a];a++);var I=d-a;for(m=1;m<=I&&s[d-m]===_[x-m];m++);return nu=_.slice(a,1<m?1-m:void 0)}function rl(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function ms(){return!0}function Du(){return!1}function qi(a){function s(d,m,_,x,I){this._reactName=d,this._targetInst=_,this.type=m,this.nativeEvent=x,this.target=I,this.currentTarget=null;for(var R in a)a.hasOwnProperty(R)&&(d=a[R],this[R]=d?d(x):x[R]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ms:Du,this.isPropagationStopped=Du,this}return fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),s}var pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ru=qi(pc),ol=fe({},pc,{view:0,detail:0}),Gd=qi(ol),il,Ms,ou,mc=fe({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==ou&&(ou&&a.type==="mousemove"?(il=a.screenX-ou.screenX,Ms=a.screenY-ou.screenY):Ms=il=0,ou=a),il)},movementY:function(a){return"movementY"in a?a.movementY:Ms}}),Zr=qi(mc),Wd=fe({},mc,{dataTransfer:0}),Qf=qi(Wd),ts=fe({},ol,{relatedTarget:0}),Lu=qi(ts),Jf=fe({},pc,{animationName:0,elapsedTime:0,pseudoElement:0}),_y=qi(Jf),Kd=fe({},pc,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Uh=qi(Kd),jh=fe({},pc,{data:0}),Jc=qi(jh),gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hr(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Yd[a])?!!s[a]:!1}function Fo(){return Hr}var ko=fe({},ol,{key:function(a){if(a.key){var s=gc[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=rl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Vo[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fo,charCode:function(a){return a.type==="keypress"?rl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?rl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Zd=qi(ko),X=fe({},mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ve=qi(X),ze=fe({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fo}),Qe=qi(ze),Ot=fe({},pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),At=qi(Ot),nn=fe({},mc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),xn=qi(nn),fr=[9,13,27,32],Tr=c&&"CompositionEvent"in window,xr=null;c&&"documentMode"in document&&(xr=document.documentMode);var Jo=c&&"TextEvent"in window&&!xr,Yr=c&&(!Tr||xr&&8<xr&&11>=xr),ca=" ",bi=!1;function yc(a,s){switch(a){case"keyup":return fr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var iu=!1;function $h(a,s){switch(a){case"compositionend":return Xd(s);case"keypress":return s.which!==32?null:(bi=!0,ca);case"textInput":return a=s.data,a===ca&&bi?null:a;default:return null}}function ep(a,s){if(iu)return a==="compositionend"||!Tr&&yc(a,s)?(a=Qc(),nu=qd=Ml=null,iu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yr&&s.locale!=="ko"?null:s.data;default:return null}}var by={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wy(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!by[a.type]:s==="textarea"}function km(a,s,d,m){Ee(m),s=xc(s,"onChange"),0<s.length&&(d=new ru("onChange","change",null,d,m),a.push({event:d,listeners:s}))}var Qd=null,vc=null;function Jd(a){ns(a,0)}function tp(a){var s=sh(a);if(Z(s))return a}function B_(a,s){if(a==="change")return s}var xy=!1;if(c){var Pm;if(c){var np="oninput"in document;if(!np){var Cy=document.createElement("div");Cy.setAttribute("oninput","return;"),np=typeof Cy.oninput=="function"}Pm=np}else Pm=!1;xy=Pm&&(!document.documentMode||9<document.documentMode)}function rp(){Qd&&(Qd.detachEvent("onpropertychange",Nu),vc=Qd=null)}function Nu(a){if(a.propertyName==="value"&&tp(vc)){var s=[];km(s,vc,a,tr(a)),De(Jd,s)}}function op(a,s,d){a==="focusin"?(rp(),Qd=s,vc=d,Qd.attachEvent("onpropertychange",Nu)):a==="focusout"&&rp()}function Rl(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return tp(vc)}function Ol(a,s){if(a==="click")return tp(s)}function Sy(a,s){if(a==="input"||a==="change")return tp(s)}function au(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var gs=typeof Object.is=="function"?Object.is:au;function ip(a,s){if(gs(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var d=Object.keys(a),m=Object.keys(s);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var _=d[m];if(!f.call(s,_)||!gs(a[_],s[_]))return!1}return!0}function U_(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ey(a,s){var d=U_(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=s&&m>=s)return{node:d,offset:s-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=U_(d)}}function Hh(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Hh(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Dl(){for(var a=window,s=ne();s instanceof a.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)a=s.contentWindow;else break;s=ne(a.document)}return s}function Pn(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}function Rs(a){var s=Dl(),d=a.focusedElem,m=a.selectionRange;if(s!==d&&d&&d.ownerDocument&&Hh(d.ownerDocument.documentElement,d)){if(m!==null&&Pn(d)){if(s=m.start,a=m.end,a===void 0&&(a=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(a,d.value.length);else if(a=(s=d.ownerDocument||document)&&s.defaultView||window,a.getSelection){a=a.getSelection();var _=d.textContent.length,x=Math.min(m.start,_);m=m.end===void 0?x:Math.min(m.end,_),!a.extend&&x>m&&(_=m,m=x,x=_),_=Ey(d,x);var I=Ey(d,m);_&&I&&(a.rangeCount!==1||a.anchorNode!==_.node||a.anchorOffset!==_.offset||a.focusNode!==I.node||a.focusOffset!==I.offset)&&(s=s.createRange(),s.setStart(_.node,_.offset),a.removeAllRanges(),x>m?(a.addRange(s),a.extend(I.node,I.offset)):(s.setEnd(I.node,I.offset),a.addRange(s)))}}for(s=[],a=d;a=a.parentNode;)a.nodeType===1&&s.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)a=s[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var _c=c&&"documentMode"in document&&11>=document.documentMode,su=null,Am=null,In=null,bc=!1;function Ty(a,s,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;bc||su==null||su!==ne(m)||(m=su,"selectionStart"in m&&Pn(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),In&&ip(In,m)||(In=m,m=xc(Am,"onSelect"),0<m.length&&(s=new ru("onSelect","select",null,s,d),a.push({event:s,listeners:m}),s.target=su)))}function ed(a,s){var d={};return d[a.toLowerCase()]=s.toLowerCase(),d["Webkit"+a]="webkit"+s,d["Moz"+a]="moz"+s,d}var eh={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},Mm={},Rm={};c&&(Rm=document.createElement("div").style,"AnimationEvent"in window||(delete eh.animationend.animation,delete eh.animationiteration.animation,delete eh.animationstart.animation),"TransitionEvent"in window||delete eh.transitionend.transition);function Fu(a){if(Mm[a])return Mm[a];if(!eh[a])return a;var s=eh[a],d;for(d in s)if(s.hasOwnProperty(d)&&d in Rm)return Mm[a]=s[d];return a}var zo=Fu("animationend"),ap=Fu("animationiteration"),Om=Fu("animationstart"),sp=Fu("transitionend"),Dm=new Map,lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function td(a,s){Dm.set(a,s),i(s,[a])}for(var Os=0;Os<lp.length;Os++){var th=lp[Os],Kn=th.toLowerCase(),ir=th[0].toUpperCase()+th.slice(1);td(Kn,"on"+ir)}td(zo,"onAnimationEnd"),td(ap,"onAnimationIteration"),td(Om,"onAnimationStart"),td("dblclick","onDoubleClick"),td("focusin","onFocus"),td("focusout","onBlur"),td(sp,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lm=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function up(a,s,d){var m=a.type||"unknown-event";a.currentTarget=d,Dn(m,s,void 0,a),a.currentTarget=null}function ns(a,s){s=(s&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],_=m.event;m=m.listeners;e:{var x=void 0;if(s)for(var I=m.length-1;0<=I;I--){var R=m[I],U=R.instance,H=R.currentTarget;if(R=R.listener,U!==x&&_.isPropagationStopped())break e;up(_,R,H),x=U}else for(I=0;I<m.length;I++){if(R=m[I],U=R.instance,H=R.currentTarget,R=R.listener,U!==x&&_.isPropagationStopped())break e;up(_,R,H),x=U}}}if(Ft)throw a=vn,Ft=!1,vn=null,a}function qo(a,s){var d=s[Um];d===void 0&&(d=s[Um]=new Set);var m=a+"__bubble";d.has(m)||(wi(s,a,2,!1),d.add(m))}function Ds(a,s,d){var m=0;s&&(m|=4),wi(d,a,m,s)}var cp="_reactListening"+Math.random().toString(36).slice(2);function wc(a){if(!a[cp]){a[cp]=!0,r.forEach(function(d){d!=="selectionchange"&&(Lm.has(d)||Ds(d,!1,a),Ds(d,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[cp]||(s[cp]=!0,Ds("selectionchange",!1,s))}}function wi(a,s,d,m){switch(Xc(s)){case 1:var _=fc;break;case 4:_=ea;break;default:_=Aa}d=_.bind(null,s,d,a),_=void 0,!vt||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(_=!0),m?_!==void 0?a.addEventListener(s,d,{capture:!0,passive:_}):a.addEventListener(s,d,!0):_!==void 0?a.addEventListener(s,d,{passive:_}):a.addEventListener(s,d,!1)}function Ni(a,s,d,m,_){var x=m;if(!(s&1)&&!(s&2)&&m!==null)e:for(;;){if(m===null)return;var I=m.tag;if(I===3||I===4){var R=m.stateNode.containerInfo;if(R===_||R.nodeType===8&&R.parentNode===_)break;if(I===4)for(I=m.return;I!==null;){var U=I.tag;if((U===3||U===4)&&(U=I.stateNode.containerInfo,U===_||U.nodeType===8&&U.parentNode===_))return;I=I.return}for(;R!==null;){if(I=Cc(R),I===null)return;if(U=I.tag,U===5||U===6){m=x=I;continue e}R=R.parentNode}}m=m.return}De(function(){var H=x,J=tr(d),he=[];e:{var _e=Dm.get(a);if(_e!==void 0){var Te=ru,Ne=a;switch(a){case"keypress":if(rl(d)===0)break e;case"keydown":case"keyup":Te=Zd;break;case"focusin":Ne="focus",Te=Lu;break;case"focusout":Ne="blur",Te=Lu;break;case"beforeblur":case"afterblur":Te=Lu;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Zr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Qf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Qe;break;case zo:case ap:case Om:Te=_y;break;case sp:Te=At;break;case"scroll":Te=Gd;break;case"wheel":Te=xn;break;case"copy":case"cut":case"paste":Te=Uh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=ve}var Ve=(s&4)!==0,je=!Ve&&a==="scroll",Oe=Ve?_e!==null?_e+"Capture":null:_e;Ve=[];for(var Re=H,qe;Re!==null;){qe=Re;var at=qe.stateNode;if(qe.tag===5&&at!==null&&(qe=at,Oe!==null&&(at=He(Re,Oe),at!=null&&Ve.push(nh(Re,at,qe)))),je)break;Re=Re.return}0<Ve.length&&(_e=new Te(_e,Ne,null,d,J),he.push({event:_e,listeners:Ve}))}}if(!(s&7)){e:{if(_e=a==="mouseover"||a==="pointerover",Te=a==="mouseout"||a==="pointerout",_e&&d!==Qn&&(Ne=d.relatedTarget||d.fromElement)&&(Cc(Ne)||Ne[cu]))break e;if((Te||_e)&&(_e=J.window===J?J:(_e=J.ownerDocument)?_e.defaultView||_e.parentWindow:window,Te?(Ne=d.relatedTarget||d.toElement,Te=H,Ne=Ne?Cc(Ne):null,Ne!==null&&(je=ft(Ne),Ne!==je||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(Te=null,Ne=H),Te!==Ne)){if(Ve=Zr,at="onMouseLeave",Oe="onMouseEnter",Re="mouse",(a==="pointerout"||a==="pointerover")&&(Ve=ve,at="onPointerLeave",Oe="onPointerEnter",Re="pointer"),je=Te==null?_e:sh(Te),qe=Ne==null?_e:sh(Ne),_e=new Ve(at,Re+"leave",Te,d,J),_e.target=je,_e.relatedTarget=qe,at=null,Cc(J)===H&&(Ve=new Ve(Oe,Re+"enter",Ne,d,J),Ve.target=qe,Ve.relatedTarget=je,at=Ve),je=at,Te&&Ne)t:{for(Ve=Te,Oe=Ne,Re=0,qe=Ve;qe;qe=zu(qe))Re++;for(qe=0,at=Oe;at;at=zu(at))qe++;for(;0<Re-qe;)Ve=zu(Ve),Re--;for(;0<qe-Re;)Oe=zu(Oe),qe--;for(;Re--;){if(Ve===Oe||Oe!==null&&Ve===Oe.alternate)break t;Ve=zu(Ve),Oe=zu(Oe)}Ve=null}else Ve=null;Te!==null&&Nm(he,_e,Te,Ve,!1),Ne!==null&&je!==null&&Nm(he,je,Ne,Ve,!0)}}e:{if(_e=H?sh(H):window,Te=_e.nodeName&&_e.nodeName.toLowerCase(),Te==="select"||Te==="input"&&_e.type==="file")var _t=B_;else if(wy(_e))if(xy)_t=Sy;else{_t=Rl;var Lt=op}else(Te=_e.nodeName)&&Te.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(_t=Ol);if(_t&&(_t=_t(a,H))){km(he,_t,d,J);break e}Lt&&Lt(a,_e,H),a==="focusout"&&(Lt=_e._wrapperState)&&Lt.controlled&&_e.type==="number"&&nt(_e,"number",_e.value)}switch(Lt=H?sh(H):window,a){case"focusin":(wy(Lt)||Lt.contentEditable==="true")&&(su=Lt,Am=H,In=null);break;case"focusout":In=Am=su=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Ty(he,d,J);break;case"selectionchange":if(_c)break;case"keydown":case"keyup":Ty(he,d,J)}var Kt;if(Tr)e:{switch(a){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else iu?yc(a,d)&&(Vt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Vt="onCompositionStart");Vt&&(Yr&&d.locale!=="ko"&&(iu||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&iu&&(Kt=Qc()):(Ml=J,qd="value"in Ml?Ml.value:Ml.textContent,iu=!0)),Lt=xc(H,Vt),0<Lt.length&&(Vt=new Jc(Vt,a,null,d,J),he.push({event:Vt,listeners:Lt}),Kt?Vt.data=Kt:(Kt=Xd(d),Kt!==null&&(Vt.data=Kt)))),(Kt=Jo?$h(a,d):ep(a,d))&&(H=xc(H,"onBeforeInput"),0<H.length&&(J=new Jc("onBeforeInput","beforeinput",null,d,J),he.push({event:J,listeners:H}),J.data=Kt))}ns(he,s)})}function nh(a,s,d){return{instance:a,listener:s,currentTarget:d}}function xc(a,s){for(var d=s+"Capture",m=[];a!==null;){var _=a,x=_.stateNode;_.tag===5&&x!==null&&(_=x,x=He(a,d),x!=null&&m.unshift(nh(a,x,_)),x=He(a,s),x!=null&&m.push(nh(a,x,_))),a=a.return}return m}function zu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function Nm(a,s,d,m,_){for(var x=s._reactName,I=[];d!==null&&d!==m;){var R=d,U=R.alternate,H=R.stateNode;if(U!==null&&U===m)break;R.tag===5&&H!==null&&(R=H,_?(U=He(d,x),U!=null&&I.unshift(nh(d,U,R))):_||(U=He(d,x),U!=null&&I.push(nh(d,U,R)))),d=d.return}I.length!==0&&a.push({event:s,listeners:I})}var Iy=/\r\n?/g,Fm=/\u0000|\uFFFD/g;function rh(a){return(typeof a=="string"?a:""+a).replace(Iy,`
`).replace(Fm,"")}function oh(a,s,d){if(s=rh(s),rh(a)!==s&&d)throw Error(n(425))}function ih(){}var nd=null,dp=null;function ah(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var hp=typeof setTimeout=="function"?setTimeout:void 0,ky=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,pp=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(a){return fp.resolve(null).then(a).catch(zm)}:hp;function zm(a){setTimeout(function(){throw a})}function mp(a,s){var d=s,m=0;do{var _=d.nextSibling;if(a.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(m===0){a.removeChild(_),Dr(s);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=_}while(d);Dr(s)}function uu(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return a}function Bm(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return a;s--}else d==="/$"&&s++}a=a.previousSibling}return null}var rd=Math.random().toString(36).slice(2),Ll="__reactFiber$"+rd,Nl="__reactProps$"+rd,cu="__reactContainer$"+rd,Um="__reactEvents$"+rd,j_="__reactListeners$"+rd,$_="__reactHandles$"+rd;function Cc(a){var s=a[Ll];if(s)return s;for(var d=a.parentNode;d;){if(s=d[cu]||d[Ll]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(a=Bm(a);a!==null;){if(d=a[Ll])return d;a=Bm(a)}return s}a=d,d=a.parentNode}return null}function Vh(a){return a=a[Ll]||a[cu],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function sh(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function gp(a){return a[Nl]||null}var jm=[],du=-1;function Sc(a){return{current:a}}function oi(a){0>du||(a.current=jm[du],jm[du]=null,du--)}function Go(a,s){du++,jm[du]=a.current,a.current=s}var Bu={},Ma=Sc(Bu),Ls=Sc(!1),Uu=Bu;function Ec(a,s){var d=a.type.contextTypes;if(!d)return Bu;var m=a.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===s)return m.__reactInternalMemoizedMaskedChildContext;var _={},x;for(x in d)_[x]=s[x];return m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=s,a.__reactInternalMemoizedMaskedChildContext=_),_}function Ns(a){return a=a.childContextTypes,a!=null}function Tc(){oi(Ls),oi(Ma)}function Py(a,s,d){if(Ma.current!==Bu)throw Error(n(168));Go(Ma,s),Go(Ls,d)}function qh(a,s,d){var m=a.stateNode;if(s=s.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var _ in m)if(!(_ in s))throw Error(n(108,ot(a)||"Unknown",_));return fe({},d,m)}function $m(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Bu,Uu=Ma.current,Go(Ma,a),Go(Ls,Ls.current),!0}function Ay(a,s,d){var m=a.stateNode;if(!m)throw Error(n(169));d?(a=qh(a,s,Uu),m.__reactInternalMemoizedMergedChildContext=a,oi(Ls),oi(Ma),Go(Ma,a)):oi(Ls),Go(Ls,d)}var Ic=null,kc=!1,Gh=!1;function H_(a){Ic===null?Ic=[a]:Ic.push(a)}function E(a){kc=!0,H_(a)}function u(){if(!Gh&&Ic!==null){Gh=!0;var a=0,s=kn;try{var d=Ic;for(kn=1;a<d.length;a++){var m=d[a];do m=m(!0);while(m!==null)}Ic=null,kc=!1}catch(_){throw Ic!==null&&(Ic=Ic.slice(a+1)),qn($n,u),_}finally{kn=s,Gh=!1}}return null}var y=[],b=0,S=null,M=0,j=[],W=0,se=null,Se=1,Pe="";function me(a,s){y[b++]=M,y[b++]=S,S=a,M=s}function Me(a,s,d){j[W++]=Se,j[W++]=Pe,j[W++]=se,se=a;var m=Se;a=Pe;var _=32-Ji(m)-1;m&=~(1<<_),d+=1;var x=32-Ji(s)+_;if(30<x){var I=_-_%5;x=(m&(1<<I)-1).toString(32),m>>=I,_-=I,Se=1<<32-Ji(s)+_|d<<_|m,Pe=x+a}else Se=1<<x|d<<_|m,Pe=a}function Xe(a){a.return!==null&&(me(a,1),Me(a,1,0))}function et(a){for(;a===S;)S=y[--b],y[b]=null,M=y[--b],y[b]=null;for(;a===se;)se=j[--W],j[W]=null,Pe=j[--W],j[W]=null,Se=j[--W],j[W]=null}var rt=null,tt=null,ht=!1,gt=null;function bt(a,s){var d=Vu(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=a,s=a.deletions,s===null?(a.deletions=[d],a.flags|=16):s.push(d)}function $t(a,s){switch(a.tag){case 5:var d=a.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(a.stateNode=s,rt=a,tt=uu(s.firstChild),!0):!1;case 6:return s=a.pendingProps===""||s.nodeType!==3?null:s,s!==null?(a.stateNode=s,rt=a,tt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=se!==null?{id:Se,overflow:Pe}:null,a.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=Vu(18,null,null,0),d.stateNode=s,d.return=a,a.child=d,rt=a,tt=null,!0):!1;default:return!1}}function Ut(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Bt(a){if(ht){var s=tt;if(s){var d=s;if(!$t(a,s)){if(Ut(a))throw Error(n(418));s=uu(d.nextSibling);var m=rt;s&&$t(a,s)?bt(m,d):(a.flags=a.flags&-4097|2,ht=!1,rt=a)}}else{if(Ut(a))throw Error(n(418));a.flags=a.flags&-4097|2,ht=!1,rt=a}}}function ln(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;rt=a}function en(a){if(a!==rt)return!1;if(!ht)return ln(a),ht=!0,!1;var s;if((s=a.tag!==3)&&!(s=a.tag!==5)&&(s=a.type,s=s!=="head"&&s!=="body"&&!ah(a.type,a.memoizedProps)),s&&(s=tt)){if(Ut(a))throw yn(),Error(n(418));for(;s;)bt(a,s),s=uu(s.nextSibling)}if(ln(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(s===0){tt=uu(a.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}a=a.nextSibling}tt=null}}else tt=rt?uu(a.stateNode.nextSibling):null;return!0}function yn(){for(var a=tt;a;)a=uu(a.nextSibling)}function Sn(){tt=rt=null,ht=!1}function Fn(a){gt===null?gt=[a]:gt.push(a)}var nr=N.ReactCurrentBatchConfig;function Yn(a,s,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,a));var _=m,x=""+a;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===x?s.ref:(s=function(I){var R=_.refs;I===null?delete R[x]:R[x]=I},s._stringRef=x,s)}if(typeof a!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,a))}return a}function zn(a,s){throw a=Object.prototype.toString.call(s),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a))}function bn(a){var s=a._init;return s(a._payload)}function Wn(a){function s(Oe,Re){if(a){var qe=Oe.deletions;qe===null?(Oe.deletions=[Re],Oe.flags|=16):qe.push(Re)}}function d(Oe,Re){if(!a)return null;for(;Re!==null;)s(Oe,Re),Re=Re.sibling;return null}function m(Oe,Re){for(Oe=new Map;Re!==null;)Re.key!==null?Oe.set(Re.key,Re):Oe.set(Re.index,Re),Re=Re.sibling;return Oe}function _(Oe,Re){return Oe=Ac(Oe,Re),Oe.index=0,Oe.sibling=null,Oe}function x(Oe,Re,qe){return Oe.index=qe,a?(qe=Oe.alternate,qe!==null?(qe=qe.index,qe<Re?(Oe.flags|=2,Re):qe):(Oe.flags|=2,Re)):(Oe.flags|=1048576,Re)}function I(Oe){return a&&Oe.alternate===null&&(Oe.flags|=2),Oe}function R(Oe,Re,qe,at){return Re===null||Re.tag!==6?(Re=U0(qe,Oe.mode,at),Re.return=Oe,Re):(Re=_(Re,qe),Re.return=Oe,Re)}function U(Oe,Re,qe,at){var _t=qe.type;return _t===V?J(Oe,Re,qe.props.children,at,qe.key):Re!==null&&(Re.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===ue&&bn(_t)===Re.type)?(at=_(Re,qe.props),at.ref=Yn(Oe,Re,qe),at.return=Oe,at):(at=Xy(qe.type,qe.key,qe.props,null,Oe.mode,at),at.ref=Yn(Oe,Re,qe),at.return=Oe,at)}function H(Oe,Re,qe,at){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==qe.containerInfo||Re.stateNode.implementation!==qe.implementation?(Re=j0(qe,Oe.mode,at),Re.return=Oe,Re):(Re=_(Re,qe.children||[]),Re.return=Oe,Re)}function J(Oe,Re,qe,at,_t){return Re===null||Re.tag!==7?(Re=Ip(qe,Oe.mode,at,_t),Re.return=Oe,Re):(Re=_(Re,qe),Re.return=Oe,Re)}function he(Oe,Re,qe){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Re=U0(""+Re,Oe.mode,qe),Re.return=Oe,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case F:return qe=Xy(Re.type,Re.key,Re.props,null,Oe.mode,qe),qe.ref=Yn(Oe,null,Re),qe.return=Oe,qe;case B:return Re=j0(Re,Oe.mode,qe),Re.return=Oe,Re;case ue:var at=Re._init;return he(Oe,at(Re._payload),qe)}if(pt(Re)||ae(Re))return Re=Ip(Re,Oe.mode,qe,null),Re.return=Oe,Re;zn(Oe,Re)}return null}function _e(Oe,Re,qe,at){var _t=Re!==null?Re.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number")return _t!==null?null:R(Oe,Re,""+qe,at);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case F:return qe.key===_t?U(Oe,Re,qe,at):null;case B:return qe.key===_t?H(Oe,Re,qe,at):null;case ue:return _t=qe._init,_e(Oe,Re,_t(qe._payload),at)}if(pt(qe)||ae(qe))return _t!==null?null:J(Oe,Re,qe,at,null);zn(Oe,qe)}return null}function Te(Oe,Re,qe,at,_t){if(typeof at=="string"&&at!==""||typeof at=="number")return Oe=Oe.get(qe)||null,R(Re,Oe,""+at,_t);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case F:return Oe=Oe.get(at.key===null?qe:at.key)||null,U(Re,Oe,at,_t);case B:return Oe=Oe.get(at.key===null?qe:at.key)||null,H(Re,Oe,at,_t);case ue:var Lt=at._init;return Te(Oe,Re,qe,Lt(at._payload),_t)}if(pt(at)||ae(at))return Oe=Oe.get(qe)||null,J(Re,Oe,at,_t,null);zn(Re,at)}return null}function Ne(Oe,Re,qe,at){for(var _t=null,Lt=null,Kt=Re,Vt=Re=0,Qt=null;Kt!==null&&Vt<qe.length;Vt++){Kt.index>Vt?(Qt=Kt,Kt=null):Qt=Kt.sibling;var on=_e(Oe,Kt,qe[Vt],at);if(on===null){Kt===null&&(Kt=Qt);break}a&&Kt&&on.alternate===null&&s(Oe,Kt),Re=x(on,Re,Vt),Lt===null?_t=on:Lt.sibling=on,Lt=on,Kt=Qt}if(Vt===qe.length)return d(Oe,Kt),ht&&me(Oe,Vt),_t;if(Kt===null){for(;Vt<qe.length;Vt++)Kt=he(Oe,qe[Vt],at),Kt!==null&&(Re=x(Kt,Re,Vt),Lt===null?_t=Kt:Lt.sibling=Kt,Lt=Kt);return ht&&me(Oe,Vt),_t}for(Kt=m(Oe,Kt);Vt<qe.length;Vt++)Qt=Te(Kt,Oe,Vt,qe[Vt],at),Qt!==null&&(a&&Qt.alternate!==null&&Kt.delete(Qt.key===null?Vt:Qt.key),Re=x(Qt,Re,Vt),Lt===null?_t=Qt:Lt.sibling=Qt,Lt=Qt);return a&&Kt.forEach(function(hn){return s(Oe,hn)}),ht&&me(Oe,Vt),_t}function Ve(Oe,Re,qe,at){var _t=ae(qe);if(typeof _t!="function")throw Error(n(150));if(qe=_t.call(qe),qe==null)throw Error(n(151));for(var Lt=_t=null,Kt=Re,Vt=Re=0,Qt=null,on=qe.next();Kt!==null&&!on.done;Vt++,on=qe.next()){Kt.index>Vt?(Qt=Kt,Kt=null):Qt=Kt.sibling;var hn=_e(Oe,Kt,on.value,at);if(hn===null){Kt===null&&(Kt=Qt);break}a&&Kt&&hn.alternate===null&&s(Oe,Kt),Re=x(hn,Re,Vt),Lt===null?_t=hn:Lt.sibling=hn,Lt=hn,Kt=Qt}if(on.done)return d(Oe,Kt),ht&&me(Oe,Vt),_t;if(Kt===null){for(;!on.done;Vt++,on=qe.next())on=he(Oe,on.value,at),on!==null&&(Re=x(on,Re,Vt),Lt===null?_t=on:Lt.sibling=on,Lt=on);return ht&&me(Oe,Vt),_t}for(Kt=m(Oe,Kt);!on.done;Vt++,on=qe.next())on=Te(Kt,Oe,Vt,on.value,at),on!==null&&(a&&on.alternate!==null&&Kt.delete(on.key===null?Vt:on.key),Re=x(on,Re,Vt),Lt===null?_t=on:Lt.sibling=on,Lt=on);return a&&Kt.forEach(function(dn){return s(Oe,dn)}),ht&&me(Oe,Vt),_t}function je(Oe,Re,qe,at){if(typeof qe=="object"&&qe!==null&&qe.type===V&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case F:e:{for(var _t=qe.key,Lt=Re;Lt!==null;){if(Lt.key===_t){if(_t=qe.type,_t===V){if(Lt.tag===7){d(Oe,Lt.sibling),Re=_(Lt,qe.props.children),Re.return=Oe,Oe=Re;break e}}else if(Lt.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===ue&&bn(_t)===Lt.type){d(Oe,Lt.sibling),Re=_(Lt,qe.props),Re.ref=Yn(Oe,Lt,qe),Re.return=Oe,Oe=Re;break e}d(Oe,Lt);break}else s(Oe,Lt);Lt=Lt.sibling}qe.type===V?(Re=Ip(qe.props.children,Oe.mode,at,qe.key),Re.return=Oe,Oe=Re):(at=Xy(qe.type,qe.key,qe.props,null,Oe.mode,at),at.ref=Yn(Oe,Re,qe),at.return=Oe,Oe=at)}return I(Oe);case B:e:{for(Lt=qe.key;Re!==null;){if(Re.key===Lt)if(Re.tag===4&&Re.stateNode.containerInfo===qe.containerInfo&&Re.stateNode.implementation===qe.implementation){d(Oe,Re.sibling),Re=_(Re,qe.children||[]),Re.return=Oe,Oe=Re;break e}else{d(Oe,Re);break}else s(Oe,Re);Re=Re.sibling}Re=j0(qe,Oe.mode,at),Re.return=Oe,Oe=Re}return I(Oe);case ue:return Lt=qe._init,je(Oe,Re,Lt(qe._payload),at)}if(pt(qe))return Ne(Oe,Re,qe,at);if(ae(qe))return Ve(Oe,Re,qe,at);zn(Oe,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"?(qe=""+qe,Re!==null&&Re.tag===6?(d(Oe,Re.sibling),Re=_(Re,qe),Re.return=Oe,Oe=Re):(d(Oe,Re),Re=U0(qe,Oe.mode,at),Re.return=Oe,Oe=Re),I(Oe)):d(Oe,Re)}return je}var hr=Wn(!0),Nn=Wn(!1),Lr=Sc(null),mo=null,kr=null,Vr=null;function _r(){Vr=kr=mo=null}function xo(a){var s=Lr.current;oi(Lr),a._currentValue=s}function qr(a,s,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),a===d)break;a=a.return}}function Xr(a,s){mo=a,Vr=kr=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&s&&(jl=!0),a.firstContext=null)}function ei(a){var s=a._currentValue;if(Vr!==a)if(a={context:a,memoizedValue:s,next:null},kr===null){if(mo===null)throw Error(n(308));kr=a,mo.dependencies={lanes:0,firstContext:a}}else kr=kr.next=a;return s}var xi=null;function al(a){xi===null?xi=[a]:xi.push(a)}function Ra(a,s,d,m){var _=s.interleaved;return _===null?(d.next=d,al(s)):(d.next=_.next,_.next=d),s.interleaved=d,Co(a,m)}function Co(a,s){a.lanes|=s;var d=a.alternate;for(d!==null&&(d.lanes|=s),d=a,a=a.return;a!==null;)a.childLanes|=s,d=a.alternate,d!==null&&(d.childLanes|=s),d=a,a=a.return;return d.tag===3?d.stateNode:null}var Ro=!1;function Fl(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Ci(a,s){return{eventTime:a,lane:s,tag:0,payload:null,callback:null,next:null}}function ro(a,s,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,Po&2){var _=m.pending;return _===null?s.next=s:(s.next=_.next,_.next=s),m.pending=s,Co(a,d)}return _=m.interleaved,_===null?(s.next=s,al(m)):(s.next=_.next,_.next=s),m.interleaved=s,Co(a,d)}function Oo(a,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var m=s.lanes;m&=a.pendingLanes,d|=m,s.lanes=d,Cn(a,d)}}function ja(a,s){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var _=null,x=null;if(d=d.firstBaseUpdate,d!==null){do{var I={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};x===null?_=x=I:x=x.next=I,d=d.next}while(d!==null);x===null?_=x=s:x=x.next=s}else _=x=s;d={baseState:m.baseState,firstBaseUpdate:_,lastBaseUpdate:x,shared:m.shared,effects:m.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=s:a.next=s,d.lastBaseUpdate=s}function ti(a,s,d,m){var _=a.updateQueue;Ro=!1;var x=_.firstBaseUpdate,I=_.lastBaseUpdate,R=_.shared.pending;if(R!==null){_.shared.pending=null;var U=R,H=U.next;U.next=null,I===null?x=H:I.next=H,I=U;var J=a.alternate;J!==null&&(J=J.updateQueue,R=J.lastBaseUpdate,R!==I&&(R===null?J.firstBaseUpdate=H:R.next=H,J.lastBaseUpdate=U))}if(x!==null){var he=_.baseState;I=0,J=H=U=null,R=x;do{var _e=R.lane,Te=R.eventTime;if((m&_e)===_e){J!==null&&(J=J.next={eventTime:Te,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Ne=a,Ve=R;switch(_e=s,Te=d,Ve.tag){case 1:if(Ne=Ve.payload,typeof Ne=="function"){he=Ne.call(Te,he,_e);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Ve.payload,_e=typeof Ne=="function"?Ne.call(Te,he,_e):Ne,_e==null)break e;he=fe({},he,_e);break e;case 2:Ro=!0}}R.callback!==null&&R.lane!==0&&(a.flags|=64,_e=_.effects,_e===null?_.effects=[R]:_e.push(R))}else Te={eventTime:Te,lane:_e,tag:R.tag,payload:R.payload,callback:R.callback,next:null},J===null?(H=J=Te,U=he):J=J.next=Te,I|=_e;if(R=R.next,R===null){if(R=_.shared.pending,R===null)break;_e=R,R=_e.next,_e.next=null,_.lastBaseUpdate=_e,_.shared.pending=null}}while(!0);if(J===null&&(U=he),_.baseState=U,_.firstBaseUpdate=H,_.lastBaseUpdate=J,s=_.shared.interleaved,s!==null){_=s;do I|=_.lane,_=_.next;while(_!==s)}else x===null&&(_.shared.lanes=0);ld|=I,a.lanes=I,a.memoizedState=he}}function da(a,s,d){if(a=s.effects,s.effects=null,a!==null)for(s=0;s<a.length;s++){var m=a[s],_=m.callback;if(_!==null){if(m.callback=null,m=d,typeof _!="function")throw Error(n(191,_));_.call(m)}}}var zl={},Sa=Sc(zl),Si=Sc(zl),Fs=Sc(zl);function zs(a){if(a===zl)throw Error(n(174));return a}function Wo(a,s){switch(Go(Fs,s),Go(Si,a),Go(Sa,zl),a=s.nodeType,a){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ge(null,"");break;default:a=a===8?s.parentNode:s,s=a.namespaceURI||null,a=a.tagName,s=Ge(s,a)}oi(Sa),Go(Sa,s)}function ii(){oi(Sa),oi(Si),oi(Fs)}function hu(a){zs(Fs.current);var s=zs(Sa.current),d=Ge(s,a.type);s!==d&&(Go(Si,a),Go(Sa,d))}function Bl(a){Si.current===a&&(oi(Sa),oi(Si))}var ni=Sc(0);function fu(a){for(var s=a;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var yp=[];function Hm(){for(var a=0;a<yp.length;a++)yp[a]._workInProgressVersionPrimary=null;yp.length=0}var Bs=N.ReactCurrentDispatcher,od=N.ReactCurrentBatchConfig,ys=0,Ei=null,Ko=null,$a=null,V_=!1,Vm=!1,My=0,sM=0;function Us(){throw Error(n(321))}function Ry(a,s){if(s===null)return!1;for(var d=0;d<s.length&&d<a.length;d++)if(!gs(a[d],s[d]))return!1;return!0}function q_(a,s,d,m,_,x){if(ys=x,Ei=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Bs.current=a===null||a.memoizedState===null?PE:cM,a=d(m,_),Vm){x=0;do{if(Vm=!1,My=0,25<=x)throw Error(n(301));x+=1,$a=Ko=null,s.updateQueue=null,Bs.current=dM,a=d(m,_)}while(Vm)}if(Bs.current=go,s=Ko!==null&&Ko.next!==null,ys=0,$a=Ko=Ei=null,V_=!1,s)throw Error(n(300));return a}function lh(){var a=My!==0;return My=0,a}function Ul(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $a===null?Ei.memoizedState=$a=a:$a=$a.next=a,$a}function ju(){if(Ko===null){var a=Ei.alternate;a=a!==null?a.memoizedState:null}else a=Ko.next;var s=$a===null?Ei.memoizedState:$a.next;if(s!==null)$a=s,Ko=a;else{if(a===null)throw Error(n(310));Ko=a,a={memoizedState:Ko.memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},$a===null?Ei.memoizedState=$a=a:$a=$a.next=a}return $a}function vp(a,s){return typeof s=="function"?s(a):s}function Wh(a){var s=ju(),d=s.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var m=Ko,_=m.baseQueue,x=d.pending;if(x!==null){if(_!==null){var I=_.next;_.next=x.next,x.next=I}m.baseQueue=_=x,d.pending=null}if(_!==null){x=_.next,m=m.baseState;var R=I=null,U=null,H=x;do{var J=H.lane;if((ys&J)===J)U!==null&&(U=U.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),m=H.hasEagerState?H.eagerState:a(m,H.action);else{var he={lane:J,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};U===null?(R=U=he,I=m):U=U.next=he,Ei.lanes|=J,ld|=J}H=H.next}while(H!==null&&H!==x);U===null?I=m:U.next=R,gs(m,s.memoizedState)||(jl=!0),s.memoizedState=m,s.baseState=I,s.baseQueue=U,d.lastRenderedState=m}if(a=d.interleaved,a!==null){_=a;do x=_.lane,Ei.lanes|=x,ld|=x,_=_.next;while(_!==a)}else _===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Fi(a){var s=ju(),d=s.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var m=d.dispatch,_=d.pending,x=s.memoizedState;if(_!==null){d.pending=null;var I=_=_.next;do x=a(x,I.action),I=I.next;while(I!==_);gs(x,s.memoizedState)||(jl=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),d.lastRenderedState=x}return[x,m]}function Oy(){}function o0(a,s){var d=Ei,m=ju(),_=s(),x=!gs(m.memoizedState,_);if(x&&(m.memoizedState=_,jl=!0),m=m.queue,Fy(qm.bind(null,d,m,a),[a]),m.getSnapshot!==s||x||$a!==null&&$a.memoizedState.tag&1){if(d.flags|=2048,_p(9,Ly.bind(null,d,m,_,s),void 0,null),pa===null)throw Error(n(349));ys&30||Dy(d,s,_)}return _}function Dy(a,s,d){a.flags|=16384,a={getSnapshot:s,value:d},s=Ei.updateQueue,s===null?(s={lastEffect:null,stores:null},Ei.updateQueue=s,s.stores=[a]):(d=s.stores,d===null?s.stores=[a]:d.push(a))}function Ly(a,s,d,m){s.value=d,s.getSnapshot=m,i0(s)&&a0(a)}function qm(a,s,d){return d(function(){i0(s)&&a0(a)})}function i0(a){var s=a.getSnapshot;a=a.value;try{var d=s();return!gs(a,d)}catch{return!0}}function a0(a){var s=Co(a,1);s!==null&&mu(s,a,1,-1)}function Gm(a){var s=Ul();return typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vp,lastRenderedState:a},s.queue=a,a=a.dispatch=uM.bind(null,Ei,a),[s.memoizedState,a]}function _p(a,s,d,m){return a={tag:a,create:s,destroy:d,deps:m,next:null},s=Ei.updateQueue,s===null?(s={lastEffect:null,stores:null},Ei.updateQueue=s,s.lastEffect=a.next=a):(d=s.lastEffect,d===null?s.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,s.lastEffect=a)),a}function G_(){return ju().memoizedState}function Ny(a,s,d,m){var _=Ul();Ei.flags|=a,_.memoizedState=_p(1|s,d,void 0,m===void 0?null:m)}function W_(a,s,d,m){var _=ju();m=m===void 0?null:m;var x=void 0;if(Ko!==null){var I=Ko.memoizedState;if(x=I.destroy,m!==null&&Ry(m,I.deps)){_.memoizedState=_p(s,d,x,m);return}}Ei.flags|=a,_.memoizedState=_p(1|s,d,x,m)}function Wm(a,s){return Ny(8390656,8,a,s)}function Fy(a,s){return W_(2048,8,a,s)}function CE(a,s){return W_(4,2,a,s)}function K_(a,s){return W_(4,4,a,s)}function Y_(a,s){if(typeof s=="function")return a=a(),s(a),function(){s(null)};if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function Z_(a,s,d){return d=d!=null?d.concat([a]):null,W_(4,4,Y_.bind(null,s,a),d)}function X_(){}function s0(a,s){var d=ju();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&Ry(s,m[1])?m[0]:(d.memoizedState=[a,s],a)}function SE(a,s){var d=ju();s=s===void 0?null:s;var m=d.memoizedState;return m!==null&&s!==null&&Ry(s,m[1])?m[0]:(a=a(),d.memoizedState=[a,s],a)}function EE(a,s,d){return ys&21?(gs(d,s)||(d=Je(),Ei.lanes|=d,ld|=d,a.baseState=!0),s):(a.baseState&&(a.baseState=!1,jl=!0),a.memoizedState=d)}function lM(a,s){var d=kn;kn=d!==0&&4>d?d:4,a(!0);var m=od.transition;od.transition={};try{a(!1),s()}finally{kn=d,od.transition=m}}function TE(){return ju().memoizedState}function Kh(a,s,d){var m=Xh(a);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},bp(a))IE(s,d);else if(d=Ra(a,s,d,m),d!==null){var _=cl();mu(d,a,m,_),kE(d,s,m)}}function uM(a,s,d){var m=Xh(a),_={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(bp(a))IE(s,_);else{var x=a.alternate;if(a.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var I=s.lastRenderedState,R=x(I,d);if(_.hasEagerState=!0,_.eagerState=R,gs(R,I)){var U=s.interleaved;U===null?(_.next=_,al(s)):(_.next=U.next,U.next=_),s.interleaved=_;return}}catch{}finally{}d=Ra(a,s,_,m),d!==null&&(_=cl(),mu(d,a,m,_),kE(d,s,m))}}function bp(a){var s=a.alternate;return a===Ei||s!==null&&s===Ei}function IE(a,s){Vm=V_=!0;var d=a.pending;d===null?s.next=s:(s.next=d.next,d.next=s),a.pending=s}function kE(a,s,d){if(d&4194240){var m=s.lanes;m&=a.pendingLanes,d|=m,s.lanes=d,Cn(a,d)}}var go={readContext:ei,useCallback:Us,useContext:Us,useEffect:Us,useImperativeHandle:Us,useInsertionEffect:Us,useLayoutEffect:Us,useMemo:Us,useReducer:Us,useRef:Us,useState:Us,useDebugValue:Us,useDeferredValue:Us,useTransition:Us,useMutableSource:Us,useSyncExternalStore:Us,useId:Us,unstable_isNewReconciler:!1},PE={readContext:ei,useCallback:function(a,s){return Ul().memoizedState=[a,s===void 0?null:s],a},useContext:ei,useEffect:Wm,useImperativeHandle:function(a,s,d){return d=d!=null?d.concat([a]):null,Ny(4194308,4,Y_.bind(null,s,a),d)},useLayoutEffect:function(a,s){return Ny(4194308,4,a,s)},useInsertionEffect:function(a,s){return Ny(4,2,a,s)},useMemo:function(a,s){var d=Ul();return s=s===void 0?null:s,a=a(),d.memoizedState=[a,s],a},useReducer:function(a,s,d){var m=Ul();return s=d!==void 0?d(s):s,m.memoizedState=m.baseState=s,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:s},m.queue=a,a=a.dispatch=Kh.bind(null,Ei,a),[m.memoizedState,a]},useRef:function(a){var s=Ul();return a={current:a},s.memoizedState=a},useState:Gm,useDebugValue:X_,useDeferredValue:function(a){return Ul().memoizedState=a},useTransition:function(){var a=Gm(!1),s=a[0];return a=lM.bind(null,a[1]),Ul().memoizedState=a,[s,a]},useMutableSource:function(){},useSyncExternalStore:function(a,s,d){var m=Ei,_=Ul();if(ht){if(d===void 0)throw Error(n(407));d=d()}else{if(d=s(),pa===null)throw Error(n(349));ys&30||Dy(m,s,d)}_.memoizedState=d;var x={value:d,getSnapshot:s};return _.queue=x,Wm(qm.bind(null,m,x,a),[a]),m.flags|=2048,_p(9,Ly.bind(null,m,x,d,s),void 0,null),d},useId:function(){var a=Ul(),s=pa.identifierPrefix;if(ht){var d=Pe,m=Se;d=(m&~(1<<32-Ji(m)-1)).toString(32)+d,s=":"+s+"R"+d,d=My++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=sM++,s=":"+s+"r"+d.toString(32)+":";return a.memoizedState=s},unstable_isNewReconciler:!1},cM={readContext:ei,useCallback:s0,useContext:ei,useEffect:Fy,useImperativeHandle:Z_,useInsertionEffect:CE,useLayoutEffect:K_,useMemo:SE,useReducer:Wh,useRef:G_,useState:function(){return Wh(vp)},useDebugValue:X_,useDeferredValue:function(a){var s=ju();return EE(s,Ko.memoizedState,a)},useTransition:function(){var a=Wh(vp)[0],s=ju().memoizedState;return[a,s]},useMutableSource:Oy,useSyncExternalStore:o0,useId:TE,unstable_isNewReconciler:!1},dM={readContext:ei,useCallback:s0,useContext:ei,useEffect:Fy,useImperativeHandle:Z_,useInsertionEffect:CE,useLayoutEffect:K_,useMemo:SE,useReducer:Fi,useRef:G_,useState:function(){return Fi(vp)},useDebugValue:X_,useDeferredValue:function(a){var s=ju();return Ko===null?s.memoizedState=a:EE(s,Ko.memoizedState,a)},useTransition:function(){var a=Fi(vp)[0],s=ju().memoizedState;return[a,s]},useMutableSource:Oy,useSyncExternalStore:o0,useId:TE,unstable_isNewReconciler:!1};function Pc(a,s){if(a&&a.defaultProps){s=fe({},s),a=a.defaultProps;for(var d in a)s[d]===void 0&&(s[d]=a[d]);return s}return s}function l0(a,s,d,m){s=a.memoizedState,d=d(m,s),d=d==null?s:fe({},s,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Km={isMounted:function(a){return(a=a._reactInternals)?ft(a)===a:!1},enqueueSetState:function(a,s,d){a=a._reactInternals;var m=cl(),_=Xh(a),x=Ci(m,_);x.payload=s,d!=null&&(x.callback=d),s=ro(a,x,_),s!==null&&(mu(s,a,_,m),Oo(s,a,_))},enqueueReplaceState:function(a,s,d){a=a._reactInternals;var m=cl(),_=Xh(a),x=Ci(m,_);x.tag=1,x.payload=s,d!=null&&(x.callback=d),s=ro(a,x,_),s!==null&&(mu(s,a,_,m),Oo(s,a,_))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var d=cl(),m=Xh(a),_=Ci(d,m);_.tag=2,s!=null&&(_.callback=s),s=ro(a,_,m),s!==null&&(mu(s,a,m,d),Oo(s,a,m))}};function Ym(a,s,d,m,_,x,I){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,x,I):s.prototype&&s.prototype.isPureReactComponent?!ip(d,m)||!ip(_,x):!0}function Q_(a,s,d){var m=!1,_=Bu,x=s.contextType;return typeof x=="object"&&x!==null?x=ei(x):(_=Ns(s)?Uu:Ma.current,m=s.contextTypes,x=(m=m!=null)?Ec(a,_):Bu),s=new s(d,x),a.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Km,a.stateNode=s,s._reactInternals=a,m&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=_,a.__reactInternalMemoizedMaskedChildContext=x),s}function AE(a,s,d,m){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,m),s.state!==a&&Km.enqueueReplaceState(s,s.state,null)}function u0(a,s,d,m){var _=a.stateNode;_.props=d,_.state=a.memoizedState,_.refs={},Fl(a);var x=s.contextType;typeof x=="object"&&x!==null?_.context=ei(x):(x=Ns(s)?Uu:Ma.current,_.context=Ec(a,x)),_.state=a.memoizedState,x=s.getDerivedStateFromProps,typeof x=="function"&&(l0(a,s,x,d),_.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(s=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),s!==_.state&&Km.enqueueReplaceState(_,_.state,null),ti(a,d,_,m),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308)}function wp(a,s){try{var d="",m=s;do d+=Ze(m),m=m.return;while(m);var _=d}catch(x){_=`
Error generating stack: `+x.message+`
`+x.stack}return{value:a,source:s,stack:_,digest:null}}function c0(a,s,d){return{value:a,source:null,stack:d??null,digest:s??null}}function d0(a,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var zy=typeof WeakMap=="function"?WeakMap:Map;function h0(a,s,d){d=Ci(-1,d),d.tag=3,d.payload={element:null};var m=s.value;return d.callback=function(){Vy||(Vy=!0,qy=m),d0(a,s)},d}function ME(a,s,d){d=Ci(-1,d),d.tag=3;var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var _=s.value;d.payload=function(){return m(_)},d.callback=function(){d0(a,s)}}var x=a.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(d.callback=function(){d0(a,s),typeof m!="function"&&(uh===null?uh=new Set([this]):uh.add(this));var I=s.stack;this.componentDidCatch(s.value,{componentStack:I!==null?I:""})}),d}function RE(a,s,d){var m=a.pingCache;if(m===null){m=a.pingCache=new zy;var _=new Set;m.set(s,_)}else _=m.get(s),_===void 0&&(_=new Set,m.set(s,_));_.has(d)||(_.add(d),a=gM.bind(null,a,s,d),s.then(a,a))}function OE(a){do{var s;if((s=a.tag===13)&&(s=a.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return a;a=a.return}while(a!==null);return null}function DE(a,s,d,m,_){return a.mode&1?(a.flags|=65536,a.lanes=_,a):(a===s?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=Ci(-1,1),s.tag=2,ro(d,s,1))),d.lanes|=1),a)}var hM=N.ReactCurrentOwner,jl=!1;function sl(a,s,d,m){s.child=a===null?Nn(s,null,d,m):hr(s,a.child,d,m)}function f0(a,s,d,m,_){d=d.render;var x=s.ref;return Xr(s,_),m=q_(a,s,d,m,x,_),d=lh(),a!==null&&!jl?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~_,$u(a,s,_)):(ht&&d&&Xe(s),s.flags|=1,sl(a,s,m,_),s.child)}function J_(a,s,d,m,_){if(a===null){var x=d.type;return typeof x=="function"&&!Tp(x)&&x.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=x,p0(a,s,x,m,_)):(a=Xy(d.type,null,m,s,s.mode,_),a.ref=s.ref,a.return=s,s.child=a)}if(x=a.child,!(a.lanes&_)){var I=x.memoizedProps;if(d=d.compare,d=d!==null?d:ip,d(I,m)&&a.ref===s.ref)return $u(a,s,_)}return s.flags|=1,a=Ac(x,m),a.ref=s.ref,a.return=s,s.child=a}function p0(a,s,d,m,_){if(a!==null){var x=a.memoizedProps;if(ip(x,m)&&a.ref===s.ref)if(jl=!1,s.pendingProps=m=x,(a.lanes&_)!==0)a.flags&131072&&(jl=!0);else return s.lanes=a.lanes,$u(a,s,_)}return y0(a,s,d,m,_)}function m0(a,s,d){var m=s.pendingProps,_=m.children,x=a!==null?a.memoizedState:null;if(m.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Go(Yh,$l),$l|=d;else{if(!(d&1073741824))return a=x!==null?x.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:a,cachePool:null,transitions:null},s.updateQueue=null,Go(Yh,$l),$l|=a,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=x!==null?x.baseLanes:d,Go(Yh,$l),$l|=m}else x!==null?(m=x.baseLanes|d,s.memoizedState=null):m=d,Go(Yh,$l),$l|=m;return sl(a,s,_,d),s.child}function g0(a,s){var d=s.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function y0(a,s,d,m,_){var x=Ns(d)?Uu:Ma.current;return x=Ec(s,x),Xr(s,_),d=q_(a,s,d,m,x,_),m=lh(),a!==null&&!jl?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~_,$u(a,s,_)):(ht&&m&&Xe(s),s.flags|=1,sl(a,s,d,_),s.child)}function eb(a,s,d,m,_){if(Ns(d)){var x=!0;$m(s)}else x=!1;if(Xr(s,_),s.stateNode===null)vs(a,s),Q_(s,d,m),u0(s,d,m,_),m=!0;else if(a===null){var I=s.stateNode,R=s.memoizedProps;I.props=R;var U=I.context,H=d.contextType;typeof H=="object"&&H!==null?H=ei(H):(H=Ns(d)?Uu:Ma.current,H=Ec(s,H));var J=d.getDerivedStateFromProps,he=typeof J=="function"||typeof I.getSnapshotBeforeUpdate=="function";he||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(R!==m||U!==H)&&AE(s,I,m,H),Ro=!1;var _e=s.memoizedState;I.state=_e,ti(s,m,I,_),U=s.memoizedState,R!==m||_e!==U||Ls.current||Ro?(typeof J=="function"&&(l0(s,d,J,m),U=s.memoizedState),(R=Ro||Ym(s,d,R,m,_e,U,H))?(he||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(s.flags|=4194308)):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=U),I.props=m,I.state=U,I.context=H,m=R):(typeof I.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{I=s.stateNode,Bo(a,s),R=s.memoizedProps,H=s.type===s.elementType?R:Pc(s.type,R),I.props=H,he=s.pendingProps,_e=I.context,U=d.contextType,typeof U=="object"&&U!==null?U=ei(U):(U=Ns(d)?Uu:Ma.current,U=Ec(s,U));var Te=d.getDerivedStateFromProps;(J=typeof Te=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(R!==he||_e!==U)&&AE(s,I,m,U),Ro=!1,_e=s.memoizedState,I.state=_e,ti(s,m,I,_);var Ne=s.memoizedState;R!==he||_e!==Ne||Ls.current||Ro?(typeof Te=="function"&&(l0(s,d,Te,m),Ne=s.memoizedState),(H=Ro||Ym(s,d,H,m,_e,Ne,U)||!1)?(J||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(m,Ne,U),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(m,Ne,U)),typeof I.componentDidUpdate=="function"&&(s.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof I.componentDidUpdate!="function"||R===a.memoizedProps&&_e===a.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&_e===a.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=Ne),I.props=m,I.state=Ne,I.context=U,m=H):(typeof I.componentDidUpdate!="function"||R===a.memoizedProps&&_e===a.memoizedState||(s.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&_e===a.memoizedState||(s.flags|=1024),m=!1)}return v0(a,s,d,m,x,_)}function v0(a,s,d,m,_,x){g0(a,s);var I=(s.flags&128)!==0;if(!m&&!I)return _&&Ay(s,d,!1),$u(a,s,x);m=s.stateNode,hM.current=s;var R=I&&typeof d.getDerivedStateFromError!="function"?null:m.render();return s.flags|=1,a!==null&&I?(s.child=hr(s,a.child,null,x),s.child=hr(s,null,R,x)):sl(a,s,R,x),s.memoizedState=m.state,_&&Ay(s,d,!0),s.child}function _0(a){var s=a.stateNode;s.pendingContext?Py(a,s.pendingContext,s.pendingContext!==s.context):s.context&&Py(a,s.context,!1),Wo(a,s.containerInfo)}function LE(a,s,d,m,_){return Sn(),Fn(_),s.flags|=256,sl(a,s,d,m),s.child}var b0={dehydrated:null,treeContext:null,retryLane:0};function w0(a){return{baseLanes:a,cachePool:null,transitions:null}}function x0(a,s,d){var m=s.pendingProps,_=ni.current,x=!1,I=(s.flags&128)!==0,R;if((R=I)||(R=a!==null&&a.memoizedState===null?!1:(_&2)!==0),R?(x=!0,s.flags&=-129):(a===null||a.memoizedState!==null)&&(_|=1),Go(ni,_&1),a===null)return Bt(s),a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(s.mode&1?a.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(I=m.children,a=m.fallback,x?(m=s.mode,x=s.child,I={mode:"hidden",children:I},!(m&1)&&x!==null?(x.childLanes=0,x.pendingProps=I):x=kp(I,m,0,null),a=Ip(a,m,d,null),x.return=s,a.return=s,x.sibling=a,s.child=x,s.child.memoizedState=w0(d),s.memoizedState=b0,a):C0(s,I));if(_=a.memoizedState,_!==null&&(R=_.dehydrated,R!==null))return By(a,s,I,m,R,_,d);if(x){x=m.fallback,I=s.mode,_=a.child,R=_.sibling;var U={mode:"hidden",children:m.children};return!(I&1)&&s.child!==_?(m=s.child,m.childLanes=0,m.pendingProps=U,s.deletions=null):(m=Ac(_,U),m.subtreeFlags=_.subtreeFlags&14680064),R!==null?x=Ac(R,x):(x=Ip(x,I,d,null),x.flags|=2),x.return=s,m.return=s,m.sibling=x,s.child=m,m=x,x=s.child,I=a.child.memoizedState,I=I===null?w0(d):{baseLanes:I.baseLanes|d,cachePool:null,transitions:I.transitions},x.memoizedState=I,x.childLanes=a.childLanes&~d,s.memoizedState=b0,m}return x=a.child,a=x.sibling,m=Ac(x,{mode:"visible",children:m.children}),!(s.mode&1)&&(m.lanes=d),m.return=s,m.sibling=null,a!==null&&(d=s.deletions,d===null?(s.deletions=[a],s.flags|=16):d.push(a)),s.child=m,s.memoizedState=null,m}function C0(a,s){return s=kp({mode:"visible",children:s},a.mode,0,null),s.return=a,a.child=s}function tb(a,s,d,m){return m!==null&&Fn(m),hr(s,a.child,null,d),a=C0(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function By(a,s,d,m,_,x,I){if(d)return s.flags&256?(s.flags&=-257,m=c0(Error(n(422))),tb(a,s,I,m)):s.memoizedState!==null?(s.child=a.child,s.flags|=128,null):(x=m.fallback,_=s.mode,m=kp({mode:"visible",children:m.children},_,0,null),x=Ip(x,_,I,null),x.flags|=2,m.return=s,x.return=s,m.sibling=x,s.child=m,s.mode&1&&hr(s,a.child,null,I),s.child.memoizedState=w0(I),s.memoizedState=b0,x);if(!(s.mode&1))return tb(a,s,I,null);if(_.data==="$!"){if(m=_.nextSibling&&_.nextSibling.dataset,m)var R=m.dgst;return m=R,x=Error(n(419)),m=c0(x,m,void 0),tb(a,s,I,m)}if(R=(I&a.childLanes)!==0,jl||R){if(m=pa,m!==null){switch(I&-I){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(m.suspendedLanes|I)?0:_,_!==0&&_!==x.retryLane&&(x.retryLane=_,Co(a,_),mu(m,a,_,-1))}return Ky(),m=c0(Error(n(421))),tb(a,s,I,m)}return _.data==="$?"?(s.flags|=128,s.child=a.child,s=Jh.bind(null,a),_._reactRetry=s,null):(a=x.treeContext,tt=uu(_.nextSibling),rt=s,ht=!0,gt=null,a!==null&&(j[W++]=Se,j[W++]=Pe,j[W++]=se,Se=a.id,Pe=a.overflow,se=s),s=C0(s,m.children),s.flags|=4096,s)}function NE(a,s,d){a.lanes|=s;var m=a.alternate;m!==null&&(m.lanes|=s),qr(a.return,s,d)}function ta(a,s,d,m,_){var x=a.memoizedState;x===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:_}:(x.isBackwards=s,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=d,x.tailMode=_)}function ha(a,s,d){var m=s.pendingProps,_=m.revealOrder,x=m.tail;if(sl(a,s,m.children,d),m=ni.current,m&2)m=m&1|2,s.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&NE(a,d,s);else if(a.tag===19)NE(a,d,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}if(Go(ni,m),!(s.mode&1))s.memoizedState=null;else switch(_){case"forwards":for(d=s.child,_=null;d!==null;)a=d.alternate,a!==null&&fu(a)===null&&(_=d),d=d.sibling;d=_,d===null?(_=s.child,s.child=null):(_=d.sibling,d.sibling=null),ta(s,!1,_,d,x);break;case"backwards":for(d=null,_=s.child,s.child=null;_!==null;){if(a=_.alternate,a!==null&&fu(a)===null){s.child=_;break}a=_.sibling,_.sibling=d,d=_,_=a}ta(s,!0,d,null,x);break;case"together":ta(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vs(a,s){!(s.mode&1)&&a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2)}function $u(a,s,d){if(a!==null&&(s.dependencies=a.dependencies),ld|=s.lanes,!(d&s.childLanes))return null;if(a!==null&&s.child!==a.child)throw Error(n(153));if(s.child!==null){for(a=s.child,d=Ac(a,a.pendingProps),s.child=d,d.return=s;a.sibling!==null;)a=a.sibling,d=d.sibling=Ac(a,a.pendingProps),d.return=s;d.sibling=null}return s.child}function Yo(a,s,d){switch(s.tag){case 3:_0(s),Sn();break;case 5:hu(s);break;case 1:Ns(s.type)&&$m(s);break;case 4:Wo(s,s.stateNode.containerInfo);break;case 10:var m=s.type._context,_=s.memoizedProps.value;Go(Lr,m._currentValue),m._currentValue=_;break;case 13:if(m=s.memoizedState,m!==null)return m.dehydrated!==null?(Go(ni,ni.current&1),s.flags|=128,null):d&s.child.childLanes?x0(a,s,d):(Go(ni,ni.current&1),a=$u(a,s,d),a!==null?a.sibling:null);Go(ni,ni.current&1);break;case 19:if(m=(d&s.childLanes)!==0,a.flags&128){if(m)return ha(a,s,d);s.flags|=128}if(_=s.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Go(ni,ni.current),m)break;return null;case 22:case 23:return s.lanes=0,m0(a,s,d)}return $u(a,s,d)}var nb,rb,S0,id;nb=function(a,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},rb=function(){},S0=function(a,s,d,m){var _=a.memoizedProps;if(_!==m){a=s.stateNode,zs(Sa.current);var x=null;switch(d){case"input":_=ee(a,_),m=ee(a,m),x=[];break;case"select":_=fe({},_,{value:void 0}),m=fe({},m,{value:void 0}),x=[];break;case"textarea":_=mt(a,_),m=mt(a,m),x=[];break;default:typeof _.onClick!="function"&&typeof m.onClick=="function"&&(a.onclick=ih)}cn(d,m);var I;d=null;for(H in _)if(!m.hasOwnProperty(H)&&_.hasOwnProperty(H)&&_[H]!=null)if(H==="style"){var R=_[H];for(I in R)R.hasOwnProperty(I)&&(d||(d={}),d[I]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?x||(x=[]):(x=x||[]).push(H,null));for(H in m){var U=m[H];if(R=_!=null?_[H]:void 0,m.hasOwnProperty(H)&&U!==R&&(U!=null||R!=null))if(H==="style")if(R){for(I in R)!R.hasOwnProperty(I)||U&&U.hasOwnProperty(I)||(d||(d={}),d[I]="");for(I in U)U.hasOwnProperty(I)&&R[I]!==U[I]&&(d||(d={}),d[I]=U[I])}else d||(x||(x=[]),x.push(H,d)),d=U;else H==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,R=R?R.__html:void 0,U!=null&&R!==U&&(x=x||[]).push(H,U)):H==="children"?typeof U!="string"&&typeof U!="number"||(x=x||[]).push(H,""+U):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(U!=null&&H==="onScroll"&&qo("scroll",a),x||R===U||(x=[])):(x=x||[]).push(H,U))}d&&(x=x||[]).push("style",d);var H=x;(s.updateQueue=H)&&(s.flags|=4)}},id=function(a,s,d,m){d!==m&&(s.flags|=4)};function ad(a,s){if(!ht)switch(a.tailMode){case"hidden":s=a.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function _s(a){var s=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(s)for(var _=a.child;_!==null;)d|=_.lanes|_.childLanes,m|=_.subtreeFlags&14680064,m|=_.flags&14680064,_.return=a,_=_.sibling;else for(_=a.child;_!==null;)d|=_.lanes|_.childLanes,m|=_.subtreeFlags,m|=_.flags,_.return=a,_=_.sibling;return a.subtreeFlags|=m,a.childLanes=d,s}function fM(a,s,d){var m=s.pendingProps;switch(et(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(s),null;case 1:return Ns(s.type)&&Tc(),_s(s),null;case 3:return m=s.stateNode,ii(),oi(Ls),oi(Ma),Hm(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(a===null||a.child===null)&&(en(s)?s.flags|=4:a===null||a.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,gt!==null&&(mb(gt),gt=null))),rb(a,s),_s(s),null;case 5:Bl(s);var _=zs(Fs.current);if(d=s.type,a!==null&&s.stateNode!=null)S0(a,s,d,m,_),a.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!m){if(s.stateNode===null)throw Error(n(166));return _s(s),null}if(a=zs(Sa.current),en(s)){m=s.stateNode,d=s.type;var x=s.memoizedProps;switch(m[Ll]=s,m[Nl]=x,a=(s.mode&1)!==0,d){case"dialog":qo("cancel",m),qo("close",m);break;case"iframe":case"object":case"embed":qo("load",m);break;case"video":case"audio":for(_=0;_<lu.length;_++)qo(lu[_],m);break;case"source":qo("error",m);break;case"img":case"image":case"link":qo("error",m),qo("load",m);break;case"details":qo("toggle",m);break;case"input":ye(m,x),qo("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!x.multiple},qo("invalid",m);break;case"textarea":zt(m,x),qo("invalid",m)}cn(d,x),_=null;for(var I in x)if(x.hasOwnProperty(I)){var R=x[I];I==="children"?typeof R=="string"?m.textContent!==R&&(x.suppressHydrationWarning!==!0&&oh(m.textContent,R,a),_=["children",R]):typeof R=="number"&&m.textContent!==""+R&&(x.suppressHydrationWarning!==!0&&oh(m.textContent,R,a),_=["children",""+R]):o.hasOwnProperty(I)&&R!=null&&I==="onScroll"&&qo("scroll",m)}switch(d){case"input":Ae(m),$e(m,x,!0);break;case"textarea":Ae(m),Zt(m);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(m.onclick=ih)}m=_,s.updateQueue=m,m!==null&&(s.flags|=4)}else{I=_.nodeType===9?_:_.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=We(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=I.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof m.is=="string"?a=I.createElement(d,{is:m.is}):(a=I.createElement(d),d==="select"&&(I=a,m.multiple?I.multiple=!0:m.size&&(I.size=m.size))):a=I.createElementNS(a,d),a[Ll]=s,a[Nl]=m,nb(a,s,!1,!1),s.stateNode=a;e:{switch(I=an(d,m),d){case"dialog":qo("cancel",a),qo("close",a),_=m;break;case"iframe":case"object":case"embed":qo("load",a),_=m;break;case"video":case"audio":for(_=0;_<lu.length;_++)qo(lu[_],a);_=m;break;case"source":qo("error",a),_=m;break;case"img":case"image":case"link":qo("error",a),qo("load",a),_=m;break;case"details":qo("toggle",a),_=m;break;case"input":ye(a,m),_=ee(a,m),qo("invalid",a);break;case"option":_=m;break;case"select":a._wrapperState={wasMultiple:!!m.multiple},_=fe({},m,{value:void 0}),qo("invalid",a);break;case"textarea":zt(a,m),_=mt(a,m),qo("invalid",a);break;default:_=m}cn(d,_),R=_;for(x in R)if(R.hasOwnProperty(x)){var U=R[x];x==="style"?St(a,U):x==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Dt(a,U)):x==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&qt(a,U):typeof U=="number"&&qt(a,""+U):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(o.hasOwnProperty(x)?U!=null&&x==="onScroll"&&qo("scroll",a):U!=null&&D(a,x,U,I))}switch(d){case"input":Ae(a),$e(a,m,!1);break;case"textarea":Ae(a),Zt(a);break;case"option":m.value!=null&&a.setAttribute("value",""+ut(m.value));break;case"select":a.multiple=!!m.multiple,x=m.value,x!=null?wt(a,!!m.multiple,x,!1):m.defaultValue!=null&&wt(a,!!m.multiple,m.defaultValue,!0);break;default:typeof _.onClick=="function"&&(a.onclick=ih)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return _s(s),null;case 6:if(a&&s.stateNode!=null)id(a,s,a.memoizedProps,m);else{if(typeof m!="string"&&s.stateNode===null)throw Error(n(166));if(d=zs(Fs.current),zs(Sa.current),en(s)){if(m=s.stateNode,d=s.memoizedProps,m[Ll]=s,(x=m.nodeValue!==d)&&(a=rt,a!==null))switch(a.tag){case 3:oh(m.nodeValue,d,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&oh(m.nodeValue,d,(a.mode&1)!==0)}x&&(s.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ll]=s,s.stateNode=m}return _s(s),null;case 13:if(oi(ni),m=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(ht&&tt!==null&&s.mode&1&&!(s.flags&128))yn(),Sn(),s.flags|=98560,x=!1;else if(x=en(s),m!==null&&m.dehydrated!==null){if(a===null){if(!x)throw Error(n(318));if(x=s.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Ll]=s}else Sn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;_s(s),x=!1}else gt!==null&&(mb(gt),gt=null),x=!0;if(!x)return s.flags&65536?s:null}return s.flags&128?(s.lanes=d,s):(m=m!==null,m!==(a!==null&&a.memoizedState!==null)&&m&&(s.child.flags|=8192,s.mode&1&&(a===null||ni.current&1?Ha===0&&(Ha=3):Ky())),s.updateQueue!==null&&(s.flags|=4),_s(s),null);case 4:return ii(),rb(a,s),a===null&&wc(s.stateNode.containerInfo),_s(s),null;case 10:return xo(s.type._context),_s(s),null;case 17:return Ns(s.type)&&Tc(),_s(s),null;case 19:if(oi(ni),x=s.memoizedState,x===null)return _s(s),null;if(m=(s.flags&128)!==0,I=x.rendering,I===null)if(m)ad(x,!1);else{if(Ha!==0||a!==null&&a.flags&128)for(a=s.child;a!==null;){if(I=fu(a),I!==null){for(s.flags|=128,ad(x,!1),m=I.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),s.subtreeFlags=0,m=d,d=s.child;d!==null;)x=d,a=m,x.flags&=14680066,I=x.alternate,I===null?(x.childLanes=0,x.lanes=a,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=I.childLanes,x.lanes=I.lanes,x.child=I.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=I.memoizedProps,x.memoizedState=I.memoizedState,x.updateQueue=I.updateQueue,x.type=I.type,a=I.dependencies,x.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return Go(ni,ni.current&1|2),s.child}a=a.sibling}x.tail!==null&&lo()>tg&&(s.flags|=128,m=!0,ad(x,!1),s.lanes=4194304)}else{if(!m)if(a=fu(I),a!==null){if(s.flags|=128,m=!0,d=a.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),ad(x,!0),x.tail===null&&x.tailMode==="hidden"&&!I.alternate&&!ht)return _s(s),null}else 2*lo()-x.renderingStartTime>tg&&d!==1073741824&&(s.flags|=128,m=!0,ad(x,!1),s.lanes=4194304);x.isBackwards?(I.sibling=s.child,s.child=I):(d=x.last,d!==null?d.sibling=I:s.child=I,x.last=I)}return x.tail!==null?(s=x.tail,x.rendering=s,x.tail=s.sibling,x.renderingStartTime=lo(),s.sibling=null,d=ni.current,Go(ni,m?d&1|2:d&1),s):(_s(s),null);case 22:case 23:return O0(),m=s.memoizedState!==null,a!==null&&a.memoizedState!==null!==m&&(s.flags|=8192),m&&s.mode&1?$l&1073741824&&(_s(s),s.subtreeFlags&6&&(s.flags|=8192)):_s(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function pM(a,s){switch(et(s),s.tag){case 1:return Ns(s.type)&&Tc(),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return ii(),oi(Ls),oi(Ma),Hm(),a=s.flags,a&65536&&!(a&128)?(s.flags=a&-65537|128,s):null;case 5:return Bl(s),null;case 13:if(oi(ni),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Sn()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return oi(ni),null;case 4:return ii(),null;case 10:return xo(s.type._context),null;case 22:case 23:return O0(),null;case 24:return null;default:return null}}var ob=!1,js=!1,mM=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function Zm(a,s){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){na(a,s,m)}else d.current=null}function E0(a,s,d){try{d()}catch(m){na(a,s,m)}}var FE=!1;function ib(a,s){if(nd=Ca,a=Dl(),Pn(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var _=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{d.nodeType,x.nodeType}catch{d=null;break e}var I=0,R=-1,U=-1,H=0,J=0,he=a,_e=null;t:for(;;){for(var Te;he!==d||_!==0&&he.nodeType!==3||(R=I+_),he!==x||m!==0&&he.nodeType!==3||(U=I+m),he.nodeType===3&&(I+=he.nodeValue.length),(Te=he.firstChild)!==null;)_e=he,he=Te;for(;;){if(he===a)break t;if(_e===d&&++H===_&&(R=I),_e===x&&++J===m&&(U=I),(Te=he.nextSibling)!==null)break;he=_e,_e=he.parentNode}he=Te}d=R===-1||U===-1?null:{start:R,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(dp={focusedElem:a,selectionRange:d},Ca=!1,Jn=s;Jn!==null;)if(s=Jn,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,Jn=a;else for(;Jn!==null;){s=Jn;try{var Ne=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var Ve=Ne.memoizedProps,je=Ne.memoizedState,Oe=s.stateNode,Re=Oe.getSnapshotBeforeUpdate(s.elementType===s.type?Ve:Pc(s.type,Ve),je);Oe.__reactInternalSnapshotBeforeUpdate=Re}break;case 3:var qe=s.stateNode.containerInfo;qe.nodeType===1?qe.textContent="":qe.nodeType===9&&qe.documentElement&&qe.removeChild(qe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(at){na(s,s.return,at)}if(a=s.sibling,a!==null){a.return=s.return,Jn=a;break}Jn=s.return}return Ne=FE,FE=!1,Ne}function sd(a,s,d){var m=s.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var _=m=m.next;do{if((_.tag&a)===a){var x=_.destroy;_.destroy=void 0,x!==void 0&&E0(s,d,x)}_=_.next}while(_!==m)}}function Uy(a,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&a)===a){var m=d.create;d.destroy=m()}d=d.next}while(d!==s)}}function Xm(a){var s=a.ref;if(s!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof s=="function"?s(a):s.current=a}}function ab(a){var s=a.alternate;s!==null&&(a.alternate=null,ab(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&(delete s[Ll],delete s[Nl],delete s[Um],delete s[j_],delete s[$_])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function sb(a){return a.tag===5||a.tag===3||a.tag===4}function zE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||sb(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function T0(a,s,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(a,s):d.insertBefore(a,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(a,d)):(s=d,s.appendChild(a)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=ih));else if(m!==4&&(a=a.child,a!==null))for(T0(a,s,d),a=a.sibling;a!==null;)T0(a,s,d),a=a.sibling}function I0(a,s,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,s?d.insertBefore(a,s):d.appendChild(a);else if(m!==4&&(a=a.child,a!==null))for(I0(a,s,d),a=a.sibling;a!==null;)I0(a,s,d),a=a.sibling}var bs=null,Hu=!1;function fa(a,s,d){for(d=d.child;d!==null;)lb(a,s,d),d=d.sibling}function lb(a,s,d){if(Mo&&typeof Mo.onCommitFiberUnmount=="function")try{Mo.onCommitFiberUnmount(ci,d)}catch{}switch(d.tag){case 5:js||Zm(d,s);case 6:var m=bs,_=Hu;bs=null,fa(a,s,d),bs=m,Hu=_,bs!==null&&(Hu?(a=bs,d=d.stateNode,a.nodeType===8?a.parentNode.removeChild(d):a.removeChild(d)):bs.removeChild(d.stateNode));break;case 18:bs!==null&&(Hu?(a=bs,d=d.stateNode,a.nodeType===8?mp(a.parentNode,d):a.nodeType===1&&mp(a,d),Dr(a)):mp(bs,d.stateNode));break;case 4:m=bs,_=Hu,bs=d.stateNode.containerInfo,Hu=!0,fa(a,s,d),bs=m,Hu=_;break;case 0:case 11:case 14:case 15:if(!js&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){_=m=m.next;do{var x=_,I=x.destroy;x=x.tag,I!==void 0&&(x&2||x&4)&&E0(d,s,I),_=_.next}while(_!==m)}fa(a,s,d);break;case 1:if(!js&&(Zm(d,s),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(R){na(d,s,R)}fa(a,s,d);break;case 21:fa(a,s,d);break;case 22:d.mode&1?(js=(m=js)||d.memoizedState!==null,fa(a,s,d),js=m):fa(a,s,d);break;default:fa(a,s,d)}}function k0(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new mM),s.forEach(function(m){var _=GE.bind(null,a,m);d.has(m)||(d.add(m),m.then(_,_))})}}function ll(a,s){var d=s.deletions;if(d!==null)for(var m=0;m<d.length;m++){var _=d[m];try{var x=a,I=s,R=I;e:for(;R!==null;){switch(R.tag){case 5:bs=R.stateNode,Hu=!1;break e;case 3:bs=R.stateNode.containerInfo,Hu=!0;break e;case 4:bs=R.stateNode.containerInfo,Hu=!0;break e}R=R.return}if(bs===null)throw Error(n(160));lb(x,I,_),bs=null,Hu=!1;var U=_.alternate;U!==null&&(U.return=null),_.return=null}catch(H){na(_,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Qm(s,a),s=s.sibling}function Qm(a,s){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(ll(s,a),ul(a),m&4){try{sd(3,a,a.return),Uy(3,a)}catch(Ve){na(a,a.return,Ve)}try{sd(5,a,a.return)}catch(Ve){na(a,a.return,Ve)}}break;case 1:ll(s,a),ul(a),m&512&&d!==null&&Zm(d,d.return);break;case 5:if(ll(s,a),ul(a),m&512&&d!==null&&Zm(d,d.return),a.flags&32){var _=a.stateNode;try{qt(_,"")}catch(Ve){na(a,a.return,Ve)}}if(m&4&&(_=a.stateNode,_!=null)){var x=a.memoizedProps,I=d!==null?d.memoizedProps:x,R=a.type,U=a.updateQueue;if(a.updateQueue=null,U!==null)try{R==="input"&&x.type==="radio"&&x.name!=null&&Ie(_,x),an(R,I);var H=an(R,x);for(I=0;I<U.length;I+=2){var J=U[I],he=U[I+1];J==="style"?St(_,he):J==="dangerouslySetInnerHTML"?Dt(_,he):J==="children"?qt(_,he):D(_,J,he,H)}switch(R){case"input":ge(_,x);break;case"textarea":Pt(_,x);break;case"select":var _e=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!x.multiple;var Te=x.value;Te!=null?wt(_,!!x.multiple,Te,!1):_e!==!!x.multiple&&(x.defaultValue!=null?wt(_,!!x.multiple,x.defaultValue,!0):wt(_,!!x.multiple,x.multiple?[]:"",!1))}_[Nl]=x}catch(Ve){na(a,a.return,Ve)}}break;case 6:if(ll(s,a),ul(a),m&4){if(a.stateNode===null)throw Error(n(162));_=a.stateNode,x=a.memoizedProps;try{_.nodeValue=x}catch(Ve){na(a,a.return,Ve)}}break;case 3:if(ll(s,a),ul(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Dr(s.containerInfo)}catch(Ve){na(a,a.return,Ve)}break;case 4:ll(s,a),ul(a);break;case 13:ll(s,a),ul(a),_=a.child,_.flags&8192&&(x=_.memoizedState!==null,_.stateNode.isHidden=x,!x||_.alternate!==null&&_.alternate.memoizedState!==null||(Zh=lo())),m&4&&k0(a);break;case 22:if(J=d!==null&&d.memoizedState!==null,a.mode&1?(js=(H=js)||J,ll(s,a),js=H):ll(s,a),ul(a),m&8192){if(H=a.memoizedState!==null,(a.stateNode.isHidden=H)&&!J&&a.mode&1)for(Jn=a,J=a.child;J!==null;){for(he=Jn=J;Jn!==null;){switch(_e=Jn,Te=_e.child,_e.tag){case 0:case 11:case 14:case 15:sd(4,_e,_e.return);break;case 1:Zm(_e,_e.return);var Ne=_e.stateNode;if(typeof Ne.componentWillUnmount=="function"){m=_e,d=_e.return;try{s=m,Ne.props=s.memoizedProps,Ne.state=s.memoizedState,Ne.componentWillUnmount()}catch(Ve){na(m,d,Ve)}}break;case 5:Zm(_e,_e.return);break;case 22:if(_e.memoizedState!==null){P0(he);continue}}Te!==null?(Te.return=_e,Jn=Te):P0(he)}J=J.sibling}e:for(J=null,he=a;;){if(he.tag===5){if(J===null){J=he;try{_=he.stateNode,H?(x=_.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(R=he.stateNode,U=he.memoizedProps.style,I=U!=null&&U.hasOwnProperty("display")?U.display:null,R.style.display=Et("display",I))}catch(Ve){na(a,a.return,Ve)}}}else if(he.tag===6){if(J===null)try{he.stateNode.nodeValue=H?"":he.memoizedProps}catch(Ve){na(a,a.return,Ve)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===a)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===a)break e;for(;he.sibling===null;){if(he.return===null||he.return===a)break e;J===he&&(J=null),he=he.return}J===he&&(J=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ll(s,a),ul(a),m&4&&k0(a);break;case 21:break;default:ll(s,a),ul(a)}}function ul(a){var s=a.flags;if(s&2){try{e:{for(var d=a.return;d!==null;){if(sb(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var _=m.stateNode;m.flags&32&&(qt(_,""),m.flags&=-33);var x=zE(a);I0(a,x,_);break;case 3:case 4:var I=m.stateNode.containerInfo,R=zE(a);T0(a,R,I);break;default:throw Error(n(161))}}catch(U){na(a,a.return,U)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function ub(a,s,d){Jn=a,jy(a)}function jy(a,s,d){for(var m=(a.mode&1)!==0;Jn!==null;){var _=Jn,x=_.child;if(_.tag===22&&m){var I=_.memoizedState!==null||ob;if(!I){var R=_.alternate,U=R!==null&&R.memoizedState!==null||js;R=ob;var H=js;if(ob=I,(js=U)&&!H)for(Jn=_;Jn!==null;)I=Jn,U=I.child,I.tag===22&&I.memoizedState!==null?A0(_):U!==null?(U.return=I,Jn=U):A0(_);for(;x!==null;)Jn=x,jy(x),x=x.sibling;Jn=_,ob=R,js=H}BE(a)}else _.subtreeFlags&8772&&x!==null?(x.return=_,Jn=x):BE(a)}}function BE(a){for(;Jn!==null;){var s=Jn;if(s.flags&8772){var d=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:js||Uy(5,s);break;case 1:var m=s.stateNode;if(s.flags&4&&!js)if(d===null)m.componentDidMount();else{var _=s.elementType===s.type?d.memoizedProps:Pc(s.type,d.memoizedProps);m.componentDidUpdate(_,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var x=s.updateQueue;x!==null&&da(s,x,m);break;case 3:var I=s.updateQueue;if(I!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}da(s,I,d)}break;case 5:var R=s.stateNode;if(d===null&&s.flags&4){d=R;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var J=H.memoizedState;if(J!==null){var he=J.dehydrated;he!==null&&Dr(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}js||s.flags&512&&Xm(s)}catch(_e){na(s,s.return,_e)}}if(s===a){Jn=null;break}if(d=s.sibling,d!==null){d.return=s.return,Jn=d;break}Jn=s.return}}function P0(a){for(;Jn!==null;){var s=Jn;if(s===a){Jn=null;break}var d=s.sibling;if(d!==null){d.return=s.return,Jn=d;break}Jn=s.return}}function A0(a){for(;Jn!==null;){var s=Jn;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Uy(4,s)}catch(U){na(s,d,U)}break;case 1:var m=s.stateNode;if(typeof m.componentDidMount=="function"){var _=s.return;try{m.componentDidMount()}catch(U){na(s,_,U)}}var x=s.return;try{Xm(s)}catch(U){na(s,x,U)}break;case 5:var I=s.return;try{Xm(s)}catch(U){na(s,I,U)}}}catch(U){na(s,s.return,U)}if(s===a){Jn=null;break}var R=s.sibling;if(R!==null){R.return=s.return,Jn=R;break}Jn=s.return}}var UE=Math.ceil,Jm=N.ReactCurrentDispatcher,$y=N.ReactCurrentOwner,pu=N.ReactCurrentBatchConfig,Po=0,pa=null,ai=null,Gi=0,$l=0,Yh=Sc(0),Ha=0,Hy=null,ld=0,eg=0,M0=0,xp=null,$s=null,Zh=0,tg=1/0,ud=null,Vy=!1,qy=null,uh=null,Cp=!1,ch=null,cb=0,Gy=0,db=null,hb=-1,fb=0;function cl(){return Po&6?lo():hb!==-1?hb:hb=lo()}function Xh(a){return a.mode&1?Po&2&&Gi!==0?Gi&-Gi:nr.transition!==null?(fb===0&&(fb=Je()),fb):(a=kn,a!==0||(a=window.event,a=a===void 0?16:Xc(a.type)),a):1}function mu(a,s,d,m){if(50<Gy)throw Gy=0,db=null,Error(n(185));It(a,d,m),(!(Po&2)||a!==pa)&&(a===pa&&(!(Po&2)&&(eg|=d),Ha===4&&dh(a,Gi)),Ea(a,m),d===1&&Po===0&&!(s.mode&1)&&(tg=lo()+500,kc&&u()))}function Ea(a,s){var d=a.callbackNode;be(a,s);var m=wr(a,a===pa?Gi:0);if(m===0)d!==null&&to(d),a.callbackNode=null,a.callbackPriority=0;else if(s=m&-m,a.callbackPriority!==s){if(d!=null&&to(d),s===1)a.tag===0?E($E.bind(null,a)):H_($E.bind(null,a)),pp(function(){!(Po&6)&&u()}),d=null;else{switch(yr(m)){case 1:d=$n;break;case 4:d=no;break;case 16:d=vr;break;case 536870912:d=ur;break;default:d=vr}d=B0(d,R0.bind(null,a))}a.callbackPriority=s,a.callbackNode=d}}function R0(a,s){if(hb=-1,fb=0,Po&6)throw Error(n(327));var d=a.callbackNode;if(Ep()&&a.callbackNode!==d)return null;var m=wr(a,a===pa?Gi:0);if(m===0)return null;if(m&30||m&a.expiredLanes||s)s=Yy(a,m);else{s=m;var _=Po;Po|=2;var x=D0();(pa!==a||Gi!==s)&&(ud=null,tg=lo()+500,cd(a,s));do try{Zy();break}catch(R){HE(a,R)}while(!0);_r(),Jm.current=x,Po=_,ai!==null?s=0:(pa=null,Gi=0,s=Ha)}if(s!==0){if(s===2&&(_=Ue(a),_!==0&&(m=_,s=pb(a,_))),s===1)throw d=Hy,cd(a,0),dh(a,m),Ea(a,lo()),d;if(s===6)dh(a,m);else{if(_=a.current.alternate,!(m&30)&&!jE(_)&&(s=Yy(a,m),s===2&&(x=Ue(a),x!==0&&(m=x,s=pb(a,x))),s===1))throw d=Hy,cd(a,0),dh(a,m),Ea(a,lo()),d;switch(a.finishedWork=_,a.finishedLanes=m,s){case 0:case 1:throw Error(n(345));case 2:Qh(a,$s,ud);break;case 3:if(dh(a,m),(m&130023424)===m&&(s=Zh+500-lo(),10<s)){if(wr(a,0)!==0)break;if(_=a.suspendedLanes,(_&m)!==m){cl(),a.pingedLanes|=a.suspendedLanes&_;break}a.timeoutHandle=hp(Qh.bind(null,a,$s,ud),s);break}Qh(a,$s,ud);break;case 4:if(dh(a,m),(m&4194240)===m)break;for(s=a.eventTimes,_=-1;0<m;){var I=31-Ji(m);x=1<<I,I=s[I],I>_&&(_=I),m&=~x}if(m=_,m=lo()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*UE(m/1960))-m,10<m){a.timeoutHandle=hp(Qh.bind(null,a,$s,ud),m);break}Qh(a,$s,ud);break;case 5:Qh(a,$s,ud);break;default:throw Error(n(329))}}}return Ea(a,lo()),a.callbackNode===d?R0.bind(null,a):null}function pb(a,s){var d=xp;return a.current.memoizedState.isDehydrated&&(cd(a,s).flags|=256),a=Yy(a,s),a!==2&&(s=$s,$s=d,s!==null&&mb(s)),a}function mb(a){$s===null?$s=a:$s.push.apply($s,a)}function jE(a){for(var s=a;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var _=d[m],x=_.getSnapshot;_=_.value;try{if(!gs(x(),_))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function dh(a,s){for(s&=~M0,s&=~eg,a.suspendedLanes|=s,a.pingedLanes&=~s,a=a.expirationTimes;0<s;){var d=31-Ji(s),m=1<<d;a[d]=-1,s&=~m}}function $E(a){if(Po&6)throw Error(n(327));Ep();var s=wr(a,0);if(!(s&1))return Ea(a,lo()),null;var d=Yy(a,s);if(a.tag!==0&&d===2){var m=Ue(a);m!==0&&(s=m,d=pb(a,m))}if(d===1)throw d=Hy,cd(a,0),dh(a,s),Ea(a,lo()),d;if(d===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=s,Qh(a,$s,ud),Ea(a,lo()),null}function Wy(a,s){var d=Po;Po|=1;try{return a(s)}finally{Po=d,Po===0&&(tg=lo()+500,kc&&u())}}function Sp(a){ch!==null&&ch.tag===0&&!(Po&6)&&Ep();var s=Po;Po|=1;var d=pu.transition,m=kn;try{if(pu.transition=null,kn=1,a)return a()}finally{kn=m,pu.transition=d,Po=s,!(Po&6)&&u()}}function O0(){$l=Yh.current,oi(Yh)}function cd(a,s){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,ky(d)),ai!==null)for(d=ai.return;d!==null;){var m=d;switch(et(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Tc();break;case 3:ii(),oi(Ls),oi(Ma),Hm();break;case 5:Bl(m);break;case 4:ii();break;case 13:oi(ni);break;case 19:oi(ni);break;case 10:xo(m.type._context);break;case 22:case 23:O0()}d=d.return}if(pa=a,ai=a=Ac(a.current,null),Gi=$l=s,Ha=0,Hy=null,M0=eg=ld=0,$s=xp=null,xi!==null){for(s=0;s<xi.length;s++)if(d=xi[s],m=d.interleaved,m!==null){d.interleaved=null;var _=m.next,x=d.pending;if(x!==null){var I=x.next;x.next=_,m.next=I}d.pending=m}xi=null}return a}function HE(a,s){do{var d=ai;try{if(_r(),Bs.current=go,V_){for(var m=Ei.memoizedState;m!==null;){var _=m.queue;_!==null&&(_.pending=null),m=m.next}V_=!1}if(ys=0,$a=Ko=Ei=null,Vm=!1,My=0,$y.current=null,d===null||d.return===null){Ha=1,Hy=s,ai=null;break}e:{var x=a,I=d.return,R=d,U=s;if(s=Gi,R.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var H=U,J=R,he=J.tag;if(!(J.mode&1)&&(he===0||he===11||he===15)){var _e=J.alternate;_e?(J.updateQueue=_e.updateQueue,J.memoizedState=_e.memoizedState,J.lanes=_e.lanes):(J.updateQueue=null,J.memoizedState=null)}var Te=OE(I);if(Te!==null){Te.flags&=-257,DE(Te,I,R,x,s),Te.mode&1&&RE(x,H,s),s=Te,U=H;var Ne=s.updateQueue;if(Ne===null){var Ve=new Set;Ve.add(U),s.updateQueue=Ve}else Ne.add(U);break e}else{if(!(s&1)){RE(x,H,s),Ky();break e}U=Error(n(426))}}else if(ht&&R.mode&1){var je=OE(I);if(je!==null){!(je.flags&65536)&&(je.flags|=256),DE(je,I,R,x,s),Fn(wp(U,R));break e}}x=U=wp(U,R),Ha!==4&&(Ha=2),xp===null?xp=[x]:xp.push(x),x=I;do{switch(x.tag){case 3:x.flags|=65536,s&=-s,x.lanes|=s;var Oe=h0(x,U,s);ja(x,Oe);break e;case 1:R=U;var Re=x.type,qe=x.stateNode;if(!(x.flags&128)&&(typeof Re.getDerivedStateFromError=="function"||qe!==null&&typeof qe.componentDidCatch=="function"&&(uh===null||!uh.has(qe)))){x.flags|=65536,s&=-s,x.lanes|=s;var at=ME(x,R,s);ja(x,at);break e}}x=x.return}while(x!==null)}L0(d)}catch(_t){s=_t,ai===d&&d!==null&&(ai=d=d.return);continue}break}while(!0)}function D0(){var a=Jm.current;return Jm.current=go,a===null?go:a}function Ky(){(Ha===0||Ha===3||Ha===2)&&(Ha=4),pa===null||!(ld&268435455)&&!(eg&268435455)||dh(pa,Gi)}function Yy(a,s){var d=Po;Po|=2;var m=D0();(pa!==a||Gi!==s)&&(ud=null,cd(a,s));do try{gu();break}catch(_){HE(a,_)}while(!0);if(_r(),Po=d,Jm.current=m,ai!==null)throw Error(n(261));return pa=null,Gi=0,Ha}function gu(){for(;ai!==null;)VE(ai)}function Zy(){for(;ai!==null&&!la();)VE(ai)}function VE(a){var s=z0(a.alternate,a,$l);a.memoizedProps=a.pendingProps,s===null?L0(a):ai=s,$y.current=null}function L0(a){var s=a;do{var d=s.alternate;if(a=s.return,s.flags&32768){if(d=pM(d,s),d!==null){d.flags&=32767,ai=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Ha=6,ai=null;return}}else if(d=fM(d,s,$l),d!==null){ai=d;return}if(s=s.sibling,s!==null){ai=s;return}ai=s=a}while(s!==null);Ha===0&&(Ha=5)}function Qh(a,s,d){var m=kn,_=pu.transition;try{pu.transition=null,kn=1,qE(a,s,d,m)}finally{pu.transition=_,kn=m}return null}function qE(a,s,d,m){do Ep();while(ch!==null);if(Po&6)throw Error(n(327));d=a.finishedWork;var _=a.finishedLanes;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var x=d.lanes|d.childLanes;if(Gt(a,x),a===pa&&(ai=pa=null,Gi=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Cp||(Cp=!0,B0(vr,function(){return Ep(),null})),x=(d.flags&15990)!==0,d.subtreeFlags&15990||x){x=pu.transition,pu.transition=null;var I=kn;kn=1;var R=Po;Po|=4,$y.current=null,ib(a,d),Qm(d,a),Rs(dp),Ca=!!nd,dp=nd=null,a.current=d,ub(d),ua(),Po=R,kn=I,pu.transition=x}else a.current=d;if(Cp&&(Cp=!1,ch=a,cb=_),x=a.pendingLanes,x===0&&(uh=null),Vi(d.stateNode),Ea(a,lo()),s!==null)for(m=a.onRecoverableError,d=0;d<s.length;d++)_=s[d],m(_.value,{componentStack:_.stack,digest:_.digest});if(Vy)throw Vy=!1,a=qy,qy=null,a;return cb&1&&a.tag!==0&&Ep(),x=a.pendingLanes,x&1?a===db?Gy++:(Gy=0,db=a):Gy=0,u(),null}function Ep(){if(ch!==null){var a=yr(cb),s=pu.transition,d=kn;try{if(pu.transition=null,kn=16>a?16:a,ch===null)var m=!1;else{if(a=ch,ch=null,cb=0,Po&6)throw Error(n(331));var _=Po;for(Po|=4,Jn=a.current;Jn!==null;){var x=Jn,I=x.child;if(Jn.flags&16){var R=x.deletions;if(R!==null){for(var U=0;U<R.length;U++){var H=R[U];for(Jn=H;Jn!==null;){var J=Jn;switch(J.tag){case 0:case 11:case 15:sd(8,J,x)}var he=J.child;if(he!==null)he.return=J,Jn=he;else for(;Jn!==null;){J=Jn;var _e=J.sibling,Te=J.return;if(ab(J),J===H){Jn=null;break}if(_e!==null){_e.return=Te,Jn=_e;break}Jn=Te}}}var Ne=x.alternate;if(Ne!==null){var Ve=Ne.child;if(Ve!==null){Ne.child=null;do{var je=Ve.sibling;Ve.sibling=null,Ve=je}while(Ve!==null)}}Jn=x}}if(x.subtreeFlags&2064&&I!==null)I.return=x,Jn=I;else e:for(;Jn!==null;){if(x=Jn,x.flags&2048)switch(x.tag){case 0:case 11:case 15:sd(9,x,x.return)}var Oe=x.sibling;if(Oe!==null){Oe.return=x.return,Jn=Oe;break e}Jn=x.return}}var Re=a.current;for(Jn=Re;Jn!==null;){I=Jn;var qe=I.child;if(I.subtreeFlags&2064&&qe!==null)qe.return=I,Jn=qe;else e:for(I=Re;Jn!==null;){if(R=Jn,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:Uy(9,R)}}catch(_t){na(R,R.return,_t)}if(R===I){Jn=null;break e}var at=R.sibling;if(at!==null){at.return=R.return,Jn=at;break e}Jn=R.return}}if(Po=_,u(),Mo&&typeof Mo.onPostCommitFiberRoot=="function")try{Mo.onPostCommitFiberRoot(ci,a)}catch{}m=!0}return m}finally{kn=d,pu.transition=s}}return!1}function N0(a,s,d){s=wp(d,s),s=h0(a,s,1),a=ro(a,s,1),s=cl(),a!==null&&(It(a,1,s),Ea(a,s))}function na(a,s,d){if(a.tag===3)N0(a,a,d);else for(;s!==null;){if(s.tag===3){N0(s,a,d);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(uh===null||!uh.has(m))){a=wp(d,a),a=ME(s,a,1),s=ro(s,a,1),a=cl(),s!==null&&(It(s,1,a),Ea(s,a));break}}s=s.return}}function gM(a,s,d){var m=a.pingCache;m!==null&&m.delete(s),s=cl(),a.pingedLanes|=a.suspendedLanes&d,pa===a&&(Gi&d)===d&&(Ha===4||Ha===3&&(Gi&130023424)===Gi&&500>lo()-Zh?cd(a,0):M0|=d),Ea(a,s)}function F0(a,s){s===0&&(a.mode&1?(s=Or,Or<<=1,!(Or&130023424)&&(Or=4194304)):s=1);var d=cl();a=Co(a,s),a!==null&&(It(a,s,d),Ea(a,d))}function Jh(a){var s=a.memoizedState,d=0;s!==null&&(d=s.retryLane),F0(a,d)}function GE(a,s){var d=0;switch(a.tag){case 13:var m=a.stateNode,_=a.memoizedState;_!==null&&(d=_.retryLane);break;case 19:m=a.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(s),F0(a,d)}var z0;z0=function(a,s,d){if(a!==null)if(a.memoizedProps!==s.pendingProps||Ls.current)jl=!0;else{if(!(a.lanes&d)&&!(s.flags&128))return jl=!1,Yo(a,s,d);jl=!!(a.flags&131072)}else jl=!1,ht&&s.flags&1048576&&Me(s,M,s.index);switch(s.lanes=0,s.tag){case 2:var m=s.type;vs(a,s),a=s.pendingProps;var _=Ec(s,Ma.current);Xr(s,d),_=q_(null,s,m,a,_,d);var x=lh();return s.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ns(m)?(x=!0,$m(s)):x=!1,s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Fl(s),_.updater=Km,s.stateNode=_,_._reactInternals=s,u0(s,m,a,d),s=v0(null,s,m,!0,x,d)):(s.tag=0,ht&&x&&Xe(s),sl(null,s,_,d),s=s.child),s;case 16:m=s.elementType;e:{switch(vs(a,s),a=s.pendingProps,_=m._init,m=_(m._payload),s.type=m,_=s.tag=KE(m),a=Pc(m,a),_){case 0:s=y0(null,s,m,a,d);break e;case 1:s=eb(null,s,m,a,d);break e;case 11:s=f0(null,s,m,a,d);break e;case 14:s=J_(null,s,m,Pc(m.type,a),d);break e}throw Error(n(306,m,""))}return s;case 0:return m=s.type,_=s.pendingProps,_=s.elementType===m?_:Pc(m,_),y0(a,s,m,_,d);case 1:return m=s.type,_=s.pendingProps,_=s.elementType===m?_:Pc(m,_),eb(a,s,m,_,d);case 3:e:{if(_0(s),a===null)throw Error(n(387));m=s.pendingProps,x=s.memoizedState,_=x.element,Bo(a,s),ti(s,m,null,d);var I=s.memoizedState;if(m=I.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){_=wp(Error(n(423)),s),s=LE(a,s,m,d,_);break e}else if(m!==_){_=wp(Error(n(424)),s),s=LE(a,s,m,d,_);break e}else for(tt=uu(s.stateNode.containerInfo.firstChild),rt=s,ht=!0,gt=null,d=Nn(s,null,m,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Sn(),m===_){s=$u(a,s,d);break e}sl(a,s,m,d)}s=s.child}return s;case 5:return hu(s),a===null&&Bt(s),m=s.type,_=s.pendingProps,x=a!==null?a.memoizedProps:null,I=_.children,ah(m,_)?I=null:x!==null&&ah(m,x)&&(s.flags|=32),g0(a,s),sl(a,s,I,d),s.child;case 6:return a===null&&Bt(s),null;case 13:return x0(a,s,d);case 4:return Wo(s,s.stateNode.containerInfo),m=s.pendingProps,a===null?s.child=hr(s,null,m,d):sl(a,s,m,d),s.child;case 11:return m=s.type,_=s.pendingProps,_=s.elementType===m?_:Pc(m,_),f0(a,s,m,_,d);case 7:return sl(a,s,s.pendingProps,d),s.child;case 8:return sl(a,s,s.pendingProps.children,d),s.child;case 12:return sl(a,s,s.pendingProps.children,d),s.child;case 10:e:{if(m=s.type._context,_=s.pendingProps,x=s.memoizedProps,I=_.value,Go(Lr,m._currentValue),m._currentValue=I,x!==null)if(gs(x.value,I)){if(x.children===_.children&&!Ls.current){s=$u(a,s,d);break e}}else for(x=s.child,x!==null&&(x.return=s);x!==null;){var R=x.dependencies;if(R!==null){I=x.child;for(var U=R.firstContext;U!==null;){if(U.context===m){if(x.tag===1){U=Ci(-1,d&-d),U.tag=2;var H=x.updateQueue;if(H!==null){H=H.shared;var J=H.pending;J===null?U.next=U:(U.next=J.next,J.next=U),H.pending=U}}x.lanes|=d,U=x.alternate,U!==null&&(U.lanes|=d),qr(x.return,d,s),R.lanes|=d;break}U=U.next}}else if(x.tag===10)I=x.type===s.type?null:x.child;else if(x.tag===18){if(I=x.return,I===null)throw Error(n(341));I.lanes|=d,R=I.alternate,R!==null&&(R.lanes|=d),qr(I,d,s),I=x.sibling}else I=x.child;if(I!==null)I.return=x;else for(I=x;I!==null;){if(I===s){I=null;break}if(x=I.sibling,x!==null){x.return=I.return,I=x;break}I=I.return}x=I}sl(a,s,_.children,d),s=s.child}return s;case 9:return _=s.type,m=s.pendingProps.children,Xr(s,d),_=ei(_),m=m(_),s.flags|=1,sl(a,s,m,d),s.child;case 14:return m=s.type,_=Pc(m,s.pendingProps),_=Pc(m.type,_),J_(a,s,m,_,d);case 15:return p0(a,s,s.type,s.pendingProps,d);case 17:return m=s.type,_=s.pendingProps,_=s.elementType===m?_:Pc(m,_),vs(a,s),s.tag=1,Ns(m)?(a=!0,$m(s)):a=!1,Xr(s,d),Q_(s,m,_),u0(s,m,_,d),v0(null,s,m,!0,a,d);case 19:return ha(a,s,d);case 22:return m0(a,s,d)}throw Error(n(156,s.tag))};function B0(a,s){return qn(a,s)}function WE(a,s,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vu(a,s,d,m){return new WE(a,s,d,m)}function Tp(a){return a=a.prototype,!(!a||!a.isReactComponent)}function KE(a){if(typeof a=="function")return Tp(a)?1:0;if(a!=null){if(a=a.$$typeof,a===K)return 11;if(a===oe)return 14}return 2}function Ac(a,s){var d=a.alternate;return d===null?(d=Vu(a.tag,s,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=s,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,s=a.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Xy(a,s,d,m,_,x){var I=2;if(m=a,typeof a=="function")Tp(a)&&(I=1);else if(typeof a=="string")I=5;else e:switch(a){case V:return Ip(d.children,_,x,s);case G:I=8,_|=8;break;case q:return a=Vu(12,d,s,_|2),a.elementType=q,a.lanes=x,a;case te:return a=Vu(13,d,s,_),a.elementType=te,a.lanes=x,a;case re:return a=Vu(19,d,s,_),a.elementType=re,a.lanes=x,a;case Q:return kp(d,_,x,s);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case z:I=10;break e;case $:I=9;break e;case K:I=11;break e;case oe:I=14;break e;case ue:I=16,m=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return s=Vu(I,d,s,_),s.elementType=a,s.type=m,s.lanes=x,s}function Ip(a,s,d,m){return a=Vu(7,a,m,s),a.lanes=d,a}function kp(a,s,d,m){return a=Vu(22,a,m,s),a.elementType=Q,a.lanes=d,a.stateNode={isHidden:!1},a}function U0(a,s,d){return a=Vu(6,a,null,s),a.lanes=d,a}function j0(a,s,d){return s=Vu(4,a.children!==null?a.children:[],a.key,s),s.lanes=d,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function yM(a,s,d,m,_){this.tag=s,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mt(0),this.expirationTimes=Mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mt(0),this.identifierPrefix=m,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function $0(a,s,d,m,_,x,I,R,U){return a=new yM(a,s,d,R,U),s===1?(s=1,x===!0&&(s|=8)):s=0,x=Vu(3,null,null,s),a.current=x,x.stateNode=a,x.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fl(x),a}function ng(a,s,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:m==null?null:""+m,children:a,containerInfo:s,implementation:d}}function hh(a){if(!a)return Bu;a=a._reactInternals;e:{if(ft(a)!==a||a.tag!==1)throw Error(n(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ns(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(a.tag===1){var d=a.type;if(Ns(d))return qh(a,d,s)}return s}function gb(a,s,d,m,_,x,I,R,U){return a=$0(d,m,!0,a,_,x,I,R,U),a.context=hh(null),d=a.current,m=cl(),_=Xh(d),x=Ci(m,_),x.callback=s??null,ro(d,x,_),a.current.lanes=_,It(a,_,m),Ea(a,m),a}function Qy(a,s,d,m){var _=s.current,x=cl(),I=Xh(_);return d=hh(d),s.context===null?s.context=d:s.pendingContext=d,s=Ci(x,I),s.payload={element:a},m=m===void 0?null:m,m!==null&&(s.callback=m),a=ro(_,s,I),a!==null&&(mu(a,_,I,x),Oo(a,_,I)),I}function Jy(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function yb(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<s?d:s}}function vb(a,s){yb(a,s),(a=a.alternate)&&yb(a,s)}var H0=typeof reportError=="function"?reportError:function(a){console.error(a)};function _b(a){this._internalRoot=a}rg.prototype.render=_b.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(n(409));Qy(a,s,null,null)},rg.prototype.unmount=_b.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Sp(function(){Qy(null,a,null,null)}),s[cu]=null}};function rg(a){this._internalRoot=a}rg.prototype.unstable_scheduleHydration=function(a){if(a){var s=Qa();a={blockedOn:null,target:a,priority:s};for(var d=0;d<Ps.length&&s!==0&&s<Ps[d].priority;d++);Ps.splice(d,0,a),d===0&&es(a)}};function Pp(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function og(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function V0(){}function bb(a,s,d,m,_){if(_){if(typeof m=="function"){var x=m;m=function(){var H=Jy(I);x.call(H)}}var I=gb(s,m,a,0,null,!1,!1,"",V0);return a._reactRootContainer=I,a[cu]=I.current,wc(a.nodeType===8?a.parentNode:a),Sp(),I}for(;_=a.lastChild;)a.removeChild(_);if(typeof m=="function"){var R=m;m=function(){var H=Jy(U);R.call(H)}}var U=$0(a,0,!1,null,null,!1,!1,"",V0);return a._reactRootContainer=U,a[cu]=U.current,wc(a.nodeType===8?a.parentNode:a),Sp(function(){Qy(s,U,d,m)}),U}function ef(a,s,d,m,_){var x=d._reactRootContainer;if(x){var I=x;if(typeof _=="function"){var R=_;_=function(){var U=Jy(I);R.call(U)}}Qy(s,I,a,_)}else I=bb(d,s,a,_,m);return Jy(I)}Sr=function(a){switch(a.tag){case 3:var s=a.stateNode;if(s.current.memoizedState.isDehydrated){var d=Ua(s.pendingLanes);d!==0&&(Cn(s,d|1),Ea(s,lo()),!(Po&6)&&(tg=lo()+500,u()))}break;case 13:Sp(function(){var m=Co(a,1);if(m!==null){var _=cl();mu(m,a,1,_)}}),vb(a,1)}},Ho=function(a){if(a.tag===13){var s=Co(a,134217728);if(s!==null){var d=cl();mu(s,a,134217728,d)}vb(a,134217728)}},Is=function(a){if(a.tag===13){var s=Xh(a),d=Co(a,s);if(d!==null){var m=cl();mu(d,a,s,m)}vb(a,s)}},Qa=function(){return kn},wa=function(a,s){var d=kn;try{return kn=a,s()}finally{kn=d}},lr=function(a,s,d){switch(s){case"input":if(ge(a,d),s=d.name,d.type==="radio"&&s!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var m=d[s];if(m!==a&&m.form===a.form){var _=gp(m);if(!_)throw Error(n(90));Z(m),ge(m,_)}}}break;case"textarea":Pt(a,d);break;case"select":s=d.value,s!=null&&wt(a,!!d.multiple,s,!1)}},lt=Wy,Ce=Sp;var q0={usingClientEntryPoint:!1,Events:[Vh,sh,gp,Ee,Ye,Wy]},Ap={findFiberByHostInstance:Cc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G0={bundleType:Ap.bundleType,version:Ap.version,rendererPackageName:Ap.rendererPackageName,rendererConfig:Ap.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Bn(a),a===null?null:a.stateNode},findFiberByHostInstance:Ap.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h.isDisabled&&h.supportsFiber)try{ci=h.inject(G0),Mo=h}catch{}}return Gu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0,Gu.createPortal=function(a,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(s))throw Error(n(200));return ng(a,s,null,d)},Gu.createRoot=function(a,s){if(!Pp(a))throw Error(n(299));var d=!1,m="",_=H0;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=$0(a,1,!1,null,null,d,!1,m,_),a[cu]=s.current,wc(a.nodeType===8?a.parentNode:a),new _b(s)},Gu.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=Bn(s),a=a===null?null:a.stateNode,a},Gu.flushSync=function(a){return Sp(a)},Gu.hydrate=function(a,s,d){if(!og(s))throw Error(n(200));return ef(null,a,s,!0,d)},Gu.hydrateRoot=function(a,s,d){if(!Pp(a))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,_=!1,x="",I=H0;if(d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(I=d.onRecoverableError)),s=gb(s,null,a,1,d??null,_,!1,x,I),a[cu]=s.current,wc(a),m)for(a=0;a<m.length;a++)d=m[a],_=d._getVersion,_=_(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,_]:s.mutableSourceEagerHydrationData.push(d,_);return new rg(s)},Gu.render=function(a,s,d){if(!og(s))throw Error(n(200));return ef(null,a,s,!1,d)},Gu.unmountComponentAtNode=function(a){if(!og(a))throw Error(n(40));return a._reactRootContainer?(Sp(function(){ef(null,null,a,!1,function(){a._reactRootContainer=null,a[cu]=null})}),!0):!1},Gu.unstable_batchedUpdates=Wy,Gu.unstable_renderSubtreeIntoContainer=function(a,s,d,m){if(!og(d))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return ef(a,s,d,!1,m)},Gu.version="18.3.1-next-f1338f8080-20240426",Gu}var YB;function hq(){if(YB)return CM.exports;YB=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),CM.exports=eX(),CM.exports}var ZB;function tX(){if(ZB)return nT;ZB=1;var e=hq();return nT.createRoot=e.createRoot,nT.hydrateRoot=e.hydrateRoot,nT}var nX=tX();const rX=zS(nX);var TM={exports:{}},IM,XB;function oX(){if(XB)return IM;XB=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return IM=e,IM}var kM,QB;function iX(){if(QB)return kM;QB=1;var e=oX();function t(){}function n(){}return n.resetWarningCache=t,kM=function(){function r(l,c,f,p,g,v){if(v!==e){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function o(){return r}var i={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i},kM}var JB;function aX(){return JB||(JB=1,TM.exports=iX()()),TM.exports}var sX=aX();const Tt=zS(sX);function im(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(null,arguments)}function lX(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function uX(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var cX=function(){function e(n){var r=this;this._insertTag=function(o){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,i),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(uX(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=lX(o);try{i.insertRule(r,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Gl="-ms-",ZI="-moz-",si="-webkit-",fq="comm",WN="rule",KN="decl",dX="@import",pq="@keyframes",hX="@layer",fX=Math.abs,zP=String.fromCharCode,pX=Object.assign;function mX(e,t){return vl(e,0)^45?(((t<<2^vl(e,0))<<2^vl(e,1))<<2^vl(e,2))<<2^vl(e,3):0}function mq(e){return e.trim()}function gX(e,t){return(e=t.exec(e))?e[0]:e}function li(e,t,n){return e.replace(t,n)}function lD(e,t){return e.indexOf(t)}function vl(e,t){return e.charCodeAt(t)|0}function X1(e,t,n){return e.slice(t,n)}function mf(e){return e.length}function YN(e){return e.length}function rT(e,t){return t.push(e),e}function yX(e,t){return e.map(t).join("")}var BP=1,cx=1,gq=0,ac=0,as=0,Lx="";function UP(e,t,n,r,o,i,l){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:BP,column:cx,length:l,return:""}}function Q0(e,t){return pX(UP("",null,null,"",null,null,0),e,{length:-e.length},t)}function vX(){return as}function _X(){return as=ac>0?vl(Lx,--ac):0,cx--,as===10&&(cx=1,BP--),as}function qc(){return as=ac<gq?vl(Lx,ac++):0,cx++,as===10&&(cx=1,BP++),as}function Ef(){return vl(Lx,ac)}function sI(){return ac}function BS(e,t){return X1(Lx,e,t)}function Q1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yq(e){return BP=cx=1,gq=mf(Lx=e),ac=0,[]}function vq(e){return Lx="",e}function lI(e){return mq(BS(ac-1,uD(e===91?e+2:e===40?e+1:e)))}function bX(e){for(;(as=Ef())&&as<33;)qc();return Q1(e)>2||Q1(as)>3?"":" "}function wX(e,t){for(;--t&&qc()&&!(as<48||as>102||as>57&&as<65||as>70&&as<97););return BS(e,sI()+(t<6&&Ef()==32&&qc()==32))}function uD(e){for(;qc();)switch(as){case e:return ac;case 34:case 39:e!==34&&e!==39&&uD(as);break;case 40:e===41&&uD(e);break;case 92:qc();break}return ac}function xX(e,t){for(;qc()&&e+as!==57;)if(e+as===84&&Ef()===47)break;return"/*"+BS(t,ac-1)+"*"+zP(e===47?e:qc())}function CX(e){for(;!Q1(Ef());)qc();return BS(e,ac)}function SX(e){return vq(uI("",null,null,null,[""],e=yq(e),0,[0],e))}function uI(e,t,n,r,o,i,l,c,f){for(var p=0,g=0,v=l,w=0,C=0,T=0,k=1,P=1,O=1,L=0,D="",N=o,F=i,B=r,V=D;P;)switch(T=L,L=qc()){case 40:if(T!=108&&vl(V,v-1)==58){lD(V+=li(lI(L),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:V+=lI(L);break;case 9:case 10:case 13:case 32:V+=bX(T);break;case 92:V+=wX(sI()-1,7);continue;case 47:switch(Ef()){case 42:case 47:rT(EX(xX(qc(),sI()),t,n),f);break;default:V+="/"}break;case 123*k:c[p++]=mf(V)*O;case 125*k:case 59:case 0:switch(L){case 0:case 125:P=0;case 59+g:O==-1&&(V=li(V,/\f/g,"")),C>0&&mf(V)-v&&rT(C>32?tU(V+";",r,n,v-1):tU(li(V," ","")+";",r,n,v-2),f);break;case 59:V+=";";default:if(rT(B=eU(V,t,n,p,g,o,c,D,N=[],F=[],v),i),L===123)if(g===0)uI(V,t,B,B,N,i,v,c,F);else switch(w===99&&vl(V,3)===110?100:w){case 100:case 108:case 109:case 115:uI(e,B,B,r&&rT(eU(e,B,B,0,0,o,c,D,o,N=[],v),F),o,F,v,c,r?N:F);break;default:uI(V,B,B,B,[""],F,0,c,F)}}p=g=C=0,k=O=1,D=V="",v=l;break;case 58:v=1+mf(V),C=T;default:if(k<1){if(L==123)--k;else if(L==125&&k++==0&&_X()==125)continue}switch(V+=zP(L),L*k){case 38:O=g>0?1:(V+="\f",-1);break;case 44:c[p++]=(mf(V)-1)*O,O=1;break;case 64:Ef()===45&&(V+=lI(qc())),w=Ef(),g=v=mf(D=V+=CX(sI())),L++;break;case 45:T===45&&mf(V)==2&&(k=0)}}return i}function eU(e,t,n,r,o,i,l,c,f,p,g){for(var v=o-1,w=o===0?i:[""],C=YN(w),T=0,k=0,P=0;T<r;++T)for(var O=0,L=X1(e,v+1,v=fX(k=l[T])),D=e;O<C;++O)(D=mq(k>0?w[O]+" "+L:li(L,/&\f/g,w[O])))&&(f[P++]=D);return UP(e,t,n,o===0?WN:c,f,p,g)}function EX(e,t,n){return UP(e,t,n,fq,zP(vX()),X1(e,2,-2),0)}function tU(e,t,n,r){return UP(e,t,n,KN,X1(e,0,r),X1(e,r+1,-1),r)}function Bw(e,t){for(var n="",r=YN(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function TX(e,t,n,r){switch(e.type){case hX:if(e.children.length)break;case dX:case KN:return e.return=e.return||e.value;case fq:return"";case pq:return e.return=e.value+"{"+Bw(e.children,r)+"}";case WN:e.value=e.props.join(",")}return mf(n=Bw(e.children,r))?e.return=e.value+"{"+n+"}":""}function IX(e){var t=YN(e);return function(n,r,o,i){for(var l="",c=0;c<t;c++)l+=e[c](n,r,o,i)||"";return l}}function kX(e){return function(t){t.root||(t=t.return)&&e(t)}}function _q(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var PX=function(t,n,r){for(var o=0,i=0;o=i,i=Ef(),o===38&&i===12&&(n[r]=1),!Q1(i);)qc();return BS(t,ac)},AX=function(t,n){var r=-1,o=44;do switch(Q1(o)){case 0:o===38&&Ef()===12&&(n[r]=1),t[r]+=PX(ac-1,n,r);break;case 2:t[r]+=lI(o);break;case 4:if(o===44){t[++r]=Ef()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=zP(o)}while(o=qc());return t},MX=function(t,n){return vq(AX(yq(t),n))},nU=new WeakMap,RX=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,o=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!nU.get(r))&&!o){nU.set(t,!0);for(var i=[],l=MX(n,i),c=r.props,f=0,p=0;f<l.length;f++)for(var g=0;g<c.length;g++,p++)t.props[p]=i[f]?l[f].replace(/&\f/g,c[g]):c[g]+" "+l[f]}}},OX=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function bq(e,t){switch(mX(e,t)){case 5103:return si+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return si+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return si+e+ZI+e+Gl+e+e;case 6828:case 4268:return si+e+Gl+e+e;case 6165:return si+e+Gl+"flex-"+e+e;case 5187:return si+e+li(e,/(\w+).+(:[^]+)/,si+"box-$1$2"+Gl+"flex-$1$2")+e;case 5443:return si+e+Gl+"flex-item-"+li(e,/flex-|-self/,"")+e;case 4675:return si+e+Gl+"flex-line-pack"+li(e,/align-content|flex-|-self/,"")+e;case 5548:return si+e+Gl+li(e,"shrink","negative")+e;case 5292:return si+e+Gl+li(e,"basis","preferred-size")+e;case 6060:return si+"box-"+li(e,"-grow","")+si+e+Gl+li(e,"grow","positive")+e;case 4554:return si+li(e,/([^-])(transform)/g,"$1"+si+"$2")+e;case 6187:return li(li(li(e,/(zoom-|grab)/,si+"$1"),/(image-set)/,si+"$1"),e,"")+e;case 5495:case 3959:return li(e,/(image-set\([^]*)/,si+"$1$`$1");case 4968:return li(li(e,/(.+:)(flex-)?(.*)/,si+"box-pack:$3"+Gl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+si+e+e;case 4095:case 3583:case 4068:case 2532:return li(e,/(.+)-inline(.+)/,si+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(mf(e)-1-t>6)switch(vl(e,t+1)){case 109:if(vl(e,t+4)!==45)break;case 102:return li(e,/(.+:)(.+)-([^]+)/,"$1"+si+"$2-$3$1"+ZI+(vl(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~lD(e,"stretch")?bq(li(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(vl(e,t+1)!==115)break;case 6444:switch(vl(e,mf(e)-3-(~lD(e,"!important")&&10))){case 107:return li(e,":",":"+si)+e;case 101:return li(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+si+(vl(e,14)===45?"inline-":"")+"box$3$1"+si+"$2$3$1"+Gl+"$2box$3")+e}break;case 5936:switch(vl(e,t+11)){case 114:return si+e+Gl+li(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return si+e+Gl+li(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return si+e+Gl+li(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return si+e+Gl+e+e}return e}var DX=function(t,n,r,o){if(t.length>-1&&!t.return)switch(t.type){case KN:t.return=bq(t.value,t.length);break;case pq:return Bw([Q0(t,{value:li(t.value,"@","@"+si)})],o);case WN:if(t.length)return yX(t.props,function(i){switch(gX(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bw([Q0(t,{props:[li(i,/:(read-\w+)/,":"+ZI+"$1")]})],o);case"::placeholder":return Bw([Q0(t,{props:[li(i,/:(plac\w+)/,":"+si+"input-$1")]}),Q0(t,{props:[li(i,/:(plac\w+)/,":"+ZI+"$1")]}),Q0(t,{props:[li(i,/:(plac\w+)/,Gl+"input-$1")]})],o)}return""})}},LX=[DX],NX=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(k){var P=k.getAttribute("data-emotion");P.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var o=t.stylisPlugins||LX,i={},l,c=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(k){for(var P=k.getAttribute("data-emotion").split(" "),O=1;O<P.length;O++)i[P[O]]=!0;c.push(k)});var f,p=[RX,OX];{var g,v=[TX,kX(function(k){g.insert(k)})],w=IX(p.concat(o,v)),C=function(P){return Bw(SX(P),w)};f=function(P,O,L,D){g=L,C(P?P+"{"+O.styles+"}":O.styles),D&&(T.inserted[O.name]=!0)}}var T={key:n,sheet:new cX({key:n,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:f};return T.sheet.hydrate(c),T},PM={exports:{}},fi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rU;function FX(){if(rU)return fi;rU=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,f=e?Symbol.for("react.async_mode"):60111,p=e?Symbol.for("react.concurrent_mode"):60111,g=e?Symbol.for("react.forward_ref"):60112,v=e?Symbol.for("react.suspense"):60113,w=e?Symbol.for("react.suspense_list"):60120,C=e?Symbol.for("react.memo"):60115,T=e?Symbol.for("react.lazy"):60116,k=e?Symbol.for("react.block"):60121,P=e?Symbol.for("react.fundamental"):60117,O=e?Symbol.for("react.responder"):60118,L=e?Symbol.for("react.scope"):60119;function D(F){if(typeof F=="object"&&F!==null){var B=F.$$typeof;switch(B){case t:switch(F=F.type,F){case f:case p:case r:case i:case o:case v:return F;default:switch(F=F&&F.$$typeof,F){case c:case g:case T:case C:case l:return F;default:return B}}case n:return B}}}function N(F){return D(F)===p}return fi.AsyncMode=f,fi.ConcurrentMode=p,fi.ContextConsumer=c,fi.ContextProvider=l,fi.Element=t,fi.ForwardRef=g,fi.Fragment=r,fi.Lazy=T,fi.Memo=C,fi.Portal=n,fi.Profiler=i,fi.StrictMode=o,fi.Suspense=v,fi.isAsyncMode=function(F){return N(F)||D(F)===f},fi.isConcurrentMode=N,fi.isContextConsumer=function(F){return D(F)===c},fi.isContextProvider=function(F){return D(F)===l},fi.isElement=function(F){return typeof F=="object"&&F!==null&&F.$$typeof===t},fi.isForwardRef=function(F){return D(F)===g},fi.isFragment=function(F){return D(F)===r},fi.isLazy=function(F){return D(F)===T},fi.isMemo=function(F){return D(F)===C},fi.isPortal=function(F){return D(F)===n},fi.isProfiler=function(F){return D(F)===i},fi.isStrictMode=function(F){return D(F)===o},fi.isSuspense=function(F){return D(F)===v},fi.isValidElementType=function(F){return typeof F=="string"||typeof F=="function"||F===r||F===p||F===i||F===o||F===v||F===w||typeof F=="object"&&F!==null&&(F.$$typeof===T||F.$$typeof===C||F.$$typeof===l||F.$$typeof===c||F.$$typeof===g||F.$$typeof===P||F.$$typeof===O||F.$$typeof===L||F.$$typeof===k)},fi.typeOf=D,fi}var oU;function zX(){return oU||(oU=1,PM.exports=FX()),PM.exports}var AM,iU;function BX(){if(iU)return AM;iU=1;var e=zX(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=r,i[e.Memo]=o;function l(T){return e.isMemo(T)?o:i[T.$$typeof]||t}var c=Object.defineProperty,f=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,g=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,w=Object.prototype;function C(T,k,P){if(typeof k!="string"){if(w){var O=v(k);O&&O!==w&&C(T,O,P)}var L=f(k);p&&(L=L.concat(p(k)));for(var D=l(T),N=l(k),F=0;F<L.length;++F){var B=L[F];if(!n[B]&&!(P&&P[B])&&!(N&&N[B])&&!(D&&D[B])){var V=g(k,B);try{c(T,B,V)}catch{}}}}return T}return AM=C,AM}BX();var UX=!0;function wq(e,t,n){var r="";return n.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(r+=o+" ")}),r}var ZN=function(t,n,r){var o=t.key+"-"+n.name;(r===!1||UX===!1)&&t.registered[o]===void 0&&(t.registered[o]=n.styles)},XN=function(t,n,r){ZN(t,n,r);var o=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+o:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function jX(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var $X={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},HX=/[A-Z]|^ms/g,VX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,xq=function(t){return t.charCodeAt(1)===45},aU=function(t){return t!=null&&typeof t!="boolean"},MM=_q(function(e){return xq(e)?e:e.replace(HX,"-$&").toLowerCase()}),sU=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(VX,function(r,o,i){return gf={name:o,styles:i,next:gf},o})}return $X[t]!==1&&!xq(t)&&typeof n=="number"&&n!==0?n+"px":n};function J1(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return gf={name:o.name,styles:o.styles,next:gf},o.name;var i=n;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)gf={name:l.name,styles:l.styles,next:gf},l=l.next;var c=i.styles+";";return c}return qX(e,t,n)}case"function":{if(e!==void 0){var f=gf,p=n(e);return gf=f,J1(e,t,p)}break}}var g=n;if(t==null)return g;var v=t[g];return v!==void 0?v:g}function qX(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=J1(e,t,n[o])+";";else for(var i in n){var l=n[i];if(typeof l!="object"){var c=l;t!=null&&t[c]!==void 0?r+=i+"{"+t[c]+"}":aU(c)&&(r+=MM(i)+":"+sU(i,c)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var f=0;f<l.length;f++)aU(l[f])&&(r+=MM(i)+":"+sU(i,l[f])+";");else{var p=J1(e,t,l);switch(i){case"animation":case"animationName":{r+=MM(i)+":"+p+";";break}default:r+=i+"{"+p+"}"}}}return r}var lU=/label:\s*([^\s;{]+)\s*(;|$)/g,gf;function US(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";gf=void 0;var i=e[0];if(i==null||i.raw===void 0)r=!1,o+=J1(n,t,i);else{var l=i;o+=l[0]}for(var c=1;c<e.length;c++)if(o+=J1(n,t,e[c]),r){var f=i;o+=f[c]}lU.lastIndex=0;for(var p="",g;(g=lU.exec(o))!==null;)p+="-"+g[1];var v=jX(o)+p;return{name:v,styles:o,next:gf}}var GX=function(t){return t()},Cq=sD.useInsertionEffect?sD.useInsertionEffect:!1,Sq=Cq||GX,uU=Cq||A.useLayoutEffect,Eq=A.createContext(typeof HTMLElement<"u"?NX({key:"css"}):null);Eq.Provider;var QN=function(t){return A.forwardRef(function(n,r){var o=A.useContext(Eq);return t(n,o,r)})},jP=A.createContext({}),JN={}.hasOwnProperty,cD="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",WX=function(t,n){var r={};for(var o in n)JN.call(n,o)&&(r[o]=n[o]);return r[cD]=t,r},KX=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return ZN(n,r,o),Sq(function(){return XN(n,r,o)}),null},YX=QN(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var o=e[cD],i=[r],l="";typeof e.className=="string"?l=wq(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var c=US(i,void 0,A.useContext(jP));l+=t.key+"-"+c.name;var f={};for(var p in e)JN.call(e,p)&&p!=="css"&&p!==cD&&(f[p]=e[p]);return f.className=l,n&&(f.ref=n),A.createElement(A.Fragment,null,A.createElement(KX,{cache:t,serialized:c,isStringTag:typeof o=="string"}),A.createElement(o,f))}),ZX=YX,XX=function(t,n){var r=arguments;if(n==null||!JN.call(n,"css"))return A.createElement.apply(void 0,r);var o=r.length,i=new Array(o);i[0]=ZX,i[1]=WX(t,n);for(var l=2;l<o;l++)i[l]=r[l];return A.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(XX);var QX=QN(function(e,t){var n=e.styles,r=US([n],void 0,A.useContext(jP)),o=A.useRef();return uU(function(){var i=t.key+"-global",l=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,f=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),f!==null&&(c=!0,f.setAttribute("data-emotion",i),l.hydrate([f])),o.current=[l,c],function(){l.flush()}},[t]),uU(function(){var i=o.current,l=i[0],c=i[1];if(c){i[1]=!1;return}if(r.next!==void 0&&XN(t,r.next,!0),l.tags.length){var f=l.tags[l.tags.length-1].nextElementSibling;l.before=f,l.flush()}t.insert("",r,l,!1)},[t,r.name]),null});function ly(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return US(t)}function qf(){var e=ly.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var JX=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,eQ=_q(function(e){return JX.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),tQ=eQ,nQ=function(t){return t!=="theme"},cU=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?tQ:nQ},dU=function(t,n,r){var o;if(n){var i=n.shouldForwardProp;o=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof o!="function"&&r&&(o=t.__emotion_forwardProp),o},rQ=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return ZN(n,r,o),Sq(function(){return XN(n,r,o)}),null},oQ=function e(t,n){var r=t.__emotion_real===t,o=r&&t.__emotion_base||t,i,l;n!==void 0&&(i=n.label,l=n.target);var c=dU(t,n,r),f=c||cU(o),p=!f("as");return function(){var g=arguments,v=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&v.push("label:"+i+";"),g[0]==null||g[0].raw===void 0)v.push.apply(v,g);else{var w=g[0];v.push(w[0]);for(var C=g.length,T=1;T<C;T++)v.push(g[T],w[T])}var k=QN(function(P,O,L){var D=p&&P.as||o,N="",F=[],B=P;if(P.theme==null){B={};for(var V in P)B[V]=P[V];B.theme=A.useContext(jP)}typeof P.className=="string"?N=wq(O.registered,F,P.className):P.className!=null&&(N=P.className+" ");var G=US(v.concat(F),O.registered,B);N+=O.key+"-"+G.name,l!==void 0&&(N+=" "+l);var q=p&&c===void 0?cU(D):f,z={};for(var $ in P)p&&$==="as"||q($)&&(z[$]=P[$]);return z.className=N,L&&(z.ref=L),A.createElement(A.Fragment,null,A.createElement(rQ,{cache:O,serialized:G,isStringTag:typeof D=="string"}),A.createElement(D,z))});return k.displayName=i!==void 0?i:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",k.defaultProps=t.defaultProps,k.__emotion_real=k,k.__emotion_base=o,k.__emotion_styles=v,k.__emotion_forwardProp=c,Object.defineProperty(k,"toString",{value:function(){return"."+l}}),k.withComponent=function(P,O){var L=e(P,we({},n,O,{shouldForwardProp:dU(k,O,!0)}));return L.apply(void 0,v)},k}},iQ=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],dD=oQ.bind(null);iQ.forEach(function(e){dD[e]=dD(e)});function aQ(e){return e==null||Object.keys(e).length===0}function sQ(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?o=>t(aQ(o)?n:o):t;return ie.jsx(QX,{styles:r})}/**
 * @mui/styled-engine v6.3.1
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Tq(e,t){return dD(e,t)}function lQ(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const hU=[];function fU(e){return hU[0]=e,US(hU)}function _f(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Iq(e){if(A.isValidElement(e)||!_f(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=Iq(e[n])}),t}function Xl(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return _f(e)&&_f(t)&&Object.keys(t).forEach(o=>{A.isValidElement(t[o])?r[o]=t[o]:_f(t[o])&&Object.prototype.hasOwnProperty.call(e,o)&&_f(e[o])?r[o]=Xl(e[o],t[o],n):n.clone?r[o]=_f(t[o])?Iq(t[o]):t[o]:r[o]=t[o]}),r}const uQ=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function cQ(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...o}=e,i=uQ(t),l=Object.keys(i);function c(w){return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${n})`}function f(w){return`@media (max-width:${(typeof t[w]=="number"?t[w]:w)-r/100}${n})`}function p(w,C){const T=l.indexOf(C);return`@media (min-width:${typeof t[w]=="number"?t[w]:w}${n}) and (max-width:${(T!==-1&&typeof t[l[T]]=="number"?t[l[T]]:C)-r/100}${n})`}function g(w){return l.indexOf(w)+1<l.length?p(w,l[l.indexOf(w)+1]):c(w)}function v(w){const C=l.indexOf(w);return C===0?c(l[1]):C===l.length-1?f(l[C]):p(w,l[l.indexOf(w)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:c,down:f,between:p,only:g,not:v,unit:n,...o}}function dQ(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,o)=>{var l,c;const i=/min-width:\s*([0-9.]+)/;return+(((l=r.match(i))==null?void 0:l[1])||0)-+(((c=o.match(i))==null?void 0:c[1])||0)});return n.length?n.reduce((r,o)=>{const i=t[o];return delete r[o],r[o]=i,r},{...t}):t}function hQ(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function fQ(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,o]=n,i=Number.isNaN(+r)?r||0:+r;return e.containerQueries(o).up(i)}function pQ(e){const t=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function n(i,l){i.up=(...c)=>t(e.breakpoints.up(...c),l),i.down=(...c)=>t(e.breakpoints.down(...c),l),i.between=(...c)=>t(e.breakpoints.between(...c),l),i.only=(...c)=>t(e.breakpoints.only(...c),l),i.not=(...c)=>{const f=t(e.breakpoints.not(...c),l);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const r={},o=i=>(n(r,i),r);return n(o),{...e,containerQueries:o}}const mQ={borderRadius:4};function x1(e,t){return t?Xl(e,t,{clone:!1}):e}const $P={xs:0,sm:600,md:900,lg:1200,xl:1536},pU={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${$P[e]}px)`},gQ={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:$P[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function am(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const i=r.breakpoints||pU;return t.reduce((l,c,f)=>(l[i.up(i.keys[f])]=n(t[f]),l),{})}if(typeof t=="object"){const i=r.breakpoints||pU;return Object.keys(t).reduce((l,c)=>{if(hQ(i.keys,c)){const f=fQ(r.containerQueries?r:gQ,c);f&&(l[f]=n(t[c],c))}else if(Object.keys(i.values||$P).includes(c)){const f=i.up(c);l[f]=n(t[c],c)}else{const f=c;l[f]=t[f]}return l},{})}return n(t)}function yQ(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,o)=>{const i=e.up(o);return r[i]={},r},{}))||{}}function vQ(e,t){return e.reduce((n,r)=>{const o=n[r];return(!o||Object.keys(o).length===0)&&delete n[r],n},t)}function tn(e){if(typeof e!="string")throw new Error(im(7));return e.charAt(0).toUpperCase()+e.slice(1)}function dx(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((o,i)=>o&&o[i]?o[i]:null,e);if(r!=null)return r}return t.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function XI(e,t,n,r=n){let o;return typeof e=="function"?o=e(n):Array.isArray(e)?o=e[n]||r:o=dx(e,n)||r,t&&(o=t(o,r,e)),o}function Xa(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:o}=e,i=l=>{if(l[t]==null)return null;const c=l[t],f=l.theme,p=dx(f,r)||{};return am(l,c,v=>{let w=XI(p,o,v);return v===w&&typeof v=="string"&&(w=XI(p,o,`${t}${v==="default"?"":tn(v)}`,v)),n===!1?w:{[n]:w}})};return i.propTypes={},i.filterProps=[t],i}function _Q(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const bQ={m:"margin",p:"padding"},wQ={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},mU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xQ=_Q(e=>{if(e.length>2)if(mU[e])e=mU[e];else return[e];const[t,n]=e.split(""),r=bQ[t],o=wQ[n]||"";return Array.isArray(o)?o.map(i=>r+i):[r+o]}),eF=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],tF=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...eF,...tF];function jS(e,t,n,r){const o=dx(e,t,!0)??n;return typeof o=="number"||typeof o=="string"?i=>typeof i=="string"?i:typeof o=="string"?`calc(${i} * ${o})`:o*i:Array.isArray(o)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),c=o[l];return i>=0?c:typeof c=="number"?-c:`-${c}`}:typeof o=="function"?o:()=>{}}function nF(e){return jS(e,"spacing",8)}function $S(e,t){return typeof t=="string"||t==null?t:e(t)}function CQ(e,t){return n=>e.reduce((r,o)=>(r[o]=$S(t,n),r),{})}function SQ(e,t,n,r){if(!t.includes(n))return null;const o=xQ(n),i=CQ(o,r),l=e[n];return am(e,l,i)}function kq(e,t){const n=nF(e.theme);return Object.keys(e).map(r=>SQ(e,t,r,n)).reduce(x1,{})}function La(e){return kq(e,eF)}La.propTypes={};La.filterProps=eF;function Na(e){return kq(e,tF)}Na.propTypes={};Na.filterProps=tF;function Pq(e=8,t=nF({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function HP(...e){const t=e.reduce((r,o)=>(o.filterProps.forEach(i=>{r[i]=o}),r),{}),n=r=>Object.keys(r).reduce((o,i)=>t[i]?x1(o,t[i](r)):o,{});return n.propTypes={},n.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),n}function Sd(e){return typeof e!="number"?e:`${e}px solid`}function jd(e,t){return Xa({prop:e,themeKey:"borders",transform:t})}const EQ=jd("border",Sd),TQ=jd("borderTop",Sd),IQ=jd("borderRight",Sd),kQ=jd("borderBottom",Sd),PQ=jd("borderLeft",Sd),AQ=jd("borderColor"),MQ=jd("borderTopColor"),RQ=jd("borderRightColor"),OQ=jd("borderBottomColor"),DQ=jd("borderLeftColor"),LQ=jd("outline",Sd),NQ=jd("outlineColor"),VP=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=jS(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:$S(t,r)});return am(e,e.borderRadius,n)}return null};VP.propTypes={};VP.filterProps=["borderRadius"];HP(EQ,TQ,IQ,kQ,PQ,AQ,MQ,RQ,OQ,DQ,VP,LQ,NQ);const qP=e=>{if(e.gap!==void 0&&e.gap!==null){const t=jS(e.theme,"spacing",8),n=r=>({gap:$S(t,r)});return am(e,e.gap,n)}return null};qP.propTypes={};qP.filterProps=["gap"];const GP=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=jS(e.theme,"spacing",8),n=r=>({columnGap:$S(t,r)});return am(e,e.columnGap,n)}return null};GP.propTypes={};GP.filterProps=["columnGap"];const WP=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=jS(e.theme,"spacing",8),n=r=>({rowGap:$S(t,r)});return am(e,e.rowGap,n)}return null};WP.propTypes={};WP.filterProps=["rowGap"];const FQ=Xa({prop:"gridColumn"}),zQ=Xa({prop:"gridRow"}),BQ=Xa({prop:"gridAutoFlow"}),UQ=Xa({prop:"gridAutoColumns"}),jQ=Xa({prop:"gridAutoRows"}),$Q=Xa({prop:"gridTemplateColumns"}),HQ=Xa({prop:"gridTemplateRows"}),VQ=Xa({prop:"gridTemplateAreas"}),qQ=Xa({prop:"gridArea"});HP(qP,GP,WP,FQ,zQ,BQ,UQ,jQ,$Q,HQ,VQ,qQ);function Uw(e,t){return t==="grey"?t:e}const GQ=Xa({prop:"color",themeKey:"palette",transform:Uw}),WQ=Xa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Uw}),KQ=Xa({prop:"backgroundColor",themeKey:"palette",transform:Uw});HP(GQ,WQ,KQ);function $c(e){return e<=1&&e!==0?`${e*100}%`:e}const YQ=Xa({prop:"width",transform:$c}),rF=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var o,i,l,c,f;const r=((l=(i=(o=e.theme)==null?void 0:o.breakpoints)==null?void 0:i.values)==null?void 0:l[n])||$P[n];return r?((f=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:f.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:$c(n)}};return am(e,e.maxWidth,t)}return null};rF.filterProps=["maxWidth"];const ZQ=Xa({prop:"minWidth",transform:$c}),XQ=Xa({prop:"height",transform:$c}),QQ=Xa({prop:"maxHeight",transform:$c}),JQ=Xa({prop:"minHeight",transform:$c});Xa({prop:"size",cssProperty:"width",transform:$c});Xa({prop:"size",cssProperty:"height",transform:$c});const eJ=Xa({prop:"boxSizing"});HP(YQ,rF,ZQ,XQ,QQ,JQ,eJ);const HS={border:{themeKey:"borders",transform:Sd},borderTop:{themeKey:"borders",transform:Sd},borderRight:{themeKey:"borders",transform:Sd},borderBottom:{themeKey:"borders",transform:Sd},borderLeft:{themeKey:"borders",transform:Sd},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Sd},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:VP},color:{themeKey:"palette",transform:Uw},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Uw},backgroundColor:{themeKey:"palette",transform:Uw},p:{style:Na},pt:{style:Na},pr:{style:Na},pb:{style:Na},pl:{style:Na},px:{style:Na},py:{style:Na},padding:{style:Na},paddingTop:{style:Na},paddingRight:{style:Na},paddingBottom:{style:Na},paddingLeft:{style:Na},paddingX:{style:Na},paddingY:{style:Na},paddingInline:{style:Na},paddingInlineStart:{style:Na},paddingInlineEnd:{style:Na},paddingBlock:{style:Na},paddingBlockStart:{style:Na},paddingBlockEnd:{style:Na},m:{style:La},mt:{style:La},mr:{style:La},mb:{style:La},ml:{style:La},mx:{style:La},my:{style:La},margin:{style:La},marginTop:{style:La},marginRight:{style:La},marginBottom:{style:La},marginLeft:{style:La},marginX:{style:La},marginY:{style:La},marginInline:{style:La},marginInlineStart:{style:La},marginInlineEnd:{style:La},marginBlock:{style:La},marginBlockStart:{style:La},marginBlockEnd:{style:La},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:qP},rowGap:{style:WP},columnGap:{style:GP},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:$c},maxWidth:{style:rF},minWidth:{transform:$c},height:{transform:$c},maxHeight:{transform:$c},minHeight:{transform:$c},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function tJ(...e){const t=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function nJ(e,t){return typeof e=="function"?e(t):e}function rJ(){function e(n,r,o,i){const l={[n]:r,theme:o},c=i[n];if(!c)return{[n]:r};const{cssProperty:f=n,themeKey:p,transform:g,style:v}=c;if(r==null)return null;if(p==="typography"&&r==="inherit")return{[n]:r};const w=dx(o,p)||{};return v?v(l):am(l,r,T=>{let k=XI(w,g,T);return T===k&&typeof T=="string"&&(k=XI(w,g,`${n}${T==="default"?"":tn(T)}`,T)),f===!1?k:{[f]:k}})}function t(n){const{sx:r,theme:o={}}=n||{};if(!r)return null;const i=o.unstable_sxConfig??HS;function l(c){let f=c;if(typeof c=="function")f=c(o);else if(typeof c!="object")return c;if(!f)return null;const p=yQ(o.breakpoints),g=Object.keys(p);let v=p;return Object.keys(f).forEach(w=>{const C=nJ(f[w],o);if(C!=null)if(typeof C=="object")if(i[w])v=x1(v,e(w,C,o,i));else{const T=am({theme:o},C,k=>({[w]:k}));tJ(T,C)?v[w]=t({sx:C,theme:o}):v=x1(v,T)}else v=x1(v,e(w,C,o,i))}),dQ(o,vQ(g,v))}return Array.isArray(r)?r.map(l):l(r)}return t}const i_=rJ();i_.filterProps=["sx"];function oJ(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let o=n.getColorSchemeSelector(e);return o==="&"?t:((o.includes("data-")||o.includes("."))&&(o=`*:where(${o.replace(/\s*&$/,"")}) &`),{[o]:t})}return n.palette.mode===e?t:{}}function KP(e={},...t){const{breakpoints:n={},palette:r={},spacing:o,shape:i={},...l}=e,c=cQ(n),f=Pq(o);let p=Xl({breakpoints:c,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:f,shape:{...mQ,...i}},l);return p=pQ(p),p.applyStyles=oJ,p=t.reduce((g,v)=>Xl(g,v),p),p.unstable_sxConfig={...HS,...l==null?void 0:l.unstable_sxConfig},p.unstable_sx=function(v){return i_({sx:v,theme:this})},p}function iJ(e){return Object.keys(e).length===0}function aJ(e=null){const t=A.useContext(jP);return!t||iJ(t)?e:t}const sJ=KP();function YP(e=sJ){return aJ(e)}function lJ({styles:e,themeId:t,defaultTheme:n={}}){const r=YP(n),o=typeof e=="function"?e(t&&r[t]||r):e;return ie.jsx(sQ,{styles:o})}const uJ=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??HS;return Object.keys(e).forEach(o=>{n[o]?t.systemProps[o]=e[o]:t.otherProps[o]=e[o]}),t};function Aq(e){const{sx:t,...n}=e,{systemProps:r,otherProps:o}=uJ(n);let i;return Array.isArray(t)?i=[r,...t]:typeof t=="function"?i=(...l)=>{const c=t(...l);return _f(c)?{...r,...c}:r}:i={...r,...t},{...o,sx:i}}const gU=e=>e,cJ=()=>{let e=gU;return{configure(t){e=t},generate(t){return e(t)},reset(){e=gU}}},Mq=cJ();function Rq(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Rq(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function fn(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Rq(e))&&(r&&(r+=" "),r+=t);return r}function dJ(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:o}=e,i=Tq("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(i_);return A.forwardRef(function(f,p){const g=YP(n),{className:v,component:w="div",...C}=Aq(f);return ie.jsx(i,{as:w,ref:p,className:fn(v,o?o(r):r),theme:t&&g[t]||g,...C})})}const hJ={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Rr(e,t,n="Mui"){const r=hJ[t];return r?`${n}-${r}`:`${Mq.generate(e)}-${t}`}function Ar(e,t,n="Mui"){const r={};return t.forEach(o=>{r[o]=Rr(e,o,n)}),r}function Oq(e){const{variants:t,...n}=e,r={variants:t,style:fU(n),isProcessed:!0};return r.style===n||t&&t.forEach(o=>{typeof o.style!="function"&&(o.style=fU(o.style))}),r}const fJ=KP();function RM(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function pJ(e){return e?(t,n)=>n[e]:null}function mJ(e,t,n){e.theme=yJ(e.theme)?n:e.theme[t]||e.theme}function cI(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>cI(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:o,...i}=n;r=i}return Dq(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function Dq(e,t,n=[]){var o;let r;e:for(let i=0;i<t.length;i+=1){const l=t[i];if(typeof l.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!l.props(r))continue}else for(const c in l.props)if(e[c]!==l.props[c]&&((o=e.ownerState)==null?void 0:o[c])!==l.props[c])continue e;typeof l.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(l.style(r))):n.push(l.style)}return n}function Lq(e={}){const{themeId:t,defaultTheme:n=fJ,rootShouldForwardProp:r=RM,slotShouldForwardProp:o=RM}=e;function i(c){mJ(c,t,n)}return(c,f={})=>{lQ(c,F=>F.filter(B=>B!==i_));const{name:p,slot:g,skipVariantsResolver:v,skipSx:w,overridesResolver:C=pJ(_J(g)),...T}=f,k=v!==void 0?v:g&&g!=="Root"&&g!=="root"||!1,P=w||!1;let O=RM;g==="Root"||g==="root"?O=r:g?O=o:vJ(c)&&(O=void 0);const L=Tq(c,{shouldForwardProp:O,label:gJ(),...T}),D=F=>{if(typeof F=="function"&&F.__emotion_real!==F)return function(V){return cI(V,F)};if(_f(F)){const B=Oq(F);return B.variants?function(G){return cI(G,B)}:B.style}return F},N=(...F)=>{const B=[],V=F.map(D),G=[];if(B.push(i),p&&C&&G.push(function(K){var ue,Q;const re=(Q=(ue=K.theme.components)==null?void 0:ue[p])==null?void 0:Q.styleOverrides;if(!re)return null;const oe={};for(const ce in re)oe[ce]=cI(K,re[ce]);return C(K,oe)}),p&&!k&&G.push(function(K){var oe,ue;const te=K.theme,re=(ue=(oe=te==null?void 0:te.components)==null?void 0:oe[p])==null?void 0:ue.variants;return re?Dq(K,re):null}),P||G.push(i_),Array.isArray(V[0])){const $=V.shift(),K=new Array(B.length).fill(""),te=new Array(G.length).fill("");let re;re=[...K,...$,...te],re.raw=[...K,...$.raw,...te],B.unshift(re)}const q=[...B,...V,...G],z=L(...q);return c.muiName&&(z.muiName=c.muiName),z};return L.withConfig&&(N.withConfig=L.withConfig),N}}function gJ(e,t){return void 0}function yJ(e){for(const t in e)return!1;return!0}function vJ(e){return typeof e=="string"&&e.charCodeAt(0)>96}function _J(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Ti=Lq();function hx(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const o=r;if(o==="components"||o==="slots")n[o]={...e[o],...n[o]};else if(o==="componentsProps"||o==="slotProps"){const i=e[o],l=t[o];if(!l)n[o]=i||{};else if(!i)n[o]=l;else{n[o]={...l};for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)){const f=c;n[o][f]=hx(i[f],l[f])}}}else n[o]===void 0&&(n[o]=e[o])}return n}function bJ(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:hx(t.components[n].defaultProps,r)}function Nq({props:e,name:t,defaultTheme:n,themeId:r}){let o=YP(n);return r&&(o=o[r]||o),bJ({theme:o,name:t,props:e})}const $i=typeof window<"u"?A.useLayoutEffect:A.useEffect;function wJ(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function oF(e,t=0,n=1){return wJ(e,t,n)}function xJ(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,o)=>o<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Lf(e){if(e.type)return e;if(e.charAt(0)==="#")return Lf(xJ(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(im(9,e));let r=e.substring(t+1,e.length-1),o;if(n==="color"){if(r=r.split(" "),o=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(o))throw new Error(im(10,o))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:o}}const CJ=e=>{const t=Lf(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},t1=(e,t)=>{try{return CJ(e)}catch{return e}};function VS(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((o,i)=>i<3?parseInt(o,10):o):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function Fq(e){e=Lf(e);const{values:t}=e,n=t[0],r=t[1]/100,o=t[2]/100,i=r*Math.min(o,1-o),l=(p,g=(p+n/30)%12)=>o-i*Math.max(Math.min(g-3,9-g,1),-1);let c="rgb";const f=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(c+="a",f.push(t[3])),VS({type:c,values:f})}function hD(e){e=Lf(e);let t=e.type==="hsl"||e.type==="hsla"?Lf(Fq(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function SJ(e,t){const n=hD(e),r=hD(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function jr(e,t){return e=Lf(e),t=oF(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,VS(e)}function oT(e,t,n){try{return jr(e,t)}catch{return e}}function Nx(e,t){if(e=Lf(e),t=oF(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return VS(e)}function zi(e,t,n){try{return Nx(e,t)}catch{return e}}function Fx(e,t){if(e=Lf(e),t=oF(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return VS(e)}function Bi(e,t,n){try{return Fx(e,t)}catch{return e}}function EJ(e,t=.15){return hD(e)>.5?Nx(e,t):Fx(e,t)}function iT(e,t,n){try{return EJ(e,t)}catch{return e}}function yU(...e){return e.reduce((t,n)=>n==null?t:function(...o){t.apply(this,o),n.apply(this,o)},()=>{})}function zq(e,t=166){let n;function r(...o){const i=()=>{e.apply(this,o)};clearTimeout(n),n=setTimeout(i,t)}return r.clear=()=>{clearTimeout(n)},r}function OM(e,t){var n,r,o;return A.isValidElement(e)&&t.indexOf(e.type.muiName??((o=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:o.muiName))!==-1}function ka(e){return e&&e.ownerDocument||document}function Nf(e){return ka(e).defaultView||window}function QI(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let vU=0;function TJ(e){const[t,n]=A.useState(e),r=e||t;return A.useEffect(()=>{t==null&&(vU+=1,n(`mui-${vU}`))},[t]),r}const IJ={...sD},_U=IJ.useId;function Li(e){if(_U!==void 0){const t=_U();return e??t}return TJ(e)}function Hv({controlled:e,default:t,name:n,state:r="value"}){const{current:o}=A.useRef(e!==void 0),[i,l]=A.useState(t),c=o?e:i,f=A.useCallback(p=>{o||l(p)},[]);return[c,f]}function co(e){const t=A.useRef(e);return $i(()=>{t.current=e}),A.useRef((...n)=>(0,t.current)(...n)).current}function yi(...e){return A.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{QI(n,t)})},e)}const bU={};function Lh(e,t){const n=A.useRef(bU);return n.current===bU&&(n.current=e(t)),n}const kJ=[];function ZP(e){A.useEffect(e,kJ)}class XP{constructor(){nv(this,"currentId",null);nv(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});nv(this,"disposeEffect",()=>this.clear)}static create(){return new XP}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function Id(){const e=Lh(XP.create).current;return ZP(e.disposeEffect),e}function fx(e){try{return e.matches(":focus-visible")}catch{}return!1}function Bq(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}const iF=e=>{const t=A.useRef({});return A.useEffect(()=>{t.current=e}),t.current};function An(e,t,n=void 0){const r={};for(const o in e){const i=e[o];let l="",c=!0;for(let f=0;f<i.length;f+=1){const p=i[f];p&&(l+=(c===!0?"":" ")+t(p),c=!1,n&&n[p]&&(l+=" "+n[p]))}r[o]=l}return r}function PJ(e){return typeof e=="string"}function Uq(e,t,n){return e===void 0||PJ(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function jq(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function wU(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function $q(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:o,className:i}=e;if(!t){const C=fn(n==null?void 0:n.className,i,o==null?void 0:o.className,r==null?void 0:r.className),T={...n==null?void 0:n.style,...o==null?void 0:o.style,...r==null?void 0:r.style},k={...n,...o,...r};return C.length>0&&(k.className=C),Object.keys(T).length>0&&(k.style=T),{props:k,internalRef:void 0}}const l=jq({...o,...r}),c=wU(r),f=wU(o),p=t(l),g=fn(p==null?void 0:p.className,n==null?void 0:n.className,i,o==null?void 0:o.className,r==null?void 0:r.className),v={...p==null?void 0:p.style,...n==null?void 0:n.style,...o==null?void 0:o.style,...r==null?void 0:r.style},w={...p,...n,...f,...c};return g.length>0&&(w.className=g),Object.keys(v).length>0&&(w.style=v),{props:w,internalRef:p.ref}}function Hq(e,t,n){return typeof e=="function"?e(t,n):e}function eS(e){var v;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:o=!1,...i}=e,l=o?{}:Hq(n,r),{props:c,internalRef:f}=$q({...i,externalSlotProps:l}),p=yi(f,l==null?void 0:l.ref,(v=e.additionalProps)==null?void 0:v.ref);return Uq(t,{...c,ref:p},r)}function x_(e){var t;return parseInt(A.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const AJ=A.createContext(),Zc=()=>A.useContext(AJ)??!1,MJ=A.createContext(void 0);function RJ(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?hx(o.defaultProps,r):!o.styleOverrides&&!o.variants?hx(o,r):r}function OJ({props:e,name:t}){const n=A.useContext(MJ);return RJ({props:e,name:t,theme:{components:n}})}const xU={theme:void 0};function DJ(e){let t,n;return function(o){let i=t;return(i===void 0||o.theme!==n)&&(xU.theme=o.theme,i=Oq(e(xU)),t=i,n=o.theme),i}}function LJ(e=""){function t(...r){if(!r.length)return"";const o=r[0];return typeof o=="string"&&!o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`:`, ${o}`}return(r,...o)=>`var(--${e?`${e}-`:""}${r}${t(...o)})`}const CU=(e,t,n,r=[])=>{let o=e;t.forEach((i,l)=>{l===t.length-1?Array.isArray(o)?o[Number(i)]=n:o&&typeof o=="object"&&(o[i]=n):o&&typeof o=="object"&&(o[i]||(o[i]=r.includes(i)?[]:{}),o=o[i])})},NJ=(e,t,n)=>{function r(o,i=[],l=[]){Object.entries(o).forEach(([c,f])=>{(!n||!n([...i,c]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?r(f,[...i,c],Array.isArray(f)?[...l,c]:l):t([...i,c],f,l))})}r(e)},FJ=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function DM(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},o={},i={},l={};return NJ(e,(c,f,p)=>{if((typeof f=="string"||typeof f=="number")&&(!r||!r(c,f))){const g=`--${n?`${n}-`:""}${c.join("-")}`,v=FJ(c,f);Object.assign(o,{[g]:v}),CU(i,c,`var(${g})`,p),CU(l,c,`var(${g}, ${v})`,p)}},c=>c[0]==="vars"),{css:o,vars:i,varsWithDefaults:l}}function zJ(e,t={}){const{getSelector:n=P,disableCssColorScheme:r,colorSchemeSelector:o}=t,{colorSchemes:i={},components:l,defaultColorScheme:c="light",...f}=e,{vars:p,css:g,varsWithDefaults:v}=DM(f,t);let w=v;const C={},{[c]:T,...k}=i;if(Object.entries(k||{}).forEach(([D,N])=>{const{vars:F,css:B,varsWithDefaults:V}=DM(N,t);w=Xl(w,V),C[D]={css:B,vars:F}}),T){const{css:D,vars:N,varsWithDefaults:F}=DM(T,t);w=Xl(w,F),C[c]={css:D,vars:N}}function P(D,N){var B,V;let F=o;if(o==="class"&&(F=".%s"),o==="data"&&(F="[data-%s]"),o!=null&&o.startsWith("data-")&&!o.includes("%s")&&(F=`[${o}="%s"]`),D){if(F==="media")return e.defaultColorScheme===D?":root":{[`@media (prefers-color-scheme: ${((V=(B=i[D])==null?void 0:B.palette)==null?void 0:V.mode)||D})`]:{":root":N}};if(F)return e.defaultColorScheme===D?`:root, ${F.replace("%s",String(D))}`:F.replace("%s",String(D))}return":root"}return{vars:w,generateThemeVars:()=>{let D={...p};return Object.entries(C).forEach(([,{vars:N}])=>{D=Xl(D,N)}),D},generateStyleSheets:()=>{var G,q;const D=[],N=e.defaultColorScheme||"light";function F(z,$){Object.keys($).length&&D.push(typeof z=="string"?{[z]:{...$}}:z)}F(n(void 0,{...g}),g);const{[N]:B,...V}=C;if(B){const{css:z}=B,$=(q=(G=i[N])==null?void 0:G.palette)==null?void 0:q.mode,K=!r&&$?{colorScheme:$,...z}:{...z};F(n(N,{...K}),K)}return Object.entries(V).forEach(([z,{css:$}])=>{var re,oe;const K=(oe=(re=i[z])==null?void 0:re.palette)==null?void 0:oe.mode,te=!r&&K?{colorScheme:K,...$}:{...$};F(n(z,{...te}),te)}),D}}}function BJ(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const UJ=KP(),jJ=Ti("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${tn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),$J=e=>Nq({props:e,name:"MuiContainer",defaultTheme:UJ}),HJ=(e,t)=>{const n=f=>Rr(t,f),{classes:r,fixed:o,disableGutters:i,maxWidth:l}=e,c={root:["root",l&&`maxWidth${tn(String(l))}`,o&&"fixed",i&&"disableGutters"]};return An(c,n,r)};function VJ(e={}){const{createStyledComponent:t=jJ,useThemeProps:n=$J,componentName:r="MuiContainer"}=e,o=t(({theme:l,ownerState:c})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!c.disableGutters&&{paddingLeft:l.spacing(2),paddingRight:l.spacing(2),[l.breakpoints.up("sm")]:{paddingLeft:l.spacing(3),paddingRight:l.spacing(3)}}}),({theme:l,ownerState:c})=>c.fixed&&Object.keys(l.breakpoints.values).reduce((f,p)=>{const g=p,v=l.breakpoints.values[g];return v!==0&&(f[l.breakpoints.up(g)]={maxWidth:`${v}${l.breakpoints.unit}`}),f},{}),({theme:l,ownerState:c})=>({...c.maxWidth==="xs"&&{[l.breakpoints.up("xs")]:{maxWidth:Math.max(l.breakpoints.values.xs,444)}},...c.maxWidth&&c.maxWidth!=="xs"&&{[l.breakpoints.up(c.maxWidth)]:{maxWidth:`${l.breakpoints.values[c.maxWidth]}${l.breakpoints.unit}`}}}));return A.forwardRef(function(c,f){const p=n(c),{className:g,component:v="div",disableGutters:w=!1,fixed:C=!1,maxWidth:T="lg",classes:k,...P}=p,O={...p,component:v,disableGutters:w,fixed:C,maxWidth:T},L=HJ(O,r);return ie.jsx(o,{as:v,ownerState:O,className:fn(L.root,g),ref:f,...P})})}const tS={black:"#000",white:"#fff"},qJ={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Tb={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ib={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},J0={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},kb={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Pb={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ab={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Vq(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:tS.white,default:tS.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const GJ=Vq();function qq(){return{text:{primary:tS.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:tS.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const SU=qq();function EU(e,t,n,r){const o=r.light||r,i=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Fx(e.main,o):t==="dark"&&(e.dark=Nx(e.main,i)))}function WJ(e="light"){return e==="dark"?{main:kb[200],light:kb[50],dark:kb[400]}:{main:kb[700],light:kb[400],dark:kb[800]}}function KJ(e="light"){return e==="dark"?{main:Tb[200],light:Tb[50],dark:Tb[400]}:{main:Tb[500],light:Tb[300],dark:Tb[700]}}function YJ(e="light"){return e==="dark"?{main:Ib[500],light:Ib[300],dark:Ib[700]}:{main:Ib[700],light:Ib[400],dark:Ib[800]}}function ZJ(e="light"){return e==="dark"?{main:Pb[400],light:Pb[300],dark:Pb[700]}:{main:Pb[700],light:Pb[500],dark:Pb[900]}}function XJ(e="light"){return e==="dark"?{main:Ab[400],light:Ab[300],dark:Ab[700]}:{main:Ab[800],light:Ab[500],dark:Ab[900]}}function QJ(e="light"){return e==="dark"?{main:J0[400],light:J0[300],dark:J0[700]}:{main:"#ed6c02",light:J0[500],dark:J0[900]}}function aF(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...o}=e,i=e.primary||WJ(t),l=e.secondary||KJ(t),c=e.error||YJ(t),f=e.info||ZJ(t),p=e.success||XJ(t),g=e.warning||QJ(t);function v(k){return SJ(k,SU.text.primary)>=n?SU.text.primary:GJ.text.primary}const w=({color:k,name:P,mainShade:O=500,lightShade:L=300,darkShade:D=700})=>{if(k={...k},!k.main&&k[O]&&(k.main=k[O]),!k.hasOwnProperty("main"))throw new Error(im(11,P?` (${P})`:"",O));if(typeof k.main!="string")throw new Error(im(12,P?` (${P})`:"",JSON.stringify(k.main)));return EU(k,"light",L,r),EU(k,"dark",D,r),k.contrastText||(k.contrastText=v(k.main)),k};let C;return t==="light"?C=Vq():t==="dark"&&(C=qq()),Xl({common:{...tS},mode:t,primary:w({color:i,name:"primary"}),secondary:w({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:w({color:c,name:"error"}),warning:w({color:g,name:"warning"}),info:w({color:f,name:"info"}),success:w({color:p,name:"success"}),grey:qJ,contrastThreshold:n,getContrastText:v,augmentColor:w,tonalOffset:r,...C},o)}function JJ(e){const t={};return Object.entries(e).forEach(r=>{const[o,i]=r;typeof i=="object"&&(t[o]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function e5(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function t5(e){return Math.round(e*1e5)/1e5}const TU={textTransform:"uppercase"},IU='"Roboto", "Helvetica", "Arial", sans-serif';function n5(e,t){const{fontFamily:n=IU,fontSize:r=14,fontWeightLight:o=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:c=700,htmlFontSize:f=16,allVariants:p,pxToRem:g,...v}=typeof t=="function"?t(e):t,w=r/14,C=g||(P=>`${P/f*w}rem`),T=(P,O,L,D,N)=>({fontFamily:n,fontWeight:P,fontSize:C(O),lineHeight:L,...n===IU?{letterSpacing:`${t5(D/O)}em`}:{},...N,...p}),k={h1:T(o,96,1.167,-1.5),h2:T(o,60,1.2,-.5),h3:T(i,48,1.167,0),h4:T(i,34,1.235,.25),h5:T(i,24,1.334,0),h6:T(l,20,1.6,.15),subtitle1:T(i,16,1.75,.15),subtitle2:T(l,14,1.57,.1),body1:T(i,16,1.5,.15),body2:T(i,14,1.43,.15),button:T(l,14,1.75,.4,TU),caption:T(i,12,1.66,.4),overline:T(i,12,2.66,1,TU),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Xl({htmlFontSize:f,pxToRem:C,fontFamily:n,fontSize:r,fontWeightLight:o,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:c,...k},v,{clone:!1})}const r5=.2,o5=.14,i5=.12;function ga(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${r5})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${o5})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${i5})`].join(",")}const a5=["none",ga(0,2,1,-1,0,1,1,0,0,1,3,0),ga(0,3,1,-2,0,2,2,0,0,1,5,0),ga(0,3,3,-2,0,3,4,0,0,1,8,0),ga(0,2,4,-1,0,4,5,0,0,1,10,0),ga(0,3,5,-1,0,5,8,0,0,1,14,0),ga(0,3,5,-1,0,6,10,0,0,1,18,0),ga(0,4,5,-2,0,7,10,1,0,2,16,1),ga(0,5,5,-3,0,8,10,1,0,3,14,2),ga(0,5,6,-3,0,9,12,1,0,3,16,2),ga(0,6,6,-3,0,10,14,1,0,4,18,3),ga(0,6,7,-4,0,11,15,1,0,4,20,3),ga(0,7,8,-4,0,12,17,2,0,5,22,4),ga(0,7,8,-4,0,13,19,2,0,5,24,4),ga(0,7,9,-4,0,14,21,2,0,5,26,4),ga(0,8,9,-5,0,15,22,2,0,6,28,5),ga(0,8,10,-5,0,16,24,2,0,6,30,5),ga(0,8,11,-5,0,17,26,2,0,6,32,5),ga(0,9,11,-5,0,18,28,2,0,7,34,6),ga(0,9,12,-6,0,19,29,2,0,7,36,6),ga(0,10,13,-6,0,20,31,3,0,8,38,7),ga(0,10,13,-6,0,21,33,3,0,8,40,7),ga(0,10,14,-6,0,22,35,3,0,8,42,7),ga(0,11,14,-7,0,23,36,3,0,9,44,8),ga(0,11,15,-7,0,24,38,3,0,9,46,8)],s5={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},l5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function kU(e){return`${Math.round(e)}ms`}function u5(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function c5(e){const t={...s5,...e.easing},n={...l5,...e.duration};return{getAutoHeightDuration:u5,create:(o=["all"],i={})=>{const{duration:l=n.standard,easing:c=t.easeInOut,delay:f=0,...p}=i;return(Array.isArray(o)?o:[o]).map(g=>`${g} ${typeof l=="string"?l:kU(l)} ${c} ${typeof f=="string"?f:kU(f)}`).join(",")},...e,easing:t,duration:n}}const d5={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function h5(e){return _f(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function Gq(e={}){const t={...e};function n(r){const o=Object.entries(r);for(let i=0;i<o.length;i++){const[l,c]=o[i];!h5(c)||l.startsWith("unstable_")?delete r[l]:_f(c)&&(r[l]={...c},n(r[l]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function fD(e={},...t){const{breakpoints:n,mixins:r={},spacing:o,palette:i={},transitions:l={},typography:c={},shape:f,...p}=e;if(e.vars)throw new Error(im(20));const g=aF(i),v=KP(e);let w=Xl(v,{mixins:e5(v.breakpoints,r),palette:g,shadows:a5.slice(),typography:n5(g,c),transitions:c5(l),zIndex:{...d5}});return w=Xl(w,p),w=t.reduce((C,T)=>Xl(C,T),w),w.unstable_sxConfig={...HS,...p==null?void 0:p.unstable_sxConfig},w.unstable_sx=function(T){return i_({sx:T,theme:this})},w.toRuntimeSource=Gq,w}function pD(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const f5=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=pD(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function Wq(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Kq(e){return e==="dark"?f5:[]}function p5(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...o}=e,i=aF(t);return{palette:i,opacity:{...Wq(i.mode),...n},overlays:r||Kq(i.mode),...o}}function m5(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const g5=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],y5=e=>(t,n)=>{const r=e.rootSelector||":root",o=e.colorSchemeSelector;let i=o;if(o==="class"&&(i=".%s"),o==="data"&&(i="[data-%s]"),o!=null&&o.startsWith("data-")&&!o.includes("%s")&&(i=`[${o}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return g5(e.cssVarPrefix).forEach(c=>{l[c]=n[c],delete n[c]}),i==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:l}}:i?{[i.replace("%s",t)]:l,[`${r}, ${i.replace("%s",t)}`]:n}:{[r]:{...n,...l}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(i)return i.replace("%s",String(t))}return r};function v5(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function rn(e,t,n){!e[t]&&n&&(e[t]=n)}function n1(e){return typeof e!="string"||!e.startsWith("hsl")?e:Fq(e)}function Dp(e,t){`${t}Channel`in e||(e[`${t}Channel`]=t1(n1(e[t])))}function _5(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const lf=e=>{try{return e()}catch{}},b5=(e="mui")=>LJ(e);function LM(e,t,n,r){if(!t)return;t=t===!0?{}:t;const o=r==="dark"?"dark":"light";if(!n){e[r]=p5({...t,palette:{mode:o,...t==null?void 0:t.palette}});return}const{palette:i,...l}=fD({...n,palette:{mode:o,...t==null?void 0:t.palette}});return e[r]={...t,palette:i,opacity:{...Wq(o),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||Kq(o)},l}function w5(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:o=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:l=m5,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:f=":root",...p}=e,g=Object.keys(n)[0],v=r||(n.light&&g!=="light"?"light":g),w=b5(i),{[v]:C,light:T,dark:k,...P}=n,O={...P};let L=C;if((v==="dark"&&!("dark"in n)||v==="light"&&!("light"in n))&&(L=!0),!L)throw new Error(im(21,v));const D=LM(O,L,p,v);T&&!O.light&&LM(O,T,void 0,"light"),k&&!O.dark&&LM(O,k,void 0,"dark");let N={defaultColorScheme:v,...D,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:f,getCssVar:w,colorSchemes:O,font:{...JJ(D.typography),...D.font},spacing:_5(p.spacing)};Object.keys(N.colorSchemes).forEach(q=>{const z=N.colorSchemes[q].palette,$=K=>{const te=K.split("-"),re=te[1],oe=te[2];return w(K,z[re][oe])};if(z.mode==="light"&&(rn(z.common,"background","#fff"),rn(z.common,"onBackground","#000")),z.mode==="dark"&&(rn(z.common,"background","#000"),rn(z.common,"onBackground","#fff")),v5(z,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),z.mode==="light"){rn(z.Alert,"errorColor",zi(z.error.light,.6)),rn(z.Alert,"infoColor",zi(z.info.light,.6)),rn(z.Alert,"successColor",zi(z.success.light,.6)),rn(z.Alert,"warningColor",zi(z.warning.light,.6)),rn(z.Alert,"errorFilledBg",$("palette-error-main")),rn(z.Alert,"infoFilledBg",$("palette-info-main")),rn(z.Alert,"successFilledBg",$("palette-success-main")),rn(z.Alert,"warningFilledBg",$("palette-warning-main")),rn(z.Alert,"errorFilledColor",lf(()=>z.getContrastText(z.error.main))),rn(z.Alert,"infoFilledColor",lf(()=>z.getContrastText(z.info.main))),rn(z.Alert,"successFilledColor",lf(()=>z.getContrastText(z.success.main))),rn(z.Alert,"warningFilledColor",lf(()=>z.getContrastText(z.warning.main))),rn(z.Alert,"errorStandardBg",Bi(z.error.light,.9)),rn(z.Alert,"infoStandardBg",Bi(z.info.light,.9)),rn(z.Alert,"successStandardBg",Bi(z.success.light,.9)),rn(z.Alert,"warningStandardBg",Bi(z.warning.light,.9)),rn(z.Alert,"errorIconColor",$("palette-error-main")),rn(z.Alert,"infoIconColor",$("palette-info-main")),rn(z.Alert,"successIconColor",$("palette-success-main")),rn(z.Alert,"warningIconColor",$("palette-warning-main")),rn(z.AppBar,"defaultBg",$("palette-grey-100")),rn(z.Avatar,"defaultBg",$("palette-grey-400")),rn(z.Button,"inheritContainedBg",$("palette-grey-300")),rn(z.Button,"inheritContainedHoverBg",$("palette-grey-A100")),rn(z.Chip,"defaultBorder",$("palette-grey-400")),rn(z.Chip,"defaultAvatarColor",$("palette-grey-700")),rn(z.Chip,"defaultIconColor",$("palette-grey-700")),rn(z.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),rn(z.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),rn(z.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),rn(z.LinearProgress,"primaryBg",Bi(z.primary.main,.62)),rn(z.LinearProgress,"secondaryBg",Bi(z.secondary.main,.62)),rn(z.LinearProgress,"errorBg",Bi(z.error.main,.62)),rn(z.LinearProgress,"infoBg",Bi(z.info.main,.62)),rn(z.LinearProgress,"successBg",Bi(z.success.main,.62)),rn(z.LinearProgress,"warningBg",Bi(z.warning.main,.62)),rn(z.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.11)`),rn(z.Slider,"primaryTrack",Bi(z.primary.main,.62)),rn(z.Slider,"secondaryTrack",Bi(z.secondary.main,.62)),rn(z.Slider,"errorTrack",Bi(z.error.main,.62)),rn(z.Slider,"infoTrack",Bi(z.info.main,.62)),rn(z.Slider,"successTrack",Bi(z.success.main,.62)),rn(z.Slider,"warningTrack",Bi(z.warning.main,.62));const K=iT(z.background.default,.8);rn(z.SnackbarContent,"bg",K),rn(z.SnackbarContent,"color",lf(()=>z.getContrastText(K))),rn(z.SpeedDialAction,"fabHoverBg",iT(z.background.paper,.15)),rn(z.StepConnector,"border",$("palette-grey-400")),rn(z.StepContent,"border",$("palette-grey-400")),rn(z.Switch,"defaultColor",$("palette-common-white")),rn(z.Switch,"defaultDisabledColor",$("palette-grey-100")),rn(z.Switch,"primaryDisabledColor",Bi(z.primary.main,.62)),rn(z.Switch,"secondaryDisabledColor",Bi(z.secondary.main,.62)),rn(z.Switch,"errorDisabledColor",Bi(z.error.main,.62)),rn(z.Switch,"infoDisabledColor",Bi(z.info.main,.62)),rn(z.Switch,"successDisabledColor",Bi(z.success.main,.62)),rn(z.Switch,"warningDisabledColor",Bi(z.warning.main,.62)),rn(z.TableCell,"border",Bi(oT(z.divider,1),.88)),rn(z.Tooltip,"bg",oT(z.grey[700],.92))}if(z.mode==="dark"){rn(z.Alert,"errorColor",Bi(z.error.light,.6)),rn(z.Alert,"infoColor",Bi(z.info.light,.6)),rn(z.Alert,"successColor",Bi(z.success.light,.6)),rn(z.Alert,"warningColor",Bi(z.warning.light,.6)),rn(z.Alert,"errorFilledBg",$("palette-error-dark")),rn(z.Alert,"infoFilledBg",$("palette-info-dark")),rn(z.Alert,"successFilledBg",$("palette-success-dark")),rn(z.Alert,"warningFilledBg",$("palette-warning-dark")),rn(z.Alert,"errorFilledColor",lf(()=>z.getContrastText(z.error.dark))),rn(z.Alert,"infoFilledColor",lf(()=>z.getContrastText(z.info.dark))),rn(z.Alert,"successFilledColor",lf(()=>z.getContrastText(z.success.dark))),rn(z.Alert,"warningFilledColor",lf(()=>z.getContrastText(z.warning.dark))),rn(z.Alert,"errorStandardBg",zi(z.error.light,.9)),rn(z.Alert,"infoStandardBg",zi(z.info.light,.9)),rn(z.Alert,"successStandardBg",zi(z.success.light,.9)),rn(z.Alert,"warningStandardBg",zi(z.warning.light,.9)),rn(z.Alert,"errorIconColor",$("palette-error-main")),rn(z.Alert,"infoIconColor",$("palette-info-main")),rn(z.Alert,"successIconColor",$("palette-success-main")),rn(z.Alert,"warningIconColor",$("palette-warning-main")),rn(z.AppBar,"defaultBg",$("palette-grey-900")),rn(z.AppBar,"darkBg",$("palette-background-paper")),rn(z.AppBar,"darkColor",$("palette-text-primary")),rn(z.Avatar,"defaultBg",$("palette-grey-600")),rn(z.Button,"inheritContainedBg",$("palette-grey-800")),rn(z.Button,"inheritContainedHoverBg",$("palette-grey-700")),rn(z.Chip,"defaultBorder",$("palette-grey-700")),rn(z.Chip,"defaultAvatarColor",$("palette-grey-300")),rn(z.Chip,"defaultIconColor",$("palette-grey-300")),rn(z.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),rn(z.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),rn(z.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),rn(z.LinearProgress,"primaryBg",zi(z.primary.main,.5)),rn(z.LinearProgress,"secondaryBg",zi(z.secondary.main,.5)),rn(z.LinearProgress,"errorBg",zi(z.error.main,.5)),rn(z.LinearProgress,"infoBg",zi(z.info.main,.5)),rn(z.LinearProgress,"successBg",zi(z.success.main,.5)),rn(z.LinearProgress,"warningBg",zi(z.warning.main,.5)),rn(z.Skeleton,"bg",`rgba(${$("palette-text-primaryChannel")} / 0.13)`),rn(z.Slider,"primaryTrack",zi(z.primary.main,.5)),rn(z.Slider,"secondaryTrack",zi(z.secondary.main,.5)),rn(z.Slider,"errorTrack",zi(z.error.main,.5)),rn(z.Slider,"infoTrack",zi(z.info.main,.5)),rn(z.Slider,"successTrack",zi(z.success.main,.5)),rn(z.Slider,"warningTrack",zi(z.warning.main,.5));const K=iT(z.background.default,.98);rn(z.SnackbarContent,"bg",K),rn(z.SnackbarContent,"color",lf(()=>z.getContrastText(K))),rn(z.SpeedDialAction,"fabHoverBg",iT(z.background.paper,.15)),rn(z.StepConnector,"border",$("palette-grey-600")),rn(z.StepContent,"border",$("palette-grey-600")),rn(z.Switch,"defaultColor",$("palette-grey-300")),rn(z.Switch,"defaultDisabledColor",$("palette-grey-600")),rn(z.Switch,"primaryDisabledColor",zi(z.primary.main,.55)),rn(z.Switch,"secondaryDisabledColor",zi(z.secondary.main,.55)),rn(z.Switch,"errorDisabledColor",zi(z.error.main,.55)),rn(z.Switch,"infoDisabledColor",zi(z.info.main,.55)),rn(z.Switch,"successDisabledColor",zi(z.success.main,.55)),rn(z.Switch,"warningDisabledColor",zi(z.warning.main,.55)),rn(z.TableCell,"border",zi(oT(z.divider,1),.68)),rn(z.Tooltip,"bg",oT(z.grey[700],.92))}Dp(z.background,"default"),Dp(z.background,"paper"),Dp(z.common,"background"),Dp(z.common,"onBackground"),Dp(z,"divider"),Object.keys(z).forEach(K=>{const te=z[K];K!=="tonalOffset"&&te&&typeof te=="object"&&(te.main&&rn(z[K],"mainChannel",t1(n1(te.main))),te.light&&rn(z[K],"lightChannel",t1(n1(te.light))),te.dark&&rn(z[K],"darkChannel",t1(n1(te.dark))),te.contrastText&&rn(z[K],"contrastTextChannel",t1(n1(te.contrastText))),K==="text"&&(Dp(z[K],"primary"),Dp(z[K],"secondary")),K==="action"&&(te.active&&Dp(z[K],"active"),te.selected&&Dp(z[K],"selected")))})}),N=t.reduce((q,z)=>Xl(q,z),N);const F={prefix:i,disableCssColorScheme:o,shouldSkipGeneratingVar:l,getSelector:y5(N)},{vars:B,generateThemeVars:V,generateStyleSheets:G}=zJ(N,F);return N.vars=B,Object.entries(N.colorSchemes[N.defaultColorScheme]).forEach(([q,z])=>{N[q]=z}),N.generateThemeVars=V,N.generateStyleSheets=G,N.generateSpacing=function(){return Pq(p.spacing,nF(this))},N.getColorSchemeSelector=BJ(c),N.spacing=N.generateSpacing(),N.shouldSkipGeneratingVar=l,N.unstable_sxConfig={...HS,...p==null?void 0:p.unstable_sxConfig},N.unstable_sx=function(z){return i_({sx:z,theme:this})},N.toRuntimeSource=Gq,N}function PU(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:aF({...n===!0?{}:n.palette,mode:t})})}function Yq(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:o=n?void 0:{light:!0},defaultColorScheme:i=n==null?void 0:n.mode,...l}=e,c=i||"light",f=o==null?void 0:o[c],p={...o,...n?{[c]:{...typeof f!="boolean"&&f,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return fD(e,...t);let g=n;"palette"in e||p[c]&&(p[c]!==!0?g=p[c].palette:c==="dark"&&(g={mode:"dark"}));const v=fD({...e,palette:g},...t);return v.defaultColorScheme=c,v.colorSchemes=p,v.palette.mode==="light"&&(v.colorSchemes.light={...p.light!==!0&&p.light,palette:v.palette},PU(v,"dark",p.dark)),v.palette.mode==="dark"&&(v.colorSchemes.dark={...p.dark!==!0&&p.dark,palette:v.palette},PU(v,"light",p.light)),v}return!n&&!("light"in p)&&c==="light"&&(p.light=!0),w5({...l,colorSchemes:p,defaultColorScheme:c,...typeof r!="boolean"&&r},...t)}const QP=Yq(),qS="$$material";function Zq(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const cc=e=>Zq(e)&&e!=="classes",sn=Lq({themeId:qS,defaultTheme:QP,rootShouldForwardProp:cc});function Kr(e){return OJ(e)}const JP=VJ({createStyledComponent:sn("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${tn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Kr({props:e,name:"MuiContainer"})});var eC={},AU;function x5(){if(AU)return eC;AU=1,Object.defineProperty(eC,"__esModule",{value:!0}),eC.parse=l,eC.serialize=p;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,i=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function l(w,C){const T=new i,k=w.length;if(k<2)return T;const P=(C==null?void 0:C.decode)||g;let O=0;do{const L=w.indexOf("=",O);if(L===-1)break;const D=w.indexOf(";",O),N=D===-1?k:D;if(L>N){O=w.lastIndexOf(";",L-1)+1;continue}const F=c(w,O,L),B=f(w,L,F),V=w.slice(F,B);if(T[V]===void 0){let G=c(w,L+1,N),q=f(w,N,G);const z=P(w.slice(G,q));T[V]=z}O=N+1}while(O<k);return T}function c(w,C,T){do{const k=w.charCodeAt(C);if(k!==32&&k!==9)return C}while(++C<T);return T}function f(w,C,T){for(;C>T;){const k=w.charCodeAt(--C);if(k!==32&&k!==9)return C+1}return T}function p(w,C,T){const k=(T==null?void 0:T.encode)||encodeURIComponent;if(!e.test(w))throw new TypeError(`argument name is invalid: ${w}`);const P=k(C);if(!t.test(P))throw new TypeError(`argument val is invalid: ${C}`);let O=w+"="+P;if(!T)return O;if(T.maxAge!==void 0){if(!Number.isInteger(T.maxAge))throw new TypeError(`option maxAge is invalid: ${T.maxAge}`);O+="; Max-Age="+T.maxAge}if(T.domain){if(!n.test(T.domain))throw new TypeError(`option domain is invalid: ${T.domain}`);O+="; Domain="+T.domain}if(T.path){if(!r.test(T.path))throw new TypeError(`option path is invalid: ${T.path}`);O+="; Path="+T.path}if(T.expires){if(!v(T.expires)||!Number.isFinite(T.expires.valueOf()))throw new TypeError(`option expires is invalid: ${T.expires}`);O+="; Expires="+T.expires.toUTCString()}if(T.httpOnly&&(O+="; HttpOnly"),T.secure&&(O+="; Secure"),T.partitioned&&(O+="; Partitioned"),T.priority)switch(typeof T.priority=="string"?T.priority.toLowerCase():void 0){case"low":O+="; Priority=Low";break;case"medium":O+="; Priority=Medium";break;case"high":O+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${T.priority}`)}if(T.sameSite)switch(typeof T.sameSite=="string"?T.sameSite.toLowerCase():T.sameSite){case!0:case"strict":O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"none":O+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${T.sameSite}`)}return O}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return o.call(w)==="[object Date]"}return eC}x5();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MU="popstate";function C5(e={}){function t(o,i){let{pathname:l="/",search:c="",hash:f=""}=vm(o.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),nS("",{pathname:l,search:c,hash:f},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(o,i){let l=o.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let f=o.location.href,p=f.indexOf("#");c=p===-1?f:f.slice(0,p)}return c+"#"+(typeof i=="string"?i:ey(i))}function r(o,i){Xs(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return E5(t,n,r,e)}function _o(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function S5(){return Math.random().toString(36).substring(2,10)}function RU(e,t){return{usr:e.state,key:e.key,idx:t}}function nS(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?vm(t):t,state:n,key:t&&t.key||r||S5()}}function ey({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function vm(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function E5(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:i=!1}=r,l=o.history,c="POP",f=null,p=g();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function g(){return(l.state||{idx:null}).idx}function v(){c="POP";let P=g(),O=P==null?null:P-p;p=P,f&&f({action:c,location:k.location,delta:O})}function w(P,O){c="PUSH";let L=nS(k.location,P,O);n(L,P),p=g()+1;let D=RU(L,p),N=k.createHref(L);try{l.pushState(D,"",N)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;o.location.assign(N)}i&&f&&f({action:c,location:k.location,delta:1})}function C(P,O){c="REPLACE";let L=nS(k.location,P,O);n(L,P),p=g();let D=RU(L,p),N=k.createHref(L);l.replaceState(D,"",N),i&&f&&f({action:c,location:k.location,delta:0})}function T(P){let O=o.location.origin!=="null"?o.location.origin:o.location.href,L=typeof P=="string"?P:ey(P);return L=L.replace(/ $/,"%20"),_o(O,`No window.location.(origin|href) available to create URL for href: ${L}`),new URL(L,O)}let k={get action(){return c},get location(){return e(o,l)},listen(P){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(MU,v),f=P,()=>{o.removeEventListener(MU,v),f=null}},createHref(P){return t(o,P)},createURL:T,encodeLocation(P){let O=T(P);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:w,replace:C,go(P){return l.go(P)}};return k}var T5=new Set(["lazy","caseSensitive","path","id","index","children"]);function I5(e){return e.index===!0}function JI(e,t,n=[],r={}){return e.map((o,i)=>{let l=[...n,String(i)],c=typeof o.id=="string"?o.id:l.join("-");if(_o(o.index!==!0||!o.children,"Cannot specify children on an index route"),_o(!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),I5(o)){let f={...o,...t(o),id:c};return r[c]=f,f}else{let f={...o,...t(o),id:c,children:void 0};return r[c]=f,o.children&&(f.children=JI(o.children,t,l,r)),f}})}function Pg(e,t,n="/"){return dI(e,t,n,!1)}function dI(e,t,n,r){let o=typeof t=="string"?vm(t):t,i=Ph(o.pathname||"/",n);if(i==null)return null;let l=Xq(e);P5(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let p=U5(i);c=z5(l[f],p,r)}return c}function k5(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function Xq(e,t=[],n=[],r=""){let o=(i,l,c)=>{let f={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};f.relativePath.startsWith("/")&&(_o(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=Tf([r,f.relativePath]),g=n.concat(f);i.children&&i.children.length>0&&(_o(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Xq(i.children,t,g,p)),!(i.path==null&&!i.index)&&t.push({path:p,score:N5(p,i.index),routesMeta:g})};return e.forEach((i,l)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))o(i,l);else for(let f of Qq(i.path))o(i,l,f)}),t}function Qq(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return o?[i,""]:[i];let l=Qq(r.join("/")),c=[];return c.push(...l.map(f=>f===""?i:[i,f].join("/"))),o&&c.push(...l),c.map(f=>e.startsWith("/")&&f===""?"/":f)}function P5(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:F5(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var A5=/^:[\w-]+$/,M5=3,R5=2,O5=1,D5=10,L5=-2,OU=e=>e==="*";function N5(e,t){let n=e.split("/"),r=n.length;return n.some(OU)&&(r+=L5),t&&(r+=R5),n.filter(o=>!OU(o)).reduce((o,i)=>o+(A5.test(i)?M5:i===""?O5:D5),r)}function F5(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function z5(e,t,n=!1){let{routesMeta:r}=e,o={},i="/",l=[];for(let c=0;c<r.length;++c){let f=r[c],p=c===r.length-1,g=i==="/"?t:t.slice(i.length)||"/",v=ek({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),w=f.route;if(!v&&p&&n&&!r[r.length-1].route.index&&(v=ek({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!v)return null;Object.assign(o,v.params),l.push({params:o,pathname:Tf([i,v.pathname]),pathnameBase:H5(Tf([i,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(i=Tf([i,v.pathnameBase]))}return l}function ek(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=B5(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],l=i.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:r.reduce((p,{paramName:g,isOptional:v},w)=>{if(g==="*"){let T=c[w]||"";l=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const C=c[w];return v&&!C?p[g]=void 0:p[g]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:l,pattern:e}}function B5(e,t=!1,n=!0){Xs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function U5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xs(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ph(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function j5(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?vm(e):e;return{pathname:n?n.startsWith("/")?n:$5(n,t):t,search:V5(r),hash:q5(o)}}function $5(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function NM(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Jq(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function sF(e){let t=Jq(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function lF(e,t,n,r=!1){let o;typeof e=="string"?o=vm(e):(o={...e},_o(!o.pathname||!o.pathname.includes("?"),NM("?","pathname","search",o)),_o(!o.pathname||!o.pathname.includes("#"),NM("#","pathname","hash",o)),_o(!o.search||!o.search.includes("#"),NM("#","search","hash",o)));let i=e===""||o.pathname==="",l=i?"/":o.pathname,c;if(l==null)c=n;else{let v=t.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;o.pathname=w.join("/")}c=v>=0?t[v]:"/"}let f=j5(o,c),p=l&&l!=="/"&&l.endsWith("/"),g=(i||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var Tf=e=>e.join("/").replace(/\/\/+/g,"/"),H5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,q5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,tk=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function eA(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var e8=["POST","PUT","PATCH","DELETE"],G5=new Set(e8),W5=["GET",...e8],K5=new Set(W5),Y5=new Set([301,302,303,307,308]),Z5=new Set([307,308]),FM={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},X5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tC={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q5=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),t8="remix-router-transitions",n8=Symbol("ResetLoaderData");function J5(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";_o(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=e.mapRouteProperties||Q5,o={},i=JI(e.routes,r,void 0,o),l,c=e.basename||"/",f=e.dataStrategy||o2,p=e.patchRoutesOnNavigation,g={...e.future},v=null,w=new Set,C=null,T=null,k=null,P=e.hydrationData!=null,O=Pg(i,e.history.location,c),L=null;if(O==null&&!p){let Ce=_d(404,{pathname:e.history.location.pathname}),{matches:ke,route:De}=VU(i);O=ke,L={[De.id]:Ce}}O&&!e.hydrationData&&xe(O,i,e.history.location.pathname).active&&(O=null);let D;if(O)if(O.some(Ce=>Ce.route.lazy))D=!1;else if(!O.some(Ce=>Ce.route.loader))D=!0;else{let Ce=e.hydrationData?e.hydrationData.loaderData:null,ke=e.hydrationData?e.hydrationData.errors:null;if(ke){let De=O.findIndex(He=>ke[He.route.id]!==void 0);D=O.slice(0,De+1).every(He=>!gD(He.route,Ce,ke))}else D=O.every(De=>!gD(De.route,Ce,ke))}else{D=!1,O=[];let Ce=xe(null,i,e.history.location.pathname);Ce.active&&Ce.matches&&(O=Ce.matches)}let N,F={historyAction:e.history.action,location:e.history.location,matches:O,initialized:D,navigation:FM,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||L,fetchers:new Map,blockers:new Map},B="POP",V=!1,G,q=!1,z=new Map,$=null,K=!1,te=!1,re=new Set,oe=new Map,ue=0,Q=-1,ce=new Map,ae=new Set,fe=new Map,le=new Map,pe=new Set,Fe=new Map,Be,Ze=null;function it(){if(v=e.history.listen(({action:Ce,location:ke,delta:De})=>{if(Be){Be(),Be=void 0;return}Xs(Fe.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let He=an({currentLocation:F.location,nextLocation:ke,historyAction:Ce});if(He&&De!=null){let vt=new Promise(Ct=>{Be=Ct});e.history.go(De*-1),cn(He,{state:"blocked",location:ke,proceed(){cn(He,{state:"proceeding",proceed:void 0,reset:void 0,location:ke}),vt.then(()=>e.history.go(De))},reset(){let Ct=new Map(F.blockers);Ct.set(He,tC),st({blockers:Ct})}});return}return ne(Ce,ke)}),n){m2(t,z);let Ce=()=>g2(t,z);t.addEventListener("pagehide",Ce),$=()=>t.removeEventListener("pagehide",Ce)}return F.initialized||ne("POP",F.location,{initialHydration:!0}),N}function ot(){v&&v(),$&&$(),w.clear(),G&&G.abort(),F.fetchers.forEach((Ce,ke)=>Rt(ke)),F.blockers.forEach((Ce,ke)=>kt(ke))}function ut(Ce){return w.add(Ce),()=>w.delete(Ce)}function st(Ce,ke={}){F={...F,...Ce};let De=[],He=[];F.fetchers.forEach((vt,Ct)=>{vt.state==="idle"&&(pe.has(Ct)?De.push(Ct):He.push(Ct))}),[...w].forEach(vt=>vt(F,{deletedFetchers:De,viewTransitionOpts:ke.viewTransitionOpts,flushSync:ke.flushSync===!0})),De.forEach(vt=>Rt(vt)),He.forEach(vt=>F.fetchers.delete(vt))}function ct(Ce,ke,{flushSync:De}={}){var Ft,vn;let He=F.actionData!=null&&F.navigation.formMethod!=null&&_h(F.navigation.formMethod)&&F.navigation.state==="loading"&&((Ft=Ce.state)==null?void 0:Ft._isRedirect)!==!0,vt;ke.actionData?Object.keys(ke.actionData).length>0?vt=ke.actionData:vt=null:He?vt=F.actionData:vt=null;let Ct=ke.loaderData?$U(F.loaderData,ke.loaderData,ke.matches||[],ke.errors):F.loaderData,Nt=F.blockers;Nt.size>0&&(Nt=new Map(Nt),Nt.forEach((gn,_n)=>Nt.set(_n,tC)));let jt=V===!0||F.navigation.formMethod!=null&&_h(F.navigation.formMethod)&&((vn=Ce.state)==null?void 0:vn._isRedirect)!==!0;l&&(i=l,l=void 0),K||B==="POP"||(B==="PUSH"?e.history.push(Ce,Ce.state):B==="REPLACE"&&e.history.replace(Ce,Ce.state));let Ht;if(B==="POP"){let gn=z.get(F.location.pathname);gn&&gn.has(Ce.pathname)?Ht={currentLocation:F.location,nextLocation:Ce}:z.has(Ce.pathname)&&(Ht={currentLocation:Ce,nextLocation:F.location})}else if(q){let gn=z.get(F.location.pathname);gn?gn.add(Ce.pathname):(gn=new Set([Ce.pathname]),z.set(F.location.pathname,gn)),Ht={currentLocation:F.location,nextLocation:Ce}}st({...ke,actionData:vt,loaderData:Ct,historyAction:B,location:Ce,initialized:!0,navigation:FM,revalidation:"idle",restoreScrollPosition:de(Ce,ke.matches||F.matches),preventScrollReset:jt,blockers:Nt},{viewTransitionOpts:Ht,flushSync:De===!0}),B="POP",V=!1,q=!1,K=!1,te=!1,Ze==null||Ze.resolve(),Ze=null}async function Ae(Ce,ke){if(typeof Ce=="number"){e.history.go(Ce);return}let De=mD(F.location,F.matches,c,Ce,ke==null?void 0:ke.fromRouteId,ke==null?void 0:ke.relative),{path:He,submission:vt,error:Ct}=DU(!1,De,ke),Nt=F.location,jt=nS(F.location,He,ke&&ke.state);jt={...jt,...e.history.encodeLocation(jt)};let Ht=ke&&ke.replace!=null?ke.replace:void 0,Ft="PUSH";Ht===!0?Ft="REPLACE":Ht===!1||vt!=null&&_h(vt.formMethod)&&vt.formAction===F.location.pathname+F.location.search&&(Ft="REPLACE");let vn=ke&&"preventScrollReset"in ke?ke.preventScrollReset===!0:void 0,gn=(ke&&ke.flushSync)===!0,_n=an({currentLocation:Nt,nextLocation:jt,historyAction:Ft});if(_n){cn(_n,{state:"blocked",location:jt,proceed(){cn(_n,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),Ae(Ce,ke)},reset(){let Dn=new Map(F.blockers);Dn.set(_n,tC),st({blockers:Dn})}});return}await ne(Ft,jt,{submission:vt,pendingError:Ct,preventScrollReset:vn,replace:ke&&ke.replace,enableViewTransition:ke&&ke.viewTransition,flushSync:gn})}function Z(){Ze||(Ze=y2()),Pt(),st({revalidation:"loading"});let Ce=Ze.promise;return F.navigation.state==="submitting"?Ce:F.navigation.state==="idle"?(ne(F.historyAction,F.location,{startUninterruptedRevalidation:!0}),Ce):(ne(B||F.historyAction,F.navigation.location,{overrideNavigation:F.navigation,enableViewTransition:q===!0}),Ce)}async function ne(Ce,ke,De){G&&G.abort(),G=null,B=Ce,K=(De&&De.startUninterruptedRevalidation)===!0,Le(F.location,F.matches),V=(De&&De.preventScrollReset)===!0,q=(De&&De.enableViewTransition)===!0;let He=l||i,vt=De&&De.overrideNavigation,Ct=Pg(He,ke,c),Nt=(De&&De.flushSync)===!0,jt=xe(Ct,He,ke.pathname);if(jt.active&&jt.matches&&(Ct=jt.matches),!Ct){let{error:ft,notFoundMatches:dt,route:Wt}=Qn(ke.pathname);ct(ke,{matches:dt,loaderData:{},errors:{[Wt.id]:ft}},{flushSync:Nt});return}if(F.initialized&&!te&&c2(F.location,ke)&&!(De&&De.submission&&_h(De.submission.formMethod))){ct(ke,{matches:Ct},{flushSync:Nt});return}G=new AbortController;let Ht=Mb(e.history,ke,G.signal,De&&De.submission),Ft;if(De&&De.pendingError)Ft=[Cv(Ct).route.id,{type:"error",error:De.pendingError}];else if(De&&De.submission&&_h(De.submission.formMethod)){let ft=await ee(Ht,ke,De.submission,Ct,jt.active,{replace:De.replace,flushSync:Nt});if(ft.shortCircuited)return;if(ft.pendingActionResult){let[dt,Wt]=ft.pendingActionResult;if(Bc(Wt)&&eA(Wt.error)&&Wt.error.status===404){G=null,ct(ke,{matches:ft.matches,loaderData:{},errors:{[dt]:Wt.error}});return}}Ct=ft.matches||Ct,Ft=ft.pendingActionResult,vt=zM(ke,De.submission),Nt=!1,jt.active=!1,Ht=Mb(e.history,Ht.url,Ht.signal)}let{shortCircuited:vn,matches:gn,loaderData:_n,errors:Dn}=await ye(Ht,ke,Ct,jt.active,vt,De&&De.submission,De&&De.fetcherSubmission,De&&De.replace,De&&De.initialHydration===!0,Nt,Ft);vn||(G=null,ct(ke,{matches:gn||Ct,...HU(Ft),loaderData:_n,errors:Dn}))}async function ee(Ce,ke,De,He,vt,Ct={}){Pt();let Nt=f2(ke,De);if(st({navigation:Nt},{flushSync:Ct.flushSync===!0}),vt){let Ft=await Ee(He,ke.pathname,Ce.signal);if(Ft.type==="aborted")return{shortCircuited:!0};if(Ft.type==="error"){let vn=Cv(Ft.partialMatches).route.id;return{matches:Ft.partialMatches,pendingActionResult:[vn,{type:"error",error:Ft.error}]}}else if(Ft.matches)He=Ft.matches;else{let{notFoundMatches:vn,error:gn,route:_n}=Qn(ke.pathname);return{matches:vn,pendingActionResult:[_n.id,{type:"error",error:gn}]}}}let jt,Ht=r1(He,ke);if(!Ht.route.action&&!Ht.route.lazy)jt={type:"error",error:_d(405,{method:Ce.method,pathname:ke.pathname,routeId:Ht.route.id})};else if(jt=(await mt("action",F,Ce,[Ht],He,null))[Ht.route.id],Ce.signal.aborted)return{shortCircuited:!0};if(Rv(jt)){let Ft;return Ct&&Ct.replace!=null?Ft=Ct.replace:Ft=BU(jt.response.headers.get("Location"),new URL(Ce.url),c)===F.location.pathname+F.location.search,await wt(Ce,jt,!0,{submission:De,replace:Ft}),{shortCircuited:!0}}if(Bc(jt)){let Ft=Cv(He,Ht.route.id);return(Ct&&Ct.replace)!==!0&&(B="PUSH"),{matches:He,pendingActionResult:[Ft.route.id,jt]}}return{matches:He,pendingActionResult:[Ht.route.id,jt]}}async function ye(Ce,ke,De,He,vt,Ct,Nt,jt,Ht,Ft,vn){let gn=vt||zM(ke,Ct),_n=Ct||Nt||GU(gn),Dn=!K&&!Ht;if(He){if(Dn){let no=Ie(vn);st({navigation:gn,...no!==void 0?{actionData:no}:{}},{flushSync:Ft})}let $n=await Ee(De,ke.pathname,Ce.signal);if($n.type==="aborted")return{shortCircuited:!0};if($n.type==="error"){let no=Cv($n.partialMatches).route.id;return{matches:$n.partialMatches,loaderData:{},errors:{[no]:$n.error}}}else if($n.matches)De=$n.matches;else{let{error:no,notFoundMatches:vr,route:uo}=Qn(ke.pathname);return{matches:vr,loaderData:{},errors:{[uo.id]:no}}}}let ft=l||i,[dt,Wt]=NU(e.history,F,De,_n,ke,Ht===!0,te,re,pe,fe,ae,ft,c,vn);if(Q=++ue,dt.length===0&&Wt.length===0){let $n=xt();return ct(ke,{matches:De,loaderData:{},errors:vn&&Bc(vn[1])?{[vn[0]]:vn[1].error}:null,...HU(vn),...$n?{fetchers:new Map(F.fetchers)}:{}},{flushSync:Ft}),{shortCircuited:!0}}if(Dn){let $n={};if(!He){$n.navigation=gn;let no=Ie(vn);no!==void 0&&($n.actionData=no)}Wt.length>0&&($n.fetchers=ge(Wt)),st($n,{flushSync:Ft})}Wt.forEach($n=>{qt($n.key),$n.controller&&oe.set($n.key,$n.controller)});let Mn=()=>Wt.forEach($n=>qt($n.key));G&&G.signal.addEventListener("abort",Mn);let{loaderResults:Bn,fetcherResults:dr}=await zt(F,De,dt,Wt,Ce);if(Ce.signal.aborted)return{shortCircuited:!0};G&&G.signal.removeEventListener("abort",Mn),Wt.forEach($n=>oe.delete($n.key));let qn=aT(Bn);if(qn)return await wt(Ce,qn.result,!0,{replace:jt}),{shortCircuited:!0};if(qn=aT(dr),qn)return ae.add(qn.key),await wt(Ce,qn.result,!0,{replace:jt}),{shortCircuited:!0};let{loaderData:to,errors:la}=jU(F,De,Bn,vn,Wt,dr);Ht&&F.errors&&(la={...F.errors,...la});let ua=xt(),lo=Et(Q),_i=ua||lo||Wt.length>0;return{matches:De,loaderData:to,errors:la,..._i?{fetchers:new Map(F.fetchers)}:{}}}function Ie(Ce){if(Ce&&!Bc(Ce[1]))return{[Ce[0]]:Ce[1].data};if(F.actionData)return Object.keys(F.actionData).length===0?null:F.actionData}function ge(Ce){return Ce.forEach(ke=>{let De=F.fetchers.get(ke.key),He=nC(void 0,De?De.data:void 0);F.fetchers.set(ke.key,He)}),new Map(F.fetchers)}async function $e(Ce,ke,De,He){qt(Ce);let vt=(He&&He.flushSync)===!0,Ct=l||i,Nt=mD(F.location,F.matches,c,De,ke,He==null?void 0:He.relative),jt=Pg(Ct,Nt,c),Ht=xe(jt,Ct,Nt);if(Ht.active&&Ht.matches&&(jt=Ht.matches),!jt){We(Ce,ke,_d(404,{pathname:Nt}),{flushSync:vt});return}let{path:Ft,submission:vn,error:gn}=DU(!0,Nt,He);if(gn){We(Ce,ke,gn,{flushSync:vt});return}let _n=r1(jt,Ft),Dn=(He&&He.preventScrollReset)===!0;if(vn&&_h(vn.formMethod)){await nt(Ce,ke,Ft,_n,jt,Ht.active,vt,Dn,vn);return}fe.set(Ce,{routeId:ke,path:Ft}),await pt(Ce,ke,Ft,_n,jt,Ht.active,vt,Dn,vn)}async function nt(Ce,ke,De,He,vt,Ct,Nt,jt,Ht){Pt(),fe.delete(Ce);function Ft(ur){if(!ur.route.action&&!ur.route.lazy){let ci=_d(405,{method:Ht.formMethod,pathname:De,routeId:ke});return We(Ce,ke,ci,{flushSync:Nt}),!0}return!1}if(!Ct&&Ft(He))return;let vn=F.fetchers.get(Ce);Zt(Ce,p2(Ht,vn),{flushSync:Nt});let gn=new AbortController,_n=Mb(e.history,De,gn.signal,Ht);if(Ct){let ur=await Ee(vt,De,_n.signal);if(ur.type==="aborted")return;if(ur.type==="error"){We(Ce,ke,ur.error,{flushSync:Nt});return}else if(ur.matches){if(vt=ur.matches,He=r1(vt,De),Ft(He))return}else{We(Ce,ke,_d(404,{pathname:De}),{flushSync:Nt});return}}oe.set(Ce,gn);let Dn=ue,dt=(await mt("action",F,_n,[He],vt,Ce))[He.route.id];if(_n.signal.aborted){oe.get(Ce)===gn&&oe.delete(Ce);return}if(pe.has(Ce)){if(Rv(dt)||Bc(dt)){Zt(Ce,vg(void 0));return}}else{if(Rv(dt))if(oe.delete(Ce),Q>Dn){Zt(Ce,vg(void 0));return}else return ae.add(Ce),Zt(Ce,nC(Ht)),wt(_n,dt,!1,{fetcherSubmission:Ht,preventScrollReset:jt});if(Bc(dt)){We(Ce,ke,dt.error);return}}let Wt=F.navigation.location||F.location,Mn=Mb(e.history,Wt,gn.signal),Bn=l||i,dr=F.navigation.state!=="idle"?Pg(Bn,F.navigation.location,c):F.matches;_o(dr,"Didn't find any matches after fetcher action");let qn=++ue;ce.set(Ce,qn);let to=nC(Ht,dt.data);F.fetchers.set(Ce,to);let[la,ua]=NU(e.history,F,dr,Ht,Wt,!1,te,re,pe,fe,ae,Bn,c,[He.route.id,dt]);ua.filter(ur=>ur.key!==Ce).forEach(ur=>{let ci=ur.key,Mo=F.fetchers.get(ci),Vi=nC(void 0,Mo?Mo.data:void 0);F.fetchers.set(ci,Vi),qt(ci),ur.controller&&oe.set(ci,ur.controller)}),st({fetchers:new Map(F.fetchers)});let lo=()=>ua.forEach(ur=>qt(ur.key));gn.signal.addEventListener("abort",lo);let{loaderResults:_i,fetcherResults:$n}=await zt(F,dr,la,ua,Mn);if(gn.signal.aborted)return;gn.signal.removeEventListener("abort",lo),ce.delete(Ce),oe.delete(Ce),ua.forEach(ur=>oe.delete(ur.key));let no=aT(_i);if(no)return wt(Mn,no.result,!1,{preventScrollReset:jt});if(no=aT($n),no)return ae.add(no.key),wt(Mn,no.result,!1,{preventScrollReset:jt});let{loaderData:vr,errors:uo}=jU(F,dr,_i,void 0,ua,$n);if(F.fetchers.has(Ce)){let ur=vg(dt.data);F.fetchers.set(Ce,ur)}Et(qn),F.navigation.state==="loading"&&qn>Q?(_o(B,"Expected pending action"),G&&G.abort(),ct(F.navigation.location,{matches:dr,loaderData:vr,errors:uo,fetchers:new Map(F.fetchers)})):(st({errors:uo,loaderData:$U(F.loaderData,vr,dr,uo),fetchers:new Map(F.fetchers)}),te=!1)}async function pt(Ce,ke,De,He,vt,Ct,Nt,jt,Ht){let Ft=F.fetchers.get(Ce);Zt(Ce,nC(Ht,Ft?Ft.data:void 0),{flushSync:Nt});let vn=new AbortController,gn=Mb(e.history,De,vn.signal);if(Ct){let dt=await Ee(vt,De,gn.signal);if(dt.type==="aborted")return;if(dt.type==="error"){We(Ce,ke,dt.error,{flushSync:Nt});return}else if(dt.matches)vt=dt.matches,He=r1(vt,De);else{We(Ce,ke,_d(404,{pathname:De}),{flushSync:Nt});return}}oe.set(Ce,vn);let _n=ue,ft=(await mt("loader",F,gn,[He],vt,Ce))[He.route.id];if(oe.get(Ce)===vn&&oe.delete(Ce),!gn.signal.aborted){if(pe.has(Ce)){Zt(Ce,vg(void 0));return}if(Rv(ft))if(Q>_n){Zt(Ce,vg(void 0));return}else{ae.add(Ce),await wt(gn,ft,!1,{preventScrollReset:jt});return}if(Bc(ft)){We(Ce,ke,ft.error);return}Zt(Ce,vg(ft.data))}}async function wt(Ce,ke,De,{submission:He,fetcherSubmission:vt,preventScrollReset:Ct,replace:Nt}={}){ke.response.headers.has("X-Remix-Revalidate")&&(te=!0);let jt=ke.response.headers.get("Location");_o(jt,"Expected a Location header on the redirect Response"),jt=BU(jt,new URL(Ce.url),c);let Ht=nS(F.location,jt,{_isRedirect:!0});if(n){let ft=!1;if(ke.response.headers.has("X-Remix-Reload-Document"))ft=!0;else if(uF.test(jt)){const dt=e.history.createURL(jt);ft=dt.origin!==t.location.origin||Ph(dt.pathname,c)==null}if(ft){Nt?t.location.replace(jt):t.location.assign(jt);return}}G=null;let Ft=Nt===!0||ke.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:vn,formAction:gn,formEncType:_n}=F.navigation;!He&&!vt&&vn&&gn&&_n&&(He=GU(F.navigation));let Dn=He||vt;if(Z5.has(ke.response.status)&&Dn&&_h(Dn.formMethod))await ne(Ft,Ht,{submission:{...Dn,formAction:jt},preventScrollReset:Ct||V,enableViewTransition:De?q:void 0});else{let ft=zM(Ht,He);await ne(Ft,Ht,{overrideNavigation:ft,fetcherSubmission:vt,preventScrollReset:Ct||V,enableViewTransition:De?q:void 0})}}async function mt(Ce,ke,De,He,vt,Ct){let Nt,jt={};try{Nt=await i2(f,Ce,ke,De,He,vt,Ct,o,r)}catch(Ht){return He.forEach(Ft=>{jt[Ft.route.id]={type:"error",error:Ht}}),jt}for(let[Ht,Ft]of Object.entries(Nt))if(d2(Ft)){let vn=Ft.result;jt[Ht]={type:"redirect",response:l2(vn,De,Ht,vt,c)}}else jt[Ht]=await s2(Ft);return jt}async function zt(Ce,ke,De,He,vt){let Ct=mt("loader",Ce,vt,De,ke,null),Nt=Promise.all(He.map(async Ft=>{if(Ft.matches&&Ft.match&&Ft.controller){let gn=(await mt("loader",Ce,Mb(e.history,Ft.path,Ft.controller.signal),[Ft.match],Ft.matches,Ft.key))[Ft.match.route.id];return{[Ft.key]:gn}}else return Promise.resolve({[Ft.key]:{type:"error",error:_d(404,{pathname:Ft.path})}})})),jt=await Ct,Ht=(await Nt).reduce((Ft,vn)=>Object.assign(Ft,vn),{});return{loaderResults:jt,fetcherResults:Ht}}function Pt(){te=!0,fe.forEach((Ce,ke)=>{oe.has(ke)&&re.add(ke),qt(ke)})}function Zt(Ce,ke,De={}){F.fetchers.set(Ce,ke),st({fetchers:new Map(F.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function We(Ce,ke,De,He={}){let vt=Cv(F.matches,ke);Rt(Ce),st({errors:{[vt.route.id]:De},fetchers:new Map(F.fetchers)},{flushSync:(He&&He.flushSync)===!0})}function Ge(Ce){return le.set(Ce,(le.get(Ce)||0)+1),pe.has(Ce)&&pe.delete(Ce),F.fetchers.get(Ce)||X5}function Rt(Ce){let ke=F.fetchers.get(Ce);oe.has(Ce)&&!(ke&&ke.state==="loading"&&ce.has(Ce))&&qt(Ce),fe.delete(Ce),ce.delete(Ce),ae.delete(Ce),pe.delete(Ce),re.delete(Ce),F.fetchers.delete(Ce)}function Dt(Ce){let ke=(le.get(Ce)||0)-1;ke<=0?(le.delete(Ce),pe.add(Ce)):le.set(Ce,ke),st({fetchers:new Map(F.fetchers)})}function qt(Ce){let ke=oe.get(Ce);ke&&(ke.abort(),oe.delete(Ce))}function Yt(Ce){for(let ke of Ce){let De=Ge(ke),He=vg(De.data);F.fetchers.set(ke,He)}}function xt(){let Ce=[],ke=!1;for(let De of ae){let He=F.fetchers.get(De);_o(He,`Expected fetcher: ${De}`),He.state==="loading"&&(ae.delete(De),Ce.push(De),ke=!0)}return Yt(Ce),ke}function Et(Ce){let ke=[];for(let[De,He]of ce)if(He<Ce){let vt=F.fetchers.get(De);_o(vt,`Expected fetcher: ${De}`),vt.state==="loading"&&(qt(De),ce.delete(De),ke.push(De))}return Yt(ke),ke.length>0}function St(Ce,ke){let De=F.blockers.get(Ce)||tC;return Fe.get(Ce)!==ke&&Fe.set(Ce,ke),De}function kt(Ce){F.blockers.delete(Ce),Fe.delete(Ce)}function cn(Ce,ke){let De=F.blockers.get(Ce)||tC;_o(De.state==="unblocked"&&ke.state==="blocked"||De.state==="blocked"&&ke.state==="blocked"||De.state==="blocked"&&ke.state==="proceeding"||De.state==="blocked"&&ke.state==="unblocked"||De.state==="proceeding"&&ke.state==="unblocked",`Invalid blocker state transition: ${De.state} -> ${ke.state}`);let He=new Map(F.blockers);He.set(Ce,ke),st({blockers:He})}function an({currentLocation:Ce,nextLocation:ke,historyAction:De}){if(Fe.size===0)return;Fe.size>1&&Xs(!1,"A router only supports one blocker at a time");let He=Array.from(Fe.entries()),[vt,Ct]=He[He.length-1],Nt=F.blockers.get(vt);if(!(Nt&&Nt.state==="proceeding")&&Ct({currentLocation:Ce,nextLocation:ke,historyAction:De}))return vt}function Qn(Ce){let ke=_d(404,{pathname:Ce}),De=l||i,{matches:He,route:vt}=VU(De);return{notFoundMatches:He,route:vt,error:ke}}function tr(Ce,ke,De){if(C=Ce,k=ke,T=De||null,!P&&F.navigation===FM){P=!0;let He=de(F.location,F.matches);He!=null&&st({restoreScrollPosition:He})}return()=>{C=null,k=null,T=null}}function lr(Ce,ke){return T&&T(Ce,ke.map(He=>k5(He,F.loaderData)))||Ce.key}function Le(Ce,ke){if(C&&k){let De=lr(Ce,ke);C[De]=k()}}function de(Ce,ke){if(C){let De=lr(Ce,ke),He=C[De];if(typeof He=="number")return He}return null}function xe(Ce,ke,De){if(p)if(Ce){if(Object.keys(Ce[0].params).length>0)return{active:!0,matches:dI(ke,De,c,!0)}}else return{active:!0,matches:dI(ke,De,c,!0)||[]};return{active:!1,matches:null}}async function Ee(Ce,ke,De){if(!p)return{type:"success",matches:Ce};let He=Ce;for(;;){let vt=l==null,Ct=l||i,Nt=o;try{await p({path:ke,matches:He,patch:(Ft,vn)=>{De.aborted||zU(Ft,vn,Ct,Nt,r)}})}catch(Ft){return{type:"error",error:Ft,partialMatches:He}}finally{vt&&!De.aborted&&(i=[...i])}if(De.aborted)return{type:"aborted"};let jt=Pg(Ct,ke,c);if(jt)return{type:"success",matches:jt};let Ht=dI(Ct,ke,c,!0);if(!Ht||He.length===Ht.length&&He.every((Ft,vn)=>Ft.route.id===Ht[vn].route.id))return{type:"success",matches:null};He=Ht}}function Ye(Ce){o={},l=JI(Ce,r,void 0,o)}function lt(Ce,ke){let De=l==null;zU(Ce,ke,l||i,o,r),De&&(i=[...i],st({}))}return N={get basename(){return c},get future(){return g},get state(){return F},get routes(){return i},get window(){return t},initialize:it,subscribe:ut,enableScrollRestoration:tr,navigate:Ae,fetch:$e,revalidate:Z,createHref:Ce=>e.history.createHref(Ce),encodeLocation:Ce=>e.history.encodeLocation(Ce),getFetcher:Ge,deleteFetcher:Dt,dispose:ot,getBlocker:St,deleteBlocker:kt,patchRoutes:lt,_internalFetchControllers:oe,_internalSetRoutes:Ye},N}function e2(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function mD(e,t,n,r,o,i){let l,c;if(o){l=[];for(let p of t)if(l.push(p),p.route.id===o){c=p;break}}else l=t,c=t[t.length-1];let f=lF(r||".",sF(l),Ph(e.pathname,n)||e.pathname,i==="path");if(r==null&&(f.search=e.search,f.hash=e.hash),(r==null||r===""||r===".")&&c){let p=cF(f.search);if(c.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let g=new URLSearchParams(f.search),v=g.getAll("index");g.delete("index"),v.filter(C=>C).forEach(C=>g.append("index",C));let w=g.toString();f.search=w?`?${w}`:""}}return n!=="/"&&(f.pathname=f.pathname==="/"?n:Tf([n,f.pathname])),ey(f)}function DU(e,t,n){if(!n||!e2(n))return{path:t};if(n.formMethod&&!h2(n.formMethod))return{path:t,error:_d(405,{method:n.formMethod})};let r=()=>({path:t,error:_d(400,{type:"invalid-body"})}),i=(n.formMethod||"get").toUpperCase(),l=o8(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!_h(i))return r();let v=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((w,[C,T])=>`${w}${C}=${T}
`,""):String(n.body);return{path:t,submission:{formMethod:i,formAction:l,formEncType:n.formEncType,formData:void 0,json:void 0,text:v}}}else if(n.formEncType==="application/json"){if(!_h(i))return r();try{let v=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:i,formAction:l,formEncType:n.formEncType,formData:void 0,json:v,text:void 0}}}catch{return r()}}}_o(typeof FormData=="function","FormData is not available in this environment");let c,f;if(n.formData)c=yD(n.formData),f=n.formData;else if(n.body instanceof FormData)c=yD(n.body),f=n.body;else if(n.body instanceof URLSearchParams)c=n.body,f=UU(c);else if(n.body==null)c=new URLSearchParams,f=new FormData;else try{c=new URLSearchParams(n.body),f=UU(c)}catch{return r()}let p={formMethod:i,formAction:l,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(_h(p.formMethod))return{path:t,submission:p};let g=vm(t);return e&&g.search&&cF(g.search)&&c.append("index",""),g.search=`?${c}`,{path:ey(g),submission:p}}function LU(e,t,n=!1){let r=e.findIndex(o=>o.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function NU(e,t,n,r,o,i,l,c,f,p,g,v,w,C){let T=C?Bc(C[1])?C[1].error:C[1].data:void 0,k=e.createURL(t.location),P=e.createURL(o),O=n;i&&t.errors?O=LU(n,Object.keys(t.errors)[0],!0):C&&Bc(C[1])&&(O=LU(n,C[0]));let L=C?C[1].statusCode:void 0,D=L&&L>=400,N=O.filter((B,V)=>{let{route:G}=B;if(G.lazy)return!0;if(G.loader==null)return!1;if(i)return gD(G,t.loaderData,t.errors);if(t2(t.loaderData,t.matches[V],B))return!0;let q=t.matches[V],z=B;return FU(B,{currentUrl:k,currentParams:q.params,nextUrl:P,nextParams:z.params,...r,actionResult:T,actionStatus:L,defaultShouldRevalidate:D?!1:l||k.pathname+k.search===P.pathname+P.search||k.search!==P.search||n2(q,z)})}),F=[];return p.forEach((B,V)=>{if(i||!n.some(K=>K.route.id===B.routeId)||f.has(V))return;let G=Pg(v,B.path,w);if(!G){F.push({key:V,routeId:B.routeId,path:B.path,matches:null,match:null,controller:null});return}let q=t.fetchers.get(V),z=r1(G,B.path),$=!1;g.has(V)?$=!1:c.has(V)?(c.delete(V),$=!0):q&&q.state!=="idle"&&q.data===void 0?$=l:$=FU(z,{currentUrl:k,currentParams:t.matches[t.matches.length-1].params,nextUrl:P,nextParams:n[n.length-1].params,...r,actionResult:T,actionStatus:L,defaultShouldRevalidate:D?!1:l}),$&&F.push({key:V,routeId:B.routeId,path:B.path,matches:G,match:z,controller:new AbortController})}),[N,F]}function gD(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,o=n!=null&&n[e.id]!==void 0;return!r&&o?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!o}function t2(e,t,n){let r=!t||n.route.id!==t.route.id,o=!e.hasOwnProperty(n.route.id);return r||o}function n2(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function FU(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function zU(e,t,n,r,o){let i;if(e){let f=r[e];_o(f,`No route found to patch children into: routeId = ${e}`),f.children||(f.children=[]),i=f.children}else i=n;let l=t.filter(f=>!i.some(p=>r8(f,p))),c=JI(l,o,[e||"_","patch",String((i==null?void 0:i.length)||"0")],r);i.push(...c)}function r8(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var o;return(o=t.children)==null?void 0:o.some(i=>r8(n,i))}):!1}async function r2(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let o=n[e.id];_o(o,"No route found in manifest");let i={};for(let l in r){let f=o[l]!==void 0&&l!=="hasErrorBoundary";Xs(!f,`Route "${o.id}" has a static property "${l}" defined but its lazy function is also returning a value for this property. The lazy route property "${l}" will be ignored.`),!f&&!T5.has(l)&&(i[l]=r[l])}Object.assign(o,i),Object.assign(o,{...t(o),lazy:void 0})}async function o2({matches:e}){let t=e.filter(r=>r.shouldLoad);return(await Promise.all(t.map(r=>r.resolve()))).reduce((r,o,i)=>Object.assign(r,{[t[i].route.id]:o}),{})}async function i2(e,t,n,r,o,i,l,c,f,p){let g=i.map(C=>C.route.lazy?r2(C.route,f,c):void 0),v=i.map((C,T)=>{let k=g[T],P=o.some(L=>L.route.id===C.route.id);return{...C,shouldLoad:P,resolve:async L=>(L&&r.method==="GET"&&(C.route.lazy||C.route.loader)&&(P=!0),P?a2(t,r,C,k,L,p):Promise.resolve({type:"data",result:void 0}))}}),w=await e({matches:v,request:r,params:i[0].params,fetcherKey:l,context:p});try{await Promise.all(g)}catch{}return w}async function a2(e,t,n,r,o,i){let l,c,f=p=>{let g,v=new Promise((T,k)=>g=k);c=()=>g(),t.signal.addEventListener("abort",c);let w=T=>typeof p!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${n.route.id}]`)):p({request:t,params:n.params,context:i},...T!==void 0?[T]:[]),C=(async()=>{try{return{type:"data",result:await(o?o(k=>w(k)):w())}}catch(T){return{type:"error",result:T}}})();return Promise.race([C,v])};try{let p=n.route[e];if(r)if(p){let g,[v]=await Promise.all([f(p).catch(w=>{g=w}),r]);if(g!==void 0)throw g;l=v}else if(await r,p=n.route[e],p)l=await f(p);else if(e==="action"){let g=new URL(t.url),v=g.pathname+g.search;throw _d(405,{method:t.method,pathname:v,routeId:n.route.id})}else return{type:"data",result:void 0};else if(p)l=await f(p);else{let g=new URL(t.url),v=g.pathname+g.search;throw _d(404,{pathname:v})}}catch(p){return{type:"error",result:p}}finally{c&&t.signal.removeEventListener("abort",c)}return l}async function s2(e){var r,o,i,l;let{result:t,type:n}=e;if(i8(t)){let c;try{let f=t.headers.get("Content-Type");f&&/\bapplication\/json\b/.test(f)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(f){return{type:"error",error:f}}return n==="error"?{type:"error",error:new tk(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:"data",data:c,statusCode:t.status,headers:t.headers}}if(n==="error"){if(qU(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(r=t.init)==null?void 0:r.status};t=new tk(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:eA(t)?t.status:void 0}}return qU(t)?{type:"data",data:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(l=t.init)!=null&&l.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function l2(e,t,n,r,o){let i=e.headers.get("Location");if(_o(i,"Redirects returned/thrown from loaders/actions must have a Location header"),!uF.test(i)){let l=r.slice(0,r.findIndex(c=>c.route.id===n)+1);i=mD(new URL(t.url),l,o,i),e.headers.set("Location",i)}return e}function BU(e,t,n){if(uF.test(e)){let r=e,o=r.startsWith("//")?new URL(t.protocol+r):new URL(r),i=Ph(o.pathname,n)!=null;if(o.origin===t.origin&&i)return o.pathname+o.search+o.hash}return e}function Mb(e,t,n,r){let o=e.createURL(o8(t)).toString(),i={signal:n};if(r&&_h(r.formMethod)){let{formMethod:l,formEncType:c}=r;i.method=l.toUpperCase(),c==="application/json"?(i.headers=new Headers({"Content-Type":c}),i.body=JSON.stringify(r.json)):c==="text/plain"?i.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?i.body=yD(r.formData):i.body=r.formData}return new Request(o,i)}function yD(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function UU(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function u2(e,t,n,r=!1,o=!1){let i={},l=null,c,f=!1,p={},g=n&&Bc(n[1])?n[1].error:void 0;return e.forEach(v=>{if(!(v.route.id in t))return;let w=v.route.id,C=t[w];if(_o(!Rv(C),"Cannot handle redirect results in processLoaderData"),Bc(C)){let T=C.error;if(g!==void 0&&(T=g,g=void 0),l=l||{},o)l[w]=T;else{let k=Cv(e,w);l[k.route.id]==null&&(l[k.route.id]=T)}r||(i[w]=n8),f||(f=!0,c=eA(C.error)?C.error.status:500),C.headers&&(p[w]=C.headers)}else i[w]=C.data,C.statusCode&&C.statusCode!==200&&!f&&(c=C.statusCode),C.headers&&(p[w]=C.headers)}),g!==void 0&&n&&(l={[n[0]]:g},i[n[0]]=void 0),{loaderData:i,errors:l,statusCode:c||200,loaderHeaders:p}}function jU(e,t,n,r,o,i){let{loaderData:l,errors:c}=u2(t,n,r);return o.forEach(f=>{let{key:p,match:g,controller:v}=f,w=i[p];if(_o(w,"Did not find corresponding fetcher result"),!(v&&v.signal.aborted))if(Bc(w)){let C=Cv(e.matches,g==null?void 0:g.route.id);c&&c[C.route.id]||(c={...c,[C.route.id]:w.error}),e.fetchers.delete(p)}else if(Rv(w))_o(!1,"Unhandled fetcher revalidation redirect");else{let C=vg(w.data);e.fetchers.set(p,C)}}),{loaderData:l,errors:c}}function $U(e,t,n,r){let o=Object.entries(t).filter(([,i])=>i!==n8).reduce((i,[l,c])=>(i[l]=c,i),{});for(let i of n){let l=i.route.id;if(!t.hasOwnProperty(l)&&e.hasOwnProperty(l)&&i.route.loader&&(o[l]=e[l]),r&&r.hasOwnProperty(l))break}return o}function HU(e){return e?Bc(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Cv(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function VU(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function _d(e,{pathname:t,routeId:n,method:r,type:o,message:i}={}){let l="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(l="Bad Request",r&&t&&n?c=`You made a ${r} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(c="Unable to encode submission body")):e===403?(l="Forbidden",c=`Route "${n}" does not match URL "${t}"`):e===404?(l="Not Found",c=`No route matches URL "${t}"`):e===405&&(l="Method Not Allowed",r&&t&&n?c=`You made a ${r.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new tk(e||500,l,new Error(c),!0)}function aT(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,o]=t[n];if(Rv(o))return{key:r,result:o}}}function o8(e){let t=typeof e=="string"?vm(e):e;return ey({...t,hash:""})}function c2(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function d2(e){return i8(e.result)&&Y5.has(e.result.status)}function Bc(e){return e.type==="error"}function Rv(e){return(e&&e.type)==="redirect"}function qU(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function i8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function h2(e){return K5.has(e.toUpperCase())}function _h(e){return G5.has(e.toUpperCase())}function cF(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function r1(e,t){let n=typeof t=="string"?vm(t).search:t.search;if(e[e.length-1].route.index&&cF(n||""))return e[e.length-1];let r=Jq(e);return r[r.length-1]}function GU(e){let{formMethod:t,formAction:n,formEncType:r,text:o,formData:i,json:l}=e;if(!(!t||!n||!r)){if(o!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:o};if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(l!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:l,text:void 0}}}function zM(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function f2(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function nC(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function p2(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function vg(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function m2(e,t){try{let n=e.sessionStorage.getItem(t8);if(n){let r=JSON.parse(n);for(let[o,i]of Object.entries(r||{}))i&&Array.isArray(i)&&t.set(o,new Set(i||[]))}}catch{}}function g2(e,t){if(t.size>0){let n={};for(let[r,o]of t)n[r]=[...o];try{e.sessionStorage.setItem(t8,JSON.stringify(n))}catch(r){Xs(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function y2(){let e,t,n=new Promise((r,o)=>{e=async i=>{r(i);try{await n}catch{}},t=async i=>{o(i);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var C_=A.createContext(null);C_.displayName="DataRouter";var GS=A.createContext(null);GS.displayName="DataRouterState";var dF=A.createContext({isTransitioning:!1});dF.displayName="ViewTransition";var a8=A.createContext(new Map);a8.displayName="Fetchers";var v2=A.createContext(null);v2.displayName="Await";var Gf=A.createContext(null);Gf.displayName="Navigation";var tA=A.createContext(null);tA.displayName="Location";var Nh=A.createContext({outlet:null,matches:[],isDataRoute:!1});Nh.displayName="Route";var hF=A.createContext(null);hF.displayName="RouteError";function _2(e,{relative:t}={}){_o(WS(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Gf),{hash:o,pathname:i,search:l}=KS(e,{relative:t}),c=i;return n!=="/"&&(c=i==="/"?n:Tf([n,i])),r.createHref({pathname:c,search:l,hash:o})}function WS(){return A.useContext(tA)!=null}function _m(){return _o(WS(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(tA).location}var s8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function l8(e){A.useContext(Gf).static||A.useLayoutEffect(e)}function u8(){let{isDataRoute:e}=A.useContext(Nh);return e?L2():b2()}function b2(){_o(WS(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(C_),{basename:t,navigator:n}=A.useContext(Gf),{matches:r}=A.useContext(Nh),{pathname:o}=_m(),i=JSON.stringify(sF(r)),l=A.useRef(!1);return l8(()=>{l.current=!0}),A.useCallback((f,p={})=>{if(Xs(l.current,s8),!l.current)return;if(typeof f=="number"){n.go(f);return}let g=lF(f,JSON.parse(i),o,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Tf([t,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[t,n,i,o,e])}var w2=A.createContext(null);function x2(e){let t=A.useContext(Nh).outlet;return t&&A.createElement(w2.Provider,{value:e},t)}function fF(){let{matches:e}=A.useContext(Nh),t=e[e.length-1];return t?t.params:{}}function KS(e,{relative:t}={}){let{matches:n}=A.useContext(Nh),{pathname:r}=_m(),o=JSON.stringify(sF(n));return A.useMemo(()=>lF(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function C2(e,t,n,r){_o(WS(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Gf),{matches:i}=A.useContext(Nh),l=i[i.length-1],c=l?l.params:{},f=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let O=g&&g.path||"";d8(f,!g||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=_m(),w;w=v;let C=w.pathname||"/",T=C;if(p!=="/"){let O=p.replace(/^\//,"").split("/");T="/"+C.replace(/^\//,"").split("/").slice(O.length).join("/")}let k=Pg(e,{pathname:T});return Xs(g||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Xs(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),k2(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},c,O.params),pathname:Tf([p,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:Tf([p,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),i,n,r)}function S2(){let e=D2(),t=eA(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:o},n):null,l)}var E2=A.createElement(S2,null),T2=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(Nh.Provider,{value:this.props.routeContext},A.createElement(hF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function I2({routeContext:e,match:t,children:n}){let r=A.useContext(C_);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Nh.Provider,{value:e},n)}function k2(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,i=n==null?void 0:n.errors;if(i!=null){let f=o.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);_o(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,c=-1;if(n)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=f),p.route.id){let{loaderData:g,errors:v}=n,w=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let v,w=!1,C=null,T=null;n&&(v=i&&p.route.id?i[p.route.id]:void 0,C=p.route.errorElement||E2,l&&(c<0&&g===0?(d8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,T=null):c===g&&(w=!0,T=p.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,g+1)),P=()=>{let O;return v?O=C:w?O=T:p.route.Component?O=A.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=f,A.createElement(I2,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:O})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?A.createElement(T2,{location:n.location,revalidation:n.revalidation,component:C,error:v,children:P(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):P()},null)}function pF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function P2(e){let t=A.useContext(C_);return _o(t,pF(e)),t}function nA(e){let t=A.useContext(GS);return _o(t,pF(e)),t}function A2(e){let t=A.useContext(Nh);return _o(t,pF(e)),t}function rA(e){let t=A2(e),n=t.matches[t.matches.length-1];return _o(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function M2(){return rA("useRouteId")}function R2(){return nA("useNavigation").navigation}function O2(){let e=nA("useLoaderData"),t=rA("useLoaderData");return e.loaderData[t]}function c8(e){return nA("useRouteLoaderData").loaderData[e]}function D2(){var r;let e=A.useContext(hF),t=nA("useRouteError"),n=rA("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function L2(){let{router:e}=P2("useNavigate"),t=rA("useNavigate"),n=A.useRef(!1);return l8(()=>{n.current=!0}),A.useCallback(async(o,i={})=>{Xs(n.current,s8),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...i}))},[e,t])}var WU={};function d8(e,t,n){!t&&!WU[e]&&(WU[e]=!0,Xs(!1,n))}var KU={};function YU(e,t){!e&&!KU[t]&&(KU[t]=!0,console.warn(t))}function N2(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Xs(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:A.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Xs(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:A.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Xs(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:A.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var F2=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function z2({router:e,flushSync:t}){let[n,r]=A.useState(e.state),[o,i]=A.useState(),[l,c]=A.useState({isTransitioning:!1}),[f,p]=A.useState(),[g,v]=A.useState(),[w,C]=A.useState(),T=A.useRef(new Map),k=A.useCallback((D,{deletedFetchers:N,flushSync:F,viewTransitionOpts:B})=>{N.forEach(G=>T.current.delete(G)),D.fetchers.forEach((G,q)=>{G.data!==void 0&&T.current.set(q,G.data)}),YU(F===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let V=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(YU(B==null||V,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!B||!V){t&&F?t(()=>r(D)):A.startTransition(()=>r(D));return}if(t&&F){t(()=>{g&&(f&&f.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let G=e.window.document.startViewTransition(()=>{t(()=>r(D))});G.finished.finally(()=>{t(()=>{p(void 0),v(void 0),i(void 0),c({isTransitioning:!1})})}),t(()=>v(G));return}g?(f&&f.resolve(),g.skipTransition(),C({state:D,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(i(D),c({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[e.window,t,g,f]);A.useLayoutEffect(()=>e.subscribe(k),[e,k]),A.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new F2)},[l]),A.useEffect(()=>{if(f&&o&&e.window){let D=o,N=f.promise,F=e.window.document.startViewTransition(async()=>{A.startTransition(()=>r(D)),await N});F.finished.finally(()=>{p(void 0),v(void 0),i(void 0),c({isTransitioning:!1})}),v(F)}},[o,f,e.window]),A.useEffect(()=>{f&&o&&n.location.key===o.location.key&&f.resolve()},[f,g,n.location,o]),A.useEffect(()=>{!l.isTransitioning&&w&&(i(w.state),c({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),C(void 0))},[l.isTransitioning,w]);let P=A.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:D=>e.navigate(D),push:(D,N,F)=>e.navigate(D,{state:N,preventScrollReset:F==null?void 0:F.preventScrollReset}),replace:(D,N,F)=>e.navigate(D,{replace:!0,state:N,preventScrollReset:F==null?void 0:F.preventScrollReset})}),[e]),O=e.basename||"/",L=A.useMemo(()=>({router:e,navigator:P,static:!1,basename:O}),[e,P,O]);return A.createElement(A.Fragment,null,A.createElement(C_.Provider,{value:L},A.createElement(GS.Provider,{value:n},A.createElement(a8.Provider,{value:T.current},A.createElement(dF.Provider,{value:l},A.createElement($2,{basename:O,location:n.location,navigationType:n.historyAction,navigator:P},A.createElement(B2,{routes:e.routes,future:e.future,state:n})))))),null)}var B2=A.memo(U2);function U2({routes:e,future:t,state:n}){return C2(e,void 0,n,t)}function j2(e){return x2(e.context)}function hI(e){_o(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $2({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:i=!1}){_o(!WS(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:o,static:i,future:{}}),[l,o,i]);typeof n=="string"&&(n=vm(n));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:w="default"}=n,C=A.useMemo(()=>{let T=Ph(f,l);return T==null?null:{location:{pathname:T,search:p,hash:g,state:v,key:w},navigationType:r}},[l,f,p,g,v,w,r]);return Xs(C!=null,`<Router basename="${l}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:A.createElement(Gf.Provider,{value:c},A.createElement(tA.Provider,{children:t,value:C}))}function vD(e,t=[]){let n=[];return A.Children.forEach(e,(r,o)=>{if(!A.isValidElement(r))return;let i=[...t,o];if(r.type===A.Fragment){n.push.apply(n,vD(r.props.children,i));return}_o(r.type===hI,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_o(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=vD(r.props.children,i)),n.push(l)}),n}var H2=vD,fI="get",pI="application/x-www-form-urlencoded";function oA(e){return e!=null&&typeof e.tagName=="string"}function V2(e){return oA(e)&&e.tagName.toLowerCase()==="button"}function q2(e){return oA(e)&&e.tagName.toLowerCase()==="form"}function G2(e){return oA(e)&&e.tagName.toLowerCase()==="input"}function W2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function K2(e,t){return e.button===0&&(!t||t==="_self")&&!W2(e)}var sT=null;function Y2(){if(sT===null)try{new FormData(document.createElement("form"),0),sT=!1}catch{sT=!0}return sT}var Z2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function BM(e){return e!=null&&!Z2.has(e)?(Xs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pI}"`),null):e}function X2(e,t){let n,r,o,i,l;if(q2(e)){let c=e.getAttribute("action");r=c?Ph(c,t):null,n=e.getAttribute("method")||fI,o=BM(e.getAttribute("enctype"))||pI,i=new FormData(e)}else if(V2(e)||G2(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||c.getAttribute("action");if(r=f?Ph(f,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||fI,o=BM(e.getAttribute("formenctype"))||BM(c.getAttribute("enctype"))||pI,i=new FormData(c,e),!Y2()){let{name:p,type:g,value:v}=e;if(g==="image"){let w=p?`${p}.`:"";i.append(`${w}x`,"0"),i.append(`${w}y`,"0")}else p&&i.append(p,v)}}else{if(oA(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=fI,r=null,o=pI,l=e}return i&&o==="text/plain"&&(l=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:l}}function mF(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Q2(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J2(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function e3(e,t,n){let r=await Promise.all(e.map(async o=>{let i=t.routes[o.route.id];if(i){let l=await Q2(i,n);return l.links?l.links():[]}return[]}));return o3(r.flat(1).filter(J2).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ZU(e,t,n,r,o,i){let l=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,c=(f,p)=>{var g;return n[p].pathname!==f.pathname||((g=n[p].route.path)==null?void 0:g.endsWith("*"))&&n[p].params["*"]!==f.params["*"]};return i==="assets"?t.filter((f,p)=>l(f,p)||c(f,p)):i==="data"?t.filter((f,p)=>{var v;let g=r.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,p)||c(f,p))return!0;if(f.route.shouldRevalidate){let w=f.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function t3(e,t){return n3(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function n3(e){return[...new Set(e)]}function r3(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function o3(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let i=JSON.stringify(r3(o));return n.has(i)||(n.add(i),r.push({key:i,link:o})),r},[])}function i3(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function a3(){let e=A.useContext(C_);return mF(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function s3(){let e=A.useContext(GS);return mF(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var gF=A.createContext(void 0);gF.displayName="FrameworkContext";function h8(){let e=A.useContext(gF);return mF(e,"You must render this element inside a <HydratedRouter> element"),e}function l3(e,t){let n=A.useContext(gF),[r,o]=A.useState(!1),[i,l]=A.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:v}=t,w=A.useRef(null);A.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let k=O=>{O.forEach(L=>{l(L.isIntersecting)})},P=new IntersectionObserver(k,{threshold:.5});return w.current&&P.observe(w.current),()=>{P.disconnect()}}},[e]),A.useEffect(()=>{if(r){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[r]);let C=()=>{o(!0)},T=()=>{o(!1),l(!1)};return n?e!=="intent"?[i,w,{}]:[i,w,{onFocus:rC(c,C),onBlur:rC(f,T),onMouseEnter:rC(p,C),onMouseLeave:rC(g,T),onTouchStart:rC(v,C)}]:[!1,w,{}]}function rC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function u3({page:e,...t}){let{router:n}=a3(),r=A.useMemo(()=>Pg(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?A.createElement(d3,{page:e,matches:r,...t}):null}function c3(e){let{manifest:t,routeModules:n}=h8(),[r,o]=A.useState([]);return A.useEffect(()=>{let i=!1;return e3(e,t,n).then(l=>{i||o(l)}),()=>{i=!0}},[e,t,n]),r}function d3({page:e,matches:t,...n}){let r=_m(),{manifest:o,routeModules:i}=h8(),{loaderData:l,matches:c}=s3(),f=A.useMemo(()=>ZU(e,t,c,o,r,"data"),[e,t,c,o,r]),p=A.useMemo(()=>ZU(e,t,c,o,r,"assets"),[e,t,c,o,r]),g=A.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let C=new Set,T=!1;if(t.forEach(P=>{var L;let O=o.routes[P.route.id];!O||!O.hasLoader||(!f.some(D=>D.route.id===P.route.id)&&P.route.id in l&&((L=i[P.route.id])!=null&&L.shouldRevalidate)||O.hasClientLoader?T=!0:C.add(P.route.id))}),C.size===0)return[];let k=i3(e);return T&&C.size>0&&k.searchParams.set("_routes",t.filter(P=>C.has(P.route.id)).map(P=>P.route.id).join(",")),[k.pathname+k.search]},[l,r,o,f,t,e,i]),v=A.useMemo(()=>t3(p,o),[p,o]),w=c3(p);return A.createElement(A.Fragment,null,g.map(C=>A.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),v.map(C=>A.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),w.map(({key:C,link:T})=>A.createElement("link",{key:C,...T})))}function h3(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var f8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{f8&&(window.__reactRouterVersion="7.1.1")}catch{}function f3(e,t){return J5({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:C5({window:t==null?void 0:t.window}),hydrationData:p3(),routes:e,mapRouteProperties:N2,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function p3(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:m3(e.errors)}),e}function m3(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,o]of t)if(o&&o.__type==="RouteErrorResponse")n[r]=new tk(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let i=window[o.__subType];if(typeof i=="function")try{let l=new i(o.message);l.stack="",n[r]=l}catch{}}if(n[r]==null){let i=new Error(o.message);i.stack="",n[r]=i}}else n[r]=o;return n}var p8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sv=A.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:i,replace:l,state:c,target:f,to:p,preventScrollReset:g,viewTransition:v,...w},C){let{basename:T}=A.useContext(Gf),k=typeof p=="string"&&p8.test(p),P,O=!1;if(typeof p=="string"&&k&&(P=p,f8))try{let q=new URL(window.location.href),z=p.startsWith("//")?new URL(q.protocol+p):new URL(p),$=Ph(z.pathname,T);z.origin===q.origin&&$!=null?p=$+z.search+z.hash:O=!0}catch{Xs(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=_2(p,{relative:o}),[D,N,F]=l3(r,w),B=_3(p,{replace:l,state:c,target:f,preventScrollReset:g,relative:o,viewTransition:v});function V(q){t&&t(q),q.defaultPrevented||B(q)}let G=A.createElement("a",{...w,...F,href:P||L,onClick:O||i?t:V,ref:h3(C,N),target:f,"data-discover":!k&&n==="render"?"true":void 0});return D&&!k?A.createElement(A.Fragment,null,G,A.createElement(u3,{page:L})):G});Sv.displayName="Link";var g3=A.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:i,to:l,viewTransition:c,children:f,...p},g){let v=KS(l,{relative:p.relative}),w=_m(),C=A.useContext(GS),{navigator:T,basename:k}=A.useContext(Gf),P=C!=null&&S3(v)&&c===!0,O=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,L=w.pathname,D=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(L=L.toLowerCase(),D=D?D.toLowerCase():null,O=O.toLowerCase()),D&&k&&(D=Ph(D,k)||D);const N=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let F=L===O||!o&&L.startsWith(O)&&L.charAt(N)==="/",B=D!=null&&(D===O||!o&&D.startsWith(O)&&D.charAt(O.length)==="/"),V={isActive:F,isPending:B,isTransitioning:P},G=F?t:void 0,q;typeof r=="function"?q=r(V):q=[r,F?"active":null,B?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let z=typeof i=="function"?i(V):i;return A.createElement(Sv,{...p,"aria-current":G,className:q,ref:g,style:z,to:l,viewTransition:c},typeof f=="function"?f(V):f)});g3.displayName="NavLink";var y3=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:i,method:l=fI,action:c,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:v,...w},C)=>{let T=x3(),k=C3(c,{relative:p}),P=l.toLowerCase()==="get"?"get":"post",O=typeof c=="string"&&p8.test(c),L=D=>{if(f&&f(D),D.defaultPrevented)return;D.preventDefault();let N=D.nativeEvent.submitter,F=(N==null?void 0:N.getAttribute("formmethod"))||l;T(N||D.currentTarget,{fetcherKey:t,method:F,navigate:n,replace:o,state:i,relative:p,preventScrollReset:g,viewTransition:v})};return A.createElement("form",{ref:C,method:P,action:k,onSubmit:r?f:L,...w,"data-discover":!O&&e==="render"?"true":void 0})});y3.displayName="Form";function v3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m8(e){let t=A.useContext(C_);return _o(t,v3(e)),t}function _3(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:i,viewTransition:l}={}){let c=u8(),f=_m(),p=KS(e,{relative:i});return A.useCallback(g=>{if(K2(g,t)){g.preventDefault();let v=n!==void 0?n:ey(f)===ey(p);c(e,{replace:v,state:r,preventScrollReset:o,relative:i,viewTransition:l})}},[f,c,p,n,r,t,e,o,i,l])}var b3=0,w3=()=>`__${String(++b3)}__`;function x3(){let{router:e}=m8("useSubmit"),{basename:t}=A.useContext(Gf),n=M2();return A.useCallback(async(r,o={})=>{let{action:i,method:l,encType:c,formData:f,body:p}=X2(r,t);if(o.navigate===!1){let g=o.fetcherKey||w3();await e.fetch(g,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function C3(e,{relative:t}={}){let{basename:n}=A.useContext(Gf),r=A.useContext(Nh);_o(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),i={...KS(e||".",{relative:t})},l=_m();if(e==null){i.search=l.search;let c=new URLSearchParams(i.search),f=c.getAll("index");if(f.some(g=>g==="")){c.delete("index"),f.filter(v=>v).forEach(v=>c.append("index",v));let g=c.toString();i.search=g?`?${g}`:""}}return(!e||e===".")&&o.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Tf([n,i.pathname])),ey(i)}function S3(e,t={}){let n=A.useContext(dF);_o(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=m8("useViewTransitionState"),o=KS(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Ph(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Ph(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ek(o.pathname,l)!=null||ek(o.pathname,i)!=null}new TextEncoder;var iA=hq();const lT=zS(iA);/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E3(e){return A.createElement(z2,{flushSync:iA.flushSync,...e})}const g8=A.createContext(void 0);function Jr(){const e=A.useContext(g8);if(e===void 0)throw new Error(["MUI X: Could not find the Data Grid context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join(`
`));return e}const y8=A.createContext(void 0),er=()=>{const e=A.useContext(y8);if(!e)throw new Error("MUI X: useGridRootProps should only be used inside the DataGrid, DataGridPro or DataGridPremium component.");return e},T3=parseInt(A.version,10),No=e=>{if(T3>=19){const t=n=>e(n,n.ref??null);return t.displayName=e.displayName??e.name,t}return A.forwardRef(e)},I3=Object.is;function v8(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,r=0;for(const o in e)if(n+=1,!I3(e[o],t[o])||!(o in t))return!1;for(const o in t)r+=1;return n===r}function uy(e){return A.memo(e,v8)}const k3={noRowsLabel:"No rows",noResultsOverlayLabel:"No results found.",toolbarDensity:"Density",toolbarDensityLabel:"Density",toolbarDensityCompact:"Compact",toolbarDensityStandard:"Standard",toolbarDensityComfortable:"Comfortable",toolbarColumns:"Columns",toolbarColumnsLabel:"Select columns",toolbarFilters:"Filters",toolbarFiltersLabel:"Show filters",toolbarFiltersTooltipHide:"Hide filters",toolbarFiltersTooltipShow:"Show filters",toolbarFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,toolbarQuickFilterPlaceholder:"Search…",toolbarQuickFilterLabel:"Search",toolbarQuickFilterDeleteIconLabel:"Clear",toolbarExport:"Export",toolbarExportLabel:"Export",toolbarExportCSV:"Download as CSV",toolbarExportPrint:"Print",toolbarExportExcel:"Download as Excel",columnsManagementSearchTitle:"Search",columnsManagementNoColumns:"No columns",columnsManagementShowHideAllText:"Show/Hide All",columnsManagementReset:"Reset",columnsManagementDeleteIconLabel:"Clear",filterPanelAddFilter:"Add filter",filterPanelRemoveAll:"Remove all",filterPanelDeleteIconLabel:"Delete",filterPanelLogicOperator:"Logic operator",filterPanelOperator:"Operator",filterPanelOperatorAnd:"And",filterPanelOperatorOr:"Or",filterPanelColumns:"Columns",filterPanelInputLabel:"Value",filterPanelInputPlaceholder:"Filter value",filterOperatorContains:"contains",filterOperatorDoesNotContain:"does not contain",filterOperatorEquals:"equals",filterOperatorDoesNotEqual:"does not equal",filterOperatorStartsWith:"starts with",filterOperatorEndsWith:"ends with",filterOperatorIs:"is",filterOperatorNot:"is not",filterOperatorAfter:"is after",filterOperatorOnOrAfter:"is on or after",filterOperatorBefore:"is before",filterOperatorOnOrBefore:"is on or before",filterOperatorIsEmpty:"is empty",filterOperatorIsNotEmpty:"is not empty",filterOperatorIsAnyOf:"is any of","filterOperator=":"=","filterOperator!=":"!=","filterOperator>":">","filterOperator>=":">=","filterOperator<":"<","filterOperator<=":"<=",headerFilterOperatorContains:"Contains",headerFilterOperatorDoesNotContain:"Does not contain",headerFilterOperatorEquals:"Equals",headerFilterOperatorDoesNotEqual:"Does not equal",headerFilterOperatorStartsWith:"Starts with",headerFilterOperatorEndsWith:"Ends with",headerFilterOperatorIs:"Is",headerFilterOperatorNot:"Is not",headerFilterOperatorAfter:"Is after",headerFilterOperatorOnOrAfter:"Is on or after",headerFilterOperatorBefore:"Is before",headerFilterOperatorOnOrBefore:"Is on or before",headerFilterOperatorIsEmpty:"Is empty",headerFilterOperatorIsNotEmpty:"Is not empty",headerFilterOperatorIsAnyOf:"Is any of","headerFilterOperator=":"Equals","headerFilterOperator!=":"Not equals","headerFilterOperator>":"Greater than","headerFilterOperator>=":"Greater than or equal to","headerFilterOperator<":"Less than","headerFilterOperator<=":"Less than or equal to",filterValueAny:"any",filterValueTrue:"true",filterValueFalse:"false",columnMenuLabel:"Menu",columnMenuShowColumns:"Show columns",columnMenuManageColumns:"Manage columns",columnMenuFilter:"Filter",columnMenuHideColumn:"Hide column",columnMenuUnsort:"Unsort",columnMenuSortAsc:"Sort by ASC",columnMenuSortDesc:"Sort by DESC",columnHeaderFiltersTooltipActive:e=>e!==1?`${e} active filters`:`${e} active filter`,columnHeaderFiltersLabel:"Show filters",columnHeaderSortIconLabel:"Sort",footerRowSelected:e=>e!==1?`${e.toLocaleString()} rows selected`:`${e.toLocaleString()} row selected`,footerTotalRows:"Total Rows:",footerTotalVisibleRows:(e,t)=>`${e.toLocaleString()} of ${t.toLocaleString()}`,checkboxSelectionHeaderName:"Checkbox selection",checkboxSelectionSelectAllRows:"Select all rows",checkboxSelectionUnselectAllRows:"Unselect all rows",checkboxSelectionSelectRow:"Select row",checkboxSelectionUnselectRow:"Unselect row",booleanCellTrueLabel:"yes",booleanCellFalseLabel:"no",actionsCellMore:"more",pinToLeft:"Pin to left",pinToRight:"Pin to right",unpin:"Unpin",treeDataGroupingHeaderName:"Group",treeDataExpand:"see children",treeDataCollapse:"hide children",groupingColumnHeaderName:"Group",groupColumn:e=>`Group by ${e}`,unGroupColumn:e=>`Stop grouping by ${e}`,detailPanelToggle:"Detail panel toggle",expandDetailPanel:"Expand",collapseDetailPanel:"Collapse",MuiTablePagination:{},rowReorderingHeaderName:"Row reordering",aggregationMenuItemHeader:"Aggregation",aggregationFunctionLabelSum:"sum",aggregationFunctionLabelAvg:"avg",aggregationFunctionLabelMin:"min",aggregationFunctionLabelMax:"max",aggregationFunctionLabelSize:"size"};function ho(e){return Rr("MuiDataGrid",e)}const Ke=Ar("MuiDataGrid",["actionsCell","aggregationColumnHeader","aggregationColumnHeader--alignLeft","aggregationColumnHeader--alignCenter","aggregationColumnHeader--alignRight","aggregationColumnHeaderLabel","autoHeight","autosizing","booleanCell","cell--editable","cell--editing","cell--flex","cell--textCenter","cell--textLeft","cell--textRight","cell--rangeTop","cell--rangeBottom","cell--rangeLeft","cell--rangeRight","cell--pinnedLeft","cell--pinnedRight","cell--selectionMode","cell","cellCheckbox","cellEmpty","cellSkeleton","cellOffsetLeft","checkboxInput","columnHeader","columnHeader--alignCenter","columnHeader--alignLeft","columnHeader--alignRight","columnHeader--dragging","columnHeader--moving","columnHeader--numeric","columnHeader--sortable","columnHeader--sorted","columnHeader--filtered","columnHeader--pinnedLeft","columnHeader--pinnedRight","columnHeader--last","columnHeader--lastUnpinned","columnHeader--siblingFocused","columnHeaderCheckbox","columnHeaderDraggableContainer","columnHeaderTitle","columnHeaderTitleContainer","columnHeaderTitleContainerContent","columnHeader--filledGroup","columnHeader--emptyGroup","columnHeaders","columnSeparator--resizable","columnSeparator--resizing","columnSeparator--sideLeft","columnSeparator--sideRight","columnSeparator","columnsManagement","columnsManagementRow","columnsManagementHeader","columnsManagementSearchInput","columnsManagementFooter","container--top","container--bottom","detailPanel","detailPanels","detailPanelToggleCell","detailPanelToggleCell--expanded","footerCell","panel","panelHeader","panelWrapper","panelContent","panelFooter","paper","editBooleanCell","editInputCell","filler","filler--borderBottom","filler--pinnedLeft","filler--pinnedRight","filterForm","filterFormDeleteIcon","filterFormLogicOperatorInput","filterFormColumnInput","filterFormOperatorInput","filterFormValueInput","filterIcon","footerContainer","headerFilterRow","iconButtonContainer","iconSeparator","main","main--hasPinnedRight","main--hasSkeletonLoadingOverlay","menu","menuIcon","menuIconButton","menuOpen","menuList","overlay","overlayWrapper","overlayWrapperInner","root","root--densityStandard","root--densityComfortable","root--densityCompact","root--disableUserSelection","root--noToolbar","row","row--editable","row--editing","row--firstVisible","row--lastVisible","row--dragging","row--dynamicHeight","row--detailPanelExpanded","row--borderBottom","rowReorderCellPlaceholder","rowCount","rowReorderCellContainer","rowReorderCell","rowReorderCell--draggable","rowSkeleton","scrollArea--left","scrollArea--right","scrollArea","scrollbar","scrollbar--vertical","scrollbar--horizontal","scrollbarFiller","scrollbarFiller--header","scrollbarFiller--borderTop","scrollbarFiller--borderBottom","scrollbarFiller--pinnedRight","selectedRowCount","sortIcon","toolbarContainer","toolbarFilterList","virtualScroller","virtualScroller--hasScrollX","virtualScrollerContent","virtualScrollerContent--overflowed","virtualScrollerRenderZone","pinnedColumns","withVerticalBorder","withBorderColor","cell--withRightBorder","cell--withLeftBorder","columnHeader--withRightBorder","columnHeader--withLeftBorder","treeDataGroupingCell","treeDataGroupingCellToggle","treeDataGroupingCellLoadingContainer","groupingCriteriaCell","groupingCriteriaCellToggle","groupingCriteriaCellLoadingContainer","pinnedRows","pinnedRows--top","pinnedRows--bottom","pinnedRowsRenderZone"]),XU=1e3;class P3{constructor(t=XU){this.timeouts=new Map,this.cleanupTimeout=XU,this.cleanupTimeout=t}register(t,n,r){this.timeouts||(this.timeouts=new Map);const o=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,o)}unregister(t){const n=this.timeouts.get(t.cleanupToken);n&&(this.timeouts.delete(t.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((t,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class A3{constructor(){this.registry=new FinalizationRegistry(t=>{typeof t=="function"&&t()})}register(t,n,r){this.registry.register(t,n,r)}unregister(t){this.registry.unregister(t)}reset(){}}var Ad=function(e){return e.DataGrid="DataGrid",e.DataGridPro="DataGridPro",e.DataGridPremium="DataGridPremium",e}(Ad||{});class M3{}function R3(e){let t=0;return function(r,o,i,l){e.registry===null&&(e.registry=typeof FinalizationRegistry<"u"?new A3:new P3);const[c]=A.useState(new M3),f=A.useRef(null),p=A.useRef(null);p.current=i;const g=A.useRef(null);if(!f.current&&p.current){const v=(w,C,T)=>{var k;C.defaultMuiPrevented||(k=p.current)==null||k.call(p,w,C,T)};f.current=r.current.subscribeEvent(o,v,l),t+=1,g.current={cleanupToken:t},e.registry.register(c,()=>{var w;(w=f.current)==null||w.call(f),f.current=null,g.current=null},g.current)}else!p.current&&f.current&&(f.current(),f.current=null,g.current&&(e.registry.unregister(g.current),g.current=null));A.useEffect(()=>{if(!f.current&&p.current){const v=(w,C,T)=>{var k;C.defaultMuiPrevented||(k=p.current)==null||k.call(p,w,C,T)};f.current=r.current.subscribeEvent(o,v,l)}return g.current&&e.registry&&(e.registry.unregister(g.current),g.current=null),()=>{var v;(v=f.current)==null||v.call(f),f.current=null}},[r,o,l])}}const O3={registry:null},Hn=R3(O3),D3={isFirst:!0};function Pi(e,t,n){Hn(e,t,n,D3)}function L3(e){return e.acceptsApiRef}function QU(e,t){return L3(t)?t(e):t(e.current.state)}const N3=Object.is,_8=v8,F3=()=>({state:null,equals:null,selector:null,args:null}),un=(e,t,n=N3)=>{const r=Lh(F3),o=r.current.selector!==null,[i,l]=A.useState(o?null:QU(e,t));return r.current.state=i,r.current.equals=n,r.current.selector=t,ZP(()=>e.current.store.subscribe(()=>{const c=QU(e,r.current.selector);r.current.equals(r.current.state,c)||(r.current.state=c,l(c))})),i},Ql=e=>e.dimensions;var nk=Symbol("NOT_FOUND");function z3(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function B3(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function U3(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var JU=e=>Array.isArray(e)?e:[e];function j3(e){const t=Array.isArray(e[0])?e[0]:e;return U3(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function $3(e,t){const n=[],{length:r}=e;for(let o=0;o<r;o++)n.push(e[o].apply(null,t));return n}function H3(e){let t;return{get(n){return t&&e(t.key,n)?t.value:nk},put(n,r){t={key:n,value:r}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function V3(e,t){let n=[];function r(c){const f=n.findIndex(p=>t(c,p.key));if(f>-1){const p=n[f];return f>0&&(n.splice(f,1),n.unshift(p)),p.value}return nk}function o(c,f){r(c)===nk&&(n.unshift({key:c,value:f}),n.length>e&&n.pop())}function i(){return n}function l(){n=[]}return{get:r,put:o,getEntries:i,clear:l}}var q3=(e,t)=>e===t;function G3(e){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:o}=n;for(let i=0;i<o;i++)if(!e(n[i],r[i]))return!1;return!0}}function b8(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:r=q3,maxSize:o=1,resultEqualityCheck:i}=n,l=G3(r);let c=0;const f=o<=1?H3(l):V3(o,l);function p(){let g=f.get(arguments);if(g===nk){if(g=e.apply(null,arguments),c++,i){const w=f.getEntries().find(C=>i(C.value,g));w&&(g=w.value,c!==0&&c--)}f.put(arguments,g)}return g}return p.clearCache=()=>{f.clear(),p.resetResultsCount()},p.resultsCount=()=>c,p.resetResultsCount=()=>{c=0},p}var W3=class{constructor(e){this.value=e}deref(){return this.value}},K3=typeof WeakRef<"u"?WeakRef:W3,Y3=0,ej=1;function uT(){return{s:Y3,v:void 0,o:null,p:null}}function rk(e,t={}){let n=uT();const{resultEqualityCheck:r}=t;let o,i=0;function l(){var v;let c=n;const{length:f}=arguments;for(let w=0,C=f;w<C;w++){const T=arguments[w];if(typeof T=="function"||typeof T=="object"&&T!==null){let k=c.o;k===null&&(c.o=k=new WeakMap);const P=k.get(T);P===void 0?(c=uT(),k.set(T,c)):c=P}else{let k=c.p;k===null&&(c.p=k=new Map);const P=k.get(T);P===void 0?(c=uT(),k.set(T,c)):c=P}}const p=c;let g;if(c.s===ej)g=c.v;else if(g=e.apply(null,arguments),i++,r){const w=((v=o==null?void 0:o.deref)==null?void 0:v.call(o))??o;w!=null&&r(w,g)&&(g=w,i!==0&&i--),o=typeof g=="object"&&g!==null||typeof g=="function"?new K3(g):g}return p.s=ej,p.v=g,g}return l.clearCache=()=>{n=uT(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function w8(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...o)=>{let i=0,l=0,c,f={},p=o.pop();typeof p=="object"&&(f=p,p=o.pop()),z3(p,`createSelector expects an output function after the inputs, but received: [${typeof p}]`);const g={...n,...f},{memoize:v,memoizeOptions:w=[],argsMemoize:C=rk,argsMemoizeOptions:T=[],devModeChecks:k={}}=g,P=JU(w),O=JU(T),L=j3(o),D=v(function(){return i++,p.apply(null,arguments)},...P),N=C(function(){l++;const B=$3(L,arguments);return c=D.apply(null,B),c},...O);return Object.assign(N,{resultFunc:p,memoizedResultFunc:D,dependencies:L,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:v,argsMemoize:C})};return Object.assign(r,{withTypes:()=>r}),r}var yF=w8(rk),Z3=Object.assign((e,t=yF)=>{B3(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(i=>e[i]);return t(r,(...i)=>i.reduce((l,c,f)=>(l[n[f]]=c,l),{}))},{withTypes:()=>Z3});const X3=w8({memoize:b8,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),tj=new WeakMap;function ow(e){return"current"in e&&"instanceId"in e.current}const iw={id:"default"},gr=(e,t,n,r,o,i,...l)=>{if(l.length>0)throw new Error("Unsupported number of selectors");let c;if(e&&t&&n&&r&&o&&i)c=(f,p)=>{const g=ow(f),v=p??(g?f.current.instanceId:iw),w=g?f.current.state:f,C=e(w,v),T=t(w,v),k=n(w,v),P=r(w,v),O=o(w,v);return i(C,T,k,P,O)};else if(e&&t&&n&&r&&o)c=(f,p)=>{const g=ow(f),v=p??(g?f.current.instanceId:iw),w=g?f.current.state:f,C=e(w,v),T=t(w,v),k=n(w,v),P=r(w,v);return o(C,T,k,P)};else if(e&&t&&n&&r)c=(f,p)=>{const g=ow(f),v=p??(g?f.current.instanceId:iw),w=g?f.current.state:f,C=e(w,v),T=t(w,v),k=n(w,v);return r(C,T,k)};else if(e&&t&&n)c=(f,p)=>{const g=ow(f),v=p??(g?f.current.instanceId:iw),w=g?f.current.state:f,C=e(w,v),T=t(w,v);return n(C,T)};else if(e&&t)c=(f,p)=>{const g=ow(f),v=p??(g?f.current.instanceId:iw),w=g?f.current.state:f,C=e(w,v);return t(C)};else throw new Error("Missing arguments");return c.acceptsApiRef=!0,c},vi=(...e)=>{const t=(n,r)=>{const o=ow(n),i=o?n.current.instanceId:r??iw,l=o?n.current.state:n,c=tj.get(i),f=c??new Map,p=f==null?void 0:f.get(e);if(f&&p)return p(l,i);const g=X3(...e);return c||tj.set(i,f),f.set(e,g),g(l,i)};return t.acceptsApiRef=!0,t},Q3=.7,J3=1.3,eee={compact:Q3,comfortable:J3,standard:1},xw=e=>e.density,YS=gr(xw,e=>eee[e]);let Oi=function(e){return e.LEFT="left",e.RIGHT="right",e}({});const _D={left:[],right:[]},tee=e=>e.isRtl,If=e=>e.columns,Yp=gr(If,e=>e.orderedFields),bm=gr(If,e=>e.lookup),Ch=vi(Yp,bm,(e,t)=>e.map(n=>t[n])),kd=gr(If,e=>e.columnVisibilityModel),ss=vi(Ch,kd,(e,t)=>e.filter(n=>t[n.field]!==!1)),zx=vi(ss,e=>e.map(t=>t.field)),nee=e=>e.pinnedColumns,ZS=vi(If,nee,zx,tee,(e,t,n,r)=>{const o=ree(t,n,r);return{left:o.left.map(l=>e.lookup[l]),right:o.right.map(l=>e.lookup[l])}});function ree(e,t,n){var c,f;if(!Array.isArray(e.left)&&!Array.isArray(e.right)||((c=e.left)==null?void 0:c.length)===0&&((f=e.right)==null?void 0:f.length)===0)return _D;const r=(p,g)=>Array.isArray(p)?p.filter(v=>g.includes(v)):[],o=r(e.left,t),i=t.filter(p=>!o.includes(p)),l=r(e.right,i);return n?{left:l,right:o}:{left:o,right:l}}const cy=vi(ss,e=>{const t=[];let n=0;for(let r=0;r<e.length;r+=1)t.push(n),n+=e[r].computedWidth;return t}),vF=gr(ss,cy,(e,t)=>{const n=e.length;return n===0?0:t[n-1]+e[n-1].computedWidth}),x8=vi(Ch,e=>e.filter(t=>t.filterable)),oee=vi(Ch,e=>e.reduce((t,n)=>(n.filterable&&(t[n.field]=n),t),{})),iee=vi(Ch,e=>e.some(t=>t.colSpan!==void 0));function sr(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function aee(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function see(e){return parseFloat(e)}function XS(){const e=YP(QP);return e[qS]||e}function lee({props:e,name:t}){return Nq({props:e,name:t,defaultTheme:QP,themeId:qS})}function cT(e){return parseInt(e,10)||0}const uee={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function cee(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const dee=A.forwardRef(function(t,n){const{onChange:r,maxRows:o,minRows:i=1,style:l,value:c,...f}=t,{current:p}=A.useRef(c!=null),g=A.useRef(null),v=yi(n,g),w=A.useRef(null),C=A.useRef(null),T=A.useCallback(()=>{const O=g.current,D=Nf(O).getComputedStyle(O);if(D.width==="0px")return{outerHeightStyle:0,overflowing:!1};const N=C.current;N.style.width=D.width,N.value=O.value||t.placeholder||"x",N.value.slice(-1)===`
`&&(N.value+=" ");const F=D.boxSizing,B=cT(D.paddingBottom)+cT(D.paddingTop),V=cT(D.borderBottomWidth)+cT(D.borderTopWidth),G=N.scrollHeight;N.value="x";const q=N.scrollHeight;let z=G;i&&(z=Math.max(Number(i)*q,z)),o&&(z=Math.min(Number(o)*q,z)),z=Math.max(z,q);const $=z+(F==="border-box"?B+V:0),K=Math.abs(z-G)<=1;return{outerHeightStyle:$,overflowing:K}},[o,i,t.placeholder]),k=A.useCallback(()=>{const O=T();if(cee(O))return;const L=O.outerHeightStyle,D=g.current;w.current!==L&&(w.current=L,D.style.height=`${L}px`),D.style.overflow=O.overflowing?"hidden":""},[T]);$i(()=>{const O=()=>{k()};let L;const D=zq(O),N=g.current,F=Nf(N);F.addEventListener("resize",D);let B;return typeof ResizeObserver<"u"&&(B=new ResizeObserver(O),B.observe(N)),()=>{D.clear(),cancelAnimationFrame(L),F.removeEventListener("resize",D),B&&B.disconnect()}},[T,k]),$i(()=>{k()});const P=O=>{p||k(),r&&r(O)};return ie.jsxs(A.Fragment,{children:[ie.jsx("textarea",{value:c,onChange:P,ref:v,rows:i,style:l,...f}),ie.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:C,tabIndex:-1,style:{...uee.shadow,...l,paddingTop:0,paddingBottom:0}})]})});function bD(e){return typeof e=="string"}function S_({props:e,states:t,muiFormControl:n}){return t.reduce((r,o)=>(r[o]=e[o],n&&typeof e[o]>"u"&&(r[o]=n[o]),r),{})}const aA=A.createContext(void 0);function wm(){return A.useContext(aA)}function hee(e){return ie.jsx(lJ,{...e,defaultTheme:QP,themeId:qS})}function fee(e){return function(n){return ie.jsx(hee,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function pee(){return Aq}const mr=DJ;function nj(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function ok(e,t=!1){return e&&(nj(e.value)&&e.value!==""||t&&nj(e.defaultValue)&&e.defaultValue!=="")}function mee(e){return e.startAdornment}function gee(e){return Rr("MuiInputBase",e)}const Ys=Ar("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var rj;const sA=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${tn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},lA=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},yee=e=>{const{classes:t,color:n,disabled:r,error:o,endAdornment:i,focused:l,formControl:c,fullWidth:f,hiddenLabel:p,multiline:g,readOnly:v,size:w,startAdornment:C,type:T}=e,k={root:["root",`color${tn(n)}`,r&&"disabled",o&&"error",f&&"fullWidth",l&&"focused",c&&"formControl",w&&w!=="medium"&&`size${tn(w)}`,g&&"multiline",C&&"adornedStart",i&&"adornedEnd",p&&"hiddenLabel",v&&"readOnly"],input:["input",r&&"disabled",T==="search"&&"inputTypeSearch",g&&"inputMultiline",w==="small"&&"inputSizeSmall",p&&"inputHiddenLabel",C&&"inputAdornedStart",i&&"inputAdornedEnd",v&&"readOnly"]};return An(k,gee,t)},uA=sn("div",{name:"MuiInputBase",slot:"Root",overridesResolver:sA})(mr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Ys.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),cA=sn("input",{name:"MuiInputBase",slot:"Input",overridesResolver:lA})(mr(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Ys.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${Ys.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),oj=fee({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Bx=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:i,autoFocus:l,className:c,color:f,components:p={},componentsProps:g={},defaultValue:v,disabled:w,disableInjectingGlobalStyles:C,endAdornment:T,error:k,fullWidth:P=!1,id:O,inputComponent:L="input",inputProps:D={},inputRef:N,margin:F,maxRows:B,minRows:V,multiline:G=!1,name:q,onBlur:z,onChange:$,onClick:K,onFocus:te,onKeyDown:re,onKeyUp:oe,placeholder:ue,readOnly:Q,renderSuffix:ce,rows:ae,size:fe,slotProps:le={},slots:pe={},startAdornment:Fe,type:Be="text",value:Ze,...it}=r,ot=D.value!=null?D.value:Ze,{current:ut}=A.useRef(ot!=null),st=A.useRef(),ct=A.useCallback(Yt=>{},[]),Ae=yi(st,N,D.ref,ct),[Z,ne]=A.useState(!1),ee=wm(),ye=S_({props:r,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ye.focused=ee?ee.focused:Z,A.useEffect(()=>{!ee&&w&&Z&&(ne(!1),z&&z())},[ee,w,Z,z]);const Ie=ee&&ee.onFilled,ge=ee&&ee.onEmpty,$e=A.useCallback(Yt=>{ok(Yt)?Ie&&Ie():ge&&ge()},[Ie,ge]);$i(()=>{ut&&$e({value:ot})},[ot,$e,ut]);const nt=Yt=>{te&&te(Yt),D.onFocus&&D.onFocus(Yt),ee&&ee.onFocus?ee.onFocus(Yt):ne(!0)},pt=Yt=>{z&&z(Yt),D.onBlur&&D.onBlur(Yt),ee&&ee.onBlur?ee.onBlur(Yt):ne(!1)},wt=(Yt,...xt)=>{if(!ut){const Et=Yt.target||st.current;if(Et==null)throw new Error(im(1));$e({value:Et.value})}D.onChange&&D.onChange(Yt,...xt),$&&$(Yt,...xt)};A.useEffect(()=>{$e(st.current)},[]);const mt=Yt=>{st.current&&Yt.currentTarget===Yt.target&&st.current.focus(),K&&K(Yt)};let zt=L,Pt=D;G&&zt==="input"&&(ae?Pt={type:void 0,minRows:ae,maxRows:ae,...Pt}:Pt={type:void 0,maxRows:B,minRows:V,...Pt},zt=dee);const Zt=Yt=>{$e(Yt.animationName==="mui-auto-fill-cancel"?st.current:{value:"x"})};A.useEffect(()=>{ee&&ee.setAdornedStart(!!Fe)},[ee,Fe]);const We={...r,color:ye.color||"primary",disabled:ye.disabled,endAdornment:T,error:ye.error,focused:ye.focused,formControl:ee,fullWidth:P,hiddenLabel:ye.hiddenLabel,multiline:G,size:ye.size,startAdornment:Fe,type:Be},Ge=yee(We),Rt=pe.root||p.Root||uA,Dt=le.root||g.root||{},qt=pe.input||p.Input||cA;return Pt={...Pt,...le.input??g.input},ie.jsxs(A.Fragment,{children:[!C&&typeof oj=="function"&&(rj||(rj=ie.jsx(oj,{}))),ie.jsxs(Rt,{...Dt,ref:n,onClick:mt,...it,...!bD(Rt)&&{ownerState:{...We,...Dt.ownerState}},className:fn(Ge.root,Dt.className,c,Q&&"MuiInputBase-readOnly"),children:[Fe,ie.jsx(aA.Provider,{value:null,children:ie.jsx(qt,{"aria-invalid":ye.error,"aria-describedby":o,autoComplete:i,autoFocus:l,defaultValue:v,disabled:ye.disabled,id:O,onAnimationStart:Zt,name:q,placeholder:ue,readOnly:Q,required:ye.required,rows:ae,value:ot,onKeyDown:re,onKeyUp:oe,type:Be,...Pt,...!bD(qt)&&{as:zt,ownerState:{...We,...Pt.ownerState}},ref:Ae,className:fn(Ge.input,Pt.className,Q&&"MuiInputBase-readOnly"),onBlur:pt,onChange:wt,onFocus:nt})}),T,ce?ce({...ye,startAdornment:Fe}):null]})]})}),vee=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","isValidating","debounceMs","isProcessingProps","onValueChange"],_ee=e=>{const{classes:t}=e;return An({root:["editInputCell"]},ho,t)},bee=sn(Bx,{name:"MuiDataGrid",slot:"EditInputCell",overridesResolver:(e,t)=>t.editInputCell})(({theme:e})=>we({},e.typography.body2,{padding:"1px 0","& input":{padding:"0 16px",height:"100%"}})),wee=No((e,t)=>{const n=er(),{id:r,value:o,field:i,colDef:l,hasFocus:c,debounceMs:f=200,isProcessingProps:p,onValueChange:g}=e,v=sr(e,vee),w=Jr(),C=A.useRef(null),[T,k]=A.useState(o),P=_ee(n),O=A.useCallback(async D=>{const N=D.target.value;g&&await g(D,N);const F=w.current.getColumn(i);let B=N;F.valueParser&&(B=F.valueParser(N,w.current.getRow(r),F,w)),k(B),w.current.setEditCellValue({id:r,field:i,value:B,debounceMs:f,unstable_skipValueParser:!0},D)},[w,f,i,r,g]),L=w.current.unstable_getEditCellMeta(r,i);return A.useEffect(()=>{(L==null?void 0:L.changeReason)!=="debouncedSetEditCellValue"&&k(o)},[L,o]),$i(()=>{c&&C.current.focus()},[c]),ie.jsx(bee,we({inputRef:C,className:P.root,ownerState:n,fullWidth:!0,type:l.type==="number"?l.type:"text",value:T??"",onChange:O,endAdornment:p?ie.jsx(n.slots.loadIcon,{fontSize:"small",color:"action"}):void 0},v,{ref:t}))}),xee=e=>ie.jsx(wee,we({},e)),C8=(e,t)=>t&&e.length>1?[e[0]]:e,ij=(e,t)=>n=>we({},n,{sorting:we({},n.sorting,{sortModel:C8(e,t)})}),Cee=e=>e==="desc",See=(e,t)=>{const n=t.current.getColumn(e.field);if(!n||e.sort===null)return null;let r;return n.getSortComparator?r=n.getSortComparator(e.sort):r=Cee(e.sort)?(...i)=>-1*n.sortComparator(...i):n.sortComparator,r?{getSortCellParams:i=>({id:i,field:n.field,rowNode:t.current.getRowNode(i),value:t.current.getCellValue(i,n.field),api:t.current}),comparator:r}:null},Eee=(e,t,n)=>e.reduce((r,o,i)=>{if(r!==0)return r;const l=t.params[i],c=n.params[i];return r=o.comparator(l.value,c.value,l,c),r},0),Tee=(e,t)=>{const n=e.map(r=>See(r,t)).filter(r=>!!r);return n.length===0?null:r=>r.map(o=>({node:o,params:n.map(i=>i.getSortCellParams(o.id))})).sort((o,i)=>Eee(n,o,i)).map(o=>o.node.id)},aj=(e,t)=>{const n=e.indexOf(t);return!t||n===-1||n+1===e.length?e[0]:e[n+1]},_F=(e,t)=>e==null&&t!=null?-1:t==null&&e!=null?1:e==null&&t==null?0:null,Iee=new Intl.Collator,kee=(e,t)=>{const n=_F(e,t);return n!==null?n:typeof e=="string"?Iee.compare(e.toString(),t.toString()):e-t},S8=(e,t)=>{const n=_F(e,t);return n!==null?n:Number(e)-Number(t)},E8=(e,t)=>{const n=_F(e,t);return n!==null?n:e>t?1:e<t?-1:0},Pee=["item","applyValue","type","apiRef","focusElementRef","tabIndex","disabled","isFilterActive","clearButton","InputProps","variant"];function Ed(e){var N;const{item:t,applyValue:n,type:r,apiRef:o,focusElementRef:i,tabIndex:l,disabled:c,clearButton:f,InputProps:p,variant:g="standard"}=e,v=sr(e,Pee),w=Id(),[C,T]=A.useState(UM(t.value)),[k,P]=A.useState(!1),O=Li(),L=er(),D=A.useCallback(F=>{const B=UM(F.target.value);T(B),P(!0),w.start(L.filterDebounceMs,()=>{const V=we({},t,{value:r==="number"&&!Number.isNaN(Number(B))?Number(B):B,fromInput:O});n(V),P(!1)})},[w,L.filterDebounceMs,t,r,O,n]);return A.useEffect(()=>{(t.fromInput!==O||t.value==null)&&T(UM(t.value))},[O,t]),ie.jsx(L.slots.baseTextField,we({id:O,label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),value:C??"",onChange:D,variant:g,type:r||"text",InputProps:we({},k||f?{endAdornment:k?ie.jsx(L.slots.loadIcon,{fontSize:"small",color:"action"}):f}:{},{disabled:c},p,{inputProps:we({tabIndex:l},p==null?void 0:p.inputProps)}),InputLabelProps:{shrink:!0},inputRef:i},v,(N=L.slotProps)==null?void 0:N.baseTextField))}function UM(e){if(!(e==null||e===""))return String(e)}function Aee(e){return typeof e=="number"&&!Number.isNaN(e)}function T8(e){return typeof e=="function"}function bF(e){return typeof e=="object"&&e!==null}function Mee(){try{const e="__some_random_key_you_are_not_going_to_use__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch{return!1}}function ik(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}const kf=(e,t,n)=>Math.max(t,Math.min(n,e));function sj(e,t){return Array.from({length:t-e}).map((n,r)=>e+r)}function jw(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const o=e.length;if(o!==t.length)return!1;for(let i=0;i<o;i+=1)if(!jw(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const o=Array.from(e.entries());for(let i=0;i<o.length;i+=1)if(!t.has(o[i][0]))return!1;for(let i=0;i<o.length;i+=1){const l=o[i];if(!jw(l[1],t.get(l[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const o=Array.from(e.entries());for(let i=0;i<o.length;i+=1)if(!t.has(o[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const o=e.length;if(o!==t.length)return!1;for(let i=0;i<o;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),r=n.length;if(r!==Object.keys(t).length)return!1;for(let o=0;o<r;o+=1)if(!Object.prototype.hasOwnProperty.call(t,n[o]))return!1;for(let o=0;o<r;o+=1){const i=n[o];if(!jw(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function Ree(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function Oee(e){const t=Ree(e);return(n,r)=>n+(r-n)*t()}function I8(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}function lj(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function k8(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:o="any",stringify:i,trim:l=!1}=e;return(c,{inputValue:f,getOptionLabel:p})=>{let g=l?f.trim():f;n&&(g=g.toLowerCase()),t&&(g=lj(g));const v=g?c.filter(w=>{let C=(i||p)(w);return n&&(C=C.toLowerCase()),t&&(C=lj(C)),o==="start"?C.startsWith(g):C.includes(g)}):c;return typeof r=="number"?v.slice(0,r):v}}const Dee=k8(),Lee=5,Nee=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},Fee=[];function zee(e){const{unstable_isActiveElementInListbox:t=Nee,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:o=!1,autoSelect:i=!1,blurOnSelect:l=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:f=!1,componentName:p="useAutocomplete",defaultValue:g=e.multiple?Fee:null,disableClearable:v=!1,disableCloseOnSelect:w=!1,disabled:C,disabledItemsFocusable:T=!1,disableListWrap:k=!1,filterOptions:P=Dee,filterSelectedOptions:O=!1,freeSolo:L=!1,getOptionDisabled:D,getOptionKey:N,getOptionLabel:F=ft=>ft.label??ft,groupBy:B,handleHomeEndKeys:V=!e.freeSolo,id:G,includeInputInList:q=!1,inputValue:z,isOptionEqualToValue:$=(ft,dt)=>ft===dt,multiple:K=!1,onChange:te,onClose:re,onHighlightChange:oe,onInputChange:ue,onOpen:Q,open:ce,openOnFocus:ae=!1,options:fe,readOnly:le=!1,selectOnFocus:pe=!e.freeSolo,value:Fe}=e,Be=Li(G);let Ze=F;Ze=ft=>{const dt=F(ft);return typeof dt!="string"?String(dt):dt};const it=A.useRef(!1),ot=A.useRef(!0),ut=A.useRef(null),st=A.useRef(null),[ct,Ae]=A.useState(null),[Z,ne]=A.useState(-1),ee=o?0:-1,ye=A.useRef(ee),[Ie,ge]=Hv({controlled:Fe,default:g,name:p}),[$e,nt]=Hv({controlled:z,default:"",name:p,state:"inputValue"}),[pt,wt]=A.useState(!1),mt=A.useCallback((ft,dt,Wt)=>{if(!(K?Ie.length<dt.length:dt!==null)&&!c)return;let Bn;if(K)Bn="";else if(dt==null)Bn="";else{const dr=Ze(dt);Bn=typeof dr=="string"?dr:""}$e!==Bn&&(nt(Bn),ue&&ue(ft,Bn,Wt))},[Ze,$e,K,ue,nt,c,Ie]),[zt,Pt]=Hv({controlled:ce,default:!1,name:p,state:"open"}),[Zt,We]=A.useState(!0),Ge=!K&&Ie!=null&&$e===Ze(Ie),Rt=zt&&!le,Dt=Rt?P(fe.filter(ft=>!(O&&(K?Ie:[Ie]).some(dt=>dt!==null&&$(ft,dt)))),{inputValue:Ge&&Zt?"":$e,getOptionLabel:Ze}):[],qt=iF({filteredOptions:Dt,value:Ie,inputValue:$e});A.useEffect(()=>{const ft=Ie!==qt.value;pt&&!ft||L&&!ft||mt(null,Ie,"reset")},[Ie,mt,pt,qt.value,L]);const Yt=zt&&Dt.length>0&&!le,xt=co(ft=>{ft===-1?ut.current.focus():ct.querySelector(`[data-tag-index="${ft}"]`).focus()});A.useEffect(()=>{K&&Z>Ie.length-1&&(ne(-1),xt(-1))},[Ie,K,Z,xt]);function Et(ft,dt){if(!st.current||ft<0||ft>=Dt.length)return-1;let Wt=ft;for(;;){const Mn=st.current.querySelector(`[data-option-index="${Wt}"]`),Bn=T?!1:!Mn||Mn.disabled||Mn.getAttribute("aria-disabled")==="true";if(Mn&&Mn.hasAttribute("tabindex")&&!Bn)return Wt;if(dt==="next"?Wt=(Wt+1)%Dt.length:Wt=(Wt-1+Dt.length)%Dt.length,Wt===ft)return-1}}const St=co(({event:ft,index:dt,reason:Wt="auto"})=>{if(ye.current=dt,dt===-1?ut.current.removeAttribute("aria-activedescendant"):ut.current.setAttribute("aria-activedescendant",`${Be}-option-${dt}`),oe&&oe(ft,dt===-1?null:Dt[dt],Wt),!st.current)return;const Mn=st.current.querySelector(`[role="option"].${n}-focused`);Mn&&(Mn.classList.remove(`${n}-focused`),Mn.classList.remove(`${n}-focusVisible`));let Bn=st.current;if(st.current.getAttribute("role")!=="listbox"&&(Bn=st.current.parentElement.querySelector('[role="listbox"]')),!Bn)return;if(dt===-1){Bn.scrollTop=0;return}const dr=st.current.querySelector(`[data-option-index="${dt}"]`);if(dr&&(dr.classList.add(`${n}-focused`),Wt==="keyboard"&&dr.classList.add(`${n}-focusVisible`),Bn.scrollHeight>Bn.clientHeight&&Wt!=="mouse"&&Wt!=="touch")){const qn=dr,to=Bn.clientHeight+Bn.scrollTop,la=qn.offsetTop+qn.offsetHeight;la>to?Bn.scrollTop=la-Bn.clientHeight:qn.offsetTop-qn.offsetHeight*(B?1.3:0)<Bn.scrollTop&&(Bn.scrollTop=qn.offsetTop-qn.offsetHeight*(B?1.3:0))}}),kt=co(({event:ft,diff:dt,direction:Wt="next",reason:Mn="auto"})=>{if(!Rt)return;const dr=Et((()=>{const qn=Dt.length-1;if(dt==="reset")return ee;if(dt==="start")return 0;if(dt==="end")return qn;const to=ye.current+dt;return to<0?to===-1&&q?-1:k&&ye.current!==-1||Math.abs(dt)>1?0:qn:to>qn?to===qn+1&&q?-1:k||Math.abs(dt)>1?qn:0:to})(),Wt);if(St({index:dr,reason:Mn,event:ft}),r&&dt!=="reset")if(dr===-1)ut.current.value=$e;else{const qn=Ze(Dt[dr]);ut.current.value=qn,qn.toLowerCase().indexOf($e.toLowerCase())===0&&$e.length>0&&ut.current.setSelectionRange($e.length,qn.length)}}),cn=()=>{const ft=(dt,Wt)=>{const Mn=dt?Ze(dt):"",Bn=Wt?Ze(Wt):"";return Mn===Bn};if(ye.current!==-1&&qt.filteredOptions&&qt.filteredOptions.length!==Dt.length&&qt.inputValue===$e&&(K?Ie.length===qt.value.length&&qt.value.every((dt,Wt)=>Ze(Ie[Wt])===Ze(dt)):ft(qt.value,Ie))){const dt=qt.filteredOptions[ye.current];if(dt)return Dt.findIndex(Wt=>Ze(Wt)===Ze(dt))}return-1},an=A.useCallback(()=>{if(!Rt)return;const ft=cn();if(ft!==-1){ye.current=ft;return}const dt=K?Ie[0]:Ie;if(Dt.length===0||dt==null){kt({diff:"reset"});return}if(st.current){if(dt!=null){const Wt=Dt[ye.current];if(K&&Wt&&Ie.findIndex(Bn=>$(Wt,Bn))!==-1)return;const Mn=Dt.findIndex(Bn=>$(Bn,dt));Mn===-1?kt({diff:"reset"}):St({index:Mn});return}if(ye.current>=Dt.length-1){St({index:Dt.length-1});return}St({index:ye.current})}},[Dt.length,K?!1:Ie,O,kt,St,Rt,$e,K]),Qn=co(ft=>{QI(st,ft),ft&&an()});A.useEffect(()=>{an()},[an]);const tr=ft=>{zt||(Pt(!0),We(!0),Q&&Q(ft))},lr=(ft,dt)=>{zt&&(Pt(!1),re&&re(ft,dt))},Le=(ft,dt,Wt,Mn)=>{if(K){if(Ie.length===dt.length&&Ie.every((Bn,dr)=>Bn===dt[dr]))return}else if(Ie===dt)return;te&&te(ft,dt,Wt,Mn),ge(dt)},de=A.useRef(!1),xe=(ft,dt,Wt="selectOption",Mn="options")=>{let Bn=Wt,dr=dt;if(K){dr=Array.isArray(Ie)?Ie.slice():[];const qn=dr.findIndex(to=>$(dt,to));qn===-1?dr.push(dt):Mn!=="freeSolo"&&(dr.splice(qn,1),Bn="removeOption")}mt(ft,dr,Bn),Le(ft,dr,Bn,{option:dt}),!w&&(!ft||!ft.ctrlKey&&!ft.metaKey)&&lr(ft,Bn),(l===!0||l==="touch"&&de.current||l==="mouse"&&!de.current)&&ut.current.blur()};function Ee(ft,dt){if(ft===-1)return-1;let Wt=ft;for(;;){if(dt==="next"&&Wt===Ie.length||dt==="previous"&&Wt===-1)return-1;const Mn=ct.querySelector(`[data-tag-index="${Wt}"]`);if(!Mn||!Mn.hasAttribute("tabindex")||Mn.disabled||Mn.getAttribute("aria-disabled")==="true")Wt+=dt==="next"?1:-1;else return Wt}}const Ye=(ft,dt)=>{if(!K)return;$e===""&&lr(ft,"toggleInput");let Wt=Z;Z===-1?$e===""&&dt==="previous"&&(Wt=Ie.length-1):(Wt+=dt==="next"?1:-1,Wt<0&&(Wt=0),Wt===Ie.length&&(Wt=-1)),Wt=Ee(Wt,dt),ne(Wt),xt(Wt)},lt=ft=>{it.current=!0,nt(""),ue&&ue(ft,"","clear"),Le(ft,K?[]:null,"clear")},Ce=ft=>dt=>{if(ft.onKeyDown&&ft.onKeyDown(dt),!dt.defaultMuiPrevented&&(Z!==-1&&!["ArrowLeft","ArrowRight"].includes(dt.key)&&(ne(-1),xt(-1)),dt.which!==229))switch(dt.key){case"Home":Rt&&V&&(dt.preventDefault(),kt({diff:"start",direction:"next",reason:"keyboard",event:dt}));break;case"End":Rt&&V&&(dt.preventDefault(),kt({diff:"end",direction:"previous",reason:"keyboard",event:dt}));break;case"PageUp":dt.preventDefault(),kt({diff:-5,direction:"previous",reason:"keyboard",event:dt}),tr(dt);break;case"PageDown":dt.preventDefault(),kt({diff:Lee,direction:"next",reason:"keyboard",event:dt}),tr(dt);break;case"ArrowDown":dt.preventDefault(),kt({diff:1,direction:"next",reason:"keyboard",event:dt}),tr(dt);break;case"ArrowUp":dt.preventDefault(),kt({diff:-1,direction:"previous",reason:"keyboard",event:dt}),tr(dt);break;case"ArrowLeft":Ye(dt,"previous");break;case"ArrowRight":Ye(dt,"next");break;case"Enter":if(ye.current!==-1&&Rt){const Wt=Dt[ye.current],Mn=D?D(Wt):!1;if(dt.preventDefault(),Mn)return;xe(dt,Wt,"selectOption"),r&&ut.current.setSelectionRange(ut.current.value.length,ut.current.value.length)}else L&&$e!==""&&Ge===!1&&(K&&dt.preventDefault(),xe(dt,$e,"createOption","freeSolo"));break;case"Escape":Rt?(dt.preventDefault(),dt.stopPropagation(),lr(dt,"escape")):f&&($e!==""||K&&Ie.length>0)&&(dt.preventDefault(),dt.stopPropagation(),lt(dt));break;case"Backspace":if(K&&!le&&$e===""&&Ie.length>0){const Wt=Z===-1?Ie.length-1:Z,Mn=Ie.slice();Mn.splice(Wt,1),Le(dt,Mn,"removeOption",{option:Ie[Wt]})}break;case"Delete":if(K&&!le&&$e===""&&Ie.length>0&&Z!==-1){const Wt=Z,Mn=Ie.slice();Mn.splice(Wt,1),Le(dt,Mn,"removeOption",{option:Ie[Wt]})}break}},ke=ft=>{wt(!0),ae&&!it.current&&tr(ft)},De=ft=>{if(t(st)){ut.current.focus();return}wt(!1),ot.current=!0,it.current=!1,i&&ye.current!==-1&&Rt?xe(ft,Dt[ye.current],"blur"):i&&L&&$e!==""?xe(ft,$e,"blur","freeSolo"):c&&mt(ft,Ie,"blur"),lr(ft,"blur")},He=ft=>{const dt=ft.target.value;$e!==dt&&(nt(dt),We(!1),ue&&ue(ft,dt,"input")),dt===""?!v&&!K&&Le(ft,null,"clear"):tr(ft)},vt=ft=>{const dt=Number(ft.currentTarget.getAttribute("data-option-index"));ye.current!==dt&&St({event:ft,index:dt,reason:"mouse"})},Ct=ft=>{St({event:ft,index:Number(ft.currentTarget.getAttribute("data-option-index")),reason:"touch"}),de.current=!0},Nt=ft=>{const dt=Number(ft.currentTarget.getAttribute("data-option-index"));xe(ft,Dt[dt],"selectOption"),de.current=!1},jt=ft=>dt=>{const Wt=Ie.slice();Wt.splice(ft,1),Le(dt,Wt,"removeOption",{option:Ie[ft]})},Ht=ft=>{zt?lr(ft,"toggleInput"):tr(ft)},Ft=ft=>{ft.currentTarget.contains(ft.target)&&ft.target.getAttribute("id")!==Be&&ft.preventDefault()},vn=ft=>{ft.currentTarget.contains(ft.target)&&(ut.current.focus(),pe&&ot.current&&ut.current.selectionEnd-ut.current.selectionStart===0&&ut.current.select(),ot.current=!1)},gn=ft=>{!C&&($e===""||!zt)&&Ht(ft)};let _n=L&&$e.length>0;_n=_n||(K?Ie.length>0:Ie!==null);let Dn=Dt;return B&&(Dn=Dt.reduce((ft,dt,Wt)=>{const Mn=B(dt);return ft.length>0&&ft[ft.length-1].group===Mn?ft[ft.length-1].options.push(dt):ft.push({key:Wt,index:Wt,group:Mn,options:[dt]}),ft},[])),C&&pt&&De(),{getRootProps:(ft={})=>({"aria-owns":Yt?`${Be}-listbox`:null,...ft,onKeyDown:Ce(ft),onMouseDown:Ft,onClick:vn}),getInputLabelProps:()=>({id:`${Be}-label`,htmlFor:Be}),getInputProps:()=>({id:Be,value:$e,onBlur:De,onFocus:ke,onChange:He,onMouseDown:gn,"aria-activedescendant":Rt?"":null,"aria-autocomplete":r?"both":"list","aria-controls":Yt?`${Be}-listbox`:void 0,"aria-expanded":Yt,autoComplete:"off",ref:ut,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:C}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:lt}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ht}),getTagProps:({index:ft})=>({key:ft,"data-tag-index":ft,tabIndex:-1,...!le&&{onDelete:jt(ft)}}),getListboxProps:()=>({role:"listbox",id:`${Be}-listbox`,"aria-labelledby":`${Be}-label`,ref:Qn,onMouseDown:ft=>{ft.preventDefault()}}),getOptionProps:({index:ft,option:dt})=>{const Wt=(K?Ie:[Ie]).some(Bn=>Bn!=null&&$(dt,Bn)),Mn=D?D(dt):!1;return{key:(N==null?void 0:N(dt))??Ze(dt),tabIndex:-1,role:"option",id:`${Be}-option-${ft}`,onMouseMove:vt,onClick:Nt,onTouchStart:Ct,"data-option-index":ft,"aria-disabled":Mn,"aria-selected":Wt}},id:Be,inputValue:$e,value:Ie,dirty:_n,expanded:Rt&&ct,popupOpen:Rt,focused:pt||Z!==-1,anchorEl:ct,setAnchorEl:Ae,focusedTag:Z,groupedOptions:Dn}}var rc="top",Ld="bottom",Nd="right",oc="left",wF="auto",QS=[rc,Ld,Nd,oc],px="start",rS="end",Bee="clippingParents",P8="viewport",oC="popper",Uee="reference",uj=QS.reduce(function(e,t){return e.concat([t+"-"+px,t+"-"+rS])},[]),A8=[].concat(QS,[wF]).reduce(function(e,t){return e.concat([t,t+"-"+px,t+"-"+rS])},[]),jee="beforeRead",$ee="read",Hee="afterRead",Vee="beforeMain",qee="main",Gee="afterMain",Wee="beforeWrite",Kee="write",Yee="afterWrite",Zee=[jee,$ee,Hee,Vee,qee,Gee,Wee,Kee,Yee];function Ff(e){return e?(e.nodeName||"").toLowerCase():null}function Wc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function a_(e){var t=Wc(e).Element;return e instanceof t||e instanceof Element}function Md(e){var t=Wc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function xF(e){if(typeof ShadowRoot>"u")return!1;var t=Wc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xee(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},o=t.attributes[n]||{},i=t.elements[n];!Md(i)||!Ff(i)||(Object.assign(i.style,r),Object.keys(o).forEach(function(l){var c=o[l];c===!1?i.removeAttribute(l):i.setAttribute(l,c===!0?"":c)}))})}function Qee(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var o=t.elements[r],i=t.attributes[r]||{},l=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),c=l.reduce(function(f,p){return f[p]="",f},{});!Md(o)||!Ff(o)||(Object.assign(o.style,c),Object.keys(i).forEach(function(f){o.removeAttribute(f)}))})}}const Jee={name:"applyStyles",enabled:!0,phase:"write",fn:Xee,effect:Qee,requires:["computeStyles"]};function Pf(e){return e.split("-")[0]}var Vv=Math.max,ak=Math.min,mx=Math.round;function wD(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function M8(){return!/^((?!chrome|android).)*safari/i.test(wD())}function gx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),o=1,i=1;t&&Md(e)&&(o=e.offsetWidth>0&&mx(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&mx(r.height)/e.offsetHeight||1);var l=a_(e)?Wc(e):window,c=l.visualViewport,f=!M8()&&n,p=(r.left+(f&&c?c.offsetLeft:0))/o,g=(r.top+(f&&c?c.offsetTop:0))/i,v=r.width/o,w=r.height/i;return{width:v,height:w,top:g,right:p+v,bottom:g+w,left:p,x:p,y:g}}function CF(e){var t=gx(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function R8(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&xF(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function sm(e){return Wc(e).getComputedStyle(e)}function ete(e){return["table","td","th"].indexOf(Ff(e))>=0}function dy(e){return((a_(e)?e.ownerDocument:e.document)||window.document).documentElement}function dA(e){return Ff(e)==="html"?e:e.assignedSlot||e.parentNode||(xF(e)?e.host:null)||dy(e)}function cj(e){return!Md(e)||sm(e).position==="fixed"?null:e.offsetParent}function tte(e){var t=/firefox/i.test(wD()),n=/Trident/i.test(wD());if(n&&Md(e)){var r=sm(e);if(r.position==="fixed")return null}var o=dA(e);for(xF(o)&&(o=o.host);Md(o)&&["html","body"].indexOf(Ff(o))<0;){var i=sm(o);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return o;o=o.parentNode}return null}function JS(e){for(var t=Wc(e),n=cj(e);n&&ete(n)&&sm(n).position==="static";)n=cj(n);return n&&(Ff(n)==="html"||Ff(n)==="body"&&sm(n).position==="static")?t:n||tte(e)||t}function SF(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function C1(e,t,n){return Vv(e,ak(t,n))}function nte(e,t,n){var r=C1(e,t,n);return r>n?n:r}function O8(){return{top:0,right:0,bottom:0,left:0}}function D8(e){return Object.assign({},O8(),e)}function L8(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var rte=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,D8(typeof t!="number"?t:L8(t,QS))};function ote(e){var t,n=e.state,r=e.name,o=e.options,i=n.elements.arrow,l=n.modifiersData.popperOffsets,c=Pf(n.placement),f=SF(c),p=[oc,Nd].indexOf(c)>=0,g=p?"height":"width";if(!(!i||!l)){var v=rte(o.padding,n),w=CF(i),C=f==="y"?rc:oc,T=f==="y"?Ld:Nd,k=n.rects.reference[g]+n.rects.reference[f]-l[f]-n.rects.popper[g],P=l[f]-n.rects.reference[f],O=JS(i),L=O?f==="y"?O.clientHeight||0:O.clientWidth||0:0,D=k/2-P/2,N=v[C],F=L-w[g]-v[T],B=L/2-w[g]/2+D,V=C1(N,B,F),G=f;n.modifiersData[r]=(t={},t[G]=V,t.centerOffset=V-B,t)}}function ite(e){var t=e.state,n=e.options,r=n.element,o=r===void 0?"[data-popper-arrow]":r;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||R8(t.elements.popper,o)&&(t.elements.arrow=o))}const ate={name:"arrow",enabled:!0,phase:"main",fn:ote,effect:ite,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yx(e){return e.split("-")[1]}var ste={top:"auto",right:"auto",bottom:"auto",left:"auto"};function lte(e,t){var n=e.x,r=e.y,o=t.devicePixelRatio||1;return{x:mx(n*o)/o||0,y:mx(r*o)/o||0}}function dj(e){var t,n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,l=e.offsets,c=e.position,f=e.gpuAcceleration,p=e.adaptive,g=e.roundOffsets,v=e.isFixed,w=l.x,C=w===void 0?0:w,T=l.y,k=T===void 0?0:T,P=typeof g=="function"?g({x:C,y:k}):{x:C,y:k};C=P.x,k=P.y;var O=l.hasOwnProperty("x"),L=l.hasOwnProperty("y"),D=oc,N=rc,F=window;if(p){var B=JS(n),V="clientHeight",G="clientWidth";if(B===Wc(n)&&(B=dy(n),sm(B).position!=="static"&&c==="absolute"&&(V="scrollHeight",G="scrollWidth")),B=B,o===rc||(o===oc||o===Nd)&&i===rS){N=Ld;var q=v&&B===F&&F.visualViewport?F.visualViewport.height:B[V];k-=q-r.height,k*=f?1:-1}if(o===oc||(o===rc||o===Ld)&&i===rS){D=Nd;var z=v&&B===F&&F.visualViewport?F.visualViewport.width:B[G];C-=z-r.width,C*=f?1:-1}}var $=Object.assign({position:c},p&&ste),K=g===!0?lte({x:C,y:k},Wc(n)):{x:C,y:k};if(C=K.x,k=K.y,f){var te;return Object.assign({},$,(te={},te[N]=L?"0":"",te[D]=O?"0":"",te.transform=(F.devicePixelRatio||1)<=1?"translate("+C+"px, "+k+"px)":"translate3d("+C+"px, "+k+"px, 0)",te))}return Object.assign({},$,(t={},t[N]=L?k+"px":"",t[D]=O?C+"px":"",t.transform="",t))}function ute(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=r===void 0?!0:r,i=n.adaptive,l=i===void 0?!0:i,c=n.roundOffsets,f=c===void 0?!0:c,p={placement:Pf(t.placement),variation:yx(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,dj(Object.assign({},p,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:f})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,dj(Object.assign({},p,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const cte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ute,data:{}};var dT={passive:!0};function dte(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=o===void 0?!0:o,l=r.resize,c=l===void 0?!0:l,f=Wc(t.elements.popper),p=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&p.forEach(function(g){g.addEventListener("scroll",n.update,dT)}),c&&f.addEventListener("resize",n.update,dT),function(){i&&p.forEach(function(g){g.removeEventListener("scroll",n.update,dT)}),c&&f.removeEventListener("resize",n.update,dT)}}const hte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dte,data:{}};var fte={left:"right",right:"left",bottom:"top",top:"bottom"};function mI(e){return e.replace(/left|right|bottom|top/g,function(t){return fte[t]})}var pte={start:"end",end:"start"};function hj(e){return e.replace(/start|end/g,function(t){return pte[t]})}function EF(e){var t=Wc(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function TF(e){return gx(dy(e)).left+EF(e).scrollLeft}function mte(e,t){var n=Wc(e),r=dy(e),o=n.visualViewport,i=r.clientWidth,l=r.clientHeight,c=0,f=0;if(o){i=o.width,l=o.height;var p=M8();(p||!p&&t==="fixed")&&(c=o.offsetLeft,f=o.offsetTop)}return{width:i,height:l,x:c+TF(e),y:f}}function gte(e){var t,n=dy(e),r=EF(e),o=(t=e.ownerDocument)==null?void 0:t.body,i=Vv(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=Vv(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),c=-r.scrollLeft+TF(e),f=-r.scrollTop;return sm(o||n).direction==="rtl"&&(c+=Vv(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:l,x:c,y:f}}function IF(e){var t=sm(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function N8(e){return["html","body","#document"].indexOf(Ff(e))>=0?e.ownerDocument.body:Md(e)&&IF(e)?e:N8(dA(e))}function S1(e,t){var n;t===void 0&&(t=[]);var r=N8(e),o=r===((n=e.ownerDocument)==null?void 0:n.body),i=Wc(r),l=o?[i].concat(i.visualViewport||[],IF(r)?r:[]):r,c=t.concat(l);return o?c:c.concat(S1(dA(l)))}function xD(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function yte(e,t){var n=gx(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function fj(e,t,n){return t===P8?xD(mte(e,n)):a_(t)?yte(t,n):xD(gte(dy(e)))}function vte(e){var t=S1(dA(e)),n=["absolute","fixed"].indexOf(sm(e).position)>=0,r=n&&Md(e)?JS(e):e;return a_(r)?t.filter(function(o){return a_(o)&&R8(o,r)&&Ff(o)!=="body"}):[]}function _te(e,t,n,r){var o=t==="clippingParents"?vte(e):[].concat(t),i=[].concat(o,[n]),l=i[0],c=i.reduce(function(f,p){var g=fj(e,p,r);return f.top=Vv(g.top,f.top),f.right=ak(g.right,f.right),f.bottom=ak(g.bottom,f.bottom),f.left=Vv(g.left,f.left),f},fj(e,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function F8(e){var t=e.reference,n=e.element,r=e.placement,o=r?Pf(r):null,i=r?yx(r):null,l=t.x+t.width/2-n.width/2,c=t.y+t.height/2-n.height/2,f;switch(o){case rc:f={x:l,y:t.y-n.height};break;case Ld:f={x:l,y:t.y+t.height};break;case Nd:f={x:t.x+t.width,y:c};break;case oc:f={x:t.x-n.width,y:c};break;default:f={x:t.x,y:t.y}}var p=o?SF(o):null;if(p!=null){var g=p==="y"?"height":"width";switch(i){case px:f[p]=f[p]-(t[g]/2-n[g]/2);break;case rS:f[p]=f[p]+(t[g]/2-n[g]/2);break}}return f}function oS(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=r===void 0?e.placement:r,i=n.strategy,l=i===void 0?e.strategy:i,c=n.boundary,f=c===void 0?Bee:c,p=n.rootBoundary,g=p===void 0?P8:p,v=n.elementContext,w=v===void 0?oC:v,C=n.altBoundary,T=C===void 0?!1:C,k=n.padding,P=k===void 0?0:k,O=D8(typeof P!="number"?P:L8(P,QS)),L=w===oC?Uee:oC,D=e.rects.popper,N=e.elements[T?L:w],F=_te(a_(N)?N:N.contextElement||dy(e.elements.popper),f,g,l),B=gx(e.elements.reference),V=F8({reference:B,element:D,strategy:"absolute",placement:o}),G=xD(Object.assign({},D,V)),q=w===oC?G:B,z={top:F.top-q.top+O.top,bottom:q.bottom-F.bottom+O.bottom,left:F.left-q.left+O.left,right:q.right-F.right+O.right},$=e.modifiersData.offset;if(w===oC&&$){var K=$[o];Object.keys(z).forEach(function(te){var re=[Nd,Ld].indexOf(te)>=0?1:-1,oe=[rc,Ld].indexOf(te)>=0?"y":"x";z[te]+=K[oe]*re})}return z}function bte(e,t){t===void 0&&(t={});var n=t,r=n.placement,o=n.boundary,i=n.rootBoundary,l=n.padding,c=n.flipVariations,f=n.allowedAutoPlacements,p=f===void 0?A8:f,g=yx(r),v=g?c?uj:uj.filter(function(T){return yx(T)===g}):QS,w=v.filter(function(T){return p.indexOf(T)>=0});w.length===0&&(w=v);var C=w.reduce(function(T,k){return T[k]=oS(e,{placement:k,boundary:o,rootBoundary:i,padding:l})[Pf(k)],T},{});return Object.keys(C).sort(function(T,k){return C[T]-C[k]})}function wte(e){if(Pf(e)===wF)return[];var t=mI(e);return[hj(e),t,hj(t)]}function xte(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,i=o===void 0?!0:o,l=n.altAxis,c=l===void 0?!0:l,f=n.fallbackPlacements,p=n.padding,g=n.boundary,v=n.rootBoundary,w=n.altBoundary,C=n.flipVariations,T=C===void 0?!0:C,k=n.allowedAutoPlacements,P=t.options.placement,O=Pf(P),L=O===P,D=f||(L||!T?[mI(P)]:wte(P)),N=[P].concat(D).reduce(function(Be,Ze){return Be.concat(Pf(Ze)===wF?bte(t,{placement:Ze,boundary:g,rootBoundary:v,padding:p,flipVariations:T,allowedAutoPlacements:k}):Ze)},[]),F=t.rects.reference,B=t.rects.popper,V=new Map,G=!0,q=N[0],z=0;z<N.length;z++){var $=N[z],K=Pf($),te=yx($)===px,re=[rc,Ld].indexOf(K)>=0,oe=re?"width":"height",ue=oS(t,{placement:$,boundary:g,rootBoundary:v,altBoundary:w,padding:p}),Q=re?te?Nd:oc:te?Ld:rc;F[oe]>B[oe]&&(Q=mI(Q));var ce=mI(Q),ae=[];if(i&&ae.push(ue[K]<=0),c&&ae.push(ue[Q]<=0,ue[ce]<=0),ae.every(function(Be){return Be})){q=$,G=!1;break}V.set($,ae)}if(G)for(var fe=T?3:1,le=function(Ze){var it=N.find(function(ot){var ut=V.get(ot);if(ut)return ut.slice(0,Ze).every(function(st){return st})});if(it)return q=it,"break"},pe=fe;pe>0;pe--){var Fe=le(pe);if(Fe==="break")break}t.placement!==q&&(t.modifiersData[r]._skip=!0,t.placement=q,t.reset=!0)}}const Cte={name:"flip",enabled:!0,phase:"main",fn:xte,requiresIfExists:["offset"],data:{_skip:!1}};function pj(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function mj(e){return[rc,Nd,Ld,oc].some(function(t){return e[t]>=0})}function Ste(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,l=oS(t,{elementContext:"reference"}),c=oS(t,{altBoundary:!0}),f=pj(l,r),p=pj(c,o,i),g=mj(f),v=mj(p);t.modifiersData[n]={referenceClippingOffsets:f,popperEscapeOffsets:p,isReferenceHidden:g,hasPopperEscaped:v},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":v})}const Ete={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ste};function Tte(e,t,n){var r=Pf(e),o=[oc,rc].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=i[0],c=i[1];return l=l||0,c=(c||0)*o,[oc,Nd].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function Ite(e){var t=e.state,n=e.options,r=e.name,o=n.offset,i=o===void 0?[0,0]:o,l=A8.reduce(function(g,v){return g[v]=Tte(v,t.rects,i),g},{}),c=l[t.placement],f=c.x,p=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=f,t.modifiersData.popperOffsets.y+=p),t.modifiersData[r]=l}const kte={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ite};function Pte(e){var t=e.state,n=e.name;t.modifiersData[n]=F8({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ate={name:"popperOffsets",enabled:!0,phase:"read",fn:Pte,data:{}};function Mte(e){return e==="x"?"y":"x"}function Rte(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=o===void 0?!0:o,l=n.altAxis,c=l===void 0?!1:l,f=n.boundary,p=n.rootBoundary,g=n.altBoundary,v=n.padding,w=n.tether,C=w===void 0?!0:w,T=n.tetherOffset,k=T===void 0?0:T,P=oS(t,{boundary:f,rootBoundary:p,padding:v,altBoundary:g}),O=Pf(t.placement),L=yx(t.placement),D=!L,N=SF(O),F=Mte(N),B=t.modifiersData.popperOffsets,V=t.rects.reference,G=t.rects.popper,q=typeof k=="function"?k(Object.assign({},t.rects,{placement:t.placement})):k,z=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,K={x:0,y:0};if(B){if(i){var te,re=N==="y"?rc:oc,oe=N==="y"?Ld:Nd,ue=N==="y"?"height":"width",Q=B[N],ce=Q+P[re],ae=Q-P[oe],fe=C?-G[ue]/2:0,le=L===px?V[ue]:G[ue],pe=L===px?-G[ue]:-V[ue],Fe=t.elements.arrow,Be=C&&Fe?CF(Fe):{width:0,height:0},Ze=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:O8(),it=Ze[re],ot=Ze[oe],ut=C1(0,V[ue],Be[ue]),st=D?V[ue]/2-fe-ut-it-z.mainAxis:le-ut-it-z.mainAxis,ct=D?-V[ue]/2+fe+ut+ot+z.mainAxis:pe+ut+ot+z.mainAxis,Ae=t.elements.arrow&&JS(t.elements.arrow),Z=Ae?N==="y"?Ae.clientTop||0:Ae.clientLeft||0:0,ne=(te=$==null?void 0:$[N])!=null?te:0,ee=Q+st-ne-Z,ye=Q+ct-ne,Ie=C1(C?ak(ce,ee):ce,Q,C?Vv(ae,ye):ae);B[N]=Ie,K[N]=Ie-Q}if(c){var ge,$e=N==="x"?rc:oc,nt=N==="x"?Ld:Nd,pt=B[F],wt=F==="y"?"height":"width",mt=pt+P[$e],zt=pt-P[nt],Pt=[rc,oc].indexOf(O)!==-1,Zt=(ge=$==null?void 0:$[F])!=null?ge:0,We=Pt?mt:pt-V[wt]-G[wt]-Zt+z.altAxis,Ge=Pt?pt+V[wt]+G[wt]-Zt-z.altAxis:zt,Rt=C&&Pt?nte(We,pt,Ge):C1(C?We:mt,pt,C?Ge:zt);B[F]=Rt,K[F]=Rt-pt}t.modifiersData[r]=K}}const Ote={name:"preventOverflow",enabled:!0,phase:"main",fn:Rte,requiresIfExists:["offset"]};function Dte(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Lte(e){return e===Wc(e)||!Md(e)?EF(e):Dte(e)}function Nte(e){var t=e.getBoundingClientRect(),n=mx(t.width)/e.offsetWidth||1,r=mx(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Fte(e,t,n){n===void 0&&(n=!1);var r=Md(t),o=Md(t)&&Nte(t),i=dy(t),l=gx(e,o,n),c={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(r||!r&&!n)&&((Ff(t)!=="body"||IF(i))&&(c=Lte(t)),Md(t)?(f=gx(t,!0),f.x+=t.clientLeft,f.y+=t.clientTop):i&&(f.x=TF(i))),{x:l.left+c.scrollLeft-f.x,y:l.top+c.scrollTop-f.y,width:l.width,height:l.height}}function zte(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function o(i){n.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(c){if(!n.has(c)){var f=t.get(c);f&&o(f)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||o(i)}),r}function Bte(e){var t=zte(e);return Zee.reduce(function(n,r){return n.concat(t.filter(function(o){return o.phase===r}))},[])}function Ute(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function jte(e){var t=e.reduce(function(n,r){var o=n[r.name];return n[r.name]=o?Object.assign({},o,r,{options:Object.assign({},o.options,r.options),data:Object.assign({},o.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var gj={placement:"bottom",modifiers:[],strategy:"absolute"};function yj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function $te(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,o=t.defaultOptions,i=o===void 0?gj:o;return function(c,f,p){p===void 0&&(p=i);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},gj,i),modifiersData:{},elements:{reference:c,popper:f},attributes:{},styles:{}},v=[],w=!1,C={state:g,setOptions:function(O){var L=typeof O=="function"?O(g.options):O;k(),g.options=Object.assign({},i,g.options,L),g.scrollParents={reference:a_(c)?S1(c):c.contextElement?S1(c.contextElement):[],popper:S1(f)};var D=Bte(jte([].concat(r,g.options.modifiers)));return g.orderedModifiers=D.filter(function(N){return N.enabled}),T(),C.update()},forceUpdate:function(){if(!w){var O=g.elements,L=O.reference,D=O.popper;if(yj(L,D)){g.rects={reference:Fte(L,JS(D),g.options.strategy==="fixed"),popper:CF(D)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(z){return g.modifiersData[z.name]=Object.assign({},z.data)});for(var N=0;N<g.orderedModifiers.length;N++){if(g.reset===!0){g.reset=!1,N=-1;continue}var F=g.orderedModifiers[N],B=F.fn,V=F.options,G=V===void 0?{}:V,q=F.name;typeof B=="function"&&(g=B({state:g,options:G,name:q,instance:C})||g)}}}},update:Ute(function(){return new Promise(function(P){C.forceUpdate(),P(g)})}),destroy:function(){k(),w=!0}};if(!yj(c,f))return C;C.setOptions(p).then(function(P){!w&&p.onFirstUpdate&&p.onFirstUpdate(P)});function T(){g.orderedModifiers.forEach(function(P){var O=P.name,L=P.options,D=L===void 0?{}:L,N=P.effect;if(typeof N=="function"){var F=N({state:g,name:O,instance:C,options:D}),B=function(){};v.push(F||B)}})}function k(){v.forEach(function(P){return P()}),v=[]}return C}}var Hte=[hte,Ate,cte,Jee,kte,Cte,Ote,ate,Ete],Vte=$te({defaultModifiers:Hte});function qte(e){return typeof e=="function"?e():e}const z8=A.forwardRef(function(t,n){const{children:r,container:o,disablePortal:i=!1}=t,[l,c]=A.useState(null),f=yi(A.isValidElement(r)?x_(r):null,n);if($i(()=>{i||c(qte(o)||document.body)},[o,i]),$i(()=>{if(l&&!i)return QI(n,l),()=>{QI(n,null)}},[n,l,i]),i){if(A.isValidElement(r)){const p={ref:f};return A.cloneElement(r,p)}return r}return l&&iA.createPortal(r,l)});function Gte(e){return Rr("MuiPopper",e)}Ar("MuiPopper",["root"]);function Wte(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function CD(e){return typeof e=="function"?e():e}function Kte(e){return e.nodeType!==void 0}const Yte=e=>{const{classes:t}=e;return An({root:["root"]},Gte,t)},Zte={},Xte=A.forwardRef(function(t,n){const{anchorEl:r,children:o,direction:i,disablePortal:l,modifiers:c,open:f,placement:p,popperOptions:g,popperRef:v,slotProps:w={},slots:C={},TransitionProps:T,ownerState:k,...P}=t,O=A.useRef(null),L=yi(O,n),D=A.useRef(null),N=yi(D,v),F=A.useRef(N);$i(()=>{F.current=N},[N]),A.useImperativeHandle(v,()=>D.current,[]);const B=Wte(p,i),[V,G]=A.useState(B),[q,z]=A.useState(CD(r));A.useEffect(()=>{D.current&&D.current.forceUpdate()}),A.useEffect(()=>{r&&z(CD(r))},[r]),$i(()=>{if(!q||!f)return;const oe=ce=>{G(ce.placement)};let ue=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:ce})=>{oe(ce)}}];c!=null&&(ue=ue.concat(c)),g&&g.modifiers!=null&&(ue=ue.concat(g.modifiers));const Q=Vte(q,O.current,{placement:B,...g,modifiers:ue});return F.current(Q),()=>{Q.destroy(),F.current(null)}},[q,l,c,f,g,B]);const $={placement:V};T!==null&&($.TransitionProps=T);const K=Yte(t),te=C.root??"div",re=eS({elementType:te,externalSlotProps:w.root,externalForwardedProps:P,additionalProps:{role:"tooltip",ref:L},ownerState:t,className:K.root});return ie.jsx(te,{...re,children:typeof o=="function"?o($):o})}),Qte=A.forwardRef(function(t,n){const{anchorEl:r,children:o,container:i,direction:l="ltr",disablePortal:c=!1,keepMounted:f=!1,modifiers:p,open:g,placement:v="bottom",popperOptions:w=Zte,popperRef:C,style:T,transition:k=!1,slotProps:P={},slots:O={},...L}=t,[D,N]=A.useState(!0),F=()=>{N(!1)},B=()=>{N(!0)};if(!f&&!g&&(!k||D))return null;let V;if(i)V=i;else if(r){const z=CD(r);V=z&&Kte(z)?ka(z).body:ka(null).body}const G=!g&&f&&(!k||D)?"none":void 0,q=k?{in:g,onEnter:F,onExited:B}:void 0;return ie.jsx(z8,{disablePortal:c,container:V,children:ie.jsx(Xte,{anchorEl:r,direction:l,disablePortal:c,modifiers:p,ref:n,open:k?!D:g,placement:v,popperOptions:w,popperRef:C,slotProps:P,slots:O,...L,style:{position:"fixed",top:0,left:0,display:G,...T},TransitionProps:q,children:o})})}),Jte=sn(Qte,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),E_=A.forwardRef(function(t,n){const r=Zc(),o=Kr({props:t,name:"MuiPopper"}),{anchorEl:i,component:l,components:c,componentsProps:f,container:p,disablePortal:g,keepMounted:v,modifiers:w,open:C,placement:T,popperOptions:k,popperRef:P,transition:O,slots:L,slotProps:D,...N}=o,F=(L==null?void 0:L.root)??(c==null?void 0:c.Root),B={anchorEl:i,container:p,disablePortal:g,keepMounted:v,modifiers:w,open:C,placement:T,popperOptions:k,popperRef:P,transition:O,...N};return ie.jsx(Jte,{as:l,direction:r?"rtl":"ltr",slots:{root:F},slotProps:D??f,...B,ref:n})});function ene(e){return Rr("MuiListSubheader",e)}Ar("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const tne=e=>{const{classes:t,color:n,disableGutters:r,inset:o,disableSticky:i}=e,l={root:["root",n!=="default"&&`color${tn(n)}`,!r&&"gutters",o&&"inset",!i&&"sticky"]};return An(l,ene,t)},nne=sn("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${tn(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(mr(({theme:e})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(e.vars||e).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:72}},{props:({ownerState:t})=>!t.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper}}]}))),SD=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiListSubheader"}),{className:o,color:i="default",component:l="li",disableGutters:c=!1,disableSticky:f=!1,inset:p=!1,...g}=r,v={...r,color:i,component:l,disableGutters:c,disableSticky:f,inset:p},w=tne(v);return ie.jsx(nne,{as:l,className:fn(w.root,o),ref:n,ownerState:v,...g})});SD&&(SD.muiSkipListHighlight=!0);function rne(e){return Rr("MuiPaper",e)}Ar("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const one=e=>{const{square:t,elevation:n,variant:r,classes:o}=e,i={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return An(i,rne,o)},ine=sn("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(mr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Ux=A.forwardRef(function(t,n){var C;const r=Kr({props:t,name:"MuiPaper"}),o=XS(),{className:i,component:l="div",elevation:c=1,square:f=!1,variant:p="elevation",...g}=r,v={...r,component:l,elevation:c,square:f,variant:p},w=one(v);return ie.jsx(ine,{as:l,ownerState:v,className:fn(w.root,i),ref:n,...g,style:{...p==="elevation"&&{"--Paper-shadow":(o.vars||o).shadows[c],...o.vars&&{"--Paper-overlay":(C=o.vars.overlays)==null?void 0:C[c]},...!o.vars&&o.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${jr("#fff",pD(c))}, ${jr("#fff",pD(c))})`}},...g.style}})});function ane(e){return typeof e.main=="string"}function sne(e,t=[]){if(!ane(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Ia(e=[]){return([,t])=>t&&sne(t,e)}class sk{constructor(){nv(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new sk}static use(){const t=Lh(sk.create).current,[n,r]=A.useState(!1);return t.shouldMount=n,t.setShouldMount=r,A.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=une(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function lne(){return sk.use()}function une(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n}function ED(e,t){return ED=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ED(e,t)}function B8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ED(e,t)}const vj={disabled:!1},lk=Es.createContext(null);var cne=function(t){return t.scrollTop},o1="unmounted",mv="exited",gv="entering",aw="entered",TD="exiting",Wf=function(e){B8(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var l=o,c=l&&!l.isMounting?r.enter:r.appear,f;return i.appearStatus=null,r.in?c?(f=mv,i.appearStatus=gv):f=aw:r.unmountOnExit||r.mountOnEnter?f=o1:f=mv,i.state={status:f},i.nextCallback=null,i}t.getDerivedStateFromProps=function(o,i){var l=o.in;return l&&i.status===o1?{status:mv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var i=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==gv&&l!==aw&&(i=gv):(l===gv||l===aw)&&(i=TD)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,i,l,c;return i=l=c=o,o!=null&&typeof o!="number"&&(i=o.exit,l=o.enter,c=o.appear!==void 0?o.appear:l),{exit:i,enter:l,appear:c}},n.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null)if(this.cancelNextCallback(),i===gv){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:lT.findDOMNode(this);l&&cne(l)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===mv&&this.setState({status:o1})},n.performEnter=function(o){var i=this,l=this.props.enter,c=this.context?this.context.isMounting:o,f=this.props.nodeRef?[c]:[lT.findDOMNode(this),c],p=f[0],g=f[1],v=this.getTimeouts(),w=c?v.appear:v.enter;if(!o&&!l||vj.disabled){this.safeSetState({status:aw},function(){i.props.onEntered(p)});return}this.props.onEnter(p,g),this.safeSetState({status:gv},function(){i.props.onEntering(p,g),i.onTransitionEnd(w,function(){i.safeSetState({status:aw},function(){i.props.onEntered(p,g)})})})},n.performExit=function(){var o=this,i=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:lT.findDOMNode(this);if(!i||vj.disabled){this.safeSetState({status:mv},function(){o.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:TD},function(){o.props.onExiting(c),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:mv},function(){o.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},n.setNextCallback=function(o){var i=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,i.nextCallback=null,o(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(o,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:lT.findDOMNode(this),c=o==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=f[0],g=f[1];this.props.addEndListener(p,g)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===o1)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=sr(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Es.createElement(lk.Provider,{value:null},typeof l=="function"?l(o,c):Es.cloneElement(Es.Children.only(l),c))},t}(Es.Component);Wf.contextType=lk;Wf.propTypes={};function Rb(){}Wf.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Rb,onEntering:Rb,onEntered:Rb,onExit:Rb,onExiting:Rb,onExited:Rb};Wf.UNMOUNTED=o1;Wf.EXITED=mv;Wf.ENTERING=gv;Wf.ENTERED=aw;Wf.EXITING=TD;function dne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kF(e,t){var n=function(i){return t&&A.isValidElement(i)?t(i):i},r=Object.create(null);return e&&A.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function hne(e,t){e=e||{},t=t||{};function n(g){return g in t?t[g]:e[g]}var r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var l,c={};for(var f in t){if(r[f])for(l=0;l<r[f].length;l++){var p=r[f][l];c[r[f][l]]=n(p)}c[f]=n(f)}for(l=0;l<o.length;l++)c[o[l]]=n(o[l]);return c}function Ov(e,t,n){return n[t]!=null?n[t]:e.props[t]}function fne(e,t){return kF(e.children,function(n){return A.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Ov(n,"appear",e),enter:Ov(n,"enter",e),exit:Ov(n,"exit",e)})})}function pne(e,t,n){var r=kF(e.children),o=hne(t,r);return Object.keys(o).forEach(function(i){var l=o[i];if(A.isValidElement(l)){var c=i in t,f=i in r,p=t[i],g=A.isValidElement(p)&&!p.props.in;f&&(!c||g)?o[i]=A.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Ov(l,"exit",e),enter:Ov(l,"enter",e)}):!f&&c&&!g?o[i]=A.cloneElement(l,{in:!1}):f&&c&&A.isValidElement(p)&&(o[i]=A.cloneElement(l,{onExited:n.bind(null,l),in:p.props.in,exit:Ov(l,"exit",e),enter:Ov(l,"enter",e)}))}}),o}var mne=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},gne={component:"div",childFactory:function(t){return t}},PF=function(e){B8(t,e);function t(r,o){var i;i=e.call(this,r,o)||this;var l=i.handleExited.bind(dne(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(o,i){var l=i.children,c=i.handleExited,f=i.firstRender;return{children:f?fne(o,c):pne(o,l,c),firstRender:!1}},n.handleExited=function(o,i){var l=kF(this.props.children);o.key in l||(o.props.onExited&&o.props.onExited(i),this.mounted&&this.setState(function(c){var f=we({},c.children);return delete f[o.key],{children:f}}))},n.render=function(){var o=this.props,i=o.component,l=o.childFactory,c=sr(o,["component","childFactory"]),f=this.state.contextValue,p=mne(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,i===null?Es.createElement(lk.Provider,{value:f},p):Es.createElement(lk.Provider,{value:f},Es.createElement(i,c,p))},t}(Es.Component);PF.propTypes={};PF.defaultProps=gne;function yne(e){const{className:t,classes:n,pulsate:r=!1,rippleX:o,rippleY:i,rippleSize:l,in:c,onExited:f,timeout:p}=e,[g,v]=A.useState(!1),w=fn(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),C={width:l,height:l,top:-(l/2)+i,left:-(l/2)+o},T=fn(n.child,g&&n.childLeaving,r&&n.childPulsate);return!c&&!g&&v(!0),A.useEffect(()=>{if(!c&&f!=null){const k=setTimeout(f,p);return()=>{clearTimeout(k)}}},[f,c,p]),ie.jsx("span",{className:w,style:C,children:ie.jsx("span",{className:T})})}const Cd=Ar("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ID=550,vne=80,_ne=qf`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,bne=qf`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,wne=qf`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,xne=sn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Cne=sn(yne,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Cd.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${_ne};
    animation-duration: ${ID}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Cd.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Cd.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Cd.childLeaving} {
    opacity: 0;
    animation-name: ${bne};
    animation-duration: ${ID}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Cd.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${wne};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Sne=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiTouchRipple"}),{center:o=!1,classes:i={},className:l,...c}=r,[f,p]=A.useState([]),g=A.useRef(0),v=A.useRef(null);A.useEffect(()=>{v.current&&(v.current(),v.current=null)},[f]);const w=A.useRef(!1),C=Id(),T=A.useRef(null),k=A.useRef(null),P=A.useCallback(N=>{const{pulsate:F,rippleX:B,rippleY:V,rippleSize:G,cb:q}=N;p(z=>[...z,ie.jsx(Cne,{classes:{ripple:fn(i.ripple,Cd.ripple),rippleVisible:fn(i.rippleVisible,Cd.rippleVisible),ripplePulsate:fn(i.ripplePulsate,Cd.ripplePulsate),child:fn(i.child,Cd.child),childLeaving:fn(i.childLeaving,Cd.childLeaving),childPulsate:fn(i.childPulsate,Cd.childPulsate)},timeout:ID,pulsate:F,rippleX:B,rippleY:V,rippleSize:G},g.current)]),g.current+=1,v.current=q},[i]),O=A.useCallback((N={},F={},B=()=>{})=>{const{pulsate:V=!1,center:G=o||F.pulsate,fakeElement:q=!1}=F;if((N==null?void 0:N.type)==="mousedown"&&w.current){w.current=!1;return}(N==null?void 0:N.type)==="touchstart"&&(w.current=!0);const z=q?null:k.current,$=z?z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let K,te,re;if(G||N===void 0||N.clientX===0&&N.clientY===0||!N.clientX&&!N.touches)K=Math.round($.width/2),te=Math.round($.height/2);else{const{clientX:oe,clientY:ue}=N.touches&&N.touches.length>0?N.touches[0]:N;K=Math.round(oe-$.left),te=Math.round(ue-$.top)}if(G)re=Math.sqrt((2*$.width**2+$.height**2)/3),re%2===0&&(re+=1);else{const oe=Math.max(Math.abs((z?z.clientWidth:0)-K),K)*2+2,ue=Math.max(Math.abs((z?z.clientHeight:0)-te),te)*2+2;re=Math.sqrt(oe**2+ue**2)}N!=null&&N.touches?T.current===null&&(T.current=()=>{P({pulsate:V,rippleX:K,rippleY:te,rippleSize:re,cb:B})},C.start(vne,()=>{T.current&&(T.current(),T.current=null)})):P({pulsate:V,rippleX:K,rippleY:te,rippleSize:re,cb:B})},[o,P,C]),L=A.useCallback(()=>{O({},{pulsate:!0})},[O]),D=A.useCallback((N,F)=>{if(C.clear(),(N==null?void 0:N.type)==="touchend"&&T.current){T.current(),T.current=null,C.start(0,()=>{D(N,F)});return}T.current=null,p(B=>B.length>0?B.slice(1):B),v.current=F},[C]);return A.useImperativeHandle(n,()=>({pulsate:L,start:O,stop:D}),[L,O,D]),ie.jsx(xne,{className:fn(Cd.root,i.root,l),ref:k,...c,children:ie.jsx(PF,{component:null,exit:!0,children:f})})});function Ene(e){return Rr("MuiButtonBase",e)}const Tne=Ar("MuiButtonBase",["root","disabled","focusVisible"]),Ine=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:o}=e,l=An({root:["root",t&&"disabled",n&&"focusVisible"]},Ene,o);return n&&r&&(l.root+=` ${r}`),l},kne=sn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Tne.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),vx=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiButtonBase"}),{action:o,centerRipple:i=!1,children:l,className:c,component:f="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:v=!1,focusRipple:w=!1,focusVisibleClassName:C,LinkComponent:T="a",onBlur:k,onClick:P,onContextMenu:O,onDragLeave:L,onFocus:D,onFocusVisible:N,onKeyDown:F,onKeyUp:B,onMouseDown:V,onMouseLeave:G,onMouseUp:q,onTouchEnd:z,onTouchMove:$,onTouchStart:K,tabIndex:te=0,TouchRippleProps:re,touchRippleRef:oe,type:ue,...Q}=r,ce=A.useRef(null),ae=lne(),fe=yi(ae.ref,oe),[le,pe]=A.useState(!1);p&&le&&pe(!1),A.useImperativeHandle(o,()=>({focusVisible:()=>{pe(!0),ce.current.focus()}}),[]);const Fe=ae.shouldMount&&!g&&!p;A.useEffect(()=>{le&&w&&!g&&ae.pulsate()},[g,w,le,ae]);const Be=Lp(ae,"start",V,v),Ze=Lp(ae,"stop",O,v),it=Lp(ae,"stop",L,v),ot=Lp(ae,"stop",q,v),ut=Lp(ae,"stop",mt=>{le&&mt.preventDefault(),G&&G(mt)},v),st=Lp(ae,"start",K,v),ct=Lp(ae,"stop",z,v),Ae=Lp(ae,"stop",$,v),Z=Lp(ae,"stop",mt=>{fx(mt.target)||pe(!1),k&&k(mt)},!1),ne=co(mt=>{ce.current||(ce.current=mt.currentTarget),fx(mt.target)&&(pe(!0),N&&N(mt)),D&&D(mt)}),ee=()=>{const mt=ce.current;return f&&f!=="button"&&!(mt.tagName==="A"&&mt.href)},ye=co(mt=>{w&&!mt.repeat&&le&&mt.key===" "&&ae.stop(mt,()=>{ae.start(mt)}),mt.target===mt.currentTarget&&ee()&&mt.key===" "&&mt.preventDefault(),F&&F(mt),mt.target===mt.currentTarget&&ee()&&mt.key==="Enter"&&!p&&(mt.preventDefault(),P&&P(mt))}),Ie=co(mt=>{w&&mt.key===" "&&le&&!mt.defaultPrevented&&ae.stop(mt,()=>{ae.pulsate(mt)}),B&&B(mt),P&&mt.target===mt.currentTarget&&ee()&&mt.key===" "&&!mt.defaultPrevented&&P(mt)});let ge=f;ge==="button"&&(Q.href||Q.to)&&(ge=T);const $e={};ge==="button"?($e.type=ue===void 0?"button":ue,$e.disabled=p):(!Q.href&&!Q.to&&($e.role="button"),p&&($e["aria-disabled"]=p));const nt=yi(n,ce),pt={...r,centerRipple:i,component:f,disabled:p,disableRipple:g,disableTouchRipple:v,focusRipple:w,tabIndex:te,focusVisible:le},wt=Ine(pt);return ie.jsxs(kne,{as:ge,className:fn(wt.root,c),ownerState:pt,onBlur:Z,onClick:P,onContextMenu:Ze,onFocus:ne,onKeyDown:ye,onKeyUp:Ie,onMouseDown:Be,onMouseLeave:ut,onMouseUp:ot,onDragLeave:it,onTouchEnd:ct,onTouchMove:Ae,onTouchStart:st,ref:nt,tabIndex:p?-1:te,type:ue,...$e,...Q,children:[l,Fe?ie.jsx(Sne,{ref:fe,center:i,...re}):null]})});function Lp(e,t,n,r=!1){return co(o=>(n&&n(o),r||e[t](o),!0))}function Pne(e){return Rr("MuiIconButton",e)}const Ane=Ar("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Mne=e=>{const{classes:t,disabled:n,color:r,edge:o,size:i}=e,l={root:["root",n&&"disabled",r!=="default"&&`color${tn(r)}`,o&&`edge${tn(o)}`,`size${tn(i)}`]};return An(l,Pne,t)},Rne=sn(vx,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${tn(n.color)}`],n.edge&&t[`edge${tn(n.edge)}`],t[`size${tn(n.size)}`]]}})(mr(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),mr(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:jr((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${Ane.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}}))),Ug=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiIconButton"}),{edge:o=!1,children:i,className:l,color:c="default",disabled:f=!1,disableFocusRipple:p=!1,size:g="medium",...v}=r,w={...r,edge:o,color:c,disabled:f,disableFocusRipple:p,size:g},C=Mne(w);return ie.jsx(Rne,{className:fn(C.root,l),centerRipple:!0,focusRipple:!p,disabled:f,ref:n,...v,ownerState:w,children:i})});function One(e){return Rr("MuiSvgIcon",e)}Ar("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Dne=e=>{const{color:t,fontSize:n,classes:r}=e,o={root:["root",t!=="inherit"&&`color${tn(t)}`,`fontSize${tn(n)}`]};return An(o,One,r)},Lne=sn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${tn(n.color)}`],t[`fontSize${tn(n.fontSize)}`]]}})(mr(({theme:e})=>{var t,n,r,o,i,l,c,f,p,g,v,w,C,T;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(o=(t=e.transitions)==null?void 0:t.create)==null?void 0:o.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:k=>!k.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((l=(i=e.typography)==null?void 0:i.pxToRem)==null?void 0:l.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((f=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:f.call(c,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((g=(p=e.typography)==null?void 0:p.pxToRem)==null?void 0:g.call(p,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,k])=>k&&k.main).map(([k])=>{var P,O;return{props:{color:k},style:{color:(O=(P=(e.vars??e).palette)==null?void 0:P[k])==null?void 0:O.main}}}),{props:{color:"action"},style:{color:(w=(v=(e.vars??e).palette)==null?void 0:v.action)==null?void 0:w.active}},{props:{color:"disabled"},style:{color:(T=(C=(e.vars??e).palette)==null?void 0:C.action)==null?void 0:T.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),kD=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiSvgIcon"}),{children:o,className:i,color:l="inherit",component:c="svg",fontSize:f="medium",htmlColor:p,inheritViewBox:g=!1,titleAccess:v,viewBox:w="0 0 24 24",...C}=r,T=A.isValidElement(o)&&o.type==="svg",k={...r,color:l,component:c,fontSize:f,instanceFontSize:t.fontSize,inheritViewBox:g,viewBox:w,hasSvgAsChild:T},P={};g||(P.viewBox=w);const O=Dne(k);return ie.jsxs(Lne,{as:c,className:fn(O.root,i),focusable:"false",color:p,"aria-hidden":v?void 0:!0,role:v?"img":void 0,ref:n,...P,...C,...T&&o.props,ownerState:k,children:[T?o.props.children:o,v?ie.jsx("title",{children:v}):null]})});kD.muiName="SvgIcon";function fo(e,t){function n(r,o){return ie.jsx(kD,{"data-testid":`${t}Icon`,ref:o,...r,children:e})}return n.muiName=kD.muiName,A.memo(A.forwardRef(n))}const Nne=fo(ie.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Fne(e){return Rr("MuiChip",e)}const Io=Ar("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),zne=e=>{const{classes:t,disabled:n,size:r,color:o,iconColor:i,onDelete:l,clickable:c,variant:f}=e,p={root:["root",f,n&&"disabled",`size${tn(r)}`,`color${tn(o)}`,c&&"clickable",c&&`clickableColor${tn(o)}`,l&&"deletable",l&&`deletableColor${tn(o)}`,`${f}${tn(o)}`],label:["label",`label${tn(r)}`],avatar:["avatar",`avatar${tn(r)}`,`avatarColor${tn(o)}`],icon:["icon",`icon${tn(r)}`,`iconColor${tn(i)}`],deleteIcon:["deleteIcon",`deleteIcon${tn(r)}`,`deleteIconColor${tn(o)}`,`deleteIcon${tn(f)}Color${tn(o)}`]};return An(p,Fne,t)},Bne=sn("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:o,clickable:i,onDelete:l,size:c,variant:f}=n;return[{[`& .${Io.avatar}`]:t.avatar},{[`& .${Io.avatar}`]:t[`avatar${tn(c)}`]},{[`& .${Io.avatar}`]:t[`avatarColor${tn(r)}`]},{[`& .${Io.icon}`]:t.icon},{[`& .${Io.icon}`]:t[`icon${tn(c)}`]},{[`& .${Io.icon}`]:t[`iconColor${tn(o)}`]},{[`& .${Io.deleteIcon}`]:t.deleteIcon},{[`& .${Io.deleteIcon}`]:t[`deleteIcon${tn(c)}`]},{[`& .${Io.deleteIcon}`]:t[`deleteIconColor${tn(r)}`]},{[`& .${Io.deleteIcon}`]:t[`deleteIcon${tn(f)}Color${tn(r)}`]},t.root,t[`size${tn(c)}`],t[`color${tn(r)}`],i&&t.clickable,i&&r!=="default"&&t[`clickableColor${tn(r)})`],l&&t.deletable,l&&r!=="default"&&t[`deletableColor${tn(r)}`],t[f],t[`${f}${tn(r)}`]]}})(mr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Io.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Io.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${Io.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${Io.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${Io.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${Io.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Io.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:jr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:jr(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Io.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Io.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(Ia(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${Io.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:jr(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${Io.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${Io.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Io.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:jr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(Ia(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${Io.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:jr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${Io.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:jr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(Ia(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${Io.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${Io.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${Io.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${Io.avatar}`]:{marginLeft:4},[`& .${Io.avatarSmall}`]:{marginLeft:2},[`& .${Io.icon}`]:{marginLeft:4},[`& .${Io.iconSmall}`]:{marginLeft:2},[`& .${Io.deleteIcon}`]:{marginRight:5},[`& .${Io.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(Ia()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:jr(e.palette[n].main,.7)}`,[`&.${Io.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${Io.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:jr(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${Io.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:jr(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),Une=sn("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${tn(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function _j(e){return e.key==="Backspace"||e.key==="Delete"}const U8=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiChip"}),{avatar:o,className:i,clickable:l,color:c="default",component:f,deleteIcon:p,disabled:g=!1,icon:v,label:w,onClick:C,onDelete:T,onKeyDown:k,onKeyUp:P,size:O="medium",variant:L="filled",tabIndex:D,skipFocusWhenDisabled:N=!1,...F}=r,B=A.useRef(null),V=yi(B,n),G=ae=>{ae.stopPropagation(),T&&T(ae)},q=ae=>{ae.currentTarget===ae.target&&_j(ae)&&ae.preventDefault(),k&&k(ae)},z=ae=>{ae.currentTarget===ae.target&&T&&_j(ae)&&T(ae),P&&P(ae)},$=l!==!1&&C?!0:l,K=$||T?vx:f||"div",te={...r,component:K,disabled:g,size:O,color:c,iconColor:A.isValidElement(v)&&v.props.color||c,onDelete:!!T,clickable:$,variant:L},re=zne(te),oe=K===vx?{component:f||"div",focusVisibleClassName:re.focusVisible,...T&&{disableRipple:!0}}:{};let ue=null;T&&(ue=p&&A.isValidElement(p)?A.cloneElement(p,{className:fn(p.props.className,re.deleteIcon),onClick:G}):ie.jsx(Nne,{className:fn(re.deleteIcon),onClick:G}));let Q=null;o&&A.isValidElement(o)&&(Q=A.cloneElement(o,{className:fn(re.avatar,o.props.className)}));let ce=null;return v&&A.isValidElement(v)&&(ce=A.cloneElement(v,{className:fn(re.icon,v.props.className)})),ie.jsxs(Bne,{as:K,className:fn(re.root,i),disabled:$&&g?!0:void 0,onClick:C,onKeyDown:q,onKeyUp:z,ref:V,tabIndex:N&&g?-1:D,ownerState:te,...oe,...F,children:[Q||ce,ie.jsx(Une,{className:fn(re.label),ownerState:te,children:w}),ue]})});function jne(e){return Rr("MuiInput",e)}const Ag={...Ys,...Ar("MuiInput",["root","underline","input"])};function $ne(e){return Rr("MuiOutlinedInput",e)}const gd={...Ys,...Ar("MuiOutlinedInput",["root","notchedOutline","input"])};function Hne(e){return Rr("MuiFilledInput",e)}const Uc={...Ys,...Ar("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Vne=fo(ie.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),j8=fo(ie.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function qne(e){return Rr("MuiAutocomplete",e)}const ao=Ar("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);function Di(e,t){const{className:n,elementType:r,ownerState:o,externalForwardedProps:i,internalForwardedProps:l,...c}=t,{component:f,slots:p={[e]:void 0},slotProps:g={[e]:void 0},...v}=i,w=p[e]||r,C=Hq(g[e],o),{props:{component:T,...k},internalRef:P}=$q({className:n,...c,externalForwardedProps:e==="root"?v:void 0,externalSlotProps:C}),O=yi(P,C==null?void 0:C.ref,t.ref),L=e==="root"?T||f:T,D=Uq(w,{...e==="root"&&!f&&!p[e]&&l,...e!=="root"&&!p[e]&&l,...k,...L&&{as:L},ref:O},o);return[w,D]}var bj,wj;const Gne=e=>{const{classes:t,disablePortal:n,expanded:r,focused:o,fullWidth:i,hasClearIcon:l,hasPopupIcon:c,inputFocused:f,popupOpen:p,size:g}=e,v={root:["root",r&&"expanded",o&&"focused",i&&"fullWidth",l&&"hasClearIcon",c&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",f&&"inputFocused"],tag:["tag",`tagSize${tn(g)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",p&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return An(v,qne,t)},Wne=sn("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:o,hasPopupIcon:i,inputFocused:l,size:c}=n;return[{[`& .${ao.tag}`]:t.tag},{[`& .${ao.tag}`]:t[`tagSize${tn(c)}`]},{[`& .${ao.inputRoot}`]:t.inputRoot},{[`& .${ao.input}`]:t.input},{[`& .${ao.input}`]:l&&t.inputFocused},t.root,r&&t.fullWidth,i&&t.hasPopupIcon,o&&t.hasClearIcon]}})({[`&.${ao.focused} .${ao.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${ao.clearIndicator}`]:{visibility:"visible"}},[`& .${ao.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${ao.inputRoot}`]:{[`.${ao.hasPopupIcon}&, .${ao.hasClearIcon}&`]:{paddingRight:30},[`.${ao.hasPopupIcon}.${ao.hasClearIcon}&`]:{paddingRight:56},[`& .${ao.input}`]:{width:0,minWidth:30}},[`& .${Ag.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Ag.root}.${Ys.sizeSmall}`]:{[`& .${Ag.input}`]:{padding:"2px 4px 3px 0"}},[`& .${gd.root}`]:{padding:9,[`.${ao.hasPopupIcon}&, .${ao.hasClearIcon}&`]:{paddingRight:39},[`.${ao.hasPopupIcon}.${ao.hasClearIcon}&`]:{paddingRight:65},[`& .${ao.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${ao.endAdornment}`]:{right:9}},[`& .${gd.root}.${Ys.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${ao.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Uc.root}`]:{paddingTop:19,paddingLeft:8,[`.${ao.hasPopupIcon}&, .${ao.hasClearIcon}&`]:{paddingRight:39},[`.${ao.hasPopupIcon}.${ao.hasClearIcon}&`]:{paddingRight:65},[`& .${Uc.input}`]:{padding:"7px 4px"},[`& .${ao.endAdornment}`]:{right:9}},[`& .${Uc.root}.${Ys.sizeSmall}`]:{paddingBottom:1,[`& .${Uc.input}`]:{padding:"2.5px 4px"}},[`& .${Ys.hiddenLabel}`]:{paddingTop:8},[`& .${Uc.root}.${Ys.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${ao.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Uc.root}.${Ys.hiddenLabel}.${Ys.sizeSmall}`]:{[`& .${ao.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${ao.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${ao.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${ao.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${ao.inputRoot}`]:{flexWrap:"wrap"}}}]}),Kne=sn("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),Yne=sn(Ug,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Zne=sn(Ug,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popupIndicator,n.popupOpen&&t.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),Xne=sn(E_,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ao.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(mr(({theme:e})=>({zIndex:(e.vars||e).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),Qne=sn(Ux,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(mr(({theme:e})=>({...e.typography.body1,overflow:"auto"}))),Jne=sn("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),ere=sn("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"}))),tre=sn("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(mr(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${ao.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${ao.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${ao.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:jr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${ao.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:jr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${ao.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:jr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}}))),nre=sn(SD,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(mr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8}))),rre=sn("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${ao.option}`]:{paddingLeft:24}}),$8=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiAutocomplete"}),{autoComplete:o=!1,autoHighlight:i=!1,autoSelect:l=!1,blurOnSelect:c=!1,ChipProps:f,className:p,clearIcon:g=bj||(bj=ie.jsx(Vne,{fontSize:"small"})),clearOnBlur:v=!r.freeSolo,clearOnEscape:w=!1,clearText:C="Clear",closeText:T="Close",componentsProps:k,defaultValue:P=r.multiple?[]:null,disableClearable:O=!1,disableCloseOnSelect:L=!1,disabled:D=!1,disabledItemsFocusable:N=!1,disableListWrap:F=!1,disablePortal:B=!1,filterOptions:V,filterSelectedOptions:G=!1,forcePopupIcon:q="auto",freeSolo:z=!1,fullWidth:$=!1,getLimitTagsText:K=vr=>`+${vr}`,getOptionDisabled:te,getOptionKey:re,getOptionLabel:oe,isOptionEqualToValue:ue,groupBy:Q,handleHomeEndKeys:ce=!r.freeSolo,id:ae,includeInputInList:fe=!1,inputValue:le,limitTags:pe=-1,ListboxComponent:Fe,ListboxProps:Be,loading:Ze=!1,loadingText:it="Loading…",multiple:ot=!1,noOptionsText:ut="No options",onChange:st,onClose:ct,onHighlightChange:Ae,onInputChange:Z,onOpen:ne,open:ee,openOnFocus:ye=!1,openText:Ie="Open",options:ge,PaperComponent:$e,PopperComponent:nt,popupIcon:pt=wj||(wj=ie.jsx(j8,{})),readOnly:wt=!1,renderGroup:mt,renderInput:zt,renderOption:Pt,renderTags:Zt,selectOnFocus:We=!r.freeSolo,size:Ge="medium",slots:Rt={},slotProps:Dt={},value:qt,...Yt}=r,{getRootProps:xt,getInputProps:Et,getInputLabelProps:St,getPopupIndicatorProps:kt,getClearProps:cn,getTagProps:an,getListboxProps:Qn,getOptionProps:tr,value:lr,dirty:Le,expanded:de,id:xe,popupOpen:Ee,focused:Ye,focusedTag:lt,anchorEl:Ce,setAnchorEl:ke,inputValue:De,groupedOptions:He}=zee({...r,componentName:"Autocomplete"}),vt=!O&&!D&&Le&&!wt,Ct=(!z||q===!0)&&q!==!1,{onMouseDown:Nt}=Et(),{ref:jt,...Ht}=Qn(),vn=oe||(vr=>vr.label??vr),gn={...r,disablePortal:B,expanded:de,focused:Ye,fullWidth:$,getOptionLabel:vn,hasClearIcon:vt,hasPopupIcon:Ct,inputFocused:lt===-1,popupOpen:Ee,size:Ge},_n=Gne(gn),Dn={slots:{paper:$e,popper:nt,...Rt},slotProps:{chip:f,listbox:Be,...k,...Dt}},[ft,dt]=Di("listbox",{elementType:tre,externalForwardedProps:Dn,ownerState:gn,className:_n.listbox,additionalProps:Ht,ref:jt}),[Wt,Mn]=Di("paper",{elementType:Ux,externalForwardedProps:Dn,ownerState:gn,className:_n.paper}),[Bn,dr]=Di("popper",{elementType:E_,externalForwardedProps:Dn,ownerState:gn,className:_n.popper,additionalProps:{disablePortal:B,style:{width:Ce?Ce.clientWidth:null},role:"presentation",anchorEl:Ce,open:Ee}});let qn;if(ot&&lr.length>0){const vr=uo=>({className:_n.tag,disabled:D,...an(uo)});Zt?qn=Zt(lr,vr,gn):qn=lr.map((uo,ur)=>{const{key:ci,...Mo}=vr({index:ur});return ie.jsx(U8,{label:vn(uo),size:Ge,...Mo,...Dn.slotProps.chip},ci)})}if(pe>-1&&Array.isArray(qn)){const vr=qn.length-pe;!Ye&&vr>0&&(qn=qn.splice(0,pe),qn.push(ie.jsx("span",{className:_n.tag,children:K(vr)},qn.length)))}const la=mt||(vr=>ie.jsxs("li",{children:[ie.jsx(nre,{className:_n.groupLabel,ownerState:gn,component:"div",children:vr.group}),ie.jsx(rre,{className:_n.groupUl,ownerState:gn,children:vr.children})]},vr.key)),lo=Pt||((vr,uo)=>{const{key:ur,...ci}=vr;return ie.jsx("li",{...ci,children:vn(uo)},ur)}),_i=(vr,uo)=>{const ur=tr({option:vr,index:uo});return lo({...ur,className:_n.option},vr,{selected:ur["aria-selected"],index:uo,inputValue:De},gn)},$n=Dn.slotProps.clearIndicator,no=Dn.slotProps.popupIndicator;return ie.jsxs(A.Fragment,{children:[ie.jsx(Wne,{ref:n,className:fn(_n.root,p),ownerState:gn,...xt(Yt),children:zt({id:xe,disabled:D,fullWidth:!0,size:Ge==="small"?"small":void 0,InputLabelProps:St(),InputProps:{ref:ke,className:_n.inputRoot,startAdornment:qn,onMouseDown:vr=>{vr.target===vr.currentTarget&&Nt(vr)},...(vt||Ct)&&{endAdornment:ie.jsxs(Kne,{className:_n.endAdornment,ownerState:gn,children:[vt?ie.jsx(Yne,{...cn(),"aria-label":C,title:C,ownerState:gn,...$n,className:fn(_n.clearIndicator,$n==null?void 0:$n.className),children:g}):null,Ct?ie.jsx(Zne,{...kt(),disabled:D,"aria-label":Ee?T:Ie,title:Ee?T:Ie,ownerState:gn,...no,className:fn(_n.popupIndicator,no==null?void 0:no.className),children:pt}):null]})}},inputProps:{className:_n.input,disabled:D,readOnly:wt,...Et()}})}),Ce?ie.jsx(Xne,{as:Bn,...dr,children:ie.jsxs(Qne,{as:Wt,...Mn,children:[Ze&&He.length===0?ie.jsx(Jne,{className:_n.loading,ownerState:gn,children:it}):null,He.length===0&&!z&&!Ze?ie.jsx(ere,{className:_n.noOptions,ownerState:gn,role:"presentation",onMouseDown:vr=>{vr.preventDefault()},children:ut}):null,He.length>0?ie.jsx(ft,{as:Fe,...dt,children:He.map((vr,uo)=>Q?la({key:vr.key,group:vr.group,children:vr.options.map((ur,ci)=>_i(ur,vr.index+ci))}):_i(vr,uo))}):null]})}):null]})}),ore=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],ire=["key"];function H8(e){const{item:t,applyValue:n,type:r,apiRef:o,focusElementRef:i,color:l,error:c,helperText:f,size:p,variant:g="standard"}=e,v=sr(e,ore),w={color:l,error:c,helperText:f,size:p,variant:g},[C,T]=A.useState(t.value||[]),k=Li(),P=er();A.useEffect(()=>{const L=t.value??[];T(L.map(String))},[t.value]);const O=A.useCallback((L,D)=>{T(D.map(String)),n(we({},t,{value:[...D.map(N=>r==="number"?Number(N):N)]}))},[n,t,r]);return ie.jsx($8,we({multiple:!0,freeSolo:!0,options:[],filterOptions:(L,D)=>{const{inputValue:N}=D;return N==null||N===""?[]:[N]},id:k,value:C,onChange:O,renderTags:(L,D)=>L.map((N,F)=>{const B=D({index:F}),{key:V}=B,G=sr(B,ire);return ie.jsx(P.slots.baseChip,we({variant:"outlined",size:"small",label:N},G),V)}),renderInput:L=>{var D;return ie.jsx(P.slots.baseTextField,we({},L,{label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:we({},L.InputLabelProps,{shrink:!0}),inputRef:i,type:r||"text"},w,(D=P.slotProps)==null?void 0:D.baseTextField))}},v))}var zf=function(e){return e.Cell="cell",e.Row="row",e}(zf||{}),pi=function(e){return e.Edit="edit",e.View="view",e}(pi||{}),Ii=function(e){return e.Edit="edit",e.View="view",e}(Ii||{}),xu=function(e){return e.And="and",e.Or="or",e}(xu||{}),Bp=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e.pasteKeyDown="pasteKeyDown",e}(Bp||{}),vh=function(e){return e.cellFocusOut="cellFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(vh||{}),_g=function(e){return e.enterKeyDown="enterKeyDown",e.cellDoubleClick="cellDoubleClick",e.printableKeyDown="printableKeyDown",e.deleteKeyDown="deleteKeyDown",e}(_g||{}),cf=function(e){return e.rowFocusOut="rowFocusOut",e.escapeKeyDown="escapeKeyDown",e.enterKeyDown="enterKeyDown",e.tabKeyDown="tabKeyDown",e.shiftTabKeyDown="shiftTabKeyDown",e}(cf||{});function V8(e){return e.field!==void 0}const iS=()=>({items:[],logicOperator:xu.And,quickFilterValues:[],quickFilterLogicOperator:xu.And});function q8(e){return{current:e.current.getPublicApi()}}let iC;function are(){if(iC!==void 0)return iC;try{iC=new Function("return true")()}catch{iC=!1}return iC}const PD=(e,t)=>{const n=we({},e);if(n.id==null&&(n.id=Math.round(Math.random()*1e5)),n.operator==null){const r=bm(t)[n.field];n.operator=r&&r.filterOperators[0].value}return n},AF=(e,t,n)=>{const r=e.items.length>1;let o;r&&t?o=[e.items[0]]:o=e.items;const i=r&&o.some(c=>c.id==null);return o.some(c=>c.operator==null)||i?we({},e,{items:o.map(c=>PD(c,n))}):e.items!==o?we({},e,{items:o}):e},xj=(e,t,n)=>r=>we({},r,{filterModel:AF(e,t,n)}),aS=e=>typeof e=="string"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e,G8=(e,t)=>{var g;if(!e.field||!e.operator)return null;const n=t.current.getColumn(e.field);if(!n)return null;let r;if(n.valueParser){const v=n.valueParser;r=Array.isArray(e.value)?(g=e.value)==null?void 0:g.map(w=>v(w,void 0,n,t)):v(e.value,void 0,n,t)}else r=e.value;const{ignoreDiacritics:o}=t.current.rootProps;o&&(r=aS(r));const i=we({},e,{value:r}),l=n.filterOperators;if(!(l!=null&&l.length))throw new Error(`MUI X: No filter operators found for column '${n.field}'.`);const c=l.find(v=>v.value===i.operator);if(!c)throw new Error(`MUI X: No filter operator found for column '${n.field}' and operator value '${i.operator}'.`);const f=q8(t),p=c.getApplyFilterFn(i,n);return typeof p!="function"?null:{item:i,fn:v=>{let w=t.current.getRowValue(v,n);return o&&(w=aS(w)),p(w,v,n,f)}}};let Cj=1;const sre=(e,t,n)=>{const{items:r}=e,o=r.map(c=>G8(c,t)).filter(c=>!!c);if(o.length===0)return null;if(n||!are())return(c,f)=>{const p={};for(let g=0;g<o.length;g+=1){const v=o[g];(!f||f(v.item.field))&&(p[v.item.id]=v.fn(c))}return p};const i=new Function("appliers","row","shouldApplyFilter",`"use strict";
${o.map((c,f)=>`const shouldApply${f} = !shouldApplyFilter || shouldApplyFilter(${JSON.stringify(c.item.field)});`).join(`
`)}

const result$$ = {
${o.map((c,f)=>`  ${JSON.stringify(String(c.item.id))}: !shouldApply${f} ? false : appliers[${f}].fn(row),`).join(`
`)}
};

return result$$;`.replaceAll("$$",String(Cj)));return Cj+=1,(c,f)=>i(o,c,f)},W8=e=>e.quickFilterExcludeHiddenColumns??!0,lre=(e,t)=>{var c;const n=((c=e.quickFilterValues)==null?void 0:c.filter(Boolean))??[];if(n.length===0)return null;const r=W8(e)?zx(t):Yp(t),o=[],{ignoreDiacritics:i}=t.current.rootProps,l=q8(t);return r.forEach(f=>{const p=t.current.getColumn(f),g=p==null?void 0:p.getApplyQuickFilterFn;g&&o.push({column:p,appliers:n.map(v=>{const w=i?aS(v):v;return{fn:g(w,p,l)}})})}),function(p,g){const v={};e:for(let w=0;w<n.length;w+=1){const C=n[w];for(let T=0;T<o.length;T+=1){const{column:k,appliers:P}=o[T],{field:O}=k;if(g&&!g(O))continue;const L=P[w];let D=t.current.getRowValue(p,k);if(L.fn===null)continue;if(i&&(D=aS(D)),L.fn(D,p,k,l)){v[C]=!0;continue e}}v[C]=!1}return v}},ure=(e,t,n)=>{const r=sre(e,t,n),o=lre(e,t);return function(l,c,f){f.passingFilterItems=(r==null?void 0:r(l,c))??null,f.passingQuickFilterValues=(o==null?void 0:o(l,c))??null}},Sj=e=>e!=null,cre=(e,t,n)=>(e.cleanedFilterItems||(e.cleanedFilterItems=n.filter(r=>G8(r,t)!==null)),e.cleanedFilterItems),dre=(e,t,n,r,o)=>{const i=cre(o,r,n.items),l=e.filter(Sj),c=t.filter(Sj);if(l.length>0){const f=g=>l.some(v=>v[g.id]);if((n.logicOperator??iS().logicOperator)===xu.And){if(!i.every(f))return!1}else if(!i.some(f))return!1}if(c.length>0&&n.quickFilterValues!=null){const f=g=>c.some(v=>v[g]);if((n.quickFilterLogicOperator??iS().quickFilterLogicOperator)===xu.And){if(!n.quickFilterValues.every(f))return!1}else if(!n.quickFilterValues.some(f))return!1}return!0},hre=e=>{if(!e)return null;const t=new RegExp(ik(e),"i");return(n,r,o,i)=>{let l=i.current.getRowFormattedValue(r,o);return i.current.ignoreDiacritics&&(l=aS(l)),l!=null?t.test(l.toString()):!1}},Ej=(e,t)=>n=>{if(!n.value)return null;const r=e?n.value:n.value.trim(),o=new RegExp(ik(r),"i");return i=>{if(i==null)return t;const l=o.test(String(i));return t?!l:l}},Tj=(e,t)=>n=>{if(!n.value)return null;const r=e?n.value:n.value.trim(),o=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return i=>{if(i==null)return t;const l=o.compare(r,i.toString())===0;return t?!l:l}},Ij=e=>()=>t=>{const n=t===""||t==null;return e?!n:n},fre=(e=!1)=>[{value:"contains",getApplyFilterFn:Ej(e,!1),InputComponent:Ed},{value:"doesNotContain",getApplyFilterFn:Ej(e,!0),InputComponent:Ed},{value:"equals",getApplyFilterFn:Tj(e,!1),InputComponent:Ed},{value:"doesNotEqual",getApplyFilterFn:Tj(e,!0),InputComponent:Ed},{value:"startsWith",getApplyFilterFn:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),r=new RegExp(`^${ik(n)}.*$`,"i");return o=>o!=null?r.test(o.toString()):!1},InputComponent:Ed},{value:"endsWith",getApplyFilterFn:t=>{if(!t.value)return null;const n=e?t.value:t.value.trim(),r=new RegExp(`.*${ik(n)}$`,"i");return o=>o!=null?r.test(o.toString()):!1},InputComponent:Ed},{value:"isEmpty",getApplyFilterFn:Ij(!1),requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:Ij(!0),requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:t=>{if(!Array.isArray(t.value)||t.value.length===0)return null;const n=e?t.value:t.value.map(o=>o.trim()),r=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"});return o=>o!=null?n.some(i=>r.compare(i,o.toString()||"")===0):!1},InputComponent:H8}],Sh={width:100,minWidth:50,maxWidth:1/0,hideable:!0,sortable:!0,resizable:!0,filterable:!0,groupable:!0,pinnable:!0,aggregable:!0,editable:!1,sortComparator:kee,type:"string",align:"left",filterOperators:fre(),renderEditCell:xee,getApplyQuickFilterFn:hre},sS=A.createContext({});function pre(e){return Rr("MuiList",e)}Ar("MuiList",["root","padding","dense","subheader"]);const mre=e=>{const{classes:t,disablePadding:n,dense:r,subheader:o}=e;return An({root:["root",!n&&"padding",r&&"dense",o&&"subheader"]},pre,t)},gre=sn("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),yre=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiList"}),{children:o,className:i,component:l="ul",dense:c=!1,disablePadding:f=!1,subheader:p,...g}=r,v=A.useMemo(()=>({dense:c}),[c]),w={...r,component:l,dense:c,disablePadding:f},C=mre(w);return ie.jsx(sS.Provider,{value:v,children:ie.jsxs(gre,{as:l,className:fn(C.root,i),ref:n,ownerState:w,...g,children:[p,o]})})});function jM(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function kj(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function K8(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function aC(e,t,n,r,o,i){let l=!1,c=o(e,t,t?n:!1);for(;c;){if(c===e.firstChild){if(l)return!1;l=!0}const f=r?!1:c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||!K8(c,i)||f)c=o(e,c,n);else return c.focus(),!0}return!1}const hA=A.forwardRef(function(t,n){const{actions:r,autoFocus:o=!1,autoFocusItem:i=!1,children:l,className:c,disabledItemsFocusable:f=!1,disableListWrap:p=!1,onKeyDown:g,variant:v="selectedMenu",...w}=t,C=A.useRef(null),T=A.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$i(()=>{o&&C.current.focus()},[o]),A.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(D,{direction:N})=>{const F=!C.current.style.width;if(D.clientHeight<C.current.clientHeight&&F){const B=`${Bq(Nf(D))}px`;C.current.style[N==="rtl"?"paddingLeft":"paddingRight"]=B,C.current.style.width=`calc(100% + ${B})`}return C.current}}),[]);const k=D=>{const N=C.current,F=D.key;if(D.ctrlKey||D.metaKey||D.altKey){g&&g(D);return}const V=ka(N).activeElement;if(F==="ArrowDown")D.preventDefault(),aC(N,V,p,f,jM);else if(F==="ArrowUp")D.preventDefault(),aC(N,V,p,f,kj);else if(F==="Home")D.preventDefault(),aC(N,null,p,f,jM);else if(F==="End")D.preventDefault(),aC(N,null,p,f,kj);else if(F.length===1){const G=T.current,q=F.toLowerCase(),z=performance.now();G.keys.length>0&&(z-G.lastTime>500?(G.keys=[],G.repeating=!0,G.previousKeyMatched=!0):G.repeating&&q!==G.keys[0]&&(G.repeating=!1)),G.lastTime=z,G.keys.push(q);const $=V&&!G.repeating&&K8(V,G);G.previousKeyMatched&&($||aC(N,V,!1,f,jM,G))?D.preventDefault():G.previousKeyMatched=!1}g&&g(D)},P=yi(C,n);let O=-1;A.Children.forEach(l,(D,N)=>{if(!A.isValidElement(D)){O===N&&(O+=1,O>=l.length&&(O=-1));return}D.props.disabled||(v==="selectedMenu"&&D.props.selected||O===-1)&&(O=N),O===N&&(D.props.disabled||D.props.muiSkipListHighlight||D.type.muiSkipListHighlight)&&(O+=1,O>=l.length&&(O=-1))});const L=A.Children.map(l,(D,N)=>{if(N===O){const F={};return i&&(F.autoFocus=!0),D.props.tabIndex===void 0&&v==="selectedMenu"&&(F.tabIndex=0),A.cloneElement(D,F)}return D});return ie.jsx(yre,{role:"menu",ref:P,className:c,onKeyDown:k,tabIndex:o?0:-1,...w,children:L})});function Pj(e){return e.substring(2).toLowerCase()}function vre(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Y8(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:i="onTouchEnd"}=e,l=A.useRef(!1),c=A.useRef(null),f=A.useRef(!1),p=A.useRef(!1);A.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);const g=yi(x_(t),c),v=co(T=>{const k=p.current;p.current=!1;const P=ka(c.current);if(!f.current||!c.current||"clientX"in T&&vre(T,P))return;if(l.current){l.current=!1;return}let O;T.composedPath?O=T.composedPath().includes(c.current):O=!P.documentElement.contains(T.target)||c.current.contains(T.target),!O&&(n||!k)&&o(T)}),w=T=>k=>{p.current=!0;const P=t.props[T];P&&P(k)},C={ref:g};return i!==!1&&(C[i]=w(i)),A.useEffect(()=>{if(i!==!1){const T=Pj(i),k=ka(c.current),P=()=>{l.current=!0};return k.addEventListener(T,v),k.addEventListener("touchmove",P),()=>{k.removeEventListener(T,v),k.removeEventListener("touchmove",P)}}},[v,i]),r!==!1&&(C[r]=w(r)),A.useEffect(()=>{if(r!==!1){const T=Pj(r),k=ka(c.current);return k.addEventListener(T,v),()=>{k.removeEventListener(T,v)}}},[v,r]),A.cloneElement(t,C)}const Z8=e=>e.scrollTop;function uk(e,t){const{timeout:n,easing:r,style:o={}}=e;return{duration:o.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:o.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:o.transitionDelay}}function AD(e){return`scale(${e}, ${e**2})`}const _re={entering:{opacity:1,transform:AD(1)},entered:{opacity:1,transform:"none"}},$M=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),lS=A.forwardRef(function(t,n){const{addEndListener:r,appear:o=!0,children:i,easing:l,in:c,onEnter:f,onEntered:p,onEntering:g,onExit:v,onExited:w,onExiting:C,style:T,timeout:k="auto",TransitionComponent:P=Wf,...O}=t,L=Id(),D=A.useRef(),N=XS(),F=A.useRef(null),B=yi(F,x_(i),n),V=oe=>ue=>{if(oe){const Q=F.current;ue===void 0?oe(Q):oe(Q,ue)}},G=V(g),q=V((oe,ue)=>{Z8(oe);const{duration:Q,delay:ce,easing:ae}=uk({style:T,timeout:k,easing:l},{mode:"enter"});let fe;k==="auto"?(fe=N.transitions.getAutoHeightDuration(oe.clientHeight),D.current=fe):fe=Q,oe.style.transition=[N.transitions.create("opacity",{duration:fe,delay:ce}),N.transitions.create("transform",{duration:$M?fe:fe*.666,delay:ce,easing:ae})].join(","),f&&f(oe,ue)}),z=V(p),$=V(C),K=V(oe=>{const{duration:ue,delay:Q,easing:ce}=uk({style:T,timeout:k,easing:l},{mode:"exit"});let ae;k==="auto"?(ae=N.transitions.getAutoHeightDuration(oe.clientHeight),D.current=ae):ae=ue,oe.style.transition=[N.transitions.create("opacity",{duration:ae,delay:Q}),N.transitions.create("transform",{duration:$M?ae:ae*.666,delay:$M?Q:Q||ae*.333,easing:ce})].join(","),oe.style.opacity=0,oe.style.transform=AD(.75),v&&v(oe)}),te=V(w),re=oe=>{k==="auto"&&L.start(D.current||0,oe),r&&r(F.current,oe)};return ie.jsx(P,{appear:o,in:c,nodeRef:F,onEnter:q,onEntered:z,onEntering:G,onExit:K,onExited:te,onExiting:$,addEndListener:re,timeout:k==="auto"?null:k,...O,children:(oe,{ownerState:ue,...Q})=>A.cloneElement(i,{style:{opacity:0,transform:AD(.75),visibility:oe==="exited"&&!c?"hidden":void 0,..._re[oe],...T,...i.props.style},ref:B,...Q})})});lS&&(lS.muiSupportAuto=!0);const bre=["open","target","onClose","children","position","className","onExited"],wre=e=>{const{classes:t}=e;return An({root:["menu"]},ho,t)},xre=sn(E_,{name:"MuiDataGrid",slot:"Menu",overridesResolver:(e,t)=>t.menu})(({theme:e})=>({zIndex:e.zIndex.modal,[`& .${Ke.menuList}`]:{outline:0}})),Cre={"bottom-start":"top left","bottom-end":"top right"};function MF(e){var k;const{open:t,target:n,onClose:r,children:o,position:i,className:l,onExited:c}=e,f=sr(e,bre),p=Jr(),g=er(),v=wre(g),w=A.useRef(null);$i(()=>{var P,O;t?w.current=document.activeElement instanceof HTMLElement?document.activeElement:null:((O=(P=w.current)==null?void 0:P.focus)==null||O.call(P),w.current=null)},[t]),A.useEffect(()=>{const P=t?"menuOpen":"menuClose";p.current.publishEvent(P,{target:n})},[p,t,n]);const C=P=>O=>{P&&P(),c&&c(O)},T=P=>{P.target&&(n===P.target||n!=null&&n.contains(P.target))||r(P)};return ie.jsx(xre,we({as:g.slots.basePopper,className:fn(v.root,l),ownerState:g,open:t,anchorEl:n,transition:!0,placement:i},f,(k=g.slotProps)==null?void 0:k.basePopper,{children:({TransitionProps:P,placement:O})=>ie.jsx(Y8,{onClickAway:T,mouseEvent:"onMouseDown",children:ie.jsx(lS,we({},P,{style:{transformOrigin:Cre[O]},onExited:C(P==null?void 0:P.onExited),children:ie.jsx(Ux,{children:o})}))})}))}const Sre=["api","colDef","id","hasFocus","isEditable","field","value","formattedValue","row","rowNode","cellMode","tabIndex","position","focusElementRef"],Ere=e=>typeof e.getActions=="function";function Tre(e){var ue;const{colDef:t,id:n,hasFocus:r,tabIndex:o,position:i="bottom-end",focusElementRef:l}=e,c=sr(e,Sre),[f,p]=A.useState(-1),[g,v]=A.useState(!1),w=Jr(),C=A.useRef(null),T=A.useRef(null),k=A.useRef(!1),P=A.useRef({}),O=Zc(),L=Li(),D=Li(),N=er();if(!Ere(t))throw new Error("MUI X: Missing the `getActions` property in the `GridColDef`.");const F=t.getActions(w.current.getRowParams(n)),B=F.filter(Q=>!Q.props.showInMenu),V=F.filter(Q=>Q.props.showInMenu),G=B.length+(V.length?1:0);A.useLayoutEffect(()=>{r||Object.entries(P.current).forEach(([Q,ce])=>{ce==null||ce.stop({},()=>{delete P.current[Q]})})},[r]),A.useEffect(()=>{if(f<0||!C.current||f>=C.current.children.length)return;C.current.children[f].focus({preventScroll:!0})},[f]),A.useEffect(()=>{r||(p(-1),k.current=!1)},[r]),A.useImperativeHandle(l,()=>({focus(){if(!k.current){const Q=F.findIndex(ce=>!ce.props.disabled);p(Q)}}}),[F]),A.useEffect(()=>{f>=G&&p(G-1)},[f,G]);const q=()=>{v(!0),p(G-1),k.current=!0},z=()=>{v(!1)},$=()=>{g?z():q()},K=Q=>ce=>{P.current[Q]=ce},te=(Q,ce)=>ae=>{p(Q),k.current=!0,ce&&ce(ae)},re=Q=>{if(G<=1)return;const ce=(fe,le)=>{var Be;if(fe<0||fe>F.length)return fe;const Fe=(le==="left"?-1:1)*(O?-1:1);return(Be=F[fe+Fe])!=null&&Be.props.disabled?ce(fe+Fe,le):fe+Fe};let ae=f;Q.key==="ArrowRight"?ae=ce(f,"right"):Q.key==="ArrowLeft"&&(ae=ce(f,"left")),!(ae<0||ae>=G)&&ae!==f&&(Q.preventDefault(),Q.stopPropagation(),p(ae))},oe=Q=>{Q.key==="Tab"&&Q.preventDefault(),["Tab","Escape"].includes(Q.key)&&z()};return ie.jsxs("div",we({role:"menu",ref:C,tabIndex:-1,className:Ke.actionsCell,onKeyDown:re},c,{children:[B.map((Q,ce)=>A.cloneElement(Q,{key:ce,touchRippleRef:K(ce),onClick:te(ce,Q.props.onClick),tabIndex:f===ce?o:-1})),V.length>0&&D&&ie.jsx(N.slots.baseIconButton,we({ref:T,id:D,"aria-label":w.current.getLocaleText("actionsCellMore"),"aria-haspopup":"menu","aria-expanded":g,"aria-controls":g?L:void 0,role:"menuitem",size:"small",onClick:$,touchRippleRef:K(D),tabIndex:f===B.length?o:-1},(ue=N.slotProps)==null?void 0:ue.baseIconButton,{children:ie.jsx(N.slots.moreActionsIcon,{fontSize:"small"})})),V.length>0&&ie.jsx(MF,{open:g,target:T.current,position:i,onClose:z,children:ie.jsx(hA,{id:L,className:Ke.menuList,onKeyDown:oe,"aria-labelledby":D,variant:"menu",autoFocusItem:!0,children:V.map((Q,ce)=>A.cloneElement(Q,{key:ce,closeMenu:z}))})})]}))}const Ire=e=>ie.jsx(Tre,we({},e)),fA="actions",kre=we({},Sh,{sortable:!1,filterable:!1,aggregable:!1,width:100,display:"flex",align:"center",headerAlign:"center",headerName:"",disableColumnMenu:!0,disableExport:!0,renderCell:Ire,getApplyQuickFilterFn:void 0}),$d=e=>e.rows,pA=gr($d,e=>e.totalRowCount),Pre=gr($d,e=>e.loading),Are=gr($d,e=>e.totalTopLevelRowCount),jg=gr($d,e=>e.dataRowIdToModelLookup),ck=gr($d,e=>e.dataRowIdToIdLookup),_l=gr($d,e=>e.tree),Mre=gr($d,e=>e.groupsToFetch),Rre=gr($d,e=>e.groupingName),Aj=gr($d,e=>e.treeDepths),jx=vi($d,e=>{const t=Object.entries(e.treeDepths);return t.length===0?1:t.filter(([,n])=>n>0).map(([n])=>Number(n)).sort((n,r)=>r-n)[0]+1}),hT=gr($d,e=>e.dataRowIds),Ore=gr($d,e=>e==null?void 0:e.additionalRowGroups),T_=vi(Ore,e=>{var n,r;const t=e==null?void 0:e.pinnedRows;return{bottom:((n=t==null?void 0:t.bottom)==null?void 0:n.map(o=>({id:o.id,model:o.model??{}})))??[],top:((r=t==null?void 0:t.top)==null?void 0:r.map(o=>({id:o.id,model:o.model??{}})))??[]}}),X8=gr(T_,e=>{var t,n;return(((t=e==null?void 0:e.top)==null?void 0:t.length)||0)+(((n=e==null?void 0:e.bottom)==null?void 0:n.length)||0)}),bl="auto-generated-group-node-root",$w=Symbol("mui.id_autogenerated"),Dre=()=>({type:"group",id:bl,depth:-1,groupingField:null,groupingKey:null,isAutoGenerated:!0,children:[],childrenFromPath:{},childrenExpanded:!0,parent:null});function Lre(e,t,n="A row was provided without id in the rows prop:"){if(e==null)throw new Error(["MUI X: The Data Grid component requires all rows to have a unique `id` property.","Alternatively, you can use the `getRowId` prop to specify a custom id for each row.",n,JSON.stringify(t)].join(`
`))}const mA=(e,t,n)=>{const r=t?t(e):e.id;return Lre(r,e,n),r},gI=({rows:e,getRowId:t,loading:n,rowCount:r})=>{const o={type:"full",rows:[]},i={},l={};for(let c=0;c<e.length;c+=1){const f=e[c],p=mA(f,t);i[p]=f,l[p]=p,o.rows.push(p)}return{rowsBeforePartialUpdates:e,loadingPropBeforePartialUpdates:n,rowCountPropBeforePartialUpdates:r,updates:o,dataRowIdToIdLookup:l,dataRowIdToModelLookup:i}},Q8=({tree:e,rowCountProp:t=0})=>{const n=e[bl];return Math.max(t,n.children.length+(n.footerId==null?0:1))},J8=({apiRef:e,rowCountProp:t=0,loadingProp:n,previousTree:r,previousTreeDepths:o,previousGroupsToFetch:i})=>{const l=e.current.caches.rows,{tree:c,treeDepths:f,dataRowIds:p,groupingName:g,groupsToFetch:v=[]}=e.current.applyStrategyProcessor("rowTreeCreation",{previousTree:r,previousTreeDepths:o,updates:l.updates,dataRowIdToIdLookup:l.dataRowIdToIdLookup,dataRowIdToModelLookup:l.dataRowIdToModelLookup,previousGroupsToFetch:i}),w=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:c,treeDepths:f,dataRowIdToIdLookup:l.dataRowIdToIdLookup,dataRowIds:p,dataRowIdToModelLookup:l.dataRowIdToModelLookup});return e.current.caches.rows.updates={type:"partial",actions:{insert:[],modify:[],remove:[]},idToActionLookup:{}},we({},w,{totalRowCount:Math.max(t,w.dataRowIds.length),totalTopLevelRowCount:Q8({tree:w.tree,rowCountProp:t}),groupingName:g,loading:n,groupsToFetch:v})},_x=e=>e.type==="skeletonRow"||e.type==="footer"||e.type==="group"&&e.isAutoGenerated||e.type==="pinnedRow"&&e.isAutoGenerated,RF=(e,t,n)=>{const r=e[t];if(r.type!=="group")return[];const o=[];for(let i=0;i<r.children.length;i+=1){const l=r.children[i];(!n||!_x(e[l]))&&o.push(l);const c=RF(e,l,n);for(let f=0;f<c.length;f+=1)o.push(c[f])}return!n&&r.footerId!=null&&o.push(r.footerId),o},Mj=({previousCache:e,getRowId:t,updates:n,groupKeys:r})=>{if(e.updates.type==="full")throw new Error("MUI X: Unable to prepare a partial update if a full update is not applied yet.");const o=new Map;n.forEach(g=>{const v=mA(g,t,"A row was provided without id when calling updateRows():");o.has(v)?o.set(v,we({},o.get(v),g)):o.set(v,g)});const i={type:"partial",actions:{insert:[...e.updates.actions.insert??[]],modify:[...e.updates.actions.modify??[]],remove:[...e.updates.actions.remove??[]]},idToActionLookup:we({},e.updates.idToActionLookup),groupKeys:r},l=we({},e.dataRowIdToModelLookup),c=we({},e.dataRowIdToIdLookup),f={insert:{},modify:{},remove:{}};o.forEach((g,v)=>{const w=i.idToActionLookup[v];if(g._action==="delete"){if(w==="remove"||!l[v])return;w!=null&&(f[w][v]=!0),i.actions.remove.push(v),delete l[v],delete c[v];return}const C=l[v];if(C){w==="remove"?(f.remove[v]=!0,i.actions.modify.push(v)):w==null&&i.actions.modify.push(v),l[v]=we({},C,g);return}w==="remove"?(f.remove[v]=!0,i.actions.insert.push(v)):w==null&&i.actions.insert.push(v),l[v]=g,c[v]=v});const p=Object.keys(f);for(let g=0;g<p.length;g+=1){const v=p[g],w=f[v];Object.keys(w).length>0&&(i.actions[v]=i.actions[v].filter(C=>!w[C]))}return{dataRowIdToModelLookup:l,dataRowIdToIdLookup:c,updates:i,rowsBeforePartialUpdates:e.rowsBeforePartialUpdates,loadingPropBeforePartialUpdates:e.loadingPropBeforePartialUpdates,rowCountPropBeforePartialUpdates:e.rowCountPropBeforePartialUpdates}};function Nre(e){var o,i;const t=T_(e),n=((o=t==null?void 0:t.top)==null?void 0:o.reduce((l,c)=>(l+=e.current.unstable_getRowHeight(c.id),l),0))||0,r=((i=t==null?void 0:t.bottom)==null?void 0:i.reduce((l,c)=>(l+=e.current.unstable_getRowHeight(c.id),l),0))||0;return{top:n,bottom:r}}const eG="var(--DataGrid-overlayHeight, calc(var(--height) * 2))";function Rj(e,t,n){const r=[];return t.forEach(o=>{const i=mA(o,n,"A row was provided without id when calling updateRows():"),l=e.current.getRowNode(i);if((l==null?void 0:l.type)==="pinnedRow"){const c=e.current.caches.pinnedRows,f=c.idLookup[i];f&&(c.idLookup[i]=we({},f,o))}else r.push(o)}),r}const tG=(e,t,n)=>typeof e=="number"&&e>0?e:t,Fre="__tree_data_group__",nG="__row_group_by_columns_group__",gA="__detail_panel_toggle__",zre=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","hasFocus","tabIndex","hideDescendantCount"],Bre=e=>{const{classes:t}=e;return An({root:["booleanCell"]},ho,t)};function Ure(e){const{value:t,rowNode:n}=e,r=sr(e,zre),o=Jr(),i=er(),l={classes:i.classes},c=Bre(l),p=un(o,jx)>0&&n.type==="group"&&i.treeData===!1,g=A.useMemo(()=>t?i.slots.booleanCellTrueIcon:i.slots.booleanCellFalseIcon,[i.slots.booleanCellFalseIcon,i.slots.booleanCellTrueIcon,t]);return p&&t===void 0?null:ie.jsx(g,we({fontSize:"small",className:c.root,titleAccess:o.current.getLocaleText(t?"booleanCellTrueLabel":"booleanCellFalseLabel"),"data-value":!!t},r))}const jre=A.memo(Ure),$re=e=>e.field!==nG&&_x(e.rowNode)?"":ie.jsx(jre,we({},e)),Hre=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange"],Vre=e=>{const{classes:t}=e;return An({root:["editBooleanCell"]},ho,t)};function qre(e){var O;const{id:t,value:n,field:r,className:o,hasFocus:i,onValueChange:l}=e,c=sr(e,Hre),f=Jr(),p=A.useRef(null),g=Li(),[v,w]=A.useState(n),C=er(),T={classes:C.classes},k=Vre(T),P=A.useCallback(async L=>{const D=L.target.checked;l&&await l(L,D),w(D),await f.current.setEditCellValue({id:t,field:r,value:D},L)},[f,r,t,l]);return A.useEffect(()=>{w(n)},[n]),$i(()=>{i&&p.current.focus()},[i]),ie.jsx("label",we({htmlFor:g,className:fn(k.root,o)},c,{children:ie.jsx(C.slots.baseCheckbox,we({id:g,inputRef:p,checked:!!v,onChange:P,size:"small"},(O=C.slotProps)==null?void 0:O.baseCheckbox))}))}const Gre=e=>ie.jsx(qre,we({},e)),Wre=["item","applyValue","apiRef","focusElementRef","isFilterActive","clearButton","tabIndex","label","variant","InputLabelProps"],yI=e=>{if(String(e).toLowerCase()==="true")return!0;if(String(e).toLowerCase()==="false")return!1},Kre=sn("div")({display:"flex",alignItems:"center",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Yre(e){var N,F,B;const{item:t,applyValue:n,apiRef:r,focusElementRef:o,clearButton:i,tabIndex:l,label:c,variant:f="standard"}=e,p=sr(e,Wre),[g,v]=A.useState(yI(t.value)),w=er(),C=Li(),T=Li(),k=((N=w.slotProps)==null?void 0:N.baseSelect)||{},P=k.native??!1,O=((F=w.slotProps)==null?void 0:F.baseSelectOption)||{},L=A.useCallback(V=>{const G=yI(V.target.value);v(G),n(we({},t,{value:G}))},[n,t]);A.useEffect(()=>{v(yI(t.value))},[t.value]);const D=c??r.current.getLocaleText("filterPanelInputLabel");return ie.jsxs(Kre,{children:[ie.jsxs(w.slots.baseFormControl,{fullWidth:!0,children:[ie.jsx(w.slots.baseInputLabel,we({},(B=w.slotProps)==null?void 0:B.baseInputLabel,{id:C,shrink:!0,variant:f,children:D})),ie.jsxs(w.slots.baseSelect,we({labelId:C,id:T,label:D,value:g===void 0?"":String(g),onChange:L,variant:f,notched:f==="outlined"?!0:void 0,native:P,displayEmpty:!0,inputProps:{ref:o,tabIndex:l}},p,k,{children:[ie.jsx(w.slots.baseSelectOption,we({},O,{native:P,value:"",children:r.current.getLocaleText("filterValueAny")})),ie.jsx(w.slots.baseSelectOption,we({},O,{native:P,value:"true",children:r.current.getLocaleText("filterValueTrue")})),ie.jsx(w.slots.baseSelectOption,we({},O,{native:P,value:"false",children:r.current.getLocaleText("filterValueFalse")}))]}))]}),i]})}const Zre=()=>[{value:"is",getApplyFilterFn:e=>{const t=yI(e.value);return t===void 0?null:n=>!!n===t},InputComponent:Yre}],Xre=(e,t,n,r)=>e?r.current.getLocaleText("booleanCellTrueLabel"):r.current.getLocaleText("booleanCellFalseLabel"),Qre=e=>{switch(e.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case"null":case"undefined":return!1;default:return}},rG=we({},Sh,{type:"boolean",display:"flex",align:"center",headerAlign:"center",renderCell:$re,renderEditCell:Gre,sortComparator:S8,valueFormatter:Xre,filterOperators:Zre(),getApplyQuickFilterFn:void 0,aggregable:!1,pastedValueParser:e=>Qre(e)}),oG=e=>e.sorting,$x=gr(oG,e=>e.sortedRows),OF=vi($x,jg,_l,(e,t,n)=>e.reduce((r,o)=>{const i=t[o];i&&r.push({id:o,model:i});const l=n[o];return l&&_x(l)&&r.push({id:o,model:{[$w]:o}}),r},[])),bd=gr(oG,e=>e.sortModel),Jre=vi(bd,e=>e.reduce((n,r,o)=>(n[r.field]={sortDirection:r.sort,sortIndex:e.length>1?o+1:void 0},n),{}));vi($x,e=>e.reduce((t,n,r)=>(t[n]=r,t),Object.create(null)));const yA=e=>e.filter,yl=gr(yA,e=>e.filterModel);gr(yl,e=>e.quickFilterValues);const eoe=e=>e.visibleRowsLookup,Hx=gr(yA,e=>e.filteredRowsLookup);gr(yA,e=>e.filteredChildrenCountLookup);gr(yA,e=>e.filteredDescendantCountLookup);const hy=vi(eoe,OF,(e,t)=>t.filter(n=>e[n.id]!==!1)),Hw=vi(hy,e=>e.map(t=>t.id)),iG=vi(Hx,OF,(e,t)=>t.filter(n=>e[n.id]!==!1)),aG=vi(iG,e=>e.map(t=>t.id));vi(Hw,_l,(e,t)=>{const n={};let r=0;return e.reduce((o,i)=>{const l=t[i];return n[l.depth]||(n[l.depth]=0),l.depth>r&&(n[l.depth]=0),r=l.depth,n[l.depth]+=1,o[i]=n[l.depth],o},{})});const sG=vi(hy,_l,jx,(e,t,n)=>n<2?e:e.filter(r=>{var o;return((o=t[r.id])==null?void 0:o.depth)===0})),DF=gr(hy,e=>e.length),LF=gr(sG,e=>e.length),toe=gr(iG,e=>e.length);gr(toe,LF,(e,t)=>e-t);const noe=vi(yl,bm,(e,t)=>{var n;return(n=e.items)==null?void 0:n.filter(r=>{var l,c;if(!r.field)return!1;const o=t[r.field];if(!(o!=null&&o.filterOperators)||((l=o==null?void 0:o.filterOperators)==null?void 0:l.length)===0)return!1;const i=o.filterOperators.find(f=>f.value===r.operator);return i?!i.InputComponent||r.value!=null&&((c=r.value)==null?void 0:c.toString())!=="":!1})}),roe=vi(noe,e=>e.reduce((n,r)=>(n[r.field]?n[r.field].push(r):n[r.field]=[r],n),{})),wd=e=>e.rowSelection,ooe=gr(wd,e=>e.length),ioe=vi(wd,jg,(e,t)=>new Map(e.map(n=>[n,t[n]]))),Zp=vi(wd,e=>e.reduce((t,n)=>(t[n]=n,t),{}));function lG(e,t){var f;const n=_l(e),r=$x(e),o=Hx(e),i=n[t];if(!i||i.type!=="group")return[];const l=[],c=r.findIndex(p=>p===t)+1;for(let p=c;p<r.length&&((f=n[r[p]])==null?void 0:f.depth)>i.depth;p+=1){const g=r[p];o[g]!==!1&&e.current.isRowSelectable(g)&&l.push(g)}return l}function aoe(e,t){return gr(_l,$x,Hx,Zp,(n,r,o,i)=>{var g;const l=n[e];if(!l||l.type!=="group")return{isIndeterminate:!1,isChecked:i[e]===e};if(i[e]===e)return{isIndeterminate:!1,isChecked:!0};let c=0,f=0;const p=r.findIndex(v=>v===e)+1;for(let v=p;v<r.length&&((g=n[r[v]])==null?void 0:g.depth)>l.depth;v+=1){const w=r[v];o[w]!==!1&&(c+=1,i[w]!==void 0&&(f+=1))}return{isIndeterminate:f>0&&(f<c||i[e]===void 0),isChecked:t?f>0:i[e]===e}})}function NF(e){return e.signature===Ad.DataGrid?e.checkboxSelection&&e.disableMultipleRowSelection!==!0:!e.disableMultipleRowSelection}const soe=(e,t)=>{const n=[];let r=t;for(;r!=null&&r!==bl;){const o=e[r];if(!o)return n;n.push(r),r=o.parent}return n},loe=(e,t,n)=>{const r=e[n];if(!r)return[];const o=r.parent;return o==null?[]:e[o].children.filter(l=>l!==n&&t[l])},fT=(e,t,n,r,o,i)=>{const l=Hx(e),c=Zp(e),f=new Set([]);if(!(!r&&!o)){if(r){const p=t[n];(p==null?void 0:p.type)==="group"&&lG(e,n).forEach(v=>{i(v),f.add(v)})}if(o){const p=v=>{if(c[v]!==v&&!f.has(v))return!1;const w=t[v];return(w==null?void 0:w.type)!=="group"?!0:w.children.every(p)},g=v=>{const w=loe(t,l,v);if(w.length===0||w.every(p)){const T=t[v].parent;T!=null&&T!==bl&&e.current.isRowSelectable(T)&&(i(T),f.add(T),g(T))}};g(n)}}},Oj=(e,t,n,r,o,i)=>{const l=Zp(e);if(!(!o&&!r)&&(o&&soe(t,n).forEach(f=>{l[f]===f&&i(f)}),r)){const c=t[n];(c==null?void 0:c.type)==="group"&&lG(e,n).forEach(p=>{i(p)})}},uoe=["field","id","formattedValue","row","rowNode","colDef","isEditable","cellMode","hasFocus","tabIndex","api"],coe=e=>{const{classes:t}=e;return An({root:["checkboxInput"]},ho,t)},doe=No(function(t,n){var G,q;const{field:r,id:o,rowNode:i,hasFocus:l,tabIndex:c}=t,f=sr(t,uoe),p=Jr(),g=er(),v={classes:g.classes},w=coe(v),C=A.useRef(null),T=A.useRef(null),k=yi(C,n),P=z=>{const $={value:z.target.checked,id:o};p.current.publishEvent("rowSelectionCheckboxChange",$,z)};A.useLayoutEffect(()=>{if(c===0){const z=p.current.getCellElement(o,r);z&&(z.tabIndex=-1)}},[p,c,o,r]),A.useEffect(()=>{var z;if(l){const $=(z=C.current)==null?void 0:z.querySelector("input");$==null||$.focus({preventScroll:!0})}else T.current&&T.current.stop({})},[l]);const O=A.useCallback(z=>{z.key===" "&&z.stopPropagation()},[]),L=p.current.isRowSelectable(o),D=aoe(o,((G=g.rowSelectionPropagation)==null?void 0:G.parents)??!1),{isIndeterminate:N,isChecked:F}=un(p,D);if(i.type==="footer"||i.type==="pinnedRow")return null;const B=g.indeterminateCheckboxAction==="select"?F&&!N:F,V=p.current.getLocaleText(B?"checkboxSelectionUnselectRow":"checkboxSelectionSelectRow");return ie.jsx(g.slots.baseCheckbox,we({tabIndex:c,checked:B,onChange:P,className:w.root,inputProps:{"aria-label":V,name:"select_row"},onKeyDown:O,indeterminate:N,disabled:!L,touchRippleRef:T},(q=g.slotProps)==null?void 0:q.baseCheckbox,f,{ref:k}))}),hoe=doe,vA=e=>e.focus,Nc=gr(vA,e=>e.cell),foe=gr(vA,e=>e.columnHeader);gr(vA,e=>e.columnHeaderFilter);const dk=gr(vA,e=>e.columnGroupHeader),_A=e=>e.tabIndex,FF=gr(_A,e=>e.cell),uG=gr(_A,e=>e.columnHeader);gr(_A,e=>e.columnHeaderFilter);const poe=gr(_A,e=>e.columnGroupHeader);function Wr(e,t,n){const r=A.useRef(!0);$i(()=>{r.current=!1,e.current.register(n,t)},[e,n,t]),r.current&&e.current.register(n,t)}function Ts(e,t){const n=A.useRef(null);if(n.current)return n.current;const r=e.current.getLogger(t);return n.current=r,r}const cG=(e,t,n,r,o)=>{const i=Ts(e,"useNativeEventListener"),[l,c]=A.useState(!1),f=A.useRef(r),p=T8(t)?t():(t==null?void 0:t.current)??null,g=A.useCallback(v=>f.current&&f.current(v),[]);A.useEffect(()=>{f.current=r},[r]),A.useEffect(()=>{if(p&&n&&!l){i.debug(`Binding native ${n} event`),p.addEventListener(n,g,o),c(!0);const v=()=>{i.debug(`Clearing native ${n} event`),p.removeEventListener(n,g,o)};e.current.subscribeEvent("unmount",v)}},[p,g,n,l,i,o,e])},eE=e=>{const t=A.useRef(!0);t.current&&(t.current=!1,e())},moe=()=>{},goe=(e,t)=>{const n=A.useRef(!1);$i(()=>n.current||!e?moe:(n.current=!0,t()),[n.current||e])},yoe=100,voe=e=>e?0:100,dG=(e,t,n)=>t>0&&e>0?Math.ceil(e/t):e===-1?n+2:0,hG=e=>({page:0,pageSize:e?0:100}),_oe=(e,t=0)=>t===0?e:Math.max(Math.min(e,t-1),0),fG=(e,t)=>{if(t===Ad.DataGrid&&e>yoe)throw new Error(["MUI X: `pageSize` cannot exceed 100 in the MIT version of the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`))},boe=-1,bA=e=>e.pagination,bu=gr(bA,e=>e.paginationModel),Cw=gr(bA,e=>e.rowCount),i1=gr(bA,e=>e.meta),woe=gr(bu,e=>e.page),xoe=gr(bu,e=>e.pageSize),pG=gr(bu,Cw,(e,t)=>dG(t,e.pageSize,e.page)),zF=vi(bu,_l,jx,hy,sG,(e,t,n,r,o)=>{var C;const i=o.length,l=Math.min(e.pageSize*e.page,i-1),c=e.pageSize===boe?i-1:Math.min(l+e.pageSize-1,i-1);if(l===-1||c===-1)return null;if(n<2)return{firstRowIndex:l,lastRowIndex:c};const f=o[l],p=c-l+1,g=r.findIndex(T=>T.id===f.id);let v=g,w=0;for(;v<r.length&&w<=p;){const T=r[v],k=(C=t[T.id])==null?void 0:C.depth;k===void 0?v+=1:((w<p||k>0)&&(v+=1),k===0&&(w+=1))}return{firstRowIndex:g,lastRowIndex:v-1}}),Coe=vi(hy,zF,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),mG=vi(Hw,zF,(e,t)=>t?e.slice(t.firstRowIndex,t.lastRowIndex+1):[]),Soe=["field","colDef"],Eoe=e=>{const{classes:t}=e;return An({root:["checkboxInput"]},ho,t)},Toe=No(function(t,n){var G;const r=sr(t,Soe),[,o]=A.useState(!1),i=Jr(),l=er(),c={classes:l.classes},f=Eoe(c),p=un(i,uG),g=un(i,wd),v=un(i,Hw),w=un(i,mG),C=A.useMemo(()=>typeof l.isRowSelectable!="function"?g:g.filter(q=>l.keepNonExistentRowsSelected?!0:i.current.getRow(q)?l.isRowSelectable(i.current.getRowParams(q)):!1),[i,l.isRowSelectable,g,l.keepNonExistentRowsSelected]),T=A.useMemo(()=>(!l.pagination||!l.checkboxSelectionVisibleOnly?v:w).reduce((z,$)=>(z[$]=!0,z),{}),[l.pagination,l.checkboxSelectionVisibleOnly,w,v]),k=A.useMemo(()=>C.filter(q=>T[q]).length,[C,T]),P=k>0&&k<Object.keys(T).length,O=k>0,L=q=>{const z={value:q.target.checked};i.current.publishEvent("headerSelectionCheckboxChange",z)},D=p!==null&&p.field===t.field?0:-1;A.useLayoutEffect(()=>{const q=i.current.getColumnHeaderElement(t.field);D===0&&q&&(q.tabIndex=-1)},[D,i,t.field]);const N=A.useCallback(q=>{q.key===" "&&i.current.publishEvent("headerSelectionCheckboxChange",{value:!O})},[i,O]),F=A.useCallback(()=>{o(q=>!q)},[]);A.useEffect(()=>i.current.subscribeEvent("rowSelectionChange",F),[i,F]);const B=l.indeterminateCheckboxAction==="select"?O&&!P:O,V=i.current.getLocaleText(B?"checkboxSelectionUnselectAllRows":"checkboxSelectionSelectAllRows");return ie.jsx(l.slots.baseCheckbox,we({indeterminate:P,checked:B,onChange:L,className:f.root,inputProps:{"aria-label":V,name:"select_all_rows"},tabIndex:D,onKeyDown:N,disabled:!NF(l)},(G=l.slotProps)==null?void 0:G.baseCheckbox,r,{ref:n}))}),$p="__check__",Vx=we({},rG,{type:"custom",field:$p,width:50,resizable:!1,sortable:!1,filterable:!1,aggregable:!1,disableColumnMenu:!0,disableReorder:!0,disableExport:!0,getApplyQuickFilterFn:void 0,display:"flex",valueGetter:(e,t,n,r)=>{const o=Zp(r),i=r.current.getRowId(t);return o[i]!==void 0},renderHeader:e=>ie.jsx(Toe,we({},e)),renderCell:e=>ie.jsx(hoe,we({},e))}),Ioe=["item","applyValue","type","apiRef","focusElementRef","InputProps","isFilterActive","clearButton","tabIndex","disabled"];function Dj(e,t){if(e==null)return"";const n=new Date(e);return Number.isNaN(n.getTime())?"":t==="date"?n.toISOString().substring(0,10):t==="datetime-local"?(n.setMinutes(n.getMinutes()-n.getTimezoneOffset()),n.toISOString().substring(0,19)):n.toISOString().substring(0,10)}function Ob(e){var D;const{item:t,applyValue:n,type:r,apiRef:o,focusElementRef:i,InputProps:l,clearButton:c,tabIndex:f,disabled:p}=e,g=sr(e,Ioe),v=Id(),[w,C]=A.useState(()=>Dj(t.value,r)),[T,k]=A.useState(!1),P=Li(),O=er(),L=A.useCallback(N=>{v.clear();const F=N.target.value;C(F),k(!0),v.start(O.filterDebounceMs,()=>{const B=new Date(F);n(we({},t,{value:Number.isNaN(B.getTime())?void 0:B})),k(!1)})},[n,t,O.filterDebounceMs,v]);return A.useEffect(()=>{const N=Dj(t.value,r);C(N)},[t.value,r]),ie.jsx(O.slots.baseTextField,we({fullWidth:!0,id:P,label:o.current.getLocaleText("filterPanelInputLabel"),placeholder:o.current.getLocaleText("filterPanelInputPlaceholder"),value:w,onChange:L,variant:"standard",type:r||"text",InputLabelProps:{shrink:!0},inputRef:i,InputProps:we({},T||c?{endAdornment:T?ie.jsx(O.slots.loadIcon,{fontSize:"small",color:"action"}):c}:{},{disabled:p},l,{inputProps:we({max:r==="datetime-local"?"9999-12-31T23:59":"9999-12-31",tabIndex:f},l==null?void 0:l.inputProps)})},g,(D=O.slotProps)==null?void 0:D.baseTextField))}function Db(e,t,n,r){if(!e.value)return null;const o=new Date(e.value);n?o.setSeconds(0,0):(o.setMinutes(o.getMinutes()+o.getTimezoneOffset()),o.setHours(0,0,0,0));const i=o.getTime();return l=>{if(!l)return!1;if(r)return t(l.getTime(),i);const c=new Date(l);return n?c.setSeconds(0,0):c.setHours(0,0,0,0),t(c.getTime(),i)}}const gG=e=>[{value:"is",getApplyFilterFn:t=>Db(t,(n,r)=>n===r,e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"not",getApplyFilterFn:t=>Db(t,(n,r)=>n!==r,e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"after",getApplyFilterFn:t=>Db(t,(n,r)=>n>r,e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrAfter",getApplyFilterFn:t=>Db(t,(n,r)=>n>=r,e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"before",getApplyFilterFn:t=>Db(t,(n,r)=>n<r,e,!e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"onOrBefore",getApplyFilterFn:t=>Db(t,(n,r)=>n<=r,e),InputComponent:Ob,InputComponentProps:{type:e?"datetime-local":"date"}},{value:"isEmpty",getApplyFilterFn:()=>t=>t==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>t=>t!=null,requiresFilterValue:!1}],koe=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","hasFocus","inputProps","isValidating","isProcessingProps","onValueChange"],Poe=sn(Bx)({fontSize:"inherit"}),Aoe=e=>{const{classes:t}=e;return An({root:["editInputCell"]},ho,t)};function Moe(e){const{id:t,value:n,field:r,colDef:o,hasFocus:i,inputProps:l,onValueChange:c}=e,f=sr(e,koe),p=o.type==="dateTime",g=Jr(),v=A.useRef(null),w=A.useMemo(()=>{let N;n==null?N=null:n instanceof Date?N=n:N=new Date((n??"").toString());let F;return N==null||Number.isNaN(N.getTime())?F="":F=new Date(N.getTime()-N.getTimezoneOffset()*60*1e3).toISOString().substr(0,p?16:10),{parsed:N,formatted:F}},[n,p]),[C,T]=A.useState(w),P={classes:er().classes},O=Aoe(P),L=A.useCallback(N=>{if(N==="")return null;const[F,B]=N.split("T"),[V,G,q]=F.split("-"),z=new Date;if(z.setFullYear(Number(V),Number(G)-1,Number(q)),z.setHours(0,0,0,0),B){const[$,K]=B.split(":");z.setHours(Number($),Number(K),0,0)}return z},[]),D=A.useCallback(async N=>{const F=N.target.value,B=L(F);c&&await c(N,B),T({parsed:B,formatted:F}),g.current.setEditCellValue({id:t,field:r,value:B},N)},[g,r,t,c,L]);return A.useEffect(()=>{T(N=>{var F,B;return w.parsed!==N.parsed&&((F=w.parsed)==null?void 0:F.getTime())!==((B=N.parsed)==null?void 0:B.getTime())?w:N})},[w]),$i(()=>{i&&v.current.focus()},[i]),ie.jsx(Poe,we({inputRef:v,fullWidth:!0,className:O.root,type:p?"datetime-local":"date",inputProps:we({max:p?"9999-12-31T23:59":"9999-12-31"},l),value:C.formatted,onChange:D},f))}const yG=e=>ie.jsx(Moe,we({},e));function vG({value:e,columnType:t,rowId:n,field:r}){if(!(e instanceof Date))throw new Error([`MUI X: \`${t}\` column type only accepts \`Date\` objects as values.`,"Use `valueGetter` to transform the value into a `Date` object.",`Row ID: ${n}, field: "${r}".`].join(`
`))}const Roe=(e,t,n,r)=>{if(!e)return"";const o=r.current.getRowId(t);return vG({value:e,columnType:"date",rowId:o,field:n.field}),e.toLocaleDateString()},Ooe=(e,t,n,r)=>{if(!e)return"";const o=r.current.getRowId(t);return vG({value:e,columnType:"dateTime",rowId:o,field:n.field}),e.toLocaleString()},Doe=we({},Sh,{type:"date",sortComparator:E8,valueFormatter:Roe,filterOperators:gG(),renderEditCell:yG,pastedValueParser:e=>new Date(e)}),Loe=we({},Sh,{type:"dateTime",sortComparator:E8,valueFormatter:Ooe,filterOperators:gG(!0),renderEditCell:yG,pastedValueParser:e=>new Date(e)}),Eg=e=>e==null?null:Number(e),Noe=e=>e==null||Number.isNaN(e)||e===""?null:t=>Eg(t)===Eg(e),Foe=()=>[{value:"=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>Eg(t)===e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:"!=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>Eg(t)!==e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:">",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:Eg(t)>e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:">=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:Eg(t)>=e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:"<",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:Eg(t)<e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:"<=",getApplyFilterFn:e=>e.value==null||Number.isNaN(e.value)?null:t=>t==null?!1:Eg(t)<=e.value,InputComponent:Ed,InputComponentProps:{type:"number"}},{value:"isEmpty",getApplyFilterFn:()=>e=>e==null,requiresFilterValue:!1},{value:"isNotEmpty",getApplyFilterFn:()=>e=>e!=null,requiresFilterValue:!1},{value:"isAnyOf",getApplyFilterFn:e=>!Array.isArray(e.value)||e.value.length===0?null:t=>t!=null&&e.value.includes(Number(t)),InputComponent:H8,InputComponentProps:{type:"number"}}],zoe=we({},Sh,{type:"number",align:"right",headerAlign:"right",sortComparator:S8,valueParser:e=>e===""?null:Number(e),valueFormatter:e=>Aee(e)?e.toLocaleString():e||"",filterOperators:Foe(),getApplyQuickFilterFn:Noe});function bx(e){return(e==null?void 0:e.type)==="singleSelect"}function s_(e,t){if(e)return typeof e.valueOptions=="function"?e.valueOptions(we({field:e.field},t)):e.valueOptions}function hk(e,t,n){if(t===void 0)return;const r=t.find(o=>{const i=n(o);return String(i)===String(e)});return n(r)}const Boe=["id","value","formattedValue","api","field","row","rowNode","colDef","cellMode","isEditable","tabIndex","className","hasFocus","isValidating","isProcessingProps","error","onValueChange","initialOpen"],Uoe=["MenuProps"];function joe(e){return!!e.key}function $oe(e){var K,te;const t=er(),{id:n,value:r,field:o,row:i,colDef:l,hasFocus:c,error:f,onValueChange:p,initialOpen:g=t.editMode===zf.Cell}=e,v=sr(e,Boe),w=Jr(),C=A.useRef(null),T=A.useRef(null),[k,P]=A.useState(g),L=(((K=t.slotProps)==null?void 0:K.baseSelect)||{}).native??!1,D=((te=t.slotProps)==null?void 0:te.baseSelect)||{},{MenuProps:N}=D,F=sr(D,Uoe);if($i(()=>{var re;c&&((re=T.current)==null||re.focus())},[c]),!bx(l))return null;const B=s_(l,{id:n,row:i});if(!B)return null;const V=l.getOptionValue,G=l.getOptionLabel,q=async re=>{if(!bx(l)||!B)return;P(!1);const oe=re.target,ue=hk(oe.value,B,V);p&&await p(re,ue),await w.current.setEditCellValue({id:n,field:o,value:ue},re)},z=(re,oe)=>{if(t.editMode===zf.Row){P(!1);return}if(oe==="backdropClick"||re.key==="Escape"){const ue=w.current.getCellParams(n,o);w.current.publishEvent("cellEditStop",we({},ue,{reason:re.key==="Escape"?vh.escapeKeyDown:vh.cellFocusOut}))}},$=re=>{joe(re)&&re.key==="Enter"||P(!0)};return!B||!l?null:ie.jsx(t.slots.baseSelect,we({ref:C,inputRef:T,value:r,onChange:q,open:k,onOpen:$,MenuProps:we({onClose:z},N),error:f,native:L,fullWidth:!0},v,F,{children:B.map(re=>{var ue;const oe=V(re);return A.createElement(t.slots.baseSelectOption,we({},((ue=t.slotProps)==null?void 0:ue.baseSelectOption)||{},{native:L,key:oe,value:oe}),G(re))})}))}const Hoe=e=>ie.jsx($oe,we({},e)),Voe=["item","applyValue","type","apiRef","focusElementRef","placeholder","tabIndex","label","variant","isFilterActive","clearButton","InputLabelProps"],qoe=({column:e,OptionComponent:t,getOptionLabel:n,getOptionValue:r,isSelectNative:o,baseSelectOptionProps:i})=>["",...s_(e)||[]].map(c=>{const f=r(c);let p=n(c);return p===""&&(p=" "),A.createElement(t,we({},i,{native:o,key:f,value:f}),p)}),Goe=sn("div")({display:"flex",alignItems:"flex-end",width:"100%","& button":{margin:"auto 0px 5px 5px"}});function Lj(e){var V,G,q,z,$;const{item:t,applyValue:n,type:r,apiRef:o,focusElementRef:i,placeholder:l,tabIndex:c,label:f,variant:p="standard",clearButton:g}=e,v=sr(e,Voe),w=t.value??"",C=Li(),T=Li(),k=er(),P=((G=(V=k.slotProps)==null?void 0:V.baseSelect)==null?void 0:G.native)??!1;let O=null;if(t.field){const K=o.current.getColumn(t.field);bx(K)&&(O=K)}const L=O==null?void 0:O.getOptionValue,D=O==null?void 0:O.getOptionLabel,N=A.useMemo(()=>s_(O),[O]),F=A.useCallback(K=>{let te=K.target.value;te=hk(te,N,L),n(we({},t,{value:te}))},[N,L,n,t]);if(!bx(O))return null;const B=f??o.current.getLocaleText("filterPanelInputLabel");return ie.jsxs(Goe,{children:[ie.jsxs(k.slots.baseFormControl,{fullWidth:!0,children:[ie.jsx(k.slots.baseInputLabel,we({},(q=k.slotProps)==null?void 0:q.baseInputLabel,{id:T,htmlFor:C,shrink:!0,variant:p,children:B})),ie.jsx(k.slots.baseSelect,we({id:C,label:B,labelId:T,value:w,onChange:F,variant:p,type:r||"text",inputProps:{tabIndex:c,ref:i,placeholder:l??o.current.getLocaleText("filterPanelInputPlaceholder")},native:P,notched:p==="outlined"?!0:void 0},v,(z=k.slotProps)==null?void 0:z.baseSelect,{children:qoe({column:O,OptionComponent:k.slots.baseSelectOption,getOptionLabel:D,getOptionValue:L,isSelectNative:P,baseSelectOptionProps:($=k.slotProps)==null?void 0:$.baseSelectOption})}))]}),g]})}const Woe=["item","applyValue","type","apiRef","focusElementRef","color","error","helperText","size","variant"],Koe=["key"],Yoe=k8();function Zoe(e){const{item:t,applyValue:n,apiRef:r,focusElementRef:o,color:i,error:l,helperText:c,size:f,variant:p="standard"}=e,g=sr(e,Woe),v={color:i,error:l,helperText:c,size:f,variant:p},w=Li(),C=er();let T=null;if(t.field){const F=r.current.getColumn(t.field);bx(F)&&(T=F)}const k=T==null?void 0:T.getOptionValue,P=T==null?void 0:T.getOptionLabel,O=A.useCallback((F,B)=>k(F)===k(B),[k]),L=A.useMemo(()=>s_(T)||[],[T]),D=A.useMemo(()=>Array.isArray(t.value)?t.value.reduce((F,B)=>{const V=L.find(G=>k(G)===B);return V!=null&&F.push(V),F},[]):[],[k,t.value,L]),N=A.useCallback((F,B)=>{n(we({},t,{value:B.map(k)}))},[n,t,k]);return ie.jsx($8,we({multiple:!0,options:L,isOptionEqualToValue:O,filterOptions:Yoe,id:w,value:D,onChange:N,getOptionLabel:P,renderTags:(F,B)=>F.map((V,G)=>{const q=B({index:G}),{key:z}=q,$=sr(q,Koe);return ie.jsx(C.slots.baseChip,we({variant:"outlined",size:"small",label:P(V)},$),z)}),renderInput:F=>{var B;return ie.jsx(C.slots.baseTextField,we({},F,{label:r.current.getLocaleText("filterPanelInputLabel"),placeholder:r.current.getLocaleText("filterPanelInputPlaceholder"),InputLabelProps:we({},F.InputLabelProps,{shrink:!0}),inputRef:o,type:"singleSelect"},v,(B=C.slotProps)==null?void 0:B.baseTextField))}},g))}const Lb=e=>e==null||!bF(e)?e:e.value,Xoe=()=>[{value:"is",getApplyFilterFn:e=>e.value==null||e.value===""?null:t=>Lb(t)===Lb(e.value),InputComponent:Lj},{value:"not",getApplyFilterFn:e=>e.value==null||e.value===""?null:t=>Lb(t)!==Lb(e.value),InputComponent:Lj},{value:"isAnyOf",getApplyFilterFn:e=>{if(!Array.isArray(e.value)||e.value.length===0)return null;const t=e.value.map(Lb);return n=>t.includes(Lb(n))},InputComponent:Zoe}],Qoe=e=>typeof e[0]=="object",Joe=e=>bF(e)?e.value:e,eie=e=>bF(e)?e.label:String(e),tie=we({},Sh,{type:"singleSelect",getOptionLabel:eie,getOptionValue:Joe,valueFormatter(e,t,n,r){const o=r.current.getRowId(t);if(!bx(n))return"";const i=s_(n,{id:o,row:t});if(e==null)return"";if(!i)return e;if(!Qoe(i))return n.getOptionLabel(e);const l=i.find(c=>n.getOptionValue(c)===e);return l?n.getOptionLabel(l):""},renderEditCell:Hoe,filterOperators:Xoe(),pastedValueParser:(e,t,n)=>{const r=n,o=s_(r)||[],i=r.getOptionValue;if(o.find(c=>i(c)===e))return e}}),nie="string",rie=()=>({string:Sh,number:zoe,date:Doe,dateTime:Loe,boolean:rG,singleSelect:tie,[fA]:kre,custom:Sh}),BF=e=>e.headerFiltering,oie=gr(BF,e=>(e==null?void 0:e.enabled)??!1),iie=gr(BF,e=>e.editing),aie=gr(BF,e=>e.menuOpen),wA=e=>e.columnGrouping,_G=vi(wA,e=>(e==null?void 0:e.unwrappedGroupingModel)??{}),bG=vi(wA,e=>(e==null?void 0:e.lookup)??{}),sie=vi(wA,e=>(e==null?void 0:e.headerStructure)??[]),tE=gr(wA,e=>(e==null?void 0:e.maxDepth)??0),wG=["maxWidth","minWidth","width","flex"],HM=rie();function lie({initialFreeSpace:e,totalFlexUnits:t,flexColumns:n}){const r=new Set(n.map(l=>l.field)),o={all:{},frozenFields:[],freeze:l=>{const c=o.all[l];c&&c.frozen!==!0&&(o.all[l].frozen=!0,o.frozenFields.push(l))}};function i(){if(o.frozenFields.length===r.size)return;const l={min:{},max:{}};let c=e,f=t,p=0;o.frozenFields.forEach(g=>{c-=o.all[g].computedWidth,f-=o.all[g].flex});for(let g=0;g<n.length;g+=1){const v=n[g];if(o.all[v.field]&&o.all[v.field].frozen===!0)continue;let C=c/f*v.flex;C<v.minWidth?(p+=v.minWidth-C,C=v.minWidth,l.min[v.field]=!0):C>v.maxWidth&&(p+=v.maxWidth-C,C=v.maxWidth,l.max[v.field]=!0),o.all[v.field]={frozen:!1,computedWidth:C,flex:v.flex}}p<0?Object.keys(l.max).forEach(g=>{o.freeze(g)}):p>0?Object.keys(l.min).forEach(g=>{o.freeze(g)}):n.forEach(({field:g})=>{o.freeze(g)}),i()}return i(),o.all}const MD=(e,t)=>{const n={};let r=0,o=0;const i=[];e.orderedFields.forEach(f=>{let p=e.lookup[f],g=0,v=!1;e.columnVisibilityModel[f]!==!1&&(p.flex&&p.flex>0?(r+=p.flex,v=!0):g=kf(p.width||Sh.width,p.minWidth||Sh.minWidth,p.maxWidth||Sh.maxWidth),o+=g),p.computedWidth!==g&&(p=we({},p,{computedWidth:g})),v&&i.push(p),n[f]=p});const l=t===void 0?0:t.viewportOuterSize.width-(t.hasScrollY?t.scrollbarSize:0),c=Math.max(l-o,0);if(r>0&&l>0){const f=lie({initialFreeSpace:c,totalFlexUnits:r,flexColumns:i});Object.keys(f).forEach(p=>{n[p].computedWidth=f[p].computedWidth})}return we({},e,{lookup:n})},uie=(e,t)=>{if(!t)return e;const{orderedFields:n=[],dimensions:r={}}=t,o=Object.keys(r);if(o.length===0&&n.length===0)return e;const i={},l=[];for(let g=0;g<n.length;g+=1){const v=n[g];e.lookup[v]&&(i[v]=!0,l.push(v))}const c=l.length===0?e.orderedFields:[...l,...e.orderedFields.filter(g=>!i[g])],f=we({},e.lookup);for(let g=0;g<o.length;g+=1){const v=o[g],w=we({},f[v],{hasBeenResized:!0});Object.entries(r[v]).forEach(([C,T])=>{w[C]=T===-1?1/0:T}),f[v]=w}return we({},e,{orderedFields:c,lookup:f})};function Nj(e){let t=HM[nie];return e&&HM[e]&&(t=HM[e]),t}const sw=({apiRef:e,columnsToUpsert:t,initialState:n,columnVisibilityModel:r=kd(e),keepOnlyColumnsToUpsert:o=!1})=>{var g,v;const i=!e.current.state.columns;let l;if(i)l={orderedFields:[],lookup:{},columnVisibilityModel:r};else{const w=If(e.current.state);l={orderedFields:o?[]:[...w.orderedFields],lookup:we({},w.lookup),columnVisibilityModel:r}}let c={};o&&!i&&(c=Object.keys(l.lookup).reduce((w,C)=>we({},w,{[C]:!1}),{})),t.forEach(w=>{const{field:C}=w;c[C]=!0;let T=l.lookup[C];T==null?(T=we({},Nj(w.type),{field:C,hasBeenResized:!1}),l.orderedFields.push(C)):o&&l.orderedFields.push(C),T&&T.type!==w.type&&(T=we({},Nj(w.type),{field:C}));let k=T.hasBeenResized;wG.forEach(P=>{w[P]!==void 0&&(k=!0,w[P]===-1&&(w[P]=1/0))}),l.lookup[C]=hx(T,we({},w,{hasBeenResized:k}))}),o&&!i&&Object.keys(l.lookup).forEach(w=>{c[w]||delete l.lookup[w]});const f=e.current.unstable_applyPipeProcessors("hydrateColumns",l),p=uie(f,n);return MD(p,((v=(g=e.current).getRootDimensions)==null?void 0:v.call(g))??void 0)};function cie({firstColumnToRender:e,apiRef:t,firstRowToRender:n,lastRowToRender:r,visibleRows:o}){let i=e;for(let l=n;l<r;l+=1)if(o[l]){const f=o[l].id,p=t.current.unstable_getCellColSpanInfo(f,e);p&&p.spannedByColSpan&&(i=p.leftVisibleCellIndex)}return i}function UF(e,t){if(t.unstable_listView)return 0;const n=YS(e),r=tE(e),o=oie(e),i=Math.floor(t.columnHeaderHeight*n),l=Math.floor((t.columnGroupHeaderHeight??t.columnHeaderHeight)*n),c=o?Math.floor((t.headerFilterHeight??t.columnHeaderHeight)*n):0;return i+l*r+c}const Fj=1,die=1.5,hie=e=>{const{scrollDirection:t,classes:n}=e,r={root:["scrollArea",`scrollArea--${t}`]};return An(r,ho,n)},fie=Ti("div",{name:"MuiDataGrid",slot:"ScrollArea",overridesResolver:(e,t)=>[{[`&.${Ke["scrollArea--left"]}`]:t["scrollArea--left"]},{[`&.${Ke["scrollArea--right"]}`]:t["scrollArea--right"]},t.scrollArea]})(()=>({position:"absolute",top:0,zIndex:101,width:20,bottom:0,[`&.${Ke["scrollArea--left"]}`]:{left:0},[`&.${Ke["scrollArea--right"]}`]:{right:0}}));function pie(e){const{scrollDirection:t}=e,n=A.useRef(null),r=Jr(),o=Id(),i=un(r,YS),l=un(r,vF),c=un(r,Ql),f=A.useRef({left:0,top:0}),p=()=>{if(t==="left")return f.current.left>0;if(t==="right"){const G=l-c.viewportInnerSize.width;return f.current.left<G}return!1},[g,v]=A.useState(!1),[w,C]=A.useState(p),T=er(),k=we({},T,{scrollDirection:t}),P=hie(k),O=UF(r,T),L=Math.floor(T.columnHeaderHeight*i),D={height:L,top:O-L};t==="left"?D.left=c.leftPinnedWidth:t==="right"&&(D.right=c.rightPinnedWidth+(c.hasScrollX?c.scrollbarSize:0));const N=G=>{f.current=G,C(p)},F=co(G=>{let q;if(G.preventDefault(),t==="left")q=G.clientX-n.current.getBoundingClientRect().right;else if(t==="right")q=Math.max(1,G.clientX-n.current.getBoundingClientRect().left);else throw new Error("MUI X: Wrong drag direction");q=(q-Fj)*die+Fj,o.start(0,()=>{r.current.scroll({left:f.current.left+q,top:f.current.top})})}),B=co(()=>{v(!0)}),V=co(()=>{v(!1)});return Hn(r,"scrollPositionChange",N),Hn(r,"columnHeaderDragStart",B),Hn(r,"columnHeaderDragEnd",V),!g||!w?null:ie.jsx(fie,{ref:n,className:fn(P.root),ownerState:k,onDragOver:F,style:D})}const zj=uy(pie);var sC={},VM={exports:{}},qM={exports:{}},Bj;function mie(){return Bj||(Bj=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(qM)),qM.exports}var Uj;function gie(){return Uj||(Uj=1,function(e){var t=mie().default;function n(o){if(typeof WeakMap!="function")return null;var i=new WeakMap,l=new WeakMap;return(n=function(f){return f?l:i})(o)}function r(o,i){if(!i&&o&&o.__esModule)return o;if(o===null||t(o)!="object"&&typeof o!="function")return{default:o};var l=n(i);if(l&&l.has(o))return l.get(o);var c={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var p in o)if(p!=="default"&&{}.hasOwnProperty.call(o,p)){var g=f?Object.getOwnPropertyDescriptor(o,p):null;g&&(g.get||g.set)?Object.defineProperty(c,p,g):c[p]=o[p]}return c.default=o,l&&l.set(o,c),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(VM)),VM.exports}var jj;function yie(){if(jj)return sC;jj=1;var e=gie().default;Object.defineProperty(sC,"__esModule",{value:!0}),sC.default=void 0;var t=e(w_());return sC.default=parseInt(t.version,10),sC}var vie=yie();const _ie=zS(vie),xG=A.createContext(void 0);function Hd(){const e=A.useContext(xG);if(e===void 0)throw new Error(["MUI X: Could not find the Data Grid private context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join(`
`));return e}const Vw=(e,t)=>{let n,r;return t.pagination&&t.paginationMode==="client"?(r=zF(e),n=Coe(e)):(n=hy(e),n.length===0?r=null:r={firstRowIndex:0,lastRowIndex:n.length-1}),{rows:n,range:r}},I_=(e,t)=>{const n=Vw(e,t);return A.useMemo(()=>({rows:n.rows,range:n.range}),[n.rows,n.range])},bie=typeof navigator<"u"?navigator.userAgent.toLowerCase():"empty",wie=bie.includes("firefox"),qx=e=>e.rowsMeta,xA=e=>e.virtualization;gr(xA,e=>e.enabled);const CA=gr(xA,e=>e.enabledForColumns),xie=gr(xA,e=>e.enabledForRows),SA=gr(xA,e=>e.renderContext),Cie=vi(e=>e.virtualization.renderContext.firstColumnIndex,e=>e.virtualization.renderContext.lastColumnIndex,(e,t)=>({firstColumnIndex:e,lastColumnIndex:t})),CG={firstRowIndex:0,lastRowIndex:0,firstColumnIndex:0,lastColumnIndex:0},Sie=(e,t)=>{const{disableVirtualization:n,autoHeight:r}=t;return we({},e,{virtualization:{enabled:!n,enabledForColumns:!n,enabledForRows:!n&&!r,renderContext:CG}})};function Eie(e,t){const n=i=>{e.current.setState(l=>we({},l,{virtualization:we({},l.virtualization,{enabled:i,enabledForColumns:i,enabledForRows:i&&!t.autoHeight})}))};Wr(e,{unstable_setVirtualization:n,unstable_setColumnVirtualization:i=>{e.current.setState(l=>we({},l,{virtualization:we({},l.virtualization,{enabledForColumns:i})}))}},"public"),A.useEffect(()=>{n(!t.disableVirtualization)},[t.disableVirtualization,t.autoHeight])}const jF=e=>e.rowSpanning,SG=gr(jF,e=>e.hiddenCells),Tie=gr(jF,e=>e.spannedCells),Iie=gr(jF,e=>e.hiddenCellOriginMap),wx=e=>e.listViewColumn,GM=50;var Ya=function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e}(Ya||{});const $j={top:0,left:0},kie=Object.freeze(new Map),Pie=(e,t,n,r,o)=>({direction:Ya.NONE,buffer:TG(e,Ya.NONE,t,n,r,o)});let RD=!1;try{typeof window<"u"&&(RD=/jsdom|HappyDOM/.test(window.navigator.userAgent))}catch{}const Aie=()=>{const e=Hd(),t=er(),{unstable_listView:n}=t,r=un(e,()=>n?[wx(e.current.state)]:ss(e)),o=un(e,xie)&&!RD,i=un(e,CA)&&!RD,l=un(e,Ql),c=l.viewportOuterSize,f=un(e,T_),p=un(e,ZS),g=n?{left:[],right:[]}:p,v=f.bottom.length>0,[w,C]=A.useState(kie),T=Zc(),k=un(e,Nc),P=un(e,FF),O=un(e,qx),L=un(e,Zp),D=I_(e,t),N=e.current.rootElementRef,F=e.current.mainElementRef,B=e.current.virtualScrollerRef,V=e.current.virtualScrollbarVerticalRef,G=e.current.virtualScrollbarHorizontalRef,q=l.contentSize.height,z=l.columnsTotalWidth,$=un(e,iee),K=A.useRef(null),te=A.useCallback(Z=>{if(F.current=Z,!Z)return;const ne=Z.getBoundingClientRect();let ee=Vj(ne);if((!K.current||ee.width!==K.current.width&&ee.height!==K.current.height)&&(K.current=ee,e.current.publishEvent("resize",ee)),typeof ResizeObserver>"u")return;const ye=new ResizeObserver(Ie=>{const ge=Ie[0];if(!ge)return;const $e=Vj(ge.contentRect);$e.width===ee.width&&$e.height===ee.height||(e.current.publishEvent("resize",$e),ee=$e)});if(ye.observe(Z),_ie>=19)return()=>{F.current=null,ye.disconnect()}},[e,F]),re=A.useRef($j),oe=A.useRef($j),ue=A.useRef(CG),Q=un(e,SA),ce=Id(),ae=A.useRef(void 0),fe=Lh(()=>Pie(T,t.rowBufferPx,t.columnBufferPx,l.rowHeight*15,GM*6)).current,le={rowIndex:A.useMemo(()=>k?D.rows.findIndex(Z=>Z.id===k.id):-1,[k,D.rows]),columnIndex:A.useMemo(()=>k?r.findIndex(Z=>Z.field===k.field):-1,[k,r])},pe=A.useCallback(Z=>{if(Oie(Z,e.current.state.virtualization.renderContext))return;const ne=Z.firstRowIndex!==ue.current.firstRowIndex||Z.lastRowIndex!==ue.current.lastRowIndex;e.current.setState(ee=>we({},ee,{virtualization:we({},ee.virtualization,{renderContext:Z})})),l.isReady&&ne&&(ue.current=Z,e.current.publishEvent("renderedRowsIntervalChange",Z)),oe.current=re.current},[e,l.isReady]),Fe=co(()=>{const Z=B.current;if(!Z)return;const ne={top:Z.scrollTop,left:Z.scrollLeft},ee=ne.left-re.current.left,ye=ne.top-re.current.top,Ie=ee!==0||ye!==0;re.current=ne;const ge=Ie?Die(ee,ye):Ya.NONE,$e=Math.abs(re.current.top-oe.current.top),nt=Math.abs(re.current.left-oe.current.left),pt=$e>=l.rowHeight||nt>=GM,wt=fe.direction!==ge;if(!(pt||wt))return Q;if(wt)switch(ge){case Ya.NONE:case Ya.LEFT:case Ya.RIGHT:ae.current=void 0;break;default:ae.current=Q;break}fe.direction=ge,fe.buffer=TG(T,ge,t.rowBufferPx,t.columnBufferPx,l.rowHeight*15,GM*6);const zt=WM(e,t,o,i),Pt=KM(zt,re.current,fe);return iA.flushSync(()=>{pe(Pt)}),ce.start(1e3,Fe),Pt}),Be=()=>{const Z=WM(e,t,o,i),ne=KM(Z,re.current,fe);ae.current=void 0,pe(ne)},Ze=co(Z=>{const{scrollTop:ne,scrollLeft:ee}=Z.currentTarget;if(ne<0||!T&&ee<0||T&&ee>0)return;const ye=Fe();e.current.publishEvent("scrollPositionChange",{top:ne,left:ee,renderContext:ye})}),it=co(Z=>{e.current.publishEvent("virtualScrollerWheel",{},Z)}),ot=co(Z=>{e.current.publishEvent("virtualScrollerTouchMove",{},Z)}),ut=(Z={})=>{var Zt;if(!Z.rows&&!D.range)return[];const ne=Z.renderContext??Q,ee=!v&&Z.position===void 0||v&&Z.position==="bottom",ye=Z.position!==void 0;let Ie;switch(Z.position){case"top":Ie=0;break;case"bottom":Ie=f.top.length+D.rows.length;break;case void 0:Ie=f.top.length;break}const ge=Z.rows??D.rows,$e=ne.firstRowIndex,nt=Math.min(ne.lastRowIndex,ge.length),pt=Z.rows?sj(0,Z.rows.length):sj($e,nt);let wt=-1;!ye&&le.rowIndex!==-1&&(le.rowIndex<$e&&(wt=le.rowIndex,pt.unshift(wt)),le.rowIndex>=nt&&(wt=le.rowIndex,pt.push(wt)));const mt=[],zt=(Zt=t.slotProps)==null?void 0:Zt.row,Pt=cy(e);return pt.forEach(We=>{var xe,Ee,Ye;const{id:Ge,model:Rt}=ge[We],Dt=(((xe=D==null?void 0:D.range)==null?void 0:xe.firstRowIndex)||0)+Ie+We;if($){const lt=g.left.length,Ce=r.length-g.right.length;e.current.calculateColSpan({rowId:Ge,minFirstColumn:lt,maxLastColumn:Ce,columns:r}),g.left.length>0&&e.current.calculateColSpan({rowId:Ge,minFirstColumn:0,maxLastColumn:g.left.length,columns:r}),g.right.length>0&&e.current.calculateColSpan({rowId:Ge,minFirstColumn:r.length-g.right.length,maxLastColumn:r.length,columns:r})}const qt=(k==null?void 0:k.id)===Ge,Yt=e.current.rowHasAutoHeight(Ge)?"auto":e.current.unstable_getRowHeight(Ge);let xt;L[Ge]==null?xt=!1:xt=e.current.isRowSelectable(Ge);let Et=!1;Z.position===void 0&&(Et=We===0);let St=!1;const kt=We===ge.length-1;if(ee)if(ye)St=kt;else{const lt=D.rows.length-1;We===lt&&(St=!0)}const an=We===wt;let Qn=null;P!==null&&P.id===Ge&&(Qn=e.current.getCellParams(Ge,P.field).cellMode==="view"?P.field:null);let tr=ne;!ye&&ae.current&&We>=ae.current.firstRowIndex&&We<ae.current.lastRowIndex&&(tr=ae.current);const lr=EG(Pt,tr,g.left.length),Le=kt&&Z.position==="top";if(mt.push(ie.jsx(t.slots.row,we({row:Rt,rowId:Ge,index:Dt,selected:xt,offsetTop:Z.rows?void 0:O.positions[We],offsetLeft:lr,dimensions:l,rowHeight:Yt,tabbableCell:Qn,pinnedColumns:g,visibleColumns:r,renderContext:tr,focusedColumnIndex:qt?le.columnIndex:void 0,isFirstVisible:Et,isLastVisible:St,isNotVisible:an,showBottomBorder:Le},zt),Ge)),an)return;const de=w.get(Ge);de&&mt.push(de),Z.position===void 0&&kt&&mt.push((Ye=(Ee=e.current).getInfiniteLoadingTriggerElement)==null?void 0:Ye.call(Ee,{lastRowId:Ge}))}),mt},st=c.width&&z>c.width,ct=A.useMemo(()=>({overflowX:!st||n?"hidden":void 0,overflowY:t.autoHeight?"hidden":void 0}),[st,t.autoHeight,n]),Ae=A.useMemo(()=>{const Z={width:st?z:"auto",flexBasis:q,flexShrink:0};return Z.flexBasis===0&&(Z.flexBasis=eG),Z},[z,q,st]);return A.useEffect(()=>{e.current.publishEvent("virtualScrollerContentSizeChange")},[e,Ae]),$i(()=>{i&&(B.current.scrollLeft=0),o&&(B.current.scrollTop=0)},[i,o,N,B]),$i(()=>{n&&(B.current.scrollLeft=0)},[n,B]),goe(c.width!==0,()=>{const Z=WM(e,t,o,i),ne=KM(Z,re.current,fe);pe(ne),e.current.publishEvent("scrollPositionChange",{top:re.current.top,left:re.current.left,renderContext:ne})}),e.current.register("private",{updateRenderContext:Be}),Hn(e,"columnsChange",Be),Hn(e,"filteredRowsSet",Be),Hn(e,"rowExpansionChange",Be),{renderContext:Q,setPanels:C,getRows:ut,getContainerProps:()=>({ref:te}),getScrollerProps:()=>({ref:B,onScroll:Ze,onWheel:it,onTouchMove:ot,style:ct,role:"presentation",tabIndex:wie?-1:void 0}),getContentProps:()=>({style:Ae,role:"presentation"}),getRenderZoneProps:()=>({role:"rowgroup"}),getScrollbarVerticalProps:()=>({ref:V,role:"presentation"}),getScrollbarHorizontalProps:()=>({ref:G,role:"presentation"})}};function WM(e,t,n,r){const o=Ql(e.current.state),i=Vw(e,t),l=t.unstable_listView?[wx(e.current.state)]:ss(e),c=Iie(e),f=e.current.state.rows.dataRowIds.at(-1),p=l.at(-1);return{enabledForRows:n,enabledForColumns:r,apiRef:e,autoHeight:t.autoHeight,rowBufferPx:t.rowBufferPx,columnBufferPx:t.columnBufferPx,leftPinnedWidth:o.leftPinnedWidth,columnsTotalWidth:o.columnsTotalWidth,viewportInnerWidth:o.viewportInnerSize.width,viewportInnerHeight:o.viewportInnerSize.height,lastRowHeight:f!==void 0?e.current.unstable_getRowHeight(f):0,lastColumnWidth:(p==null?void 0:p.computedWidth)??0,rowsMeta:qx(e.current.state),columnPositions:cy(e),rows:i.rows,range:i.range,pinnedColumns:ZS(e),visibleColumns:l,hiddenCellsOriginMap:c,listView:t.unstable_listView??!1,virtualizeColumnsWithAutoRowHeight:t.virtualizeColumnsWithAutoRowHeight}}function KM(e,t,n){const r={firstRowIndex:0,lastRowIndex:e.rows.length,firstColumnIndex:0,lastColumnIndex:e.visibleColumns.length},{top:o,left:i}=t,l=Math.abs(i)+e.leftPinnedWidth;if(e.enabledForRows){let f=Math.min(Hj(e,o,{atStart:!0,lastPosition:e.rowsMeta.positions[e.rowsMeta.positions.length-1]+e.lastRowHeight}),e.rowsMeta.positions.length-1);const p=e.hiddenCellsOriginMap[f];if(p){const v=Math.min(...Object.values(p));f=Math.min(f,v)}const g=e.autoHeight?f+e.rows.length:Hj(e,o+e.viewportInnerHeight);r.firstRowIndex=f,r.lastRowIndex=g}if(e.enabledForColumns){let f=0,p=e.columnPositions.length,g=!1;const[v,w]=OD({firstIndex:r.firstRowIndex,lastIndex:r.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:n.buffer.rowBefore,bufferAfter:n.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight});if(!e.virtualizeColumnsWithAutoRowHeight)for(let C=v;C<w&&!g;C+=1){const T=e.rows[C];g=e.apiRef.current.rowHasAutoHeight(T.id)}(!g||e.virtualizeColumnsWithAutoRowHeight)&&(f=ty(l,e.columnPositions,{atStart:!0,lastPosition:e.columnsTotalWidth}),p=ty(l+e.viewportInnerWidth,e.columnPositions)),r.firstColumnIndex=f,r.lastColumnIndex=p}return Mie(e,r,n)}function Hj(e,t,n){var l,c;const r=e.apiRef.current.getLastMeasuredRowIndex();let o=r===1/0;(l=e.range)!=null&&l.lastRowIndex&&!o&&(o=r>=e.range.lastRowIndex);const i=kf(r-(((c=e.range)==null?void 0:c.firstRowIndex)||0),0,e.rowsMeta.positions.length);return o||e.rowsMeta.positions[i]>=t?ty(t,e.rowsMeta.positions,n):Rie(t,e.rowsMeta.positions,i,n)}function Mie(e,t,n){const[r,o]=OD({firstIndex:t.firstRowIndex,lastIndex:t.lastRowIndex,minFirstIndex:0,maxLastIndex:e.rows.length,bufferBefore:n.buffer.rowBefore,bufferAfter:n.buffer.rowAfter,positions:e.rowsMeta.positions,lastSize:e.lastRowHeight}),[i,l]=OD({firstIndex:t.firstColumnIndex,lastIndex:t.lastColumnIndex,minFirstIndex:e.pinnedColumns.left.length,maxLastIndex:e.visibleColumns.length-e.pinnedColumns.right.length,bufferBefore:n.buffer.columnBefore,bufferAfter:n.buffer.columnAfter,positions:e.columnPositions,lastSize:e.lastColumnWidth}),c=cie({firstColumnToRender:i,apiRef:e.apiRef,firstRowToRender:r,lastRowToRender:o,visibleRows:e.rows});return{firstRowIndex:r,lastRowIndex:o,firstColumnIndex:c,lastColumnIndex:l}}function ty(e,t,n=void 0,r=0,o=t.length){if(t.length<=0)return-1;if(r>=o)return r;const i=r+Math.floor((o-r)/2),l=t[i];let c;if(n!=null&&n.atStart){const f=(i===t.length-1?n.lastPosition:t[i+1])-l;c=e-f<l}else c=e<=l;return c?ty(e,t,n,r,i):ty(e,t,n,i+1,o)}function Rie(e,t,n,r=void 0){let o=1;for(;n<t.length&&Math.abs(t[n])<e;)n+=o,o*=2;return ty(e,t,r,Math.floor(n/2),Math.min(n,t.length))}function OD({firstIndex:e,lastIndex:t,bufferBefore:n,bufferAfter:r,minFirstIndex:o,maxLastIndex:i,positions:l,lastSize:c}){const f=l[e]-n,p=l[t]+r,g=ty(f,l,{atStart:!0,lastPosition:l[l.length-1]+c}),v=ty(p,l);return[kf(g,o,i),kf(v,o,i)]}function Oie(e,t){return e===t?!0:e.firstRowIndex===t.firstRowIndex&&e.lastRowIndex===t.lastRowIndex&&e.firstColumnIndex===t.firstColumnIndex&&e.lastColumnIndex===t.lastColumnIndex}function EG(e,t,n){const r=(e[t.firstColumnIndex]??0)-(e[n]??0);return Math.abs(r)}function Die(e,t){return e===0&&t===0?Ya.NONE:Math.abs(t)>=Math.abs(e)?t>0?Ya.DOWN:Ya.UP:e>0?Ya.RIGHT:Ya.LEFT}function TG(e,t,n,r,o,i){if(e)switch(t){case Ya.LEFT:t=Ya.RIGHT;break;case Ya.RIGHT:t=Ya.LEFT;break}switch(t){case Ya.NONE:return{rowAfter:n,rowBefore:n,columnAfter:r,columnBefore:r};case Ya.LEFT:return{rowAfter:0,rowBefore:0,columnAfter:0,columnBefore:i};case Ya.RIGHT:return{rowAfter:0,rowBefore:0,columnAfter:i,columnBefore:0};case Ya.UP:return{rowAfter:0,rowBefore:o,columnAfter:0,columnBefore:0};case Ya.DOWN:return{rowAfter:o,rowBefore:0,columnAfter:0,columnBefore:0};default:throw new Error("unreachable")}}function Vj(e){return{width:Math.round(e.width*10)/10,height:Math.round(e.height*10)/10}}const Lie=()=>{var v,w;const e=Jr(),t=er(),n=un(e,pA),r=un(e,DF),o=un(e,X8),i=n===0&&o===0,l=un(e,Pre),c=!l&&i,f=!l&&n>0&&r===0;let p=null,g=null;return c&&(p="noRowsOverlay"),f&&(p="noResultsOverlay"),l&&(p="loadingOverlay",g=((w=(v=t.slotProps)==null?void 0:v.loadingOverlay)==null?void 0:w[i?"noRowsVariant":"variant"])||null),{overlayType:p,loadingOverlayVariant:g}},Nie=Ti("div",{name:"MuiDataGrid",slot:"OverlayWrapper",shouldForwardProp:e=>e!=="overlayType"&&e!=="loadingOverlayVariant",overridesResolver:(e,t)=>t.overlayWrapper})(({overlayType:e,loadingOverlayVariant:t})=>t!=="skeleton"?{position:"sticky",top:"var(--DataGrid-headersTotalHeight)",left:0,width:0,height:0,zIndex:e==="loadingOverlay"?5:4}:{}),Fie=Ti("div",{name:"MuiDataGrid",slot:"OverlayWrapperInner",shouldForwardProp:e=>e!=="overlayType"&&e!=="loadingOverlayVariant",overridesResolver:(e,t)=>t.overlayWrapperInner})({}),zie=e=>{const{classes:t}=e;return An({root:["overlayWrapper"],inner:["overlayWrapperInner"]},ho,t)};function Bie(e){const t=Jr(),n=er(),r=un(t,Ql);let o=Math.max(r.viewportOuterSize.height-r.topContainerHeight-r.bottomContainerHeight-(r.hasScrollX?r.scrollbarSize:0),0);o===0&&(o=eG);const i=zie(we({},e,{classes:n.classes}));return ie.jsx(Nie,we({className:fn(i.root)},e,{children:ie.jsx(Fie,we({className:fn(i.inner),style:{height:o,width:r.viewportOuterSize.width}},e))}))}function Uie(e){var i,l;const{overlayType:t}=e,n=er();if(!t)return null;const r=(i=n.slots)==null?void 0:i[t],o=(l=n.slotProps)==null?void 0:l[t];return ie.jsx(Bie,we({},e,{children:ie.jsx(r,we({},o))}))}const vI=e=>e.columnMenu;function jie(){var P;const e=Hd(),t=er(),n=un(e,ss),r=un(e,roe),o=un(e,Jre),i=un(e,uG),l=un(e,FF),c=un(e,poe),f=un(e,foe),p=un(e,dk),g=un(e,tE),v=un(e,vI),w=un(e,kd),C=un(e,sie),T=!(c===null&&i===null&&l===null),k=e.current.columnHeadersContainerRef;return ie.jsx(t.slots.columnHeaders,we({ref:k,visibleColumns:n,filterColumnLookup:r,sortColumnLookup:o,columnHeaderTabIndexState:i,columnGroupHeaderTabIndexState:c,columnHeaderFocus:f,columnGroupHeaderFocus:p,headerGroupingMaxDepth:g,columnMenuState:v,columnVisibility:w,columnGroupsHeaderStructure:C,hasOtherElementInTabSequence:T},(P=t.slotProps)==null?void 0:P.columnHeaders))}const $ie=uy(jie),IG=A.createContext(void 0),kG=()=>{const e=A.useContext(IG);if(e===void 0)throw new Error(["MUI X: Could not find the Data Grid configuration context.","It looks like you rendered your component outside of a DataGrid, DataGridPro or DataGridPremium parent component.","This can also happen if you are bundling multiple versions of the Data Grid."].join(`
`));return e},Hie=Ti("div")({position:"absolute",top:"var(--DataGrid-headersTotalHeight)",left:0,width:"calc(100% - (var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize)))"}),Vie=Ti("div",{name:"MuiDataGrid",slot:"Main",overridesResolver:(e,t)=>t.main})({flexGrow:1,position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"}),qie=No((e,t)=>{var i;const n=er(),o=kG().hooks.useGridAriaAttributes();return ie.jsxs(Vie,we({ownerState:n,className:e.className,tabIndex:-1},o,(i=n.slotProps)==null?void 0:i.main,{ref:t,children:[ie.jsx(Hie,{role:"presentation","data-id":"gridPanelAnchor"}),e.children]}))}),Gie=()=>An({root:["topContainer"]},ho,{}),Wie=Ti("div")({position:"sticky",zIndex:4,top:0});function Kie(e){const t=Gie();return ie.jsx(Wie,we({},e,{className:fn(t.root,Ke["container--top"]),role:"presentation"}))}const Yie=()=>An({root:["bottomContainer"]},ho,{}),Zie=Ti("div")({position:"sticky",zIndex:4,bottom:"calc(var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize))"});function Xie(e){const t=Yie();return ie.jsx(Zie,we({},e,{className:fn(t.root,Ke["container--bottom"]),role:"presentation"}))}const Qie=(e,t)=>{const{classes:n}=e;return An({root:["virtualScrollerContent",t&&"virtualScrollerContent--overflowed"]},ho,n)},Jie=Ti("div",{name:"MuiDataGrid",slot:"VirtualScrollerContent",overridesResolver:(e,t)=>t.virtualScrollerContent})({}),eae=No(function(t,n){var l;const r=er(),o=!r.autoHeight&&((l=t.style)==null?void 0:l.minHeight)==="auto",i=Qie(r,o);return ie.jsx(Jie,we({},t,{ownerState:r,className:fn(i.root,t.className),ref:n}))}),tae=Ti("div")({display:"flex",flexDirection:"row",width:"var(--DataGrid-rowWidth)",boxSizing:"border-box"}),PG=Ti("div")({position:"sticky",height:"100%",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",backgroundColor:"var(--DataGrid-pinnedBackground)"}),nae=Ti(PG)({left:0,borderRight:"1px solid var(--rowBorderColor)"}),rae=Ti(PG)({right:0,borderLeft:"1px solid var(--rowBorderColor)"}),oae=Ti("div")({flexGrow:1,borderTop:"1px solid var(--rowBorderColor)"});function iae({rowsLength:e}){const t=Jr(),{viewportOuterSize:n,minimumSize:r,hasScrollX:o,hasScrollY:i,scrollbarSize:l,leftPinnedWidth:c,rightPinnedWidth:f}=un(t,Ql),p=o?l:0,g=n.height-r.height>0;return p===0&&!g?null:ie.jsxs(tae,{className:Ke.filler,role:"presentation",style:{height:p,"--rowBorderColor":e===0?"transparent":"var(--DataGrid-rowBorderColor)"},children:[c>0&&ie.jsx(nae,{className:Ke["filler--pinnedLeft"],style:{width:c}}),ie.jsx(oae,{}),f>0&&ie.jsx(rae,{className:Ke["filler--pinnedRight"],style:{width:f+(i?l:0)}})]})}const aae=uy(iae),sae=["className"],lae=e=>{const{classes:t}=e;return An({root:["virtualScrollerRenderZone"]},ho,t)},uae=Ti("div",{name:"MuiDataGrid",slot:"VirtualScrollerRenderZone",overridesResolver:(e,t)=>t.virtualScrollerRenderZone})({position:"absolute",display:"flex",flexDirection:"column"}),cae=No(function(t,n){const{className:r}=t,o=sr(t,sae),i=Jr(),l=er(),c=lae(l),f=un(i,()=>{const p=SA(i);return qx(i.current.state).positions[p.firstRowIndex]??0});return ie.jsx(uae,we({className:fn(c.root,r),ownerState:l,style:{transform:`translate3d(0, ${f}px, 0)`}},o,{ref:n}))}),dae={includeHeaders:!0,includeOutliers:!1,outliersFactor:1.5,expand:!1,disableColumnVirtualization:!0},Ks=e=>e.editRows,uS=e=>e.preferencePanel;var l_=function(e){return e.filters="filters",e.columns="columns",e}(l_||{});const hae=(e,t)=>{const{classes:n}=e,r={root:["scrollbar",`scrollbar--${t}`],content:["scrollbarContent"]};return An(r,ho,n)},AG=Ti("div")({position:"absolute",display:"inline-block",zIndex:6,"--size":"calc(max(var(--DataGrid-scrollbarSize), 14px))"}),fae=Ti(AG)({width:"var(--size)",height:"calc(var(--DataGrid-hasScrollY) * (100% - var(--DataGrid-topContainerHeight) - var(--DataGrid-bottomContainerHeight) - var(--DataGrid-hasScrollX) * var(--DataGrid-scrollbarSize)))",overflowY:"auto",overflowX:"hidden",outline:0,"& > div":{width:"var(--size)"},top:"var(--DataGrid-topContainerHeight)",right:"0px"}),pae=Ti(AG)({width:"100%",height:"var(--size)",overflowY:"hidden",overflowX:"auto",outline:0,"& > div":{height:"var(--size)"},bottom:"0px"}),qj=No(function(t,n){const r=Hd(),o=er(),i=A.useRef(!1),l=A.useRef(0),c=A.useRef(null),f=A.useRef(null),p=hae(o,t.position),g=un(r,Ql),v=t.position==="vertical"?"height":"width",w=t.position==="vertical"?"scrollTop":"scrollLeft",C=t.position==="vertical"?g.hasScrollX:g.hasScrollY,T=g.minimumSize[v]+(C?g.scrollbarSize:0),P=(t.position==="vertical"?g.viewportInnerSize.height:g.viewportOuterSize.width)*(T/g.viewportOuterSize[v]),O=co(()=>{const N=r.current.virtualScrollerRef.current,F=c.current;if(!F||N[w]===l.current)return;if(l.current=N[w],i.current){i.current=!1;return}i.current=!0;const B=N[w]/T;F[w]=B*P}),L=co(()=>{const N=r.current.virtualScrollerRef.current,F=c.current;if(!F)return;if(i.current){i.current=!1;return}i.current=!0;const B=F[w]/P;N[w]=B*T});ZP(()=>{const N=r.current.virtualScrollerRef.current,F=c.current;return N.addEventListener("scroll",O,{capture:!0}),F.addEventListener("scroll",L,{capture:!0}),()=>{N.removeEventListener("scroll",O,{capture:!0}),F.removeEventListener("scroll",L,{capture:!0})}}),A.useEffect(()=>{f.current.style.setProperty(v,`${P}px`)},[P,v]);const D=t.position==="vertical"?fae:pae;return ie.jsx(D,{ref:yi(n,c),className:p.root,style:t.position==="vertical"&&o.unstable_listView?{height:"100%",top:0}:void 0,tabIndex:-1,"aria-hidden":"true",children:ie.jsx("div",{ref:f,className:p.content})})}),mae=(e,t,n)=>{const{classes:r}=e,o={root:["main",t.rightPinnedWidth>0&&"main--hasPinnedRight",n==="skeleton"&&"main--hasSkeletonLoadingOverlay"],scroller:["virtualScroller",t.hasScrollX&&"virtualScroller--hasScrollX"]};return An(o,ho,r)},gae=Ti("div",{name:"MuiDataGrid",slot:"VirtualScroller",overridesResolver:(e,t)=>t.virtualScroller})({position:"relative",height:"100%",flexGrow:1,overflow:"scroll",scrollbarWidth:"none",display:"flex",flexDirection:"column","&::-webkit-scrollbar":{display:"none"},"@media print":{overflow:"hidden"},zIndex:0});function yae(e){const t=Jr(),n=er(),r=un(t,Ql),o=Lie(),i=mae(n,r,o.loadingOverlayVariant),l=Aie(),{getContainerProps:c,getScrollerProps:f,getContentProps:p,getRenderZoneProps:g,getScrollbarVerticalProps:v,getScrollbarHorizontalProps:w,getRows:C}=l,T=C();return ie.jsxs(qie,we({className:i.root},c(),{children:[ie.jsx(zj,{scrollDirection:"left"}),ie.jsx(zj,{scrollDirection:"right"}),ie.jsxs(gae,we({className:i.scroller},f(),{ownerState:n,children:[ie.jsxs(Kie,{children:[!n.unstable_listView&&ie.jsx($ie,{}),ie.jsx(n.slots.pinnedRows,{position:"top",virtualScroller:l})]}),ie.jsx(Uie,we({},o)),ie.jsx(eae,we({},p(),{children:ie.jsxs(cae,we({},g(),{children:[T,ie.jsx(n.slots.detailPanels,{virtualScroller:l})]}))})),ie.jsx(aae,{rowsLength:T.length}),ie.jsx(Xie,{children:ie.jsx(n.slots.pinnedRows,{position:"bottom",virtualScroller:l})})]})),r.hasScrollY&&ie.jsx(qj,we({position:"vertical"},v())),r.hasScrollX&&!n.unstable_listView&&ie.jsx(qj,we({position:"horizontal"},w())),e.children]}))}function vae(){var t;const e=er();return e.hideFooter?null:ie.jsx(e.slots.footer,we({},(t=e.slotProps)==null?void 0:t.footer))}let YM;function _ae(){return YM===void 0&&document.createElement("div").focus({get preventScroll(){return YM=!0,!1}}),YM}const EA=(e,t,n,r,o)=>{const i=t===n-1;return e===Oi.LEFT&&i?!0:r?e===Oi.LEFT?!0:e===Oi.RIGHT?!i:!i||o:!1},TA=(e,t)=>e===Oi.RIGHT&&t===0,bae=["column","rowId","editCellState","align","children","colIndex","width","className","style","colSpan","disableDragEvents","isNotVisible","pinnedOffset","pinnedPosition","sectionIndex","sectionLength","gridHasFiller","onClick","onDoubleClick","onMouseDown","onMouseUp","onMouseOver","onKeyDown","onKeyUp","onDragEnter","onDragOver"],wae=["changeReason","unstable_updateValueOnRender"];let Qu=function(e){return e[e.NONE=0]="NONE",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.VIRTUAL=3]="VIRTUAL",e}({});const MG={[Qu.LEFT]:Oi.LEFT,[Qu.RIGHT]:Oi.RIGHT,[Qu.NONE]:void 0,[Qu.VIRTUAL]:void 0},Gj={id:-1,field:"__unset__",row:{},rowNode:{id:-1,depth:0,type:"leaf",parent:-1,groupingKey:null},colDef:{type:"string",field:"__unset__",computedWidth:0},cellMode:pi.View,hasFocus:!1,tabIndex:-1,value:null,formattedValue:"__unset__",isEditable:!1,api:{}},xae=e=>{const{align:t,showLeftBorder:n,showRightBorder:r,pinnedPosition:o,isEditable:i,isSelected:l,isSelectionMode:c,classes:f}=e,p={root:["cell",`cell--text${tn(t)}`,l&&"selected",i&&"cell--editable",n&&"cell--withLeftBorder",r&&"cell--withRightBorder",o===Qu.LEFT&&"cell--pinnedLeft",o===Qu.RIGHT&&"cell--pinnedRight",c&&!i&&"cell--selectionMode"]};return An(p,ho,f)},Cae=No(function(t,n){var Yt,xt,Et;const{column:r,rowId:o,editCellState:i,align:l,colIndex:c,width:f,className:p,style:g,colSpan:v,disableDragEvents:w,isNotVisible:C,pinnedOffset:T,pinnedPosition:k,sectionIndex:P,sectionLength:O,gridHasFiller:L,onClick:D,onDoubleClick:N,onMouseDown:F,onMouseUp:B,onMouseOver:V,onKeyDown:G,onKeyUp:q,onDragEnter:z,onDragOver:$}=t,K=sr(t,bae),te=Jr(),re=er(),oe=Zc(),ue=r.field,Q=un(te,()=>{if(!te.current.getRow(o))return Gj;const kt=te.current.getCellParams(o,ue);return kt.api=te.current,kt},_8),ce=un(te,()=>te.current.unstable_applyPipeProcessors("isCellSelected",!1,{id:o,field:ue})),ae=un(te,SG),fe=un(te,Tie),{cellMode:le,hasFocus:pe,isEditable:Fe=!1,value:Be}=Q,Ze=r.type==="actions"&&((Yt=r.getActions)==null?void 0:Yt.call(r,te.current.getRowParams(o)).some(St=>!St.props.disabled)),it=(le==="view"||!Fe)&&!Ze?Q.tabIndex:-1,{classes:ot,getCellClassName:ut}=re,ct=[un(te,()=>te.current.unstable_applyPipeProcessors("cellClassName",[],{id:o,field:ue}).filter(Boolean).join(" "))];r.cellClassName&&ct.push(typeof r.cellClassName=="function"?r.cellClassName(Q):r.cellClassName),r.display==="flex"&&ct.push(Ke["cell--flex"]),ut&&ct.push(ut(Q));const Ae=Q.formattedValue??Be,Z=A.useRef(null),ne=yi(n,Z),ee=A.useRef(null),ye=re.cellSelection??!1,Ie=MG[k],ge=TA(Ie,P),$e=EA(Ie,P,O,re.showCellVerticalBorder,L),nt={align:l,showLeftBorder:ge,showRightBorder:$e,isEditable:Fe,classes:re.classes,pinnedPosition:k,isSelected:ce,isSelectionMode:ye},pt=xae(nt),wt=A.useCallback(St=>kt=>{const cn=te.current.getCellParams(o,ue||"");te.current.publishEvent(St,cn,kt),B&&B(kt)},[te,ue,B,o]),mt=A.useCallback(St=>kt=>{const cn=te.current.getCellParams(o,ue||"");te.current.publishEvent(St,cn,kt),F&&F(kt)},[te,ue,F,o]),zt=A.useCallback((St,kt)=>cn=>{if(!te.current.getRow(o))return;const an=te.current.getCellParams(o,ue||"");te.current.publishEvent(St,an,cn),kt&&kt(cn)},[te,ue,o]),Pt=((xt=ae[o])==null?void 0:xt[ue])??!1,Zt=((Et=fe[o])==null?void 0:Et[ue])??1,We=A.useMemo(()=>{if(C)return{padding:0,opacity:0,width:0,height:0,border:0};const St=we({"--width":`${f}px`},g),kt=k===Qu.LEFT,cn=k===Qu.RIGHT;if(kt||cn){let an=kt?"left":"right";oe&&(an=kt?"right":"left"),St[an]=T}return Zt>1&&(St.height=`calc(var(--height) * ${Zt})`,St.zIndex=5,(kt||cn)&&(St.zIndex=6)),St},[f,C,g,T,k,oe,Zt]);if(A.useEffect(()=>{if(!pe||le===pi.Edit)return;const St=ka(te.current.rootElementRef.current);if(Z.current&&!Z.current.contains(St.activeElement)){const kt=Z.current.querySelector('[tabindex="0"]'),cn=ee.current||kt||Z.current;if(_ae())cn.focus({preventScroll:!0});else{const an=te.current.getScrollPosition();cn.focus(),te.current.scroll(an)}}},[pe,le,te]),Pt)return ie.jsx("div",{"data-colindex":c,role:"presentation",style:we({width:"var(--width)"},We)});if(Q===Gj)return null;let Ge=K.onFocus,Rt,Dt;if(i===null&&r.renderCell&&(Rt=r.renderCell(Q)),i!==null&&r.renderEditCell){const St=te.current.getRowWithUpdatedValues(o,r.field),kt=sr(i,wae),cn=r.valueFormatter?r.valueFormatter(i.value,St,r,te):Q.formattedValue,an=we({},Q,{row:St,formattedValue:cn},kt);Rt=r.renderEditCell(an),ct.push(Ke["cell--editing"]),ct.push(ot==null?void 0:ot["cell--editing"])}if(Rt===void 0){const St=Ae==null?void 0:Ae.toString();Rt=St,Dt=St}A.isValidElement(Rt)&&Ze&&(Rt=A.cloneElement(Rt,{focusElementRef:ee}));const qt=w?null:{onDragEnter:zt("cellDragEnter",z),onDragOver:zt("cellDragOver",$)};return ie.jsx("div",we({className:fn(pt.root,ct,p),role:"gridcell","data-field":ue,"data-colindex":c,"aria-colindex":c+1,"aria-colspan":v,"aria-rowspan":Zt,style:We,title:Dt,tabIndex:it,onClick:zt("cellClick",D),onDoubleClick:zt("cellDoubleClick",N),onMouseOver:zt("cellMouseOver",V),onMouseDown:mt("cellMouseDown"),onMouseUp:wt("cellMouseUp"),onKeyDown:zt("cellKeyDown",G),onKeyUp:zt("cellKeyUp",q)},qt,K,{onFocus:Ge,ref:ne,children:Rt}))}),Sae=uy(Cae);function Eae(e){return Rr("MuiDivider",e)}const Wj=Ar("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),Tae=e=>{const{absolute:t,children:n,classes:r,flexItem:o,light:i,orientation:l,textAlign:c,variant:f}=e;return An({root:["root",t&&"absolute",f,i&&"light",l==="vertical"&&"vertical",o&&"flexItem",n&&"withChildren",n&&l==="vertical"&&"withChildrenVertical",c==="right"&&l!=="vertical"&&"textAlignRight",c==="left"&&l!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",l==="vertical"&&"wrapperVertical"]},Eae,r)},Iae=sn("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(mr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:jr(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),kae=sn("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(mr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),DD=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiDivider"}),{absolute:o=!1,children:i,className:l,orientation:c="horizontal",component:f=i||c==="vertical"?"div":"hr",flexItem:p=!1,light:g=!1,role:v=f!=="hr"?"separator":void 0,textAlign:w="center",variant:C="fullWidth",...T}=r,k={...r,absolute:o,component:f,flexItem:p,light:g,orientation:c,role:v,textAlign:w,variant:C},P=Tae(k);return ie.jsx(Iae,{as:f,className:fn(P.root,l),role:v,ref:n,ownerState:k,"aria-orientation":v==="separator"&&(f!=="hr"||c==="vertical")?c:void 0,...T,children:i?ie.jsx(kae,{className:P.wrapper,ownerState:k,children:i}):null})});DD&&(DD.muiSkipListHighlight=!0);function Pae(e){return Rr("MuiListItemIcon",e)}const Kj=Ar("MuiListItemIcon",["root","alignItemsFlexStart"]),Aae=e=>{const{alignItems:t,classes:n}=e;return An({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},Pae,n)},Mae=sn("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(mr(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),qw=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiListItemIcon"}),{className:o,...i}=r,l=A.useContext(sS),c={...r,alignItems:l.alignItems},f=Aae(c);return ie.jsx(Mae,{className:fn(f.root,o),ownerState:c,ref:n,...i})});function Rae(e){return Rr("MuiTypography",e)}const Yj=Ar("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Oae={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Dae=pee(),Lae=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:i,classes:l}=e,c={root:["root",i,e.align!=="inherit"&&`align${tn(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return An(c,Rae,l)},Nae=sn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${tn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(mr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(Ia()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${tn(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),Zj={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},bf=A.forwardRef(function(t,n){const{color:r,...o}=Kr({props:t,name:"MuiTypography"}),i=!Oae[r],l=Dae({...o,...i&&{color:r}}),{align:c="inherit",className:f,component:p,gutterBottom:g=!1,noWrap:v=!1,paragraph:w=!1,variant:C="body1",variantMapping:T=Zj,...k}=l,P={...l,align:c,color:r,className:f,component:p,gutterBottom:g,noWrap:v,paragraph:w,variant:C,variantMapping:T},O=p||(w?"p":T[C]||Zj[C])||"span",L=Lae(P);return ie.jsx(Nae,{as:O,ref:n,className:fn(L.root,f),...k,ownerState:P,style:{...c!=="inherit"&&{"--Typography-textAlign":c},...k.style}})});function Fae(e){return Rr("MuiListItemText",e)}const Sw=Ar("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),zae=e=>{const{classes:t,inset:n,primary:r,secondary:o,dense:i}=e;return An({root:["root",n&&"inset",i&&"dense",r&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},Fae,t)},Bae=sn("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Sw.primary}`]:t.primary},{[`& .${Sw.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${Yj.root}:where(& .${Sw.primary})`]:{display:"block"},[`.${Yj.root}:where(& .${Sw.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Gw=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiListItemText"}),{children:o,className:i,disableTypography:l=!1,inset:c=!1,primary:f,primaryTypographyProps:p,secondary:g,secondaryTypographyProps:v,slots:w={},slotProps:C={},...T}=r,{dense:k}=A.useContext(sS);let P=f??o,O=g;const L={...r,disableTypography:l,inset:c,primary:!!P,secondary:!!O,dense:k},D=zae(L),N={slots:w,slotProps:{primary:p,secondary:v,...C}},[F,B]=Di("primary",{className:D.primary,elementType:bf,externalForwardedProps:N,ownerState:L}),[V,G]=Di("secondary",{className:D.secondary,elementType:bf,externalForwardedProps:N,ownerState:L});return P!=null&&P.type!==bf&&!l&&(P=ie.jsx(F,{variant:k?"body2":"body1",component:B!=null&&B.variant?void 0:"span",...B,children:P})),O!=null&&O.type!==bf&&!l&&(O=ie.jsx(V,{variant:"body2",color:"textSecondary",...G,children:O})),ie.jsxs(Bae,{className:fn(D.root,i),ownerState:L,ref:n,...T,children:[P,O]})});function Uae(e){return Rr("MuiMenuItem",e)}const lC=Ar("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),jae=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},$ae=e=>{const{disabled:t,dense:n,divider:r,disableGutters:o,selected:i,classes:l}=e,f=An({root:["root",n&&"dense",t&&"disabled",!o&&"gutters",r&&"divider",i&&"selected"]},Uae,l);return{...l,...f}},Hae=sn(vx,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:jae})(mr(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${lC.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:jr(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${lC.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:jr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${lC.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:jr(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:jr(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${lC.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${lC.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Wj.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Wj.inset}`]:{marginLeft:52},[`& .${Sw.root}`]:{marginTop:0,marginBottom:0},[`& .${Sw.inset}`]:{paddingLeft:36},[`& .${Kj.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${Kj.root} svg`]:{fontSize:"1.25rem"}}}]}))),Rd=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiMenuItem"}),{autoFocus:o=!1,component:i="li",dense:l=!1,divider:c=!1,disableGutters:f=!1,focusVisibleClassName:p,role:g="menuitem",tabIndex:v,className:w,...C}=r,T=A.useContext(sS),k=A.useMemo(()=>({dense:l||T.dense||!1,disableGutters:f}),[T.dense,l,f]),P=A.useRef(null);$i(()=>{o&&P.current&&P.current.focus()},[o]);const O={...r,dense:k.dense,divider:c,disableGutters:f},L=$ae(r),D=yi(P,n);let N;return r.disabled||(N=v!==void 0?v:-1),ie.jsx(sS.Provider,{value:k,children:ie.jsx(Hae,{ref:D,role:g,tabIndex:N,component:i,focusVisibleClassName:fn(L.focusVisible,p),className:fn(L.root,w),...C,ownerState:O,classes:L})})});function Vae(e){return Rr("MuiSkeleton",e)}Ar("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const qae=e=>{const{classes:t,variant:n,animation:r,hasChildren:o,width:i,height:l}=e;return An({root:["root",n,r,o&&"withChildren",o&&!i&&"fitContent",o&&!l&&"heightAuto"]},Vae,t)},LD=qf`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,ND=qf`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,Gae=typeof LD!="string"?ly`
        animation: ${LD} 2s ease-in-out 0.5s infinite;
      `:null,Wae=typeof ND!="string"?ly`
        &::after {
          animation: ${ND} 2s linear 0.5s infinite;
        }
      `:null,Kae=sn("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(mr(({theme:e})=>{const t=aee(e.shape.borderRadius)||"px",n=see(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:jr(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${t}/${Math.round(n/.6*10)/10}${t}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:r})=>r.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:r})=>r.hasChildren&&!r.width,style:{maxWidth:"fit-content"}},{props:({ownerState:r})=>r.hasChildren&&!r.height,style:{height:"auto"}},{props:{animation:"pulse"},style:Gae||{animation:`${LD} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:Wae||{"&::after":{animation:`${ND} 2s linear 0.5s infinite`}}}]}})),Yae=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiSkeleton"}),{animation:o="pulse",className:i,component:l="span",height:c,style:f,variant:p="text",width:g,...v}=r,w={...r,animation:o,component:l,variant:p,hasChildren:!!v.children},C=qae(w);return ie.jsx(Kae,{as:l,ref:n,className:fn(C.root,i),ownerState:w,...v,style:{width:g,height:c,...f}})}),Zae=["field","type","align","width","height","empty","style","className"],Xj="1.3em",Xae="1.2em",Qj=[40,80],Qae={number:[40,60],string:[40,80],date:[40,60],dateTime:[60,80],singleSelect:[40,80]},Jae=e=>{const{align:t,classes:n,empty:r}=e,o={root:["cell","cellSkeleton",`cell--text${t?tn(t):"Left"}`,r&&"cellEmpty"]};return An(o,ho,n)},ese=Oee(12345);function tse(e){const{field:t,type:n,align:r,width:o,height:i,empty:l=!1,style:c,className:f}=e,p=sr(e,Zae),v={classes:er().classes,align:r,empty:l},w=Jae(v),C=A.useMemo(()=>{if(n==="boolean"||n==="actions")return{variant:"circular",width:Xj,height:Xj};const[k,P]=n?Qae[n]??Qj:Qj;return{variant:"text",width:`${Math.round(ese(k,P))}%`,height:Xae}},[n]);return ie.jsx("div",we({"data-field":t,className:fn(w.root,f),style:we({height:i,maxWidth:o,minWidth:o},c)},p,{children:!l&&ie.jsx(Yae,we({},C))}))}const nse=uy(tse);function rse(e){return e.vars?e.vars.palette.TableCell.border:e.palette.mode==="light"?Fx(jr(e.palette.divider,1),.88):Nx(jr(e.palette.divider,1),.68)}const Jj={[`& .${Ke.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${Ke.menuIcon}`]:{width:"auto",visibility:"visible"}},ose=10,pT=-5,Nb=1,e$={width:3,rx:1.5,x:10.5},ise="/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */",ase=sn("div",{name:"MuiDataGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${Ke.autoHeight}`]:t.autoHeight},{[`&.${Ke.aggregationColumnHeader}`]:t.aggregationColumnHeader},{[`&.${Ke["aggregationColumnHeader--alignLeft"]}`]:t["aggregationColumnHeader--alignLeft"]},{[`&.${Ke["aggregationColumnHeader--alignCenter"]}`]:t["aggregationColumnHeader--alignCenter"]},{[`&.${Ke["aggregationColumnHeader--alignRight"]}`]:t["aggregationColumnHeader--alignRight"]},{[`&.${Ke.aggregationColumnHeaderLabel}`]:t.aggregationColumnHeaderLabel},{[`&.${Ke["root--disableUserSelection"]} .${Ke.cell}`]:t["root--disableUserSelection"]},{[`&.${Ke.autosizing}`]:t.autosizing},{[`& .${Ke.editBooleanCell}`]:t.editBooleanCell},{[`& .${Ke.cell}`]:t.cell},{[`& .${Ke["cell--editing"]}`]:t["cell--editing"]},{[`& .${Ke["cell--textCenter"]}`]:t["cell--textCenter"]},{[`& .${Ke["cell--textLeft"]}`]:t["cell--textLeft"]},{[`& .${Ke["cell--textRight"]}`]:t["cell--textRight"]},{[`& .${Ke["cell--rangeTop"]}`]:t["cell--rangeTop"]},{[`& .${Ke["cell--rangeBottom"]}`]:t["cell--rangeBottom"]},{[`& .${Ke["cell--rangeLeft"]}`]:t["cell--rangeLeft"]},{[`& .${Ke["cell--rangeRight"]}`]:t["cell--rangeRight"]},{[`& .${Ke["cell--withRightBorder"]}`]:t["cell--withRightBorder"]},{[`& .${Ke.cellCheckbox}`]:t.cellCheckbox},{[`& .${Ke.cellSkeleton}`]:t.cellSkeleton},{[`& .${Ke.checkboxInput}`]:t.checkboxInput},{[`& .${Ke["columnHeader--alignCenter"]}`]:t["columnHeader--alignCenter"]},{[`& .${Ke["columnHeader--alignLeft"]}`]:t["columnHeader--alignLeft"]},{[`& .${Ke["columnHeader--alignRight"]}`]:t["columnHeader--alignRight"]},{[`& .${Ke["columnHeader--dragging"]}`]:t["columnHeader--dragging"]},{[`& .${Ke["columnHeader--moving"]}`]:t["columnHeader--moving"]},{[`& .${Ke["columnHeader--numeric"]}`]:t["columnHeader--numeric"]},{[`& .${Ke["columnHeader--sortable"]}`]:t["columnHeader--sortable"]},{[`& .${Ke["columnHeader--sorted"]}`]:t["columnHeader--sorted"]},{[`& .${Ke["columnHeader--withRightBorder"]}`]:t["columnHeader--withRightBorder"]},{[`& .${Ke.columnHeader}`]:t.columnHeader},{[`& .${Ke.headerFilterRow}`]:t.headerFilterRow},{[`& .${Ke.columnHeaderCheckbox}`]:t.columnHeaderCheckbox},{[`& .${Ke.columnHeaderDraggableContainer}`]:t.columnHeaderDraggableContainer},{[`& .${Ke.columnHeaderTitleContainer}`]:t.columnHeaderTitleContainer},{[`& .${Ke["columnSeparator--resizable"]}`]:t["columnSeparator--resizable"]},{[`& .${Ke["columnSeparator--resizing"]}`]:t["columnSeparator--resizing"]},{[`& .${Ke.columnSeparator}`]:t.columnSeparator},{[`& .${Ke.filterIcon}`]:t.filterIcon},{[`& .${Ke.iconSeparator}`]:t.iconSeparator},{[`& .${Ke.menuIcon}`]:t.menuIcon},{[`& .${Ke.menuIconButton}`]:t.menuIconButton},{[`& .${Ke.menuOpen}`]:t.menuOpen},{[`& .${Ke.menuList}`]:t.menuList},{[`& .${Ke["row--editable"]}`]:t["row--editable"]},{[`& .${Ke["row--editing"]}`]:t["row--editing"]},{[`& .${Ke["row--dragging"]}`]:t["row--dragging"]},{[`& .${Ke.row}`]:t.row},{[`& .${Ke.rowReorderCellPlaceholder}`]:t.rowReorderCellPlaceholder},{[`& .${Ke.rowReorderCell}`]:t.rowReorderCell},{[`& .${Ke["rowReorderCell--draggable"]}`]:t["rowReorderCell--draggable"]},{[`& .${Ke.sortIcon}`]:t.sortIcon},{[`& .${Ke.withBorderColor}`]:t.withBorderColor},{[`& .${Ke.treeDataGroupingCell}`]:t.treeDataGroupingCell},{[`& .${Ke.treeDataGroupingCellToggle}`]:t.treeDataGroupingCellToggle},{[`& .${Ke.treeDataGroupingCellLoadingContainer}`]:t.treeDataGroupingCellLoadingContainer},{[`& .${Ke.groupingCriteriaCellLoadingContainer}`]:t.groupingCriteriaCellLoadingContainer},{[`& .${Ke.detailPanelToggleCell}`]:t.detailPanelToggleCell},{[`& .${Ke["detailPanelToggleCell--expanded"]}`]:t["detailPanelToggleCell--expanded"]},t.root]})(({theme:e})=>{var G,q;const t=Hd(),n=un(t,Ql),r=rse(e),o=e.shape.borderRadius,i=e.vars?e.vars.palette.background.default:((G=e.mixins.MuiDataGrid)==null?void 0:G.containerBackground)??e.palette.background.default,l=((q=e.mixins.MuiDataGrid)==null?void 0:q.pinnedBackground)??i,c=e.vars?`rgba(${e.vars.palette.background.defaultChannel} / ${e.vars.palette.action.disabledOpacity})`:jr(e.palette.background.default,e.palette.action.disabledOpacity),f=(e.vars||e).palette.action.hoverOpacity,p=(e.vars||e).palette.action.hover,g=(e.vars||e).palette.action.selectedOpacity,v=e.vars?`calc(${f} + ${g})`:f+g,w=e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${g})`:jr(e.palette.primary.main,g),C=e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${v})`:jr(e.palette.primary.main,v),T=e.vars?use:sse,k=z=>({[`& .${Ke["cell--pinnedLeft"]}, & .${Ke["cell--pinnedRight"]}`]:{backgroundColor:z,"&.Mui-selected":{backgroundColor:T(z,w,g),"&:hover":{backgroundColor:T(z,w,v)}}}}),P=T(l,p,f),O=k(P),L=T(l,w,g),D=k(L),N=T(l,C,v),F=k(N),B={backgroundColor:w,"&:hover":{backgroundColor:C,"@media (hover: none)":{backgroundColor:w}}};return we({"--unstable_DataGrid-radius":typeof o=="number"?`${o}px`:o,"--unstable_DataGrid-headWeight":e.typography.fontWeightMedium,"--unstable_DataGrid-overlayBackground":c,"--DataGrid-containerBackground":i,"--DataGrid-pinnedBackground":l,"--DataGrid-rowBorderColor":r,"--DataGrid-cellOffsetMultiplier":2,"--DataGrid-width":"0px","--DataGrid-hasScrollX":"0","--DataGrid-hasScrollY":"0","--DataGrid-scrollbarSize":"10px","--DataGrid-rowWidth":"0px","--DataGrid-columnsTotalWidth":"0px","--DataGrid-leftPinnedWidth":"0px","--DataGrid-rightPinnedWidth":"0px","--DataGrid-headerHeight":"0px","--DataGrid-headersTotalHeight":"0px","--DataGrid-topContainerHeight":"0px","--DataGrid-bottomContainerHeight":"0px",flex:1,boxSizing:"border-box",position:"relative",borderWidth:"1px",borderStyle:"solid",borderColor:r,borderRadius:"var(--unstable_DataGrid-radius)",color:(e.vars||e).palette.text.primary},e.typography.body2,{outline:"none",height:"100%",display:"flex",minWidth:0,minHeight:0,flexDirection:"column",overflow:"hidden",overflowAnchor:"none",[`.${Ke.main} > *:first-child${ise}`]:{borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"},[`&.${Ke.autoHeight}`]:{height:"auto"},[`&.${Ke.autosizing}`]:{[`& .${Ke.columnHeaderTitleContainerContent} > *`]:{overflow:"visible !important"},"@media (hover: hover)":{[`& .${Ke.iconButtonContainer}`]:{width:"0 !important",visibility:"hidden !important"},[`& .${Ke.menuIcon}`]:{width:"0 !important",visibility:"hidden !important"}},[`& .${Ke.cell}`]:{overflow:"visible !important",whiteSpace:"nowrap",minWidth:"max-content !important",maxWidth:"max-content !important"},[`& .${Ke.groupingCriteriaCell}`]:{width:"unset"},[`& .${Ke.treeDataGroupingCell}`]:{width:"unset"}},[`& .${Ke.columnHeader}, & .${Ke.cell}`]:{WebkitTapHighlightColor:"transparent",padding:"0 10px",boxSizing:"border-box"},[`& .${Ke.columnHeader}:focus-within, & .${Ke.cell}:focus-within`]:{outline:`solid ${e.vars?`rgba(${e.vars.palette.primary.mainChannel} / 0.5)`:jr(e.palette.primary.main,.5)} ${Nb}px`,outlineOffset:Nb*-1},[`& .${Ke.columnHeader}:focus, & .${Ke.cell}:focus`]:{outline:`solid ${e.palette.primary.main} ${Nb}px`,outlineOffset:Nb*-1},[`& .${Ke.columnHeader}:focus,
      & .${Ke["columnHeader--withLeftBorder"]},
      & .${Ke["columnHeader--withRightBorder"]},
      & .${Ke["columnHeader--siblingFocused"]},
      & .${Ke["virtualScroller--hasScrollX"]} .${Ke["columnHeader--lastUnpinned"]},
      & .${Ke["virtualScroller--hasScrollX"]} .${Ke["columnHeader--last"]}
      `]:{[`& .${Ke.columnSeparator}`]:{opacity:0},"@media (hover: none)":{[`& .${Ke["columnSeparator--resizable"]}`]:{opacity:1}},[`& .${Ke["columnSeparator--resizable"]}:hover`]:{opacity:1}},[`&.${Ke["root--noToolbar"]} [aria-rowindex="1"] [aria-colindex="1"]`]:{borderTopLeftRadius:"calc(var(--unstable_DataGrid-radius) - 1px)"},[`&.${Ke["root--noToolbar"]} [aria-rowindex="1"] .${Ke["columnHeader--last"]}`]:{borderTopRightRadius:n.hasScrollX&&(!n.hasScrollY||n.scrollbarSize===0)?"calc(var(--unstable_DataGrid-radius) - 1px)":void 0},[`& .${Ke.columnHeaderCheckbox}, & .${Ke.cellCheckbox}`]:{padding:0,justifyContent:"center",alignItems:"center"},[`& .${Ke.columnHeader}`]:{position:"relative",display:"flex",alignItems:"center"},[`& .${Ke["virtualScroller--hasScrollX"]} .${Ke["columnHeader--last"]}`]:{overflow:"hidden"},[`& .${Ke["columnHeader--sorted"]} .${Ke.iconButtonContainer}, & .${Ke["columnHeader--filtered"]} .${Ke.iconButtonContainer}`]:{visibility:"visible",width:"auto"},[`& .${Ke.columnHeader}:not(.${Ke["columnHeader--sorted"]}) .${Ke.sortIcon}`]:{opacity:0,transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.shorter})},[`& .${Ke.columnHeaderTitleContainer}`]:{display:"flex",alignItems:"center",gap:e.spacing(.25),minWidth:0,flex:1,whiteSpace:"nowrap",overflow:"hidden"},[`& .${Ke.columnHeaderTitleContainerContent}`]:{overflow:"hidden",display:"flex",alignItems:"center"},[`& .${Ke["columnHeader--filledGroup"]} .${Ke.columnHeaderTitleContainer}`]:{borderBottomWidth:"1px",borderBottomStyle:"solid",boxSizing:"border-box"},[`& .${Ke.sortIcon}, & .${Ke.filterIcon}`]:{fontSize:"inherit"},[`& .${Ke["columnHeader--sortable"]}`]:{cursor:"pointer"},[`& .${Ke["columnHeader--alignCenter"]} .${Ke.columnHeaderTitleContainer}`]:{justifyContent:"center"},[`& .${Ke["columnHeader--alignRight"]} .${Ke.columnHeaderDraggableContainer}, & .${Ke["columnHeader--alignRight"]} .${Ke.columnHeaderTitleContainer}`]:{flexDirection:"row-reverse"},[`& .${Ke["columnHeader--alignCenter"]} .${Ke.menuIcon}`]:{marginLeft:"auto"},[`& .${Ke["columnHeader--alignRight"]} .${Ke.menuIcon}`]:{marginRight:"auto",marginLeft:-5},[`& .${Ke["columnHeader--moving"]}`]:{backgroundColor:(e.vars||e).palette.action.hover},[`& .${Ke["columnHeader--pinnedLeft"]}, & .${Ke["columnHeader--pinnedRight"]}`]:{position:"sticky",zIndex:4,background:"var(--DataGrid-pinnedBackground)"},[`& .${Ke.columnSeparator}`]:{position:"absolute",overflow:"hidden",zIndex:3,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:ose,color:r},[`& .${Ke.columnHeaders}`]:{width:"var(--DataGrid-rowWidth)"},"@media (hover: hover)":{[`& .${Ke.columnHeader}:hover`]:Jj,[`& .${Ke.columnHeader}:not(.${Ke["columnHeader--sorted"]}):hover .${Ke.sortIcon}`]:{opacity:.5}},"@media (hover: none)":{[`& .${Ke.columnHeader}`]:Jj,[`& .${Ke.columnHeader}:focus,
        & .${Ke["columnHeader--siblingFocused"]}`]:{[`.${Ke["columnSeparator--resizable"]}`]:{color:(e.vars||e).palette.primary.main}}},[`& .${Ke["columnSeparator--sideLeft"]}`]:{left:pT},[`& .${Ke["columnSeparator--sideRight"]}`]:{right:pT},[`& .${Ke["columnHeader--withRightBorder"]} .${Ke["columnSeparator--sideLeft"]}`]:{left:pT-.5},[`& .${Ke["columnHeader--withRightBorder"]} .${Ke["columnSeparator--sideRight"]}`]:{right:pT-.5},[`& .${Ke["columnSeparator--resizable"]}`]:{cursor:"col-resize",touchAction:"none",[`&.${Ke["columnSeparator--resizing"]}`]:{color:(e.vars||e).palette.primary.main},"@media (hover: none)":{[`& .${Ke.iconSeparator} rect`]:e$},"@media (hover: hover)":{"&:hover":{color:(e.vars||e).palette.primary.main,[`& .${Ke.iconSeparator} rect`]:e$}},"& svg":{pointerEvents:"none"}},[`& .${Ke.iconSeparator}`]:{color:"inherit",transition:e.transitions.create(["color","width"],{duration:e.transitions.duration.shortest})},[`& .${Ke.menuIcon}`]:{width:0,visibility:"hidden",fontSize:20,marginRight:-5,display:"flex",alignItems:"center"},[`.${Ke.menuOpen}`]:{visibility:"visible",width:"auto"},[`& .${Ke.headerFilterRow}`]:{[`& .${Ke.columnHeader}`]:{boxSizing:"border-box",borderBottom:"1px solid var(--DataGrid-rowBorderColor)"}},[`& .${Ke["row--borderBottom"]} .${Ke.columnHeader},
      & .${Ke["row--borderBottom"]} .${Ke.filler},
      & .${Ke["row--borderBottom"]} .${Ke.scrollbarFiller}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`& .${Ke["row--borderBottom"]} .${Ke.cell}`]:{borderBottom:"1px solid var(--rowBorderColor)"},[`.${Ke.row}`]:{display:"flex",width:"var(--DataGrid-rowWidth)",breakInside:"avoid","--rowBorderColor":"var(--DataGrid-rowBorderColor)",[`&.${Ke["row--firstVisible"]}`]:{"--rowBorderColor":"transparent"},"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ke.rowSkeleton}:hover`]:{backgroundColor:"transparent"},"&.Mui-selected":B},[`& .${Ke["container--top"]}, & .${Ke["container--bottom"]}`]:{"[role=row]":{background:"var(--DataGrid-containerBackground)"}},[`& .${Ke.cell}`]:{flex:"0 0 auto",height:"var(--height)",width:"var(--width)",lineHeight:"calc(var(--height) - 1px)",boxSizing:"border-box",borderTop:"1px solid var(--rowBorderColor)",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis","&.Mui-selected":B},[`& .${Ke["virtualScrollerContent--overflowed"]} .${Ke["row--lastVisible"]} .${Ke.cell}`]:{borderTopColor:"transparent"},[`& .${Ke["pinnedRows--top"]} :first-of-type`]:{[`& .${Ke.cell}, .${Ke.scrollbarFiller}`]:{borderTop:"none"}},[`&.${Ke["root--disableUserSelection"]} .${Ke.cell}`]:{userSelect:"none"},[`& .${Ke["row--dynamicHeight"]} > .${Ke.cell}`]:{whiteSpace:"initial",lineHeight:"inherit"},[`& .${Ke.cellEmpty}`]:{padding:0,height:"unset"},[`& .${Ke.cell}.${Ke["cell--selectionMode"]}`]:{cursor:"default"},[`& .${Ke.cell}.${Ke["cell--editing"]}`]:{padding:1,display:"flex",boxShadow:e.shadows[2],backgroundColor:(e.vars||e).palette.background.paper,"&:focus-within":{outline:`${Nb}px solid ${(e.vars||e).palette.primary.main}`,outlineOffset:Nb*-1}},[`& .${Ke["row--editing"]}`]:{boxShadow:e.shadows[2]},[`& .${Ke["row--editing"]} .${Ke.cell}`]:{boxShadow:e.shadows[0],backgroundColor:(e.vars||e).palette.background.paper},[`& .${Ke.editBooleanCell}`]:{display:"flex",height:"100%",width:"100%",alignItems:"center",justifyContent:"center"},[`& .${Ke.booleanCell}[data-value="true"]`]:{color:(e.vars||e).palette.text.secondary},[`& .${Ke.booleanCell}[data-value="false"]`]:{color:(e.vars||e).palette.text.disabled},[`& .${Ke.actionsCell}`]:{display:"inline-flex",alignItems:"center",gridGap:e.spacing(1)},[`& .${Ke.rowReorderCell}`]:{display:"inline-flex",flex:1,alignItems:"center",justifyContent:"center",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${Ke["rowReorderCell--draggable"]}`]:{cursor:"move",opacity:1},[`& .${Ke.rowReorderCellContainer}`]:{padding:0,display:"flex",alignItems:"stretch"},[`.${Ke.withBorderColor}`]:{borderColor:r},[`& .${Ke["cell--withLeftBorder"]}, & .${Ke["columnHeader--withLeftBorder"]}`]:{borderLeftColor:"var(--DataGrid-rowBorderColor)",borderLeftWidth:"1px",borderLeftStyle:"solid"},[`& .${Ke["cell--withRightBorder"]}, & .${Ke["columnHeader--withRightBorder"]}`]:{borderRightColor:"var(--DataGrid-rowBorderColor)",borderRightWidth:"1px",borderRightStyle:"solid"},[`& .${Ke["cell--flex"]}`]:{display:"flex",alignItems:"center",lineHeight:"inherit"},[`& .${Ke["cell--textLeft"]}`]:{textAlign:"left",justifyContent:"flex-start"},[`& .${Ke["cell--textRight"]}`]:{textAlign:"right",justifyContent:"flex-end"},[`& .${Ke["cell--textCenter"]}`]:{textAlign:"center",justifyContent:"center"},[`& .${Ke["cell--pinnedLeft"]}, & .${Ke["cell--pinnedRight"]}`]:{position:"sticky",zIndex:3,background:"var(--DataGrid-pinnedBackground)","&.Mui-selected":{backgroundColor:L}},[`& .${Ke.virtualScrollerContent} .${Ke.row}`]:{"&:hover":O,"&.Mui-selected":D,"&.Mui-selected:hover":F},[`& .${Ke.cellOffsetLeft}`]:{flex:"0 0 auto",display:"inline-block"},[`& .${Ke.cellSkeleton}`]:{flex:"0 0 auto",height:"100%",display:"inline-flex",alignItems:"center"},[`& .${Ke.columnHeaderDraggableContainer}`]:{display:"flex",width:"100%",height:"100%"},[`& .${Ke.rowReorderCellPlaceholder}`]:{display:"none"},[`& .${Ke["columnHeader--dragging"]}, & .${Ke["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity},[`& .${Ke["row--dragging"]}`]:{background:(e.vars||e).palette.background.paper,padding:"0 12px",borderRadius:"var(--unstable_DataGrid-radius)",opacity:(e.vars||e).palette.action.disabledOpacity,[`& .${Ke.rowReorderCellPlaceholder}`]:{display:"flex"}},[`& .${Ke.treeDataGroupingCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${Ke.treeDataGroupingCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`& .${Ke.treeDataGroupingCellLoadingContainer}, .${Ke.groupingCriteriaCellLoadingContainer}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},[`& .${Ke.groupingCriteriaCell}`]:{display:"flex",alignItems:"center",width:"100%"},[`& .${Ke.groupingCriteriaCellToggle}`]:{flex:"0 0 28px",alignSelf:"stretch",marginRight:e.spacing(2)},[`.${Ke.scrollbarFiller}`]:{minWidth:"calc(var(--DataGrid-hasScrollY) * var(--DataGrid-scrollbarSize))",alignSelf:"stretch",[`&.${Ke["scrollbarFiller--borderTop"]}`]:{borderTop:"1px solid var(--DataGrid-rowBorderColor)"},[`&.${Ke["scrollbarFiller--borderBottom"]}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`&.${Ke["scrollbarFiller--pinnedRight"]}`]:{backgroundColor:"var(--DataGrid-pinnedBackground)",position:"sticky",right:0}},[`& .${Ke.filler}`]:{flex:"1 0 auto"},[`& .${Ke["filler--borderBottom"]}`]:{borderBottom:"1px solid var(--DataGrid-rowBorderColor)"},[`& .${Ke["main--hasSkeletonLoadingOverlay"]}`]:{[`& .${Ke.virtualScrollerContent}`]:{position:"fixed",visibility:"hidden"},[`& .${Ke["scrollbar--vertical"]}, & .${Ke.pinnedRows}, & .${Ke.virtualScroller} > .${Ke.filler}`]:{display:"none"}}})});function sse(e,t,n,r=1){const o=(f,p)=>Math.round((f**(1/r)*(1-n)+p**(1/r)*n)**r),i=Lf(e),l=Lf(t),c=[o(i.values[0],l.values[0]),o(i.values[1],l.values[1]),o(i.values[2],l.values[2])];return VS({type:"rgb",values:c})}const lse=e=>`rgb(from ${e} r g b / 1)`;function use(e,t,n){return`color-mix(in srgb,${e}, ${lse(t)} calc(${n} * 100%))`}const cse=["className"],dse=(e,t)=>{const{autoHeight:n,classes:r,showCellVerticalBorder:o}=e,i={root:["root",n&&"autoHeight",`root--density${tn(t)}`,e.slots.toolbar===null&&"root--noToolbar","withBorderColor",o&&"withVerticalBorder"]};return An(i,ho,r)},hse=No(function(t,n){const r=er(),{className:o}=t,i=sr(t,cse),l=Hd(),c=un(l,xw),f=l.current.rootElementRef,p=yi(f,n),g=r,v=dse(g,c),[w,C]=A.useState(!1);return $i(()=>{C(!0)},[]),w?ie.jsx(ase,we({className:fn(v.root,o),ownerState:g},i,{ref:p})):null}),fse=["className"],pse=e=>{const{classes:t}=e;return An({root:["footerContainer","withBorderColor"]},ho,t)},mse=Ti("div",{name:"MuiDataGrid",slot:"FooterContainer",overridesResolver:(e,t)=>t.footerContainer})({display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:52,borderTop:"1px solid"}),gse=No(function(t,n){const{className:r}=t,o=sr(t,fse),i=er(),l=pse(i);return ie.jsx(mse,we({className:fn(l.root,r),ownerState:i},o,{ref:n}))}),yse=["className"],vse=e=>{const{classes:t}=e;return An({root:["overlay"]},ho,t)},_se=Ti("div",{name:"MuiDataGrid",slot:"Overlay",overridesResolver:(e,t)=>t.overlay})({width:"100%",height:"100%",display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center",backgroundColor:"var(--unstable_DataGrid-overlayBackground)"}),$F=No(function(t,n){const{className:r}=t,o=sr(t,yse),i=er(),l=vse(i);return ie.jsx(_se,we({className:fn(l.root,r),ownerState:i},o,{ref:n}))}),bse=e=>{const{classes:t,open:n}=e;return An({root:["menuIcon",n&&"menuOpen"],button:["menuIconButton"]},ho,t)},wse=A.memo(e=>{var v,w;const{colDef:t,open:n,columnMenuId:r,columnMenuButtonId:o,iconButtonRef:i}=e,l=Jr(),c=er(),f=we({},e,{classes:c.classes}),p=bse(f),g=A.useCallback(C=>{C.preventDefault(),C.stopPropagation(),l.current.toggleColumnMenu(t.field)},[l,t.field]);return ie.jsx("div",{className:p.root,children:ie.jsx(c.slots.baseTooltip,we({title:l.current.getLocaleText("columnMenuLabel"),enterDelay:1e3},(v=c.slotProps)==null?void 0:v.baseTooltip,{children:ie.jsx(c.slots.baseIconButton,we({ref:i,tabIndex:-1,className:p.button,"aria-label":l.current.getLocaleText("columnMenuLabel"),size:"small",onClick:g,"aria-haspopup":"menu","aria-expanded":n,"aria-controls":n?r:void 0,id:o},(w=c.slotProps)==null?void 0:w.baseIconButton,{children:ie.jsx(c.slots.columnMenuIcon,{fontSize:"inherit"})}))}))})});function xse({columnMenuId:e,columnMenuButtonId:t,ContentComponent:n,contentComponentProps:r,field:o,open:i,target:l,onExited:c}){const f=Jr(),p=f.current.getColumn(o),g=co(v=>{v&&(v.stopPropagation(),l!=null&&l.contains(v.target))||f.current.hideColumnMenu()});return!l||!p?null:ie.jsx(MF,{placement:`bottom-${p.align==="right"?"start":"end"}`,open:i,target:l,onClose:g,onExited:c,children:ie.jsx(n,we({colDef:p,hideMenu:g,open:i,id:e,labelledby:t},r))})}function Cse(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}function fk(e,t){return e.closest(`.${t}`)}function xm(e){return e.replace(/["\\]/g,"\\$&")}function Sse(e,t){return e.querySelector(`[role="columnheader"][data-field="${xm(t)}"]`)}function RG(e){return`.${Ke.row}[data-id="${xm(String(e))}"]`}function Ese(e,t){return e.querySelector(RG(t))}function Tse(e,{id:t,field:n}){const r=RG(t),o=`.${Ke.cell}[data-field="${xm(n)}"]`,i=`${r} ${o}`;return e.querySelector(i)}function nE(e){return e.target.nodeType===1&&!e.currentTarget.contains(e.target)}function Ise(e){return e.getAttribute("data-field")}function kse(e,t){return e.querySelector(`[data-field="${xm(t)}"]`)}function Pse(e){return e.getAttribute("data-fields").slice(2,-2).split("-|-")}function Ase(e,t){return Array.from(e.querySelectorAll(`[data-fields*="|-${xm(t)}-|"]`)??[])}function Mse(e,t){var l;if(!fk(e,Ke.root))throw new Error("MUI X: The root element is not found.");const r=e.getAttribute("aria-colindex");if(!r)return[];const o=Number(r)-1,i=[];return(l=t.virtualScrollerRef)!=null&&l.current?(LG(t).forEach(c=>{const f=c.getAttribute("data-id");if(!f)return;let p=o;const g=t.unstable_getCellColSpanInfo(f,o);g&&g.spannedByColSpan&&(p=g.leftVisibleCellIndex);const v=c.querySelector(`[data-colindex="${p}"]`);v&&i.push(v)}),i):[]}function t$(e,t){return e.rootElementRef.current.querySelector(`.${Ke[t]}`)}const OG=({api:e,colIndex:t,position:n,filterFn:r})=>{if(t===null)return[];const o=[];return LG(e).forEach(i=>{i.getAttribute("data-id")&&i.querySelectorAll(`.${Ke[n==="left"?"cell--pinnedLeft":"cell--pinnedRight"]}`).forEach(c=>{const f=Gx(c);f!==null&&r(f)&&o.push(c)})}),o};function Rse(e,t,n){const r=Gx(t);return OG({api:e,colIndex:r,position:n?"right":"left",filterFn:o=>n?o<r:o>r})}function Ose(e,t,n){const r=Gx(t);return OG({api:e,colIndex:r,position:n?"left":"right",filterFn:o=>n?o>r:o<r})}const DG=({api:e,colIndex:t,position:n,filterFn:r})=>{var i;if(!((i=e.columnHeadersContainerRef)!=null&&i.current))return[];if(t===null)return[];const o=[];return e.columnHeadersContainerRef.current.querySelectorAll(`.${Ke[n==="left"?"columnHeader--pinnedLeft":"columnHeader--pinnedRight"]}`).forEach(l=>{const c=Gx(l);c!==null&&r(c)&&o.push(l)}),o};function Dse(e,t,n){const r=Gx(t);return DG({api:e,position:n?"right":"left",colIndex:r,filterFn:o=>n?o<r:o>r})}function Lse(e,t,n){const r=Gx(t);return DG({api:e,position:n?"left":"right",colIndex:r,filterFn:o=>n?o>r:o<r})}function Nse(e,t){return e.columnHeadersContainerRef.current.querySelector(`:scope > div > [data-field="${xm(t)}"][role="columnheader"]`)}function Fse(e,t){const n=e.virtualScrollerRef.current;return Array.from(n.querySelectorAll(`:scope > div > div > div > [data-field="${xm(t)}"][role="gridcell"]`))}function LG(e){return e.virtualScrollerRef.current.querySelectorAll(`:scope > div > div > .${Ke.row}`)}function Gx(e){const t=e.getAttribute("aria-colindex");return t?Number(t)-1:null}const zse=["className","aria-label"],Bse=e=>{const{classes:t}=e;return An({root:["columnHeaderTitle"]},ho,t)},Use=Ti("div",{name:"MuiDataGrid",slot:"ColumnHeaderTitle",overridesResolver:(e,t)=>t.columnHeaderTitle})({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontWeight:"var(--unstable_DataGrid-headWeight)",lineHeight:"normal"}),jse=No(function(t,n){const{className:r}=t,o=sr(t,zse),i=er(),l=Bse(i);return ie.jsx(Use,we({className:fn(l.root,r),ownerState:i},o,{ref:n}))});function $se(e){var f;const{label:t,description:n}=e,r=er(),o=A.useRef(null),[i,l]=A.useState(""),c=A.useCallback(()=>{if(!n&&(o!=null&&o.current)){const p=Cse(o.current);l(p?t:"")}},[n,t]);return ie.jsx(r.slots.baseTooltip,we({title:n||i},(f=r.slotProps)==null?void 0:f.baseTooltip,{children:ie.jsx(jse,{onMouseOver:c,ref:o,children:t})}))}const Hse=["resizable","resizing","height","side"];var HF=function(e){return e.Left="left",e.Right="right",e}(HF||{});const Vse=e=>{const{resizable:t,resizing:n,classes:r,side:o}=e,i={root:["columnSeparator",t&&"columnSeparator--resizable",n&&"columnSeparator--resizing",o&&`columnSeparator--side${tn(o)}`],icon:["iconSeparator"]};return An(i,ho,r)};function qse(e){const{height:t,side:n=HF.Right}=e,r=sr(e,Hse),o=er(),i=we({},e,{side:n,classes:o.classes}),l=Vse(i),c=A.useCallback(f=>{f.preventDefault(),f.stopPropagation()},[]);return ie.jsx("div",we({className:l.root,style:{minHeight:t}},r,{onClick:c,children:ie.jsx(o.slots.columnResizeIcon,{className:l.icon})}))}const Gse=A.memo(qse),Wse=["classes","columnMenuOpen","colIndex","height","isResizing","sortDirection","hasFocus","tabIndex","separatorSide","isDraggable","headerComponent","description","elementId","width","columnMenuIconButton","columnMenu","columnTitleIconButtons","headerClassName","label","resizable","draggableContainerProps","columnHeaderSeparatorProps","style"],NG=No(function(t,n){const{classes:r,colIndex:o,height:i,isResizing:l,sortDirection:c,hasFocus:f,tabIndex:p,separatorSide:g,isDraggable:v,headerComponent:w,description:C,width:T,columnMenuIconButton:k=null,columnMenu:P=null,columnTitleIconButtons:O=null,headerClassName:L,label:D,resizable:N,draggableContainerProps:F,columnHeaderSeparatorProps:B,style:V}=t,G=sr(t,Wse),q=Hd(),z=er(),$=A.useRef(null),K=yi($,n);let te="none";return c!=null&&(te=c==="asc"?"ascending":"descending"),A.useLayoutEffect(()=>{var oe;const re=q.current.state.columnMenu;if(f&&!re.open){const Q=$.current.querySelector('[tabindex="0"]')||$.current;Q==null||Q.focus(),(oe=q.current.columnHeadersContainerRef)!=null&&oe.current&&(q.current.columnHeadersContainerRef.current.scrollLeft=0)}},[q,f]),ie.jsxs("div",we({className:fn(r.root,L),style:we({},V,{height:i,width:T}),role:"columnheader",tabIndex:p,"aria-colindex":o+1,"aria-sort":te},G,{ref:K,children:[ie.jsxs("div",we({className:r.draggableContainer,draggable:v,role:"presentation"},F,{children:[ie.jsxs("div",{className:r.titleContainer,role:"presentation",children:[ie.jsx("div",{className:r.titleContainerContent,children:w!==void 0?w:ie.jsx($se,{label:D,description:C,columnWidth:T})}),O]}),k]})),ie.jsx(Gse,we({resizable:!z.disableColumnResize&&!!N,resizing:l,height:i,side:g},B)),P]}))}),Kse=e=>{const{colDef:t,classes:n,isDragging:r,sortDirection:o,showRightBorder:i,showLeftBorder:l,filterItemsCounter:c,pinnedPosition:f,isLastUnpinned:p,isSiblingFocused:g}=e,v=o!=null,w=c!=null&&c>0,C=t.type==="number",T={root:["columnHeader",t.headerAlign==="left"&&"columnHeader--alignLeft",t.headerAlign==="center"&&"columnHeader--alignCenter",t.headerAlign==="right"&&"columnHeader--alignRight",t.sortable&&"columnHeader--sortable",r&&"columnHeader--moving",v&&"columnHeader--sorted",w&&"columnHeader--filtered",C&&"columnHeader--numeric","withBorderColor",i&&"columnHeader--withRightBorder",l&&"columnHeader--withLeftBorder",f==="left"&&"columnHeader--pinnedLeft",f==="right"&&"columnHeader--pinnedRight",p&&"columnHeader--lastUnpinned",g&&"columnHeader--siblingFocused"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer"],titleContainerContent:["columnHeaderTitleContainerContent"]};return An(T,ho,n)};function Yse(e){var st,ct,Ae;const{colDef:t,columnMenuOpen:n,colIndex:r,headerHeight:o,isResizing:i,isLast:l,sortDirection:c,sortIndex:f,filterItemsCounter:p,hasFocus:g,tabIndex:v,disableReorder:w,separatorSide:C,style:T,pinnedPosition:k,indexInSection:P,sectionLength:O,gridHasFiller:L}=e,D=Hd(),N=er(),F=A.useRef(null),B=Li(),V=Li(),G=A.useRef(null),[q,z]=A.useState(n),$=A.useMemo(()=>!N.disableColumnReorder&&!w&&!t.disableReorder,[N.disableColumnReorder,w,t.disableReorder]);let K;t.renderHeader&&(K=t.renderHeader(D.current.getColumnHeaderParams(t.field)));const te=TA(k,P),re=EA(k,P,O,N.showColumnVerticalBorder,L),oe=we({},e,{classes:N.classes,showRightBorder:re,showLeftBorder:te}),ue=Kse(oe),Q=A.useCallback(Z=>ne=>{nE(ne)||D.current.publishEvent(Z,D.current.getColumnHeaderParams(t.field),ne)},[D,t.field]),ce=A.useMemo(()=>({onClick:Q("columnHeaderClick"),onContextMenu:Q("columnHeaderContextMenu"),onDoubleClick:Q("columnHeaderDoubleClick"),onMouseOver:Q("columnHeaderOver"),onMouseOut:Q("columnHeaderOut"),onMouseEnter:Q("columnHeaderEnter"),onMouseLeave:Q("columnHeaderLeave"),onKeyDown:Q("columnHeaderKeyDown"),onFocus:Q("columnHeaderFocus"),onBlur:Q("columnHeaderBlur")}),[Q]),ae=A.useMemo(()=>$?{onDragStart:Q("columnHeaderDragStart"),onDragEnter:Q("columnHeaderDragEnter"),onDragOver:Q("columnHeaderDragOver"),onDragEnd:Q("columnHeaderDragEnd")}:{},[$,Q]),fe=A.useMemo(()=>({onMouseDown:Q("columnSeparatorMouseDown"),onDoubleClick:Q("columnSeparatorDoubleClick")}),[Q]);A.useEffect(()=>{q||z(n)},[q,n]);const le=A.useCallback(()=>{z(!1)},[]),pe=!N.disableColumnMenu&&!t.disableColumnMenu&&ie.jsx(wse,{colDef:t,columnMenuId:B,columnMenuButtonId:V,open:q,iconButtonRef:G}),Fe=ie.jsx(xse,{columnMenuId:B,columnMenuButtonId:V,field:t.field,open:n,target:G.current,ContentComponent:N.slots.columnMenu,contentComponentProps:(st=N.slotProps)==null?void 0:st.columnMenu,onExited:le}),Be=t.sortingOrder??N.sortingOrder,Ze=(t.sortable||c!=null)&&!t.hideSortIcons&&!N.disableColumnSorting,it=ie.jsxs(A.Fragment,{children:[!N.disableColumnFilter&&ie.jsx(N.slots.columnHeaderFilterIconButton,we({field:t.field,counter:p},(ct=N.slotProps)==null?void 0:ct.columnHeaderFilterIconButton)),Ze&&ie.jsx(N.slots.columnHeaderSortIcon,we({field:t.field,direction:c,index:f,sortingOrder:Be,disabled:!t.sortable},(Ae=N.slotProps)==null?void 0:Ae.columnHeaderSortIcon))]});A.useLayoutEffect(()=>{var ne;const Z=D.current.state.columnMenu;if(g&&!Z.open){const ye=F.current.querySelector('[tabindex="0"]')||F.current;ye==null||ye.focus(),(ne=D.current.columnHeadersContainerRef)!=null&&ne.current&&(D.current.columnHeadersContainerRef.current.scrollLeft=0)}},[D,g]);const ot=typeof t.headerClassName=="function"?t.headerClassName({field:t.field,colDef:t}):t.headerClassName,ut=t.headerName??t.field;return ie.jsx(NG,we({ref:F,classes:ue,columnMenuOpen:n,colIndex:r,height:o,isResizing:i,sortDirection:c,hasFocus:g,tabIndex:v,separatorSide:C,isDraggable:$,headerComponent:K,description:t.description,elementId:t.field,width:t.computedWidth,columnMenuIconButton:pe,columnTitleIconButtons:it,headerClassName:fn(ot,l&&Ke["columnHeader--last"]),label:ut,resizable:!N.disableColumnResize&&!!t.resizable,"data-field":t.field,columnMenu:Fe,draggableContainerProps:ae,columnHeaderSeparatorProps:fe,style:T},ce))}const Zse=uy(Yse),Xse=["className"],Qse=e=>{const{classes:t}=e;return An({root:["iconButtonContainer"]},ho,t)},Jse=Ti("div",{name:"MuiDataGrid",slot:"IconButtonContainer",overridesResolver:(e,t)=>t.iconButtonContainer})(()=>({display:"flex",visibility:"hidden",width:0})),FG=No(function(t,n){const{className:r}=t,o=sr(t,Xse),i=er(),l=Qse(i);return ie.jsx(Jse,we({className:fn(l.root,r),ownerState:i},o,{ref:n}))}),ele=["direction","index","sortingOrder","disabled"],tle=e=>{const{classes:t}=e;return An({icon:["sortIcon"]},ho,t)};function nle(e,t,n,r){let o;const i={};return t==="asc"?o=e.columnSortedAscendingIcon:t==="desc"?o=e.columnSortedDescendingIcon:(o=e.columnUnsortedIcon,i.sortingOrder=r),o?ie.jsx(o,we({fontSize:"small",className:n},i)):null}function rle(e){var w;const{direction:t,index:n,sortingOrder:r,disabled:o}=e,i=sr(e,ele),l=Jr(),c=er(),f=we({},e,{classes:c.classes}),p=tle(f),g=nle(c.slots,t,p.icon,r);if(!g)return null;const v=ie.jsx(c.slots.baseIconButton,we({tabIndex:-1,"aria-label":l.current.getLocaleText("columnHeaderSortIconLabel"),title:l.current.getLocaleText("columnHeaderSortIconLabel"),size:"small",disabled:o},(w=c.slotProps)==null?void 0:w.baseIconButton,i,{children:g}));return ie.jsxs(FG,{children:[n!=null&&ie.jsx(c.slots.baseBadge,{badgeContent:n,color:"default",overlap:"circular",children:v}),n==null&&v]})}const ole=A.memo(rle),ile=e=>{const{classes:t}=e;return An({icon:["filterIcon"]},ho,t)};function ale(e){var T,k;const{counter:t,field:n,onClick:r}=e,o=Jr(),i=er(),l=we({},e,{classes:i.classes}),c=ile(l),f=un(o,uS),p=Li(),g=Li(),v=A.useCallback(P=>{P.preventDefault(),P.stopPropagation();const{open:O,openedPanelValue:L}=uS(o.current.state);O&&L===l_.filters?o.current.hideFilterPanel():o.current.showFilterPanel(void 0,g,p),r&&r(o.current.getColumnHeaderParams(n),P)},[o,n,r,g,p]);if(!t)return null;const w=f.open&&f.labelId===p,C=ie.jsx(i.slots.baseIconButton,we({id:p,onClick:v,color:"default","aria-label":o.current.getLocaleText("columnHeaderFiltersLabel"),size:"small",tabIndex:-1,"aria-haspopup":"menu","aria-expanded":w,"aria-controls":w?g:void 0},(T=i.slotProps)==null?void 0:T.baseIconButton,{children:ie.jsx(i.slots.columnFilteredIcon,{className:c.icon,fontSize:"small"})}));return ie.jsx(i.slots.baseTooltip,we({title:o.current.getLocaleText("columnHeaderFiltersTooltipActive")(t),enterDelay:1e3},(k=i.slotProps)==null?void 0:k.baseTooltip,{children:ie.jsxs(FG,{children:[t>1&&ie.jsx(i.slots.baseBadge,{badgeContent:t,color:"default",children:C}),t===1&&C]})}))}const n$=fo(ie.jsx("path",{d:"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),r$=fo(ie.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),o$=fo(ie.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),i$=fo(ie.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),sle=fo(ie.jsx("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList"),a$=fo(ie.jsx("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt"),lle=fo(ie.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");fo(ie.jsx("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");fo(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");const ule=fo(ie.jsx("path",{d:"M6 5H3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm14 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1zm-7 0h-3c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h3c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1z"}),"ColumnIcon"),cle=fo(ie.jsx("rect",{width:"1",height:"24",x:"11.5",rx:"0.5"}),"Separator"),dle=fo(ie.jsx("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}),"ViewHeadline"),hle=fo(ie.jsx("path",{d:"M21,8H3V4h18V8z M21,10H3v4h18V10z M21,16H3v4h18V16z"}),"TableRows"),fle=fo(ie.jsx("path",{d:"M4 18h17v-6H4v6zM4 5v6h17V5H4z"}),"ViewStream"),ple=fo(ie.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"TripleDotsVertical"),ZM=fo(ie.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),s$=fo(ie.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add"),mle=fo(ie.jsx("path",{d:"M19 13H5v-2h14v2z"}),"Remove"),gle=fo(ie.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Load"),l$=fo(ie.jsx("path",{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"Drag"),yle=fo(ie.jsx("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"}),"SaveAlt"),vle=fo(ie.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),_le=fo(ie.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),ble=fo(ie.jsx("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff"),wle=fo(ie.jsx("g",{children:ie.jsx("path",{d:"M14.67,5v14H9.33V5H14.67z M15.67,19H21V5h-5.33V19z M8.33,19V5H3v14H8.33z"})}),"ViewColumn"),xle=fo(ie.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");fo(ie.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");const Cle=fo(ie.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");function zG(e){return e.key.length===1&&!e.ctrlKey&&!e.metaKey}const pk=e=>e.indexOf("Arrow")===0||e.indexOf("Page")===0||e===" "||e==="Home"||e==="End",Sle=e=>!!e.key,BG=e=>e==="Tab"||e==="Escape";function UG(e){return(e.ctrlKey||e.metaKey)&&String.fromCharCode(e.keyCode)==="V"&&!e.shiftKey&&!e.altKey}function Ele(e){return(e.ctrlKey||e.metaKey)&&String.fromCharCode(e.keyCode)==="C"&&!e.shiftKey&&!e.altKey}const Tle=["hideMenu","colDef","id","labelledby","className","children","open"],Ile=sn(hA)(()=>({minWidth:248})),kle=No(function(t,n){const{hideMenu:r,id:o,labelledby:i,className:l,children:c,open:f}=t,p=sr(t,Tle),g=A.useCallback(v=>{v.key==="Tab"&&v.preventDefault(),BG(v.key)&&r(v)},[r]);return ie.jsx(Ile,we({id:o,className:fn(Ke.menuList,l),"aria-labelledby":i,onKeyDown:g,autoFocus:f},p,{ref:n,children:c}))}),Ple=["displayOrder"],Ale=e=>{const t=Hd(),n=er(),{defaultSlots:r,defaultSlotProps:o,slots:i={},slotProps:l={},hideMenu:c,colDef:f,addDividers:p=!0}=e,g=A.useMemo(()=>we({},r,i),[r,i]),v=A.useMemo(()=>{if(!l||Object.keys(l).length===0)return o;const T=we({},l);return Object.entries(o).forEach(([k,P])=>{T[k]=we({},P,l[k]||{})}),T},[o,l]),w=t.current.unstable_applyPipeProcessors("columnMenu",[],e.colDef),C=A.useMemo(()=>{const T=Object.keys(r);return Object.keys(i).filter(k=>!T.includes(k))},[i,r]);return A.useMemo(()=>{const P=Array.from(new Set([...w,...C])).filter(O=>g[O]!=null).sort((O,L)=>{const D=v[O],N=v[L],F=Number.isFinite(D==null?void 0:D.displayOrder)?D.displayOrder:100,B=Number.isFinite(N==null?void 0:N.displayOrder)?N.displayOrder:100;return F-B});return P.reduce((O,L,D)=>{let N={colDef:f,onClick:c};const F=v[L];if(F){const B=sr(F,Ple);N=we({},N,B)}return p&&D!==P.length-1?[...O,[g[L],N],[n.slots.baseDivider,{}]]:[...O,[g[L],N]]},[])},[p,f,w,c,g,v,C,n.slots.baseDivider])};function Mle(e){const{colDef:t,onClick:n}=e,r=Jr(),o=er(),c=ss(r).filter(p=>p.disableColumnMenu!==!0).length===1,f=A.useCallback(p=>{c||(r.current.setColumnVisibility(t.field,!1),n(p))},[r,t.field,n,c]);return o.disableColumnSelector||t.hideable===!1?null:ie.jsxs(Rd,{onClick:f,disabled:c,children:[ie.jsx(qw,{children:ie.jsx(o.slots.columnMenuHideIcon,{fontSize:"small"})}),ie.jsx(Gw,{children:r.current.getLocaleText("columnMenuHideColumn")})]})}function Rle(e){const{onClick:t}=e,n=Jr(),r=er(),o=A.useCallback(i=>{t(i),n.current.showPreferences(l_.columns)},[n,t]);return r.disableColumnSelector?null:ie.jsxs(Rd,{onClick:o,children:[ie.jsx(qw,{children:ie.jsx(r.slots.columnMenuManageColumnsIcon,{fontSize:"small"})}),ie.jsx(Gw,{children:n.current.getLocaleText("columnMenuManageColumns")})]})}function Ole(e){return ie.jsxs(A.Fragment,{children:[ie.jsx(Mle,we({},e)),ie.jsx(Rle,we({},e))]})}function Dle(e){const{colDef:t,onClick:n}=e,r=Jr(),o=er(),i=A.useCallback(l=>{n(l),r.current.showFilterPanel(t.field)},[r,t.field,n]);return o.disableColumnFilter||!t.filterable?null:ie.jsxs(Rd,{onClick:i,children:[ie.jsx(qw,{children:ie.jsx(o.slots.columnMenuFilterIcon,{fontSize:"small"})}),ie.jsx(Gw,{children:r.current.getLocaleText("columnMenuFilter")})]})}function Lle(e){const{colDef:t,onClick:n}=e,r=Jr(),o=un(r,bd),i=er(),l=A.useMemo(()=>{if(!t)return null;const g=o.find(v=>v.field===t.field);return g==null?void 0:g.sort},[t,o]),c=t.sortingOrder??i.sortingOrder,f=A.useCallback(g=>{n(g);const v=g.currentTarget.getAttribute("data-value")||null;r.current.sortColumn(t.field,v===l?null:v)},[r,t,n,l]);if(i.disableColumnSorting||!t||!t.sortable||!c.some(g=>!!g))return null;const p=g=>{const v=r.current.getLocaleText(g);return typeof v=="function"?v(t):v};return ie.jsxs(A.Fragment,{children:[c.includes("asc")&&l!=="asc"?ie.jsxs(Rd,{onClick:f,"data-value":"asc",children:[ie.jsx(qw,{children:ie.jsx(i.slots.columnMenuSortAscendingIcon,{fontSize:"small"})}),ie.jsx(Gw,{children:p("columnMenuSortAsc")})]}):null,c.includes("desc")&&l!=="desc"?ie.jsxs(Rd,{onClick:f,"data-value":"desc",children:[ie.jsx(qw,{children:ie.jsx(i.slots.columnMenuSortDescendingIcon,{fontSize:"small"})}),ie.jsx(Gw,{children:p("columnMenuSortDesc")})]}):null,c.includes(null)&&l!=null?ie.jsxs(Rd,{onClick:f,children:[ie.jsx(qw,{}),ie.jsx(Gw,{children:r.current.getLocaleText("columnMenuUnsort")})]}):null]})}const Nle=["defaultSlots","defaultSlotProps","slots","slotProps"],Fle={columnMenuSortItem:Lle,columnMenuFilterItem:Dle,columnMenuColumnsItem:Ole},zle={columnMenuSortItem:{displayOrder:10},columnMenuFilterItem:{displayOrder:20},columnMenuColumnsItem:{displayOrder:30}},Ble=No(function(t,n){const{defaultSlots:r,defaultSlotProps:o,slots:i,slotProps:l}=t,c=sr(t,Nle),f=Ale(we({},c,{defaultSlots:r,defaultSlotProps:o,slots:i,slotProps:l}));return ie.jsx(kle,we({},c,{ref:n,children:f.map(([p,g],v)=>ie.jsx(p,we({},g),v))}))}),Ule=No(function(t,n){return ie.jsx(Ble,we({},t,{ref:n,defaultSlots:Fle,defaultSlotProps:zle}))}),jle=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function $le(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Hle(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function Vle(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Hle(e))}function qle(e){const t=[],n=[];return Array.from(e.querySelectorAll(jle)).forEach((r,o)=>{const i=$le(r);i===-1||!Vle(r)||(i===0?t.push(r):n.push({documentOrder:o,tabIndex:i,node:r}))}),n.sort((r,o)=>r.tabIndex===o.tabIndex?r.documentOrder-o.documentOrder:r.tabIndex-o.tabIndex).map(r=>r.node).concat(t)}function Gle(){return!0}function jG(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:o=!1,getTabbable:i=qle,isEnabled:l=Gle,open:c}=e,f=A.useRef(!1),p=A.useRef(null),g=A.useRef(null),v=A.useRef(null),w=A.useRef(null),C=A.useRef(!1),T=A.useRef(null),k=yi(x_(t),T),P=A.useRef(null);A.useEffect(()=>{!c||!T.current||(C.current=!n)},[n,c]),A.useEffect(()=>{if(!c||!T.current)return;const D=ka(T.current);return T.current.contains(D.activeElement)||(T.current.hasAttribute("tabIndex")||T.current.setAttribute("tabIndex","-1"),C.current&&T.current.focus()),()=>{o||(v.current&&v.current.focus&&(f.current=!0,v.current.focus()),v.current=null)}},[c]),A.useEffect(()=>{if(!c||!T.current)return;const D=ka(T.current),N=V=>{P.current=V,!(r||!l()||V.key!=="Tab")&&D.activeElement===T.current&&V.shiftKey&&(f.current=!0,g.current&&g.current.focus())},F=()=>{var q,z;const V=T.current;if(V===null)return;if(!D.hasFocus()||!l()||f.current){f.current=!1;return}if(V.contains(D.activeElement)||r&&D.activeElement!==p.current&&D.activeElement!==g.current)return;if(D.activeElement!==w.current)w.current=null;else if(w.current!==null)return;if(!C.current)return;let G=[];if((D.activeElement===p.current||D.activeElement===g.current)&&(G=i(T.current)),G.length>0){const $=!!((q=P.current)!=null&&q.shiftKey&&((z=P.current)==null?void 0:z.key)==="Tab"),K=G[0],te=G[G.length-1];typeof K!="string"&&typeof te!="string"&&($?te.focus():K.focus())}else V.focus()};D.addEventListener("focusin",F),D.addEventListener("keydown",N,!0);const B=setInterval(()=>{D.activeElement&&D.activeElement.tagName==="BODY"&&F()},50);return()=>{clearInterval(B),D.removeEventListener("focusin",F),D.removeEventListener("keydown",N,!0)}},[n,r,o,l,c,i]);const O=D=>{v.current===null&&(v.current=D.relatedTarget),C.current=!0,w.current=D.target;const N=t.props.onFocus;N&&N(D)},L=D=>{v.current===null&&(v.current=D.relatedTarget),C.current=!0};return ie.jsxs(A.Fragment,{children:[ie.jsx("div",{tabIndex:c?0:-1,onFocus:L,ref:p,"data-testid":"sentinelStart"}),A.cloneElement(t,{ref:k,onFocus:O}),ie.jsx("div",{tabIndex:c?0:-1,onFocus:L,ref:g,"data-testid":"sentinelEnd"})]})}const Wle=["className","slotProps"],Kle=e=>{const{classes:t}=e;return An({root:["panelWrapper"]},ho,t)},Yle=sn("div",{name:"MuiDataGrid",slot:"PanelWrapper",overridesResolver:(e,t)=>t.panelWrapper})({display:"flex",flexDirection:"column",flex:1,"&:focus":{outline:0}}),Zle=()=>!0,$G=No(function(t,n){const{className:r,slotProps:o={}}=t,i=sr(t,Wle),l=er(),c=Kle(l);return ie.jsx(jG,we({open:!0,disableEnforceFocus:!0,isEnabled:Zle},o.TrapFocus,{children:ie.jsx(Yle,we({tabIndex:-1,className:fn(c.root,r),ownerState:l},i,{ref:n}))}))});function Xle(e){var n;const t=er();return ie.jsx($G,we({},e,{children:ie.jsx(t.slots.columnsManagement,we({},(n=t.slotProps)==null?void 0:n.columnsManagement))}))}const Qle=["children","className","classes"],Jle=Ar("MuiDataGrid",["panel","paper"]),eue=sn(E_,{name:"MuiDataGrid",slot:"Panel",overridesResolver:(e,t)=>t.panel})(({theme:e})=>({zIndex:e.zIndex.modal})),tue=sn(Ux,{name:"MuiDataGrid",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,minWidth:300,maxHeight:450,display:"flex",maxWidth:`calc(100vw - ${e.spacing(.5)})`,overflow:"auto"})),nue=No((e,t)=>{const{children:n,className:r}=e,o=sr(e,Qle),i=Jr(),l=er(),c=Jle,[f,p]=A.useState(!1),g=A.useCallback(()=>{i.current.hidePreferences()},[i]),v=A.useCallback(k=>{k.key==="Escape"&&i.current.hidePreferences()},[i]),w=A.useMemo(()=>[{name:"flip",enabled:!0,options:{rootBoundary:"document"}},{name:"isPlaced",enabled:!0,phase:"main",fn:()=>{p(!0)},effect:()=>()=>{p(!1)}}],[]),[C,T]=A.useState(null);return A.useEffect(()=>{var P,O;const k=(O=(P=i.current.rootElementRef)==null?void 0:P.current)==null?void 0:O.querySelector('[data-id="gridPanelAnchor"]');k&&T(k)},[i]),C?ie.jsx(eue,we({placement:"bottom-start",className:fn(c.panel,r),ownerState:l,anchorEl:C,modifiers:w},o,{ref:t,children:ie.jsx(Y8,{mouseEvent:"onMouseUp",onClickAway:g,children:ie.jsx(tue,{className:c.paper,ownerState:l,elevation:8,onKeyDown:v,children:f&&n})})})):null}),rue=["className"],oue=e=>{const{classes:t}=e;return An({root:["panelContent"]},ho,t)},iue=Ti("div",{name:"MuiDataGrid",slot:"PanelContent",overridesResolver:(e,t)=>t.panelContent})({display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400});function aue(e){const{className:t}=e,n=sr(e,rue),r=er(),o=oue(r);return ie.jsx(iue,we({className:fn(o.root,t),ownerState:r},n))}const sue=["className"],lue=e=>{const{classes:t}=e;return An({root:["panelFooter"]},ho,t)},uue=Ti("div",{name:"MuiDataGrid",slot:"PanelFooter",overridesResolver:(e,t)=>t.panelFooter})(({theme:e})=>({padding:e.spacing(.5),display:"flex",justifyContent:"space-between"}));function cue(e){const{className:t}=e,n=sr(e,sue),r=er(),o=lue(r);return ie.jsx(uue,we({className:fn(o.root,t),ownerState:r},n))}const due=["item","hasMultipleFilters","deleteFilter","applyFilterChanges","showMultiFilterOperators","disableMultiFilterOperator","applyMultiFilterOperatorChanges","focusElementRef","logicOperators","columnsSort","filterColumns","deleteIconProps","logicOperatorInputProps","operatorInputProps","columnInputProps","valueInputProps","readOnly","children"],hue=["InputComponentProps"],fue=e=>{const{classes:t}=e;return An({root:["filterForm"],deleteIcon:["filterFormDeleteIcon"],logicOperatorInput:["filterFormLogicOperatorInput"],columnInput:["filterFormColumnInput"],operatorInput:["filterFormOperatorInput"],valueInput:["filterFormValueInput"]},ho,t)},pue=sn("div",{name:"MuiDataGrid",slot:"FilterForm",overridesResolver:(e,t)=>t.filterForm})(({theme:e})=>({display:"flex",padding:e.spacing(1)})),mue=sn("div",{name:"MuiDataGrid",slot:"FilterFormDeleteIcon",overridesResolver:(e,t)=>t.filterFormDeleteIcon})(({theme:e})=>({flexShrink:0,justifyContent:"flex-end",marginRight:e.spacing(.5),marginBottom:e.spacing(.2)})),gue=sn("div",{name:"MuiDataGrid",slot:"FilterFormLogicOperatorInput",overridesResolver:(e,t)=>t.filterFormLogicOperatorInput})({minWidth:55,marginRight:5,justifyContent:"end"}),yue=sn("div",{name:"MuiDataGrid",slot:"FilterFormColumnInput",overridesResolver:(e,t)=>t.filterFormColumnInput})({width:150}),vue=sn("div",{name:"MuiDataGrid",slot:"FilterFormOperatorInput",overridesResolver:(e,t)=>t.filterFormOperatorInput})({width:150}),_ue=sn("div",{name:"MuiDataGrid",slot:"FilterFormValueInput",overridesResolver:(e,t)=>t.filterFormValueInput})({width:190}),bue=e=>{switch(e){case xu.And:return"filterPanelOperatorAnd";case xu.Or:return"filterPanelOperatorOr";default:throw new Error("MUI X: Invalid `logicOperator` property in the `GridFilterPanel`.")}},uC=e=>e.headerName||e.field,u$=new Intl.Collator,c$=No(function(t,n){var ye,Ie,ge,$e,nt,pt,wt,mt,zt;const{item:r,hasMultipleFilters:o,deleteFilter:i,applyFilterChanges:l,showMultiFilterOperators:c,disableMultiFilterOperator:f,applyMultiFilterOperatorChanges:p,focusElementRef:g,logicOperators:v=[xu.And,xu.Or],columnsSort:w,filterColumns:C,deleteIconProps:T={},logicOperatorInputProps:k={},operatorInputProps:P={},columnInputProps:O={},valueInputProps:L={},readOnly:D}=t,N=sr(t,due),F=Jr(),B=un(F,bm),V=un(F,x8),G=un(F,yl),q=Li(),z=Li(),$=Li(),K=Li(),te=er(),re=fue(te),oe=A.useRef(null),ue=A.useRef(null),Q=G.logicOperator??xu.And,ce=o&&v.length>0,ae=((ye=te.slotProps)==null?void 0:ye.baseFormControl)||{},le=(((Ie=te.slotProps)==null?void 0:Ie.baseSelect)||{}).native??!1,pe=((ge=te.slotProps)==null?void 0:ge.baseInputLabel)||{},Fe=(($e=te.slotProps)==null?void 0:$e.baseSelectOption)||{},{InputComponentProps:Be}=L,Ze=sr(L,hue),{filteredColumns:it,selectedField:ot}=A.useMemo(()=>{let Pt=r.field;const Zt=B[r.field].filterable===!1?B[r.field]:null;if(Zt)return{filteredColumns:[Zt],selectedField:Pt};if(C===void 0||typeof C!="function")return{filteredColumns:V,selectedField:Pt};const We=C({field:r.field,columns:V,currentFilters:(G==null?void 0:G.items)||[]});return{filteredColumns:V.filter(Ge=>{const Rt=We.includes(Ge.field);return Ge.field===r.field&&!Rt&&(Pt=void 0),Rt}),selectedField:Pt}},[C,G==null?void 0:G.items,V,r.field,B]),ut=A.useMemo(()=>{switch(w){case"asc":return it.sort((Pt,Zt)=>u$.compare(uC(Pt),uC(Zt)));case"desc":return it.sort((Pt,Zt)=>-u$.compare(uC(Pt),uC(Zt)));default:return it}},[it,w]),st=r.field?F.current.getColumn(r.field):null,ct=A.useMemo(()=>{var Pt;return!r.operator||!st?null:(Pt=st.filterOperators)==null?void 0:Pt.find(Zt=>Zt.value===r.operator)},[r,st]),Ae=A.useCallback(Pt=>{const Zt=Pt.target.value,We=F.current.getColumn(Zt);if(We.field===st.field)return;const Ge=We.filterOperators.find(qt=>qt.value===r.operator)||We.filterOperators[0];let Dt=!Ge.InputComponent||Ge.InputComponent!==(ct==null?void 0:ct.InputComponent)||We.type!==st.type?void 0:r.value;if(We.type==="singleSelect"&&Dt!==void 0){const qt=We,Yt=s_(qt);Array.isArray(Dt)?Dt=Dt.filter(xt=>hk(xt,Yt,qt==null?void 0:qt.getOptionValue)!==void 0):hk(r.value,Yt,qt==null?void 0:qt.getOptionValue)===void 0&&(Dt=void 0)}l(we({},r,{field:Zt,operator:Ge.value,value:Dt}))},[F,l,r,st,ct]),Z=A.useCallback(Pt=>{const Zt=Pt.target.value,We=st==null?void 0:st.filterOperators.find(Rt=>Rt.value===Zt),Ge=!(We!=null&&We.InputComponent)||(We==null?void 0:We.InputComponent)!==(ct==null?void 0:ct.InputComponent);l(we({},r,{operator:Zt,value:Ge?void 0:r.value}))},[l,r,st,ct]),ne=A.useCallback(Pt=>{const Zt=Pt.target.value===xu.And.toString()?xu.And:xu.Or;p(Zt)},[p]),ee=()=>{i(r)};return A.useImperativeHandle(g,()=>({focus:()=>{var Pt;ct!=null&&ct.InputComponent?(Pt=oe==null?void 0:oe.current)==null||Pt.focus():ue.current.focus()}}),[ct]),ie.jsxs(pue,we({className:re.root,"data-id":r.id,ownerState:te},N,{ref:n,children:[ie.jsx(mue,we({variant:"standard",as:te.slots.baseFormControl},ae,T,{className:fn(re.deleteIcon,ae.className,T.className),ownerState:te,children:ie.jsx(te.slots.baseIconButton,we({"aria-label":F.current.getLocaleText("filterPanelDeleteIconLabel"),title:F.current.getLocaleText("filterPanelDeleteIconLabel"),onClick:ee,size:"small",disabled:D},(nt=te.slotProps)==null?void 0:nt.baseIconButton,{children:ie.jsx(te.slots.filterPanelDeleteIcon,{fontSize:"small"})}))})),ie.jsx(gue,we({variant:"standard",as:te.slots.baseFormControl},ae,k,{sx:[ce?{display:"flex"}:{display:"none"},c?{visibility:"visible"}:{visibility:"hidden"},ae.sx,k.sx],className:fn(re.logicOperatorInput,ae.className,k.className),ownerState:te,children:ie.jsx(te.slots.baseSelect,we({inputProps:{"aria-label":F.current.getLocaleText("filterPanelLogicOperator")},value:Q??"",onChange:ne,disabled:!!f||v.length===1,native:le},(pt=te.slotProps)==null?void 0:pt.baseSelect,{children:v.map(Pt=>A.createElement(te.slots.baseSelectOption,we({},Fe,{native:le,key:Pt.toString(),value:Pt.toString()}),F.current.getLocaleText(bue(Pt))))}))})),ie.jsxs(yue,we({variant:"standard",as:te.slots.baseFormControl},ae,O,{className:fn(re.columnInput,ae.className,O.className),ownerState:te,children:[ie.jsx(te.slots.baseInputLabel,we({},pe,{htmlFor:q,id:z,children:F.current.getLocaleText("filterPanelColumns")})),ie.jsx(te.slots.baseSelect,we({labelId:z,id:q,label:F.current.getLocaleText("filterPanelColumns"),value:ot??"",onChange:Ae,native:le,disabled:D},(wt=te.slotProps)==null?void 0:wt.baseSelect,{children:ut.map(Pt=>A.createElement(te.slots.baseSelectOption,we({},Fe,{native:le,key:Pt.field,value:Pt.field}),uC(Pt)))}))]})),ie.jsxs(vue,we({variant:"standard",as:te.slots.baseFormControl},ae,P,{className:fn(re.operatorInput,ae.className,P.className),ownerState:te,children:[ie.jsx(te.slots.baseInputLabel,we({},pe,{htmlFor:$,id:K,children:F.current.getLocaleText("filterPanelOperator")})),ie.jsx(te.slots.baseSelect,we({labelId:K,label:F.current.getLocaleText("filterPanelOperator"),id:$,value:r.operator,onChange:Z,native:le,inputRef:ue,disabled:D},(mt=te.slotProps)==null?void 0:mt.baseSelect,{children:(zt=st==null?void 0:st.filterOperators)==null?void 0:zt.map(Pt=>A.createElement(te.slots.baseSelectOption,we({},Fe,{native:le,key:Pt.value,value:Pt.value}),Pt.label||F.current.getLocaleText(`filterOperator${tn(Pt.value)}`)))}))]})),ie.jsx(_ue,we({variant:"standard",as:te.slots.baseFormControl},ae,Ze,{className:fn(re.valueInput,ae.className,Ze.className),ownerState:te,children:ct!=null&&ct.InputComponent?ie.jsx(ct.InputComponent,we({apiRef:F,item:r,applyValue:l,focusElementRef:oe,disabled:D},ct.InputComponentProps,Be),r.field):null}))]}))}),wue=["logicOperators","columnsSort","filterFormProps","getColumnForNewFilter","children","disableAddFilterButton","disableRemoveAllButton"],d$=e=>({field:e.field,operator:e.filterOperators[0].value,id:Math.round(Math.random()*1e5)}),xue=No(function(t,n){var K,te;const r=Jr(),o=er(),i=un(r,yl),l=un(r,x8),c=un(r,oee),f=A.useRef(null),p=A.useRef(null),{logicOperators:g=[xu.And,xu.Or],columnsSort:v,filterFormProps:w,getColumnForNewFilter:C,disableAddFilterButton:T=!1,disableRemoveAllButton:k=!1}=t,P=sr(t,wue),O=r.current.upsertFilterItem,L=A.useCallback(re=>{r.current.setFilterLogicOperator(re)},[r]),D=A.useCallback(()=>{let re;if(C&&typeof C=="function"){const oe=C({currentFilters:(i==null?void 0:i.items)||[],columns:l});if(oe===null)return null;re=l.find(({field:ue})=>ue===oe)}else re=l.find(oe=>{var ue;return(ue=oe.filterOperators)==null?void 0:ue.length});return re?d$(re):null},[i==null?void 0:i.items,l,C]),N=A.useCallback(()=>{if(C===void 0||typeof C!="function")return D();const re=i.items.length?i.items:[D()].filter(Boolean),oe=C({currentFilters:re,columns:l});if(oe===null)return null;const ue=l.find(({field:Q})=>Q===oe);return ue?d$(ue):null},[i.items,l,C,D]),F=A.useMemo(()=>i.items.length?i.items:(p.current||(p.current=D()),p.current?[p.current]:[]),[i.items,D]),B=F.length>1,{readOnlyFilters:V,validFilters:G}=A.useMemo(()=>F.reduce((re,oe)=>(c[oe.field]?re.validFilters.push(oe):re.readOnlyFilters.push(oe),re),{readOnlyFilters:[],validFilters:[]}),[F,c]),q=A.useCallback(()=>{const re=N();re&&r.current.upsertFilterItems([...F,re])},[r,N,F]),z=A.useCallback(re=>{const oe=G.length===1;r.current.deleteFilterItem(re),oe&&r.current.hideFilterPanel()},[r,G.length]),$=A.useCallback(()=>G.length===1&&G[0].value===void 0?(r.current.deleteFilterItem(G[0]),r.current.hideFilterPanel()):r.current.setFilterModel(we({},i,{items:V}),"removeAllFilterItems"),[r,V,i,G]);return A.useEffect(()=>{g.length>0&&i.logicOperator&&!g.includes(i.logicOperator)&&L(g[0])},[g,L,i.logicOperator]),A.useEffect(()=>{G.length>0&&f.current.focus()},[G.length]),ie.jsxs($G,we({},P,{ref:n,children:[ie.jsxs(aue,{children:[V.map((re,oe)=>ie.jsx(c$,we({item:re,applyFilterChanges:O,deleteFilter:z,hasMultipleFilters:B,showMultiFilterOperators:oe>0,disableMultiFilterOperator:oe!==1,applyMultiFilterOperatorChanges:L,focusElementRef:null,readOnly:!0,logicOperators:g,columnsSort:v},w),re.id==null?oe:re.id)),G.map((re,oe)=>ie.jsx(c$,we({item:re,applyFilterChanges:O,deleteFilter:z,hasMultipleFilters:B,showMultiFilterOperators:V.length+oe>0,disableMultiFilterOperator:V.length+oe!==1,applyMultiFilterOperatorChanges:L,focusElementRef:oe===G.length-1?f:null,logicOperators:g,columnsSort:v},w),re.id==null?oe+V.length:re.id))]}),!o.disableMultipleColumnsFiltering&&!(T&&k)?ie.jsxs(cue,{children:[T?ie.jsx("span",{}):ie.jsx(o.slots.baseButton,we({onClick:q,startIcon:ie.jsx(o.slots.filterPanelAddIcon,{})},(K=o.slotProps)==null?void 0:K.baseButton,{children:r.current.getLocaleText("filterPanelAddFilter")})),!k&&G.length>0?ie.jsx(o.slots.baseButton,we({onClick:$,startIcon:ie.jsx(o.slots.filterPanelRemoveAllIcon,{})},(te=o.slotProps)==null?void 0:te.baseButton,{children:r.current.getLocaleText("filterPanelRemoveAll")})):null]}):null]}))});function Cue(e){return Rr("MuiFormControl",e)}Ar("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Sue=e=>{const{classes:t,margin:n,fullWidth:r}=e,o={root:["root",n!=="none"&&`margin${tn(n)}`,r&&"fullWidth"]};return An(o,Cue,t)},Eue=sn("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${tn(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),HG=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiFormControl"}),{children:o,className:i,color:l="primary",component:c="div",disabled:f=!1,error:p=!1,focused:g,fullWidth:v=!1,hiddenLabel:w=!1,margin:C="none",required:T=!1,size:k="medium",variant:P="outlined",...O}=r,L={...r,color:l,component:c,disabled:f,error:p,fullWidth:v,hiddenLabel:w,margin:C,required:T,size:k,variant:P},D=Sue(L),[N,F]=A.useState(()=>{let te=!1;return o&&A.Children.forEach(o,re=>{if(!OM(re,["Input","Select"]))return;const oe=OM(re,["Select"])?re.props.input:re;oe&&mee(oe.props)&&(te=!0)}),te}),[B,V]=A.useState(()=>{let te=!1;return o&&A.Children.forEach(o,re=>{OM(re,["Input","Select"])&&(ok(re.props,!0)||ok(re.props.inputProps,!0))&&(te=!0)}),te}),[G,q]=A.useState(!1);f&&G&&q(!1);const z=g!==void 0&&!f?g:G;let $;A.useRef(!1);const K=A.useMemo(()=>({adornedStart:N,setAdornedStart:F,color:l,disabled:f,error:p,filled:B,focused:z,fullWidth:v,hiddenLabel:w,size:k,onBlur:()=>{q(!1)},onEmpty:()=>{V(!1)},onFilled:()=>{V(!0)},onFocus:()=>{q(!0)},registerEffect:$,required:T,variant:P}),[N,l,f,p,B,z,v,w,$,T,k,P]);return ie.jsx(aA.Provider,{value:K,children:ie.jsx(Eue,{as:c,ownerState:L,className:fn(D.root,i),ref:n,...O,children:o})})});function Tue(e){return Rr("MuiFormControlLabel",e)}const a1=Ar("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Iue=e=>{const{classes:t,disabled:n,labelPlacement:r,error:o,required:i}=e,l={root:["root",n&&"disabled",`labelPlacement${tn(r)}`,o&&"error",i&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",o&&"error"]};return An(l,Tue,t)},kue=sn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${a1.label}`]:t.label},t.root,t[`labelPlacement${tn(n.labelPlacement)}`]]}})(mr(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${a1.disabled}`]:{cursor:"default"},[`& .${a1.label}`]:{[`&.${a1.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Pue=sn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(mr(({theme:e})=>({[`&.${a1.error}`]:{color:(e.vars||e).palette.error.main}}))),h$=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiFormControlLabel"}),{checked:o,className:i,componentsProps:l={},control:c,disabled:f,disableTypography:p,inputRef:g,label:v,labelPlacement:w="end",name:C,onChange:T,required:k,slots:P={},slotProps:O={},value:L,...D}=r,N=wm(),F=f??c.props.disabled??(N==null?void 0:N.disabled),B=k??c.props.required,V={disabled:F,required:B};["checked","name","onChange","value","inputRef"].forEach(oe=>{typeof c.props[oe]>"u"&&typeof r[oe]<"u"&&(V[oe]=r[oe])});const G=S_({props:r,muiFormControl:N,states:["error"]}),q={...r,disabled:F,labelPlacement:w,required:B,error:G.error},z=Iue(q),$={slots:P,slotProps:{...l,...O}},[K,te]=Di("typography",{elementType:bf,externalForwardedProps:$,ownerState:q});let re=v;return re!=null&&re.type!==bf&&!p&&(re=ie.jsx(K,{component:"span",...te,className:fn(z.label,te==null?void 0:te.className),children:re})),ie.jsxs(kue,{className:fn(z.root,i),ownerState:q,ref:n,...D,children:[A.cloneElement(c,V),B?ie.jsxs("div",{children:[re,ie.jsxs(Pue,{ownerState:q,"aria-hidden":!0,className:z.asterisk,children:[" ","*"]})]}):re]})}),Aue=e=>{const{classes:t,disableUnderline:n}=e,o=An({root:["root",!n&&"underline"],input:["input"]},jne,t);return{...t,...o}},Mue=sn(uA,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...sA(e,t),!n.disableUnderline&&t.underline]}})(mr(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ag.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ag.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ag.disabled}, .${Ag.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Ag.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ia()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),Rue=sn(cA,{name:"MuiInput",slot:"Input",overridesResolver:lA})({}),VF=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiInput"}),{disableUnderline:o=!1,components:i={},componentsProps:l,fullWidth:c=!1,inputComponent:f="input",multiline:p=!1,slotProps:g,slots:v={},type:w="text",...C}=r,T=Aue(r),P={root:{ownerState:{disableUnderline:o}}},O=g??l?Xl(g??l,P):P,L=v.root??i.Root??Mue,D=v.input??i.Input??Rue;return ie.jsx(Bx,{slots:{root:L,input:D},slotProps:O,fullWidth:c,inputComponent:f,multiline:p,ref:n,type:w,...C,classes:T})});VF.muiName="Input";const Oue=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:o,size:i,hiddenLabel:l,multiline:c}=e,f={root:["root",!n&&"underline",r&&"adornedStart",o&&"adornedEnd",i==="small"&&`size${tn(i)}`,l&&"hiddenLabel",c&&"multiline"],input:["input"]},p=An(f,Hne,t);return{...t,...p}},Due=sn(uA,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...sA(e,t),!n.disableUnderline&&t.underline]}})(mr(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${Uc.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${Uc.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:l})=>!l.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Uc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Uc.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Uc.disabled}, .${Uc.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Uc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ia()).map(([l])=>{var c;return{props:{disableUnderline:!1,color:l},style:{"&::after":{borderBottom:`2px solid ${(c=(e.vars||e).palette[l])==null?void 0:c.main}`}}}}),{props:({ownerState:l})=>l.startAdornment,style:{paddingLeft:12}},{props:({ownerState:l})=>l.endAdornment,style:{paddingRight:12}},{props:({ownerState:l})=>l.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:l,size:c})=>l.multiline&&c==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:l})=>l.multiline&&l.hiddenLabel&&l.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Lue=sn(cA,{name:"MuiFilledInput",slot:"Input",overridesResolver:lA})(mr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),qF=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiFilledInput"}),{disableUnderline:o=!1,components:i={},componentsProps:l,fullWidth:c=!1,hiddenLabel:f,inputComponent:p="input",multiline:g=!1,slotProps:v,slots:w={},type:C="text",...T}=r,k={...r,disableUnderline:o,fullWidth:c,inputComponent:p,multiline:g,type:C},P=Oue(r),O={root:{ownerState:k},input:{ownerState:k}},L=v??l?Xl(O,v??l):O,D=w.root??i.Root??Due,N=w.input??i.Input??Lue;return ie.jsx(Bx,{slots:{root:D,input:N},slotProps:L,fullWidth:c,inputComponent:p,multiline:g,ref:n,type:C,...T,classes:P})});qF.muiName="Input";var f$;const Nue=sn("fieldset",{shouldForwardProp:cc})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),Fue=sn("legend",{shouldForwardProp:cc})(mr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function zue(e){const{children:t,classes:n,className:r,label:o,notched:i,...l}=e,c=o!=null&&o!=="",f={...e,notched:i,withLabel:c};return ie.jsx(Nue,{"aria-hidden":!0,className:r,ownerState:f,...l,children:ie.jsx(Fue,{ownerState:f,children:c?ie.jsx("span",{children:o}):f$||(f$=ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const Bue=e=>{const{classes:t}=e,r=An({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},$ne,t);return{...t,...r}},Uue=sn(uA,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:sA})(mr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${gd.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${gd.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${gd.focused} .${gd.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Ia()).map(([n])=>({props:{color:n},style:{[`&.${gd.focused} .${gd.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${gd.error} .${gd.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${gd.disabled} .${gd.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),jue=sn(zue,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(mr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),$ue=sn(cA,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:lA})(mr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),GF=A.forwardRef(function(t,n){var r;const o=Kr({props:t,name:"MuiOutlinedInput"}),{components:i={},fullWidth:l=!1,inputComponent:c="input",label:f,multiline:p=!1,notched:g,slots:v={},type:w="text",...C}=o,T=Bue(o),k=wm(),P=S_({props:o,muiFormControl:k,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),O={...o,color:P.color||"primary",disabled:P.disabled,error:P.error,focused:P.focused,formControl:k,fullWidth:l,hiddenLabel:P.hiddenLabel,multiline:p,size:P.size,type:w},L=v.root??i.Root??Uue,D=v.input??i.Input??$ue;return ie.jsx(Bx,{slots:{root:L,input:D},renderSuffix:N=>ie.jsx(jue,{ownerState:O,className:T.notchedOutline,label:f!=null&&f!==""&&P.required?r||(r=ie.jsxs(A.Fragment,{children:[f," ","*"]})):f,notched:typeof g<"u"?g:!!(N.startAdornment||N.filled||N.focused)}),fullWidth:l,inputComponent:c,multiline:p,ref:n,type:w,...C,classes:{...T,notchedOutline:null}})});GF.muiName="Input";function Hue(e){return Rr("MuiFormLabel",e)}const E1=Ar("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Vue=e=>{const{classes:t,color:n,focused:r,disabled:o,error:i,filled:l,required:c}=e,f={root:["root",`color${tn(n)}`,o&&"disabled",i&&"error",l&&"filled",r&&"focused",c&&"required"],asterisk:["asterisk",i&&"error"]};return An(f,Hue,t)},que=sn("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{[`&.${E1.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${E1.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${E1.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),Gue=sn("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(mr(({theme:e})=>({[`&.${E1.error}`]:{color:(e.vars||e).palette.error.main}}))),Wue=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiFormLabel"}),{children:o,className:i,color:l,component:c="label",disabled:f,error:p,filled:g,focused:v,required:w,...C}=r,T=wm(),k=S_({props:r,muiFormControl:T,states:["color","required","focused","disabled","error","filled"]}),P={...r,color:k.color||"primary",component:c,disabled:k.disabled,error:k.error,filled:k.filled,focused:k.focused,required:k.required},O=Vue(P);return ie.jsxs(que,{as:c,ownerState:P,className:fn(O.root,i),ref:n,...C,children:[o,k.required&&ie.jsxs(Gue,{ownerState:P,"aria-hidden":!0,className:O.asterisk,children:[" ","*"]})]})});function Kue(e){return Rr("MuiInputLabel",e)}Ar("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Yue=e=>{const{classes:t,formControl:n,size:r,shrink:o,disableAnimation:i,variant:l,required:c}=e,f={root:["root",n&&"formControl",!i&&"animated",o&&"shrink",r&&r!=="normal"&&`size${tn(r)}`,l],asterisk:[c&&"asterisk"]},p=An(f,Kue,t);return{...t,...p}},Zue=sn(Wue,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${E1.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(mr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),VG=A.forwardRef(function(t,n){const r=Kr({name:"MuiInputLabel",props:t}),{disableAnimation:o=!1,margin:i,shrink:l,variant:c,className:f,...p}=r,g=wm();let v=l;typeof v>"u"&&g&&(v=g.filled||g.focused||g.adornedStart);const w=S_({props:r,muiFormControl:g,states:["size","variant","required","focused"]}),C={...r,disableAnimation:o,formControl:g,shrink:v,size:w.size,variant:w.variant,required:w.required,focused:w.focused},T=Yue(C);return ie.jsx(Zue,{"data-shrink":v,ref:n,className:fn(T.root,f),...p,ownerState:C,classes:T})});function Xue(e){return Rr("MuiFormHelperText",e)}const p$=Ar("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var m$;const Que=e=>{const{classes:t,contained:n,size:r,disabled:o,error:i,filled:l,focused:c,required:f}=e,p={root:["root",o&&"disabled",i&&"error",r&&`size${tn(r)}`,n&&"contained",c&&"focused",l&&"filled",f&&"required"]};return An(p,Xue,t)},Jue=sn("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${tn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${p$.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${p$.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),ece=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiFormHelperText"}),{children:o,className:i,component:l="p",disabled:c,error:f,filled:p,focused:g,margin:v,required:w,variant:C,...T}=r,k=wm(),P=S_({props:r,muiFormControl:k,states:["variant","size","disabled","error","filled","focused","required"]}),O={...r,component:l,contained:P.variant==="filled"||P.variant==="outlined",variant:P.variant,size:P.size,disabled:P.disabled,error:P.error,filled:P.filled,focused:P.focused,required:P.required};delete O.ownerState;const L=Que(O);return ie.jsx(Jue,{as:l,className:fn(L.root,i),ref:n,...T,ownerState:O,children:o===" "?m$||(m$=ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):o})});function tce(e){const t=ka(e);return t.body===e?Nf(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function T1(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function g$(e){return parseInt(Nf(e).getComputedStyle(e).paddingRight,10)||0}function nce(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function y$(e,t,n,r,o){const i=[t,n,...r];[].forEach.call(e.children,l=>{const c=!i.includes(l),f=!nce(l);c&&f&&T1(l,o)})}function XM(e,t){let n=-1;return e.some((r,o)=>t(r)?(n=o,!0):!1),n}function rce(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(tce(r)){const l=Bq(Nf(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${g$(r)+l}px`;const c=ka(r).querySelectorAll(".mui-fixed");[].forEach.call(c,f=>{n.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${g$(f)+l}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=ka(r).body;else{const l=r.parentElement,c=Nf(r);i=(l==null?void 0:l.nodeName)==="HTML"&&c.getComputedStyle(l).overflowY==="scroll"?l:r}n.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{n.forEach(({value:i,el:l,property:c})=>{i?l.style.setProperty(c,i):l.style.removeProperty(c)})}}function oce(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class ice{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&T1(t.modalRef,!1);const o=oce(n);y$(n,t.mount,t.modalRef,o,!0);const i=XM(this.containers,l=>l.container===n);return i!==-1?(this.containers[i].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:o}),r)}mount(t,n){const r=XM(this.containers,i=>i.modals.includes(t)),o=this.containers[r];o.restore||(o.restore=rce(o,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const o=XM(this.containers,l=>l.modals.includes(t)),i=this.containers[o];if(i.modals.splice(i.modals.indexOf(t),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),t.modalRef&&T1(t.modalRef,n),y$(i.container,t.mount,t.modalRef,i.hiddenSiblings,!1),this.containers.splice(o,1);else{const l=i.modals[i.modals.length-1];l.modalRef&&T1(l.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const ace={entering:{opacity:1},entered:{opacity:1}},sce=A.forwardRef(function(t,n){const r=XS(),o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:c,easing:f,in:p,onEnter:g,onEntered:v,onEntering:w,onExit:C,onExited:T,onExiting:k,style:P,timeout:O=o,TransitionComponent:L=Wf,...D}=t,N=A.useRef(null),F=yi(N,x_(c),n),B=re=>oe=>{if(re){const ue=N.current;oe===void 0?re(ue):re(ue,oe)}},V=B(w),G=B((re,oe)=>{Z8(re);const ue=uk({style:P,timeout:O,easing:f},{mode:"enter"});re.style.webkitTransition=r.transitions.create("opacity",ue),re.style.transition=r.transitions.create("opacity",ue),g&&g(re,oe)}),q=B(v),z=B(k),$=B(re=>{const oe=uk({style:P,timeout:O,easing:f},{mode:"exit"});re.style.webkitTransition=r.transitions.create("opacity",oe),re.style.transition=r.transitions.create("opacity",oe),C&&C(re)}),K=B(T),te=re=>{i&&i(N.current,re)};return ie.jsx(L,{appear:l,in:p,nodeRef:N,onEnter:G,onEntered:q,onEntering:V,onExit:$,onExited:K,onExiting:z,addEndListener:te,timeout:O,...D,children:(re,{ownerState:oe,...ue})=>A.cloneElement(c,{style:{opacity:0,visibility:re==="exited"&&!p?"hidden":void 0,...ace[re],...P,...c.props.style},ref:F,...ue})})});function lce(e){return Rr("MuiBackdrop",e)}Ar("MuiBackdrop",["root","invisible"]);const uce=e=>{const{classes:t,invisible:n}=e;return An({root:["root",n&&"invisible"]},lce,t)},cce=sn("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),dce=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiBackdrop"}),{children:o,className:i,component:l="div",invisible:c=!1,open:f,components:p={},componentsProps:g={},slotProps:v={},slots:w={},TransitionComponent:C,transitionDuration:T,...k}=r,P={...r,component:l,invisible:c},O=uce(P),L={transition:C,root:p.Root,...w},D={...g,...v},N={slots:L,slotProps:D},[F,B]=Di("root",{elementType:cce,externalForwardedProps:N,className:fn(O.root,i),ownerState:P}),[V,G]=Di("transition",{elementType:sce,externalForwardedProps:N,ownerState:P});return ie.jsx(V,{in:f,timeout:T,...k,...G,children:ie.jsx(F,{"aria-hidden":!0,...B,classes:O,ref:n,children:o})})});function hce(e){return typeof e=="function"?e():e}function fce(e){return e?e.props.hasOwnProperty("in"):!1}const v$=()=>{},mT=new ice;function pce(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:o=!1,onTransitionEnter:i,onTransitionExited:l,children:c,onClose:f,open:p,rootRef:g}=e,v=A.useRef({}),w=A.useRef(null),C=A.useRef(null),T=yi(C,g),[k,P]=A.useState(!p),O=fce(c);let L=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(L=!1);const D=()=>ka(w.current),N=()=>(v.current.modalRef=C.current,v.current.mount=w.current,v.current),F=()=>{mT.mount(N(),{disableScrollLock:r}),C.current&&(C.current.scrollTop=0)},B=co(()=>{const oe=hce(t)||D().body;mT.add(N(),oe),C.current&&F()}),V=()=>mT.isTopModal(N()),G=co(oe=>{w.current=oe,oe&&(p&&V()?F():C.current&&T1(C.current,L))}),q=A.useCallback(()=>{mT.remove(N(),L)},[L]);A.useEffect(()=>()=>{q()},[q]),A.useEffect(()=>{p?B():(!O||!o)&&q()},[p,q,O,o,B]);const z=oe=>ue=>{var Q;(Q=oe.onKeyDown)==null||Q.call(oe,ue),!(ue.key!=="Escape"||ue.which===229||!V())&&(n||(ue.stopPropagation(),f&&f(ue,"escapeKeyDown")))},$=oe=>ue=>{var Q;(Q=oe.onClick)==null||Q.call(oe,ue),ue.target===ue.currentTarget&&f&&f(ue,"backdropClick")};return{getRootProps:(oe={})=>{const ue=jq(e);delete ue.onTransitionEnter,delete ue.onTransitionExited;const Q={...ue,...oe};return{role:"presentation",...Q,onKeyDown:z(Q),ref:T}},getBackdropProps:(oe={})=>{const ue=oe;return{"aria-hidden":!0,...ue,onClick:$(ue),open:p}},getTransitionProps:()=>{const oe=()=>{P(!1),i&&i()},ue=()=>{P(!0),l&&l(),o&&q()};return{onEnter:yU(oe,(c==null?void 0:c.props.onEnter)??v$),onExited:yU(ue,(c==null?void 0:c.props.onExited)??v$)}},rootRef:T,portalRef:G,isTopModal:V,exited:k,hasTransition:O}}function mce(e){return Rr("MuiModal",e)}Ar("MuiModal",["root","hidden","backdrop"]);const gce=e=>{const{open:t,exited:n,classes:r}=e;return An({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},mce,r)},yce=sn("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(mr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),vce=sn(dce,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),_ce=A.forwardRef(function(t,n){const r=Kr({name:"MuiModal",props:t}),{BackdropComponent:o=vce,BackdropProps:i,classes:l,className:c,closeAfterTransition:f=!1,children:p,container:g,component:v,components:w={},componentsProps:C={},disableAutoFocus:T=!1,disableEnforceFocus:k=!1,disableEscapeKeyDown:P=!1,disablePortal:O=!1,disableRestoreFocus:L=!1,disableScrollLock:D=!1,hideBackdrop:N=!1,keepMounted:F=!1,onBackdropClick:B,onClose:V,onTransitionEnter:G,onTransitionExited:q,open:z,slotProps:$={},slots:K={},theme:te,...re}=r,oe={...r,closeAfterTransition:f,disableAutoFocus:T,disableEnforceFocus:k,disableEscapeKeyDown:P,disablePortal:O,disableRestoreFocus:L,disableScrollLock:D,hideBackdrop:N,keepMounted:F},{getRootProps:ue,getBackdropProps:Q,getTransitionProps:ce,portalRef:ae,isTopModal:fe,exited:le,hasTransition:pe}=pce({...oe,rootRef:n}),Fe={...oe,exited:le},Be=gce(Fe),Ze={};if(p.props.tabIndex===void 0&&(Ze.tabIndex="-1"),pe){const{onEnter:Z,onExited:ne}=ce();Ze.onEnter=Z,Ze.onExited=ne}const it={...re,slots:{root:w.Root,backdrop:w.Backdrop,...K},slotProps:{...C,...$}},[ot,ut]=Di("root",{elementType:yce,externalForwardedProps:it,getSlotProps:ue,additionalProps:{ref:n,as:v},ownerState:Fe,className:fn(c,Be==null?void 0:Be.root,!Fe.open&&Fe.exited&&(Be==null?void 0:Be.hidden))}),[st,ct]=Di("backdrop",{elementType:o,externalForwardedProps:it,additionalProps:i,getSlotProps:Z=>Q({...Z,onClick:ne=>{B&&B(ne),Z!=null&&Z.onClick&&Z.onClick(ne)}}),className:fn(i==null?void 0:i.className,Be==null?void 0:Be.backdrop),ownerState:Fe}),Ae=yi(i==null?void 0:i.ref,ct.ref);return!F&&!z&&(!pe||le)?null:ie.jsx(z8,{ref:ae,container:g,disablePortal:O,children:ie.jsxs(ot,{...ut,children:[!N&&o?ie.jsx(st,{...ct,ref:Ae}):null,ie.jsx(jG,{disableEnforceFocus:k,disableAutoFocus:T,disableRestoreFocus:L,isEnabled:fe,open:z,children:A.cloneElement(p,Ze)})]})})});function bce(e){return Rr("MuiPopover",e)}Ar("MuiPopover",["root","paper"]);function _$(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function b$(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function w$(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function QM(e){return typeof e=="function"?e():e}const wce=e=>{const{classes:t}=e;return An({root:["root"],paper:["paper"]},bce,t)},xce=sn(_ce,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qG=sn(Ux,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Cce=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiPopover"}),{action:o,anchorEl:i,anchorOrigin:l={vertical:"top",horizontal:"left"},anchorPosition:c,anchorReference:f="anchorEl",children:p,className:g,container:v,elevation:w=8,marginThreshold:C=16,open:T,PaperProps:k={},slots:P={},slotProps:O={},transformOrigin:L={vertical:"top",horizontal:"left"},TransitionComponent:D=lS,transitionDuration:N="auto",TransitionProps:{onEntering:F,...B}={},disableScrollLock:V=!1,...G}=r,q=(O==null?void 0:O.paper)??k,z=A.useRef(),$={...r,anchorOrigin:l,anchorReference:f,elevation:w,marginThreshold:C,externalPaperSlotProps:q,transformOrigin:L,TransitionComponent:D,transitionDuration:N,TransitionProps:B},K=wce($),te=A.useCallback(()=>{if(f==="anchorPosition")return c;const ct=QM(i),Z=(ct&&ct.nodeType===1?ct:ka(z.current).body).getBoundingClientRect();return{top:Z.top+_$(Z,l.vertical),left:Z.left+b$(Z,l.horizontal)}},[i,l.horizontal,l.vertical,c,f]),re=A.useCallback(ct=>({vertical:_$(ct,L.vertical),horizontal:b$(ct,L.horizontal)}),[L.horizontal,L.vertical]),oe=A.useCallback(ct=>{const Ae={width:ct.offsetWidth,height:ct.offsetHeight},Z=re(Ae);if(f==="none")return{top:null,left:null,transformOrigin:w$(Z)};const ne=te();let ee=ne.top-Z.vertical,ye=ne.left-Z.horizontal;const Ie=ee+Ae.height,ge=ye+Ae.width,$e=Nf(QM(i)),nt=$e.innerHeight-C,pt=$e.innerWidth-C;if(C!==null&&ee<C){const wt=ee-C;ee-=wt,Z.vertical+=wt}else if(C!==null&&Ie>nt){const wt=Ie-nt;ee-=wt,Z.vertical+=wt}if(C!==null&&ye<C){const wt=ye-C;ye-=wt,Z.horizontal+=wt}else if(ge>pt){const wt=ge-pt;ye-=wt,Z.horizontal+=wt}return{top:`${Math.round(ee)}px`,left:`${Math.round(ye)}px`,transformOrigin:w$(Z)}},[i,f,te,re,C]),[ue,Q]=A.useState(T),ce=A.useCallback(()=>{const ct=z.current;if(!ct)return;const Ae=oe(ct);Ae.top!==null&&ct.style.setProperty("top",Ae.top),Ae.left!==null&&(ct.style.left=Ae.left),ct.style.transformOrigin=Ae.transformOrigin,Q(!0)},[oe]);A.useEffect(()=>(V&&window.addEventListener("scroll",ce),()=>window.removeEventListener("scroll",ce)),[i,V,ce]);const ae=(ct,Ae)=>{F&&F(ct,Ae),ce()},fe=()=>{Q(!1)};A.useEffect(()=>{T&&ce()}),A.useImperativeHandle(o,()=>T?{updatePosition:()=>{ce()}}:null,[T,ce]),A.useEffect(()=>{if(!T)return;const ct=zq(()=>{ce()}),Ae=Nf(i);return Ae.addEventListener("resize",ct),()=>{ct.clear(),Ae.removeEventListener("resize",ct)}},[i,T,ce]);let le=N;N==="auto"&&!D.muiSupportAuto&&(le=void 0);const pe=v||(i?ka(QM(i)).body:void 0),Fe={slots:P,slotProps:{...O,paper:q}},[Be,Ze]=Di("paper",{elementType:qG,externalForwardedProps:Fe,additionalProps:{elevation:w,className:fn(K.paper,q==null?void 0:q.className),style:ue?q.style:{...q.style,opacity:0}},ownerState:$}),[it,{slotProps:ot,...ut}]=Di("root",{elementType:xce,externalForwardedProps:Fe,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:pe,open:T},ownerState:$,className:fn(K.root,g)}),st=yi(z,Ze.ref);return ie.jsx(it,{...ut,...!bD(it)&&{slotProps:ot,disableScrollLock:V},...G,ref:n,children:ie.jsx(D,{appear:!0,in:T,onEntering:ae,onExited:fe,timeout:le,...B,children:ie.jsx(Be,{...Ze,ref:st,children:p})})})});function Sce(e){return Rr("MuiMenu",e)}Ar("MuiMenu",["root","paper","list"]);const Ece={vertical:"top",horizontal:"right"},Tce={vertical:"top",horizontal:"left"},Ice=e=>{const{classes:t}=e;return An({root:["root"],paper:["paper"],list:["list"]},Sce,t)},kce=sn(Cce,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Pce=sn(qG,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Ace=sn(hA,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),GG=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiMenu"}),{autoFocus:o=!0,children:i,className:l,disableAutoFocusItem:c=!1,MenuListProps:f={},onClose:p,open:g,PaperProps:v={},PopoverClasses:w,transitionDuration:C="auto",TransitionProps:{onEntering:T,...k}={},variant:P="selectedMenu",slots:O={},slotProps:L={},...D}=r,N=Zc(),F={...r,autoFocus:o,disableAutoFocusItem:c,MenuListProps:f,onEntering:T,PaperProps:v,transitionDuration:C,TransitionProps:k,variant:P},B=Ice(F),V=o&&!c&&g,G=A.useRef(null),q=(ue,Q)=>{G.current&&G.current.adjustStyleForScrollbar(ue,{direction:N?"rtl":"ltr"}),T&&T(ue,Q)},z=ue=>{ue.key==="Tab"&&(ue.preventDefault(),p&&p(ue,"tabKeyDown"))};let $=-1;A.Children.map(i,(ue,Q)=>{A.isValidElement(ue)&&(ue.props.disabled||(P==="selectedMenu"&&ue.props.selected||$===-1)&&($=Q))});const K=O.paper??Pce,te=L.paper??v,re=eS({elementType:O.root,externalSlotProps:L.root,ownerState:F,className:[B.root,l]}),oe=eS({elementType:K,externalSlotProps:te,ownerState:F,className:B.paper});return ie.jsx(kce,{onClose:p,anchorOrigin:{vertical:"bottom",horizontal:N?"right":"left"},transformOrigin:N?Ece:Tce,slots:{paper:K,root:O.root},slotProps:{root:re,paper:oe},open:g,ref:n,transitionDuration:C,TransitionProps:{onEntering:q,...k},ownerState:F,...D,classes:w,children:ie.jsx(Ace,{onKeyDown:z,actions:G,autoFocus:o&&($===-1||c),autoFocusItem:V,variant:P,...f,className:fn(B.list,f.className),children:i})})});function Mce(e){return Rr("MuiNativeSelect",e)}const WF=Ar("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Rce=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:l}=e,c={select:["select",n,r&&"disabled",o&&"multiple",l&&"error"],icon:["icon",`icon${tn(n)}`,i&&"iconOpen",r&&"disabled"]};return An(c,Mce,t)},WG=sn("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${WF.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),Oce=sn(WG,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:cc,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${WF.multiple}`]:t.multiple}]}})({}),KG=sn("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${WF.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),Dce=sn(KG,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${tn(n.variant)}`],n.open&&t.iconOpen]}})({}),Lce=A.forwardRef(function(t,n){const{className:r,disabled:o,error:i,IconComponent:l,inputRef:c,variant:f="standard",...p}=t,g={...t,disabled:o,variant:f,error:i},v=Rce(g);return ie.jsxs(A.Fragment,{children:[ie.jsx(Oce,{ownerState:g,className:fn(v.select,r),disabled:o,ref:c||n,...p}),t.multiple?null:ie.jsx(Dce,{as:l,ownerState:g,className:v.icon})]})});function Nce(e){return Rr("MuiSelect",e)}const cC=Ar("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var x$;const Fce=sn(WG,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${cC.select}`]:t.select},{[`&.${cC.select}`]:t[n.variant]},{[`&.${cC.error}`]:t.error},{[`&.${cC.multiple}`]:t.multiple}]}})({[`&.${cC.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),zce=sn(KG,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${tn(n.variant)}`],n.open&&t.iconOpen]}})({}),Bce=sn("input",{shouldForwardProp:e=>Zq(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function C$(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function Uce(e){return e==null||typeof e=="string"&&!e.trim()}const jce=e=>{const{classes:t,variant:n,disabled:r,multiple:o,open:i,error:l}=e,c={select:["select",n,r&&"disabled",o&&"multiple",l&&"error"],icon:["icon",`icon${tn(n)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return An(c,Nce,t)},$ce=A.forwardRef(function(t,n){var St;const{"aria-describedby":r,"aria-label":o,autoFocus:i,autoWidth:l,children:c,className:f,defaultOpen:p,defaultValue:g,disabled:v,displayEmpty:w,error:C=!1,IconComponent:T,inputRef:k,labelId:P,MenuProps:O={},multiple:L,name:D,onBlur:N,onChange:F,onClose:B,onFocus:V,onOpen:G,open:q,readOnly:z,renderValue:$,required:K,SelectDisplayProps:te={},tabIndex:re,type:oe,value:ue,variant:Q="standard",...ce}=t,[ae,fe]=Hv({controlled:ue,default:g,name:"Select"}),[le,pe]=Hv({controlled:q,default:p,name:"Select"}),Fe=A.useRef(null),Be=A.useRef(null),[Ze,it]=A.useState(null),{current:ot}=A.useRef(q!=null),[ut,st]=A.useState(),ct=yi(n,k),Ae=A.useCallback(kt=>{Be.current=kt,kt&&it(kt)},[]),Z=Ze==null?void 0:Ze.parentNode;A.useImperativeHandle(ct,()=>({focus:()=>{Be.current.focus()},node:Fe.current,value:ae}),[ae]),A.useEffect(()=>{p&&le&&Ze&&!ot&&(st(l?null:Z.clientWidth),Be.current.focus())},[Ze,l]),A.useEffect(()=>{i&&Be.current.focus()},[i]),A.useEffect(()=>{if(!P)return;const kt=ka(Be.current).getElementById(P);if(kt){const cn=()=>{getSelection().isCollapsed&&Be.current.focus()};return kt.addEventListener("click",cn),()=>{kt.removeEventListener("click",cn)}}},[P]);const ne=(kt,cn)=>{kt?G&&G(cn):B&&B(cn),ot||(st(l?null:Z.clientWidth),pe(kt))},ee=kt=>{kt.button===0&&(kt.preventDefault(),Be.current.focus(),ne(!0,kt))},ye=kt=>{ne(!1,kt)},Ie=A.Children.toArray(c),ge=kt=>{const cn=Ie.find(an=>an.props.value===kt.target.value);cn!==void 0&&(fe(cn.props.value),F&&F(kt,cn))},$e=kt=>cn=>{let an;if(cn.currentTarget.hasAttribute("tabindex")){if(L){an=Array.isArray(ae)?ae.slice():[];const Qn=ae.indexOf(kt.props.value);Qn===-1?an.push(kt.props.value):an.splice(Qn,1)}else an=kt.props.value;if(kt.props.onClick&&kt.props.onClick(cn),ae!==an&&(fe(an),F)){const Qn=cn.nativeEvent||cn,tr=new Qn.constructor(Qn.type,Qn);Object.defineProperty(tr,"target",{writable:!0,value:{value:an,name:D}}),F(tr,kt)}L||ne(!1,cn)}},nt=kt=>{z||[" ","ArrowUp","ArrowDown","Enter"].includes(kt.key)&&(kt.preventDefault(),ne(!0,kt))},pt=Ze!==null&&le,wt=kt=>{!pt&&N&&(Object.defineProperty(kt,"target",{writable:!0,value:{value:ae,name:D}}),N(kt))};delete ce["aria-invalid"];let mt,zt;const Pt=[];let Zt=!1;(ok({value:ae})||w)&&($?mt=$(ae):Zt=!0);const We=Ie.map(kt=>{if(!A.isValidElement(kt))return null;let cn;if(L){if(!Array.isArray(ae))throw new Error(im(2));cn=ae.some(an=>C$(an,kt.props.value)),cn&&Zt&&Pt.push(kt.props.children)}else cn=C$(ae,kt.props.value),cn&&Zt&&(zt=kt.props.children);return A.cloneElement(kt,{"aria-selected":cn?"true":"false",onClick:$e(kt),onKeyUp:an=>{an.key===" "&&an.preventDefault(),kt.props.onKeyUp&&kt.props.onKeyUp(an)},role:"option",selected:cn,value:void 0,"data-value":kt.props.value})});Zt&&(L?Pt.length===0?mt=null:mt=Pt.reduce((kt,cn,an)=>(kt.push(cn),an<Pt.length-1&&kt.push(", "),kt),[]):mt=zt);let Ge=ut;!l&&ot&&Ze&&(Ge=Z.clientWidth);let Rt;typeof re<"u"?Rt=re:Rt=v?null:0;const Dt=te.id||(D?`mui-component-select-${D}`:void 0),qt={...t,variant:Q,value:ae,open:pt,error:C},Yt=jce(qt),xt={...O.PaperProps,...(St=O.slotProps)==null?void 0:St.paper},Et=Li();return ie.jsxs(A.Fragment,{children:[ie.jsx(Fce,{as:"div",ref:Ae,tabIndex:Rt,role:"combobox","aria-controls":Et,"aria-disabled":v?"true":void 0,"aria-expanded":pt?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[P,Dt].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":K?"true":void 0,"aria-invalid":C?"true":void 0,onKeyDown:nt,onMouseDown:v||z?null:ee,onBlur:wt,onFocus:V,...te,ownerState:qt,className:fn(te.className,Yt.select,f),id:Dt,children:Uce(mt)?x$||(x$=ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):mt}),ie.jsx(Bce,{"aria-invalid":C,value:Array.isArray(ae)?ae.join(","):ae,name:D,ref:Fe,"aria-hidden":!0,onChange:ge,tabIndex:-1,disabled:v,className:Yt.nativeInput,autoFocus:i,required:K,...ce,ownerState:qt}),ie.jsx(zce,{as:T,className:Yt.icon,ownerState:qt}),ie.jsx(GG,{id:`menu-${D||""}`,anchorEl:Z,open:pt,onClose:ye,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...O,MenuListProps:{"aria-labelledby":P,role:"listbox","aria-multiselectable":L?"true":void 0,disableListWrap:!0,id:Et,...O.MenuListProps},slotProps:{...O.slotProps,paper:{...xt,style:{minWidth:Ge,...xt!=null?xt.style:null}}},children:We})]})}),Hce=e=>{const{classes:t}=e;return t},KF={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>cc(e)&&e!=="variant",slot:"Root"},Vce=sn(VF,KF)(""),qce=sn(GF,KF)(""),Gce=sn(qF,KF)(""),IA=A.forwardRef(function(t,n){const r=Kr({name:"MuiSelect",props:t}),{autoWidth:o=!1,children:i,classes:l={},className:c,defaultOpen:f=!1,displayEmpty:p=!1,IconComponent:g=j8,id:v,input:w,inputProps:C,label:T,labelId:k,MenuProps:P,multiple:O=!1,native:L=!1,onClose:D,onOpen:N,open:F,renderValue:B,SelectDisplayProps:V,variant:G="outlined",...q}=r,z=L?Lce:$ce,$=wm(),K=S_({props:r,muiFormControl:$,states:["variant","error"]}),te=K.variant||G,re={...r,variant:te,classes:l},oe=Hce(re),{root:ue,...Q}=oe,ce=w||{standard:ie.jsx(Vce,{ownerState:re}),outlined:ie.jsx(qce,{label:T,ownerState:re}),filled:ie.jsx(Gce,{ownerState:re})}[te],ae=yi(n,x_(ce));return ie.jsx(A.Fragment,{children:A.cloneElement(ce,{inputComponent:z,inputProps:{children:i,error:K.error,IconComponent:g,variant:te,type:void 0,multiple:O,...L?{id:v}:{autoWidth:o,defaultOpen:f,displayEmpty:p,labelId:k,MenuProps:P,onClose:D,onOpen:N,open:F,renderValue:B,SelectDisplayProps:{id:v,...V}},...C,classes:C?Xl(Q,C.classes):Q,...w?w.props.inputProps:{}},...(O&&L||p)&&te==="outlined"?{notched:!0}:{},ref:ae,className:fn(ce.props.className,c,oe.root),...!w&&{variant:te},...q})})});IA.muiName="Select";function Wce(e){return Rr("MuiTextField",e)}Ar("MuiTextField",["root"]);const Kce={standard:VF,filled:qF,outlined:GF},Yce=e=>{const{classes:t}=e;return An({root:["root"]},Wce,t)},Zce=sn(HG,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),YG=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiTextField"}),{autoComplete:o,autoFocus:i=!1,children:l,className:c,color:f="primary",defaultValue:p,disabled:g=!1,error:v=!1,FormHelperTextProps:w,fullWidth:C=!1,helperText:T,id:k,InputLabelProps:P,inputProps:O,InputProps:L,inputRef:D,label:N,maxRows:F,minRows:B,multiline:V=!1,name:G,onBlur:q,onChange:z,onFocus:$,placeholder:K,required:te=!1,rows:re,select:oe=!1,SelectProps:ue,slots:Q={},slotProps:ce={},type:ae,value:fe,variant:le="outlined",...pe}=r,Fe={...r,autoFocus:i,color:f,disabled:g,error:v,fullWidth:C,multiline:V,required:te,select:oe,variant:le},Be=Yce(Fe),Ze=Li(k),it=T&&Ze?`${Ze}-helper-text`:void 0,ot=N&&Ze?`${Ze}-label`:void 0,ut=Kce[le],st={slots:Q,slotProps:{input:L,inputLabel:P,htmlInput:O,formHelperText:w,select:ue,...ce}},ct={},Ae=st.slotProps.inputLabel;le==="outlined"&&(Ae&&typeof Ae.shrink<"u"&&(ct.notched=Ae.shrink),ct.label=N),oe&&((!ue||!ue.native)&&(ct.id=void 0),ct["aria-describedby"]=void 0);const[Z,ne]=Di("input",{elementType:ut,externalForwardedProps:st,additionalProps:ct,ownerState:Fe}),[ee,ye]=Di("inputLabel",{elementType:VG,externalForwardedProps:st,ownerState:Fe}),[Ie,ge]=Di("htmlInput",{elementType:"input",externalForwardedProps:st,ownerState:Fe}),[$e,nt]=Di("formHelperText",{elementType:ece,externalForwardedProps:st,ownerState:Fe}),[pt,wt]=Di("select",{elementType:IA,externalForwardedProps:st,ownerState:Fe}),mt=ie.jsx(Z,{"aria-describedby":it,autoComplete:o,autoFocus:i,defaultValue:p,fullWidth:C,multiline:V,name:G,rows:re,maxRows:F,minRows:B,type:ae,value:fe,id:Ze,inputRef:D,onBlur:q,onChange:z,onFocus:$,placeholder:K,inputProps:ge,slots:{input:Q.htmlInput?Ie:void 0},...ne});return ie.jsxs(Zce,{className:fn(Be.root,c),disabled:g,error:v,fullWidth:C,ref:n,required:te,color:f,variant:le,ownerState:Fe,...pe,children:[N!=null&&N!==""&&ie.jsx(ee,{htmlFor:Ze,id:ot,...ye,children:N}),oe?ie.jsx(pt,{"aria-describedby":it,id:Ze,labelId:ot,value:fe,input:mt,...wt,children:l}):mt,T&&ie.jsx($e,{id:it,...nt,children:T})]})}),Xce=(e,t)=>{const n=new Set(Object.keys(e).filter(i=>e[i]===!1)),r=new Set(Object.keys(t).filter(i=>t[i]===!1));if(n.size!==r.size)return!1;let o=!0;return n.forEach(i=>{r.has(i)||(o=!1)}),o},Qce=(e,t)=>(e.headerName||e.field).toLowerCase().indexOf(t)>-1,Jce=e=>{const{classes:t}=e;return An({root:["columnsManagement"],header:["columnsManagementHeader"],searchInput:["columnsManagementSearchInput"],footer:["columnsManagementFooter"],row:["columnsManagementRow"]},ho,t)},S$=new Intl.Collator;function ede(e){var oe,ue,Q,ce;const t=Jr(),n=A.useRef(null),r=un(t,Ch),o=Lh(()=>kd(t)).current,i=un(t,kd),l=er(),[c,f]=A.useState(""),p=Jce(l),{sort:g,searchPredicate:v=Qce,autoFocusSearchField:w=!0,disableShowHideToggle:C=!1,disableResetButton:T=!1,toggleAllMode:k="all",getTogglableColumns:P,searchInputProps:O}=e,L=A.useMemo(()=>Xce(i,o),[i,o]),D=A.useMemo(()=>{switch(g){case"asc":return[...r].sort((ae,fe)=>S$.compare(ae.headerName||ae.field,fe.headerName||fe.field));case"desc":return[...r].sort((ae,fe)=>-S$.compare(ae.headerName||ae.field,fe.headerName||fe.field));default:return r}},[r,g]),N=ae=>{const{name:fe}=ae.target;t.current.setColumnVisibility(fe,i[fe]===!1)},F=A.useMemo(()=>{const ae=P?P(D):null,fe=ae?D.filter(({field:le})=>ae.includes(le)):D;return c?fe.filter(le=>v(le,c.toLowerCase())):fe},[D,c,v,P]),B=A.useCallback(ae=>{const fe=kd(t),le=we({},fe),pe=P?P(r):null;return(k==="filteredOnly"?F:r).forEach(Fe=>{Fe.hideable&&(pe==null||pe.includes(Fe.field))&&(ae?delete le[Fe.field]:le[Fe.field]=!1)}),t.current.setColumnVisibilityModel(le)},[t,r,P,k,F]),V=A.useCallback(ae=>{f(ae.target.value)},[]),G=A.useMemo(()=>F.filter(ae=>ae.hideable),[F]),q=A.useMemo(()=>G.every(ae=>i[ae.field]==null||i[ae.field]!==!1),[i,G]),z=A.useMemo(()=>G.every(ae=>i[ae.field]===!1),[i,G]),$=A.useRef(null);A.useEffect(()=>{w?n.current.focus():$.current&&typeof $.current.focus=="function"&&$.current.focus()},[w]);let K=!1;const te=ae=>K===!1&&ae.hideable!==!1?(K=!0,!0):!1,re=A.useCallback(()=>{f(""),n.current.focus()},[]);return ie.jsxs(A.Fragment,{children:[ie.jsx(nde,{className:p.header,ownerState:l,children:ie.jsx(rde,we({as:l.slots.baseTextField,ownerState:l,placeholder:t.current.getLocaleText("columnsManagementSearchTitle"),inputRef:n,className:p.searchInput,value:c,onChange:V,variant:"outlined",size:"small",type:"search",InputProps:{startAdornment:ie.jsx(l.slots.baseInputAdornment,{position:"start",children:ie.jsx(l.slots.quickFilterIcon,{})}),endAdornment:ie.jsx(l.slots.baseIconButton,we({"aria-label":t.current.getLocaleText("columnsManagementDeleteIconLabel"),size:"small",sx:[c?{visibility:"visible"}:{visibility:"hidden"}],tabIndex:-1,onClick:re},(oe=l.slotProps)==null?void 0:oe.baseIconButton,{children:ie.jsx(l.slots.quickFilterClearIcon,{fontSize:"small"})}))},inputProps:{"aria-label":t.current.getLocaleText("columnsManagementSearchTitle")},autoComplete:"off",fullWidth:!0},(ue=l.slotProps)==null?void 0:ue.baseTextField,O))}),ie.jsxs(tde,{className:p.root,ownerState:l,children:[F.map(ae=>{var fe;return ie.jsx(h$,{className:p.row,control:ie.jsx(l.slots.baseCheckbox,we({disabled:ae.hideable===!1,checked:i[ae.field]!==!1,onClick:N,name:ae.field,sx:{p:.5},inputRef:te(ae)?$:void 0},(fe=l.slotProps)==null?void 0:fe.baseCheckbox)),label:ae.headerName||ae.field},ae.field)}),F.length===0&&ie.jsx(ide,{ownerState:l,children:t.current.getLocaleText("columnsManagementNoColumns")})]}),(!C||!T)&&F.length>0?ie.jsxs(ode,{ownerState:l,className:p.footer,children:[C?ie.jsx("span",{}):ie.jsx(h$,{control:ie.jsx(l.slots.baseCheckbox,we({disabled:G.length===0,checked:q,indeterminate:!q&&!z,onClick:()=>B(!q),name:t.current.getLocaleText("columnsManagementShowHideAllText"),sx:{p:.5}},(Q=l.slotProps)==null?void 0:Q.baseCheckbox)),label:t.current.getLocaleText("columnsManagementShowHideAllText")}),T?null:ie.jsx(l.slots.baseButton,we({onClick:()=>t.current.setColumnVisibilityModel(o),disabled:L},(ce=l.slotProps)==null?void 0:ce.baseButton,{children:t.current.getLocaleText("columnsManagementReset")}))]}):null]})}const tde=sn("div",{name:"MuiDataGrid",slot:"ColumnsManagement",overridesResolver:(e,t)=>t.columnsManagement})(({theme:e})=>({padding:e.spacing(0,3,1.5),display:"flex",flexDirection:"column",overflow:"auto",flex:"1 1",maxHeight:400,alignItems:"flex-start"})),nde=sn("div",{name:"MuiDataGrid",slot:"ColumnsManagementHeader",overridesResolver:(e,t)=>t.columnsManagementHeader})(({theme:e})=>({padding:e.spacing(1.5,3)})),rde=sn(YG,{name:"MuiDataGrid",slot:"ColumnsManagementSearchInput",overridesResolver:(e,t)=>t.columnsManagementSearchInput})(({theme:e})=>({[`& .${Ys.root}`]:{padding:e.spacing(0,1.5,0,1.5)},[`& .${Ys.input}::-webkit-search-decoration,
  & .${Ys.input}::-webkit-search-cancel-button,
  & .${Ys.input}::-webkit-search-results-button,
  & .${Ys.input}::-webkit-search-results-decoration`]:{display:"none"}})),ode=sn("div",{name:"MuiDataGrid",slot:"ColumnsManagementFooter",overridesResolver:(e,t)=>t.columnsManagementFooter})(({theme:e})=>({padding:e.spacing(.5,1,.5,3),display:"flex",justifyContent:"space-between",borderTop:`1px solid ${e.palette.divider}`})),ide=sn("div")(({theme:e})=>({padding:e.spacing(.5,0),color:e.palette.grey[500]})),ade=No(function(t,n){var L,D;const{children:r,slotProps:o={}}=t,i=o.button||{},l=o.tooltip||{},c=Jr(),f=er(),p=Li(),g=Li(),[v,w]=A.useState(!1),C=A.useRef(null),T=yi(n,C),k=N=>{var F;w(B=>!B),(F=i.onClick)==null||F.call(i,N)},P=()=>w(!1),O=N=>{N.key==="Tab"&&N.preventDefault(),BG(N.key)&&P()};return r==null?null:ie.jsxs(A.Fragment,{children:[ie.jsx(f.slots.baseTooltip,we({title:c.current.getLocaleText("toolbarExportLabel"),enterDelay:1e3},(L=f.slotProps)==null?void 0:L.baseTooltip,l,{children:ie.jsx(f.slots.baseButton,we({size:"small",startIcon:ie.jsx(f.slots.exportIcon,{}),"aria-expanded":v,"aria-label":c.current.getLocaleText("toolbarExportLabel"),"aria-haspopup":"menu","aria-controls":v?g:void 0,id:p,onClick:k},(D=f.slotProps)==null?void 0:D.baseButton,i,{ref:T,children:c.current.getLocaleText("toolbarExport")}))})),ie.jsx(MF,{open:v,target:C.current,onClose:P,position:"bottom-start",children:ie.jsx(hA,{id:g,className:Ke.menuList,"aria-labelledby":p,onKeyDown:O,autoFocusItem:v,children:A.Children.map(r,N=>A.isValidElement(N)?A.cloneElement(N,{hideMenu:P}):N)})})]})}),sde=["hideMenu","options"],lde=["hideMenu","options"],ude=["csvOptions","printOptions","excelOptions"];function cde(e){const t=Jr(),{hideMenu:n,options:r}=e,o=sr(e,sde);return ie.jsx(Rd,we({onClick:()=>{t.current.exportDataAsCsv(r),n==null||n()}},o,{children:t.current.getLocaleText("toolbarExportCSV")}))}function dde(e){const t=Jr(),{hideMenu:n,options:r}=e,o=sr(e,lde);return ie.jsx(Rd,we({onClick:()=>{t.current.exportDataAsPrint(r),n==null||n()}},o,{children:t.current.getLocaleText("toolbarExportPrint")}))}No(function(t,n){const r=t,{csvOptions:o={},printOptions:i={},excelOptions:l}=r,c=sr(r,ude),p=Jr().current.unstable_applyPipeProcessors("exportMenu",[],{excelOptions:l,csvOptions:o,printOptions:i}).sort((g,v)=>g.componentName>v.componentName?1:-1);return p.length===0?null:ie.jsx(ade,we({},c,{ref:n,children:p.map((g,v)=>A.cloneElement(g.component,{key:v}))}))});const hde=["className","selectedRowCount"],fde=e=>{const{classes:t}=e;return An({root:["selectedRowCount"]},ho,t)},pde=Ti("div",{name:"MuiDataGrid",slot:"SelectedRowCount",overridesResolver:(e,t)=>t.selectedRowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2),visibility:"hidden",width:0,height:0,[e.breakpoints.up("sm")]:{visibility:"visible",width:"auto",height:"auto"}})),mde=No(function(t,n){const{className:r,selectedRowCount:o}=t,i=sr(t,hde),l=Jr(),c=er(),f=fde(c),p=l.current.getLocaleText("footerRowSelected")(o);return ie.jsx(pde,we({className:fn(f.root,r),ownerState:c},i,{ref:n,children:p}))}),gde=No(function(t,n){var v,w;const r=Jr(),o=er(),i=un(r,Are),l=un(r,ooe),c=un(r,LF),f=!o.hideFooterSelectedRowCount&&l>0?ie.jsx(mde,{selectedRowCount:l}):ie.jsx("div",{}),p=!o.hideFooterRowCount&&!o.pagination?ie.jsx(o.slots.footerRowCount,we({},(v=o.slotProps)==null?void 0:v.footerRowCount,{rowCount:i,visibleRowCount:c})):null,g=o.pagination&&!o.hideFooterPagination&&o.slots.pagination&&ie.jsx(o.slots.pagination,we({},(w=o.slotProps)==null?void 0:w.pagination));return ie.jsxs(gse,we({},t,{ref:n,children:[f,p,g]}))});function yde(){var i,l;const e=Jr(),t=un(e,Ch),n=er(),r=un(e,uS),o=e.current.unstable_applyPipeProcessors("preferencePanel",null,r.openedPanelValue??l_.filters);return ie.jsx(n.slots.panel,we({as:n.slots.basePopper,open:t.length>0&&r.open,id:r.panelId,"aria-labelledby":r.labelId},(i=n.slotProps)==null?void 0:i.panel,(l=n.slotProps)==null?void 0:l.basePopper,{children:o}))}function vde(){var t;const e=er();return ie.jsxs(A.Fragment,{children:[ie.jsx(yde,{}),e.slots.toolbar&&ie.jsx(e.slots.toolbar,we({},(t=e.slotProps)==null?void 0:t.toolbar))]})}function _de(e){return Rr("MuiLinearProgress",e)}Ar("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const FD=4,zD=qf`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,bde=typeof zD!="string"?ly`
        animation: ${zD} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,BD=qf`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,wde=typeof BD!="string"?ly`
        animation: ${BD} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,UD=qf`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,xde=typeof UD!="string"?ly`
        animation: ${UD} 3s infinite linear;
      `:null,Cde=e=>{const{classes:t,variant:n,color:r}=e,o={root:["root",`color${tn(r)}`,n],dashed:["dashed",`dashedColor${tn(r)}`],bar1:["bar",`barColor${tn(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${tn(r)}`,n==="buffer"&&`color${tn(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return An(o,_de,t)},YF=(e,t)=>e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Fx(e.palette[t].main,.62):Nx(e.palette[t].main,.5),Sde=sn("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${tn(n.color)}`],t[n.variant]]}})(mr(({theme:e})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{backgroundColor:YF(e,t)}})),{props:({ownerState:t})=>t.color==="inherit"&&t.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),Ede=sn("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${tn(n.color)}`]]}})(mr(({theme:e})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(e.palette).filter(Ia()).map(([t])=>{const n=YF(e,t);return{props:{color:t},style:{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`}}})]})),xde||{animation:`${UD} 3s infinite linear`}),Tde=sn("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${tn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(mr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main}})),{props:{variant:"determinate"},style:{transition:`transform .${FD}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${FD}s linear`}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:bde||{animation:`${zD} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Ide=sn("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${tn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(mr(({theme:e})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{"--LinearProgressBar2-barColor":(e.vars||e).palette[t].main}})),{props:({ownerState:t})=>t.variant!=="buffer"&&t.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:t})=>t.variant!=="buffer"&&t.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t,variant:"buffer"},style:{backgroundColor:YF(e,t),transition:`transform .${FD}s linear`}})),{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:{width:"auto"}},{props:({ownerState:t})=>t.variant==="indeterminate"||t.variant==="query",style:wde||{animation:`${BD} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),kde=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiLinearProgress"}),{className:o,color:i="primary",value:l,valueBuffer:c,variant:f="indeterminate",...p}=r,g={...r,color:i,variant:f},v=Cde(g),w=Zc(),C={},T={bar1:{},bar2:{}};if((f==="determinate"||f==="buffer")&&l!==void 0){C["aria-valuenow"]=Math.round(l),C["aria-valuemin"]=0,C["aria-valuemax"]=100;let k=l-100;w&&(k=-k),T.bar1.transform=`translateX(${k}%)`}if(f==="buffer"&&c!==void 0){let k=(c||0)-100;w&&(k=-k),T.bar2.transform=`translateX(${k}%)`}return ie.jsxs(Sde,{className:fn(v.root,o),ownerState:g,role:"progressbar",...C,ref:n,...p,children:[f==="buffer"?ie.jsx(Ede,{className:v.dashed,ownerState:g}):null,ie.jsx(Tde,{className:v.bar1,ownerState:g,style:T.bar1}),f==="determinate"?null:ie.jsx(Ide,{className:v.bar2,ownerState:g,style:T.bar2})]})});function Pde(e){return Rr("MuiCircularProgress",e)}Ar("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const ag=44,jD=qf`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,$D=qf`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,Ade=typeof jD!="string"?ly`
        animation: ${jD} 1.4s linear infinite;
      `:null,Mde=typeof $D!="string"?ly`
        animation: ${$D} 1.4s ease-in-out infinite;
      `:null,Rde=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,i={root:["root",n,`color${tn(r)}`],svg:["svg"],circle:["circle",`circle${tn(n)}`,o&&"circleDisableShrink"]};return An(i,Pde,t)},Ode=sn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${tn(n.color)}`]]}})(mr(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Ade||{animation:`${jD} 1.4s linear infinite`}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Dde=sn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Lde=sn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${tn(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(mr(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Mde||{animation:`${$D} 1.4s ease-in-out infinite`}}]}))),Nde=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiCircularProgress"}),{className:o,color:i="primary",disableShrink:l=!1,size:c=40,style:f,thickness:p=3.6,value:g=0,variant:v="indeterminate",...w}=r,C={...r,color:i,disableShrink:l,size:c,thickness:p,value:g,variant:v},T=Rde(C),k={},P={},O={};if(v==="determinate"){const L=2*Math.PI*((ag-p)/2);k.strokeDasharray=L.toFixed(3),O["aria-valuenow"]=Math.round(g),k.strokeDashoffset=`${((100-g)/100*L).toFixed(3)}px`,P.transform="rotate(-90deg)"}return ie.jsx(Ode,{className:fn(T.root,o),style:{width:c,height:c,...P,...f},ownerState:C,ref:n,role:"progressbar",...O,...w,children:ie.jsx(Dde,{className:T.svg,ownerState:C,viewBox:`${ag/2} ${ag/2} ${ag} ${ag}`,children:ie.jsx(Lde,{className:T.circle,style:k,ownerState:C,cx:ag,cy:ag,r:(ag-p)/2,fill:"none",strokeWidth:p})})})}),ZF=(e,t,n,r,o)=>{const i=o.hasScrollY?o.scrollbarSize:0;let l;switch(e){case Oi.LEFT:l=r[n];break;case Oi.RIGHT:l=o.columnsTotalWidth-r[n]-t+i;break;default:l=0;break}return l},dC={root:Ke.scrollbarFiller,header:Ke["scrollbarFiller--header"],borderTop:Ke["scrollbarFiller--borderTop"],borderBottom:Ke["scrollbarFiller--borderBottom"],pinnedRight:Ke["scrollbarFiller--pinnedRight"]};function XF({header:e,borderTop:t=!0,borderBottom:n,pinnedRight:r}){return ie.jsx("div",{role:"presentation",className:fn(dC.root,e&&dC.header,t&&dC.borderTop,n&&dC.borderBottom,r&&dC.pinnedRight)})}const Fde=Ti("div",{name:"MuiDataGrid",slot:"SkeletonLoadingOverlay",overridesResolver:(e,t)=>t.skeletonLoadingOverlay})({minWidth:"100%",width:"max-content",height:"100%",overflow:"clip"}),zde=e=>{const{classes:t}=e;return An({root:["skeletonLoadingOverlay"]},ho,t)},E$=e=>parseInt(e.getAttribute("data-colindex"),10),Bde=No(function(t,n){const r=er(),{slots:o}=r,i=zde({classes:r.classes}),l=A.useRef(null),c=yi(l,n),f=Jr(),p=un(f,Ql),g=(p==null?void 0:p.viewportInnerSize.height)??0,v=Math.ceil(g/p.rowHeight),w=un(f,vF),C=un(f,cy),T=A.useMemo(()=>C.filter(B=>B<=w).length,[w,C]),k=un(f,ss),P=A.useMemo(()=>k.slice(0,T),[k,T]),O=un(f,ZS),L=A.useCallback((B,V,G)=>{const q=ZF(G,B,V,C,p);return{[G]:q}},[p,C]),D=A.useCallback(B=>{if(O.left.findIndex(V=>V.field===B)!==-1)return Oi.LEFT;if(O.right.findIndex(V=>V.field===B)!==-1)return Oi.RIGHT},[O.left,O.right]),N=A.useMemo(()=>{const B=[];for(let V=0;V<v;V+=1){const G=[];for(let q=0;q<P.length;q+=1){const z=P[q],$=D(z.field),K=$===Oi.LEFT,te=$===Oi.RIGHT,re=$?O[$].length:P.length-O.left.length-O.right.length,oe=$?O[$].findIndex(st=>st.field===z.field):q-O.left.length,ue=$&&L(z.computedWidth,q,$),Q=p.columnsTotalWidth<p.viewportOuterSize.width,ce=EA($,oe,re,r.showCellVerticalBorder,Q),ae=TA($,oe),fe=q===P.length-1,le=te&&oe===0,pe=le&&Q,Fe=fe&&!le&&Q,Be=p.viewportOuterSize.width-p.columnsTotalWidth,Ze=Math.max(0,Be),it=ie.jsx(o.skeletonCell,{width:Ze,empty:!0},`skeleton-filler-column-${V}`),ot=p.hasScrollY?p.scrollbarSize:0,ut=fe&&ot!==0;pe&&G.push(it),G.push(ie.jsx(o.skeletonCell,{field:z.field,type:z.type,align:z.align,width:"var(--width)",height:p.rowHeight,"data-colindex":q,className:fn(K&&Ke["cell--pinnedLeft"],te&&Ke["cell--pinnedRight"],ce&&Ke["cell--withRightBorder"],ae&&Ke["cell--withLeftBorder"]),style:we({"--width":`${z.computedWidth}px`},ue)},`skeleton-column-${V}-${z.field}`)),Fe&&G.push(it),ut&&G.push(ie.jsx(XF,{pinnedRight:O.right.length>0},`skeleton-scrollbar-filler-${V}`))}B.push(ie.jsx("div",{className:fn(Ke.row,Ke.rowSkeleton,V===0&&Ke["row--firstVisible"]),children:G},`skeleton-row-${V}`))}return B},[o,P,O,v,r.showCellVerticalBorder,p.columnsTotalWidth,p.viewportOuterSize.width,p.rowHeight,p.hasScrollY,p.scrollbarSize,D,L]);return Hn(f,"columnResize",B=>{var ue,Q,ce;const{colDef:V,width:G}=B,q=(ue=l.current)==null?void 0:ue.querySelectorAll(`[data-field="${xm(V.field)}"]`);if(!q)throw new Error("MUI X: Expected skeleton cells to be defined with `data-field` attribute.");const z=P.findIndex(ae=>ae.field===V.field),$=D(V.field),K=$===Oi.LEFT,te=$===Oi.RIGHT,re=getComputedStyle(q[0]).getPropertyValue("--width"),oe=parseInt(re,10)-G;if(q&&q.forEach(ae=>{ae.style.setProperty("--width",`${G}px`)}),K){const ae=(Q=l.current)==null?void 0:Q.querySelectorAll(`.${Ke["cell--pinnedLeft"]}`);ae==null||ae.forEach(fe=>{E$(fe)>z&&(fe.style.left=`${parseInt(getComputedStyle(fe).left,10)-oe}px`)})}if(te){const ae=(ce=l.current)==null?void 0:ce.querySelectorAll(`.${Ke["cell--pinnedRight"]}`);ae==null||ae.forEach(fe=>{E$(fe)<z&&(fe.style.right=`${parseInt(getComputedStyle(fe).right,10)+oe}px`)})}}),ie.jsx(Fde,we({className:i.root},t,{ref:c,children:N}))}),Ude=["variant","noRowsVariant","style"],jde={"circular-progress":{component:Nde,style:{}},"linear-progress":{component:kde,style:{display:"block"}},skeleton:{component:Bde,style:{display:"block"}}},$de=No(function(t,n){const{variant:r="circular-progress",noRowsVariant:o="circular-progress",style:i}=t,l=sr(t,Ude),c=Jr(),f=un(c,pA),p=jde[f===0?o:r];return ie.jsx($F,we({style:we({},p.style,i)},l,{ref:n,children:ie.jsx(p.component,{})}))}),Hde=No(function(t,n){const o=Jr().current.getLocaleText("noRowsLabel");return ie.jsx($F,we({},t,{ref:n,children:o}))}),Vde=A.createContext(),qde=A.createContext();function Gde(e){return Rr("MuiTableCell",e)}const Wde=Ar("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Kde=e=>{const{classes:t,variant:n,align:r,padding:o,size:i,stickyHeader:l}=e,c={root:["root",n,l&&"stickyHeader",r!=="inherit"&&`align${tn(r)}`,o!=="normal"&&`padding${tn(o)}`,`size${tn(i)}`]};return An(c,Gde,t)},Yde=sn("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${tn(n.size)}`],n.padding!=="normal"&&t[`padding${tn(n.padding)}`],n.align!=="inherit"&&t[`align${tn(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(mr(({theme:e})=>({...e.typography.body2,display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Fx(jr(e.palette.divider,1),.88):Nx(jr(e.palette.divider,1),.68)}`,textAlign:"left",padding:16,variants:[{props:{variant:"head"},style:{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium}},{props:{variant:"body"},style:{color:(e.vars||e).palette.text.primary}},{props:{variant:"footer"},style:{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)}},{props:{size:"small"},style:{padding:"6px 16px",[`&.${Wde.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}}},{props:{padding:"checkbox"},style:{width:48,padding:"0 0 0 4px"}},{props:{padding:"none"},style:{padding:0}},{props:{align:"left"},style:{textAlign:"left"}},{props:{align:"center"},style:{textAlign:"center"}},{props:{align:"right"},style:{textAlign:"right",flexDirection:"row-reverse"}},{props:{align:"justify"},style:{textAlign:"justify"}},{props:({ownerState:t})=>t.stickyHeader,style:{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default}}]}))),HD=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiTableCell"}),{align:o="inherit",className:i,component:l,padding:c,scope:f,size:p,sortDirection:g,variant:v,...w}=r,C=A.useContext(Vde),T=A.useContext(qde),k=T&&T.variant==="head";let P;l?P=l:P=k?"th":"td";let O=f;P==="td"?O=void 0:!O&&k&&(O="col");const L=v||T&&T.variant,D={...r,align:o,component:P,padding:c||(C&&C.padding?C.padding:"normal"),size:p||(C&&C.size?C.size:"medium"),sortDirection:g,stickyHeader:L==="head"&&C&&C.stickyHeader,variant:L},N=Kde(D);let F=null;return g&&(F=g==="asc"?"ascending":"descending"),ie.jsx(Yde,{as:P,ref:n,className:fn(N.root,i),"aria-sort":F,scope:O,ownerState:D,...w})});function Zde(e){return Rr("MuiToolbar",e)}Ar("MuiToolbar",["root","gutters","regular","dense"]);const Xde=e=>{const{classes:t,disableGutters:n,variant:r}=e;return An({root:["root",!n&&"gutters",r]},Zde,t)},Qde=sn("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(mr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),ZG=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiToolbar"}),{className:o,component:i="div",disableGutters:l=!1,variant:c="regular",...f}=r,p={...r,component:i,disableGutters:l,variant:c},g=Xde(p);return ie.jsx(Qde,{as:i,className:fn(g.root,o),ref:n,ownerState:p,...f})}),Jde=fo(ie.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),ehe=fo(ie.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),the=fo(ie.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),nhe=fo(ie.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),rhe=A.forwardRef(function(t,n){const{backIconButtonProps:r,count:o,disabled:i=!1,getItemAriaLabel:l,nextIconButtonProps:c,onPageChange:f,page:p,rowsPerPage:g,showFirstButton:v,showLastButton:w,slots:C={},slotProps:T={},...k}=t,P=Zc(),O=le=>{f(le,0)},L=le=>{f(le,p-1)},D=le=>{f(le,p+1)},N=le=>{f(le,Math.max(0,Math.ceil(o/g)-1))},F=C.firstButton??Ug,B=C.lastButton??Ug,V=C.nextButton??Ug,G=C.previousButton??Ug,q=C.firstButtonIcon??nhe,z=C.lastButtonIcon??the,$=C.nextButtonIcon??ehe,K=C.previousButtonIcon??Jde,te=P?B:F,re=P?V:G,oe=P?G:V,ue=P?F:B,Q=P?T.lastButton:T.firstButton,ce=P?T.nextButton:T.previousButton,ae=P?T.previousButton:T.nextButton,fe=P?T.firstButton:T.lastButton;return ie.jsxs("div",{ref:n,...k,children:[v&&ie.jsx(te,{onClick:O,disabled:i||p===0,"aria-label":l("first",p),title:l("first",p),...Q,children:P?ie.jsx(z,{...T.lastButtonIcon}):ie.jsx(q,{...T.firstButtonIcon})}),ie.jsx(re,{onClick:L,disabled:i||p===0,color:"inherit","aria-label":l("previous",p),title:l("previous",p),...ce??r,children:P?ie.jsx($,{...T.nextButtonIcon}):ie.jsx(K,{...T.previousButtonIcon})}),ie.jsx(oe,{onClick:D,disabled:i||(o!==-1?p>=Math.ceil(o/g)-1:!1),color:"inherit","aria-label":l("next",p),title:l("next",p),...ae??c,children:P?ie.jsx(K,{...T.previousButtonIcon}):ie.jsx($,{...T.nextButtonIcon})}),w&&ie.jsx(ue,{onClick:N,disabled:i||p>=Math.ceil(o/g)-1,"aria-label":l("last",p),title:l("last",p),...fe,children:P?ie.jsx(q,{...T.firstButtonIcon}):ie.jsx(z,{...T.lastButtonIcon})})]})});function ohe(e){return Rr("MuiTablePagination",e)}const qv=Ar("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var T$;const ihe=sn(HD,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(mr(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}}))),ahe=sn(ZG,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>({[`& .${qv.actions}`]:t.actions,...t.toolbar})})(mr(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${qv.actions}`]:{flexShrink:0,marginLeft:20}}))),she=sn("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),lhe=sn("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(mr(({theme:e})=>({...e.typography.body2,flexShrink:0}))),uhe=sn(IA,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>({[`& .${qv.selectIcon}`]:t.selectIcon,[`& .${qv.select}`]:t.select,...t.input,...t.selectRoot})})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${qv.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),che=sn(Rd,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),dhe=sn("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(mr(({theme:e})=>({...e.typography.body2,flexShrink:0})));function hhe({from:e,to:t,count:n}){return`${e}–${t} of ${n!==-1?n:`more than ${t}`}`}function fhe(e){return`Go to ${e} page`}const phe=e=>{const{classes:t}=e;return An({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},ohe,t)},mhe=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiTablePagination"}),{ActionsComponent:o=rhe,backIconButtonProps:i,colSpan:l,component:c=HD,count:f,disabled:p=!1,getItemAriaLabel:g=fhe,labelDisplayedRows:v=hhe,labelRowsPerPage:w="Rows per page:",nextIconButtonProps:C,onPageChange:T,onRowsPerPageChange:k,page:P,rowsPerPage:O,rowsPerPageOptions:L=[10,25,50,100],SelectProps:D={},showFirstButton:N=!1,showLastButton:F=!1,slotProps:B={},slots:V={},...G}=r,q=r,z=phe(q),$=(B==null?void 0:B.select)??D,K=$.native?"option":che;let te;(c===HD||c==="td")&&(te=l||1e3);const re=Li($.id),oe=Li($.labelId),ue=()=>f===-1?(P+1)*O:O===-1?f:Math.min(f,(P+1)*O),Q={slots:V,slotProps:B},[ce,ae]=Di("root",{ref:n,className:z.root,elementType:ihe,externalForwardedProps:{...Q,component:c,...G},ownerState:q,additionalProps:{colSpan:te}}),[fe,le]=Di("toolbar",{className:z.toolbar,elementType:ahe,externalForwardedProps:Q,ownerState:q}),[pe,Fe]=Di("spacer",{className:z.spacer,elementType:she,externalForwardedProps:Q,ownerState:q}),[Be,Ze]=Di("selectLabel",{className:z.selectLabel,elementType:lhe,externalForwardedProps:Q,ownerState:q,additionalProps:{id:oe}}),[it,ot]=Di("select",{className:z.select,elementType:uhe,externalForwardedProps:Q,ownerState:q}),[ut,st]=Di("menuItem",{className:z.menuItem,elementType:K,externalForwardedProps:Q,ownerState:q}),[ct,Ae]=Di("displayedRows",{className:z.displayedRows,elementType:dhe,externalForwardedProps:Q,ownerState:q});return ie.jsx(ce,{...ae,children:ie.jsxs(fe,{...le,children:[ie.jsx(pe,{...Fe}),L.length>1&&ie.jsx(Be,{...Ze,children:w}),L.length>1&&ie.jsx(it,{variant:"standard",...!$.variant&&{input:T$||(T$=ie.jsx(Bx,{}))},value:O,onChange:k,id:re,labelId:oe,...$,classes:{...$.classes,root:fn(z.input,z.selectRoot,($.classes||{}).root),select:fn(z.select,($.classes||{}).select),icon:fn(z.selectIcon,($.classes||{}).icon)},disabled:p,...ot,children:L.map(Z=>A.createElement(ut,{...st,key:Z.label?Z.label:Z,value:Z.value?Z.value:Z},Z.label?Z.label:Z))}),ie.jsx(ct,{...Ae,children:v({from:f===0?0:P*O+1,to:ue(),count:f===-1?-1:f,page:P})}),ie.jsx(o,{className:z.actions,backIconButtonProps:i,count:f,nextIconButtonProps:C,onPageChange:T,page:P,rowsPerPage:O,showFirstButton:N,showLastButton:F,slotProps:B.actions,slots:V.actions,getItemAriaLabel:g,disabled:p})]})})}),ghe=sn(mhe)(({theme:e})=>({maxHeight:"calc(100% + 1px)",flexGrow:1,[`& .${qv.selectLabel}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"block"}},[`& .${qv.input}`]:{display:"none",[e.breakpoints.up("sm")]:{display:"inline-flex"}}})),yhe=(e,t)=>({from:n,to:r,count:o,page:i})=>e({from:n,to:r,count:o,page:i,estimated:t}),vhe=({from:e,to:t,count:n,estimated:r})=>r?`${e}–${t} of ${n!==-1?n:`more than ${r>t?r:t}`}`:`${e}–${t} of ${n!==-1?n:`more than ${t}`}`,_he=No(function(t,n){const r=Jr(),o=er(),i=un(r,bu),l=un(r,Cw),c=un(r,pG),{paginationMode:f,loading:p,estimatedRowCount:g}=o,v=A.useMemo(()=>l===-1&&f==="server"&&p?{backIconButtonProps:{disabled:!0},nextIconButtonProps:{disabled:!0}}:{},[p,f,l]),w=A.useMemo(()=>Math.max(0,c-1),[c]),C=A.useMemo(()=>l===-1||i.page<=w?i.page:w,[w,i.page,l]),T=A.useCallback(N=>{const F=Number(N.target.value);r.current.setPageSize(F)},[r]),k=A.useCallback((N,F)=>{r.current.setPage(F)},[r]),O=(N=>{for(let F=0;F<o.pageSizeOptions.length;F+=1){const B=o.pageSizeOptions[F];if(typeof B=="number"){if(B===N)return!0}else if(B.value===N)return!0}return!1})(i.pageSize)?o.pageSizeOptions:[],L=r.current.getLocaleText("MuiTablePagination"),D=yhe(L.labelDisplayedRows||vhe,g);return ie.jsx(ghe,we({component:"div",count:l,page:C,rowsPerPageOptions:O,rowsPerPage:i.pageSize,onPageChange:k,onRowsPerPageChange:T},v,L,{labelDisplayedRows:D},t,{ref:n}))}),bhe=["className","rowCount","visibleRowCount"],whe=e=>{const{classes:t}=e;return An({root:["rowCount"]},ho,t)},xhe=Ti("div",{name:"MuiDataGrid",slot:"RowCount",overridesResolver:(e,t)=>t.rowCount})(({theme:e})=>({alignItems:"center",display:"flex",margin:e.spacing(0,2)})),Che=No(function(t,n){const{className:r,rowCount:o,visibleRowCount:i}=t,l=sr(t,bhe),c=Jr(),f=er(),p=whe(f);if(o===0)return null;const g=i<o?c.current.getLocaleText("footerTotalVisibleRows")(i,o):o.toLocaleString();return ie.jsxs(xhe,we({className:fn(p.root,r),ownerState:f},l,{ref:n,children:[c.current.getLocaleText("footerTotalRows")," ",g]}))});function She(e,t){return An(t,ho,e)}const Ehe=["selected","rowId","row","index","style","rowHeight","className","visibleColumns","pinnedColumns","offsetTop","offsetLeft","dimensions","renderContext","focusedColumnIndex","isFirstVisible","isLastVisible","isNotVisible","showBottomBorder","tabbableCell","onClick","onDoubleClick","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver"];function The({width:e}){return e?ie.jsx("div",{role:"presentation",className:fn(Ke.cell,Ke.cellEmpty),style:{"--width":`${e}px`}}):null}const Ihe=No(function(t,n){var xt;const{selected:r,rowId:o,row:i,index:l,style:c,rowHeight:f,className:p,visibleColumns:g,pinnedColumns:v,offsetLeft:w,dimensions:C,renderContext:T,focusedColumnIndex:k,isFirstVisible:P,isLastVisible:O,isNotVisible:L,showBottomBorder:D,onClick:N,onDoubleClick:F,onMouseEnter:B,onMouseLeave:V,onMouseOut:G,onMouseOver:q}=t,z=sr(t,Ehe),$=Hd(),K=kG(),te=A.useRef(null),re=er(),oe=I_($,re),ue=un($,bd),Q=un($,jx),ce=un($,cy),ae=un($,Ks),fe=yi(te,n),le=$.current.getRowNode(o),pe=C.hasScrollY?C.scrollbarSize:0,Fe=C.columnsTotalWidth<C.viewportOuterSize.width,Be=$.current.getRowMode(o)===Ii.Edit,Ze=re.editMode===zf.Row,it=un($,CA),ot=k!==void 0,ut=ot&&k>=v.left.length&&k<T.firstColumnIndex,st=ot&&k<g.length-v.right.length&&k>=T.lastColumnIndex,ct=She(re.classes,{root:["row",r&&"selected",Ze&&"row--editable",Be&&"row--editing",P&&"row--firstVisible",O&&"row--lastVisible",D&&"row--borderBottom",f==="auto"&&"row--dynamicHeight"]}),Ae=K.hooks.useGridRowAriaAttributes();A.useLayoutEffect(()=>{if(oe.range){const Et=$.current.getRowIndexRelativeToVisibleRows(o);Et!==void 0&&$.current.unstable_setLastMeasuredRowIndex(Et)}if(te.current&&f==="auto")return $.current.observeRowHeight(te.current,o)},[$,oe.range,f,o]);const Z=A.useCallback((Et,St)=>kt=>{nE(kt)||$.current.getRow(o)&&($.current.publishEvent(Et,$.current.getRowParams(o),kt),St&&St(kt))},[$,o]),ne=A.useCallback(Et=>{const St=fk(Et.target,Ke.cell),kt=St==null?void 0:St.getAttribute("data-field");if(kt){if(kt===Vx.field||kt===gA||kt==="__reorder__"||$.current.getCellMode(o,kt)===pi.Edit)return;const cn=$.current.getColumn(kt);if((cn==null?void 0:cn.type)===fA)return}Z("rowClick",N)(Et)},[$,N,Z,o]),{slots:ee,slotProps:ye,disableColumnReorder:Ie}=re,ge=re.rowReordering,$e=un($,()=>we({},$.current.getRowHeightEntry(o)),_8),nt=A.useMemo(()=>{if(L)return{opacity:0,width:0,height:0};const Et=we({},c,{maxHeight:f==="auto"?"none":f,minHeight:f,"--height":typeof f=="number"?`${f}px`:f});if($e.spacingTop){const St=re.rowSpacingType==="border"?"borderTopWidth":"marginTop";Et[St]=$e.spacingTop}if($e.spacingBottom){const St=re.rowSpacingType==="border"?"borderBottomWidth":"marginBottom";let kt=Et[St];typeof kt!="number"&&(kt=parseInt(kt||"0",10)),kt+=$e.spacingBottom,Et[St]=kt}return Et},[L,f,c,$e,re.rowSpacingType]),pt=$.current.unstable_applyPipeProcessors("rowClassName",[],o),wt=le?Ae(le,l):void 0;if(typeof re.getRowClassName=="function"){const Et=l-(((xt=oe.range)==null?void 0:xt.firstRowIndex)||0),St=we({},$.current.getRowParams(o),{isFirstVisible:Et===0,isLastVisible:Et===oe.rows.length-1,indexRelativeToCurrentPage:Et});pt.push(re.getRowClassName(St))}const mt=(Et,St,kt,cn,an=Qu.NONE)=>{var De;const Qn=$.current.unstable_getCellColSpanInfo(o,kt);if(Qn!=null&&Qn.spannedByColSpan)return null;const tr=(Qn==null?void 0:Qn.cellProps.width)??Et.computedWidth,lr=(Qn==null?void 0:Qn.cellProps.colSpan)??1,Le=ZF(MG[an],Et.computedWidth,kt,ce,C);if((le==null?void 0:le.type)==="skeletonRow")return ie.jsx(ee.skeletonCell,{type:Et.type,width:tr,height:f,field:Et.field,align:Et.align},Et.field);const de=((De=ae[o])==null?void 0:De[Et.field])??null,xe=Et.field==="__reorder__",Ee=Object.keys(ae).length>0,Ye=!(Ie||Et.disableReorder),lt=ge&&!ue.length&&Q<=1&&!Ee,Ce=!(Ye||xe&&lt),ke=an===Qu.VIRTUAL;return ie.jsx(ee.cell,we({column:Et,width:tr,rowId:o,align:Et.align||"left",colIndex:kt,colSpan:lr,disableDragEvents:Ce,editCellState:de,isNotVisible:ke,pinnedOffset:Le,pinnedPosition:an,sectionIndex:St,sectionLength:cn,gridHasFiller:Fe},ye==null?void 0:ye.cell),Et.field)};if(!le)return null;const zt=v.left.map((Et,St)=>mt(Et,St,St,v.left.length,Qu.LEFT)),Pt=v.right.map((Et,St)=>{const kt=g.length-v.right.length+St;return mt(Et,St,kt,v.right.length,Qu.RIGHT)}),Zt=g.length-v.left.length-v.right.length,We=[];ut&&We.push(mt(g[k],k-v.left.length,k,Zt,Qu.VIRTUAL));let Ge,Rt;!re.disableVirtualization&&!it?(Ge=0,Rt=g.length):(Ge=T.firstColumnIndex,Rt=T.lastColumnIndex);for(let Et=Ge;Et<Rt;Et+=1){const St=g[Et],kt=Et-v.left.length;St&&We.push(mt(St,kt,Et,Zt))}st&&We.push(mt(g[k],k-v.left.length,k,Zt,Qu.VIRTUAL));const Dt=i?{onClick:ne,onDoubleClick:Z("rowDoubleClick",F),onMouseEnter:Z("rowMouseEnter",B),onMouseLeave:Z("rowMouseLeave",V),onMouseOut:Z("rowMouseOut",G),onMouseOver:Z("rowMouseOver",q)}:null,qt=C.viewportOuterSize.width-C.columnsTotalWidth-pe,Yt=Math.max(0,qt);return ie.jsxs("div",we({"data-id":o,"data-rowindex":l,role:"row",className:fn(...pt,ct.root,p),style:nt},wt,Dt,z,{ref:fe,children:[zt,ie.jsx("div",{role:"presentation",className:Ke.cellOffsetLeft,style:{width:w}}),We,Yt>0&&ie.jsx(The,{width:Yt}),Pt.length>0&&ie.jsx("div",{role:"presentation",className:Ke.filler}),Pt,pe!==0&&ie.jsx(XF,{pinnedRight:v.right.length>0})]}))}),khe=uy(Ihe),Phe=()=>{const e=Hd(),t=er(),n=un(e,ss),r=un(e,DF),o=un(e,tE),i=un(e,X8);return{role:"grid","aria-colcount":n.length,"aria-rowcount":o+1+i+r,"aria-multiselectable":NF(t)}},Ahe=()=>{const e=Hd(),t=un(e,Zp),n=un(e,tE);return A.useCallback((r,o)=>{const i={},l=o+n+2;return i["aria-rowindex"]=l,e.current.isRowSelectable(r.id)&&(i["aria-selected"]=t[r.id]!==void 0),i},[e,t,n])};function Mhe({privateApiRef:e,configuration:t,props:n,children:r}){const o=A.useRef(e.current.getPublicApi());return ie.jsx(IG.Provider,{value:t,children:ie.jsx(y8.Provider,{value:n,children:ie.jsx(xG.Provider,{value:e,children:ie.jsx(g8.Provider,{value:o,children:r})})})})}const Rhe=e=>{const t=A.useRef(null),n=A.useRef(null),r=A.useRef(null),o=A.useRef(null),i=A.useRef(null),l=A.useRef(null);e.current.register("public",{rootElementRef:t}),e.current.register("private",{mainElementRef:n,virtualScrollerRef:r,virtualScrollbarVerticalRef:o,virtualScrollbarHorizontalRef:i,columnHeadersContainerRef:l})},Ohe=e=>{const t=Zc();e.current.state.isRtl===void 0&&(e.current.state.isRtl=t);const n=A.useRef(!0);A.useEffect(()=>{n.current?n.current=!1:e.current.setState(r=>we({},r,{isRtl:t}))},[e,t])},Dhe=Mee()&&window.localStorage.getItem("DEBUG")!=null,s1=()=>{},Lhe={debug:s1,info:s1,warn:s1,error:s1},I$=["debug","info","warn","error"];function k$(e,t,n=console){const r=I$.indexOf(t);if(r===-1)throw new Error(`MUI X: Log level ${t} not recognized.`);return I$.reduce((i,l,c)=>(c>=r?i[l]=(...f)=>{const[p,...g]=f;n[l](`MUI X: ${e} - ${p}`,...g)}:i[l]=s1,i),{})}const Nhe=(e,t)=>{const n=A.useCallback(r=>Dhe?k$(r,"debug",t.logger):t.logLevel?k$(r,t.logLevel.toString(),t.logger):Lhe,[t.logLevel,t.logger]);Wr(e,{getLogger:n},"private")};let Fhe=class{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(t,n,r={}){let o=this.events[t];o||(o={highPriority:new Map,regular:new Map},this.events[t]=o),r.isFirst?o.highPriority.set(n,!0):o.regular.set(n,!0)}removeListener(t,n){this.events[t]&&(this.events[t].regular.delete(n),this.events[t].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(t,...n){const r=this.events[t];if(!r)return;const o=Array.from(r.highPriority.keys()),i=Array.from(r.regular.keys());for(let l=o.length-1;l>=0;l-=1){const c=o[l];r.highPriority.has(c)&&c.apply(this,n)}for(let l=0;l<i.length;l+=1){const c=i[l];r.regular.has(c)&&c.apply(this,n)}}once(t,n){const r=this;this.on(t,function o(...i){r.removeListener(t,o),n.apply(r,i)})}};class QF{static create(t){return new QF(t)}constructor(t){this.value=void 0,this.listeners=void 0,this.subscribe=n=>(this.listeners.add(n),()=>{this.listeners.delete(n)}),this.getSnapshot=()=>this.value,this.update=n=>{this.value=n,this.listeners.forEach(r=>r(n))},this.value=t,this.listeners=new Set}}const XG=Symbol("mui.api_private"),zhe=e=>e.isPropagationStopped!==void 0;let P$=0;function Bhe(e){var o;const t=(o=e.current)==null?void 0:o[XG];if(t)return t;const n={},r={state:n,store:QF.create(n),instanceId:{id:P$}};return P$+=1,r.getPublicApi=()=>e.current,r.register=(i,l)=>{Object.keys(l).forEach(c=>{const f=l[c],p=r[c];if((p==null?void 0:p.spying)===!0?p.target=f:r[c]=f,i==="public"){const g=e.current,v=g[c];(v==null?void 0:v.spying)===!0?v.target=f:g[c]=f}})},r.register("private",{caches:{},eventManager:new Fhe}),r}function Uhe(e){return{get state(){return e.current.state},get store(){return e.current.store},get instanceId(){return e.current.instanceId},[XG]:e.current}}function jhe(e,t){var l;const n=A.useRef(null),r=A.useRef(null);r.current||(r.current=Bhe(n)),n.current||(n.current=Uhe(r));const o=A.useCallback((...c)=>{const[f,p,g={}]=c;if(g.defaultMuiPrevented=!1,zhe(g)&&g.isPropagationStopped())return;const v=t.signature===Ad.DataGridPro||t.signature===Ad.DataGridPremium?{api:r.current.getPublicApi()}:{};r.current.eventManager.emit(f,p,g,v)},[r,t.signature]),i=A.useCallback((c,f,p)=>{r.current.eventManager.on(c,f,p);const g=r.current;return()=>{g.eventManager.removeListener(c,f)}},[r]);return Wr(r,{subscribeEvent:i,publishEvent:o},"public"),e&&!((l=e.current)!=null&&l.state)&&(e.current=n.current),A.useImperativeHandle(e,()=>n.current,[n]),A.useEffect(()=>{const c=r.current;return()=>{c.publishEvent("unmount")}},[r]),r}const $he=(e,t)=>{const n=A.useCallback(r=>{if(t.localeText[r]==null)throw new Error(`Missing translation for key ${r}.`);return t.localeText[r]},[t.localeText]);e.current.register("public",{getLocaleText:n})};function cS(e){"@babel/helpers - typeof";return cS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cS(e)}function Hhe(e,t){if(cS(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(cS(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dS(e){var t=Hhe(e,"string");return cS(t)=="symbol"?t:t+""}const Vhe=e=>{const t=A.useRef({}),n=A.useRef(!1),r=A.useCallback(g=>{n.current||!g||(n.current=!0,Object.values(g.appliers).forEach(v=>{v()}),n.current=!1)},[]),o=A.useCallback((g,v,w)=>{t.current[g]||(t.current[g]={processors:new Map,processorsAsArray:[],appliers:{}});const C=t.current[g];return C.processors.get(v)!==w&&(C.processors.set(v,w),C.processorsAsArray=Array.from(t.current[g].processors.values()),r(C)),()=>{t.current[g].processors.delete(v),t.current[g].processorsAsArray=Array.from(t.current[g].processors.values())}},[r]),i=A.useCallback((g,v,w)=>(t.current[g]||(t.current[g]={processors:new Map,processorsAsArray:[],appliers:{}}),t.current[g].appliers[v]=w,()=>{const C=t.current[g].appliers,T=sr(C,[v].map(dS));t.current[g].appliers=T}),[]),l=A.useCallback(g=>{r(t.current[g])},[r]),c=A.useCallback((...g)=>{const[v,w,C]=g;if(!t.current[v])return w;const T=t.current[v].processorsAsArray;let k=w;for(let P=0;P<T.length;P+=1)k=T[P](k,C);return k},[]),f={registerPipeProcessor:o,registerPipeApplier:i,requestPipeProcessorsApplication:l},p={unstable_applyPipeProcessors:c};Wr(e,f,"private"),Wr(e,p,"public")},sa=(e,t,n)=>{const r=A.useRef(null),o=A.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=A.useCallback(()=>{r.current=e.current.registerPipeProcessor(t,o.current,n)},[e,n,t]);eE(()=>{i()});const l=A.useRef(!0);A.useEffect(()=>(l.current?l.current=!1:i(),()=>{r.current&&(r.current(),r.current=null)}),[i])},JF=(e,t,n)=>{const r=A.useRef(null),o=A.useRef(`mui-${Math.round(Math.random()*1e9)}`),i=A.useCallback(()=>{r.current=e.current.registerPipeApplier(t,o.current,n)},[e,n,t]);eE(()=>{i()});const l=A.useRef(!0);A.useEffect(()=>(l.current?l.current=!1:i(),()=>{r.current&&(r.current(),r.current=null)}),[i])},mk=(e,t,n,r)=>{const o=A.useCallback(()=>{e.current.registerStrategyProcessor(t,n,r)},[e,r,n,t]);eE(()=>{o()});const i=A.useRef(!0);A.useEffect(()=>{i.current?i.current=!1:o()},[o])},u_="none",A$={rowTreeCreation:"rowTree",filtering:"rowTree",sorting:"rowTree",visibleRowsLookupCreation:"rowTree"},qhe=e=>{const t=A.useRef(new Map),n=A.useRef({}),r=A.useCallback((f,p,g)=>{const v=()=>{const T=n.current[p],k=sr(T,[f].map(dS));n.current[p]=k};n.current[p]||(n.current[p]={});const w=n.current[p],C=w[f];return w[f]=g,!C||C===g||f===e.current.getActiveStrategy(A$[p])&&e.current.publishEvent("activeStrategyProcessorChange",p),v},[e]),o=A.useCallback((f,p)=>{const g=e.current.getActiveStrategy(A$[f]);if(g==null)throw new Error("Can't apply a strategy processor before defining an active strategy");const v=n.current[f];if(!v||!v[g])throw new Error(`No processor found for processor "${f}" on strategy "${g}"`);const w=v[g];return w(p)},[e]),i=A.useCallback(f=>{const g=Array.from(t.current.entries()).find(([,v])=>v.group!==f?!1:v.isAvailable());return(g==null?void 0:g[0])??u_},[]),l=A.useCallback((f,p,g)=>{t.current.set(p,{group:f,isAvailable:g}),e.current.publishEvent("strategyAvailabilityChange")},[e]);Wr(e,{registerStrategyProcessor:r,applyStrategyProcessor:o,getActiveStrategy:i,setStrategyAvailability:l},"private")},Ghe=e=>{const t=A.useRef({}),[,n]=A.useState(),r=A.useCallback(p=>{t.current[p.stateId]=p},[]),o=A.useCallback((p,g)=>{let v;if(T8(p)?v=p(e.current.state):v=p,e.current.state===v)return!1;let w=!1;const C=[];if(Object.keys(t.current).forEach(T=>{const k=t.current[T],P=k.stateSelector(e.current.state,e.current.instanceId),O=k.stateSelector(v,e.current.instanceId);O!==P&&(C.push({stateId:k.stateId,hasPropChanged:O!==k.propModel}),k.propModel!==void 0&&O!==k.propModel&&(w=!0))}),C.length>1)throw new Error(`You're not allowed to update several sub-state in one transaction. You already updated ${C[0].stateId}, therefore, you're not allowed to update ${C.map(T=>T.stateId).join(", ")} in the same transaction.`);if(w||(e.current.state=v,e.current.publishEvent("stateChange",v),e.current.store.update(v)),C.length===1){const{stateId:T,hasPropChanged:k}=C[0],P=t.current[T],O=P.stateSelector(v,e.current.instanceId);P.propOnChange&&k&&P.propOnChange(O,{reason:g,api:e.current}),w||e.current.publishEvent(P.changeEvent,O,{reason:g})}return!w},[e]),i=A.useCallback((p,g,v)=>e.current.setState(w=>we({},w,{[p]:g(w[p])}),v),[e]),l=A.useCallback(()=>n(()=>e.current.state),[e]),c={setState:o,forceUpdate:l},f={updateControlState:i,registerControlState:r};Wr(e,c,"public"),Wr(e,f,"private")},Whe=(e,t)=>{const n=jhe(e,t);return Rhe(n),Ohe(n),Nhe(n,t),Ghe(n),Vhe(n),qhe(n),$he(n,t),n.current.register("private",{rootProps:t}),n},Gs=(e,t,n)=>{const r=A.useRef(!1);r.current||(t.current.state=e(t.current.state,n,t),r.current=!0)};function VD(e,t){if(e==null)return"";const n=typeof e=="string"?e:`${e}`;if(t.shouldAppendQuotes||t.escapeFormulas){const r=n.replace(/"/g,'""');return t.escapeFormulas&&["=","+","-","@","	","\r"].includes(r[0])?`"'${r}"`:[t.delimiter,`
`,"\r",'"'].some(o=>n.includes(o))?`"${r}"`:r}return n}const QG=(e,t)=>{var i,l;const{csvOptions:n,ignoreValueFormatter:r}=t;let o;if(r){const c=e.colDef.type;c==="number"?o=String(e.value):c==="date"||c==="dateTime"?o=(i=e.value)==null?void 0:i.toISOString():typeof((l=e.value)==null?void 0:l.toString)=="function"?o=e.value.toString():o=e.value}else o=e.formattedValue;return VD(o,n)};class qD{constructor(t){this.options=void 0,this.rowString="",this.isEmpty=!0,this.options=t}addValue(t){this.isEmpty||(this.rowString+=this.options.csvOptions.delimiter),typeof this.options.sanitizeCellValue=="function"?this.rowString+=this.options.sanitizeCellValue(t,this.options.csvOptions):this.rowString+=t,this.isEmpty=!1}getRowString(){return this.rowString}}const Khe=({id:e,columns:t,getCellParams:n,csvOptions:r,ignoreValueFormatter:o})=>{const i=new qD({csvOptions:r});return t.forEach(l=>{const c=n(e,l.field);i.addValue(QG(c,{ignoreValueFormatter:o,csvOptions:r}))}),i.getRowString()};function Yhe(e){const{columns:t,rowIds:n,csvOptions:r,ignoreValueFormatter:o,apiRef:i}=e,l=n.reduce((v,w)=>`${v}${Khe({id:w,columns:t,getCellParams:i.current.getCellParams,ignoreValueFormatter:o,csvOptions:r})}\r
`,"").trim();if(!r.includeHeaders)return l;const c=t.filter(v=>v.field!==Vx.field),f=[];if(r.includeColumnGroupsHeaders){const v=i.current.getAllGroupDetails();let w=0;const C=c.reduce((T,k)=>{const P=i.current.getColumnGroupPath(k.field);return T[k.field]=P,w=Math.max(w,P.length),T},{});for(let T=0;T<w;T+=1){const k=new qD({csvOptions:r,sanitizeCellValue:VD});f.push(k),c.forEach(P=>{const O=(C[P.field]||[])[T],L=v[O];k.addValue(L?L.headerName||L.groupId:"")})}}const p=new qD({csvOptions:r,sanitizeCellValue:VD});return c.forEach(v=>{p.addValue(v.headerName||v.field)}),f.push(p),`${`${f.map(v=>v.getRowString()).join(`\r
`)}\r
`}${l}`.trim()}function M$(e){const t=document.createElement("span");t.style.whiteSpace="pre",t.style.userSelect="all",t.style.opacity="0px",t.textContent=e,document.body.appendChild(t);const n=document.createRange();n.selectNode(t);const r=window.getSelection();r.removeAllRanges(),r.addRange(n);try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function Zhe(e){navigator.clipboard?navigator.clipboard.writeText(e).catch(()=>{M$(e)}):M$(e)}function Xhe(e){var t;return!!((t=window.getSelection())!=null&&t.toString()||e&&(e.selectionEnd||0)-(e.selectionStart||0)>0)}const Qhe=(e,t)=>{const n=t.ignoreValueFormatterDuringExport,r=(typeof n=="object"?n==null?void 0:n.clipboardExport:n)||!1,o=t.clipboardCopyCellDelimiter,i=A.useCallback(l=>{if(!Ele(l)||Xhe(l.target))return;let c="";if(e.current.getSelectedRows().size>0)c=e.current.getDataAsCsv({includeHeaders:!1,delimiter:o,shouldAppendQuotes:!1,escapeFormulas:!1});else{const p=Nc(e);if(p){const g=e.current.getCellParams(p.id,p.field);c=QG(g,{csvOptions:{delimiter:o,shouldAppendQuotes:!1,escapeFormulas:!1},ignoreValueFormatter:r})}}c=e.current.unstable_applyPipeProcessors("clipboardCopy",c),c&&(Zhe(c),e.current.publishEvent("clipboardCopy",c))},[e,r,o]);cG(e,e.current.rootElementRef,"keydown",i),Pi(e,"clipboardCopy",t.onClipboardCopy)},Jhe=e=>we({},e,{columnMenu:{open:!1}}),efe=e=>{const t=Ts(e,"useGridColumnMenu"),n=A.useCallback(l=>{const c=vI(e.current.state),f={open:!0,field:l};(f.open!==c.open||f.field!==c.field)&&(e.current.setState(g=>g.columnMenu.open&&g.columnMenu.field===l?g:(t.debug("Opening Column Menu"),we({},g,{columnMenu:{open:!0,field:l}}))),e.current.hidePreferences(),e.current.forceUpdate())},[e,t]),r=A.useCallback(()=>{const l=vI(e.current.state);if(l.field){const p=bm(e),g=kd(e),v=Yp(e);let w=l.field;if(p[w]||(w=v[0]),g[w]===!1){const C=v.filter(k=>k===w?!0:g[k]!==!1),T=C.indexOf(w);w=C[T+1]||C[T-1]}e.current.setColumnHeaderFocus(w)}const c={open:!1,field:void 0};(c.open!==l.open||c.field!==l.field)&&(e.current.setState(p=>(t.debug("Hiding Column Menu"),we({},p,{columnMenu:c}))),e.current.forceUpdate())},[e,t]),o=A.useCallback(l=>{t.debug("Toggle Column Menu");const c=vI(e.current.state);!c.open||c.field!==l?n(l):r()},[e,t,n,r]);Wr(e,{showColumnMenu:n,hideColumnMenu:r,toggleColumnMenu:o},"public"),Hn(e,"columnResizeStart",r),Hn(e,"virtualScrollerWheel",e.current.hideColumnMenu),Hn(e,"virtualScrollerTouchMove",e.current.hideColumnMenu)},tfe=(e,t,n)=>{var o,i,l;const r=sw({apiRef:n,columnsToUpsert:t.columns,initialState:(o=t.initialState)==null?void 0:o.columns,columnVisibilityModel:t.columnVisibilityModel??((l=(i=t.initialState)==null?void 0:i.columns)==null?void 0:l.columnVisibilityModel)??{},keepOnlyColumnsToUpsert:!0});return we({},e,{columns:r,pinnedColumns:e.pinnedColumns??_D})};function nfe(e,t){var z,$;const n=Ts(e,"useGridColumns"),r=A.useRef(t.columns);e.current.registerControlState({stateId:"visibleColumns",propModel:t.columnVisibilityModel,propOnChange:t.onColumnVisibilityModelChange,stateSelector:kd,changeEvent:"columnVisibilityModelChange"});const o=A.useCallback(K=>{var te,re;n.debug("Updating columns state."),e.current.setState(R$(K)),e.current.publishEvent("columnsChange",K.orderedFields),(re=(te=e.current).updateRenderContext)==null||re.call(te),e.current.forceUpdate()},[n,e]),i=A.useCallback(K=>bm(e)[K],[e]),l=A.useCallback(()=>Ch(e),[e]),c=A.useCallback(()=>ss(e),[e]),f=A.useCallback((K,te=!0)=>(te?ss(e):Ch(e)).findIndex(oe=>oe.field===K),[e]),p=A.useCallback(K=>{const te=f(K);return cy(e)[te]},[e,f]),g=A.useCallback(K=>{var re,oe;kd(e)!==K&&(e.current.setState(ue=>we({},ue,{columns:sw({apiRef:e,columnsToUpsert:[],initialState:void 0,columnVisibilityModel:K,keepOnlyColumnsToUpsert:!1})})),(oe=(re=e.current).updateRenderContext)==null||oe.call(re),e.current.forceUpdate())},[e]),v=A.useCallback(K=>{const te=sw({apiRef:e,columnsToUpsert:K,initialState:void 0,keepOnlyColumnsToUpsert:!1});o(te)},[e,o]),w=A.useCallback((K,te)=>{const re=kd(e),oe=re[K]??!0;if(te!==oe){const ue=we({},re,{[K]:te});e.current.setColumnVisibilityModel(ue)}},[e]),C=A.useCallback(K=>Yp(e).findIndex(re=>re===K),[e]),T=A.useCallback((K,te)=>{const re=Yp(e),oe=C(K);if(oe===te)return;n.debug(`Moving column ${K} to index ${te}`);const ue=[...re],Q=ue.splice(oe,1)[0];ue.splice(te,0,Q),o(we({},If(e.current.state),{orderedFields:ue}));const ce={column:e.current.getColumn(K),targetIndex:e.current.getColumnIndexRelativeToVisibleColumns(K),oldIndex:oe};e.current.publishEvent("columnIndexChange",ce)},[e,n,o,C]),k=A.useCallback((K,te)=>{n.debug(`Updating column ${K} width to ${te}`);const re=If(e.current.state),oe=re.lookup[K],ue=we({},oe,{width:te,hasBeenResized:!0});o(MD(we({},re,{lookup:we({},re.lookup,{[K]:ue})}),e.current.getRootDimensions())),e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(K),colDef:ue,width:te})},[e,n,o]),P={getColumn:i,getAllColumns:l,getColumnIndex:f,getColumnPosition:p,getVisibleColumns:c,getColumnIndexRelativeToVisibleColumns:C,updateColumns:v,setColumnVisibilityModel:g,setColumnVisibility:w,setColumnWidth:k},O={setColumnIndex:T};Wr(e,P,"public"),Wr(e,O,t.signature===Ad.DataGrid?"private":"public");const L=A.useCallback((K,te)=>{var ae,fe;const re={},oe=kd(e);(!te.exportOnlyDirtyModels||t.columnVisibilityModel!=null||Object.keys(((fe=(ae=t.initialState)==null?void 0:ae.columns)==null?void 0:fe.columnVisibilityModel)??{}).length>0||Object.keys(oe).length>0)&&(re.columnVisibilityModel=oe),re.orderedFields=Yp(e);const Q=Ch(e),ce={};return Q.forEach(le=>{if(le.hasBeenResized){const pe={};wG.forEach(Fe=>{let Be=le[Fe];Be===1/0&&(Be=-1),pe[Fe]=Be}),ce[le.field]=pe}}),Object.keys(ce).length>0&&(re.dimensions=ce),we({},K,{columns:re})},[e,t.columnVisibilityModel,(z=t.initialState)==null?void 0:z.columns]),D=A.useCallback((K,te)=>{var Q;const re=(Q=te.stateToRestore.columns)==null?void 0:Q.columnVisibilityModel,oe=te.stateToRestore.columns;if(re==null&&oe==null)return K;const ue=sw({apiRef:e,columnsToUpsert:[],initialState:oe,columnVisibilityModel:re,keepOnlyColumnsToUpsert:!1});return e.current.setState(R$(ue)),oe!=null&&e.current.publishEvent("columnsChange",ue.orderedFields),K},[e]),N=A.useCallback((K,te)=>{var re;if(te===l_.columns){const oe=t.slots.columnsPanel;return ie.jsx(oe,we({},(re=t.slotProps)==null?void 0:re.columnsPanel))}return K},[t.slots.columnsPanel,($=t.slotProps)==null?void 0:$.columnsPanel]),F=A.useCallback(K=>t.disableColumnSelector?K:[...K,"columnMenuColumnsItem"],[t.disableColumnSelector]);sa(e,"columnMenu",F),sa(e,"exportState",L),sa(e,"restoreState",D),sa(e,"preferencePanel",N);const B=A.useRef(null);Hn(e,"viewportInnerSizeChange",K=>{B.current!==K.width&&(B.current=K.width,o(MD(If(e.current.state),e.current.getRootDimensions())))});const G=A.useCallback(()=>{n.info("Columns pipe processing have changed, regenerating the columns");const K=sw({apiRef:e,columnsToUpsert:[],initialState:void 0,keepOnlyColumnsToUpsert:!1});o(K)},[e,n,o]);JF(e,"hydrateColumns",G);const q=A.useRef(!0);A.useEffect(()=>{if(q.current){q.current=!1;return}if(n.info(`GridColumns have changed, new length ${t.columns.length}`),r.current===t.columns)return;const K=sw({apiRef:e,initialState:void 0,columnsToUpsert:t.columns,keepOnlyColumnsToUpsert:!0});r.current=t.columns,o(K)},[n,e,o,t.columns]),A.useEffect(()=>{t.columnVisibilityModel!==void 0&&e.current.setColumnVisibilityModel(t.columnVisibilityModel)},[e,n,t.columnVisibilityModel])}function R$(e){return t=>we({},t,{columns:e})}const rfe=(e,t)=>{var n;return we({},e,{density:((n=t.initialState)==null?void 0:n.density)??t.density??"standard"})},ofe=(e,t)=>{var c;const n=Ts(e,"useDensity");e.current.registerControlState({stateId:"density",propModel:t.density,propOnChange:t.onDensityChange,stateSelector:xw,changeEvent:"densityChange"});const o={setDensity:co(f=>{xw(e.current.state)!==f&&(n.debug(`Set grid density to ${f}`),e.current.setState(g=>we({},g,{density:f})))})};Wr(e,o,"public");const i=A.useCallback((f,p)=>{var w;const g=xw(e.current.state);return!p.exportOnlyDirtyModels||t.density!=null||((w=t.initialState)==null?void 0:w.density)!=null?we({},f,{density:g}):f},[e,t.density,(c=t.initialState)==null?void 0:c.density]),l=A.useCallback((f,p)=>{var v;const g=(v=p.stateToRestore)!=null&&v.density?p.stateToRestore.density:xw(e.current.state);return e.current.setState(w=>we({},w,{density:g})),f},[e]);sa(e,"exportState",i),sa(e,"restoreState",l),A.useEffect(()=>{t.density&&e.current.setDensity(t.density)},[e,t.density])};function ife(e,t="csv",n=document.title||"untitled"){const r=`${n}.${t}`;if("download"in HTMLAnchorElement.prototype){const o=URL.createObjectURL(e),i=document.createElement("a");i.href=o,i.download=r,i.click(),setTimeout(()=>{URL.revokeObjectURL(o)});return}throw new Error("MUI X: exportAs not supported.")}const JG=({apiRef:e,options:t})=>{const n=Ch(e);return t.fields?t.fields.reduce((o,i)=>{const l=n.find(c=>c.field===i);return l&&o.push(l),o},[]):(t.allColumns?n:ss(e)).filter(o=>!o.disableExport)},e9=({apiRef:e})=>{var f,p;const t=aG(e),n=_l(e),r=e.current.getSelectedRows(),o=t.filter(g=>n[g].type!=="footer"),i=T_(e),l=((f=i==null?void 0:i.top)==null?void 0:f.map(g=>g.id))||[],c=((p=i==null?void 0:i.bottom)==null?void 0:p.map(g=>g.id))||[];return o.unshift(...l),o.push(...c),r.size>0?o.filter(g=>r.has(g)):o},afe=(e,t)=>{const n=Ts(e,"useGridCsvExport"),r=t.ignoreValueFormatterDuringExport,o=(typeof r=="object"?r==null?void 0:r.csvExport:r)||!1,i=A.useCallback((p={})=>{n.debug("Get data as CSV");const g=JG({apiRef:e,options:p}),w=(p.getRowsToExport??e9)({apiRef:e});return Yhe({columns:g,rowIds:w,csvOptions:{delimiter:p.delimiter||",",shouldAppendQuotes:p.shouldAppendQuotes??!0,includeHeaders:p.includeHeaders??!0,includeColumnGroupsHeaders:p.includeColumnGroupsHeaders??!0,escapeFormulas:p.escapeFormulas??!0},ignoreValueFormatter:o,apiRef:e})},[n,e,o]),l=A.useCallback(p=>{n.debug("Export data as CSV");const g=i(p),v=new Blob([p!=null&&p.utf8WithBom?new Uint8Array([239,187,191]):"",g],{type:"text/csv"});ife(v,"csv",p==null?void 0:p.fileName)},[n,i]);Wr(e,{getDataAsCsv:i,exportDataAsCsv:l},"public");const f=A.useCallback((p,g)=>{var v;return(v=g.csvOptions)!=null&&v.disableToolbarButton?p:[...p,{component:ie.jsx(cde,{options:g.csvOptions}),componentName:"csvExport"}]},[]);sa(e,"exportMenu",f)},_I=(e,t,n)=>{let r=e.paginationModel;const o=e.rowCount,i=(n==null?void 0:n.pageSize)??r.pageSize,l=(n==null?void 0:n.page)??r.page,c=dG(o,i,l);n&&((n==null?void 0:n.page)!==r.page||(n==null?void 0:n.pageSize)!==r.pageSize)&&(r=n);const f=_oe(r.page,c);return f!==r.page&&(r=we({},r,{page:f})),fG(r.pageSize,t),r},sfe=(e,t)=>{var T,k;const n=Ts(e,"useGridPaginationModel"),r=un(e,YS),o=Math.floor(t.rowHeight*r);e.current.registerControlState({stateId:"paginationModel",propModel:t.paginationModel,propOnChange:t.onPaginationModelChange,stateSelector:bu,changeEvent:"paginationModelChange"});const i=A.useCallback(P=>{const O=bu(e);P!==O.page&&(n.debug(`Setting page to ${P}`),e.current.setPaginationModel({page:P,pageSize:O.pageSize}))},[e,n]),l=A.useCallback(P=>{const O=bu(e);P!==O.pageSize&&(n.debug(`Setting page size to ${P}`),e.current.setPaginationModel({pageSize:P,page:O.page}))},[e,n]),c=A.useCallback(P=>{const O=bu(e);P!==O&&(n.debug("Setting 'paginationModel' to",P),e.current.setState(L=>we({},L,{pagination:we({},L.pagination,{paginationModel:_I(L.pagination,t.signature,P)})}),"setPaginationModel"))},[e,n,t.signature]);Wr(e,{setPage:i,setPageSize:l,setPaginationModel:c},"public");const p=A.useCallback((P,O)=>{var N,F;const L=bu(e);return!O.exportOnlyDirtyModels||t.paginationModel!=null||((F=(N=t.initialState)==null?void 0:N.pagination)==null?void 0:F.paginationModel)!=null||L.page!==0&&L.pageSize!==voe(t.autoPageSize)?we({},P,{pagination:we({},P.pagination,{paginationModel:L})}):P},[e,t.paginationModel,(k=(T=t.initialState)==null?void 0:T.pagination)==null?void 0:k.paginationModel,t.autoPageSize]),g=A.useCallback((P,O)=>{var D,N;const L=(D=O.stateToRestore.pagination)!=null&&D.paginationModel?we({},hG(t.autoPageSize),(N=O.stateToRestore.pagination)==null?void 0:N.paginationModel):bu(e);return e.current.setState(F=>we({},F,{pagination:we({},F.pagination,{paginationModel:_I(F.pagination,t.signature,L)})}),"stateRestorePreProcessing"),P},[e,t.autoPageSize,t.signature]);sa(e,"exportState",p),sa(e,"restoreState",g);const v=()=>{var O;const P=bu(e);(O=e.current.virtualScrollerRef)!=null&&O.current&&e.current.scrollToIndexes({rowIndex:P.page*P.pageSize})},w=A.useCallback(()=>{if(!t.autoPageSize)return;const P=e.current.getRootDimensions(),O=Math.floor(P.viewportInnerSize.height/o);e.current.setPageSize(O)},[e,t.autoPageSize,o]),C=A.useCallback(P=>{if(P==null)return;const O=bu(e),L=pG(e);O.page>L-1&&e.current.setPage(Math.max(0,L-1))},[e]);Hn(e,"viewportInnerSizeChange",w),Hn(e,"paginationModelChange",v),Hn(e,"rowCountChange",C),A.useEffect(()=>{e.current.setState(P=>we({},P,{pagination:we({},P.pagination,{paginationModel:_I(P.pagination,t.signature,t.paginationModel)})}))},[e,t.paginationModel,t.paginationMode,t.signature]),A.useEffect(w,[w])};function lfe(){return new Promise(e=>{requestAnimationFrame(()=>{e()})})}function ufe(e){const t=document.createElement("iframe");return t.style.position="absolute",t.style.width="0px",t.style.height="0px",t.title=e||document.title,t}const cfe=(e,t)=>{const n=e.current.rootElementRef.current!==null,r=Ts(e,"useGridPrintExport"),o=A.useRef(null),i=A.useRef(null),l=A.useRef({}),c=A.useRef([]),f=A.useRef(null);A.useEffect(()=>{o.current=ka(e.current.rootElementRef.current)},[e,n]);const p=A.useCallback((P,O,L)=>new Promise(D=>{const N=JG({apiRef:e,options:{fields:P,allColumns:O}}).map(V=>V.field),F=Ch(e),B={};F.forEach(V=>{B[V.field]=N.includes(V.field)}),L&&(B[Vx.field]=!0),e.current.setColumnVisibilityModel(B),D()}),[e]),g=A.useCallback(P=>{const L=P({apiRef:e}).reduce((D,N)=>{const F=e.current.getRow(N);return F[$w]||D.push(F),D},[]);e.current.setRows(L)},[e]),v=A.useCallback((P,O)=>{var re,oe,ue,Q;const L=we({copyStyles:!0,hideToolbar:!1,hideFooter:!1,includeCheckboxes:!1},O),D=P.contentDocument;if(!D)return;const N=qx(e.current.state),F=e.current.rootElementRef.current,B=F.cloneNode(!0),V=B.querySelector(`.${Ke.main}`);V.style.overflow="visible",B.style.contain="size";let G=((re=F.querySelector(`.${Ke.toolbarContainer}`))==null?void 0:re.offsetHeight)||0,q=((oe=F.querySelector(`.${Ke.footerContainer}`))==null?void 0:oe.offsetHeight)||0;L.hideToolbar&&((ue=B.querySelector(`.${Ke.toolbarContainer}`))==null||ue.remove(),G=0),L.hideFooter&&((Q=B.querySelector(`.${Ke.footerContainer}`))==null||Q.remove(),q=0);const z=N.currentPageTotalHeight+UF(e,t)+G+q;if(B.style.height=`${z}px`,B.style.boxSizing="content-box",!L.hideFooter){const ce=B.querySelector(`.${Ke.footerContainer}`);ce.style.position="absolute",ce.style.width="100%",ce.style.top=`${z-q}px`}const $=document.createElement("div");$.appendChild(B),D.body.style.marginTop="0px",D.body.innerHTML=$.innerHTML;const K=typeof L.pageStyle=="function"?L.pageStyle():L.pageStyle;if(typeof K=="string"){const ce=D.createElement("style");ce.appendChild(D.createTextNode(K)),D.head.appendChild(ce)}L.bodyClassName&&D.body.classList.add(...L.bodyClassName.split(" "));const te=[];if(L.copyStyles){const ce=F.getRootNode(),fe=(ce.constructor.name==="ShadowRoot"?ce:o.current).querySelectorAll("style, link[rel='stylesheet']");for(let le=0;le<fe.length;le+=1){const pe=fe[le];if(pe.tagName==="STYLE"){const Fe=D.createElement(pe.tagName),Be=pe.sheet;if(Be){let Ze="";for(let it=0;it<Be.cssRules.length;it+=1)typeof Be.cssRules[it].cssText=="string"&&(Ze+=`${Be.cssRules[it].cssText}\r
`);Fe.appendChild(D.createTextNode(Ze)),D.head.appendChild(Fe)}}else if(pe.getAttribute("href")){const Fe=D.createElement(pe.tagName);for(let Be=0;Be<pe.attributes.length;Be+=1){const Ze=pe.attributes[Be];Ze&&Fe.setAttribute(Ze.nodeName,Ze.nodeValue||"")}te.push(new Promise(Be=>{Fe.addEventListener("load",()=>Be())})),D.head.appendChild(Fe)}}}Promise.all(te).then(()=>{P.contentWindow.print()})},[e,o,t]),w=A.useCallback(P=>{var O,L;o.current.body.removeChild(P),e.current.restoreState(i.current||{}),(L=(O=i.current)==null?void 0:O.columns)!=null&&L.columnVisibilityModel||e.current.setColumnVisibilityModel(l.current),e.current.setState(D=>we({},D,{virtualization:f.current})),e.current.setRows(c.current),i.current=null,l.current={},c.current=[]},[e]),T={exportDataAsPrint:A.useCallback(async P=>{if(r.debug("Export data as Print"),!e.current.rootElementRef.current)throw new Error("MUI X: No grid root element available.");if(i.current=e.current.exportState(),l.current=kd(e),c.current=e.current.getSortedRows().filter(L=>!L[$w]),t.pagination){const D={page:0,pageSize:DF(e)};e.current.setState(N=>we({},N,{pagination:we({},N.pagination,{paginationModel:_I(N.pagination,"DataGridPro",D)})}))}f.current=e.current.state.virtualization,e.current.setState(L=>we({},L,{virtualization:we({},L.virtualization,{enabled:!1,enabledForColumns:!1})})),await p(P==null?void 0:P.fields,P==null?void 0:P.allColumns,P==null?void 0:P.includeCheckboxes),g((P==null?void 0:P.getRowsToExport)??e9),await lfe();const O=ufe(P==null?void 0:P.fileName);O.onload=()=>{v(O,P),O.contentWindow.matchMedia("print").addEventListener("change",D=>{D.matches===!1&&w(O)})},o.current.body.appendChild(O)},[t,r,e,v,w,p,g])};Wr(e,T,"public");const k=A.useCallback((P,O)=>{var L;return(L=O.printOptions)!=null&&L.disableToolbarButton?P:[...P,{component:ie.jsx(dde,{options:O.printOptions}),componentName:"printExport"}]},[]);sa(e,"exportMenu",k)},dfe=(e,t,n)=>{var o,i;const r=t.filterModel??((i=(o=t.initialState)==null?void 0:o.filter)==null?void 0:i.filterModel)??iS();return we({},e,{filter:{filterModel:AF(r,t.disableMultipleColumnsFiltering,n),filteredRowsLookup:{},filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}},visibleRowsLookup:{}})},hfe=e=>e.filteredRowsLookup;function O$(e,t){return e.current.applyStrategyProcessor("visibleRowsLookupCreation",{tree:t.rows.tree,filteredRowsLookup:t.filter.filteredRowsLookup})}function ffe(){return b8(Object.values)}const pfe=(e,t)=>{var q,z,$;const n=Ts(e,"useGridFilter");e.current.registerControlState({stateId:"filter",propModel:t.filterModel,propOnChange:t.onFilterModelChange,stateSelector:yl,changeEvent:"filterModelChange"});const r=A.useCallback(()=>{e.current.setState(K=>{const te=yl(K,e.current.instanceId),re=e.current.getFilterState(te),oe=we({},K,{filter:we({},K.filter,re)}),ue=O$(e,oe);return we({},oe,{visibleRowsLookup:ue})}),e.current.publishEvent("filteredRowsSet")},[e]),o=A.useCallback((K,te)=>te==null||te.filterable===!1||t.disableColumnFilter?K:[...K,"columnMenuFilterItem"],[t.disableColumnFilter]),i=A.useCallback(()=>{r(),e.current.forceUpdate()},[e,r]),l=A.useCallback(K=>{const te=yl(e),re=[...te.items],oe=re.findIndex(ue=>ue.id===K.id);oe===-1?re.push(K):re[oe]=K,e.current.setFilterModel(we({},te,{items:re}),"upsertFilterItem")},[e]),c=A.useCallback(K=>{const te=yl(e),re=[...te.items];K.forEach(oe=>{const ue=re.findIndex(Q=>Q.id===oe.id);ue===-1?re.push(oe):re[ue]=oe}),e.current.setFilterModel(we({},te,{items:re}),"upsertFilterItems")},[e]),f=A.useCallback(K=>{const te=yl(e),re=te.items.filter(oe=>oe.id!==K.id);re.length!==te.items.length&&e.current.setFilterModel(we({},te,{items:re}),"deleteFilterItem")},[e]),p=A.useCallback((K,te,re)=>{if(n.debug("Displaying filter panel"),K){const oe=yl(e),ue=oe.items.filter(fe=>{var Be;if(fe.value!==void 0)return!(Array.isArray(fe.value)&&fe.value.length===0);const pe=(Be=e.current.getColumn(fe.field).filterOperators)==null?void 0:Be.find(Ze=>Ze.value===fe.operator);return!(typeof(pe==null?void 0:pe.requiresFilterValue)>"u"?!0:pe==null?void 0:pe.requiresFilterValue)});let Q;const ce=ue.find(fe=>fe.field===K),ae=e.current.getColumn(K);ce?Q=ue:t.disableMultipleColumnsFiltering?Q=[PD({field:K,operator:ae.filterOperators[0].value},e)]:Q=[...ue,PD({field:K,operator:ae.filterOperators[0].value},e)],e.current.setFilterModel(we({},oe,{items:Q}))}e.current.showPreferences(l_.filters,te,re)},[e,n,t.disableMultipleColumnsFiltering]),g=A.useCallback(()=>{n.debug("Hiding filter panel"),e.current.hidePreferences()},[e,n]),v=A.useCallback(K=>{const te=yl(e);te.logicOperator!==K&&e.current.setFilterModel(we({},te,{logicOperator:K}),"changeLogicOperator")},[e]),w=A.useCallback(K=>{const te=yl(e);jw(te.quickFilterValues,K)||e.current.setFilterModel(we({},te,{quickFilterValues:[...K]}))},[e]),C=A.useCallback((K,te)=>{yl(e)!==K&&(n.debug("Setting filter model"),e.current.updateControlState("filter",xj(K,t.disableMultipleColumnsFiltering,e),te),e.current.unstable_applyFilters())},[e,n,t.disableMultipleColumnsFiltering]),T=A.useCallback(K=>{const te=AF(K,t.disableMultipleColumnsFiltering,e),re=t.filterMode==="client"?ure(te,e,t.disableEval):null,oe=e.current.applyStrategyProcessor("filtering",{isRowMatchingFilters:re,filterModel:te??iS()});return we({},oe,{filterModel:te})},[t.disableMultipleColumnsFiltering,t.filterMode,t.disableEval,e]),k={setFilterLogicOperator:v,unstable_applyFilters:i,deleteFilterItem:f,upsertFilterItem:l,upsertFilterItems:c,setFilterModel:C,showFilterPanel:p,hideFilterPanel:g,setQuickFilterValues:w,ignoreDiacritics:t.ignoreDiacritics,getFilterState:T};Wr(e,k,"public");const P=A.useCallback((K,te)=>{var ue,Q;const re=yl(e);return!te.exportOnlyDirtyModels||t.filterModel!=null||((Q=(ue=t.initialState)==null?void 0:ue.filter)==null?void 0:Q.filterModel)!=null||!jw(re,iS())?we({},K,{filter:{filterModel:re}}):K},[e,t.filterModel,(z=(q=t.initialState)==null?void 0:q.filter)==null?void 0:z.filterModel]),O=A.useCallback((K,te)=>{var oe;const re=(oe=te.stateToRestore.filter)==null?void 0:oe.filterModel;return re==null?K:(e.current.updateControlState("filter",xj(re,t.disableMultipleColumnsFiltering,e),"restoreState"),we({},K,{callbacks:[...K.callbacks,e.current.unstable_applyFilters]}))},[e,t.disableMultipleColumnsFiltering]),L=A.useCallback((K,te)=>{var re;if(te===l_.filters){const oe=t.slots.filterPanel;return ie.jsx(oe,we({},(re=t.slotProps)==null?void 0:re.filterPanel))}return K},[t.slots.filterPanel,($=t.slotProps)==null?void 0:$.filterPanel]),{getRowId:D}=t,N=Lh(ffe),F=A.useCallback(K=>{if(t.filterMode!=="client"||!K.isRowMatchingFilters)return{filteredRowsLookup:{},filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}};const te=jg(e),re={},{isRowMatchingFilters:oe}=K,ue={},Q={passingFilterItems:null,passingQuickFilterValues:null},ce=N.current(e.current.state.rows.dataRowIdToModelLookup);for(let le=0;le<ce.length;le+=1){const pe=ce[le],Fe=D?D(pe):pe.id;oe(pe,void 0,Q);const Be=dre([Q.passingFilterItems],[Q.passingQuickFilterValues],K.filterModel,e,ue);re[Fe]=Be}const ae="auto-generated-group-footer-root";return te[ae]&&(re[ae]=!0),{filteredRowsLookup:re,filteredChildrenCountLookup:{},filteredDescendantCountLookup:{}}},[e,t.filterMode,D,N]);sa(e,"columnMenu",o),sa(e,"exportState",P),sa(e,"restoreState",O),sa(e,"preferencePanel",L),mk(e,u_,"filtering",F),mk(e,u_,"visibleRowsLookupCreation",hfe);const B=A.useCallback(()=>{n.debug("onColUpdated - GridColumns changed, applying filters");const K=yl(e),te=bm(e),re=K.items.filter(oe=>oe.field&&te[oe.field]);re.length<K.items.length&&e.current.setFilterModel(we({},K,{items:re}))},[e,n]),V=A.useCallback(K=>{K==="filtering"&&e.current.unstable_applyFilters()},[e]),G=A.useCallback(()=>{e.current.setState(K=>we({},K,{visibleRowsLookup:O$(e,K)})),e.current.forceUpdate()},[e]);Hn(e,"rowsSet",r),Hn(e,"columnsChange",B),Hn(e,"activeStrategyProcessorChange",V),Hn(e,"rowExpansionChange",G),Hn(e,"columnVisibilityModelChange",()=>{const K=yl(e);K.quickFilterValues&&W8(K)&&e.current.unstable_applyFilters()}),eE(()=>{e.current.unstable_applyFilters()}),$i(()=>{t.filterModel!==void 0&&e.current.setFilterModel(t.filterModel)},[e,n,t.filterModel])},mfe=e=>we({},e,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},tabIndex:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}),gfe=(e,t)=>{const n=Ts(e,"useGridFocus"),r=A.useRef(null),o=e.current.rootElementRef.current!==null,i=A.useCallback((G,q)=>{G&&e.current.getRow(G.id)&&e.current.publishEvent("cellFocusOut",e.current.getCellParams(G.id,G.field),q)},[e]),l=A.useCallback((G,q)=>{const z=Nc(e);(z==null?void 0:z.id)===G&&(z==null?void 0:z.field)===q||(e.current.setState($=>(n.debug(`Focusing on cell with id=${G} and field=${q}`),we({},$,{tabIndex:{cell:{id:G,field:q},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null},focus:{cell:{id:G,field:q},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))),e.current.forceUpdate(),e.current.getRow(G)&&(z&&i(z,{}),e.current.publishEvent("cellFocusIn",e.current.getCellParams(G,q))))},[e,n,i]),c=A.useCallback((G,q={})=>{const z=Nc(e);i(z,q),e.current.setState($=>(n.debug(`Focusing on column header with colIndex=${G}`),we({},$,{tabIndex:{columnHeader:{field:G},columnHeaderFilter:null,cell:null,columnGroupHeader:null},focus:{columnHeader:{field:G},columnHeaderFilter:null,cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,i]),f=A.useCallback((G,q={})=>{const z=Nc(e);i(z,q),e.current.setState($=>(n.debug(`Focusing on column header filter with colIndex=${G}`),we({},$,{tabIndex:{columnHeader:null,columnHeaderFilter:{field:G},cell:null,columnGroupHeader:null},focus:{columnHeader:null,columnHeaderFilter:{field:G},cell:null,columnGroupHeader:null}}))),e.current.forceUpdate()},[e,n,i]),p=A.useCallback((G,q,z={})=>{const $=Nc(e);$&&e.current.publishEvent("cellFocusOut",e.current.getCellParams($.id,$.field),z),e.current.setState(K=>we({},K,{tabIndex:{columnGroupHeader:{field:G,depth:q},columnHeader:null,columnHeaderFilter:null,cell:null},focus:{columnGroupHeader:{field:G,depth:q},columnHeader:null,columnHeaderFilter:null,cell:null}})),e.current.forceUpdate()},[e]),g=A.useCallback(()=>dk(e),[e]),v=A.useCallback((G,q,z)=>{let $=e.current.getColumnIndex(q);const K=ss(e),te=Vw(e,{pagination:t.pagination,paginationMode:t.paginationMode}),re=T_(e),oe=[].concat(re.top||[],te.rows,re.bottom||[]);let ue=oe.findIndex(fe=>fe.id===G);z==="right"?$+=1:z==="left"?$-=1:ue+=1,$>=K.length?(ue+=1,ue<oe.length&&($=0)):$<0&&(ue-=1,ue>=0&&($=K.length-1)),ue=kf(ue,0,oe.length-1);const Q=oe[ue];if(!Q)return;const ce=e.current.unstable_getCellColSpanInfo(Q.id,$);ce&&ce.spannedByColSpan&&(z==="left"||z==="below"?$=ce.leftVisibleCellIndex:z==="right"&&($=ce.rightVisibleCellIndex)),$=kf($,0,K.length-1);const ae=K[$];e.current.setCellFocus(Q.id,ae.field)},[e,t.pagination,t.paginationMode]),w=A.useCallback(({id:G,field:q})=>{e.current.setCellFocus(G,q)},[e]),C=A.useCallback((G,q)=>{q.key==="Enter"||q.key==="Tab"||q.key==="Shift"||pk(q.key)||e.current.setCellFocus(G.id,G.field)},[e]),T=A.useCallback(({field:G},q)=>{q.target===q.currentTarget&&e.current.setColumnHeaderFocus(G,q)},[e]),k=A.useCallback(({fields:G,depth:q},z)=>{if(z.target!==z.currentTarget)return;const $=dk(e);$!==null&&$.depth===q&&G.includes($.field)||e.current.setColumnGroupHeaderFocus(G[0],q,z)},[e]),P=A.useCallback((G,q)=>{var z,$;($=(z=q.relatedTarget)==null?void 0:z.getAttribute("class"))!=null&&$.includes(Ke.columnHeader)||(n.debug("Clearing focus"),e.current.setState(K=>we({},K,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})))},[n,e]),O=A.useCallback(G=>{r.current=G},[]),L=A.useCallback(G=>{const q=r.current;r.current=null;const z=Nc(e);if(!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:G,cell:q}))return;if(!z){q&&e.current.setCellFocus(q.id,q.field);return}if((q==null?void 0:q.id)===z.id&&(q==null?void 0:q.field)===z.field)return;const K=e.current.getCellElement(z.id,z.field);K!=null&&K.contains(G.target)||(q?e.current.setCellFocus(q.id,q.field):(e.current.setState(te=>we({},te,{focus:{cell:null,columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}})),e.current.forceUpdate(),i(z,G)))},[e,i]),D=A.useCallback(G=>{if(G.cellMode==="view")return;const q=Nc(e);((q==null?void 0:q.id)!==G.id||(q==null?void 0:q.field)!==G.field)&&e.current.setCellFocus(G.id,G.field)},[e]),N=A.useCallback(()=>{var q;const G=Nc(e);if(G&&!e.current.getRow(G.id)){const z=(q=Nc(e))==null?void 0:q.id;let $=null;if(typeof z<"u"){const K=e.current.getRowIndexRelativeToVisibleRows(z),te=Vw(e,{pagination:t.pagination,paginationMode:t.paginationMode}),re=te.rows[kf(K,0,te.rows.length-1)];$=(re==null?void 0:re.id)??null}e.current.setState(K=>we({},K,{focus:{cell:$===null?null:{id:$,field:G.field},columnHeader:null,columnHeaderFilter:null,columnGroupHeader:null}}))}},[e,t.pagination,t.paginationMode]),F=co(()=>{const G=Nc(e);if(!G)return;const q=Vw(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(q.rows.find(K=>K.id===G.id))return;const $=ss(e);e.current.setState(K=>we({},K,{tabIndex:{cell:{id:q.rows[0].id,field:$[0].field},columnGroupHeader:null,columnHeader:null,columnHeaderFilter:null}}))}),B={setCellFocus:l,setColumnHeaderFocus:c,setColumnHeaderFilterFocus:f},V={moveFocusToRelativeCell:v,setColumnGroupHeaderFocus:p,getColumnGroupHeaderFocus:g};Wr(e,B,"public"),Wr(e,V,"private"),A.useEffect(()=>{const G=ka(e.current.rootElementRef.current);return G.addEventListener("mouseup",L),()=>{G.removeEventListener("mouseup",L)}},[e,o,L]),Hn(e,"columnHeaderBlur",P),Hn(e,"cellDoubleClick",w),Hn(e,"cellMouseDown",O),Hn(e,"cellKeyDown",C),Hn(e,"cellModeChange",D),Hn(e,"columnHeaderFocus",T),Hn(e,"columnGroupHeaderFocus",k),Hn(e,"rowsSet",N),Hn(e,"paginationModelChange",F)},yfe=e=>{const t=e.match(/^__row_group_by_columns_group_(.*)__$/);return t?t[1]:null},vfe=e=>e===nG||yfe(e)!==null;function _fe(e,t){const n=T_(e)||{};return[...n.top||[],...t,...n.bottom||[]]}const JM=({currentColIndex:e,firstColIndex:t,lastColIndex:n,isRtl:r})=>{if(r){if(e<n)return e+1}else if(!r&&e>t)return e-1;return null},eR=({currentColIndex:e,firstColIndex:t,lastColIndex:n,isRtl:r})=>{if(r){if(e>t)return e-1}else if(!r&&e<n)return e+1;return null};function bfe(e,t,n,r){var c,f;const o=SG(e);if(!((c=o[t])!=null&&c[n]))return t;const i=aG(e);let l=i.indexOf(t)+(r==="down"?1:-1);for(;l>=0&&l<i.length;){const p=i[l];if(!((f=o[p])!=null&&f[n]))return p;l+=r==="down"?1:-1}return t}const wfe=(e,t)=>{const n=Ts(e,"useGridKeyboardNavigation"),r=I_(e,t).rows,o=Zc(),i=t.unstable_listView,l=A.useMemo(()=>_fe(e,r),[e,r]),c=t.signature!=="DataGrid"&&t.headerFilters,f=A.useCallback((L,D,N="left",F="up")=>{const B=hy(e),V=e.current.unstable_getCellColSpanInfo(D,L);V&&V.spannedByColSpan&&(N==="left"?L=V.leftVisibleCellIndex:N==="right"&&(L=V.rightVisibleCellIndex));const G=i?wx(e.current.state).field:zx(e)[L],q=bfe(e,D,G,F),z=B.findIndex($=>$.id===q);n.debug(`Navigating to cell row ${z}, col ${L}`),e.current.scrollToIndexes({colIndex:L,rowIndex:z}),e.current.setCellFocus(q,G)},[e,n,i]),p=A.useCallback((L,D)=>{n.debug(`Navigating to header col ${L}`),e.current.scrollToIndexes({colIndex:L});const N=e.current.getVisibleColumns()[L].field;e.current.setColumnHeaderFocus(N,D)},[e,n]),g=A.useCallback((L,D)=>{n.debug(`Navigating to header filter col ${L}`),e.current.scrollToIndexes({colIndex:L});const N=e.current.getVisibleColumns()[L].field;e.current.setColumnHeaderFilterFocus(N,D)},[e,n]),v=A.useCallback((L,D,N)=>{n.debug(`Navigating to header col ${L}`),e.current.scrollToIndexes({colIndex:L});const{field:F}=e.current.getVisibleColumns()[L];e.current.setColumnGroupHeaderFocus(F,D,N)},[e,n]),w=A.useCallback(L=>{var D;return(D=l[L])==null?void 0:D.id},[l]),C=A.useCallback((L,D)=>{const N=D.currentTarget.querySelector(`.${Ke.columnHeaderTitleContainerContent}`);if(!!N&&N.contains(D.target)&&L.field!==Vx.field)return;const B=e.current.getViewportPageSize(),V=L.field?e.current.getColumnIndex(L.field):0,G=l.length>0?0:null,q=l.length-1,z=0,$=ss(e).length-1,K=tE(e);let te=!0;switch(D.key){case"ArrowDown":{G!==null&&(c?g(V,D):f(V,w(G)));break}case"ArrowRight":{const re=eR({currentColIndex:V,firstColIndex:z,lastColIndex:$,isRtl:o});re!==null&&p(re,D);break}case"ArrowLeft":{const re=JM({currentColIndex:V,firstColIndex:z,lastColIndex:$,isRtl:o});re!==null&&p(re,D);break}case"ArrowUp":{K>0&&v(V,K-1,D);break}case"PageDown":{G!==null&&q!==null&&f(V,w(Math.min(G+B,q)));break}case"Home":{p(z,D);break}case"End":{p($,D);break}case"Enter":{(D.ctrlKey||D.metaKey)&&e.current.toggleColumnMenu(L.field);break}case" ":break;default:te=!1}te&&D.preventDefault()},[e,l.length,c,g,f,w,o,p,v]),T=A.useCallback((L,D)=>{const N=iie(e)===L.field,F=aie(e)===L.field;if(N||F||!pk(D.key))return;const B=e.current.getViewportPageSize(),V=L.field?e.current.getColumnIndex(L.field):0,G=0,q=l.length-1,z=0,$=ss(e).length-1;let K=!0;switch(D.key){case"ArrowDown":{const te=w(G);te!=null&&f(V,te);break}case"ArrowRight":{const te=eR({currentColIndex:V,firstColIndex:z,lastColIndex:$,isRtl:o});te!==null&&g(te,D);break}case"ArrowLeft":{const te=JM({currentColIndex:V,firstColIndex:z,lastColIndex:$,isRtl:o});te!==null?g(te,D):e.current.setColumnHeaderFilterFocus(L.field,D);break}case"ArrowUp":{p(V,D);break}case"PageDown":{q!==null&&f(V,w(Math.min(G+B,q)));break}case"Home":{g(z,D);break}case"End":{g($,D);break}case" ":break;default:K=!1}K&&D.preventDefault()},[e,l.length,g,o,p,f,w]),k=A.useCallback((L,D)=>{const N=dk(e);if(N===null)return;const{field:F,depth:B}=N,{fields:V,depth:G,maxDepth:q}=L,z=e.current.getViewportPageSize(),$=e.current.getColumnIndex(F),K=F?e.current.getColumnIndex(F):0,te=0,re=l.length-1,oe=0,ue=ss(e).length-1;let Q=!0;switch(D.key){case"ArrowDown":{G===q-1?p($,D):v($,B+1,D);break}case"ArrowUp":{G>0&&v($,B-1,D);break}case"ArrowRight":{const ce=V.length-V.indexOf(F)-1;$+ce+1<=ue&&v($+ce+1,B,D);break}case"ArrowLeft":{const ce=V.indexOf(F);$-ce-1>=oe&&v($-ce-1,B,D);break}case"PageDown":{re!==null&&f(K,w(Math.min(te+z,re)));break}case"Home":{v(oe,B,D);break}case"End":{v(ue,B,D);break}case" ":break;default:Q=!1}Q&&D.preventDefault()},[e,l.length,p,v,f,w]),P=A.useCallback((L,D)=>{if(nE(D))return;const N=e.current.getCellParams(L.id,L.field);if(N.cellMode===pi.Edit||!pk(D.key)||!e.current.unstable_applyPipeProcessors("canUpdateFocus",!0,{event:D,cell:N})||l.length===0)return;const B=e.current.getViewportPageSize(),V=i?()=>0:e.current.getColumnIndex,G=L.field?V(L.field):0,q=l.findIndex(ue=>ue.id===L.id),z=0,$=l.length-1,K=0,re=(i?[wx(e.current.state)]:ss(e)).length-1;let oe=!0;switch(D.key){case"ArrowDown":{q<$&&f(G,w(q+1),o?"right":"left","down");break}case"ArrowUp":{q>z?f(G,w(q-1)):c?g(G,D):p(G,D);break}case"ArrowRight":{const ue=eR({currentColIndex:G,firstColIndex:K,lastColIndex:re,isRtl:o});ue!==null&&f(ue,w(q),o?"left":"right");break}case"ArrowLeft":{const ue=JM({currentColIndex:G,firstColIndex:K,lastColIndex:re,isRtl:o});ue!==null&&f(ue,w(q),o?"right":"left");break}case"Tab":{D.shiftKey&&G>K?f(G-1,w(q),"left"):!D.shiftKey&&G<re&&f(G+1,w(q),"right");break}case" ":{if(L.field===gA)break;const Q=L.colDef;if(Q&&(Q.field===Fre||vfe(Q.field)))break;!D.shiftKey&&q<$&&f(G,w(Math.min(q+B,$)));break}case"PageDown":{q<$&&f(G,w(Math.min(q+B,$)));break}case"PageUp":{const ue=Math.max(q-B,z);ue!==q&&ue>=z?f(G,w(ue)):p(G,D);break}case"Home":{D.ctrlKey||D.metaKey||D.shiftKey?f(K,w(z)):f(K,w(q));break}case"End":{D.ctrlKey||D.metaKey||D.shiftKey?f(re,w($)):f(re,w(q));break}default:oe=!1}oe&&D.preventDefault()},[e,l,o,f,w,c,g,p,i]),O=A.useCallback((L,{event:D})=>D.key===" "?!1:L,[]);sa(e,"canStartEditing",O),Hn(e,"columnHeaderKeyDown",C),Hn(e,"headerFilterKeyDown",T),Hn(e,"columnGroupHeaderKeyDown",k),Hn(e,"cellKeyDown",P)},xfe=(e,t)=>{var T,k;const n=Ts(e,"useGridRowCount"),r=un(e,LF),o=un(e,Cw),i=un(e,i1),l=un(e,bu),c=Lh(()=>bu(e).pageSize);e.current.registerControlState({stateId:"paginationRowCount",propModel:t.rowCount,propOnChange:t.onRowCountChange,stateSelector:Cw,changeEvent:"rowCountChange"});const p={setRowCount:A.useCallback(P=>{o!==P&&(n.debug("Setting 'rowCount' to",P),e.current.setState(O=>we({},O,{pagination:we({},O.pagination,{rowCount:P})})))},[e,n,o])};Wr(e,p,"public");const g=A.useCallback((P,O)=>{var N,F;const L=Cw(e);return!O.exportOnlyDirtyModels||t.rowCount!=null||((F=(N=t.initialState)==null?void 0:N.pagination)==null?void 0:F.rowCount)!=null?we({},P,{pagination:we({},P.pagination,{rowCount:L})}):P},[e,t.rowCount,(k=(T=t.initialState)==null?void 0:T.pagination)==null?void 0:k.rowCount]),v=A.useCallback((P,O)=>{var D;const L=(D=O.stateToRestore.pagination)!=null&&D.rowCount?O.stateToRestore.pagination.rowCount:Cw(e);return e.current.setState(N=>we({},N,{pagination:we({},N.pagination,{rowCount:L})})),P},[e]);sa(e,"exportState",g),sa(e,"restoreState",v);const w=A.useCallback(P=>{t.paginationMode==="client"||!c.current||P.pageSize!==c.current&&(c.current=P.pageSize,o===-1&&e.current.setPage(0))},[t.paginationMode,c,o,e]);Hn(e,"paginationModelChange",w),A.useEffect(()=>{t.paginationMode==="client"?e.current.setRowCount(r):t.rowCount!=null&&e.current.setRowCount(t.rowCount)},[e,t.paginationMode,r,t.rowCount]);const C=i.hasNextPage===!1;A.useEffect(()=>{C&&o===-1&&e.current.setRowCount(l.pageSize*l.page+r)},[e,r,C,o,l])},Cfe=(e,t)=>{var f,p;const n=Ts(e,"useGridPaginationMeta"),r=un(e,i1);e.current.registerControlState({stateId:"paginationMeta",propModel:t.paginationMeta,propOnChange:t.onPaginationMetaChange,stateSelector:i1,changeEvent:"paginationMetaChange"});const i={setPaginationMeta:A.useCallback(g=>{r!==g&&(n.debug("Setting 'paginationMeta' to",g),e.current.setState(v=>we({},v,{pagination:we({},v.pagination,{meta:g})})))},[e,n,r])};Wr(e,i,"public");const l=A.useCallback((g,v)=>{var T,k;const w=i1(e);return!v.exportOnlyDirtyModels||t.paginationMeta!=null||((k=(T=t.initialState)==null?void 0:T.pagination)==null?void 0:k.meta)!=null?we({},g,{pagination:we({},g.pagination,{meta:w})}):g},[e,t.paginationMeta,(p=(f=t.initialState)==null?void 0:f.pagination)==null?void 0:p.meta]),c=A.useCallback((g,v)=>{var C;const w=(C=v.stateToRestore.pagination)!=null&&C.meta?v.stateToRestore.pagination.meta:i1(e);return e.current.setState(T=>we({},T,{pagination:we({},T.pagination,{meta:w})})),g},[e]);sa(e,"exportState",l),sa(e,"restoreState",c),A.useEffect(()=>{t.paginationMeta&&e.current.setPaginationMeta(t.paginationMeta)},[e,t.paginationMeta])},Sfe=(e,t)=>{var i,l,c,f,p,g;const n=we({},hG(t.autoPageSize),t.paginationModel??((l=(i=t.initialState)==null?void 0:i.pagination)==null?void 0:l.paginationModel));fG(n.pageSize,t.signature);const r=t.rowCount??((f=(c=t.initialState)==null?void 0:c.pagination)==null?void 0:f.rowCount),o=t.paginationMeta??((g=(p=t.initialState)==null?void 0:p.pagination)==null?void 0:g.meta)??{};return we({},e,{pagination:{paginationModel:n,rowCount:r,meta:o}})},Efe=(e,t)=>{Cfe(e,t),sfe(e,t),xfe(e,t)},Tfe=(e,t)=>{var n;return we({},e,{preferencePanel:((n=t.initialState)==null?void 0:n.preferencePanel)??{open:!1}})},Ife=(e,t)=>{var v;const n=Ts(e,"useGridPreferencesPanel"),r=A.useRef(void 0),o=A.useRef(void 0),i=A.useCallback(()=>{n.debug("Hiding Preferences Panel");const w=uS(e.current.state);w.openedPanelValue&&e.current.publishEvent("preferencePanelClose",{openedPanelValue:w.openedPanelValue}),e.current.setState(C=>we({},C,{preferencePanel:{open:!1}})),e.current.forceUpdate()},[e,n]),l=A.useCallback(()=>{o.current=setTimeout(()=>clearTimeout(r.current),0)},[]),c=A.useCallback(()=>{r.current=setTimeout(i,100)},[i]),f=A.useCallback((w,C,T)=>{n.debug("Opening Preferences Panel"),l(),e.current.setState(k=>we({},k,{preferencePanel:we({},k.preferencePanel,{open:!0,openedPanelValue:w,panelId:C,labelId:T})})),e.current.publishEvent("preferencePanelOpen",{openedPanelValue:w}),e.current.forceUpdate()},[n,l,e]);Wr(e,{showPreferences:f,hidePreferences:c},"public");const p=A.useCallback((w,C)=>{var P;const T=uS(e.current.state);return!C.exportOnlyDirtyModels||((P=t.initialState)==null?void 0:P.preferencePanel)!=null||T.open?we({},w,{preferencePanel:T}):w},[e,(v=t.initialState)==null?void 0:v.preferencePanel]),g=A.useCallback((w,C)=>{const T=C.stateToRestore.preferencePanel;return T!=null&&e.current.setState(k=>we({},k,{preferencePanel:T})),w},[e]);sa(e,"exportState",p),sa(e,"restoreState",g),A.useEffect(()=>()=>{clearTimeout(r.current),clearTimeout(o.current)},[])},GD=e=>{switch(e.type){case"boolean":return!1;case"date":case"dateTime":case"number":return;case"singleSelect":return null;case"string":default:return""}},kfe=["id","field"],Pfe=["id","field"],Afe=(e,t)=>{const[n,r]=A.useState({}),o=A.useRef(n),i=A.useRef({}),{processRowUpdate:l,onProcessRowUpdateError:c,cellModesModel:f,onCellModesModelChange:p}=t,g=oe=>(...ue)=>{t.editMode===zf.Cell&&oe(...ue)},v=A.useCallback((oe,ue)=>{const Q=e.current.getCellParams(oe,ue);if(!e.current.isCellEditable(Q))throw new Error(`MUI X: The cell with id=${oe} and field=${ue} is not editable.`)},[e]),w=A.useCallback((oe,ue,Q)=>{if(e.current.getCellMode(oe,ue)!==Q)throw new Error(`MUI X: The cell with id=${oe} and field=${ue} is not in ${Q} mode.`)},[e]),C=A.useCallback((oe,ue)=>{if(!oe.isEditable||oe.cellMode===pi.Edit)return;const Q=we({},oe,{reason:Bp.cellDoubleClick});e.current.publishEvent("cellEditStart",Q,ue)},[e]),T=A.useCallback((oe,ue)=>{if(oe.cellMode===pi.View||e.current.getCellMode(oe.id,oe.field)===pi.View)return;const Q=we({},oe,{reason:vh.cellFocusOut});e.current.publishEvent("cellEditStop",Q,ue)},[e]),k=A.useCallback((oe,ue)=>{if(oe.cellMode===pi.Edit){if(ue.which===229)return;let Q;if(ue.key==="Escape"?Q=vh.escapeKeyDown:ue.key==="Enter"?Q=vh.enterKeyDown:ue.key==="Tab"&&(Q=ue.shiftKey?vh.shiftTabKeyDown:vh.tabKeyDown,ue.preventDefault()),Q){const ce=we({},oe,{reason:Q});e.current.publishEvent("cellEditStop",ce,ue)}}else if(oe.isEditable){let Q;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:ue,cellParams:oe,editMode:"cell"}))return;if(zG(ue)?Q=Bp.printableKeyDown:UG(ue)?Q=Bp.pasteKeyDown:ue.key==="Enter"?Q=Bp.enterKeyDown:(ue.key==="Backspace"||ue.key==="Delete")&&(Q=Bp.deleteKeyDown),Q){const ae=we({},oe,{reason:Q,key:ue.key});e.current.publishEvent("cellEditStart",ae,ue)}}},[e]),P=A.useCallback(oe=>{const{id:ue,field:Q,reason:ce}=oe,ae={id:ue,field:Q};(ce===Bp.printableKeyDown||ce===Bp.deleteKeyDown||ce===Bp.pasteKeyDown)&&(ae.deleteValue=!0),e.current.startCellEditMode(ae)},[e]),O=A.useCallback(oe=>{const{id:ue,field:Q,reason:ce}=oe;e.current.runPendingEditCellValueMutation(ue,Q);let ae;ce===vh.enterKeyDown?ae="below":ce===vh.tabKeyDown?ae="right":ce===vh.shiftTabKeyDown&&(ae="left");const fe=ce==="escapeKeyDown";e.current.stopCellEditMode({id:ue,field:Q,ignoreModifications:fe,cellToFocusAfter:ae})},[e]),L=oe=>async(...ue)=>{var Q;if(oe){const{id:ce,field:ae}=ue[0];((Q=e.current.state.editRows[ce][ae])==null?void 0:Q.error)||oe(...ue)}};Hn(e,"cellDoubleClick",g(C)),Hn(e,"cellFocusOut",g(T)),Hn(e,"cellKeyDown",g(k)),Hn(e,"cellEditStart",g(P)),Hn(e,"cellEditStop",g(O)),Pi(e,"cellEditStart",t.onCellEditStart),Pi(e,"cellEditStop",L(t.onCellEditStop));const D=A.useCallback((oe,ue)=>{const Q=Ks(e.current.state);return Q[oe]&&Q[oe][ue]?pi.Edit:pi.View},[e]),N=co(oe=>{const ue=oe!==t.cellModesModel;p&&ue&&p(oe,{api:e.current}),!(t.cellModesModel&&ue)&&(r(oe),o.current=oe,e.current.publishEvent("cellModesModelChange",oe))}),F=A.useCallback((oe,ue,Q)=>{const ce=we({},o.current);if(Q!==null)ce[oe]=we({},ce[oe],{[ue]:we({},Q)});else{const ae=ce[oe],fe=sr(ae,[ue].map(dS));ce[oe]=fe,Object.keys(ce[oe]).length===0&&delete ce[oe]}N(ce)},[N]),B=A.useCallback((oe,ue,Q)=>{e.current.setState(ce=>{const ae=we({},ce.editRows);return Q!==null?ae[oe]=we({},ae[oe],{[ue]:we({},Q)}):(delete ae[oe][ue],Object.keys(ae[oe]).length===0&&delete ae[oe]),we({},ce,{editRows:ae})}),e.current.forceUpdate()},[e]),V=A.useCallback(oe=>{const{id:ue,field:Q}=oe,ce=sr(oe,kfe);v(ue,Q),w(ue,Q,pi.View),F(ue,Q,we({mode:pi.Edit},ce))},[v,w,F]),G=co(async oe=>{const{id:ue,field:Q,deleteValue:ce,initialValue:ae}=oe,fe=e.current.getCellValue(ue,Q);let le=fe;ce?le=GD(e.current.getColumn(Q)):ae&&(le=ae);const pe=e.current.getColumn(Q),Fe=!!pe.preProcessEditCellProps&&ce;let Be={value:le,error:!1,isProcessingProps:Fe};if(B(ue,Q,Be),e.current.setCellFocus(ue,Q),Fe&&(Be=await Promise.resolve(pe.preProcessEditCellProps({id:ue,row:e.current.getRow(ue),props:Be,hasChanged:le!==fe})),e.current.getCellMode(ue,Q)===pi.Edit)){const Ze=Ks(e.current.state);B(ue,Q,we({},Be,{value:Ze[ue][Q].value,isProcessingProps:!1}))}}),q=A.useCallback(oe=>{const{id:ue,field:Q}=oe,ce=sr(oe,Pfe);w(ue,Q,pi.Edit),F(ue,Q,we({mode:pi.View},ce))},[w,F]),z=co(async oe=>{const{id:ue,field:Q,ignoreModifications:ce,cellToFocusAfter:ae="none"}=oe;w(ue,Q,pi.Edit),e.current.runPendingEditCellValueMutation(ue,Q);const fe=()=>{B(ue,Q,null),F(ue,Q,null),ae!=="none"&&e.current.moveFocusToRelativeCell(ue,Q,ae)};if(ce){fe();return}const le=Ks(e.current.state),{error:pe,isProcessingProps:Fe}=le[ue][Q];if(pe||Fe){i.current[ue][Q].mode=pi.Edit,F(ue,Q,{mode:pi.Edit});return}const Be=e.current.getRowWithUpdatedValuesFromCellEditing(ue,Q);if(l){const Ze=it=>{i.current[ue][Q].mode=pi.Edit,F(ue,Q,{mode:pi.Edit}),c&&c(it)};try{const it=e.current.getRow(ue);Promise.resolve(l(Be,it,{rowId:ue})).then(ot=>{e.current.updateRows([ot]),fe()}).catch(Ze)}catch(it){Ze(it)}}else e.current.updateRows([Be]),fe()}),$=A.useCallback(async oe=>{var it,ot;const{id:ue,field:Q,value:ce,debounceMs:ae,unstable_skipValueParser:fe}=oe;v(ue,Q),w(ue,Q,pi.Edit);const le=e.current.getColumn(Q),pe=e.current.getRow(ue);let Fe=ce;le.valueParser&&!fe&&(Fe=le.valueParser(ce,pe,le,e));let Be=Ks(e.current.state),Ze=we({},Be[ue][Q],{value:Fe,changeReason:ae?"debouncedSetEditCellValue":"setEditCellValue"});if(le.preProcessEditCellProps){const ut=ce!==Be[ue][Q].value;Ze=we({},Ze,{isProcessingProps:!0}),B(ue,Q,Ze),Ze=await Promise.resolve(le.preProcessEditCellProps({id:ue,row:pe,props:Ze,hasChanged:ut}))}return e.current.getCellMode(ue,Q)===pi.View?!1:(Be=Ks(e.current.state),Ze=we({},Ze,{isProcessingProps:!1}),Ze.value=le.preProcessEditCellProps?Be[ue][Q].value:Fe,B(ue,Q,Ze),Be=Ks(e.current.state),!((ot=(it=Be[ue])==null?void 0:it[Q])!=null&&ot.error))},[e,v,w,B]),K=A.useCallback((oe,ue)=>{const Q=e.current.getColumn(ue),ce=Ks(e.current.state),ae=e.current.getRow(oe);if(!ce[oe]||!ce[oe][ue])return e.current.getRow(oe);const{value:fe}=ce[oe][ue];return Q.valueSetter?Q.valueSetter(fe,ae,Q,e):we({},ae,{[ue]:fe})},[e]),te={getCellMode:D,startCellEditMode:V,stopCellEditMode:q},re={setCellEditingEditCellValue:$,getRowWithUpdatedValuesFromCellEditing:K};Wr(e,te,"public"),Wr(e,re,"private"),A.useEffect(()=>{f&&N(f)},[f,N]),$i(()=>{const oe=ck(e),ue=i.current;i.current=I8(n),Object.entries(n).forEach(([Q,ce])=>{Object.entries(ce).forEach(([ae,fe])=>{var Fe,Be;const le=((Be=(Fe=ue[Q])==null?void 0:Fe[ae])==null?void 0:Be.mode)||pi.View,pe=oe[Q]??Q;fe.mode===pi.Edit&&le===pi.View?G(we({id:pe,field:ae},fe)):fe.mode===pi.View&&le===pi.Edit&&z(we({id:pe,field:ae},fe))})})},[e,n,G,z])},Mfe=["id"],Rfe=["id"],Ofe=(e,t)=>{const[n,r]=A.useState({}),o=A.useRef(n),i=A.useRef({}),l=A.useRef(void 0),c=A.useRef(null),{processRowUpdate:f,onProcessRowUpdateError:p,rowModesModel:g,onRowModesModelChange:v}=t,w=ae=>(...fe)=>{t.editMode===zf.Row&&ae(...fe)},C=A.useCallback((ae,fe)=>{const le=e.current.getCellParams(ae,fe);if(!e.current.isCellEditable(le))throw new Error(`MUI X: The cell with id=${ae} and field=${fe} is not editable.`)},[e]),T=A.useCallback((ae,fe)=>{if(e.current.getRowMode(ae)!==fe)throw new Error(`MUI X: The row with id=${ae} is not in ${fe} mode.`)},[e]),k=A.useCallback(ae=>{const fe=Ks(e.current.state);return Object.values(fe[ae]).some(le=>le.error)},[e]),P=A.useCallback((ae,fe)=>{if(!ae.isEditable||e.current.getRowMode(ae.id)===Ii.Edit)return;const le=e.current.getRowParams(ae.id),pe=we({},le,{field:ae.field,reason:_g.cellDoubleClick});e.current.publishEvent("rowEditStart",pe,fe)},[e]),O=A.useCallback(ae=>{c.current=ae},[]),L=A.useCallback((ae,fe)=>{ae.isEditable&&e.current.getRowMode(ae.id)!==Ii.View&&(c.current=null,l.current=setTimeout(()=>{var le;if(((le=c.current)==null?void 0:le.id)!==ae.id){if(!e.current.getRow(ae.id)||e.current.getRowMode(ae.id)===Ii.View||k(ae.id))return;const pe=e.current.getRowParams(ae.id),Fe=we({},pe,{field:ae.field,reason:cf.rowFocusOut});e.current.publishEvent("rowEditStop",Fe,fe)}}))},[e,k]);A.useEffect(()=>()=>{clearTimeout(l.current)},[]);const D=A.useCallback((ae,fe)=>{if(ae.cellMode===Ii.Edit){if(fe.which===229)return;let le;if(fe.key==="Escape")le=cf.escapeKeyDown;else if(fe.key==="Enter")le=cf.enterKeyDown;else if(fe.key==="Tab"){const pe=zx(e).filter(Fe=>e.current.getColumn(Fe).type===fA?!0:e.current.isCellEditable(e.current.getCellParams(ae.id,Fe)));if(fe.shiftKey?ae.field===pe[0]&&(le=cf.shiftTabKeyDown):ae.field===pe[pe.length-1]&&(le=cf.tabKeyDown),fe.preventDefault(),!le){const Fe=pe.findIndex(Ze=>Ze===ae.field),Be=pe[fe.shiftKey?Fe-1:Fe+1];e.current.setCellFocus(ae.id,Be)}}if(le){if(le!==cf.escapeKeyDown&&k(ae.id))return;const pe=we({},e.current.getRowParams(ae.id),{reason:le,field:ae.field});e.current.publishEvent("rowEditStop",pe,fe)}}else if(ae.isEditable){let le;if(!e.current.unstable_applyPipeProcessors("canStartEditing",!0,{event:fe,cellParams:ae,editMode:"row"}))return;if(zG(fe)||UG(fe)?le=_g.printableKeyDown:fe.key==="Enter"?le=_g.enterKeyDown:(fe.key==="Backspace"||fe.key==="Delete")&&(le=_g.deleteKeyDown),le){const Fe=e.current.getRowParams(ae.id),Be=we({},Fe,{field:ae.field,reason:le});e.current.publishEvent("rowEditStart",Be,fe)}}},[e,k]),N=A.useCallback(ae=>{const{id:fe,field:le,reason:pe}=ae,Fe={id:fe,fieldToFocus:le};(pe===_g.printableKeyDown||pe===_g.deleteKeyDown)&&(Fe.deleteValue=!!le),e.current.startRowEditMode(Fe)},[e]),F=A.useCallback(ae=>{const{id:fe,reason:le,field:pe}=ae;e.current.runPendingEditCellValueMutation(fe);let Fe;le===cf.enterKeyDown?Fe="below":le===cf.tabKeyDown?Fe="right":le===cf.shiftTabKeyDown&&(Fe="left");const Be=le==="escapeKeyDown";e.current.stopRowEditMode({id:fe,ignoreModifications:Be,field:pe,cellToFocusAfter:Fe})},[e]);Hn(e,"cellDoubleClick",w(P)),Hn(e,"cellFocusIn",w(O)),Hn(e,"cellFocusOut",w(L)),Hn(e,"cellKeyDown",w(D)),Hn(e,"rowEditStart",w(N)),Hn(e,"rowEditStop",w(F)),Pi(e,"rowEditStart",t.onRowEditStart),Pi(e,"rowEditStop",t.onRowEditStop);const B=A.useCallback(ae=>{if(t.editMode===zf.Cell)return Ii.View;const fe=Ks(e.current.state);return fe[ae]&&Object.keys(fe[ae]).length>0?Ii.Edit:Ii.View},[e,t.editMode]),V=co(ae=>{const fe=ae!==t.rowModesModel;v&&fe&&v(ae,{api:e.current}),!(t.rowModesModel&&fe)&&(r(ae),o.current=ae,e.current.publishEvent("rowModesModelChange",ae))}),G=A.useCallback((ae,fe)=>{const le=we({},o.current);fe!==null?le[ae]=we({},fe):delete le[ae],V(le)},[V]),q=A.useCallback((ae,fe)=>{e.current.setState(le=>{const pe=we({},le.editRows);return fe!==null?pe[ae]=fe:delete pe[ae],we({},le,{editRows:pe})}),e.current.forceUpdate()},[e]),z=A.useCallback((ae,fe,le)=>{e.current.setState(pe=>{const Fe=we({},pe.editRows);return le!==null?Fe[ae]=we({},Fe[ae],{[fe]:we({},le)}):(delete Fe[ae][fe],Object.keys(Fe[ae]).length===0&&delete Fe[ae]),we({},pe,{editRows:Fe})}),e.current.forceUpdate()},[e]),$=A.useCallback(ae=>{const{id:fe}=ae,le=sr(ae,Mfe);T(fe,Ii.View),G(fe,we({mode:Ii.Edit},le))},[T,G]),K=co(ae=>{const{id:fe,fieldToFocus:le,deleteValue:pe,initialValue:Fe}=ae,Be=Yp(e),Ze=Be.reduce((it,ot)=>{if(!e.current.getCellParams(fe,ot).isEditable)return it;const st=e.current.getColumn(ot);let ct=e.current.getCellValue(fe,ot);return le===ot&&(pe||Fe)&&(pe?ct=GD(st):Fe&&(ct=Fe)),it[ot]={value:ct,error:!1,isProcessingProps:!!st.preProcessEditCellProps&&pe},it},{});q(fe,Ze),le&&e.current.setCellFocus(fe,le),Be.filter(it=>!!e.current.getColumn(it).preProcessEditCellProps&&pe).forEach(it=>{const ot=e.current.getColumn(it),ut=e.current.getCellValue(fe,it),st=pe?GD(ot):Fe??ut;Promise.resolve(ot.preProcessEditCellProps({id:fe,row:e.current.getRow(fe),props:Ze[it],hasChanged:st!==ut})).then(ct=>{if(e.current.getRowMode(fe)===Ii.Edit){const Ae=Ks(e.current.state);z(fe,it,we({},ct,{value:Ae[fe][it].value,isProcessingProps:!1}))}})})}),te=A.useCallback(ae=>{const{id:fe}=ae,le=sr(ae,Rfe);T(fe,Ii.Edit),G(fe,we({mode:Ii.View},le))},[T,G]),re=co(ae=>{const{id:fe,ignoreModifications:le,field:pe,cellToFocusAfter:Fe="none"}=ae;e.current.runPendingEditCellValueMutation(fe);const Be=()=>{Fe!=="none"&&pe&&e.current.moveFocusToRelativeCell(fe,pe,Fe),q(fe,null),G(fe,null)};if(le){Be();return}const Ze=Ks(e.current.state),it=e.current.getRow(fe);if(Object.values(Ze[fe]).some(st=>st.isProcessingProps)){i.current[fe].mode=Ii.Edit;return}if(k(fe)){i.current[fe].mode=Ii.Edit,G(fe,{mode:Ii.Edit});return}const ut=e.current.getRowWithUpdatedValuesFromRowEditing(fe);if(f){const st=ct=>{i.current[fe].mode=Ii.Edit,G(fe,{mode:Ii.Edit}),p&&p(ct)};try{Promise.resolve(f(ut,it,{rowId:fe})).then(ct=>{e.current.updateRows([ct]),Be()}).catch(st)}catch(ct){st(ct)}}else e.current.updateRows([ut]),Be()}),oe=A.useCallback(ae=>{const{id:fe,field:le,value:pe,debounceMs:Fe,unstable_skipValueParser:Be}=ae;C(fe,le);const Ze=e.current.getColumn(le),it=e.current.getRow(fe);let ot=pe;Ze.valueParser&&!Be&&(ot=Ze.valueParser(pe,it,Ze,e));let ut=Ks(e.current.state),st=we({},ut[fe][le],{value:ot,changeReason:Fe?"debouncedSetEditCellValue":"setEditCellValue"});return Ze.preProcessEditCellProps||z(fe,le,st),new Promise(ct=>{const Ae=[];if(Ze.preProcessEditCellProps){const Z=st.value!==ut[fe][le].value;st=we({},st,{isProcessingProps:!0}),z(fe,le,st);const ne=ut[fe],ee=sr(ne,[le].map(dS)),ye=Promise.resolve(Ze.preProcessEditCellProps({id:fe,row:it,props:st,hasChanged:Z,otherFieldsProps:ee})).then(Ie=>{if(e.current.getRowMode(fe)===Ii.View){ct(!1);return}ut=Ks(e.current.state),Ie=we({},Ie,{isProcessingProps:!1}),Ie.value=Ze.preProcessEditCellProps?ut[fe][le].value:ot,z(fe,le,Ie)});Ae.push(ye)}Object.entries(ut[fe]).forEach(([Z,ne])=>{if(Z===le)return;const ee=e.current.getColumn(Z);if(!ee.preProcessEditCellProps)return;ne=we({},ne,{isProcessingProps:!0}),z(fe,Z,ne),ut=Ks(e.current.state);const ye=ut[fe],Ie=sr(ye,[Z].map(dS)),ge=Promise.resolve(ee.preProcessEditCellProps({id:fe,row:it,props:ne,hasChanged:!1,otherFieldsProps:Ie})).then($e=>{if(e.current.getRowMode(fe)===Ii.View){ct(!1);return}$e=we({},$e,{isProcessingProps:!1}),z(fe,Z,$e)});Ae.push(ge)}),Promise.all(Ae).then(()=>{e.current.getRowMode(fe)===Ii.Edit?(ut=Ks(e.current.state),ct(!ut[fe][le].error)):ct(!1)})})},[e,C,z]),ue=A.useCallback(ae=>{const fe=Ks(e.current.state),le=e.current.getRow(ae);if(!fe[ae])return e.current.getRow(ae);let pe=we({},le);return Object.entries(fe[ae]).forEach(([Fe,Be])=>{const Ze=e.current.getColumn(Fe);Ze.valueSetter?pe=Ze.valueSetter(Be.value,pe,Ze,e):pe[Fe]=Be.value}),pe},[e]),Q={getRowMode:B,startRowEditMode:$,stopRowEditMode:te},ce={setRowEditingEditCellValue:oe,getRowWithUpdatedValuesFromRowEditing:ue};Wr(e,Q,"public"),Wr(e,ce,"private"),A.useEffect(()=>{g&&V(g)},[g,V]),$i(()=>{const ae=ck(e),fe=i.current;i.current=I8(n);const le=new Set([...Object.keys(n),...Object.keys(fe)]);Array.from(le).forEach(pe=>{var it;const Fe=n[pe]??{mode:Ii.View},Be=((it=fe[pe])==null?void 0:it.mode)||Ii.View,Ze=ae[pe]??pe;Fe.mode===Ii.Edit&&Be===Ii.View?K(we({id:Ze},Fe)):Fe.mode===Ii.View&&Be===Ii.Edit&&re(we({id:Ze},Fe))})},[e,n,K,re])},Dfe=e=>we({},e,{editRows:{}}),Lfe=(e,t)=>{Afe(e,t),Ofe(e,t);const n=A.useRef({}),{isCellEditable:r}=t,o=A.useCallback(w=>_x(w.rowNode)||!w.colDef.editable||!w.colDef.renderEditCell?!1:r?r(w):!0,[r]),i=(w,C,T,k)=>{if(!T){k();return}if(n.current[w]||(n.current[w]={}),n.current[w][C]){const[L]=n.current[w][C];clearTimeout(L)}const P=()=>{const[L]=n.current[w][C];clearTimeout(L),k(),delete n.current[w][C]},O=setTimeout(()=>{k(),delete n.current[w][C]},T);n.current[w][C]=[O,P]};A.useEffect(()=>{const w=n.current;return()=>{Object.entries(w).forEach(([C,T])=>{Object.keys(T).forEach(k=>{const[P]=w[C][k];clearTimeout(P),delete w[C][k]})})}},[]);const l=A.useCallback((w,C)=>{if(n.current[w]){if(!C)Object.keys(n.current[w]).forEach(T=>{const[,k]=n.current[w][T];k()});else if(n.current[w][C]){const[,T]=n.current[w][C];T()}}},[]),c=A.useCallback(w=>{const{id:C,field:T,debounceMs:k}=w;return new Promise(P=>{i(C,T,k,async()=>{const O=t.editMode===zf.Row?e.current.setRowEditingEditCellValue:e.current.setCellEditingEditCellValue;if(e.current.getCellMode(C,T)===pi.Edit){const L=await O(w);P(L)}})})},[e,t.editMode]),f=A.useCallback((w,C)=>t.editMode===zf.Cell?e.current.getRowWithUpdatedValuesFromCellEditing(w,C):e.current.getRowWithUpdatedValuesFromRowEditing(w),[e,t.editMode]),p=A.useCallback((w,C)=>{var k;return((k=Ks(e.current.state)[w])==null?void 0:k[C])??null},[e]),g={isCellEditable:o,setEditCellValue:c,getRowWithUpdatedValues:f,unstable_getEditCellMeta:p},v={runPendingEditCellValueMutation:l};Wr(e,g,"public"),Wr(e,v,"private")},Nfe=(e,t,n)=>{const r=!!t.unstable_dataSource;return n.current.caches.rows=gI({rows:r?[]:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),we({},e,{rows:J8({apiRef:n,rowCountProp:t.rowCount,loadingProp:r?!0:t.loading,previousTree:null,previousTreeDepths:null})})},Ffe=(e,t)=>{const n=Ts(e,"useGridRows"),r=I_(e,t),o=A.useRef(Date.now()),i=A.useRef(t.rowCount),l=Id(),c=A.useCallback(ce=>{const ae=jg(e)[ce];if(ae)return ae;const fe=e.current.getRowNode(ce);return fe&&_x(fe)?{[$w]:ce}:null},[e]),f=t.getRowId,p=A.useCallback(ce=>$w in ce?ce[$w]:f?f(ce):ce.id,[f]),g=A.useMemo(()=>r.rows.reduce((ce,{id:ae},fe)=>(ce[ae]=fe,ce),{}),[r.rows]),v=A.useCallback(({cache:ce,throttle:ae})=>{const fe=()=>{o.current=Date.now(),e.current.setState(pe=>we({},pe,{rows:J8({apiRef:e,rowCountProp:t.rowCount,loadingProp:t.loading,previousTree:_l(e),previousTreeDepths:Aj(e),previousGroupsToFetch:Mre(e)})})),e.current.publishEvent("rowsSet"),e.current.forceUpdate()};if(l.clear(),e.current.caches.rows=ce,!ae){fe();return}const le=t.throttleRowsMs-(Date.now()-o.current);if(le>0){l.start(le,fe);return}fe()},[t.throttleRowsMs,t.rowCount,t.loading,e,l]),w=A.useCallback(ce=>{n.debug(`Updating all rows, new length ${ce.length}`);const ae=gI({rows:ce,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),fe=e.current.caches.rows;ae.rowsBeforePartialUpdates=fe.rowsBeforePartialUpdates,v({cache:ae,throttle:!0})},[n,t.getRowId,t.loading,t.rowCount,v,e]),C=A.useCallback(ce=>{if(t.signature===Ad.DataGrid&&ce.length>1)throw new Error(["MUI X: You cannot update several rows at once in `apiRef.current.updateRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));const ae=Rj(e,ce,t.getRowId),fe=Mj({updates:ae,getRowId:t.getRowId,previousCache:e.current.caches.rows});v({cache:fe,throttle:!0})},[t.signature,t.getRowId,v,e]),T=A.useCallback((ce,ae)=>{const fe=Rj(e,ce,t.getRowId),le=Mj({updates:fe,getRowId:t.getRowId,previousCache:e.current.caches.rows,groupKeys:ae??[]});v({cache:le,throttle:!1})},[t.getRowId,v,e]),k=A.useCallback(ce=>{ce!==t.loading&&(n.debug(`Setting loading to ${ce}`),e.current.setState(ae=>we({},ae,{rows:we({},ae.rows,{loading:ce})})),e.current.caches.rows.loadingPropBeforePartialUpdates=ce)},[t.loading,e,n]),P=A.useCallback(()=>{const ce=hT(e),ae=jg(e);return new Map(ce.map(fe=>[fe,ae[fe]??{}]))},[e]),O=A.useCallback(()=>pA(e),[e]),L=A.useCallback(()=>hT(e),[e]),D=A.useCallback(ce=>g[ce],[g]),N=A.useCallback((ce,ae)=>{const fe=e.current.getRowNode(ce);if(!fe)throw new Error(`MUI X: No row with id #${ce} found.`);if(fe.type!=="group")throw new Error("MUI X: Only group nodes can be expanded or collapsed.");const le=we({},fe,{childrenExpanded:ae});e.current.setState(pe=>we({},pe,{rows:we({},pe.rows,{tree:we({},pe.rows.tree,{[ce]:le})})})),e.current.forceUpdate(),e.current.publishEvent("rowExpansionChange",le)},[e]),F=A.useCallback(ce=>_l(e)[ce]??null,[e]),B=A.useCallback(({skipAutoGeneratedRows:ce=!0,groupId:ae,applySorting:fe,applyFiltering:le})=>{const pe=_l(e);let Fe;if(fe){const Be=pe[ae];if(!Be)return[];const Ze=$x(e);Fe=[];const it=Ze.findIndex(ot=>ot===ae)+1;for(let ot=it;ot<Ze.length&&pe[Ze[ot]].depth>Be.depth;ot+=1){const ut=Ze[ot];(!ce||!_x(pe[ut]))&&Fe.push(ut)}}else Fe=RF(pe,ae,ce);if(le){const Be=Hx(e);Fe=Fe.filter(Ze=>Be[Ze]!==!1)}return Fe},[e]),V=A.useCallback((ce,ae)=>{const fe=e.current.getRowNode(ce);if(!fe)throw new Error(`MUI X: No row with id #${ce} found.`);if(fe.parent!==bl)throw new Error("MUI X: The row reordering do not support reordering of grouped rows yet.");if(fe.type!=="leaf")throw new Error("MUI X: The row reordering do not support reordering of footer or grouping rows.");e.current.setState(le=>{const pe=_l(le,e.current.instanceId)[bl],Fe=pe.children,Be=Fe.findIndex(it=>it===ce);if(Be===-1||Be===ae)return le;n.debug(`Moving row ${ce} to index ${ae}`);const Ze=[...Fe];return Ze.splice(ae,0,Ze.splice(Be,1)[0]),we({},le,{rows:we({},le.rows,{tree:we({},le.rows.tree,{[bl]:we({},pe,{children:Ze})})})})}),e.current.publishEvent("rowsSet")},[e,n]),G=A.useCallback((ce,ae)=>{if(t.signature===Ad.DataGrid&&ae.length>1)throw new Error(["MUI X: You cannot replace rows using `apiRef.current.unstable_replaceRows` on the DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock this feature."].join(`
`));if(ae.length===0)return;if(jx(e)>1)throw new Error("`apiRef.current.unstable_replaceRows` is not compatible with tree data and row grouping");const le=we({},_l(e)),pe=we({},jg(e)),Fe=we({},ck(e)),Be=le[bl],Ze=[...Be.children],it=new Set;for(let ut=0;ut<ae.length;ut+=1){const st=ae[ut],ct=mA(st,t.getRowId,"A row was provided without id when calling replaceRows()."),[Ae]=Ze.splice(ce+ut,1,ct);it.has(Ae)||(delete pe[Ae],delete Fe[Ae],delete le[Ae]);const Z={id:ct,depth:0,parent:bl,type:"leaf",groupingKey:null};pe[ct]=st,Fe[ct]=ct,le[ct]=Z,it.add(ct)}le[bl]=we({},Be,{children:Ze});const ot=Ze.filter(ut=>{var st;return((st=le[ut])==null?void 0:st.type)==="leaf"});e.current.caches.rows.dataRowIdToModelLookup=pe,e.current.caches.rows.dataRowIdToIdLookup=Fe,e.current.setState(ut=>we({},ut,{rows:we({},ut.rows,{dataRowIdToModelLookup:pe,dataRowIdToIdLookup:Fe,dataRowIds:ot,tree:le})})),e.current.publishEvent("rowsSet")},[e,t.signature,t.getRowId]),q={getRow:c,setLoading:k,getRowId:p,getRowModels:P,getRowsCount:O,getAllRowIds:L,setRows:w,updateRows:C,getRowNode:F,getRowIndexRelativeToVisibleRows:D,unstable_replaceRows:G},z={setRowIndex:V,setRowChildrenExpansion:N,getRowGroupChildren:B},$={updateServerRows:T},K=A.useCallback(()=>{n.info("Row grouping pre-processing have changed, regenerating the row tree");let ce;e.current.caches.rows.rowsBeforePartialUpdates===t.rows?ce=we({},e.current.caches.rows,{updates:{type:"full",rows:hT(e)}}):ce=gI({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),v({cache:ce,throttle:!1})},[n,e,t.rows,t.getRowId,t.loading,t.rowCount,v]),te=Lh(()=>t.unstable_dataSource),re=A.useCallback(ce=>{if(t.unstable_dataSource&&t.unstable_dataSource!==te.current){te.current=t.unstable_dataSource;return}ce==="rowTreeCreation"&&K()},[K,te,t.unstable_dataSource]),oe=A.useCallback(()=>{e.current.getActiveStrategy("rowTree")!==Rre(e)&&K()},[e,K]);Hn(e,"activeStrategyProcessorChange",re),Hn(e,"strategyAvailabilityChange",oe);const ue=A.useCallback(()=>{e.current.setState(ce=>{const ae=e.current.unstable_applyPipeProcessors("hydrateRows",{tree:_l(ce,e.current.instanceId),treeDepths:Aj(ce,e.current.instanceId),dataRowIds:hT(ce,e.current.instanceId),dataRowIdToModelLookup:jg(ce,e.current.instanceId),dataRowIdToIdLookup:ck(ce,e.current.instanceId)});return we({},ce,{rows:we({},ce.rows,ae,{totalTopLevelRowCount:Q8({tree:ae.tree,rowCountProp:t.rowCount})})})}),e.current.publishEvent("rowsSet"),e.current.forceUpdate()},[e,t.rowCount]);JF(e,"hydrateRows",ue),Wr(e,q,"public"),Wr(e,z,t.signature===Ad.DataGrid?"private":"public"),Wr(e,$,"private");const Q=A.useRef(!0);A.useEffect(()=>{var pe;if(Q.current){Q.current=!1;return}let ce=!1;t.rowCount!==i.current&&(ce=!0,i.current=t.rowCount);const ae=e.current.caches.rows.rowsBeforePartialUpdates===t.rows,fe=e.current.caches.rows.loadingPropBeforePartialUpdates===t.loading,le=e.current.caches.rows.rowCountPropBeforePartialUpdates===t.rowCount;ae&&(fe||(e.current.setState(Fe=>we({},Fe,{rows:we({},Fe.rows,{loading:t.loading})})),e.current.caches.rows.loadingPropBeforePartialUpdates=t.loading,e.current.forceUpdate()),le||(e.current.setState(Fe=>we({},Fe,{rows:we({},Fe.rows,{totalRowCount:Math.max(t.rowCount||0,Fe.rows.totalRowCount),totalTopLevelRowCount:Math.max(t.rowCount||0,Fe.rows.totalTopLevelRowCount)})})),e.current.caches.rows.rowCountPropBeforePartialUpdates=t.rowCount,e.current.forceUpdate()),!ce)||(n.debug(`Updating all rows, new length ${(pe=t.rows)==null?void 0:pe.length}`),v({cache:gI({rows:t.rows,getRowId:t.getRowId,loading:t.loading,rowCount:t.rowCount}),throttle:!1}))},[t.rows,t.rowCount,t.getRowId,t.loading,n,v,e])},zfe=e=>{const t={[bl]:we({},Dre(),{children:e})};for(let n=0;n<e.length;n+=1){const r=e[n];t[r]={id:r,depth:0,parent:bl,type:"leaf",groupingKey:null}}return{groupingName:u_,tree:t,treeDepths:{0:e.length},dataRowIds:e}},Bfe=({previousTree:e,actions:t})=>{const n=we({},e),r={};for(let l=0;l<t.remove.length;l+=1){const c=t.remove[l];r[c]=!0,delete n[c]}for(let l=0;l<t.insert.length;l+=1){const c=t.insert[l];n[c]={id:c,depth:0,parent:bl,type:"leaf",groupingKey:null}}const o=n[bl];let i=[...o.children,...t.insert];return Object.values(r).length&&(i=i.filter(l=>!r[l])),n[bl]=we({},o,{children:i}),{groupingName:u_,tree:n,treeDepths:{0:i.length},dataRowIds:i}},Ufe=e=>e.updates.type==="full"?zfe(e.updates.rows):Bfe({previousTree:e.previousTree,actions:e.updates.actions}),jfe=e=>{mk(e,u_,"rowTreeCreation",Ufe)};class tR extends Error{}function $fe(e,t){const n=A.useCallback(w=>({field:w,colDef:e.current.getColumn(w)}),[e]),r=A.useCallback(w=>{const C=e.current.getRow(w);if(!C)throw new tR(`No row with id #${w} found`);return{id:w,columns:e.current.getAllColumns(),row:C}},[e]),o=A.useCallback((w,C)=>{const T=t.unstable_listView?wx(e.current.state):e.current.getColumn(C),k=e.current.getRow(w),P=e.current.getRowNode(w);if(!k||!P)throw new tR(`No row with id #${w} found`);const O=k[C],L=T!=null&&T.valueGetter?T.valueGetter(O,k,T,e):O,D=Nc(e),N=FF(e),F={id:w,field:C,row:k,rowNode:P,colDef:T,cellMode:e.current.getCellMode(w,C),hasFocus:D!==null&&D.field===C&&D.id===w,tabIndex:N&&N.field===C&&N.id===w?0:-1,value:L,formattedValue:L,isEditable:!1,api:{}};return T&&T.valueFormatter&&(F.formattedValue=T.valueFormatter(L,k,T,e)),F.isEditable=T&&e.current.isCellEditable(F),F},[e,t.unstable_listView]),i=A.useCallback((w,C)=>{const T=e.current.getColumn(C),k=e.current.getRow(w);if(!k)throw new tR(`No row with id #${w} found`);return!T||!T.valueGetter?k[C]:T.valueGetter(k[T.field],k,T,e)},[e]),l=A.useCallback((w,C)=>{const T=C.field;if(!C||!C.valueGetter)return w[T];const k=w[C.field];return C.valueGetter(k,w,C,e)},[e]),c=A.useCallback((w,C)=>{const T=l(w,C);return!C||!C.valueFormatter?T:C.valueFormatter(T,w,C,e)},[e,l]),f=A.useCallback(w=>e.current.rootElementRef.current?Sse(e.current.rootElementRef.current,w):null,[e]),p=A.useCallback(w=>e.current.rootElementRef.current?Ese(e.current.rootElementRef.current,w):null,[e]),g=A.useCallback((w,C)=>e.current.rootElementRef.current?Tse(e.current.rootElementRef.current,{id:w,field:C}):null,[e]);Wr(e,{getCellValue:i,getCellParams:o,getCellElement:g,getRowValue:l,getRowFormattedValue:c,getRowParams:r,getRowElement:p,getColumnHeaderParams:n,getColumnHeaderElement:f},"public")}const t9=(e,t)=>e==null||Array.isArray(e)?e:t&&t[0]===e?t:[e],Hfe=(e,t)=>we({},e,{rowSelection:t.rowSelection?t9(t.rowSelectionModel)??[]:[]}),Vfe=(e,t)=>{var ue,Q,ce,ae,fe,le,pe;const n=Ts(e,"useGridSelection"),r=A.useCallback(Fe=>(...Be)=>{t.rowSelection&&Fe(...Be)},[t.rowSelection]),o=t.signature!==Ad.DataGrid&&(((ue=t.rowSelectionPropagation)==null?void 0:ue.parents)||((Q=t.rowSelectionPropagation)==null?void 0:Q.descendants)),i=A.useMemo(()=>t9(t.rowSelectionModel,wd(e.current.state)),[e,t.rowSelectionModel]),l=A.useRef(null);e.current.registerControlState({stateId:"rowSelection",propModel:i,propOnChange:t.onRowSelectionModelChange,stateSelector:wd,changeEvent:"rowSelectionChange"});const{checkboxSelection:c,disableRowSelectionOnClick:f,isRowSelectable:p}=t,g=NF(t),v=I_(e,t),w=un(e,_l),C=un(e,jx)>1,T=A.useCallback(Fe=>{let Be=Fe;const Ze=l.current??Fe,it=e.current.isRowSelected(Fe);if(it){const ot=Hw(e),ut=ot.findIndex(ct=>ct===Ze),st=ot.findIndex(ct=>ct===Be);if(ut===st)return;ut>st?Be=ot[st+1]:Be=ot[st-1]}l.current=Fe,e.current.selectRowRange({startId:Ze,endId:Be},!it)},[e]),k=A.useCallback(Fe=>{if(t.signature===Ad.DataGrid&&!g&&Array.isArray(Fe)&&Fe.length>1)throw new Error(["MUI X: `rowSelectionModel` can only contain 1 item in DataGrid.","You need to upgrade to DataGridPro or DataGridPremium component to unlock multiple selection."].join(`
`));wd(e.current.state)!==Fe&&(n.debug("Setting selection model"),e.current.setState(Ze=>we({},Ze,{rowSelection:t.rowSelection?Fe:[]})),e.current.forceUpdate())},[e,n,t.rowSelection,t.signature,g]),P=A.useCallback(Fe=>wd(e.current.state).includes(Fe),[e]),O=A.useCallback(Fe=>{if(t.rowSelection===!1||p&&!p(e.current.getRowParams(Fe)))return!1;const Be=e.current.getRowNode(Fe);return!((Be==null?void 0:Be.type)==="footer"||(Be==null?void 0:Be.type)==="pinnedRow")},[e,t.rowSelection,p]),L=A.useCallback(()=>ioe(e),[e]),D=A.useCallback((Fe,Be=!0,Ze=!1)=>{var it,ot,ut,st,ct,Ae;if(e.current.isRowSelectable(Fe))if(l.current=Fe,Ze){n.debug(`Setting selection for row ${Fe}`);const Z=[],ne=ee=>{Z.push(ee)};Be&&(ne(Fe),o&&fT(e,w,Fe,((it=t.rowSelectionPropagation)==null?void 0:it.descendants)??!1,((ot=t.rowSelectionPropagation)==null?void 0:ot.parents)??!1,ne)),e.current.setRowSelectionModel(Z)}else{n.debug(`Toggling selection for row ${Fe}`);const Z=wd(e.current.state),ne=new Set(Z);ne.delete(Fe);const ee=ge=>{ne.add(ge)},ye=ge=>{ne.delete(ge)};Be?(ee(Fe),o&&fT(e,w,Fe,((ut=t.rowSelectionPropagation)==null?void 0:ut.descendants)??!1,((st=t.rowSelectionPropagation)==null?void 0:st.parents)??!1,ee)):o&&Oj(e,w,Fe,((ct=t.rowSelectionPropagation)==null?void 0:ct.descendants)??!1,((Ae=t.rowSelectionPropagation)==null?void 0:Ae.parents)??!1,ye),(ne.size<2||g)&&e.current.setRowSelectionModel(Array.from(ne))}},[e,n,o,w,(ce=t.rowSelectionPropagation)==null?void 0:ce.descendants,(ae=t.rowSelectionPropagation)==null?void 0:ae.parents,g]),N=A.useCallback((Fe,Be=!0,Ze=!1)=>{n.debug("Setting selection for several rows");const it=Fe.filter(st=>e.current.isRowSelectable(st));let ot;if(Ze){if(Be){if(ot=new Set(it),o){const ct=Ae=>{ot.add(Ae)};it.forEach(Ae=>{var Z,ne;fT(e,w,Ae,((Z=t.rowSelectionPropagation)==null?void 0:Z.descendants)??!1,((ne=t.rowSelectionPropagation)==null?void 0:ne.parents)??!1,ct)})}}else ot=new Set;const st=Zp(e);if(ot.size===Object.keys(st).length&&Array.from(ot).every(ct=>st[ct]===ct))return}else{ot=new Set(Object.values(Zp(e)));const st=Ae=>{ot.add(Ae)},ct=Ae=>{ot.delete(Ae)};it.forEach(Ae=>{var Z,ne,ee,ye;Be?(ot.add(Ae),o&&fT(e,w,Ae,((Z=t.rowSelectionPropagation)==null?void 0:Z.descendants)??!1,((ne=t.rowSelectionPropagation)==null?void 0:ne.parents)??!1,st)):(ct(Ae),o&&Oj(e,w,Ae,((ee=t.rowSelectionPropagation)==null?void 0:ee.descendants)??!1,((ye=t.rowSelectionPropagation)==null?void 0:ye.parents)??!1,ct))})}(ot.size<2||g)&&e.current.setRowSelectionModel(Array.from(ot))},[n,o,g,e,w,(fe=t.rowSelectionPropagation)==null?void 0:fe.descendants,(le=t.rowSelectionPropagation)==null?void 0:le.parents]),F=A.useCallback(({startId:Fe,endId:Be},Ze=!0,it=!1)=>{if(!e.current.getRow(Fe)||!e.current.getRow(Be))return;n.debug(`Expanding selection from row ${Fe} to row ${Be}`);const ot=Hw(e),ut=ot.indexOf(Fe),st=ot.indexOf(Be),[ct,Ae]=ut>st?[st,ut]:[ut,st],Z=ot.slice(ct,Ae+1);e.current.selectRows(Z,Ze,it)},[e,n]),B={selectRow:D,setRowSelectionModel:k,getSelectedRows:L,isRowSelected:P,isRowSelectable:O},V={selectRows:N,selectRowRange:F};Wr(e,B,"public"),Wr(e,V,t.signature===Ad.DataGrid?"private":"public");const G=A.useCallback((Fe=!1)=>{var Ae;const Be=wd(e.current.state),Ze=jg(e),it=Hx(e),ot=we({},Zp(e)),ut=Z=>t.filterMode==="server"?!Ze[Z]:it[Z]!==!0;let st=!1;Be.forEach(Z=>{var ee;if(ut(Z)){if(t.keepNonExistentRowsSelected)return;delete ot[Z],st=!0;return}if(!((ee=t.rowSelectionPropagation)!=null&&ee.parents))return;const ne=w[Z];if(ne.type==="group"){if(ne.isAutoGenerated){delete ot[Z],st=!0;return}ne.children.every(Ie=>it[Ie]===!1)||(delete ot[Z],st=!0)}});const ct=C&&((Ae=t.rowSelectionPropagation)==null?void 0:Ae.parents)&&Object.keys(ot).length>0;if(st||ct&&!Fe){const Z=Object.values(ot);ct?e.current.selectRows(Z,!0,!0):e.current.setRowSelectionModel(Z)}},[e,C,(pe=t.rowSelectionPropagation)==null?void 0:pe.parents,t.keepNonExistentRowsSelected,t.filterMode,w]),q=A.useCallback((Fe,Be)=>{const Ze=Be.metaKey||Be.ctrlKey,it=!c&&!Ze&&!Sle(Be),ot=!g||it,ut=e.current.isRowSelected(Fe);ot?e.current.selectRow(Fe,it?!0:!ut,!0):e.current.selectRow(Fe,!ut,!1)},[e,g,c]),z=A.useCallback((Fe,Be)=>{var ot;if(f)return;const Ze=(ot=Be.target.closest(`.${Ke.cell}`))==null?void 0:ot.getAttribute("data-field");if(Ze===Vx.field||Ze===gA)return;if(Ze){const ut=e.current.getColumn(Ze);if((ut==null?void 0:ut.type)===fA)return}e.current.getRowNode(Fe.id).type!=="pinnedRow"&&(Be.shiftKey&&g?T(Fe.id):q(Fe.id,Be))},[f,g,e,T,q]),$=A.useCallback((Fe,Be)=>{var Ze;g&&Be.shiftKey&&((Ze=window.getSelection())==null||Ze.removeAllRanges())},[g]),K=A.useCallback((Fe,Be)=>{g&&Be.nativeEvent.shiftKey?T(Fe.id):e.current.selectRow(Fe.id,Fe.value,!g)},[e,T,g]),te=A.useCallback(Fe=>{const Be=t.pagination&&t.checkboxSelectionVisibleOnly&&t.paginationMode==="client"?mG(e):Hw(e);e.current.selectRows(Be,Fe.value)},[e,t.checkboxSelectionVisibleOnly,t.pagination,t.paginationMode]),re=A.useCallback((Fe,Be)=>{if(e.current.getCellMode(Fe.id,Fe.field)!==pi.Edit&&!nE(Be)){if(pk(Be.key)&&Be.shiftKey){const Ze=Nc(e);if(Ze&&Ze.id!==Fe.id){Be.preventDefault();const it=e.current.isRowSelected(Ze.id);if(!g){e.current.selectRow(Ze.id,!it,!0);return}const ot=e.current.getRowIndexRelativeToVisibleRows(Ze.id),ut=e.current.getRowIndexRelativeToVisibleRows(Fe.id);let st,ct;ot>ut?it?(st=ut,ct=ot-1):(st=ut,ct=ot):it?(st=ot+1,ct=ut):(st=ot,ct=ut);const Ae=v.rows.slice(st,ct+1).map(Z=>Z.id);e.current.selectRows(Ae,!it);return}}if(Be.key===" "&&Be.shiftKey){Be.preventDefault(),q(Fe.id,Be);return}String.fromCharCode(Be.keyCode)==="A"&&(Be.ctrlKey||Be.metaKey)&&(Be.preventDefault(),N(e.current.getAllRowIds(),!0))}},[e,q,N,v.rows,g]);Hn(e,"sortedRowsSet",r(()=>G(!0))),Hn(e,"filteredRowsSet",r(G)),Hn(e,"rowClick",r(z)),Hn(e,"rowSelectionCheckboxChange",r(K)),Hn(e,"headerSelectionCheckboxChange",te),Hn(e,"cellMouseDown",r($)),Hn(e,"cellKeyDown",r(re)),A.useEffect(()=>{i!==void 0&&e.current.setRowSelectionModel(i)},[e,i,t.rowSelection]),A.useEffect(()=>{t.rowSelection||e.current.setRowSelectionModel([])},[e,t.rowSelection]);const oe=i!=null;A.useEffect(()=>{if(oe||!t.rowSelection)return;const Fe=wd(e.current.state);if(O){const Be=Fe.filter(Ze=>O(Ze));Be.length<Fe.length&&e.current.setRowSelectionModel(Be)}},[e,O,oe,t.rowSelection]),A.useEffect(()=>{if(!t.rowSelection||oe)return;const Fe=wd(e.current.state);!g&&Fe.length>1&&e.current.setRowSelectionModel([])},[e,g,c,oe,t.rowSelection]),A.useEffect(()=>{r(G)},[G,r])},qfe=e=>{const{classes:t}=e;return A.useMemo(()=>An({cellCheckbox:["cellCheckbox"],columnHeaderCheckbox:["columnHeaderCheckbox"]},ho,t),[t])},Gfe=(e,t)=>{const n={classes:t.classes},r=qfe(n),o=A.useCallback(i=>{const l=we({},Vx,{cellClassName:r.cellCheckbox,headerClassName:r.columnHeaderCheckbox,headerName:e.current.getLocaleText("checkboxSelectionHeaderName")}),c=t.checkboxSelection,f=i.lookup[$p]!=null;return c&&!f?(i.lookup[$p]=l,i.orderedFields=[$p,...i.orderedFields]):!c&&f?(delete i.lookup[$p],i.orderedFields=i.orderedFields.filter(p=>p!==$p)):c&&f&&(i.lookup[$p]=we({},l,i.lookup[$p])),i},[e,r,t.checkboxSelection]);sa(e,"hydrateColumns",o)},Wfe=(e,t)=>{var r,o;const n=t.sortModel??((o=(r=t.initialState)==null?void 0:r.sorting)==null?void 0:o.sortModel)??[];return we({},e,{sorting:{sortModel:C8(n,t.disableMultipleColumnsSorting),sortedRows:[]}})},Kfe=(e,t)=>{var F,B;const n=Ts(e,"useGridSorting");e.current.registerControlState({stateId:"sortModel",propModel:t.sortModel,propOnChange:t.onSortModelChange,stateSelector:bd,changeEvent:"sortModelChange"});const r=A.useCallback((V,G)=>{const q=bd(e),z=q.findIndex(K=>K.field===V);let $=[...q];return z>-1?(G==null?void 0:G.sort)==null?$.splice(z,1):$.splice(z,1,G):$=[...q,G],$},[e]),o=A.useCallback((V,G)=>{const z=bd(e).find($=>$.field===V.field);if(z){const $=G===void 0?aj(V.sortingOrder??t.sortingOrder,z.sort):G;return $===void 0?void 0:we({},z,{sort:$})}return{field:V.field,sort:G===void 0?aj(V.sortingOrder??t.sortingOrder):G}},[e,t.sortingOrder]),i=A.useCallback((V,G)=>G==null||G.sortable===!1||t.disableColumnSorting?V:(G.sortingOrder||t.sortingOrder).some(z=>!!z)?[...V,"columnMenuSortItem"]:V,[t.sortingOrder,t.disableColumnSorting]),l=A.useCallback(()=>{e.current.setState(V=>{if(t.sortingMode==="server")return n.debug("Skipping sorting rows as sortingMode = server"),we({},V,{sorting:we({},V.sorting,{sortedRows:RF(_l(e),bl,!1)})});const G=bd(V,e.current.instanceId),q=Tee(G,e),z=e.current.applyStrategyProcessor("sorting",{sortRowList:q});return we({},V,{sorting:we({},V.sorting,{sortedRows:z})})}),e.current.publishEvent("sortedRowsSet"),e.current.forceUpdate()},[e,n,t.sortingMode]),c=A.useCallback(V=>{bd(e)!==V&&(n.debug("Setting sort model"),e.current.setState(ij(V,t.disableMultipleColumnsSorting)),e.current.forceUpdate(),e.current.applySorting())},[e,n,t.disableMultipleColumnsSorting]),f=A.useCallback((V,G,q)=>{const z=e.current.getColumn(V),$=o(z,G);let K;!q||t.disableMultipleColumnsSorting?K=($==null?void 0:$.sort)==null?[]:[$]:K=r(z.field,$),e.current.setSortModel(K)},[e,r,o,t.disableMultipleColumnsSorting]),p=A.useCallback(()=>bd(e),[e]),g=A.useCallback(()=>OF(e).map(G=>G.model),[e]),v=A.useCallback(()=>$x(e),[e]),w=A.useCallback(V=>e.current.getSortedRowIds()[V],[e]);Wr(e,{getSortModel:p,getSortedRows:g,getSortedRowIds:v,getRowIdFromRowIndex:w,setSortModel:c,sortColumn:f,applySorting:l},"public");const T=A.useCallback((V,G)=>{var $,K;const q=bd(e);return!G.exportOnlyDirtyModels||t.sortModel!=null||((K=($=t.initialState)==null?void 0:$.sorting)==null?void 0:K.sortModel)!=null||q.length>0?we({},V,{sorting:{sortModel:q}}):V},[e,t.sortModel,(B=(F=t.initialState)==null?void 0:F.sorting)==null?void 0:B.sortModel]),k=A.useCallback((V,G)=>{var z;const q=(z=G.stateToRestore.sorting)==null?void 0:z.sortModel;return q==null?V:(e.current.setState(ij(q,t.disableMultipleColumnsSorting)),we({},V,{callbacks:[...V.callbacks,e.current.applySorting]}))},[e,t.disableMultipleColumnsSorting]),P=A.useCallback(V=>{const G=_l(e),q=G[bl],z=V.sortRowList?V.sortRowList(q.children.map($=>G[$])):[...q.children];return q.footerId!=null&&z.push(q.footerId),z},[e]);sa(e,"exportState",T),sa(e,"restoreState",k),mk(e,u_,"sorting",P);const O=A.useCallback(({field:V,colDef:G},q)=>{if(!G.sortable||t.disableColumnSorting)return;const z=q.shiftKey||q.metaKey||q.ctrlKey;f(V,void 0,z)},[f,t.disableColumnSorting]),L=A.useCallback(({field:V,colDef:G},q)=>{!G.sortable||t.disableColumnSorting||q.key==="Enter"&&!q.ctrlKey&&!q.metaKey&&f(V,void 0,q.shiftKey)},[f,t.disableColumnSorting]),D=A.useCallback(()=>{const V=bd(e),G=bm(e);if(V.length>0){const q=V.filter(z=>G[z.field]);q.length<V.length&&e.current.setSortModel(q)}},[e]),N=A.useCallback(V=>{V==="sorting"&&e.current.applySorting()},[e]);sa(e,"columnMenu",i),Hn(e,"columnHeaderClick",O),Hn(e,"columnHeaderKeyDown",L),Hn(e,"rowsSet",e.current.applySorting),Hn(e,"columnsChange",D),Hn(e,"activeStrategyProcessorChange",N),eE(()=>{e.current.applySorting()}),$i(()=>{t.sortModel!==void 0&&e.current.setSortModel(t.sortModel)},[e,t.sortModel])};function D$(e){const{containerSize:t,scrollPosition:n,elementSize:r,elementOffset:o}=e,i=o+r;if(r>t)return o;if(i-t>n)return i-t;if(o<n)return o}const Yfe=(e,t)=>{const n=Zc(),r=Ts(e,"useGridScroll"),o=e.current.columnHeadersContainerRef,i=e.current.virtualScrollerRef,l=un(e,hy),c=A.useCallback(v=>{var O;const w=Ql(e.current.state),C=pA(e),T=t.unstable_listView?[wx(e.current.state)]:ss(e);if(!(v.rowIndex==null)&&C===0||T.length===0)return!1;r.debug(`Scrolling to cell at row ${v.rowIndex}, col: ${v.colIndex} `);let P={};if(v.colIndex!==void 0){const L=cy(e);let D;if(typeof v.rowIndex<"u"){const N=(O=l[v.rowIndex])==null?void 0:O.id,F=e.current.unstable_getCellColSpanInfo(N,v.colIndex);F&&!F.spannedByColSpan&&(D=F.cellProps.width)}typeof D>"u"&&(D=T[v.colIndex].computedWidth),P.left=D$({containerSize:w.viewportOuterSize.width,scrollPosition:Math.abs(i.current.scrollLeft),elementSize:D,elementOffset:L[v.colIndex]})}if(v.rowIndex!==void 0){const L=qx(e.current.state),D=woe(e),N=xoe(e),F=t.pagination?v.rowIndex-D*N:v.rowIndex,B=L.positions[F+1]?L.positions[F+1]-L.positions[F]:L.currentPageTotalHeight-L.positions[F];P.top=D$({containerSize:w.viewportInnerSize.height,scrollPosition:i.current.scrollTop,elementSize:B,elementOffset:L.positions[F]})}return P=e.current.unstable_applyPipeProcessors("scrollToIndexes",P,v),typeof P.left!==void 0||typeof P.top!==void 0?(e.current.scroll(P),!0):!1},[r,e,i,t.pagination,l,t.unstable_listView]),f=A.useCallback(v=>{if(i.current&&v.left!==void 0&&o.current){const w=n?-1:1;o.current.scrollLeft=v.left,i.current.scrollLeft=w*v.left,r.debug(`Scrolling left: ${v.left}`)}i.current&&v.top!==void 0&&(i.current.scrollTop=v.top,r.debug(`Scrolling top: ${v.top}`)),r.debug("Scrolling, updating container, and viewport")},[i,n,o,r]),p=A.useCallback(()=>i!=null&&i.current?{top:i.current.scrollTop,left:i.current.scrollLeft}:{top:0,left:0},[i]);Wr(e,{scroll:f,scrollToIndexes:c,getScrollPosition:p},"public")};function Zfe(e,t){Pi(e,"columnHeaderClick",t.onColumnHeaderClick),Pi(e,"columnHeaderContextMenu",t.onColumnHeaderContextMenu),Pi(e,"columnHeaderDoubleClick",t.onColumnHeaderDoubleClick),Pi(e,"columnHeaderOver",t.onColumnHeaderOver),Pi(e,"columnHeaderOut",t.onColumnHeaderOut),Pi(e,"columnHeaderEnter",t.onColumnHeaderEnter),Pi(e,"columnHeaderLeave",t.onColumnHeaderLeave),Pi(e,"cellClick",t.onCellClick),Pi(e,"cellDoubleClick",t.onCellDoubleClick),Pi(e,"cellKeyDown",t.onCellKeyDown),Pi(e,"preferencePanelClose",t.onPreferencePanelClose),Pi(e,"preferencePanelOpen",t.onPreferencePanelOpen),Pi(e,"menuOpen",t.onMenuOpen),Pi(e,"menuClose",t.onMenuClose),Pi(e,"rowDoubleClick",t.onRowDoubleClick),Pi(e,"rowClick",t.onRowClick),Pi(e,"stateChange",t.onStateChange)}function Xfe(e,t=166){let n,r;const o=()=>{n=void 0,e(...r)};function i(...l){r=l,n===void 0&&(n=setTimeout(o,t))}return i.clear=()=>{clearTimeout(n),n=void 0},i}const WD={autoHeight:!1,autoPageSize:!1,autosizeOnMount:!1,checkboxSelection:!1,checkboxSelectionVisibleOnly:!1,clipboardCopyCellDelimiter:"	",columnBufferPx:150,columnHeaderHeight:56,disableAutosize:!1,disableColumnFilter:!1,disableColumnMenu:!1,disableColumnReorder:!1,disableColumnResize:!1,disableColumnSelector:!1,disableColumnSorting:!1,disableDensitySelector:!1,disableEval:!1,disableMultipleColumnsFiltering:!1,disableMultipleColumnsSorting:!1,disableMultipleRowSelection:!1,disableRowSelectionOnClick:!1,disableVirtualization:!1,editMode:zf.Cell,filterDebounceMs:150,filterMode:"client",hideFooter:!1,hideFooterPagination:!1,hideFooterRowCount:!1,hideFooterSelectedRowCount:!1,ignoreDiacritics:!1,ignoreValueFormatterDuringExport:!1,indeterminateCheckboxAction:"deselect",keepColumnPositionIfDraggedOutside:!1,keepNonExistentRowsSelected:!1,loading:!1,logger:console,logLevel:"error",pageSizeOptions:[25,50,100],pagination:!1,paginationMode:"client",resizeThrottleMs:60,rowBufferPx:150,rowHeight:52,rowPositionsDebounceMs:166,rows:[],rowSelection:!0,rowSpacingType:"margin",showCellVerticalBorder:!1,showColumnVerticalBorder:!1,sortingMode:"client",sortingOrder:["asc","desc",null],throttleRowsMs:0,unstable_rowSpanning:!1,virtualizeColumnsWithAutoRowHeight:!1},lw={width:0,height:0},Qfe={isReady:!1,root:lw,viewportOuterSize:lw,viewportInnerSize:lw,contentSize:lw,minimumSize:lw,hasScrollX:!1,hasScrollY:!1,scrollbarSize:0,headerHeight:0,groupHeaderHeight:0,headerFilterHeight:0,rowWidth:0,rowHeight:0,columnsTotalWidth:0,leftPinnedWidth:0,rightPinnedWidth:0,headersTotalHeight:0,topContainerHeight:0,bottomContainerHeight:0},Jfe=e=>we({},e,{dimensions:Qfe});function epe(e,t){const n=Ts(e,"useResizeContainer"),r=A.useRef(!1),o=A.useRef(lw),i=un(e,Ql),l=un(e,qx),c=un(e,ZS),f=un(e,YS),p=A.useMemo(()=>tG(t.rowHeight,WD.rowHeight),[t.rowHeight]),g=Math.floor(p*f),v=Math.floor(t.columnHeaderHeight*f),w=Math.floor((t.columnGroupHeaderHeight??t.columnHeaderHeight)*f),C=Math.floor((t.headerFilterHeight??t.columnHeaderHeight)*f),T=npe(vF(e),6),k=UF(e,t),P=c.left.reduce((ue,Q)=>ue+Q.computedWidth,0),O=c.right.reduce((ue,Q)=>ue+Q.computedWidth,0),[L,D]=A.useState(),N=A.useMemo(()=>Xfe(D,t.resizeThrottleMs),[t.resizeThrottleMs]);A.useEffect(()=>N.clear,[N]);const F=A.useRef(void 0),B=()=>e.current.state.dimensions,V=co(ue=>{e.current.setState(Q=>we({},Q,{dimensions:ue}))}),G=A.useCallback(()=>{const ue=e.current.mainElementRef.current;if(!ue)return;const Q=Nf(ue).getComputedStyle(ue),ce={width:parseFloat(Q.width)||0,height:parseFloat(Q.height)||0};(!F.current||!L$(F.current,ce))&&(e.current.publishEvent("resize",ce),F.current=ce)},[e]),q=A.useCallback(()=>{const ue=Ql(e.current.state);if(!ue.isReady)return 0;const Q=Vw(e,{pagination:t.pagination,paginationMode:t.paginationMode});if(t.getRowHeight){const ae=SA(e),fe=ae.lastRowIndex-ae.firstRowIndex;return Math.min(fe-1,Q.rows.length)}const ce=Math.floor(ue.viewportInnerSize.height/g);return Math.min(ce,Q.rows.length)},[e,t.pagination,t.paginationMode,t.getRowHeight,g]),z=A.useCallback(()=>{var Ae,Z;const ue=e.current.rootElementRef.current,Q=Nre(e),ce=tpe(ue,T,t.scrollbarSize),ae=k+Q.top,fe=Q.bottom,pe={width:T-P-O,height:l.currentPageTotalHeight};let Fe,Be,Ze=!1,it=!1;if(t.autoHeight)it=!1,Ze=Math.round(T)>Math.round(o.current.width),Fe={width:o.current.width,height:ae+fe+pe.height},Be={width:Math.max(0,Fe.width-(it?ce:0)),height:Math.max(0,Fe.height-(Ze?ce:0))};else{Fe={width:o.current.width,height:o.current.height},Be={width:Math.max(0,Fe.width-P-O),height:Math.max(0,Fe.height-ae-fe)};const ne=pe,ee=Be,ye=ne.width>ee.width,Ie=ne.height>ee.height;(ye||Ie)&&(it=Ie,Ze=ne.width+(it?ce:0)>ee.width,Ze&&(it=ne.height+ce>ee.height)),it&&(Be.width-=ce),Ze&&(Be.height-=ce)}const ot=Math.max(Fe.width,T+(it?ce:0)),ut={width:T,height:ae+pe.height+fe},st={isReady:!0,root:o.current,viewportOuterSize:Fe,viewportInnerSize:Be,contentSize:pe,minimumSize:ut,hasScrollX:Ze,hasScrollY:it,scrollbarSize:ce,headerHeight:v,groupHeaderHeight:w,headerFilterHeight:C,rowWidth:ot,rowHeight:g,columnsTotalWidth:T,leftPinnedWidth:P,rightPinnedWidth:O,headersTotalHeight:k,topContainerHeight:ae,bottomContainerHeight:fe},ct=e.current.state.dimensions;V(st),L$(st.viewportInnerSize,ct.viewportInnerSize)||e.current.publishEvent("viewportInnerSizeChange",st.viewportInnerSize),(Z=(Ae=e.current).updateRenderContext)==null||Z.call(Ae)},[e,V,t.scrollbarSize,t.autoHeight,l.currentPageTotalHeight,g,v,w,C,T,k,P,O]),$={resize:G,getRootDimensions:B},K={updateDimensions:z,getViewportPageSize:q};Wr(e,$,"public"),Wr(e,K,"private"),$i(()=>{L&&(z(),e.current.publishEvent("debouncedResize",o.current))},[e,L,z]);const te=e.current.rootElementRef.current;$i(()=>{if(!te)return;const ue=(Q,ce)=>te.style.setProperty(Q,ce);ue("--DataGrid-width",`${i.viewportOuterSize.width}px`),ue("--DataGrid-hasScrollX",`${Number(i.hasScrollX)}`),ue("--DataGrid-hasScrollY",`${Number(i.hasScrollY)}`),ue("--DataGrid-scrollbarSize",`${i.scrollbarSize}px`),ue("--DataGrid-rowWidth",`${i.rowWidth}px`),ue("--DataGrid-columnsTotalWidth",`${i.columnsTotalWidth}px`),ue("--DataGrid-leftPinnedWidth",`${i.leftPinnedWidth}px`),ue("--DataGrid-rightPinnedWidth",`${i.rightPinnedWidth}px`),ue("--DataGrid-headerHeight",`${i.headerHeight}px`),ue("--DataGrid-headersTotalHeight",`${i.headersTotalHeight}px`),ue("--DataGrid-topContainerHeight",`${i.topContainerHeight}px`),ue("--DataGrid-bottomContainerHeight",`${i.bottomContainerHeight}px`),ue("--height",`${i.rowHeight}px`)},[te,i]);const re=A.useRef(!0),oe=A.useCallback(ue=>{o.current=ue;const Q=/jsdom|HappyDOM/.test(window.navigator.userAgent);if(ue.height===0&&!r.current&&!t.autoHeight&&!Q&&(n.error(["The parent DOM element of the Data Grid has an empty height.","Please make sure that this element has an intrinsic height.","The grid displays with a height of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),r.current=!0),ue.width===0&&!r.current&&!Q&&(n.error(["The parent DOM element of the Data Grid has an empty width.","Please make sure that this element has an intrinsic width.","The grid displays with a width of 0px.","","More details: https://mui.com/r/x-data-grid-no-dimensions."].join(`
`)),r.current=!0),re.current){D(ue),re.current=!1;return}N(ue)},[t.autoHeight,N,n]);$i(z,[z]),Pi(e,"sortedRowsSet",z),Pi(e,"paginationModelChange",z),Pi(e,"columnsChange",z),Hn(e,"resize",oe),Pi(e,"debouncedResize",t.onResize)}function tpe(e,t,n){if(n!==void 0)return n;if(e===null||t===0)return 0;const o=ka(e).createElement("div");o.style.width="99px",o.style.height="99px",o.style.position="absolute",o.style.overflow="scroll",o.className="scrollDiv",e.appendChild(o);const i=o.offsetWidth-o.clientWidth;return e.removeChild(o),i}function npe(e,t){return Math.round(e*10**t)/10**t}function L$(e,t){return e.width===t.width&&e.height===t.height}const rpe=typeof globalThis.ResizeObserver<"u"?globalThis.ResizeObserver:class{observe(){}unobserve(){}disconnect(){}},ope=(e,t,n)=>(n.current.caches.rowsMeta={heights:new Map},we({},e,{rowsMeta:{currentPageTotalHeight:0,positions:[]}})),ipe=(e,t)=>{const{getRowHeight:n,getRowSpacing:r,getEstimatedRowHeight:o}=t,i=e.current.caches.rowsMeta.heights,l=A.useRef(-1),c=A.useRef(!1),f=A.useRef(!1),p=un(e,YS),g=un(e,yl),v=un(e,bA),w=un(e,bd),C=I_(e,t),T=un(e,T_),k=un(e,()=>Ql(e.current.state).rowHeight),P=te=>{let re=i.get(te);return re===void 0&&(re={content:k,spacingTop:0,spacingBottom:0,detail:0,autoHeight:!1,needsFirstMeasurement:!0},i.set(te,re)),re},O=A.useCallback(te=>{const re=Ql(e.current.state).rowHeight,oe=e.current.getRowHeightEntry(te.id);if(!n)oe.content=re,oe.needsFirstMeasurement=!1;else{const ue=n(we({},te,{densityFactor:p}));if(ue==="auto"){if(oe.needsFirstMeasurement){const Q=o?o(we({},te,{densityFactor:p})):re;oe.content=Q??re}c.current=!0,oe.autoHeight=!0}else oe.content=tG(ue,re),oe.needsFirstMeasurement=!1,oe.autoHeight=!1}if(r){const ue=e.current.getRowIndexRelativeToVisibleRows(te.id),Q=r(we({},te,{isFirstVisible:ue===0,isLastVisible:ue===C.rows.length-1,indexRelativeToCurrentPage:ue}));oe.spacingTop=Q.top??0,oe.spacingBottom=Q.bottom??0}else oe.spacingTop=0,oe.spacingBottom=0;return e.current.unstable_applyPipeProcessors("rowHeight",oe,te),oe},[e,C.rows.length,n,o,k,r,p]),L=A.useCallback(()=>{c.current=!1,T.top.forEach(O),T.bottom.forEach(O);const te=[],re=C.rows.reduce((oe,ue)=>{te.push(oe);const Q=O(ue),ce=Q.content+Q.spacingTop+Q.spacingBottom+Q.detail;return oe+ce},0);c.current||(l.current=1/0),e.current.setState(oe=>we({},oe,{rowsMeta:{currentPageTotalHeight:re,positions:te}})),f.current=!0},[e,T,C.rows,O]),D=te=>{var re;return((re=i.get(te))==null?void 0:re.content)??k},N=(te,re)=>{const oe=e.current.getRowHeightEntry(te),ue=oe.content!==re;oe.needsFirstMeasurement=!1,oe.content=re,f.current&&(f.current=!ue)},F=te=>{var re;return((re=i.get(te))==null?void 0:re.autoHeight)??!1},B=()=>l.current,V=te=>{c.current&&te>l.current&&(l.current=te)},G=()=>{i.clear(),L()},q=Lh(()=>new rpe(te=>{for(let re=0;re<te.length;re+=1){const oe=te[re],ue=oe.borderBoxSize&&oe.borderBoxSize.length>0?oe.borderBoxSize[0].blockSize:oe.contentRect.height,Q=oe.target.__mui_id;e.current.unstable_storeRowHeightMeasurement(Q,ue)}f.current||e.current.requestPipeProcessorsApplication("rowHeight")})).current,z=(te,re)=>(te.__mui_id=re,q.observe(te),()=>q.unobserve(te));JF(e,"rowHeight",L),A.useEffect(()=>{L()},[g,v,w,L]);const $={unstable_getRowHeight:D,unstable_setLastMeasuredRowIndex:V,unstable_storeRowHeightMeasurement:N,resetRowHeights:G},K={hydrateRowsMeta:L,observeRowHeight:z,rowHasAutoHeight:F,getRowHeightEntry:P,getLastMeasuredRowIndex:B};Wr(e,$,"public"),Wr(e,K,"private")},ape=e=>{const t=A.useCallback((o={})=>e.current.unstable_applyPipeProcessors("exportState",{},o),[e]),n=A.useCallback(o=>{e.current.unstable_applyPipeProcessors("restoreState",{callbacks:[]},{stateToRestore:o}).callbacks.forEach(l=>{l()}),e.current.forceUpdate()},[e]);Wr(e,{exportState:t,restoreState:n},"public")},spe=e=>{const t=A.useRef({}),n=(c,f)=>{var p;return(p=t.current[c])==null?void 0:p[f]},r=()=>{t.current={}},o=A.useCallback(({rowId:c,minFirstColumn:f,maxLastColumn:p,columns:g})=>{for(let v=f;v<p;v+=1){const w=lpe({apiRef:e,lookup:t.current,columnIndex:v,rowId:c,minFirstColumnIndex:f,maxLastColumnIndex:p,columns:g});w.colSpan>1&&(v+=w.colSpan-1)}},[e]),i={unstable_getCellColSpanInfo:n},l={resetColSpan:r,calculateColSpan:o};Wr(e,i,"public"),Wr(e,l,"private"),Hn(e,"columnOrderChange",r)};function lpe(e){const{apiRef:t,lookup:n,columnIndex:r,rowId:o,minFirstColumnIndex:i,maxLastColumnIndex:l,columns:c}=e,f=c.length,p=c[r],g=t.current.getRow(o),v=t.current.getRowValue(g,p),w=typeof p.colSpan=="function"?p.colSpan(v,g,p,t):p.colSpan;if(!w||w===1)return nR(n,o,r,{spannedByColSpan:!1,cellProps:{colSpan:1,width:p.computedWidth}}),{colSpan:1};let C=p.computedWidth;for(let T=1;T<w;T+=1){const k=r+T;if(k>=i&&k<l){const P=c[k];C+=P.computedWidth,nR(n,o,r+T,{spannedByColSpan:!0,rightVisibleCellIndex:Math.min(r+w,f-1),leftVisibleCellIndex:r})}nR(n,o,r,{spannedByColSpan:!1,cellProps:{colSpan:w,width:C}})}return{colSpan:w}}function nR(e,t,n,r){e[t]||(e[t]={}),e[t][n]=r}const n9=(e,t,n)=>{if(V8(e)){if(n[e.field]!==void 0)throw new Error(["MUI X: columnGroupingModel contains duplicated field",`column field ${e.field} occurs two times in the grouping model:`,`- ${n[e.field].join(" > ")}`,`- ${t.join(" > ")}`].join(`
`));n[e.field]=t;return}const{groupId:r,children:o}=e;o.forEach(i=>{n9(i,[...t,r],n)})},KD=e=>{if(!e)return{};const t={};return e.forEach(n=>{n9(n,[],t)}),t},YD=(e,t,n)=>{const r=f=>t[f]??[],o=[],i=Math.max(...e.map(f=>r(f).length)),l=(f,p,g)=>jw(r(f).slice(0,g+1),r(p).slice(0,g+1)),c=(f,p)=>!!(n!=null&&n.left&&n.left.includes(f)&&!n.left.includes(p)||n!=null&&n.right&&!n.right.includes(f)&&n.right.includes(p));for(let f=0;f<i;f+=1){const p=e.reduce((g,v)=>{const w=r(v)[f]??null;if(g.length===0)return[{columnFields:[v],groupId:w}];const C=g[g.length-1],T=C.columnFields[C.columnFields.length-1];return C.groupId!==w||!l(T,v,f)||c(T,v)?[...g,{columnFields:[v],groupId:w}]:[...g.slice(0,g.length-1),{columnFields:[...C.columnFields,v],groupId:w}]},[]);o.push(p)}return o},upe=["groupId","children"],ez=e=>{let t={};return e.forEach(n=>{if(V8(n))return;const{groupId:r,children:o}=n,i=sr(n,upe);if(!r)throw new Error("MUI X: An element of the columnGroupingModel does not have either `field` or `groupId`.");const l=we({},i,{groupId:r}),c=ez(o);if(c[r]!==void 0||t[r]!==void 0)throw new Error(`MUI X: The groupId ${r} is used multiple times in the columnGroupingModel.`);t=we({},t,c,{[r]:l})}),we({},t)},cpe=(e,t,n)=>{if(!t.columnGroupingModel)return e;const r=Yp(n),o=zx(n),i=ez(t.columnGroupingModel??[]),l=KD(t.columnGroupingModel??[]),c=YD(r,l,n.current.state.pinnedColumns??{}),f=o.length===0?0:Math.max(...o.map(p=>{var g;return((g=l[p])==null?void 0:g.length)??0}));return we({},e,{columnGrouping:{lookup:i,unwrappedGroupingModel:l,headerStructure:c,maxDepth:f}})},dpe=(e,t)=>{const n=A.useCallback(c=>_G(e)[c]??[],[e]),r=A.useCallback(()=>bG(e),[e]);Wr(e,{getColumnGroupPath:n,getAllGroupDetails:r},"public");const i=A.useCallback(()=>{const c=KD(t.columnGroupingModel??[]);e.current.setState(f=>{var w;const p=((w=f.columns)==null?void 0:w.orderedFields)??[],g=f.pinnedColumns??{},v=YD(p,c,g);return we({},f,{columnGrouping:we({},f.columnGrouping,{headerStructure:v})})})},[e,t.columnGroupingModel]),l=A.useCallback(c=>{var k,P;const f=((P=(k=e.current).getPinnedColumns)==null?void 0:P.call(k))??{},p=Yp(e),g=zx(e),v=ez(c??[]),w=KD(c??[]),C=YD(p,w,f),T=g.length===0?0:Math.max(...g.map(O=>{var L;return((L=w[O])==null?void 0:L.length)??0}));e.current.setState(O=>we({},O,{columnGrouping:{lookup:v,unwrappedGroupingModel:w,headerStructure:C,maxDepth:T}}))},[e]);Hn(e,"columnIndexChange",i),Hn(e,"columnsChange",()=>{l(t.columnGroupingModel)}),Hn(e,"columnVisibilityModelChange",()=>{l(t.columnGroupingModel)}),A.useEffect(()=>{l(t.columnGroupingModel)},[l,t.columnGroupingModel])};function hpe(){let e,t;const n=new Promise((r,o)=>{e=r,t=o});return n.resolve=e,n.reject=t,n}function N$(e,t){if(t!==void 0&&e.changedTouches){for(let n=0;n<e.changedTouches.length;n+=1){const r=e.changedTouches[n];if(r.identifier===t)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function F$(e,t,n,r){let o=e;return r==="Right"?o+=t-n.left:o+=n.right-t,o}function fpe(e,t,n){return n==="Left"?e-t.left:t.right-e}function ppe(e){return e==="Right"?"Left":"Right"}function mpe(e,t){const n=e.classList.contains(Ke["columnSeparator--sideRight"])?"Right":"Left";return t?ppe(n):n}function z$(e){e.preventDefault(),e.stopImmediatePropagation()}function gpe(e){const t=A.useRef(void 0),n=()=>CA(e),r=un(e,n);return A.useEffect(()=>{t.current&&r===!1&&(t.current.resolve(),t.current=void 0)}),()=>{if(!t.current){if(n()===!1)return Promise.resolve();t.current=hpe()}return t.current}}function ype(e,t){if(e.length<4)return e;const n=e.slice();n.sort((c,f)=>c-f);const r=n[Math.floor(n.length*.25)],o=n[Math.floor(n.length*.75)-1],i=o-r,l=i<5?5:i*t;return n.filter(c=>c>r-l&&c<o+l)}function vpe(e,t,n){const r={},o=e.current.rootElementRef.current;return o.classList.add(Ke.autosizing),n.forEach(i=>{const c=Fse(e.current,i.field).map(T=>T.getBoundingClientRect().width??0),f=t.includeOutliers?c:ype(c,t.outliersFactor);if(t.includeHeaders){const T=Nse(e.current,i.field);if(T){const k=T.querySelector(`.${Ke.columnHeaderTitle}`),P=T.querySelector(`.${Ke.columnHeaderTitleContainerContent}`),O=T.querySelector(`.${Ke.iconButtonContainer}`),L=T.querySelector(`.${Ke.menuIcon}`),D=k??P,N=window.getComputedStyle(T,null),F=parseInt(N.paddingLeft,10)+parseInt(N.paddingRight,10),V=D.scrollWidth+1+F+((O==null?void 0:O.clientWidth)??0)+((L==null?void 0:L.clientWidth)??0);f.push(V)}}const p=i.minWidth!==-1/0&&i.minWidth!==void 0,g=i.maxWidth!==1/0&&i.maxWidth!==void 0,v=p?i.minWidth:0,w=g?i.maxWidth:1/0,C=f.length===0?0:Math.max(...f);r[i.field]=kf(C,v,w)}),o.classList.remove(Ke.autosizing),r}const _pe=e=>we({},e,{columnResize:{resizingColumnField:""}});function bpe(){return{colDef:void 0,initialColWidth:0,initialTotalWidth:0,previousMouseClickEvent:void 0,columnHeaderElement:void 0,headerFilterElement:void 0,groupHeaderElements:[],cellElements:[],leftPinnedCellsAfter:[],rightPinnedCellsBefore:[],fillerLeft:void 0,fillerRight:void 0,leftPinnedHeadersAfter:[],rightPinnedHeadersBefore:[]}}const wpe=(e,t)=>{const n=Zc(),r=Ts(e,"useGridColumnResize"),o=Lh(bpe).current,i=A.useRef(null),l=A.useRef(null),c=Id(),f=A.useRef(void 0),p=q=>{var ue,Q;r.debug(`Updating width to ${q} for col ${o.colDef.field}`);const z=o.columnHeaderElement.offsetWidth,$=q-z,K=q-o.initialColWidth,te=o.initialTotalWidth+K;(Q=(ue=e.current.rootElementRef)==null?void 0:ue.current)==null||Q.style.setProperty("--DataGrid-rowWidth",`${te}px`),o.colDef.computedWidth=q,o.colDef.width=q,o.colDef.flex=0,o.columnHeaderElement.style.width=`${q}px`;const re=o.headerFilterElement;re&&(re.style.width=`${q}px`),o.groupHeaderElements.forEach(ce=>{const ae=ce;let fe;ae.getAttribute("aria-colspan")==="1"?fe=`${q}px`:fe=`${ae.offsetWidth+$}px`,ae.style.width=fe}),o.cellElements.forEach(ce=>{const ae=ce;let fe;ae.getAttribute("aria-colspan")==="1"?fe=`${q}px`:fe=`${ae.offsetWidth+$}px`,ae.style.setProperty("--width",fe)});const oe=e.current.unstable_applyPipeProcessors("isColumnPinned",!1,o.colDef.field);oe===Oi.LEFT&&(Fb(o.fillerLeft,"width",$),o.leftPinnedCellsAfter.forEach(ce=>{Fb(ce,"left",$)}),o.leftPinnedHeadersAfter.forEach(ce=>{Fb(ce,"left",$)})),oe===Oi.RIGHT&&(Fb(o.fillerRight,"width",$),o.rightPinnedCellsBefore.forEach(ce=>{Fb(ce,"right",$)}),o.rightPinnedHeadersBefore.forEach(ce=>{Fb(ce,"right",$)}))},g=q=>{if(O(),o.previousMouseClickEvent){const z=o.previousMouseClickEvent,$=z.timeStamp,K=z.clientX,te=z.clientY;if(q.timeStamp-$<300&&q.clientX===K&&q.clientY===te){o.previousMouseClickEvent=void 0,e.current.publishEvent("columnResizeStop",null,q);return}}if(o.colDef){e.current.setColumnWidth(o.colDef.field,o.colDef.width),r.debug(`Updating col ${o.colDef.field} with new width: ${o.colDef.width}`);const z=If(e.current.state);o.groupHeaderElements.forEach($=>{const K=Pse($),te=$,oe=`${K.reduce((ue,Q)=>z.columnVisibilityModel[Q]!==!1?ue+z.lookup[Q].computedWidth:ue,0)}px`;te.style.width=oe})}c.start(0,()=>{e.current.publishEvent("columnResizeStop",null,q)})},v=(q,z,$)=>{var oe;const K=e.current.rootElementRef.current;o.initialColWidth=q.computedWidth,o.initialTotalWidth=e.current.getRootDimensions().rowWidth,o.colDef=q,o.columnHeaderElement=kse(e.current.columnHeadersContainerRef.current,q.field);const te=K.querySelector(`.${Ke.headerFilterRow} [data-field="${xm(q.field)}"]`);te&&(o.headerFilterElement=te),o.groupHeaderElements=Ase((oe=e.current.columnHeadersContainerRef)==null?void 0:oe.current,q.field),o.cellElements=Mse(o.columnHeaderElement,e.current),o.fillerLeft=t$(e.current,n?"filler--pinnedRight":"filler--pinnedLeft"),o.fillerRight=t$(e.current,n?"filler--pinnedLeft":"filler--pinnedRight");const re=e.current.unstable_applyPipeProcessors("isColumnPinned",!1,o.colDef.field);o.leftPinnedCellsAfter=re!==Oi.LEFT?[]:Rse(e.current,o.columnHeaderElement,n),o.rightPinnedCellsBefore=re!==Oi.RIGHT?[]:Ose(e.current,o.columnHeaderElement,n),o.leftPinnedHeadersAfter=re!==Oi.LEFT?[]:Dse(e.current,o.columnHeaderElement,n),o.rightPinnedHeadersBefore=re!==Oi.RIGHT?[]:Lse(e.current,o.columnHeaderElement,n),l.current=mpe(z,n),i.current=fpe($,o.columnHeaderElement.getBoundingClientRect(),l.current)},w=co(g),C=co(q=>{if(q.buttons===0){w(q);return}let z=F$(i.current,q.clientX,o.columnHeaderElement.getBoundingClientRect(),l.current);z=kf(z,o.colDef.minWidth,o.colDef.maxWidth),p(z);const $={element:o.columnHeaderElement,colDef:o.colDef,width:z};e.current.publishEvent("columnResize",$,q)}),T=co(q=>{N$(q,f.current)&&g(q)}),k=co(q=>{const z=N$(q,f.current);if(!z)return;if(q.type==="mousemove"&&q.buttons===0){T(q);return}let $=F$(i.current,z.x,o.columnHeaderElement.getBoundingClientRect(),l.current);$=kf($,o.colDef.minWidth,o.colDef.maxWidth),p($);const K={element:o.columnHeaderElement,colDef:o.colDef,width:$};e.current.publishEvent("columnResize",K,q)}),P=co(q=>{const z=fk(q.target,Ke["columnSeparator--resizable"]);if(!z)return;const $=q.changedTouches[0];$!=null&&(f.current=$.identifier);const K=fk(q.target,Ke.columnHeader),te=Ise(K),re=e.current.getColumn(te);r.debug(`Start Resize on col ${re.field}`),e.current.publishEvent("columnResizeStart",{field:te},q),v(re,z,$.clientX);const oe=ka(q.currentTarget);oe.addEventListener("touchmove",k),oe.addEventListener("touchend",T)}),O=A.useCallback(()=>{const q=ka(e.current.rootElementRef.current);q.body.style.removeProperty("cursor"),q.removeEventListener("mousemove",C),q.removeEventListener("mouseup",w),q.removeEventListener("touchmove",k),q.removeEventListener("touchend",T),setTimeout(()=>{q.removeEventListener("click",z$,!0)},100),o.columnHeaderElement&&(o.columnHeaderElement.style.pointerEvents="unset")},[e,o,C,w,k,T]),L=A.useCallback(({field:q})=>{e.current.setState(z=>we({},z,{columnResize:we({},z.columnResize,{resizingColumnField:q})})),e.current.forceUpdate()},[e]),D=A.useCallback(()=>{e.current.setState(q=>we({},q,{columnResize:we({},q.columnResize,{resizingColumnField:""})})),e.current.forceUpdate()},[e]),N=co(({colDef:q},z)=>{if(z.button!==0||!z.currentTarget.classList.contains(Ke["columnSeparator--resizable"]))return;z.preventDefault(),r.debug(`Start Resize on col ${q.field}`),e.current.publishEvent("columnResizeStart",{field:q.field},z),v(q,z.currentTarget,z.clientX);const $=ka(e.current.rootElementRef.current);$.body.style.cursor="col-resize",o.previousMouseClickEvent=z.nativeEvent,$.addEventListener("mousemove",C),$.addEventListener("mouseup",w),$.addEventListener("click",z$,!0)}),F=co((q,z)=>{if(t.disableAutosize||z.button!==0)return;const $=e.current.state.columns.lookup[q.field];$.resizable!==!1&&e.current.autosizeColumns(we({},t.autosizeOptions,{disableColumnVirtualization:!1,columns:[$.field]}))}),B=gpe(e),V=A.useRef(!1),G=A.useCallback(async q=>{var re;if(!((re=e.current.rootElementRef)==null?void 0:re.current)||V.current)return;V.current=!0;const $=If(e.current.state),K=we({},dae,q,{columns:(q==null?void 0:q.columns)??$.orderedFields});K.columns=K.columns.filter(oe=>$.columnVisibilityModel[oe]!==!1);const te=K.columns.map(oe=>e.current.state.columns.lookup[oe]);try{!t.disableVirtualization&&K.disableColumnVirtualization&&(e.current.unstable_setColumnVirtualization(!1),await B());const oe=vpe(e,K,te),ue=te.map(Q=>we({},Q,{width:oe[Q.field],computedWidth:oe[Q.field],flex:0}));if(K.expand){const ce=$.orderedFields.map(le=>$.lookup[le]).filter(le=>$.columnVisibilityModel[le.field]!==!1).reduce((le,pe)=>le+(oe[pe.field]??pe.computedWidth??pe.width),0),fe=e.current.getRootDimensions().viewportInnerSize.width-ce;if(fe>0){const le=fe/(ue.length||1);ue.forEach(pe=>{pe.width+=le,pe.computedWidth+=le})}}e.current.updateColumns(ue),ue.forEach((Q,ce)=>{if(Q.width!==te[ce].width){const ae=Q.width;e.current.publishEvent("columnWidthChange",{element:e.current.getColumnHeaderElement(Q.field),colDef:Q,width:ae})}})}finally{t.disableVirtualization||e.current.unstable_setColumnVirtualization(!0),V.current=!1}},[e,B,t.disableVirtualization]);A.useEffect(()=>O,[O]),ZP(()=>{t.autosizeOnMount&&Promise.resolve().then(()=>{e.current.autosizeColumns(t.autosizeOptions)})}),cG(e,()=>{var q;return(q=e.current.columnHeadersContainerRef)==null?void 0:q.current},"touchstart",P,{passive:!0}),Wr(e,{autosizeColumns:G},"public"),Hn(e,"columnResizeStop",D),Hn(e,"columnResizeStart",L),Hn(e,"columnSeparatorMouseDown",N),Hn(e,"columnSeparatorDoubleClick",F),Pi(e,"columnResize",t.onColumnResize),Pi(e,"columnWidthChange",t.onColumnWidthChange)};function Fb(e,t,n){e&&(e.style[t]=`${parseInt(e.style[t],10)+n}px`)}function xpe(e,t){return e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?null:e.firstRowIndex>=t.firstRowIndex&&e.lastRowIndex>t.lastRowIndex?{firstRowIndex:t.lastRowIndex,lastRowIndex:e.lastRowIndex}:e.firstRowIndex<t.firstRowIndex&&e.lastRowIndex<=t.lastRowIndex?{firstRowIndex:e.firstRowIndex,lastRowIndex:t.firstRowIndex-1}:e}function Cpe(e){return e.firstRowIndex!==0||e.lastRowIndex!==0}function B$(e,t){return e.firstRowIndex!==t.firstRowIndex||e.lastRowIndex!==t.lastRowIndex}const rR=(e,t,n)=>{if(!e)return null;let r=e[t.field];const o=t.rowSpanValueGetter??t.valueGetter;return o&&(r=o(r,e,t,n)),r},gk={spannedCells:{},hiddenCells:{},hiddenCellOriginMap:{}},I1={firstRowIndex:0,lastRowIndex:0},Spe=new Set([$p,"__reorder__",gA]),r9=20,o9=(e,t,n,r,o,i,l)=>{const c=i?{}:we({},e.current.state.rowSpanning.spannedCells),f=i?{}:we({},e.current.state.rowSpanning.hiddenCells),p=i?{}:we({},e.current.state.rowSpanning.hiddenCellOriginMap);return i&&(l=I1),t.forEach(g=>{var v;if(!Spe.has(g.field)){for(let w=o.firstRowIndex;w<o.lastRowIndex;w+=1){const C=n[w];if((v=f[C.id])!=null&&v[g.field])continue;const T=rR(C.model,g,e);if(T==null)continue;let k=C.id,P=w,O=0;const L=[];if(w===o.firstRowIndex){let N=w-1;const F=n[N];for(;N>=r.firstRowIndex&&rR(F.model,g,e)===T;){const B=n[N+1];f[B.id]?f[B.id][g.field]=!0:f[B.id]={[g.field]:!0},L.push(w),O+=1,k=F.id,P=N,N-=1}}L.forEach(N=>{p[N]?p[N][g.field]=P:p[N]={[g.field]:P}});let D=w+1;for(;D<=r.lastRowIndex&&n[D]&&rR(n[D].model,g,e)===T;){const N=n[D];f[N.id]?f[N.id][g.field]=!0:f[N.id]={[g.field]:!0},p[D]?p[D][g.field]=P:p[D]={[g.field]:P},D+=1,O+=1}O>0&&(c[k]?c[k][g.field]=O+1:c[k]={[g.field]:O+1})}l={firstRowIndex:Math.min(l.firstRowIndex,o.firstRowIndex),lastRowIndex:Math.max(l.lastRowIndex,o.lastRowIndex)}}}),{spannedCells:c,hiddenCells:f,hiddenCellOriginMap:p,processedRange:l}},Epe=(e,t,n)=>{var r;if(t.unstable_rowSpanning){const o=e.rows.dataRowIds||[],i=e.columns.orderedFields||[],l=e.rows.dataRowIdToModelLookup,c=e.columns.lookup,f=!!e.filter.filterModel.items.length||!!((r=e.filter.filterModel.quickFilterValues)!=null&&r.length);if(!o.length||!i.length||!l||!c||f)return we({},e,{rowSpanning:gk});const p={firstRowIndex:0,lastRowIndex:Math.min(r9,Math.max(o.length,0))},g=o.map(k=>({id:k,model:l[k]})),v=i.map(k=>c[k]),{spannedCells:w,hiddenCells:C,hiddenCellOriginMap:T}=o9(n,v,g,p,p,!0,I1);return we({},e,{rowSpanning:{spannedCells:w,hiddenCells:C,hiddenCellOriginMap:T}})}return we({},e,{rowSpanning:gk})},Tpe=(e,t)=>{const{range:n,rows:r}=I_(e,t),o=un(e,SA),i=un(e,ss),l=un(e,_l),c=Lh(()=>Object.keys(e.current.state.rowSpanning.spannedCells).length>0?{firstRowIndex:0,lastRowIndex:Math.min(r9,Math.max(e.current.state.rows.dataRowIds.length,0))}:I1),f=A.useRef(I1),p=A.useCallback((T=!0)=>{if(!t.unstable_rowSpanning){e.current.state.rowSpanning!==gk&&e.current.setState(q=>we({},q,{rowSpanning:gk}));return}if(n===null||!Cpe(o))return;T&&(c.current=I1);const k=xpe({firstRowIndex:o.firstRowIndex,lastRowIndex:Math.min(o.lastRowIndex,n.lastRowIndex+1)},c.current);if(k===null)return;const{spannedCells:P,hiddenCells:O,hiddenCellOriginMap:L,processedRange:D}=o9(e,i,r,n,k,T,c.current);c.current=D;const N=Object.keys(P).length,F=Object.keys(O).length,B=Object.keys(e.current.state.rowSpanning.spannedCells).length,V=Object.keys(e.current.state.rowSpanning.hiddenCells).length;(T||N!==B||F!==V)&&e.current.setState(q=>we({},q,{rowSpanning:{spannedCells:P,hiddenCells:O,hiddenCellOriginMap:L}}))},[e,t.unstable_rowSpanning,n,o,r,i,c]),g=A.useRef(o),v=A.useRef(!0),w=A.useRef(!1),C=A.useRef(l);A.useEffect(()=>{const T=v.current;if(v.current&&(v.current=!1),l!==C.current){C.current=l,p(!0);return}if(n&&f.current&&B$(n,f.current)&&(f.current=n,w.current=!0),!T&&g.current!==o){B$(g.current,o)&&(p(w.current),w.current=!1),g.current=o;return}p()},[p,o,n,f,l])},Ipe=(e,t,n)=>we({},e,{listViewColumn:t.unstable_listColumn?we({},t.unstable_listColumn,{computedWidth:ZD(n)}):void 0});function kpe(e,t){const n=()=>{e.current.setState(i=>i.listViewColumn?we({},i,{listViewColumn:we({},i.listViewColumn,{computedWidth:ZD(e)})}):i)},r=A.useRef(null);Hn(e,"viewportInnerSizeChange",i=>{r.current!==i.width&&(r.current=i.width,n())}),Hn(e,"columnVisibilityModelChange",n),A.useEffect(()=>{const i=t.unstable_listColumn;i&&e.current.setState(l=>we({},l,{listViewColumn:we({},i,{computedWidth:ZD(e)})}))},[e,t.unstable_listColumn]),A.useEffect(()=>{t.unstable_listView&&t.unstable_listColumn},[t.unstable_listView,t.unstable_listColumn])}function ZD(e){return Ql(e.current.state).viewportInnerSize.width}const Ppe=(e,t)=>{const n=Whe(e,t);return Gfe(n,t),jfe(n),Gs(Jfe,n,t),Gs(Hfe,n,t),Gs(tfe,n,t),Gs(Nfe,n,t),Gs(Dfe,n,t),Gs(mfe,n,t),Gs(Wfe,n,t),Gs(Tfe,n,t),Gs(dfe,n,t),Gs(Epe,n,t),Gs(rfe,n,t),Gs(_pe,n,t),Gs(Sfe,n,t),Gs(ope,n,t),Gs(Jhe,n,t),Gs(cpe,n,t),Gs(Sie,n,t),Gs(Ipe,n,t),wfe(n,t),Vfe(n,t),nfe(n,t),Ffe(n,t),Tpe(n,t),$fe(n,t),spe(n),dpe(n,t),Lfe(n,t),gfe(n,t),Ife(n,t),pfe(n,t),Kfe(n,t),ofe(n,t),wpe(n,t),Efe(n,t),ipe(n,t),Yfe(n,t),efe(n),afe(n,t),cfe(n,t),Qhe(n,t),epe(n,t),Zfe(n,t),ape(n),Eie(n,t),kpe(n,t),n},Ape=e=>{const{classes:t,headerAlign:n,isDragging:r,isLastColumn:o,showLeftBorder:i,showRightBorder:l,groupId:c,pinnedPosition:f}=e;return An({root:["columnHeader",n==="left"&&"columnHeader--alignLeft",n==="center"&&"columnHeader--alignCenter",n==="right"&&"columnHeader--alignRight",r&&"columnHeader--moving",l&&"columnHeader--withRightBorder",i&&"columnHeader--withLeftBorder","withBorderColor",c===null?"columnHeader--emptyGroup":"columnHeader--filledGroup",f==="left"&&"columnHeader--pinnedLeft",f==="right"&&"columnHeader--pinnedRight",o&&"columnHeader--last"],draggableContainer:["columnHeaderDraggableContainer"],titleContainer:["columnHeaderTitleContainer","withBorderColor"],titleContainerContent:["columnHeaderTitleContainerContent"]},ho,t)};function Mpe(e){var le;const{groupId:t,width:n,depth:r,maxDepth:o,fields:i,height:l,colIndex:c,hasFocus:f,tabIndex:p,isLastColumn:g,pinnedPosition:v,style:w,indexInSection:C,sectionLength:T,gridHasFiller:k}=e,P=er(),O=A.useRef(null),L=Jr(),D=un(L,bG),N=t?D[t]:{},{headerName:F=t??"",description:B="",headerAlign:V=void 0}=N;let G;const q=t&&((le=D[t])==null?void 0:le.renderHeaderGroup),z=A.useMemo(()=>({groupId:t,headerName:F,description:B,depth:r,maxDepth:o,fields:i,colIndex:c,isLastColumn:g}),[t,F,B,r,o,i,c,g]);t&&q&&(G=q(z));const $=TA(v,C),K=EA(v,C,T,P.showColumnVerticalBorder,k),te=we({},e,{classes:P.classes,showLeftBorder:$,showRightBorder:K,headerAlign:V,depth:r,isDragging:!1}),re=F??t,oe=Li(),ue=t===null?`empty-group-cell-${oe}`:t,Q=Ape(te);A.useLayoutEffect(()=>{if(f){const Fe=O.current.querySelector('[tabindex="0"]')||O.current;Fe==null||Fe.focus()}},[L,f]);const ce=A.useCallback(pe=>Fe=>{nE(Fe)||L.current.publishEvent(pe,z,Fe)},[L,z]),ae=A.useMemo(()=>({onKeyDown:ce("columnGroupHeaderKeyDown"),onFocus:ce("columnGroupHeaderFocus"),onBlur:ce("columnGroupHeaderBlur")}),[ce]),fe=typeof N.headerClassName=="function"?N.headerClassName(z):N.headerClassName;return ie.jsx(NG,we({ref:O,classes:Q,columnMenuOpen:!1,colIndex:c,height:l,isResizing:!1,sortDirection:null,hasFocus:!1,tabIndex:p,isDraggable:!1,headerComponent:G,headerClassName:fe,description:B,elementId:ue,width:n,columnMenuIconButton:null,columnTitleIconButtons:null,resizable:!1,label:re,"aria-colspan":i.length,"data-fields":`|-${i.join("-|-")}-|`,style:w},ae))}const U$=sn("div",{name:"MuiDataGrid",slot:"ColumnHeaderRow",overridesResolver:(e,t)=>t.columnHeaderRow})({display:"flex"}),Rpe=e=>{const{visibleColumns:t,sortColumnLookup:n,filterColumnLookup:r,columnHeaderTabIndexState:o,columnGroupHeaderTabIndexState:i,columnHeaderFocus:l,columnGroupHeaderFocus:c,headerGroupingMaxDepth:f,columnMenuState:p,columnVisibility:g,columnGroupsHeaderStructure:v,hasOtherElementInTabSequence:w}=e,[C,T]=A.useState(""),[k,P]=A.useState(""),O=Hd(),L=Zc(),D=er(),N=un(O,Ql),F=un(O,CA),B=un(O,_G),V=un(O,cy),G=un(O,Cie),q=un(O,ZS),z=un(O,bm),$=EG(V,G,q.left.length),K=N.columnsTotalWidth<N.viewportOuterSize.width;A.useEffect(()=>{O.current.columnHeadersContainerRef.current&&(O.current.columnHeadersContainerRef.current.scrollLeft=0)},[O]);const te=A.useCallback(it=>P(it.field),[]),re=A.useCallback(()=>P(""),[]),oe=A.useCallback(it=>T(it.field),[]),ue=A.useCallback(()=>T(""),[]),Q=A.useMemo(()=>q.left.length?{firstColumnIndex:0,lastColumnIndex:q.left.length}:null,[q.left.length]),ce=A.useMemo(()=>q.right.length?{firstColumnIndex:t.length-q.right.length,lastColumnIndex:t.length}:null,[q.right.length,t.length]);Hn(O,"columnResizeStart",te),Hn(O,"columnResizeStop",re),Hn(O,"columnHeaderDragStart",oe),Hn(O,"columnHeaderDragEnd",ue);const ae=it=>{const{renderContext:ot=G,maxLastColumn:ut=t.length}=it||{};let st,ct;return!D.disableVirtualization&&!F?(st=0,ct=ut):(st=ot.firstColumnIndex,ct=ot.lastColumnIndex),{renderedColumns:t.slice(st,ct),firstColumnToRender:st,lastColumnToRender:ct}},fe=(it,ot,ut,st=!1)=>{const ct=(it==null?void 0:it.position)===Oi.RIGHT,Ae=(it==null?void 0:it.position)===void 0,Z=q.right.length>0&&ct||q.right.length===0&&Ae,ne=$-ut;return ie.jsxs(A.Fragment,{children:[Ae&&ie.jsx("div",{role:"presentation",style:{width:ne}}),ot,Ae&&ie.jsx("div",{role:"presentation",className:fn(Ke.filler,st&&Ke["filler--borderBottom"])}),Z&&ie.jsx(XF,{header:!0,pinnedRight:ct,borderBottom:st,borderTop:!1})]})},le=({pinnedPosition:it,columnIndex:ot,computedWidth:ut})=>{let st;const ct=it===Oi.LEFT,Ae=it===Oi.RIGHT;if(ct||Ae){const Z=ZF(it,ut,ot,V,N);let ne=ct?"left":"right";L&&(ne=ct?"right":"left"),it==="left"&&(st={[ne]:Z}),it==="right"&&(st={[ne]:Z})}return st},pe=(it,ot={})=>{const{renderedColumns:ut,firstColumnToRender:st}=ae(it),ct=[];for(let Ae=0;Ae<ut.length;Ae+=1){const Z=ut[Ae],ne=st+Ae,ee=ne===0,ye=o!==null&&o.field===Z.field||ee&&!w?0:-1,Ie=l!==null&&l.field===Z.field,ge=p.open&&p.field===Z.field,$e=it==null?void 0:it.position,nt=le({pinnedPosition:$e,columnIndex:ne,computedWidth:Z.computedWidth}),pt=$e===Oi.RIGHT?ut[Ae-1]:ut[Ae+1],wt=pt?l!==null&&l.field===pt.field:!1,mt=ne+1===V.length-q.right.length;ct.push(ie.jsx(Zse,we({},n[Z.field],{columnMenuOpen:ge,filterItemsCounter:r[Z.field]&&r[Z.field].length,headerHeight:N.headerHeight,isDragging:Z.field===C,colDef:Z,colIndex:ne,isResizing:k===Z.field,isLast:ne===V.length-1,hasFocus:Ie,tabIndex:ye,pinnedPosition:$e,style:nt,indexInSection:Ae,sectionLength:ut.length,gridHasFiller:K,isLastUnpinned:mt,isSiblingFocused:wt},ot),Z.field))}return fe(it,ct,0)},Fe=()=>ie.jsxs(U$,{role:"row","aria-rowindex":f+1,ownerState:D,className:Ke["row--borderBottom"],children:[Q&&pe({position:Oi.LEFT,renderContext:Q,maxLastColumn:Q.lastColumnIndex},{disableReorder:!0}),pe({renderContext:G,maxLastColumn:t.length-q.right.length}),ce&&pe({position:Oi.RIGHT,renderContext:ce,maxLastColumn:ce.lastColumnIndex},{disableReorder:!0,separatorSide:HF.Left})]}),Be=({depth:it,params:ot})=>{var Pt,Zt;const ut=ae(ot);if(ut.renderedColumns.length===0)return null;const{firstColumnToRender:st,lastColumnToRender:ct}=ut,Ae=v[it],Z=t[st].field,ne=((Pt=B[Z])==null?void 0:Pt[it])??null,ee=Ae.findIndex(({groupId:We,columnFields:Ge})=>We===ne&&Ge.includes(Z)),ye=t[ct-1].field,Ie=((Zt=B[ye])==null?void 0:Zt[it])??null,ge=Ae.findIndex(({groupId:We,columnFields:Ge})=>We===Ie&&Ge.includes(ye)),$e=Ae.slice(ee,ge+1).map(We=>we({},We,{columnFields:We.columnFields.filter(Ge=>g[Ge]!==!1)})).filter(We=>We.columnFields.length>0),nt=$e[0].columnFields.indexOf(Z),wt=$e[0].columnFields.slice(0,nt).reduce((We,Ge)=>{const Rt=z[Ge];return We+(Rt.computedWidth??0)},0);let mt=st;const zt=$e.map(({groupId:We,columnFields:Ge},Rt)=>{const Dt=c!==null&&c.depth===it&&Ge.includes(c.field),qt=i!==null&&i.depth===it&&Ge.includes(i.field)?0:-1,Yt={groupId:We,width:Ge.reduce((kt,cn)=>kt+z[cn].computedWidth,0),fields:Ge,colIndex:mt,hasFocus:Dt,tabIndex:qt},xt=ot.position,Et=le({pinnedPosition:xt,columnIndex:mt,computedWidth:Yt.width});mt+=Ge.length;let St=Rt;return xt==="left"&&(St=mt-1),ie.jsx(Mpe,{groupId:We,width:Yt.width,fields:Yt.fields,colIndex:Yt.colIndex,depth:it,isLastColumn:Rt===$e.length-1,maxDepth:f,height:N.groupHeaderHeight,hasFocus:Dt,tabIndex:qt,pinnedPosition:xt,style:Et,indexInSection:St,sectionLength:$e.length,gridHasFiller:K},Rt)});return fe(ot,zt,wt)};return{renderContext:G,leftRenderContext:Q,rightRenderContext:ce,pinnedColumns:q,visibleColumns:t,getCellOffsetStyle:le,getFillers:fe,getColumnHeadersRow:Fe,getColumnsToRender:ae,getColumnGroupHeadersRows:()=>{if(f===0)return null;const it=[];for(let ot=0;ot<f;ot+=1)it.push(ie.jsxs(U$,{role:"row","aria-rowindex":ot+1,ownerState:D,children:[Q&&Be({depth:ot,params:{position:Oi.LEFT,renderContext:Q,maxLastColumn:Q.lastColumnIndex}}),Be({depth:ot,params:{renderContext:G}}),ce&&Be({depth:ot,params:{position:Oi.RIGHT,renderContext:ce,maxLastColumn:ce.lastColumnIndex}})]},ot));return it},isDragging:!!C,getInnerProps:()=>({role:"rowgroup"})}},Ope=["className"],Dpe=e=>{const{classes:t}=e;return An({root:["columnHeaders"]},ho,t)},Lpe=Ti("div",{name:"MuiDataGrid",slot:"ColumnHeaders",overridesResolver:(e,t)=>t.columnHeaders})({display:"flex",flexDirection:"column",borderTopLeftRadius:"var(--unstable_DataGrid-radius)",borderTopRightRadius:"var(--unstable_DataGrid-radius)"}),Npe=No(function(t,n){const{className:r}=t,o=sr(t,Ope),i=er(),l=Dpe(i);return ie.jsx(Lpe,we({className:fn(l.root,r),ownerState:i},o,{role:"presentation",ref:n}))}),Fpe=["className","visibleColumns","sortColumnLookup","filterColumnLookup","columnHeaderTabIndexState","columnGroupHeaderTabIndexState","columnHeaderFocus","columnGroupHeaderFocus","headerGroupingMaxDepth","columnMenuState","columnVisibility","columnGroupsHeaderStructure","hasOtherElementInTabSequence"],zpe=No(function(t,n){const{visibleColumns:r,sortColumnLookup:o,filterColumnLookup:i,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:c,columnHeaderFocus:f,columnGroupHeaderFocus:p,headerGroupingMaxDepth:g,columnMenuState:v,columnVisibility:w,columnGroupsHeaderStructure:C,hasOtherElementInTabSequence:T}=t,k=sr(t,Fpe),{getInnerProps:P,getColumnHeadersRow:O,getColumnGroupHeadersRows:L}=Rpe({visibleColumns:r,sortColumnLookup:o,filterColumnLookup:i,columnHeaderTabIndexState:l,columnGroupHeaderTabIndexState:c,columnHeaderFocus:f,columnGroupHeaderFocus:p,headerGroupingMaxDepth:g,columnMenuState:v,columnVisibility:w,columnGroupsHeaderStructure:C,hasOtherElementInTabSequence:T});return ie.jsxs(Npe,we({},k,P(),{ref:n,children:[L(),O()]}))}),Bpe=uy(zpe);function Upe(e){return null}function jpe(e){return null}const $pe=No(function(t,n){const o=Jr().current.getLocaleText("noResultsOverlayLabel");return ie.jsx($F,we({},t,{ref:n,children:o}))});function Hpe(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:o=!1}=e,i=iF({badgeContent:t,max:r});let l=n;n===!1&&t===0&&!o&&(l=!0);const{badgeContent:c,max:f=r}=l?i:e,p=c&&Number(c)>f?`${f}+`:c;return{badgeContent:c,invisible:l,max:f,displayValue:p}}function Vpe(e){return Rr("MuiBadge",e)}const sg=Ar("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),oR=10,iR=4,qpe=e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:o,variant:i,classes:l={}}=e,c={root:["root"],badge:["badge",i,r&&"invisible",`anchorOrigin${tn(n.vertical)}${tn(n.horizontal)}`,`anchorOrigin${tn(n.vertical)}${tn(n.horizontal)}${tn(o)}`,`overlap${tn(o)}`,t!=="default"&&`color${tn(t)}`]};return An(c,Vpe,l)},Gpe=sn("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Wpe=sn("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${tn(n.anchorOrigin.vertical)}${tn(n.anchorOrigin.horizontal)}${tn(n.overlap)}`],n.color!=="default"&&t[`color${tn(n.color)}`],n.invisible&&t.invisible]}})(mr(({theme:e})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:oR*2,lineHeight:1,padding:"0 6px",height:oR*2,borderRadius:oR,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.entries(e.palette).filter(Ia(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:iR,height:iR*2,minWidth:iR*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${sg.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]})));function j$(e){return{vertical:(e==null?void 0:e.vertical)??"top",horizontal:(e==null?void 0:e.horizontal)??"right"}}const Kpe=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiBadge"}),{anchorOrigin:o,className:i,classes:l,component:c,components:f={},componentsProps:p={},children:g,overlap:v="rectangular",color:w="default",invisible:C=!1,max:T=99,badgeContent:k,slots:P,slotProps:O,showZero:L=!1,variant:D="standard",...N}=r,{badgeContent:F,invisible:B,max:V,displayValue:G}=Hpe({max:T,invisible:C,badgeContent:k,showZero:L}),q=iF({anchorOrigin:j$(o),color:w,overlap:v,variant:D,badgeContent:k}),z=B||F==null&&D!=="dot",{color:$=w,overlap:K=v,anchorOrigin:te,variant:re=D}=z?q:r,oe=j$(te),ue=re!=="dot"?G:void 0,Q={...r,badgeContent:F,invisible:z,max:V,displayValue:ue,showZero:L,anchorOrigin:oe,color:$,overlap:K,variant:re},ce=qpe(Q),ae=(P==null?void 0:P.root)??f.Root??Gpe,fe=(P==null?void 0:P.badge)??f.Badge??Wpe,le=(O==null?void 0:O.root)??p.root,pe=(O==null?void 0:O.badge)??p.badge,Fe=eS({elementType:ae,externalSlotProps:le,externalForwardedProps:N,additionalProps:{ref:n,as:c},ownerState:Q,className:fn(le==null?void 0:le.className,ce.root,i)}),Be=eS({elementType:fe,externalSlotProps:pe,ownerState:Q,className:fn(ce.badge,pe==null?void 0:pe.className)});return ie.jsxs(ae,{...Fe,children:[g,ie.jsx(fe,{...Be,children:ue})]})});function Ype(e){return Rr("PrivateSwitchBase",e)}Ar("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Zpe=e=>{const{classes:t,checked:n,disabled:r,edge:o}=e,i={root:["root",n&&"checked",r&&"disabled",o&&`edge${tn(o)}`],input:["input"]};return An(i,Ype,t)},Xpe=sn(vx)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),Qpe=sn("input",{shouldForwardProp:cc})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Jpe=A.forwardRef(function(t,n){const{autoFocus:r,checked:o,checkedIcon:i,className:l,defaultChecked:c,disabled:f,disableFocusRipple:p=!1,edge:g=!1,icon:v,id:w,inputProps:C,inputRef:T,name:k,onBlur:P,onChange:O,onFocus:L,readOnly:D,required:N=!1,tabIndex:F,type:B,value:V,...G}=t,[q,z]=Hv({controlled:o,default:!!c,name:"SwitchBase",state:"checked"}),$=wm(),K=ae=>{L&&L(ae),$&&$.onFocus&&$.onFocus(ae)},te=ae=>{P&&P(ae),$&&$.onBlur&&$.onBlur(ae)},re=ae=>{if(ae.nativeEvent.defaultPrevented)return;const fe=ae.target.checked;z(fe),O&&O(ae,fe)};let oe=f;$&&typeof oe>"u"&&(oe=$.disabled);const ue=B==="checkbox"||B==="radio",Q={...t,checked:q,disabled:oe,disableFocusRipple:p,edge:g},ce=Zpe(Q);return ie.jsxs(Xpe,{component:"span",className:fn(ce.root,l),centerRipple:!0,focusRipple:!p,disabled:oe,tabIndex:null,role:void 0,onFocus:K,onBlur:te,ownerState:Q,ref:n,...G,children:[ie.jsx(Qpe,{autoFocus:r,checked:o,defaultChecked:c,className:ce.input,disabled:oe,id:ue?w:void 0,name:k,onChange:re,readOnly:D,ref:T,required:N,ownerState:Q,tabIndex:F,type:B,...B==="checkbox"&&V===void 0?{}:{value:V},...C}),q?i:v]})}),eme=fo(ie.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),tme=fo(ie.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),nme=fo(ie.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function rme(e){return Rr("MuiCheckbox",e)}const aR=Ar("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),ome=e=>{const{classes:t,indeterminate:n,color:r,size:o}=e,i={root:["root",n&&"indeterminate",`color${tn(r)}`,`size${tn(o)}`]},l=An(i,rme,t);return{...t,...l}},ime=sn(Jpe,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${tn(n.size)}`],n.color!=="default"&&t[`color${tn(n.color)}`]]}})(mr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette[t].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{color:t},style:{[`&.${aR.checked}, &.${aR.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${aR.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),ame=ie.jsx(tme,{}),sme=ie.jsx(eme,{}),lme=ie.jsx(nme,{}),ume=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiCheckbox"}),{checkedIcon:o=ame,color:i="primary",icon:l=sme,indeterminate:c=!1,indeterminateIcon:f=lme,inputProps:p,size:g="medium",disableRipple:v=!1,className:w,...C}=r,T=c?f:l,k=c?f:o,P={...r,disableRipple:v,color:i,indeterminate:c,size:g},O=ome(P);return ie.jsx(ime,{type:"checkbox",inputProps:{"data-indeterminate":c,...p},icon:A.cloneElement(T,{fontSize:T.props.fontSize??g}),checkedIcon:A.cloneElement(k,{fontSize:k.props.fontSize??g}),ownerState:P,ref:n,className:fn(O.root,w),disableRipple:v,...C,classes:O})});function cme(e){return Rr("MuiButton",e)}const zb=Ar("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),dme=A.createContext({}),hme=A.createContext(void 0),fme=e=>{const{color:t,disableElevation:n,fullWidth:r,size:o,variant:i,classes:l}=e,c={root:["root",i,`${i}${tn(t)}`,`size${tn(o)}`,`${i}Size${tn(o)}`,`color${tn(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${tn(o)}`],endIcon:["icon","endIcon",`iconSize${tn(o)}`]},f=An(c,cme,l);return{...l,...f}},i9=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],pme=sn(vx,{shouldForwardProp:e=>cc(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${tn(n.color)}`],t[`size${tn(n.size)}`],t[`${n.variant}Size${tn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(mr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${zb.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${zb.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${zb.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${zb.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Ia()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:jr(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:jr(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zb.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zb.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),mme=sn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${tn(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...i9]}),gme=sn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${tn(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...i9]}),yme=A.forwardRef(function(t,n){const r=A.useContext(dme),o=A.useContext(hme),i=hx(r,t),l=Kr({props:i,name:"MuiButton"}),{children:c,color:f="primary",component:p="button",className:g,disabled:v=!1,disableElevation:w=!1,disableFocusRipple:C=!1,endIcon:T,focusVisibleClassName:k,fullWidth:P=!1,size:O="medium",startIcon:L,type:D,variant:N="text",...F}=l,B={...l,color:f,component:p,disabled:v,disableElevation:w,disableFocusRipple:C,fullWidth:P,size:O,type:D,variant:N},V=fme(B),G=L&&ie.jsx(mme,{className:V.startIcon,ownerState:B,children:L}),q=T&&ie.jsx(gme,{className:V.endIcon,ownerState:B,children:T}),z=o||"";return ie.jsxs(pme,{ownerState:B,className:fn(r.className,V.root,g,z),component:p,disabled:v,focusRipple:!C,focusVisibleClassName:fn(V.focusVisible,k),ref:n,type:D,...F,classes:V,children:[G,c,q]})});function vme(e){return Rr("MuiInputAdornment",e)}const $$=Ar("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var H$;const _me=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${tn(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},bme=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:o,size:i,variant:l}=e,c={root:["root",n&&"disablePointerEvents",o&&`position${tn(o)}`,l,r&&"hiddenLabel",i&&`size${tn(i)}`]};return An(c,vme,t)},wme=sn("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:_me})(mr(({theme:e})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${$$.positionStart}&:not(.${$$.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),xme=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiInputAdornment"}),{children:o,className:i,component:l="div",disablePointerEvents:c=!1,disableTypography:f=!1,position:p,variant:g,...v}=r,w=wm()||{};let C=g;g&&w.variant,C||(C=w.variant);const T={...r,hiddenLabel:w.hiddenLabel,size:w.size,disablePointerEvents:c,position:p,variant:C},k=bme(T);return ie.jsx(aA.Provider,{value:null,children:ie.jsx(wme,{as:l,ownerState:T,className:fn(k.root,i),ref:n,...v,children:typeof o=="string"&&!f?ie.jsx(bf,{color:"textSecondary",children:o}):ie.jsxs(A.Fragment,{children:[p==="start"?H$||(H$=ie.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):null,o]})})})});function Cme(e){return Rr("MuiTooltip",e)}const Fa=Ar("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Sme(e){return Math.round(e*1e5)/1e5}const Eme=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:o,placement:i}=e,l={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",o&&"touch",`tooltipPlacement${tn(i.split("-")[0])}`],arrow:["arrow"]};return An(l,Cme,t)},Tme=sn(E_,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(mr(({theme:e})=>({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:t})=>!t.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:t})=>!t,style:{pointerEvents:"none"}},{props:({ownerState:t})=>t.arrow,style:{[`&[data-popper-placement*="bottom"] .${Fa.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Fa.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Fa.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Fa.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Fa.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="right"] .${Fa.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Fa.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:t})=>t.arrow&&!!t.isRtl,style:{[`&[data-popper-placement*="left"] .${Fa.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Ime=sn("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${tn(n.placement.split("-")[0])}`]]}})(mr(({theme:e})=>({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:jr(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium,[`.${Fa.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Fa.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Fa.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Fa.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:t})=>t.arrow,style:{position:"relative",margin:0}},{props:({ownerState:t})=>t.touch,style:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${Sme(16/14)}em`,fontWeight:e.typography.fontWeightRegular}},{props:({ownerState:t})=>!t.isRtl,style:{[`.${Fa.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Fa.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:t})=>!t.isRtl&&t.touch,style:{[`.${Fa.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Fa.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:t})=>!!t.isRtl,style:{[`.${Fa.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Fa.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:t})=>!!t.isRtl&&t.touch,style:{[`.${Fa.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Fa.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Fa.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:t})=>t.touch,style:{[`.${Fa.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),kme=sn("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(mr(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:jr(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let gT=!1;const V$=new XP;let hC={x:0,y:0};function yT(e,t){return(n,...r)=>{t&&t(n,...r),e(n,...r)}}const Pme=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiTooltip"}),{arrow:o=!1,children:i,classes:l,components:c={},componentsProps:f={},describeChild:p=!1,disableFocusListener:g=!1,disableHoverListener:v=!1,disableInteractive:w=!1,disableTouchListener:C=!1,enterDelay:T=100,enterNextDelay:k=0,enterTouchDelay:P=700,followCursor:O=!1,id:L,leaveDelay:D=0,leaveTouchDelay:N=1500,onClose:F,onOpen:B,open:V,placement:G="bottom",PopperComponent:q,PopperProps:z={},slotProps:$={},slots:K={},title:te,TransitionComponent:re,TransitionProps:oe,...ue}=r,Q=A.isValidElement(i)?i:ie.jsx("span",{children:i}),ce=XS(),ae=Zc(),[fe,le]=A.useState(),[pe,Fe]=A.useState(null),Be=A.useRef(!1),Ze=w||O,it=Id(),ot=Id(),ut=Id(),st=Id(),[ct,Ae]=Hv({controlled:V,default:!1,name:"Tooltip",state:"open"});let Z=ct;const ne=Li(L),ee=A.useRef(),ye=co(()=>{ee.current!==void 0&&(document.body.style.WebkitUserSelect=ee.current,ee.current=void 0),st.clear()});A.useEffect(()=>ye,[ye]);const Ie=Ce=>{V$.clear(),gT=!0,Ae(!0),B&&!Z&&B(Ce)},ge=co(Ce=>{V$.start(800+D,()=>{gT=!1}),Ae(!1),F&&Z&&F(Ce),it.start(ce.transitions.duration.shortest,()=>{Be.current=!1})}),$e=Ce=>{Be.current&&Ce.type!=="touchstart"||(fe&&fe.removeAttribute("title"),ot.clear(),ut.clear(),T||gT&&k?ot.start(gT?k:T,()=>{Ie(Ce)}):Ie(Ce))},nt=Ce=>{ot.clear(),ut.start(D,()=>{ge(Ce)})},[,pt]=A.useState(!1),wt=Ce=>{fx(Ce.target)||(pt(!1),nt(Ce))},mt=Ce=>{fe||le(Ce.currentTarget),fx(Ce.target)&&(pt(!0),$e(Ce))},zt=Ce=>{Be.current=!0;const ke=Q.props;ke.onTouchStart&&ke.onTouchStart(Ce)},Pt=Ce=>{zt(Ce),ut.clear(),it.clear(),ye(),ee.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",st.start(P,()=>{document.body.style.WebkitUserSelect=ee.current,$e(Ce)})},Zt=Ce=>{Q.props.onTouchEnd&&Q.props.onTouchEnd(Ce),ye(),ut.start(N,()=>{ge(Ce)})};A.useEffect(()=>{if(!Z)return;function Ce(ke){ke.key==="Escape"&&ge(ke)}return document.addEventListener("keydown",Ce),()=>{document.removeEventListener("keydown",Ce)}},[ge,Z]);const We=yi(x_(Q),le,n);!te&&te!==0&&(Z=!1);const Ge=A.useRef(),Rt=Ce=>{const ke=Q.props;ke.onMouseMove&&ke.onMouseMove(Ce),hC={x:Ce.clientX,y:Ce.clientY},Ge.current&&Ge.current.update()},Dt={},qt=typeof te=="string";p?(Dt.title=!Z&&qt&&!v?te:null,Dt["aria-describedby"]=Z?ne:null):(Dt["aria-label"]=qt?te:null,Dt["aria-labelledby"]=Z&&!qt?ne:null);const Yt={...Dt,...ue,...Q.props,className:fn(ue.className,Q.props.className),onTouchStart:zt,ref:We,...O?{onMouseMove:Rt}:{}},xt={};C||(Yt.onTouchStart=Pt,Yt.onTouchEnd=Zt),v||(Yt.onMouseOver=yT($e,Yt.onMouseOver),Yt.onMouseLeave=yT(nt,Yt.onMouseLeave),Ze||(xt.onMouseOver=$e,xt.onMouseLeave=nt)),g||(Yt.onFocus=yT(mt,Yt.onFocus),Yt.onBlur=yT(wt,Yt.onBlur),Ze||(xt.onFocus=mt,xt.onBlur=wt));const Et={...r,isRtl:ae,arrow:o,disableInteractive:Ze,placement:G,PopperComponentProp:q,touch:Be.current},St=typeof $.popper=="function"?$.popper(Et):$.popper,kt=A.useMemo(()=>{var ke,De;let Ce=[{name:"arrow",enabled:!!pe,options:{element:pe,padding:4}}];return(ke=z.popperOptions)!=null&&ke.modifiers&&(Ce=Ce.concat(z.popperOptions.modifiers)),(De=St==null?void 0:St.popperOptions)!=null&&De.modifiers&&(Ce=Ce.concat(St.popperOptions.modifiers)),{...z.popperOptions,...St==null?void 0:St.popperOptions,modifiers:Ce}},[pe,z.popperOptions,St==null?void 0:St.popperOptions]),cn=Eme(Et),an=typeof $.transition=="function"?$.transition(Et):$.transition,Qn={slots:{popper:c.Popper,transition:c.Transition??re,tooltip:c.Tooltip,arrow:c.Arrow,...K},slotProps:{arrow:$.arrow??f.arrow,popper:{...z,...St??f.popper},tooltip:$.tooltip??f.tooltip,transition:{...oe,...an??f.transition}}},[tr,lr]=Di("popper",{elementType:Tme,externalForwardedProps:Qn,ownerState:Et,className:fn(cn.popper,z==null?void 0:z.className)}),[Le,de]=Di("transition",{elementType:lS,externalForwardedProps:Qn,ownerState:Et}),[xe,Ee]=Di("tooltip",{elementType:Ime,className:cn.tooltip,externalForwardedProps:Qn,ownerState:Et}),[Ye,lt]=Di("arrow",{elementType:kme,className:cn.arrow,externalForwardedProps:Qn,ownerState:Et,ref:Fe});return ie.jsxs(A.Fragment,{children:[A.cloneElement(Q,Yt),ie.jsx(tr,{as:q??E_,placement:G,anchorEl:O?{getBoundingClientRect:()=>({top:hC.y,left:hC.x,right:hC.x,bottom:hC.y,width:0,height:0})}:fe,popperRef:Ge,open:fe?Z:!1,id:ne,transition:!0,...xt,...lr,popperOptions:kt,children:({TransitionProps:Ce})=>ie.jsx(Le,{timeout:ce.transitions.duration.shorter,...Ce,...de,children:ie.jsxs(xe,{...Ee,children:[te,o?ie.jsx(Ye,{...lt}):null]})})})]})}),Ame=["sortingOrder"],Mme=A.memo(function(t){const{sortingOrder:n}=t,r=sr(t,Ame),o=er(),[i]=n,l=i==="asc"?o.slots.columnSortedAscendingIcon:o.slots.columnSortedDescendingIcon;return l?ie.jsx(l,we({},r)):null}),Rme=["native"];function Ome(e){let{native:t}=e,n=sr(e,Rme);return t?ie.jsx("option",we({},n)):ie.jsx(Rd,we({},n))}const Dme={booleanCellTrueIcon:vle,booleanCellFalseIcon:ZM,columnMenuIcon:ple,openFilterButtonIcon:sle,filterPanelDeleteIcon:ZM,columnFilteredIcon:a$,columnSelectorIcon:ule,columnUnsortedIcon:Mme,columnSortedAscendingIcon:n$,columnSortedDescendingIcon:r$,columnResizeIcon:cle,densityCompactIcon:dle,densityStandardIcon:hle,densityComfortableIcon:fle,exportIcon:yle,moreActionsIcon:_le,treeDataCollapseIcon:i$,treeDataExpandIcon:o$,groupingCriteriaCollapseIcon:i$,groupingCriteriaExpandIcon:o$,detailPanelExpandIcon:s$,detailPanelCollapseIcon:mle,rowReorderIcon:l$,quickFilterIcon:lle,quickFilterClearIcon:ZM,columnMenuHideIcon:ble,columnMenuSortAscendingIcon:n$,columnMenuSortDescendingIcon:r$,columnMenuFilterIcon:a$,columnMenuManageColumnsIcon:wle,columnMenuClearIcon:xle,loadIcon:gle,filterPanelAddIcon:s$,filterPanelRemoveAllIcon:Cle,columnReorderIcon:l$},Lme=we({},Dme,{baseBadge:Kpe,baseCheckbox:ume,baseDivider:DD,baseTextField:YG,baseFormControl:HG,baseSelect:IA,baseButton:yme,baseIconButton:Ug,baseInputAdornment:xme,baseTooltip:Pme,basePopper:E_,baseInputLabel:VG,baseSelectOption:Ome,baseChip:U8}),Nme=we({},Lme,{cell:Sae,skeletonCell:nse,columnHeaderFilterIconButton:ale,columnHeaderSortIcon:ole,columnMenu:Ule,columnHeaders:Bpe,detailPanels:Upe,footer:gde,footerRowCount:Che,toolbar:null,pinnedRows:jpe,loadingOverlay:$de,noResultsOverlay:$pe,noRowsOverlay:Hde,pagination:_he,filterPanel:xue,columnsPanel:Xle,columnsManagement:ede,panel:nue,row:khe});function Fme({defaultSlots:e,slots:t}){const n=t;if(!n||Object.keys(n).length===0)return e;const r=we({},e);return Object.keys(n).forEach(o=>{const i=o;n[i]!==void 0&&(r[i]=n[i])}),r}function zme(e){var o;if((o=e.slotProps)!=null&&o.root)return e;const t=Object.keys(e);if(!t.some(i=>i.startsWith("aria-")||i.startsWith("data-")))return e;const n={},r=e.forwardedProps??{};for(let i=0;i<t.length;i+=1){const l=t[i];l.startsWith("aria-")||l.startsWith("data-")?r[l]=e[l]:n[l]=e[l]}return n.forwardedProps=r,n}function Bme(e){return A.useMemo(()=>zme(e),[e])}const Ume={disableMultipleColumnsFiltering:!0,disableMultipleColumnsSorting:!0,throttleRowsMs:void 0,hideFooterRowCount:!1,pagination:!0,checkboxSelectionVisibleOnly:!1,disableColumnReorder:!0,keepColumnPositionIfDraggedOutside:!1,signature:"DataGrid",unstable_listView:!1},jme=Nme,$me=e=>{const t=Bme(lee({props:e,name:"MuiDataGrid"})),n=A.useMemo(()=>we({},k3,t.localeText),[t.localeText]),r=A.useMemo(()=>Fme({defaultSlots:jme,slots:t.slots}),[t.slots]),o=A.useMemo(()=>Object.keys(WD).reduce((i,l)=>(i[l]=t[l]??WD[l],i),{}),[t]);return A.useMemo(()=>we({},t,o,{localeText:n,slots:r},Ume),[t,n,r,o])},Hme={hooks:{useGridAriaAttributes:Phe,useGridRowAriaAttributes:Ahe}},a9=No(function(t,n){var i;const r=$me(t),o=Ppe(r.apiRef,r);return ie.jsx(Mhe,{privateApiRef:o,configuration:Hme,props:r,children:ie.jsxs(hse,we({className:r.className,style:r.style,sx:r.sx},r.forwardedProps,(i=r.slotProps)==null?void 0:i.root,{ref:n,children:[ie.jsx(vde,{}),ie.jsx(yae,{}),ie.jsx(vae,{})]}))})}),Vme=A.memo(a9);a9.propTypes={apiRef:Tt.shape({current:Tt.object.isRequired}),"aria-label":Tt.string,"aria-labelledby":Tt.string,autoHeight:Tt.bool,autoPageSize:Tt.bool,autosizeOnMount:Tt.bool,autosizeOptions:Tt.shape({columns:Tt.arrayOf(Tt.string),disableColumnVirtualization:Tt.bool,expand:Tt.bool,includeHeaders:Tt.bool,includeOutliers:Tt.bool,outliersFactor:Tt.number}),cellModesModel:Tt.object,checkboxSelection:Tt.bool,classes:Tt.object,clipboardCopyCellDelimiter:Tt.string,columnBufferPx:Tt.number,columnGroupHeaderHeight:Tt.number,columnGroupingModel:Tt.arrayOf(Tt.object),columnHeaderHeight:Tt.number,columns:Tt.arrayOf(Tt.object).isRequired,columnVisibilityModel:Tt.object,density:Tt.oneOf(["comfortable","compact","standard"]),disableAutosize:Tt.bool,disableColumnFilter:Tt.bool,disableColumnMenu:Tt.bool,disableColumnResize:Tt.bool,disableColumnSelector:Tt.bool,disableColumnSorting:Tt.bool,disableDensitySelector:Tt.bool,disableEval:Tt.bool,disableMultipleRowSelection:Tt.bool,disableRowSelectionOnClick:Tt.bool,disableVirtualization:Tt.bool,editMode:Tt.oneOf(["cell","row"]),estimatedRowCount:Tt.number,experimentalFeatures:Tt.shape({warnIfFocusStateIsNotSynced:Tt.bool}),filterDebounceMs:Tt.number,filterMode:Tt.oneOf(["client","server"]),filterModel:Tt.shape({items:Tt.arrayOf(Tt.shape({field:Tt.string.isRequired,id:Tt.oneOfType([Tt.number,Tt.string]),operator:Tt.string.isRequired,value:Tt.any})).isRequired,logicOperator:Tt.oneOf(["and","or"]),quickFilterExcludeHiddenColumns:Tt.bool,quickFilterLogicOperator:Tt.oneOf(["and","or"]),quickFilterValues:Tt.array}),forwardedProps:Tt.object,getCellClassName:Tt.func,getDetailPanelContent:Tt.func,getEstimatedRowHeight:Tt.func,getRowClassName:Tt.func,getRowHeight:Tt.func,getRowId:Tt.func,getRowSpacing:Tt.func,hideFooter:Tt.bool,hideFooterPagination:Tt.bool,hideFooterSelectedRowCount:Tt.bool,ignoreDiacritics:Tt.bool,ignoreValueFormatterDuringExport:Tt.oneOfType([Tt.shape({clipboardExport:Tt.bool,csvExport:Tt.bool}),Tt.bool]),indeterminateCheckboxAction:Tt.oneOf(["deselect","select"]),initialState:Tt.object,isCellEditable:Tt.func,isRowSelectable:Tt.func,keepNonExistentRowsSelected:Tt.bool,loading:Tt.bool,localeText:Tt.object,logger:Tt.shape({debug:Tt.func.isRequired,error:Tt.func.isRequired,info:Tt.func.isRequired,warn:Tt.func.isRequired}),logLevel:Tt.oneOf(["debug","error","info","warn",!1]),nonce:Tt.string,onCellClick:Tt.func,onCellDoubleClick:Tt.func,onCellEditStart:Tt.func,onCellEditStop:Tt.func,onCellKeyDown:Tt.func,onCellModesModelChange:Tt.func,onClipboardCopy:Tt.func,onColumnHeaderClick:Tt.func,onColumnHeaderContextMenu:Tt.func,onColumnHeaderDoubleClick:Tt.func,onColumnHeaderEnter:Tt.func,onColumnHeaderLeave:Tt.func,onColumnHeaderOut:Tt.func,onColumnHeaderOver:Tt.func,onColumnOrderChange:Tt.func,onColumnResize:Tt.func,onColumnVisibilityModelChange:Tt.func,onColumnWidthChange:Tt.func,onDensityChange:Tt.func,onFilterModelChange:Tt.func,onMenuClose:Tt.func,onMenuOpen:Tt.func,onPaginationMetaChange:Tt.func,onPaginationModelChange:Tt.func,onPreferencePanelClose:Tt.func,onPreferencePanelOpen:Tt.func,onProcessRowUpdateError:Tt.func,onResize:Tt.func,onRowClick:Tt.func,onRowCountChange:Tt.func,onRowDoubleClick:Tt.func,onRowEditStart:Tt.func,onRowEditStop:Tt.func,onRowModesModelChange:Tt.func,onRowSelectionModelChange:Tt.func,onSortModelChange:Tt.func,onStateChange:Tt.func,pageSizeOptions:Tt.arrayOf(Tt.oneOfType([Tt.number,Tt.shape({label:Tt.string.isRequired,value:Tt.number.isRequired})]).isRequired),pagination:Tt.oneOf([!0]),paginationMeta:Tt.shape({hasNextPage:Tt.bool}),paginationMode:Tt.oneOf(["client","server"]),paginationModel:Tt.shape({page:Tt.number.isRequired,pageSize:Tt.number.isRequired}),processRowUpdate:Tt.func,resizeThrottleMs:Tt.number,rowBufferPx:Tt.number,rowCount:Tt.number,rowHeight:Tt.number,rowModesModel:Tt.object,rowPositionsDebounceMs:Tt.number,rows:Tt.arrayOf(Tt.object),rowSelection:Tt.bool,rowSelectionModel:Tt.oneOfType([Tt.arrayOf(Tt.oneOfType([Tt.number,Tt.string]).isRequired),Tt.number,Tt.string]),rowSpacingType:Tt.oneOf(["border","margin"]),scrollbarSize:Tt.number,showCellVerticalBorder:Tt.bool,showColumnVerticalBorder:Tt.bool,slotProps:Tt.object,slots:Tt.object,sortingMode:Tt.oneOf(["client","server"]),sortingOrder:Tt.arrayOf(Tt.oneOf(["asc","desc"])),sortModel:Tt.arrayOf(Tt.shape({field:Tt.string.isRequired,sort:Tt.oneOf(["asc","desc"])})),sx:Tt.oneOfType([Tt.arrayOf(Tt.oneOfType([Tt.func,Tt.object,Tt.bool])),Tt.func,Tt.object]),unstable_rowSpanning:Tt.bool,virtualizeColumnsWithAutoRowHeight:Tt.bool};function qme(e){return Rr("MuiAppBar",e)}Ar("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const Gme=e=>{const{color:t,position:n,classes:r}=e,o={root:["root",`color${tn(t)}`,`position${tn(n)}`]};return An(o,qme,r)},q$=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,Wme=sn(Ux,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${tn(n.position)}`],t[`color${tn(n.color)}`]]}})(mr(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter(Ia(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:t=>t.enableColorOnDark===!0&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:t=>t.enableColorOnDark===!1&&!["inherit","transparent"].includes(t.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?q$(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?q$(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),Kme=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiAppBar"}),{className:o,color:i="primary",enableColorOnDark:l=!1,position:c="fixed",...f}=r,p={...r,color:i,position:c,enableColorOnDark:l},g=Gme(p);return ie.jsx(Wme,{square:!0,component:"header",ownerState:p,elevation:4,className:fn(g.root,o,c==="fixed"&&"mui-fixed"),ref:n,...f})}),Yme=Ar("MuiBox",["root"]),Zme=Yq(),XD=dJ({themeId:qS,defaultTheme:Zme,defaultClassName:Yme.root,generateClassName:Mq.generate});function Xme(e){return Rr("MuiLink",e)}const Qme=Ar("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Jme=({theme:e,ownerState:t})=>{const n=t.color,r=dx(e,`palette.${n}`,!1)||t.color,o=dx(e,`palette.${n}Channel`);return"vars"in e&&o?`rgba(${o} / 0.4)`:jr(r,.4)},G$={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},ege=e=>{const{classes:t,component:n,focusVisible:r,underline:o}=e,i={root:["root",`underline${tn(o)}`,n==="button"&&"button",r&&"focusVisible"]};return An(i,Xme,t)},tge=sn(bf,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${tn(n.underline)}`],n.component==="button"&&t.button]}})(mr(({theme:e})=>({variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:({underline:t,ownerState:n})=>t==="always"&&n.color!=="inherit",style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(e.palette).filter(Ia()).map(([t])=>({props:{underline:"always",color:t},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette[t].mainChannel} / 0.4)`:jr(e.palette[t].main,.4)}})),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:jr(e.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":e.vars?`rgba(${e.vars.palette.text.secondaryChannel} / 0.4)`:jr(e.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(e.vars||e).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Qme.focusVisible}`]:{outline:"auto"}}}]}))),sR=A.forwardRef(function(t,n){const r=Kr({props:t,name:"MuiLink"}),o=XS(),{className:i,color:l="primary",component:c="a",onBlur:f,onFocus:p,TypographyClasses:g,underline:v="always",variant:w="inherit",sx:C,...T}=r,[k,P]=A.useState(!1),O=F=>{fx(F.target)||P(!1),f&&f(F)},L=F=>{fx(F.target)&&P(!0),p&&p(F)},D={...r,color:l,component:c,focusVisible:k,underline:v,variant:w},N=ege(D);return ie.jsx(tge,{color:l,className:fn(N.root,i),classes:g,component:c,onBlur:O,onFocus:L,ref:n,ownerState:D,variant:w,...T,sx:[...G$[l]===void 0?[{color:l}]:[],...Array.isArray(C)?C:[C]],style:{...T.style,...v==="always"&&l!=="inherit"&&!G$[l]&&{"--Link-underlineColor":Jme({theme:o,ownerState:D})}}})});function gl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nge=typeof Symbol=="function"&&Symbol.observable||"@@observable",W$=nge,lR=()=>Math.random().toString(36).substring(7).split("").join("."),rge={INIT:`@@redux/INIT${lR()}`,REPLACE:`@@redux/REPLACE${lR()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${lR()}`},yk=rge;function Bf(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function s9(e,t,n){if(typeof e!="function")throw new Error(gl(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gl(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gl(1));return n(s9)(e,t)}let r=e,o=t,i=new Map,l=i,c=0,f=!1;function p(){l===i&&(l=new Map,i.forEach((P,O)=>{l.set(O,P)}))}function g(){if(f)throw new Error(gl(3));return o}function v(P){if(typeof P!="function")throw new Error(gl(4));if(f)throw new Error(gl(5));let O=!0;p();const L=c++;return l.set(L,P),function(){if(O){if(f)throw new Error(gl(6));O=!1,p(),l.delete(L),i=null}}}function w(P){if(!Bf(P))throw new Error(gl(7));if(typeof P.type>"u")throw new Error(gl(8));if(typeof P.type!="string")throw new Error(gl(17));if(f)throw new Error(gl(9));try{f=!0,o=r(o,P)}finally{f=!1}return(i=l).forEach(L=>{L()}),P}function C(P){if(typeof P!="function")throw new Error(gl(10));r=P,w({type:yk.REPLACE})}function T(){const P=v;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(gl(11));function L(){const N=O;N.next&&N.next(g())}return L(),{unsubscribe:P(L)}},[W$](){return this}}}return w({type:yk.INIT}),{dispatch:w,subscribe:v,getState:g,replaceReducer:C,[W$]:T}}function oge(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:yk.INIT})>"u")throw new Error(gl(12));if(typeof n(void 0,{type:yk.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gl(13))})}function l9(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(n[l]=e[l])}const r=Object.keys(n);let o;try{oge(n)}catch(i){o=i}return function(l={},c){if(o)throw o;let f=!1;const p={};for(let g=0;g<r.length;g++){const v=r[g],w=n[v],C=l[v],T=w(C,c);if(typeof T>"u")throw c&&c.type,new Error(gl(14));p[v]=T,f=f||T!==C}return f=f||r.length!==Object.keys(l).length,f?p:l}}function vk(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ige(...e){return t=>(n,r)=>{const o=t(n,r);let i=()=>{throw new Error(gl(15))};const l={getState:o.getState,dispatch:(f,...p)=>i(f,...p)},c=e.map(f=>f(l));return i=vk(...c)(o.dispatch),{...o,dispatch:i}}}function u9(e){return Bf(e)&&"type"in e&&typeof e.type=="string"}var tz=Symbol.for("immer-nothing"),k1=Symbol.for("immer-draftable"),sc=Symbol.for("immer-state");function xl(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var c_=Object.getPrototypeOf;function Uf(e){return!!e&&!!e[sc]}function Ah(e){var t;return e?c9(e)||Array.isArray(e)||!!e[k1]||!!((t=e.constructor)!=null&&t[k1])||rE(e)||oE(e):!1}var age=Object.prototype.constructor.toString();function c9(e){if(!e||typeof e!="object")return!1;const t=c_(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===age}function sge(e){return Uf(e)||xl(15,e),e[sc].base_}function hS(e,t){d_(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function d_(e){const t=e[sc];return t?t.type_:Array.isArray(e)?1:rE(e)?2:oE(e)?3:0}function fS(e,t){return d_(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uR(e,t){return d_(e)===2?e.get(t):e[t]}function d9(e,t,n){const r=d_(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function lge(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function rE(e){return e instanceof Map}function oE(e){return e instanceof Set}function yv(e){return e.copy_||e.base_}function QD(e,t){if(rE(e))return new Map(e);if(oE(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=c9(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[sc];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const l=o[i],c=r[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[l]})}return Object.create(c_(e),r)}else{const r=c_(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function nz(e,t=!1){return kA(e)||Uf(e)||!Ah(e)||(d_(e)>1&&(e.set=e.add=e.clear=e.delete=uge),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>nz(r,!0))),e}function uge(){xl(2)}function kA(e){return Object.isFrozen(e)}var JD={};function h_(e){const t=JD[e];return t||xl(0,e),t}function cge(e,t){JD[e]||(JD[e]=t)}var pS;function h9(){return pS}function dge(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function K$(e,t){t&&(h_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eL(e){tL(e),e.drafts_.forEach(hge),e.drafts_=null}function tL(e){e===pS&&(pS=e.parent_)}function Y$(e){return pS=dge(pS,e)}function hge(e){const t=e[sc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Z$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[sc].modified_&&(eL(t),xl(4)),Ah(e)&&(e=_k(t,e),t.parent_||bk(t,e)),t.patches_&&h_("Patches").generateReplacementPatches_(n[sc].base_,e,t.patches_,t.inversePatches_)):e=_k(t,n,[]),eL(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tz?e:void 0}function _k(e,t,n){if(kA(t))return t;const r=t[sc];if(!r)return hS(t,(o,i)=>X$(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return bk(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,l=!1;r.type_===3&&(i=new Set(o),o.clear(),l=!0),hS(i,(c,f)=>X$(e,r,o,c,f,n,l)),bk(e,o,!1),n&&e.patches_&&h_("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function X$(e,t,n,r,o,i,l){if(Uf(o)){const c=i&&t&&t.type_!==3&&!fS(t.assigned_,r)?i.concat(r):void 0,f=_k(e,o,c);if(d9(n,r,f),Uf(f))e.canAutoFreeze_=!1;else return}else l&&n.add(o);if(Ah(o)&&!kA(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;_k(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&bk(e,o)}}function bk(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nz(t,n)}function fge(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:h9(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=rz;n&&(o=[r],i=mS);const{revoke:l,proxy:c}=Proxy.revocable(o,i);return r.draft_=c,r.revoke_=l,c}var rz={get(e,t){if(t===sc)return e;const n=yv(e);if(!fS(n,t))return pge(e,n,t);const r=n[t];return e.finalized_||!Ah(r)?r:r===cR(e.base_,t)?(dR(e),e.copy_[t]=rL(r,e)):r},has(e,t){return t in yv(e)},ownKeys(e){return Reflect.ownKeys(yv(e))},set(e,t,n){const r=f9(yv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=cR(yv(e),t),i=o==null?void 0:o[sc];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(lge(n,o)&&(n!==void 0||fS(e.base_,t)))return!0;dR(e),nL(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return cR(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,dR(e),nL(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=yv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){xl(11)},getPrototypeOf(e){return c_(e.base_)},setPrototypeOf(){xl(12)}},mS={};hS(rz,(e,t)=>{mS[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});mS.deleteProperty=function(e,t){return mS.set.call(this,e,t,void 0)};mS.set=function(e,t,n){return rz.set.call(this,e[0],t,n,e[0])};function cR(e,t){const n=e[sc];return(n?yv(n):e)[t]}function pge(e,t,n){var o;const r=f9(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function f9(e,t){if(!(t in e))return;let n=c_(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=c_(n)}}function nL(e){e.modified_||(e.modified_=!0,e.parent_&&nL(e.parent_))}function dR(e){e.copy_||(e.copy_=QD(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mge=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const l=this;return function(f=i,...p){return l.produce(f,g=>n.call(this,g,...p))}}typeof n!="function"&&xl(6),r!==void 0&&typeof r!="function"&&xl(7);let o;if(Ah(t)){const i=Y$(this),l=rL(t,void 0);let c=!0;try{o=n(l),c=!1}finally{c?eL(i):tL(i)}return K$(i,r),Z$(o,i)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===tz&&(o=void 0),this.autoFreeze_&&nz(o,!0),r){const i=[],l=[];h_("Patches").generateReplacementPatches_(t,o,i,l),r(i,l)}return o}else xl(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...c)=>this.produceWithPatches(l,f=>t(f,...c));let r,o;return[this.produce(t,n,(l,c)=>{r=l,o=c}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ah(e)||xl(8),Uf(e)&&(e=gge(e));const t=Y$(this),n=rL(e,void 0);return n[sc].isManual_=!0,tL(t),n}finishDraft(e,t){const n=e&&e[sc];(!n||!n.isManual_)&&xl(9);const{scope_:r}=n;return K$(r,t),Z$(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=h_("Patches").applyPatches_;return Uf(e)?r(e,t):this.produce(e,o=>r(o,t))}};function rL(e,t){const n=rE(e)?h_("MapSet").proxyMap_(e,t):oE(e)?h_("MapSet").proxySet_(e,t):fge(e,t);return(t?t.scope_:h9()).drafts_.push(n),n}function gge(e){return Uf(e)||xl(10,e),p9(e)}function p9(e){if(!Ah(e)||kA(e))return e;const t=e[sc];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=QD(e,t.scope_.immer_.useStrictShallowCopy_)}else n=QD(e,!0);return hS(n,(r,o)=>{d9(n,r,p9(o))}),t&&(t.finalized_=!1),n}function yge(){const t="replace",n="add",r="remove";function o(w,C,T,k){switch(w.type_){case 0:case 2:return l(w,C,T,k);case 1:return i(w,C,T,k);case 3:return c(w,C,T,k)}}function i(w,C,T,k){let{base_:P,assigned_:O}=w,L=w.copy_;L.length<P.length&&([P,L]=[L,P],[T,k]=[k,T]);for(let D=0;D<P.length;D++)if(O[D]&&L[D]!==P[D]){const N=C.concat([D]);T.push({op:t,path:N,value:v(L[D])}),k.push({op:t,path:N,value:v(P[D])})}for(let D=P.length;D<L.length;D++){const N=C.concat([D]);T.push({op:n,path:N,value:v(L[D])})}for(let D=L.length-1;P.length<=D;--D){const N=C.concat([D]);k.push({op:r,path:N})}}function l(w,C,T,k){const{base_:P,copy_:O}=w;hS(w.assigned_,(L,D)=>{const N=uR(P,L),F=uR(O,L),B=D?fS(P,L)?t:n:r;if(N===F&&B===t)return;const V=C.concat(L);T.push(B===r?{op:B,path:V}:{op:B,path:V,value:F}),k.push(B===n?{op:r,path:V}:B===r?{op:n,path:V,value:v(N)}:{op:t,path:V,value:v(N)})})}function c(w,C,T,k){let{base_:P,copy_:O}=w,L=0;P.forEach(D=>{if(!O.has(D)){const N=C.concat([L]);T.push({op:r,path:N,value:D}),k.unshift({op:n,path:N,value:D})}L++}),L=0,O.forEach(D=>{if(!P.has(D)){const N=C.concat([L]);T.push({op:n,path:N,value:D}),k.unshift({op:r,path:N,value:D})}L++})}function f(w,C,T,k){T.push({op:t,path:[],value:C===tz?void 0:C}),k.push({op:t,path:[],value:w})}function p(w,C){return C.forEach(T=>{const{path:k,op:P}=T;let O=w;for(let F=0;F<k.length-1;F++){const B=d_(O);let V=k[F];typeof V!="string"&&typeof V!="number"&&(V=""+V),(B===0||B===1)&&(V==="__proto__"||V==="constructor")&&xl(19),typeof O=="function"&&V==="prototype"&&xl(19),O=uR(O,V),typeof O!="object"&&xl(18,k.join("/"))}const L=d_(O),D=g(T.value),N=k[k.length-1];switch(P){case t:switch(L){case 2:return O.set(N,D);case 3:xl(16);default:return O[N]=D}case n:switch(L){case 1:return N==="-"?O.push(D):O.splice(N,0,D);case 2:return O.set(N,D);case 3:return O.add(D);default:return O[N]=D}case r:switch(L){case 1:return O.splice(N,1);case 2:return O.delete(N);case 3:return O.delete(T.value);default:return delete O[N]}default:xl(17,P)}}),w}function g(w){if(!Ah(w))return w;if(Array.isArray(w))return w.map(g);if(rE(w))return new Map(Array.from(w.entries()).map(([T,k])=>[T,g(k)]));if(oE(w))return new Set(Array.from(w).map(g));const C=Object.create(c_(w));for(const T in w)C[T]=g(w[T]);return fS(w,k1)&&(C[k1]=w[k1]),C}function v(w){return Uf(w)?g(w):w}cge("Patches",{applyPatches_:p,generatePatches_:o,generateReplacementPatches_:f})}var Kc=new mge,iE=Kc.produce,m9=Kc.produceWithPatches.bind(Kc);Kc.setAutoFreeze.bind(Kc);Kc.setUseStrictShallowCopy.bind(Kc);var Q$=Kc.applyPatches.bind(Kc);Kc.createDraft.bind(Kc);Kc.finishDraft.bind(Kc);function g9(e){return({dispatch:n,getState:r})=>o=>i=>typeof i=="function"?i(n,r,e):o(i)}var vge=g9(),_ge=g9,bge=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vk:vk.apply(null,arguments)},wge=e=>e&&typeof e.match=="function";function Eh(e,t){function n(...r){if(t){let o=t(...r);if(!o)throw new Error(Th(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>u9(r)&&r.type===e,n}var y9=class l1 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,l1.prototype)}static get[Symbol.species](){return l1}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new l1(...t[0].concat(this)):new l1(...t.concat(this))}};function J$(e){return Ah(e)?iE(e,()=>{}):e}function eH(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function xge(e){return typeof e=="boolean"}var Cge=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:o=!0,actionCreatorCheck:i=!0}=t??{};let l=new y9;return n&&(xge(n)?l.push(vge):l.push(_ge(n.extraArgument))),l},Dv="RTK_autoBatch",fC=()=>e=>({payload:e,meta:{[Dv]:!0}}),tH=e=>t=>{setTimeout(t,e)},Sge=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let o=!0,i=!1,l=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:tH(10):e.type==="callback"?e.queueNotification:tH(e.timeout),p=()=>{l=!1,i&&(i=!1,c.forEach(g=>g()))};return Object.assign({},r,{subscribe(g){const v=()=>o&&g(),w=r.subscribe(v);return c.add(g),()=>{w(),c.delete(g)}},dispatch(g){var v;try{return o=!((v=g==null?void 0:g.meta)!=null&&v[Dv]),i=!o,i&&(l||(l=!0,f(p))),r.dispatch(g)}finally{o=!0}}})},Ege=e=>function(n){const{autoBatch:r=!0}=n??{};let o=new y9(e);return r&&o.push(Sge(typeof r=="object"?r:void 0)),o};function Tge(e){const t=Cge(),{reducer:n=void 0,middleware:r,devTools:o=!0,preloadedState:i=void 0,enhancers:l=void 0}=e;let c;if(typeof n=="function")c=n;else if(Bf(n))c=l9(n);else throw new Error(Th(1));let f;typeof r=="function"?f=r(t):f=t();let p=vk;o&&(p=bge({trace:!1,...typeof o=="object"&&o}));const g=ige(...f),v=Ege(g);let w=typeof l=="function"?l(v):v();const C=p(...w);return s9(c,i,C)}function v9(e){const t={},n=[];let r;const o={addCase(i,l){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(Th(28));if(c in t)throw new Error(Th(29));return t[c]=l,o},addMatcher(i,l){return n.push({matcher:i,reducer:l}),o},addDefaultCase(i){return r=i,o}};return e(o),[t,n,r]}function Ige(e){return typeof e=="function"}function kge(e,t){let[n,r,o]=v9(t),i;if(Ige(e))i=()=>J$(e());else{const c=J$(e);i=()=>c}function l(c=i(),f){let p=[n[f.type],...r.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return p.filter(g=>!!g).length===0&&(p=[o]),p.reduce((g,v)=>{if(v)if(Uf(g)){const C=v(g,f);return C===void 0?g:C}else{if(Ah(g))return iE(g,w=>v(w,f));{const w=v(g,f);if(w===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return w}}return g},c)}return l.getInitialState=i,l}var _9=(e,t)=>wge(e)?e.match(t):e(t);function lm(...e){return t=>e.some(n=>_9(n,t))}function P1(...e){return t=>e.every(n=>_9(n,t))}function PA(e,t){if(!e||!e.meta)return!1;const n=typeof e.meta.requestId=="string",r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function aE(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function oz(...e){return e.length===0?t=>PA(t,["pending"]):aE(e)?lm(...e.map(t=>t.pending)):oz()(e[0])}function xx(...e){return e.length===0?t=>PA(t,["rejected"]):aE(e)?lm(...e.map(t=>t.rejected)):xx()(e[0])}function AA(...e){const t=n=>n&&n.meta&&n.meta.rejectedWithValue;return e.length===0?P1(xx(...e),t):aE(e)?P1(xx(...e),t):AA()(e[0])}function ny(...e){return e.length===0?t=>PA(t,["fulfilled"]):aE(e)?lm(...e.map(t=>t.fulfilled)):ny()(e[0])}function oL(...e){return e.length===0?t=>PA(t,["pending","fulfilled","rejected"]):aE(e)?lm(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):oL()(e[0])}var Pge="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",iz=(e=21)=>{let t="",n=e;for(;n--;)t+=Pge[Math.random()*64|0];return t},Age=["name","message","stack","code"],hR=class{constructor(e,t){nv(this,"_type");this.payload=e,this.meta=t}},nH=class{constructor(e,t){nv(this,"_type");this.payload=e,this.meta=t}},Mge=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Age)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},rH=(()=>{function e(t,n,r){const o=Eh(t+"/fulfilled",(f,p,g,v)=>({payload:f,meta:{...v||{},arg:g,requestId:p,requestStatus:"fulfilled"}})),i=Eh(t+"/pending",(f,p,g)=>({payload:void 0,meta:{...g||{},arg:p,requestId:f,requestStatus:"pending"}})),l=Eh(t+"/rejected",(f,p,g,v,w)=>({payload:v,error:(r&&r.serializeError||Mge)(f||"Rejected"),meta:{...w||{},arg:g,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(f==null?void 0:f.name)==="AbortError",condition:(f==null?void 0:f.name)==="ConditionError"}}));function c(f){return(p,g,v)=>{const w=r!=null&&r.idGenerator?r.idGenerator(f):iz(),C=new AbortController;let T,k;function P(L){k=L,C.abort()}const O=async function(){var N,F;let L;try{let B=(N=r==null?void 0:r.condition)==null?void 0:N.call(r,f,{getState:g,extra:v});if(Oge(B)&&(B=await B),B===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const V=new Promise((G,q)=>{T=()=>{q({name:"AbortError",message:k||"Aborted"})},C.signal.addEventListener("abort",T)});p(i(w,f,(F=r==null?void 0:r.getPendingMeta)==null?void 0:F.call(r,{requestId:w,arg:f},{getState:g,extra:v}))),L=await Promise.race([V,Promise.resolve(n(f,{dispatch:p,getState:g,extra:v,requestId:w,signal:C.signal,abort:P,rejectWithValue:(G,q)=>new hR(G,q),fulfillWithValue:(G,q)=>new nH(G,q)})).then(G=>{if(G instanceof hR)throw G;return G instanceof nH?o(G.payload,w,f,G.meta):o(G,w,f)})])}catch(B){L=B instanceof hR?l(null,w,f,B.payload,B.meta):l(B,w,f)}finally{T&&C.signal.removeEventListener("abort",T)}return r&&!r.dispatchConditionRejection&&l.match(L)&&L.meta.condition||p(L),L}();return Object.assign(O,{abort:P,requestId:w,arg:f,unwrap(){return O.then(Rge)}})}}return Object.assign(c,{pending:i,rejected:l,fulfilled:o,settled:lm(l,o),typePrefix:t})}return e.withTypes=()=>e,e})();function Rge(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Oge(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Dge=Symbol.for("rtk-slice-createasyncthunk");function Lge(e,t){return`${e}/${t}`}function Nge({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Dge];return function(o){const{name:i,reducerPath:l=i}=o;if(!i)throw new Error(Th(11));const c=(typeof o.reducers=="function"?o.reducers(zge()):o.reducers)||{},f=Object.keys(c),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},g={addCase(D,N){const F=typeof D=="string"?D:D.type;if(!F)throw new Error(Th(12));if(F in p.sliceCaseReducersByType)throw new Error(Th(13));return p.sliceCaseReducersByType[F]=N,g},addMatcher(D,N){return p.sliceMatchers.push({matcher:D,reducer:N}),g},exposeAction(D,N){return p.actionCreators[D]=N,g},exposeCaseReducer(D,N){return p.sliceCaseReducersByName[D]=N,g}};f.forEach(D=>{const N=c[D],F={reducerName:D,type:Lge(i,D),createNotation:typeof o.reducers=="function"};Uge(N)?$ge(F,N,g,t):Bge(F,N,g)});function v(){const[D={},N=[],F=void 0]=typeof o.extraReducers=="function"?v9(o.extraReducers):[o.extraReducers],B={...D,...p.sliceCaseReducersByType};return kge(o.initialState,V=>{for(let G in B)V.addCase(G,B[G]);for(let G of p.sliceMatchers)V.addMatcher(G.matcher,G.reducer);for(let G of N)V.addMatcher(G.matcher,G.reducer);F&&V.addDefaultCase(F)})}const w=D=>D,C=new Map;let T;function k(D,N){return T||(T=v()),T(D,N)}function P(){return T||(T=v()),T.getInitialState()}function O(D,N=!1){function F(V){let G=V[D];return typeof G>"u"&&N&&(G=P()),G}function B(V=w){const G=eH(C,N,()=>new WeakMap);return eH(G,V,()=>{const q={};for(const[z,$]of Object.entries(o.selectors??{}))q[z]=Fge($,V,P,N);return q})}return{reducerPath:D,getSelectors:B,get selectors(){return B(F)},selectSlice:F}}const L={name:i,reducer:k,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:P,...O(l),injectInto(D,{reducerPath:N,...F}={}){const B=N??l;return D.inject({reducerPath:B,reducer:k},F),{...L,...O(B,!0)}}};return L}}function Fge(e,t,n,r){function o(i,...l){let c=t(i);return typeof c>"u"&&r&&(c=n()),e(c,...l)}return o.unwrapped=e,o}var Bb=Nge();function zge(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Bge({type:e,reducerName:t,createNotation:n},r,o){let i,l;if("reducer"in r){if(n&&!jge(r))throw new Error(Th(17));i=r.reducer,l=r.prepare}else i=r;o.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Eh(e,l):Eh(e))}function Uge(e){return e._reducerDefinitionType==="asyncThunk"}function jge(e){return e._reducerDefinitionType==="reducerWithPrepare"}function $ge({type:e,reducerName:t},n,r,o){if(!o)throw new Error(Th(18));const{payloadCreator:i,fulfilled:l,pending:c,rejected:f,settled:p,options:g}=n,v=o(e,i,g);r.exposeAction(t,v),l&&r.addCase(v.fulfilled,l),c&&r.addCase(v.pending,c),f&&r.addCase(v.rejected,f),p&&r.addMatcher(v.settled,p),r.exposeCaseReducer(t,{fulfilled:l||vT,pending:c||vT,rejected:f||vT,settled:p||vT})}function vT(){}function Th(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b9=(e=>(e.uninitialized="uninitialized",e.pending="pending",e.fulfilled="fulfilled",e.rejected="rejected",e))(b9||{});function Hge(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var oH=Bf;function w9(e,t){if(e===t||!(oH(e)&&oH(t)||Array.isArray(e)&&Array.isArray(t)))return t;const n=Object.keys(t),r=Object.keys(e);let o=n.length===r.length;const i=Array.isArray(t)?[]:{};for(const l of n)i[l]=w9(e[l],t[l]),o&&(o=e[l]===i[l]);return o?e:i}function Ww(e){let t=0;for(const n in e)t++;return t}var iH=e=>[].concat(...e);function Vge(e){return new RegExp("(^|:)//").test(e)}function qge(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function wk(e){return e!=null}function Gge(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var Wge=e=>e.replace(/\/$/,""),Kge=e=>e.replace(/^\//,"");function Yge(e,t){if(!e)return t;if(!t)return e;if(Vge(t))return t;const n=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=Wge(e),t=Kge(t),`${e}${n}${t}`}function Zge(e,t,n){return e.has(t)?e.get(t):e.set(t,n).get(t)}var aH=(...e)=>fetch(...e),Xge=e=>e.status>=200&&e.status<=299,Qge=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function sH(e){if(!Bf(e))return e;const t={...e};for(const[n,r]of Object.entries(t))r===void 0&&delete t[n];return t}function az({baseUrl:e,prepareHeaders:t=v=>v,fetchFn:n=aH,paramsSerializer:r,isJsonContentType:o=Qge,jsonContentType:i="application/json",jsonReplacer:l,timeout:c,responseHandler:f,validateStatus:p,...g}={}){return typeof fetch>"u"&&n===aH&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(w,C,T)=>{const{getState:k,extra:P,endpoint:O,forced:L,type:D}=C;let N,{url:F,headers:B=new Headers(g.headers),params:V=void 0,responseHandler:G=f??"json",validateStatus:q=p??Xge,timeout:z=c,...$}=typeof w=="string"?{url:w}:w,K,te=C.signal;z&&(K=new AbortController,C.signal.addEventListener("abort",K.abort),te=K.signal);let re={...g,signal:te,...$};B=new Headers(sH(B)),re.headers=await t(B,{getState:k,arg:w,extra:P,endpoint:O,forced:L,type:D,extraOptions:T})||B;const oe=Be=>typeof Be=="object"&&(Bf(Be)||Array.isArray(Be)||typeof Be.toJSON=="function");if(!re.headers.has("content-type")&&oe(re.body)&&re.headers.set("content-type",i),oe(re.body)&&o(re.headers)&&(re.body=JSON.stringify(re.body,l)),V){const Be=~F.indexOf("?")?"&":"?",Ze=r?r(V):new URLSearchParams(sH(V));F+=Be+Ze}F=Yge(e,F);const ue=new Request(F,re);N={request:new Request(F,re)};let ce,ae=!1,fe=K&&setTimeout(()=>{ae=!0,K.abort()},z);try{ce=await n(ue)}catch(Be){return{error:{status:ae?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(Be)},meta:N}}finally{fe&&clearTimeout(fe),K==null||K.signal.removeEventListener("abort",K.abort)}const le=ce.clone();N.response=le;let pe,Fe="";try{let Be;if(await Promise.all([v(ce,G).then(Ze=>pe=Ze,Ze=>Be=Ze),le.text().then(Ze=>Fe=Ze,()=>{})]),Be)throw Be}catch(Be){return{error:{status:"PARSING_ERROR",originalStatus:ce.status,data:Fe,error:String(Be)},meta:N}}return q(ce,pe)?{data:pe,meta:N}:{error:{status:ce.status,data:pe},meta:N}};async function v(w,C){if(typeof C=="function")return C(w);if(C==="content-type"&&(C=o(w.headers)?"json":"text"),C==="json"){const T=await w.text();return T.length?JSON.parse(T):null}return w.text()}}var lH=class{constructor(e,t=void 0){this.value=e,this.meta=t}},sz=Eh("__rtkq/focused"),x9=Eh("__rtkq/unfocused"),lz=Eh("__rtkq/online"),C9=Eh("__rtkq/offline");function S9(e){return e.type==="query"}function Jge(e){return e.type==="mutation"}function uz(e,t,n,r,o,i){return eye(e)?e(t,n,r,o).filter(wk).map(iL).map(i):Array.isArray(e)?e.map(iL).map(i):[]}function eye(e){return typeof e=="function"}function iL(e){return typeof e=="string"?{type:e}:e}function tye(e,t){return e.catch(t)}var gS=Symbol("forceQueryFn"),aL=e=>typeof e[gS]=="function";function nye({serializeQueryArgs:e,queryThunk:t,mutationThunk:n,api:r,context:o}){const i=new Map,l=new Map,{unsubscribeQueryResult:c,removeMutationResult:f,updateSubscriptionOptions:p}=r.internalActions;return{buildInitiateQuery:T,buildInitiateMutation:k,getRunningQueryThunk:g,getRunningMutationThunk:v,getRunningQueriesThunk:w,getRunningMutationsThunk:C};function g(P,O){return L=>{var F;const D=o.endpointDefinitions[P],N=e({queryArgs:O,endpointDefinition:D,endpointName:P});return(F=i.get(L))==null?void 0:F[N]}}function v(P,O){return L=>{var D;return(D=l.get(L))==null?void 0:D[O]}}function w(){return P=>Object.values(i.get(P)||{}).filter(wk)}function C(){return P=>Object.values(l.get(P)||{}).filter(wk)}function T(P,O){const L=(D,{subscribe:N=!0,forceRefetch:F,subscriptionOptions:B,[gS]:V,...G}={})=>(q,z)=>{var pe;const $=e({queryArgs:D,endpointDefinition:O,endpointName:P}),K=t({...G,type:"query",subscribe:N,forceRefetch:F,subscriptionOptions:B,endpointName:P,originalArgs:D,queryCacheKey:$,[gS]:V}),te=r.endpoints[P].select(D),re=q(K),oe=te(z()),{requestId:ue,abort:Q}=re,ce=oe.requestId!==ue,ae=(pe=i.get(q))==null?void 0:pe[$],fe=()=>te(z()),le=Object.assign(V?re.then(fe):ce&&!ae?Promise.resolve(oe):Promise.all([ae,re]).then(fe),{arg:D,requestId:ue,subscriptionOptions:B,queryCacheKey:$,abort:Q,async unwrap(){const Fe=await le;if(Fe.isError)throw Fe.error;return Fe.data},refetch:()=>q(L(D,{subscribe:!1,forceRefetch:!0})),unsubscribe(){N&&q(c({queryCacheKey:$,requestId:ue}))},updateSubscriptionOptions(Fe){le.subscriptionOptions=Fe,q(p({endpointName:P,requestId:ue,queryCacheKey:$,options:Fe}))}});if(!ae&&!ce&&!V){const Fe=Zge(i,q,{});Fe[$]=le,le.then(()=>{delete Fe[$],Ww(Fe)||i.delete(q)})}return le};return L}function k(P){return(O,{track:L=!0,fixedCacheKey:D}={})=>(N,F)=>{const B=n({type:"mutation",endpointName:P,originalArgs:O,track:L,fixedCacheKey:D}),V=N(B),{requestId:G,abort:q,unwrap:z}=V,$=tye(V.unwrap().then(oe=>({data:oe})),oe=>({error:oe})),K=()=>{N(f({requestId:G,fixedCacheKey:D}))},te=Object.assign($,{arg:V.arg,requestId:G,abort:q,unwrap:z,reset:K}),re=l.get(N)||{};return l.set(N,re),re[G]=te,te.then(()=>{delete re[G],Ww(re)||l.delete(N)}),D&&(re[D]=te,te.then(()=>{re[D]===te&&(delete re[D],Ww(re)||l.delete(N))})),te}}}function uH(e){return e}function rye({reducerPath:e,baseQuery:t,context:{endpointDefinitions:n},serializeQueryArgs:r,api:o,assertTagType:i}){const l=(L,D,N,F)=>(B,V)=>{const G=n[L],q=r({queryArgs:D,endpointDefinition:G,endpointName:L});if(B(o.internalActions.queryResultPatched({queryCacheKey:q,patches:N})),!F)return;const z=o.endpoints[L].select(D)(V()),$=uz(G.providesTags,z.data,void 0,D,{},i);B(o.internalActions.updateProvidedBy({queryCacheKey:q,providedTags:$}))},c=(L,D,N,F=!0)=>(B,V)=>{const q=o.endpoints[L].select(D)(V()),z={patches:[],inversePatches:[],undo:()=>B(o.util.patchQueryData(L,D,z.inversePatches,F))};if(q.status==="uninitialized")return z;let $;if("data"in q)if(Ah(q.data)){const[K,te,re]=m9(q.data,N);z.patches.push(...te),z.inversePatches.push(...re),$=K}else $=N(q.data),z.patches.push({op:"replace",path:[],value:$}),z.inversePatches.push({op:"replace",path:[],value:q.data});return z.patches.length===0||B(o.util.patchQueryData(L,D,z.patches,F)),z},f=(L,D,N)=>F=>F(o.endpoints[L].initiate(D,{subscribe:!1,forceRefetch:!0,[gS]:()=>({data:N})})),p=async(L,{signal:D,abort:N,rejectWithValue:F,fulfillWithValue:B,dispatch:V,getState:G,extra:q})=>{const z=n[L.endpointName];try{let $=uH,K;const te={signal:D,abort:N,dispatch:V,getState:G,extra:q,endpoint:L.endpointName,type:L.type,forced:L.type==="query"?g(L,G()):void 0,queryCacheKey:L.type==="query"?L.queryCacheKey:void 0},re=L.type==="query"?L[gS]:void 0;if(re?K=re():z.query?(K=await t(z.query(L.originalArgs),te,z.extraOptions),z.transformResponse&&($=z.transformResponse)):K=await z.queryFn(L.originalArgs,te,z.extraOptions,oe=>t(oe,te,z.extraOptions)),typeof process<"u",K.error)throw new lH(K.error,K.meta);return B(await $(K.data,K.meta,L.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:K.meta,[Dv]:!0})}catch($){let K=$;if(K instanceof lH){let te=uH;z.query&&z.transformErrorResponse&&(te=z.transformErrorResponse);try{return F(await te(K.value,K.meta,L.originalArgs),{baseQueryMeta:K.meta,[Dv]:!0})}catch(re){K=re}}throw console.error(K),K}};function g(L,D){var G,q,z;const N=(q=(G=D[e])==null?void 0:G.queries)==null?void 0:q[L.queryCacheKey],F=(z=D[e])==null?void 0:z.config.refetchOnMountOrArgChange,B=N==null?void 0:N.fulfilledTimeStamp,V=L.forceRefetch??(L.subscribe&&F);return V?V===!0||(Number(new Date)-Number(B))/1e3>=V:!1}const v=rH(`${e}/executeQuery`,p,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Dv]:!0}},condition(L,{getState:D}){var z,$,K;const N=D(),F=($=(z=N[e])==null?void 0:z.queries)==null?void 0:$[L.queryCacheKey],B=F==null?void 0:F.fulfilledTimeStamp,V=L.originalArgs,G=F==null?void 0:F.originalArgs,q=n[L.endpointName];return aL(L)?!0:(F==null?void 0:F.status)==="pending"?!1:g(L,N)||S9(q)&&((K=q==null?void 0:q.forceRefetch)!=null&&K.call(q,{currentArg:V,previousArg:G,endpointState:F,state:N}))?!0:!B},dispatchConditionRejection:!0}),w=rH(`${e}/executeMutation`,p,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Dv]:!0}}}),C=L=>"force"in L,T=L=>"ifOlderThan"in L,k=(L,D,N)=>(F,B)=>{const V=C(N)&&N.force,G=T(N)&&N.ifOlderThan,q=($=!0)=>{const K={forceRefetch:$,isPrefetch:!0};return o.endpoints[L].initiate(D,K)},z=o.endpoints[L].select(D)(B());if(V)F(q());else if(G){const $=z==null?void 0:z.fulfilledTimeStamp;if(!$){F(q());return}(Number(new Date)-Number(new Date($)))/1e3>=G&&F(q())}else F(q(!1))};function P(L){return D=>{var N,F;return((F=(N=D==null?void 0:D.meta)==null?void 0:N.arg)==null?void 0:F.endpointName)===L}}function O(L,D){return{matchPending:P1(oz(L),P(D)),matchFulfilled:P1(ny(L),P(D)),matchRejected:P1(xx(L),P(D))}}return{queryThunk:v,mutationThunk:w,prefetch:k,updateQueryData:c,upsertQueryData:f,patchQueryData:l,buildMatchThunkActions:O}}function E9(e,t,n,r){return uz(n[e.meta.arg.endpointName][t],ny(e)?e.payload:void 0,AA(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,r)}function _T(e,t,n){const r=e[t];r&&n(r)}function yS(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function cH(e,t,n){const r=e[yS(t)];r&&n(r)}var pC={};function oye({reducerPath:e,queryThunk:t,mutationThunk:n,serializeQueryArgs:r,context:{endpointDefinitions:o,apiUid:i,extractRehydrationInfo:l,hasRehydrationInfo:c},assertTagType:f,config:p}){const g=Eh(`${e}/resetApiState`);function v(B,V,G,q){var z;B[z=V.queryCacheKey]??(B[z]={status:"uninitialized",endpointName:V.endpointName}),_T(B,V.queryCacheKey,$=>{$.status="pending",$.requestId=G&&$.requestId?$.requestId:q.requestId,V.originalArgs!==void 0&&($.originalArgs=V.originalArgs),$.startedTimeStamp=q.startedTimeStamp})}function w(B,V,G){_T(B,V.arg.queryCacheKey,q=>{if(q.requestId!==V.requestId&&!aL(V.arg))return;const{merge:z}=o[V.arg.endpointName];if(q.status="fulfilled",z)if(q.data!==void 0){const{fulfilledTimeStamp:$,arg:K,baseQueryMeta:te,requestId:re}=V;let oe=iE(q.data,ue=>z(ue,G,{arg:K.originalArgs,baseQueryMeta:te,fulfilledTimeStamp:$,requestId:re}));q.data=oe}else q.data=G;else q.data=o[V.arg.endpointName].structuralSharing??!0?w9(Uf(q.data)?sge(q.data):q.data,G):G;delete q.error,q.fulfilledTimeStamp=V.fulfilledTimeStamp})}const C=Bb({name:`${e}/queries`,initialState:pC,reducers:{removeQueryResult:{reducer(B,{payload:{queryCacheKey:V}}){delete B[V]},prepare:fC()},cacheEntriesUpserted:{reducer(B,V){for(const G of V.payload){const{queryDescription:q,value:z}=G;v(B,q,!0,{arg:q,requestId:V.meta.requestId,startedTimeStamp:V.meta.timestamp}),w(B,{arg:q,requestId:V.meta.requestId,fulfilledTimeStamp:V.meta.timestamp,baseQueryMeta:{}},z)}},prepare:B=>({payload:B.map(q=>{const{endpointName:z,arg:$,value:K}=q,te=o[z];return{queryDescription:{type:"query",endpointName:z,originalArgs:q.arg,queryCacheKey:r({queryArgs:$,endpointDefinition:te,endpointName:z})},value:K}}),meta:{[Dv]:!0,requestId:iz(),timestamp:Date.now()}})},queryResultPatched:{reducer(B,{payload:{queryCacheKey:V,patches:G}}){_T(B,V,q=>{q.data=Q$(q.data,G.concat())})},prepare:fC()}},extraReducers(B){B.addCase(t.pending,(V,{meta:G,meta:{arg:q}})=>{const z=aL(q);v(V,q,z,G)}).addCase(t.fulfilled,(V,{meta:G,payload:q})=>{w(V,G,q)}).addCase(t.rejected,(V,{meta:{condition:G,arg:q,requestId:z},error:$,payload:K})=>{_T(V,q.queryCacheKey,te=>{if(!G){if(te.requestId!==z)return;te.status="rejected",te.error=K??$}})}).addMatcher(c,(V,G)=>{const{queries:q}=l(G);for(const[z,$]of Object.entries(q))(($==null?void 0:$.status)==="fulfilled"||($==null?void 0:$.status)==="rejected")&&(V[z]=$)})}}),T=Bb({name:`${e}/mutations`,initialState:pC,reducers:{removeMutationResult:{reducer(B,{payload:V}){const G=yS(V);G in B&&delete B[G]},prepare:fC()}},extraReducers(B){B.addCase(n.pending,(V,{meta:G,meta:{requestId:q,arg:z,startedTimeStamp:$}})=>{z.track&&(V[yS(G)]={requestId:q,status:"pending",endpointName:z.endpointName,startedTimeStamp:$})}).addCase(n.fulfilled,(V,{payload:G,meta:q})=>{q.arg.track&&cH(V,q,z=>{z.requestId===q.requestId&&(z.status="fulfilled",z.data=G,z.fulfilledTimeStamp=q.fulfilledTimeStamp)})}).addCase(n.rejected,(V,{payload:G,error:q,meta:z})=>{z.arg.track&&cH(V,z,$=>{$.requestId===z.requestId&&($.status="rejected",$.error=G??q)})}).addMatcher(c,(V,G)=>{const{mutations:q}=l(G);for(const[z,$]of Object.entries(q))(($==null?void 0:$.status)==="fulfilled"||($==null?void 0:$.status)==="rejected")&&z!==($==null?void 0:$.requestId)&&(V[z]=$)})}}),k=Bb({name:`${e}/invalidation`,initialState:pC,reducers:{updateProvidedBy:{reducer(B,V){var z,$;const{queryCacheKey:G,providedTags:q}=V.payload;for(const K of Object.values(B))for(const te of Object.values(K)){const re=te.indexOf(G);re!==-1&&te.splice(re,1)}for(const{type:K,id:te}of q){const re=(z=B[K]??(B[K]={}))[$=te||"__internal_without_id"]??(z[$]=[]);re.includes(G)||re.push(G)}},prepare:fC()}},extraReducers(B){B.addCase(C.actions.removeQueryResult,(V,{payload:{queryCacheKey:G}})=>{for(const q of Object.values(V))for(const z of Object.values(q)){const $=z.indexOf(G);$!==-1&&z.splice($,1)}}).addMatcher(c,(V,G)=>{var z,$;const{provided:q}=l(G);for(const[K,te]of Object.entries(q))for(const[re,oe]of Object.entries(te)){const ue=(z=V[K]??(V[K]={}))[$=re||"__internal_without_id"]??(z[$]=[]);for(const Q of oe)ue.includes(Q)||ue.push(Q)}}).addMatcher(lm(ny(t),AA(t)),(V,G)=>{const q=E9(G,"providesTags",o,f),{queryCacheKey:z}=G.meta.arg;k.caseReducers.updateProvidedBy(V,k.actions.updateProvidedBy({queryCacheKey:z,providedTags:q}))})}}),P=Bb({name:`${e}/subscriptions`,initialState:pC,reducers:{updateSubscriptionOptions(B,V){},unsubscribeQueryResult(B,V){},internal_getRTKQSubscriptions(){}}}),O=Bb({name:`${e}/internalSubscriptions`,initialState:pC,reducers:{subscriptionsUpdated:{reducer(B,V){return Q$(B,V.payload)},prepare:fC()}}}),L=Bb({name:`${e}/config`,initialState:{online:Gge(),focused:qge(),middlewareRegistered:!1,...p},reducers:{middlewareRegistered(B,{payload:V}){B.middlewareRegistered=B.middlewareRegistered==="conflict"||i!==V?"conflict":!0}},extraReducers:B=>{B.addCase(lz,V=>{V.online=!0}).addCase(C9,V=>{V.online=!1}).addCase(sz,V=>{V.focused=!0}).addCase(x9,V=>{V.focused=!1}).addMatcher(c,V=>({...V}))}}),D=l9({queries:C.reducer,mutations:T.reducer,provided:k.reducer,subscriptions:O.reducer,config:L.reducer}),N=(B,V)=>D(g.match(V)?void 0:B,V),F={...L.actions,...C.actions,...P.actions,...O.actions,...T.actions,...k.actions,resetApiState:g};return{reducer:N,actions:F}}var Mg=Symbol.for("RTKQ/skipToken"),T9={status:"uninitialized"},dH=iE(T9,()=>{}),hH=iE(T9,()=>{});function iye({serializeQueryArgs:e,reducerPath:t,createSelector:n}){const r=v=>dH,o=v=>hH;return{buildQuerySelector:c,buildMutationSelector:f,selectInvalidatedBy:p,selectCachedArgsForQuery:g};function i(v){return{...v,...Hge(v.status)}}function l(v){return v[t]}function c(v,w){return C=>{if(C===Mg)return n(r,i);const T=e({queryArgs:C,endpointDefinition:w,endpointName:v});return n(P=>{var O,L;return((L=(O=l(P))==null?void 0:O.queries)==null?void 0:L[T])??dH},i)}}function f(){return v=>{let w;return typeof v=="object"?w=yS(v)??Mg:w=v,n(w===Mg?o:k=>{var P,O;return((O=(P=l(k))==null?void 0:P.mutations)==null?void 0:O[w])??hH},i)}}function p(v,w){const C=v[t],T=new Set;for(const k of w.filter(wk).map(iL)){const P=C.provided[k.type];if(!P)continue;let O=(k.id!==void 0?P[k.id]:iH(Object.values(P)))??[];for(const L of O)T.add(L)}return iH(Array.from(T.values()).map(k=>{const P=C.queries[k];return P?[{queryCacheKey:k,endpointName:P.endpointName,originalArgs:P.originalArgs}]:[]}))}function g(v,w){return Object.values(v[t].queries).filter(C=>(C==null?void 0:C.endpointName)===w&&C.status!=="uninitialized").map(C=>C.originalArgs)}}var Ub=WeakMap?new WeakMap:void 0,fH=({endpointName:e,queryArgs:t})=>{let n="";const r=Ub==null?void 0:Ub.get(t);if(typeof r=="string")n=r;else{const o=JSON.stringify(t,(i,l)=>(l=typeof l=="bigint"?{$bigint:l.toString()}:l,l=Bf(l)?Object.keys(l).sort().reduce((c,f)=>(c[f]=l[f],c),{}):l,l));Bf(t)&&(Ub==null||Ub.set(t,o)),n=o}return`${e}(${n})`};function aye(...e){return function(n){const r=rk(p=>{var g;return(g=n.extractRehydrationInfo)==null?void 0:g.call(n,p,{reducerPath:n.reducerPath??"api"})}),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...n,extractRehydrationInfo:r,serializeQueryArgs(p){let g=fH;if("serializeQueryArgs"in p.endpointDefinition){const v=p.endpointDefinition.serializeQueryArgs;g=w=>{const C=v(w);return typeof C=="string"?C:fH({...w,queryArgs:C})}}else n.serializeQueryArgs&&(g=n.serializeQueryArgs);return g(p)},tagTypes:[...n.tagTypes||[]]},i={endpointDefinitions:{},batch(p){p()},apiUid:iz(),extractRehydrationInfo:r,hasRehydrationInfo:rk(p=>r(p)!=null)},l={injectEndpoints:f,enhanceEndpoints({addTagTypes:p,endpoints:g}){if(p)for(const v of p)o.tagTypes.includes(v)||o.tagTypes.push(v);if(g)for(const[v,w]of Object.entries(g))typeof w=="function"?w(i.endpointDefinitions[v]):Object.assign(i.endpointDefinitions[v]||{},w);return l}},c=e.map(p=>p.init(l,o,i));function f(p){const g=p.endpoints({query:v=>({...v,type:"query"}),mutation:v=>({...v,type:"mutation"})});for(const[v,w]of Object.entries(g)){if(p.overrideExisting!==!0&&v in i.endpointDefinitions){if(p.overrideExisting==="throw")throw new Error(Th(39));continue}i.endpointDefinitions[v]=w;for(const C of c)C.injectEndpoint(v,w)}return l}return l.injectEndpoints({endpoints:n.endpoints})}}function lg(e,...t){return Object.assign(e,...t)}var sye=({api:e,queryThunk:t,internalState:n})=>{const r=`${e.reducerPath}/subscriptions`;let o=null,i=null;const{updateSubscriptionOptions:l,unsubscribeQueryResult:c}=e.internalActions,f=(C,T)=>{var P,O,L;if(l.match(T)){const{queryCacheKey:D,requestId:N,options:F}=T.payload;return(P=C==null?void 0:C[D])!=null&&P[N]&&(C[D][N]=F),!0}if(c.match(T)){const{queryCacheKey:D,requestId:N}=T.payload;return C[D]&&delete C[D][N],!0}if(e.internalActions.removeQueryResult.match(T))return delete C[T.payload.queryCacheKey],!0;if(t.pending.match(T)){const{meta:{arg:D,requestId:N}}=T,F=C[O=D.queryCacheKey]??(C[O]={});return F[`${N}_running`]={},D.subscribe&&(F[N]=D.subscriptionOptions??F[N]??{}),!0}let k=!1;if(t.fulfilled.match(T)||t.rejected.match(T)){const D=C[T.meta.arg.queryCacheKey]||{},N=`${T.meta.requestId}_running`;k||(k=!!D[N]),delete D[N]}if(t.rejected.match(T)){const{meta:{condition:D,arg:N,requestId:F}}=T;if(D&&N.subscribe){const B=C[L=N.queryCacheKey]??(C[L]={});B[F]=N.subscriptionOptions??B[F]??{},k=!0}}return k},p=()=>n.currentSubscriptions,w={getSubscriptions:p,getSubscriptionCount:C=>{const k=p()[C]??{};return Ww(k)},isRequestSubscribed:(C,T)=>{var P;const k=p();return!!((P=k==null?void 0:k[C])!=null&&P[T])}};return(C,T)=>{if(o||(o=JSON.parse(JSON.stringify(n.currentSubscriptions))),e.util.resetApiState.match(C))return o=n.currentSubscriptions={},i=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(C))return[!1,w];const k=f(n.currentSubscriptions,C);let P=!0;if(k){i||(i=setTimeout(()=>{const D=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,N]=m9(o,()=>D);T.next(e.internalActions.subscriptionsUpdated(N)),o=D,i=null},500));const O=typeof C.type=="string"&&!!C.type.startsWith(r),L=t.rejected.match(C)&&C.meta.condition&&!!C.meta.arg.subscribe;P=!O&&!L}return[P,!1]}};function lye(e){for(const t in e)return!1;return!0}var uye=2147483647/1e3-1,cye=({reducerPath:e,api:t,queryThunk:n,context:r,internalState:o})=>{const{removeQueryResult:i,unsubscribeQueryResult:l,cacheEntriesUpserted:c}=t.internalActions,f=lm(l.match,n.fulfilled,n.rejected,c.match);function p(C){const T=o.currentSubscriptions[C];return!!T&&!lye(T)}const g={},v=(C,T,k)=>{var P;if(f(C)){const O=T.getState()[e];let L;if(c.match(C))L=C.payload.map(D=>D.queryDescription.queryCacheKey);else{const{queryCacheKey:D}=l.match(C)?C.payload:C.meta.arg;L=[D]}for(const D of L)w(D,(P=O.queries[D])==null?void 0:P.endpointName,T,O.config)}if(t.util.resetApiState.match(C))for(const[O,L]of Object.entries(g))L&&clearTimeout(L),delete g[O];if(r.hasRehydrationInfo(C)){const O=T.getState()[e],{queries:L}=r.extractRehydrationInfo(C);for(const[D,N]of Object.entries(L))w(D,N==null?void 0:N.endpointName,T,O.config)}};function w(C,T,k,P){const O=r.endpointDefinitions[T],L=(O==null?void 0:O.keepUnusedDataFor)??P.keepUnusedDataFor;if(L===1/0)return;const D=Math.max(0,Math.min(L,uye));if(!p(C)){const N=g[C];N&&clearTimeout(N),g[C]=setTimeout(()=>{p(C)||k.dispatch(i({queryCacheKey:C})),delete g[C]},D*1e3)}}return v},pH=new Error("Promise never resolved before cacheEntryRemoved."),dye=({api:e,reducerPath:t,context:n,queryThunk:r,mutationThunk:o,internalState:i})=>{const l=oL(r),c=oL(o),f=ny(r,o),p={};function g(k,P,O){const L=p[k];L!=null&&L.valueResolved&&(L.valueResolved({data:P,meta:O}),delete L.valueResolved)}function v(k){const P=p[k];P&&(delete p[k],P.cacheEntryRemoved())}const w=(k,P,O)=>{const L=C(k);function D(N,F,B,V){const G=O[t].queries[F],q=P.getState()[t].queries[F];!G&&q&&T(N,V,F,P,B)}if(r.pending.match(k))D(k.meta.arg.endpointName,L,k.meta.requestId,k.meta.arg.originalArgs);else if(e.internalActions.cacheEntriesUpserted.match(k))for(const{queryDescription:N,value:F}of k.payload){const{endpointName:B,originalArgs:V,queryCacheKey:G}=N;D(B,G,k.meta.requestId,V),g(G,F,{})}else if(o.pending.match(k))P.getState()[t].mutations[L]&&T(k.meta.arg.endpointName,k.meta.arg.originalArgs,L,P,k.meta.requestId);else if(f(k))g(L,k.payload,k.meta.baseQueryMeta);else if(e.internalActions.removeQueryResult.match(k)||e.internalActions.removeMutationResult.match(k))v(L);else if(e.util.resetApiState.match(k))for(const N of Object.keys(p))v(N)};function C(k){return l(k)?k.meta.arg.queryCacheKey:c(k)?k.meta.arg.fixedCacheKey??k.meta.requestId:e.internalActions.removeQueryResult.match(k)?k.payload.queryCacheKey:e.internalActions.removeMutationResult.match(k)?yS(k.payload):""}function T(k,P,O,L,D){const N=n.endpointDefinitions[k],F=N==null?void 0:N.onCacheEntryAdded;if(!F)return;const B={},V=new Promise(te=>{B.cacheEntryRemoved=te}),G=Promise.race([new Promise(te=>{B.valueResolved=te}),V.then(()=>{throw pH})]);G.catch(()=>{}),p[O]=B;const q=e.endpoints[k].select(N.type==="query"?P:O),z=L.dispatch((te,re,oe)=>oe),$={...L,getCacheEntry:()=>q(L.getState()),requestId:D,extra:z,updateCachedData:N.type==="query"?te=>L.dispatch(e.util.updateQueryData(k,P,te)):void 0,cacheDataLoaded:G,cacheEntryRemoved:V},K=F(P,$);Promise.resolve(K).catch(te=>{if(te!==pH)throw te})}return w},hye=({api:e,context:{apiUid:t},reducerPath:n})=>(r,o)=>{e.util.resetApiState.match(r)&&o.dispatch(e.internalActions.middlewareRegistered(t))},fye=({reducerPath:e,context:t,context:{endpointDefinitions:n},mutationThunk:r,queryThunk:o,api:i,assertTagType:l,refetchQuery:c,internalState:f})=>{const{removeQueryResult:p}=i.internalActions,g=lm(ny(r),AA(r)),v=lm(ny(r,o),xx(r,o));let w=[];const C=(P,O)=>{g(P)?k(E9(P,"invalidatesTags",n,l),O):v(P)?k([],O):i.util.invalidateTags.match(P)&&k(uz(P.payload,void 0,void 0,void 0,void 0,l),O)};function T(P){var O,L;for(const D in P.queries)if(((O=P.queries[D])==null?void 0:O.status)==="pending")return!0;for(const D in P.mutations)if(((L=P.mutations[D])==null?void 0:L.status)==="pending")return!0;return!1}function k(P,O){const L=O.getState(),D=L[e];if(w.push(...P),D.config.invalidationBehavior==="delayed"&&T(D))return;const N=w;if(w=[],N.length===0)return;const F=i.util.selectInvalidatedBy(L,N);t.batch(()=>{const B=Array.from(F.values());for(const{queryCacheKey:V}of B){const G=D.queries[V],q=f.currentSubscriptions[V]??{};G&&(Ww(q)===0?O.dispatch(p({queryCacheKey:V})):G.status!=="uninitialized"&&O.dispatch(c(G)))}})}return C},pye=({reducerPath:e,queryThunk:t,api:n,refetchQuery:r,internalState:o})=>{const i={},l=(w,C)=>{(n.internalActions.updateSubscriptionOptions.match(w)||n.internalActions.unsubscribeQueryResult.match(w))&&f(w.payload,C),(t.pending.match(w)||t.rejected.match(w)&&w.meta.condition)&&f(w.meta.arg,C),(t.fulfilled.match(w)||t.rejected.match(w)&&!w.meta.condition)&&c(w.meta.arg,C),n.util.resetApiState.match(w)&&g()};function c({queryCacheKey:w},C){const T=C.getState()[e],k=T.queries[w],P=o.currentSubscriptions[w];if(!k||k.status==="uninitialized")return;const{lowestPollingInterval:O,skipPollingIfUnfocused:L}=v(P);if(!Number.isFinite(O))return;const D=i[w];D!=null&&D.timeout&&(clearTimeout(D.timeout),D.timeout=void 0);const N=Date.now()+O;i[w]={nextPollTimestamp:N,pollingInterval:O,timeout:setTimeout(()=>{(T.config.focused||!L)&&C.dispatch(r(k)),c({queryCacheKey:w},C)},O)}}function f({queryCacheKey:w},C){const k=C.getState()[e].queries[w],P=o.currentSubscriptions[w];if(!k||k.status==="uninitialized")return;const{lowestPollingInterval:O}=v(P);if(!Number.isFinite(O)){p(w);return}const L=i[w],D=Date.now()+O;(!L||D<L.nextPollTimestamp)&&c({queryCacheKey:w},C)}function p(w){const C=i[w];C!=null&&C.timeout&&clearTimeout(C.timeout),delete i[w]}function g(){for(const w of Object.keys(i))p(w)}function v(w={}){let C=!1,T=Number.POSITIVE_INFINITY;for(let k in w)w[k].pollingInterval&&(T=Math.min(w[k].pollingInterval,T),C=w[k].skipPollingIfUnfocused||C);return{lowestPollingInterval:T,skipPollingIfUnfocused:C}}return l},mye=({api:e,context:t,queryThunk:n,mutationThunk:r})=>{const o=oz(n,r),i=xx(n,r),l=ny(n,r),c={};return(p,g)=>{var v,w;if(o(p)){const{requestId:C,arg:{endpointName:T,originalArgs:k}}=p.meta,P=t.endpointDefinitions[T],O=P==null?void 0:P.onQueryStarted;if(O){const L={},D=new Promise((V,G)=>{L.resolve=V,L.reject=G});D.catch(()=>{}),c[C]=L;const N=e.endpoints[T].select(P.type==="query"?k:C),F=g.dispatch((V,G,q)=>q),B={...g,getCacheEntry:()=>N(g.getState()),requestId:C,extra:F,updateCachedData:P.type==="query"?V=>g.dispatch(e.util.updateQueryData(T,k,V)):void 0,queryFulfilled:D};O(k,B)}}else if(l(p)){const{requestId:C,baseQueryMeta:T}=p.meta;(v=c[C])==null||v.resolve({data:p.payload,meta:T}),delete c[C]}else if(i(p)){const{requestId:C,rejectedWithValue:T,baseQueryMeta:k}=p.meta;(w=c[C])==null||w.reject({error:p.payload??p.error,isUnhandledError:!T,meta:k}),delete c[C]}}},gye=({reducerPath:e,context:t,api:n,refetchQuery:r,internalState:o})=>{const{removeQueryResult:i}=n.internalActions,l=(f,p)=>{sz.match(f)&&c(p,"refetchOnFocus"),lz.match(f)&&c(p,"refetchOnReconnect")};function c(f,p){const g=f.getState()[e],v=g.queries,w=o.currentSubscriptions;t.batch(()=>{for(const C of Object.keys(w)){const T=v[C],k=w[C];if(!k||!T)continue;(Object.values(k).some(O=>O[p]===!0)||Object.values(k).every(O=>O[p]===void 0)&&g.config[p])&&(Ww(k)===0?f.dispatch(i({queryCacheKey:C})):T.status!=="uninitialized"&&f.dispatch(r(T)))}})}return l};function yye(e){const{reducerPath:t,queryThunk:n,api:r,context:o}=e,{apiUid:i}=o,l={invalidateTags:Eh(`${t}/invalidateTags`)},c=v=>v.type.startsWith(`${t}/`),f=[hye,cye,fye,pye,dye,mye];return{middleware:v=>{let w=!1;const T={...e,internalState:{currentSubscriptions:{}},refetchQuery:g,isThisApiSliceAction:c},k=f.map(L=>L(T)),P=sye(T),O=gye(T);return L=>D=>{if(!u9(D))return L(D);w||(w=!0,v.dispatch(r.internalActions.middlewareRegistered(i)));const N={...v,next:L},F=v.getState(),[B,V]=P(D,N,F);let G;if(B?G=L(D):G=V,v.getState()[t]&&(O(D,N,F),c(D)||o.hasRehydrationInfo(D)))for(const q of k)q(D,N,F);return G}},actions:l};function g(v){return e.api.endpoints[v.endpointName].initiate(v.originalArgs,{subscribe:!1,forceRefetch:!0})}}var mH=Symbol(),vye=({createSelector:e=yF}={})=>({name:mH,init(t,{baseQuery:n,tagTypes:r,reducerPath:o,serializeQueryArgs:i,keepUnusedDataFor:l,refetchOnMountOrArgChange:c,refetchOnFocus:f,refetchOnReconnect:p,invalidationBehavior:g},v){yge();const w=ce=>ce;Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:lz,onOffline:C9,onFocus:sz,onFocusLost:x9},util:{}});const{queryThunk:C,mutationThunk:T,patchQueryData:k,updateQueryData:P,upsertQueryData:O,prefetch:L,buildMatchThunkActions:D}=rye({baseQuery:n,reducerPath:o,context:v,api:t,serializeQueryArgs:i,assertTagType:w}),{reducer:N,actions:F}=oye({context:v,queryThunk:C,mutationThunk:T,serializeQueryArgs:i,reducerPath:o,assertTagType:w,config:{refetchOnFocus:f,refetchOnReconnect:p,refetchOnMountOrArgChange:c,keepUnusedDataFor:l,reducerPath:o,invalidationBehavior:g}});lg(t.util,{patchQueryData:k,updateQueryData:P,upsertQueryData:O,prefetch:L,resetApiState:F.resetApiState,upsertQueryEntries:F.cacheEntriesUpserted}),lg(t.internalActions,F);const{middleware:B,actions:V}=yye({reducerPath:o,context:v,queryThunk:C,mutationThunk:T,api:t,assertTagType:w});lg(t.util,V),lg(t,{reducer:N,middleware:B});const{buildQuerySelector:G,buildMutationSelector:q,selectInvalidatedBy:z,selectCachedArgsForQuery:$}=iye({serializeQueryArgs:i,reducerPath:o,createSelector:e});lg(t.util,{selectInvalidatedBy:z,selectCachedArgsForQuery:$});const{buildInitiateQuery:K,buildInitiateMutation:te,getRunningMutationThunk:re,getRunningMutationsThunk:oe,getRunningQueriesThunk:ue,getRunningQueryThunk:Q}=nye({queryThunk:C,mutationThunk:T,api:t,serializeQueryArgs:i,context:v});return lg(t.util,{getRunningMutationThunk:re,getRunningMutationsThunk:oe,getRunningQueryThunk:Q,getRunningQueriesThunk:ue}),{name:mH,injectEndpoint(ce,ae){var le;const fe=t;(le=fe.endpoints)[ce]??(le[ce]={}),S9(ae)?lg(fe.endpoints[ce],{name:ce,select:G(ce,ae),initiate:K(ce,ae)},D(C,ce)):Jge(ae)&&lg(fe.endpoints[ce],{name:ce,select:q(),initiate:te(ce)},D(T,ce))}}}}),fR={exports:{}},pR={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gH;function _ye(){if(gH)return pR;gH=1;var e=w_();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,o=e.useRef,i=e.useEffect,l=e.useMemo,c=e.useDebugValue;return pR.useSyncExternalStoreWithSelector=function(f,p,g,v,w){var C=o(null);if(C.current===null){var T={hasValue:!1,value:null};C.current=T}else T=C.current;C=l(function(){function P(F){if(!O){if(O=!0,L=F,F=v(F),w!==void 0&&T.hasValue){var B=T.value;if(w(B,F))return D=B}return D=F}if(B=D,n(L,F))return B;var V=v(F);return w!==void 0&&w(B,V)?(L=F,B):(L=F,D=V)}var O=!1,L,D,N=g===void 0?null:g;return[function(){return P(p())},N===null?void 0:function(){return P(N())}]},[p,g,v,w]);var k=r(f,C[0],C[1]);return i(function(){T.hasValue=!0,T.value=k},[k]),c(k),k},pR}var yH;function bye(){return yH||(yH=1,fR.exports=_ye()),fR.exports}var wye=bye();function I9(e){e()}function xye(){let e=null,t=null;return{clear(){e=null,t=null},notify(){I9(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){!r||e===null||(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var vH={notify(){},get:()=>[]};function Cye(e,t){let n,r=vH,o=0,i=!1;function l(k){g();const P=r.subscribe(k);let O=!1;return()=>{O||(O=!0,P(),v())}}function c(){r.notify()}function f(){T.onStateChange&&T.onStateChange()}function p(){return i}function g(){o++,n||(n=e.subscribe(f),r=xye())}function v(){o--,n&&o===0&&(n(),n=void 0,r.clear(),r=vH)}function w(){i||(i=!0,g())}function C(){i&&(i=!1,v())}const T={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:p,trySubscribe:w,tryUnsubscribe:C,getListeners:()=>r};return T}var Sye=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Eye=Sye(),Tye=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Iye=Tye(),kye=()=>Eye||Iye?A.useLayoutEffect:A.useEffect,Pye=kye();function _H(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function A1(e,t){if(_H(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!_H(e[n[o]],t[n[o]]))return!1;return!0}var mR=Symbol.for("react-redux-context"),gR=typeof globalThis<"u"?globalThis:{};function Aye(){if(!A.createContext)return{};const e=gR[mR]??(gR[mR]=new Map);let t=e.get(A.createContext);return t||(t=A.createContext(null),e.set(A.createContext,t)),t}var ry=Aye();function Mye(e){const{children:t,context:n,serverState:r,store:o}=e,i=A.useMemo(()=>{const f=Cye(o);return{store:o,subscription:f,getServerState:r?()=>r:void 0}},[o,r]),l=A.useMemo(()=>o.getState(),[o]);Pye(()=>{const{subscription:f}=i;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==o.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[i,l]);const c=n||ry;return A.createElement(c.Provider,{value:i},t)}var Rye=Mye;function cz(e=ry){return function(){return A.useContext(e)}}var k9=cz();function P9(e=ry){const t=e===ry?k9:cz(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var A9=P9();function Oye(e=ry){const t=e===ry?A9:P9(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Dye=Oye(),Lye=(e,t)=>e===t;function Nye(e=ry){const t=e===ry?k9:cz(e),n=(r,o={})=>{const{equalityFn:i=Lye}=typeof o=="function"?{equalityFn:o}:o,l=t(),{store:c,subscription:f,getServerState:p}=l;A.useRef(!0);const g=A.useCallback({[r.name](w){return r(w)}}[r.name],[r]),v=wye.useSyncExternalStoreWithSelector(f.addNestedSub,c.getState,p||c.getState,g,i);return A.useDebugValue(v),v};return Object.assign(n,{withTypes:()=>n}),n}var Fye=Nye(),zye=I9;function yR(e){return e.replace(e[0],e[0].toUpperCase())}function Bye(e){return e.type==="query"}function Uye(e){return e.type==="mutation"}function bT(e,...t){return Object.assign(e,...t)}var jb=WeakMap?new WeakMap:void 0,jye=({endpointName:e,queryArgs:t})=>{let n="";const r=jb==null?void 0:jb.get(t);if(typeof r=="string")n=r;else{const o=JSON.stringify(t,(i,l)=>(l=typeof l=="bigint"?{$bigint:l.toString()}:l,l=Bf(l)?Object.keys(l).sort().reduce((c,f)=>(c[f]=l[f],c),{}):l,l));Bf(t)&&(jb==null||jb.set(t,o)),n=o}return`${e}(${n})`},vR=Symbol();function bH(e,t,n,r){const o=A.useMemo(()=>({queryArgs:e,serialized:typeof e=="object"?t({queryArgs:e,endpointDefinition:n,endpointName:r}):e}),[e,t,n,r]),i=A.useRef(o);return A.useEffect(()=>{i.current.serialized!==o.serialized&&(i.current=o)},[o]),i.current.serialized===o.serialized?i.current.queryArgs:e}function _R(e){const t=A.useRef(e);return A.useEffect(()=>{A1(t.current,e)||(t.current=e)},[e]),A1(t.current,e)?t.current:e}var $ye=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hye=$ye(),Vye=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qye=Vye(),Gye=()=>Hye||qye?A.useLayoutEffect:A.useEffect,Wye=Gye(),Kye=e=>e.isUninitialized?{...e,isUninitialized:!1,isFetching:!0,isLoading:e.data===void 0,status:b9.pending}:e;function Yye({api:e,moduleOptions:{batch:t,hooks:{useDispatch:n,useSelector:r,useStore:o},unstable__sideEffectsInRender:i,createSelector:l},serializeQueryArgs:c,context:f}){const p=i?T=>T():A.useEffect;return{buildQueryHooks:w,buildMutationHook:C,usePrefetch:v};function g(T,k,P){if(k!=null&&k.endpointName&&T.isUninitialized){const{endpointName:B}=k,V=f.endpointDefinitions[B];P!==Mg&&c({queryArgs:k.originalArgs,endpointDefinition:V,endpointName:B})===c({queryArgs:P,endpointDefinition:V,endpointName:B})&&(k=void 0)}let O=T.isSuccess?T.data:k==null?void 0:k.data;O===void 0&&(O=T.data);const L=O!==void 0,D=T.isLoading,N=(!k||k.isLoading||k.isUninitialized)&&!L&&D,F=T.isSuccess||L&&(D&&!(k!=null&&k.isError)||T.isUninitialized);return{...T,data:O,currentData:T.data,isFetching:D,isLoading:N,isSuccess:F}}function v(T,k){const P=n(),O=_R(k);return A.useCallback((L,D)=>P(e.util.prefetch(T,L,{...O,...D})),[T,P,O])}function w(T){const k=(L,{refetchOnReconnect:D,refetchOnFocus:N,refetchOnMountOrArgChange:F,skip:B=!1,pollingInterval:V=0,skipPollingIfUnfocused:G=!1}={})=>{const{initiate:q}=e.endpoints[T],z=n(),$=A.useRef(void 0);if(!$.current){const fe=z(e.internalActions.internal_getRTKQSubscriptions());$.current=fe}const K=bH(B?Mg:L,jye,f.endpointDefinitions[T],T),te=_R({refetchOnReconnect:D,refetchOnFocus:N,pollingInterval:V,skipPollingIfUnfocused:G}),re=A.useRef(!1),oe=A.useRef(void 0);let{queryCacheKey:ue,requestId:Q}=oe.current||{},ce=!1;ue&&Q&&(ce=$.current.isRequestSubscribed(ue,Q));const ae=!ce&&re.current;return p(()=>{re.current=ce}),p(()=>{ae&&(oe.current=void 0)},[ae]),p(()=>{var pe;const fe=oe.current;if(K===Mg){fe==null||fe.unsubscribe(),oe.current=void 0;return}const le=(pe=oe.current)==null?void 0:pe.subscriptionOptions;if(!fe||fe.arg!==K){fe==null||fe.unsubscribe();const Fe=z(q(K,{subscriptionOptions:te,forceRefetch:F}));oe.current=Fe}else te!==le&&fe.updateSubscriptionOptions(te)},[z,q,F,K,te,ae]),A.useEffect(()=>()=>{var fe;(fe=oe.current)==null||fe.unsubscribe(),oe.current=void 0},[]),A.useMemo(()=>({refetch:()=>{var fe;if(!oe.current)throw new Error(Th(38));return(fe=oe.current)==null?void 0:fe.refetch()}}),[])},P=({refetchOnReconnect:L,refetchOnFocus:D,pollingInterval:N=0,skipPollingIfUnfocused:F=!1}={})=>{const{initiate:B}=e.endpoints[T],V=n(),[G,q]=A.useState(vR),z=A.useRef(void 0),$=_R({refetchOnReconnect:L,refetchOnFocus:D,pollingInterval:N,skipPollingIfUnfocused:F});p(()=>{var ue,Q;const oe=(ue=z.current)==null?void 0:ue.subscriptionOptions;$!==oe&&((Q=z.current)==null||Q.updateSubscriptionOptions($))},[$]);const K=A.useRef($);p(()=>{K.current=$},[$]);const te=A.useCallback(function(oe,ue=!1){let Q;return t(()=>{var ce;(ce=z.current)==null||ce.unsubscribe(),z.current=Q=V(B(oe,{subscriptionOptions:K.current,forceRefetch:!ue})),q(oe)}),Q},[V,B]),re=A.useCallback(()=>{var oe,ue;(oe=z.current)!=null&&oe.queryCacheKey&&V(e.internalActions.removeQueryResult({queryCacheKey:(ue=z.current)==null?void 0:ue.queryCacheKey}))},[V]);return A.useEffect(()=>()=>{var oe;(oe=z==null?void 0:z.current)==null||oe.unsubscribe()},[]),A.useEffect(()=>{G!==vR&&!z.current&&te(G,!0)},[G,te]),A.useMemo(()=>[te,G,{reset:re}],[te,G,re])},O=(L,{skip:D=!1,selectFromResult:N}={})=>{const{select:F}=e.endpoints[T],B=bH(D?Mg:L,c,f.endpointDefinitions[T],T),V=A.useRef(void 0),G=A.useMemo(()=>l([F(B),(te,re)=>re,te=>B],g,{memoizeOptions:{resultEqualityCheck:A1}}),[F,B]),q=A.useMemo(()=>N?l([G],N,{devModeChecks:{identityFunctionCheck:"never"}}):G,[G,N]),z=r(te=>q(te,V.current),A1),$=o(),K=G($.getState(),V.current);return Wye(()=>{V.current=K},[K]),z};return{useQueryState:O,useQuerySubscription:k,useLazyQuerySubscription:P,useLazyQuery(L){const[D,N,{reset:F}]=P(L),B=O(N,{...L,skip:N===vR}),V=A.useMemo(()=>({lastArg:N}),[N]);return A.useMemo(()=>[D,{...B,reset:F},V],[D,B,F,V])},useQuery(L,D){const N=k(L,D),F=O(L,{selectFromResult:L===Mg||D!=null&&D.skip?void 0:Kye,...D}),{data:B,status:V,isLoading:G,isSuccess:q,isError:z,error:$}=F;return A.useDebugValue({data:B,status:V,isLoading:G,isSuccess:q,isError:z,error:$}),A.useMemo(()=>({...F,...N}),[F,N])}}}function C(T){return({selectFromResult:k,fixedCacheKey:P}={})=>{const{select:O,initiate:L}=e.endpoints[T],D=n(),[N,F]=A.useState();A.useEffect(()=>()=>{N!=null&&N.arg.fixedCacheKey||N==null||N.reset()},[N]);const B=A.useCallback(function(le){const pe=D(L(le,{fixedCacheKey:P}));return F(pe),pe},[D,L,P]),{requestId:V}=N||{},G=A.useMemo(()=>O({fixedCacheKey:P,requestId:N==null?void 0:N.requestId}),[P,N,O]),q=A.useMemo(()=>k?l([G],k):G,[k,G]),z=r(q,A1),$=P==null?N==null?void 0:N.arg.originalArgs:void 0,K=A.useCallback(()=>{t(()=>{N&&F(void 0),P&&D(e.internalActions.removeMutationResult({requestId:V,fixedCacheKey:P}))})},[D,P,N,V]),{endpointName:te,data:re,status:oe,isLoading:ue,isSuccess:Q,isError:ce,error:ae}=z;A.useDebugValue({endpointName:te,data:re,status:oe,isLoading:ue,isSuccess:Q,isError:ce,error:ae});const fe=A.useMemo(()=>({...z,originalArgs:$,reset:K}),[z,$,K]);return A.useMemo(()=>[B,fe],[B,fe])}}}var Zye=Symbol(),Xye=({batch:e=zye,hooks:t={useDispatch:Dye,useSelector:Fye,useStore:A9},createSelector:n=yF,unstable__sideEffectsInRender:r=!1,...o}={})=>({name:Zye,init(i,{serializeQueryArgs:l},c){const f=i,{buildQueryHooks:p,buildMutationHook:g,usePrefetch:v}=Yye({api:i,moduleOptions:{batch:e,hooks:t,unstable__sideEffectsInRender:r,createSelector:n},serializeQueryArgs:l,context:c});return bT(f,{usePrefetch:v}),bT(c,{batch:e}),{injectEndpoint(w,C){if(Bye(C)){const{useQuery:T,useLazyQuery:k,useLazyQuerySubscription:P,useQueryState:O,useQuerySubscription:L}=p(w);bT(f.endpoints[w],{useQuery:T,useLazyQuery:k,useLazyQuerySubscription:P,useQueryState:O,useQuerySubscription:L}),i[`use${yR(w)}Query`]=T,i[`useLazy${yR(w)}Query`]=k}else if(Uye(C)){const T=g(w);bT(f.endpoints[w],{useMutation:T}),i[`use${yR(w)}Mutation`]=T}}}}}),dz=aye(vye(),Xye());const hz="/api",bI=dz({reducerPath:"subvdivisionApi",baseQuery:az({baseUrl:hz}),endpoints:e=>({getBoundaryBySubdivisionId:e.query({query:t=>`subdivisions/${t}/boundary`}),getSubdivisionsByDensity:e.query({query:t=>`densities/${t}/subdivisions`})})}),{useLazyGetBoundaryBySubdivisionIdQuery:Qye,useGetSubdivisionsByDensityQuery:Jye,useLazyGetSubdivisionsByDensityQuery:WFe}=bI,eve=({onSubdivisionChange:e})=>{const t=c8("root"),{id:n}=fF(),{data:r,isLoading:o,isFetching:i,isSuccess:l,isError:c}=Jye(n,{skip:!t.find(T=>T.shortName.toLowerCase()===(n==null?void 0:n.toLowerCase()))}),[f,p]=A.useState([]),[g,v]=A.useState(void 0),w=T=>{console.debug("rowClick",T),v(T.row.id),e(T.row.id)},C=[{field:"name",headerName:"Subdivision Name",type:"string",flex:.5},{field:"population",headerName:"Population",type:"number",flex:1},{field:"requestedDensityAmount",headerName:"Density (L/person)",type:"number",flex:1}];return A.useEffect(()=>{console.debug("id in subdivlist",n),v(void 0)},[n]),A.useEffect(()=>{!o&&!i&&r&&l&&(p(r),g===void 0&&(v(r[0].id),e(r[0].id)))},[r,c,l,o,i,e,g]),ie.jsx(ie.Fragment,{children:ie.jsx(XD,{sx:{width:"100%"},children:ie.jsx(Vme,{autoHeight:!0,loading:o,onRowClick:w,rows:f,rowSelectionModel:g,columns:C,sx:{[`& .${Ke.cell}:focus, & .${Ke.cell}:focus-within`]:{outline:"none"},[`& .${Ke.columnHeader}:focus, & .${Ke.columnHeader}:focus-within`]:{outline:"none"}},initialState:{pagination:{paginationModel:{pageSize:10}}},pageSizeOptions:[10]})})})};var wH={};/*!
MICROSOFT SOFTWARE LICENSE TERMS
MICROSOFT AZURE MAPS WEB SDK
These license terms are an agreement between you and Microsoft Corporation (or one of its affiliates). They apply to the software named above and any Microsoft services or software updates (except to the extent such services or updates are accompanied by new or additional terms, in which case those different terms apply prospectively and do not alter your or Microsoft’s rights relating to pre-updated software or services). IF YOU COMPLY WITH THESE LICENSE TERMS, YOU HAVE THE RIGHTS BELOW.  BY USING THE SOFTWARE, YOU ACCEPT THESE TERMS.
1. INSTALLATION AND USE RIGHTS.
  a) General. You may install and use any number of copies of the software to develop and test your applications.
  b) User Region Parameters. The software will allow you to select from a View list to set the map view within your application for a given customer. By default the View parameter (also referred to as “user region parameter” is set to “Unified”.  Countries/Regions that are not on the View list will default to the “Unified” View. It is your responsibility to determine the location of your users, and then set the View parameter correctly for that location. The View parameter must be used in compliance with applicable laws, including those regarding mapping, of the country where maps, images and other data and third party content that You are authorized to access via the software is made available. 
  c) Third Party Software. The software may include third party applications that Microsoft, not the third party, licenses to you under this agreement. Any included notices for third party applications are for your information only.
  d) Microsoft Online Subscription Agreement. Some features of the software provide access to, or rely on, Microsoft Azure Services. The use of those services (but not the software) is governed by the separate terms and privacy policies associated with your Microsoft Azure subscription. The services may not be available in all regions. For more information see https://go.microsoft.com/fwLink/?LinkID=522330&amp;clcid=0x9.
2. DISTRIBUTABLE CODE. The software is comprised of “Distributable Code”. “Distributable Code” is code that you are permitted to distribute in applications you develop if you comply with the terms below and otherwise set forth in these license terms. 
  a) Distribution Rights. 
    i. You may copy and distribute the object code form of the software.
    i. Third Party Distribution. You may permit distributors of your applications to copy and distribute any of this distributable code you elect to distribute with your applications.
  b) Distribution Requirements. For any code you distribute, you must:
    i. add significant primary functionality to it in your applications;
    ii. require distributors and external end users to agree to terms that protect it and Microsoft at least as much as this agreement; and
    iii. indemnify, defend, and hold harmless Microsoft from any claims, including attorneys’ fees, related to the distribution or use of your applications, except to the extent that any claim is based solely on the unmodified distributable code.
  c) Distribution Restrictions. You may not:
    i. use Microsoft’s trademarks or trade dress in your application in any way that suggests your application comes from or is endorsed by Microsoft; or
    ii. modify or distribute the source code of any distributable code so that any part of it becomes subject to any license that requires that the distributable code, any other part of the software, or any of Microsoft’s other intellectual property be disclosed or distributed in source code form, or that others have the right to modify it.
3. DATA COLLECTION. The software may collect information about you and your use of the software and send that to Microsoft. Microsoft may use this information to provide services and improve Microsoft’s products and services. Your opt-out rights, if any, are described in the product documentation. Some features in the software may enable collection of data from users of your applications that access or use the software. If you use these features to enable data collection in your applications, you must comply with applicable law, including getting any required user consent, and maintain a prominent privacy policy that accurately informs users about how you use, collect, and share their data. You can learn more about Microsoft’s data collection and use in the product documentation and the Microsoft Privacy Statement at https://go.microsoft.com/fwlink/?LinkId=512132. You agree to comply with all applicable provisions of the Microsoft Privacy Statement.
4. SCOPE OF LICENSE. The software is licensed, not sold. Microsoft reserves all other rights. Unless applicable law gives you more rights despite this limitation, you will not (and have no right to):
  a) work around any technical limitations in the software that only allow you to use it in certain ways;
  b) reverse engineer, decompile, or disassemble the software, or attempt to do so, except and only to the extent permitted by licensing terms governing the use of open-source components that may be included with the software;
  c) remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;
  d) use the software in any way that is against the law or to create or propagate malware; or
  e) share, publish, distribute, or lend the software (except for any distributable code, subject to the terms above), provide the software as a stand-alone hosted solution for others to use, or transfer the software or this agreement to any third party.
5. EXPORT RESTRICTIONS. You must comply with all domestic and international export laws and regulations that apply to the software, which include restrictions on destinations, end users, and end use. For further information on export restrictions, visit http://aka.ms/exporting.
6. SUPPORT SERVICES. Microsoft is not obligated under this agreement to provide any support services for the software. Any support provided is “as is”, “with all faults”, and without warranty of any kind.
7. UPDATES. The software may periodically check for updates, and download and install them for you. You may obtain updates only from Microsoft or authorized sources. Microsoft may need to update your system to provide you with updates. You agree to receive these automatic updates without any additional notice. Updates may not include or support all existing software features, services, or peripheral devices.
8. ENTIRE AGREEMENT. This agreement, and any other terms Microsoft may provide for supplements, updates, or third-party applications, is the entire agreement for the software.
9. APPLICABLE LAW AND PLACE TO RESOLVE DISPUTES. If you acquired the software in the United States or Canada, the laws of the state or province where you live (or, if a business, where your principal place of business is located) govern the interpretation of this agreement, claims for its breach, and all other claims (including consumer protection, unfair competition, and tort claims), regardless of conflict of laws principles. If you acquired the software in any other country, its laws apply. If U.S. federal jurisdiction exists, you and Microsoft consent to exclusive jurisdiction and venue in the federal court in King County, Washington for all disputes heard in court. If not, you and Microsoft consent to exclusive jurisdiction and venue in the Superior Court of King County, Washington for all disputes heard in court.
10. CONSUMER RIGHTS; REGIONAL VARIATIONS. This agreement describes certain legal rights. You may have other rights, including consumer rights, under the laws of your state or country. Separate and apart from your relationship with Microsoft, you may also have rights with respect to the party from which you acquired the software. This agreement does not change those other rights if the laws of your state or country do not permit it to do so. For example, if you acquired the software in one of the below regions, or mandatory country law applies, then the following provisions apply to you:
  a) Australia. You have statutory guarantees under the Australian Consumer Law and nothing in this agreement is intended to affect those rights.
  b) Canada. If you acquired this software in Canada, you may stop receiving updates by turning off the automatic update feature, disconnecting your device from the Internet (if and when you re-connect to the Internet, however, the software will resume checking for and installing updates), or uninstalling the software. The product documentation, if any, may also specify how to turn off updates for your specific device or software.
  c) Germany and Austria.
    i. Warranty. The properly licensed software will perform substantially as described in any Microsoft materials that accompany the software. However, Microsoft gives no contractual guarantee in relation to the licensed software.
    ii. Limitation of Liability. In case of intentional conduct, gross negligence, claims based on the Product Liability Act, as well as, in case of death or personal or physical injury, Microsoft is liable according to the statutory law.
  Subject to the foregoing clause ii., Microsoft will only be liable for slight negligence if Microsoft is in breach of such material contractual obligations, the fulfillment of which facilitate the due performance of this agreement, the breach of which would endanger the purpose of this agreement and the compliance with which a party may constantly trust in (so-called "cardinal obligations"). In other cases of slight negligence, Microsoft will not be liable for slight negligence.
11. DISCLAIMER OF WARRANTY. THE SOFTWARE IS LICENSED “AS IS.” YOU BEAR THE RISK OF USING IT. MICROSOFT GIVES NO EXPRESS WARRANTIES, GUARANTEES, OR CONDITIONS. TO THE EXTENT PERMITTED UNDER APPLICABLE LAWS, MICROSOFT EXCLUDES ALL IMPLIED WARRANTIES, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.
12. LIMITATION ON AND EXCLUSION OF DAMAGES. IF YOU HAVE ANY BASIS FOR RECOVERING DAMAGES DESPITE THE PRECEDING DISCLAIMER OF WARRANTY, YOU CAN RECOVER FROM MICROSOFT AND ITS SUPPLIERS ONLY DIRECT DAMAGES UP TO U.S. $5.00. YOU CANNOT RECOVER ANY OTHER DAMAGES, INCLUDING CONSEQUENTIAL, LOST PROFITS, SPECIAL, INDIRECT, OR INCIDENTAL DAMAGES.
This limitation applies to (a) anything related to the software, services, content (including code) on third party Internet sites, or third party applications; and (b) claims for breach of contract, warranty, guarantee, or condition; strict liability, negligence, or other tort; or any other claim; in each case to the extent permitted by applicable law.
It also applies even if Microsoft knew or should have known about the possibility of the damages. The above limitation or exclusion may not apply to you because your state, province, or country may not allow the exclusion or limitation of incidental, consequential, or other damages.
Please note: As this software is distributed in Canada, some of the clauses in this agreement are provided below in French.
Remarque: Ce logiciel étant distribué au Canada, certaines des clauses dans ce contrat sont fournies ci-dessous en français.
EXONÉRATION DE GARANTIE. Le logiciel visé par une licence est offert « tel quel ». Toute utilisation de ce logiciel est à votre seule risque et péril. Microsoft n’accorde aucune autre garantie expresse. Vous pouvez bénéficier de droits additionnels en vertu du droit local sur la protection des consommateurs, que ce contrat ne peut modifier. La ou elles sont permises par le droit locale, les garanties implicites de qualité marchande, d’adéquation à un usage particulier et d’absence de contrefaçon sont exclues.
LIMITATION DES DOMMAGES-INTÉRÊTS ET EXCLUSION DE RESPONSABILITÉ POUR LES DOMMAGES. Vous pouvez obtenir de Microsoft et de ses fournisseurs une indemnisation en cas de dommages directs uniquement à hauteur de 5,00 $ US. Vous ne pouvez prétendre à aucune indemnisation pour les autres dommages, y compris les dommages spéciaux, indirects ou accessoires et pertes de bénéfices.
Cette limitation concerne:
• tout ce qui est relié au logiciel, aux services ou au contenu (y compris le code) figurant sur des sites Internet tiers ou dans des programmes tiers; et
• les réclamations au titre de violation de contrat ou de garantie, ou au titre de responsabilité stricte, de négligence ou d’une autre faute dans la limite autorisée par la loi en vigueur.
Elle s’applique également, même si Microsoft connaissait ou devrait connaître l’éventualité d’un tel dommage. Si votre pays n’autorise pas l’exclusion ou la limitation de responsabilité pour les dommages indirects, accessoires ou de quelque nature que ce soit, il se peut que la limitation ou l’exclusion ci-dessus ne s’appliquera pas à votre égard.
EFFET JURIDIQUE. Le présent contrat décrit certains droits juridiques. Vous pourriez avoir d’autres droits prévus par les lois de votre pays. Le présent contrat ne modifie pas les droits que vous confèrent les lois de votre pays si celles-ci ne le permettent pas.
*/var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tve(e){var t,n;return e.__esModule?e:(typeof(t=e.default)=="function"?(n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)}).prototype=t.prototype:n={},Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n)}var xH={exports:{}},nve=(function(){var e;e=function(){var t={},n={};function r(o,i,l){n[o]=l,o==="index"&&(l="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",n.shared(o={}),n.index(t,o),typeof window<"u")&&t.setWorkerUrl(window.URL.createObjectURL(new Blob([l],{type:"text/javascript"})))}return r("shared",0,function(o){function i(h,a,s,d){return new(s=s||Promise)(function(m,_){function x(U){try{R(d.next(U))}catch(H){_(H)}}function I(U){try{R(d.throw(U))}catch(H){_(H)}}function R(U){var H;U.done?m(U.value):((H=U.value)instanceof s?H:new s(function(J){J(H)})).then(x,I)}R((d=d.apply(h,a||[])).next())})}function l(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var c=f;function f(h,a){this.x=h,this.y=a}f.prototype={clone:function(){return new f(this.x,this.y)},add:function(h){return this.clone()._add(h)},sub:function(h){return this.clone()._sub(h)},multByPoint:function(h){return this.clone()._multByPoint(h)},divByPoint:function(h){return this.clone()._divByPoint(h)},mult:function(h){return this.clone()._mult(h)},div:function(h){return this.clone()._div(h)},rotate:function(h){return this.clone()._rotate(h)},rotateAround:function(h,a){return this.clone()._rotateAround(h,a)},matMult:function(h){return this.clone()._matMult(h)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(h){return this.x===h.x&&this.y===h.y},dist:function(h){return Math.sqrt(this.distSqr(h))},distSqr:function(s){var a=s.x-this.x,s=s.y-this.y;return a*a+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(h){return Math.atan2(this.y-h.y,this.x-h.x)},angleWith:function(h){return this.angleWithSep(h.x,h.y)},angleWithSep:function(h,a){return Math.atan2(this.x*a-this.y*h,this.x*h+this.y*a)},_matMult:function(s){var a=s[0]*this.x+s[1]*this.y,s=s[2]*this.x+s[3]*this.y;return this.x=a,this.y=s,this},_add:function(h){return this.x+=h.x,this.y+=h.y,this},_sub:function(h){return this.x-=h.x,this.y-=h.y,this},_mult:function(h){return this.x*=h,this.y*=h,this},_div:function(h){return this.x/=h,this.y/=h,this},_multByPoint:function(h){return this.x*=h.x,this.y*=h.y,this},_divByPoint:function(h){return this.x/=h.x,this.y/=h.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var h=this.y;return this.y=this.x,this.x=-h,this},_rotate:function(d){var a=Math.cos(d),d=Math.sin(d),s=a*this.x-d*this.y,d=d*this.x+a*this.y;return this.x=s,this.y=d,this},_rotateAround:function(m,a){var s=Math.cos(m),m=Math.sin(m),d=a.x+s*(this.x-a.x)-m*(this.y-a.y),m=a.y+m*(this.x-a.x)+s*(this.y-a.y);return this.x=d,this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(h){return!(h instanceof f)&&Array.isArray(h)?new f(h[0],h[1]):h};var p=l(c),g=v;function v(h,a,s,d){this.cx=3*h,this.bx=3*(s-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(d-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=a,this.p2x=s,this.p2y=d}v.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,a){if(a===void 0&&(a=1e-6),h<0)return 0;if(1<h)return 1;for(var s=h,d=0;d<8;d++){var m=this.sampleCurveX(s)-h;if(Math.abs(m)<a)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}for(var x=0,I=1,s=h,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-h)<a));d++)m<h?x=s:I=s,s=.5*(I-x)+x;return s},solve:function(h,a){return this.sampleCurveY(this.solveCurveX(h,a))}};var w=l(g);let C;function T(){return C=C??(typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function")}let k;function P(){if(k==null&&(k=!1,T())){var h=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(h){for(let d=0;d<25;d++){var a=4*d;h.fillStyle=`rgb(${a},${1+a},${2+a})`,h.fillRect(d%5,Math.floor(d/5),1,1)}var s=h.getImageData(0,0,5,5).data;for(let d=0;d<100;d++)if(d%4!=3&&s[d]!==d){k=!0;break}}}return k||!1}function O(h){var a,s;return h<=0?0:1<=h?1:(s=(a=h*h)*h,4*(h<.5?s:3*(h-a)+s-.75))}function L(h,a,s,d){const m=new w(h,a,s,d);return function(_){return m.solve(_)}}g=L(.25,.1,.25,1);function D(h,a,s){return Math.min(s,Math.max(a,h))}function N(m,a,s){var d=s-a,m=((m-a)%d+d)%d+a;return m===a?s:m}function F(h,...a){for(const s of a)for(const d in s)h[d]=s[d];return h}let B=1;function V(h,a,s){var d={};for(const m in h)d[m]=a.call(s||this,h[m],m,h);return d}function G(h,a,s){var d={};for(const m in h)a.call(s||this,h[m],m,h)&&(d[m]=h[m]);return d}function q(h){return Array.isArray(h)?h.map(q):typeof h=="object"&&h?V(h,q):h}function z(h,a){for(let s=0;s<h.length;s++)if(0<=a.indexOf(h[s]))return 1}const $={};function K(h){$[h]||(typeof console<"u"&&console.warn(h),$[h]=!0)}function te(h,a,s){return(s.y-h.y)*(a.x-h.x)>(a.y-h.y)*(s.x-h.x)}function re(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let oe=null;function ue(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ce(h,a,s,d,m){return i(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");var _,x,I,R,U,H,J,he,_e,Te=new VideoFrame(h,{timestamp:0});try{var Ne=Te==null?void 0:Te.format;if(!Ne||!Ne.startsWith("BGR")&&!Ne.startsWith("RGB"))throw new Error("Unrecognized format "+Ne);var Ve=Ne.startsWith("BGR"),je=new Uint8ClampedArray(d*m*4);if(yield Te.copyTo(je,(_=h,x=a,I=s,R=d,U=m,H=4*Math.max(-x,0),H=(Math.max(0,I)-I)*R*4+H,J=4*R,he=Math.max(0,x),_e=Math.max(0,I),{rect:{x:he,y:_e,width:Math.min(_.width,x+R)-he,height:Math.min(_.height,I+U)-_e},layout:[{offset:H,stride:J}]})),Ve)for(let Re=0;Re<je.length;Re+=4){var Oe=je[Re];je[Re]=je[Re+2],je[Re+2]=Oe}return je}finally{Te.close()}})}let ae,fe;function le(h,a,s,d){return h.addEventListener(a,s,d),{unsubscribe:()=>{h.removeEventListener(a,s,d)}}}const pe="AbortError";function Fe(){return new Error(pe)}const Be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ze(h){return Be.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const it="global-dispatcher";class ot extends Error{constructor(a,s,d,m){super(`AJAXError: ${s} (${a}): `+d),this.status=a,this.statusText=s,this.url=d,this.body=m}}const ut=()=>re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,st=h=>/^file:/.test(h)||/^file:/.test(ut())&&!/^\w+:/.test(h);function ct(h,a){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){var s=Ze(h.url);if(s)return s(h,a);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:it},a)}if(!st(h.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(_,x){return i(this,void 0,void 0,function*(){var I=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:ut(),signal:x.signal}),I=(_.type==="json"&&I.headers.set("Accept","application/json"),yield fetch(I));if(!I.ok)throw R=yield I.blob(),new ot(I.status,I.statusText,_.url,R);var R=yield _.type==="arrayBuffer"||_.type==="image"?I.arrayBuffer():_.type==="json"?I.json():I.text();if(x.signal.aborted)throw Fe();return{data:R,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(h,a);if(re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:it},a)}return d=h,m=a,new Promise((_,x)=>{const I=new XMLHttpRequest;I.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(I.responseType="arraybuffer");for(const R in d.headers)I.setRequestHeader(R,d.headers[R]);d.type==="json"&&(I.responseType="text",I.setRequestHeader("Accept","application/json")),I.withCredentials=d.credentials==="include",I.onerror=()=>{x(new Error(I.statusText))},I.onload=()=>{if(!m.signal.aborted)if((200<=I.status&&I.status<300||I.status===0)&&I.response!==null){let U=I.response;if(d.type==="json")try{U=JSON.parse(I.response)}catch(H){return void x(H)}_({data:U,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{var R=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});x(new ot(I.status,I.statusText,d.url,R))}},m.signal.addEventListener("abort",()=>{I.abort(),x(Fe())}),I.send(d.body)});var d,m}function Ae(h){var a;return!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0||(h=new URL(h),a=window.location,h.protocol===a.protocol&&h.host===a.host)}function Z(h,a,s){s[h]&&s[h].indexOf(a)!==-1||(s[h]=s[h]||[],s[h].push(a))}function ne(h,a,s){s&&s[h]&&(a=s[h].indexOf(a))!==-1&&s[h].splice(a,1)}class ee{constructor(a,s={}){F(this,s),this.type=a}}class ye extends ee{constructor(a,s={}){super("error",F({error:a},s))}}class Ie{on(a,s){return this._listeners=this._listeners||{},Z(a,s,this._listeners),this}off(a,s){return ne(a,s,this._listeners),ne(a,s,this._oneTimeListeners),this}once(a,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Z(a,s,this._oneTimeListeners),this):new Promise(d=>this.once(a,d))}fire(a,s){var d=(a=typeof a=="string"?new ee(a,s||{}):a).type;if(this.listens(d)){for(const m of(a.target=this)._listeners&&this._listeners[d]?this._listeners[d].slice():[])m.call(this,a);for(const m of this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[])ne(d,m,this._oneTimeListeners),m.call(this,a);s=this._eventedParent,s&&(F(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),s.fire(a))}else a instanceof ye&&console.error(a.error);return this}listens(a){return this._listeners&&this._listeners[a]&&0<this._listeners[a].length||this._oneTimeListeners&&this._oneTimeListeners[a]&&0<this._oneTimeListeners[a].length||this._eventedParent&&this._eventedParent.listens(a)}setEventedParent(a,s){return this._eventedParent=a,this._eventedParentData=s,this}}var ge={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const $e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nt(h,a){if(Array.isArray(h)){if(!Array.isArray(a)||h.length!==a.length)return;for(let s=0;s<h.length;s++)if(!nt(h[s],a[s]))return;return 1}if(typeof h!="object"||h===null||a===null)return h===a;if(typeof a=="object"&&Object.keys(h).length===Object.keys(a).length){for(const s in h)if(!nt(h[s],a[s]))return;return 1}}function pt(h,a){h.push(a)}function wt(h,a,s){pt(s,{command:"addSource",args:[h,a[h]]})}function mt(h,a,s){pt(a,{command:"removeSource",args:[h]}),s[h]=!0}function zt(h,a,s,d){a=a||{};let m;for(m in h=h||{})!Object.prototype.hasOwnProperty.call(h,m)||Object.prototype.hasOwnProperty.call(a,m)||mt(m,s,d);for(m in a)Object.prototype.hasOwnProperty.call(a,m)&&(Object.prototype.hasOwnProperty.call(h,m)?nt(h[m],a[m])||(h[m].type==="geojson"&&a[m].type==="geojson"&&function(R,U,H){let J;for(J in R[H])if(Object.prototype.hasOwnProperty.call(R[H],J)&&J!=="data"&&!nt(R[H][J],U[H][J]))return;for(J in U[H])if(Object.prototype.hasOwnProperty.call(U[H],J)&&J!=="data"&&!nt(R[H][J],U[H][J]))return;return 1}(h,a,m)?pt(s,{command:"setGeoJSONSourceData",args:[m,a[m].data]}):(_=m,x=a,mt(_,I=s,d),wt(_,x,I))):wt(m,a,s));var _,x,I}function Pt(h,a,s,d,m,_){a=a||{};for(const x in h=h||{})!Object.prototype.hasOwnProperty.call(h,x)||nt(h[x],a[x])||s.push({command:_,args:[d,x,a[x],m]});for(const x in a)!Object.prototype.hasOwnProperty.call(a,x)||Object.prototype.hasOwnProperty.call(h,x)||nt(h[x],a[x])||s.push({command:_,args:[d,x,a[x],m]})}function Zt(h){return h.id}function We(h,a){return h[a.id]=a,h}class Ge{constructor(a,s,d,m){this.message=(a?a+": ":"")+d,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Rt(h,...a){for(const s of a)for(const d in s)h[d]=s[d];return h}class Dt extends Error{constructor(a,s){super(s),this.message=s,this.key=a}}class qt{constructor(a,s=[]){this.parent=a,this.bindings={};for(var[d,m]of s)this.bindings[d]=m}concat(a){return new qt(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Yt={kind:"null"},xt={kind:"number"},Et={kind:"string"},St={kind:"boolean"},kt={kind:"color"},cn={kind:"object"},an={kind:"value"},Qn={kind:"collator"},tr={kind:"formatted"},lr={kind:"padding"},Le={kind:"resolvedImage"},de={kind:"variableAnchorOffsetCollection"};function xe(h,a){return{kind:"array",itemType:h,N:a}}function Ee(h){var a;return h.kind==="array"?(a=Ee(h.itemType),typeof h.N=="number"?`array<${a}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${a}>`):h.kind}const Ye=[Yt,xt,Et,St,kt,tr,cn,xe(an),lr,Le,de];function lt(h,a){if(a.kind==="error")return null;if(h.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!lt(h.itemType,a.itemType))&&(typeof h.N!="number"||h.N===a.N))return null}else{if(h.kind===a.kind)return null;if(h.kind==="value"){for(const s of Ye)if(!lt(s,a))return null}}return`Expected ${Ee(h)} but found ${Ee(a)} instead.`}function Ce(h,a){return a.some(s=>s.kind===h.kind)}function ke(h,a){return a.some(s=>s==="null"?h===null:s==="array"?Array.isArray(h):s==="object"?h&&!Array.isArray(h)&&typeof h=="object":s===typeof h)}function De(h,a){return h.kind==="array"&&a.kind==="array"?h.itemType.kind===a.itemType.kind&&typeof h.N=="number":h.kind===a.kind}const He=.96422,vt=1,Ct=.82521,Nt=4/29,jt=6/29,Ht=3*jt*jt,Ft=jt*jt*jt,vn=Math.PI/180,gn=180/Math.PI;function _n(h){return(h%=360)<0&&(h+=360),h}function Dn([I,a,s,d]){let m,_;var x=dt((.2225045*(I=ft(I))+.7168786*(a=ft(a))+.0606169*(s=ft(s)))/vt),I=(I===a&&a===s?m=_=x:(m=dt((.4360747*I+.3850649*a+.1430804*s)/He),_=dt((.0139322*I+.0971045*a+.7141733*s)/Ct)),116*x-16);return[I<0?0:I,500*(m-x),200*(x-_),d]}function ft(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function dt(h){return h>Ft?Math.pow(h,1/3):h/Ht+Nt}function Wt([h,a,s,d]){return h=(h+16)/116,a=isNaN(a)?h:h+a/500,s=isNaN(s)?h:h-s/200,h=vt*Bn(h),[Mn(3.1338561*(a=He*Bn(a))-1.6168667*h-.4906146*(s=Ct*Bn(s))),Mn(-.9787684*a+1.9161415*h+.033454*s),Mn(.0719453*a-.2289914*h+1.4052427*s),d]}function Mn(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:1<h?1:h}function Bn(h){return h>jt?h*h*h:Ht*(h-Nt)}function dr(a){var[a,s,d,m]=Dn(a),_=Math.sqrt(s*s+d*d);return[Math.round(1e4*_)?_n(Math.atan2(d,s)*gn):NaN,_,a,m]}function qn(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];var Te=_i[h];if(Te)return[Te,s,a]=Te,[Te/255,s/255,a/255,1];if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h))return Te=h.length<6?1:2,[to(h.slice(s=1,s+=Te)),to(h.slice(s,s+=Te)),to(h.slice(s,s+=Te)),to(h.slice(s,s+Te)||"ff")];if(h.startsWith("rgb")){var a=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(a){var[,s,Te,a,d,m,_,x,I,R,U,H]=a,a=[a||" ",_||" ",R].join("");return(a==="  "||a==="  /"||a===",,"||a===",,,")&&(_=[Te,m,I].join(""),R=_==="%%%"?100:_===""?255:0,R&&(a=[ua(+s/R,0,1),ua(+d/R,0,1),ua(+x/R,0,1),U?la(+U,H):1],lo(a)))?a:void 0}}var J,he,_e,Te=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(Te){var[,m,I,_,s,d,x,R,U]=Te,H=[I||" ",s||" ",x].join("");if((H==="  "||H==="  /"||H===",,"||H===",,,")&&(a=[+m,ua(+_,0,100),ua(+d,0,100),R?la(+R,U):1],lo(a)))return[J,he,_e,h]=[a][0],J=_n(J),he/=100,_e/=100,[Ne(0),Ne(8),Ne(4),h]}function Ne(je){var je=(je+J/30)%12,Oe=he*Math.min(_e,1-_e);return _e-Oe*Math.max(-1,Math.min(je-3,9-je,1))}}function to(h){return parseInt(h.padEnd(2,h),16)/255}function la(h,a){return ua(a?h/100:h,0,1)}function ua(h,a,s){return Math.min(Math.max(a,h),s)}function lo(h){return!h.some(Number.isNaN)}const _i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class $n{constructor(a,s,d,m=1,_=!0){this.r=a,this.g=s,this.b=d,this.a=m,_||(this.r*=m,this.g*=m,this.b*=m,m)||this.overwriteGetter("rgb",[a,s,d,m])}static parse(a){return a instanceof $n?a:typeof a=="string"&&(a=qn(a))?new $n(...a,!1):void 0}get rgb(){var{r:a,g:s,b:d,a:m}=this,_=m||1/0;return this.overwriteGetter("rgb",[a/_,s/_,d/_,m])}get hcl(){return this.overwriteGetter("hcl",dr(this.rgb))}get lab(){return this.overwriteGetter("lab",Dn(this.rgb))}overwriteGetter(a,s){return Object.defineProperty(this,a,{value:s}),s}toString(){var[a,s,d,m]=this.rgb;return`rgba(${[a,s,d].map(_=>Math.round(255*_)).join(",")},${m})`}}$n.black=new $n(0,0,0,1),$n.white=new $n(1,1,1,1),$n.transparent=new $n(0,0,0,0),$n.red=new $n(1,0,0,1);class no{constructor(a,s,d){this.sensitivity=a?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale||[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,s){return this.collator.compare(a,s)}resolvedLocale(){return new Intl.Collator(this.locale||[]).resolvedOptions().locale}}class vr{constructor(a,s,d,m,_){this.text=a,this.image=s,this.scale=d,this.fontStack=m,this.textColor=_}}class uo{constructor(a){this.sections=a}static fromString(a){return new uo([new vr(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.name.length!==0)}static factory(a){return a instanceof uo?a:uo.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}}class ur{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof ur)return a;if(typeof a=="number")return new ur([a,a,a,a]);if(Array.isArray(a)&&!(a.length<1||4<a.length)){for(const s of a)if(typeof s!="number")return;switch(a.length){case 1:a=[a[0],a[0],a[0],a[0]];break;case 2:a=[a[0],a[1],a[0],a[1]];break;case 3:a=[a[0],a[1],a[2],a[1]]}return new ur(a)}}toString(){return JSON.stringify(this.values)}}const ci=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Mo{constructor(a){this.values=a.slice()}static parse(a){if(a instanceof Mo)return a;if(Array.isArray(a)&&!(a.length<1)&&a.length%2==0){for(let m=0;m<a.length;m+=2){var s=a[m],d=a[m+1];if(typeof s!="string"||!ci.has(s)||!Array.isArray(d)||d.length!==2||typeof d[0]!="number"||typeof d[1]!="number")return}return new Mo(a)}}toString(){return JSON.stringify(this.values)}}class Vi{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new Vi({name:a,available:!1}):null}}function Ji(h,a,s,d){return typeof h=="number"&&0<=h&&h<=255&&typeof a=="number"&&0<=a&&a<=255&&typeof s=="number"&&0<=s&&s<=255?d===void 0||typeof d=="number"&&0<=d&&d<=1?null:`Invalid rgba value [${[h,a,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[h,a,s,d]:[h,a,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tl(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof $n||h instanceof no||h instanceof uo||h instanceof ur||h instanceof Mo||h instanceof Vi)return 1;if(Array.isArray(h)){for(const a of h)if(!tl(a))return;return 1}if(typeof h=="object"){for(const a in h)if(!tl(h[a]))return;return 1}}function di(h){if(h===null)return Yt;if(typeof h=="string")return Et;if(typeof h=="boolean")return St;if(typeof h=="number")return xt;if(h instanceof $n)return kt;if(h instanceof no)return Qn;if(h instanceof uo)return tr;if(h instanceof ur)return lr;if(h instanceof Mo)return de;if(h instanceof Vi)return Le;if(Array.isArray(h)){var a=h.length;let d;for(const m of h){var s=di(m);if(d){if(d!==s){d=an;break}}else d=s}return xe(d||an,a)}return cn}function nl(h){var a=typeof h;return h===null?"":a=="string"||a=="number"||a=="boolean"?String(h):h instanceof $n||h instanceof uo||h instanceof ur||h instanceof Mo||h instanceof Vi?h.toString():JSON.stringify(h)}class ba{constructor(a,s){this.type=a,this.value=s}static parse(a,s){if(a.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!tl(a[1]))return s.error("invalid value");a=a[1];let d=di(a);return s=s.expectedType,d.kind!=="array"||d.N!==0||!s||s.kind!=="array"||typeof s.N=="number"&&s.N!==0||(d=s),new ba(d,a)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Or{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const Ua={string:Et,number:xt,boolean:St,object:cn};class wr{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");let d=1,m;var _=a[0];if(_==="array"){let R;if(2<a.length){const H=a[1];if(typeof H!="string"||!(H in Ua)||H==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);R=Ua[H],d++}else R=an;let U;if(3<a.length){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return s.error('The length argument to "array" must be a positive integer literal',2);U=a[2],d++}m=xe(R,U)}else{if(!Ua[_])throw new Error("Types doesn't contain name = "+_);m=Ua[_]}for(var x=[];d<a.length;d++){var I=s.parse(a[d],d,an);if(!I)return null;x.push(I)}return new wr(m,x)}evaluate(a){for(let d=0;d<this.args.length;d++){var s=this.args[d].evaluate(a);if(!lt(this.type,di(s)))return s;if(d===this.args.length-1)throw new Or(`Expected value to be of type ${Ee(this.type)}, but found ${Ee(di(s))} instead.`)}throw new Error}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Y={"to-boolean":St,"to-color":kt,"to-number":xt,"to-string":Et};class be{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");var d=a[0];if(!Y[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&a.length!==2)return s.error("Expected one argument.");var d=Y[d],m=[];for(let x=1;x<a.length;x++){var _=s.parse(a[x],x,an);if(!_)return null;m.push(_)}return new be(d,m)}evaluate(a){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(a);case"color":{let x,I;for(const R of this.args){if(x=R.evaluate(a),I=null,x instanceof $n)return x;if(typeof x=="string"){var s=a.parseColor(x);if(s)return s}else if(Array.isArray(x)&&!(I=x.length<3||4<x.length?`Invalid rbga value ${JSON.stringify(x)}: expected an array containing either three or four numeric values.`:Ji(x[0],x[1],x[2],x[3])))return new $n(x[0]/255,x[1]/255,x[2]/255,x[3])}throw new Or(I||`Could not parse color from value '${typeof x=="string"?x:JSON.stringify(x)}'`)}case"padding":{let x;for(const I of this.args){x=I.evaluate(a);var d=ur.parse(x);if(d)return d}throw new Or(`Could not parse padding from value '${typeof x=="string"?x:JSON.stringify(x)}'`)}case"variableAnchorOffsetCollection":{let x;for(const I of this.args){x=I.evaluate(a);var m=Mo.parse(x);if(m)return m}throw new Or(`Could not parse variableAnchorOffsetCollection from value '${typeof x=="string"?x:JSON.stringify(x)}'`)}case"number":{let x=null;for(const I of this.args){if((x=I.evaluate(a))===null)return 0;var _=Number(x);if(!isNaN(_))return _}throw new Or(`Could not convert ${JSON.stringify(x)} to number.`)}case"formatted":return uo.fromString(nl(this.args[0].evaluate(a)));case"resolvedImage":return Vi.fromString(nl(this.args[0].evaluate(a)));default:return nl(this.args[0].evaluate(a))}}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}const Ue=["Unknown","Point","LineString","Polygon"];class Je{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ue[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let s=this._parseColorCache[a];return s=s||(this._parseColorCache[a]=$n.parse(a))}}class Mt{constructor(a,s,d=[],m,_=new qt,x=[]){this.registry=a,this.path=d,this.key=d.map(I=>`[${I}]`).join(""),this.scope=_,this.errors=x,this.expectedType=m,this._isConstant=s}parse(a,s,d,m,_={}){return(s?this.concat(s,d,m):this)._parse(a,_)}_parse(a,s){function d(I,R,U){return U==="assert"?new wr(R,[I]):U==="coerce"?new be(R,[I]):I}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var m=a[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;var _=this.registry[m];if(_){let I=_.parse(a,this);if(!I)return null;if(this.expectedType){var _=this.expectedType,x=I.type;if(_.kind!=="string"&&_.kind!=="number"&&_.kind!=="boolean"&&_.kind!=="object"&&_.kind!=="array"||x.kind!=="value")if(_.kind!=="color"&&_.kind!=="formatted"&&_.kind!=="resolvedImage"||x.kind!=="value"&&x.kind!=="string")if(_.kind!=="padding"||x.kind!=="value"&&x.kind!=="number"&&x.kind!=="array")if(_.kind!=="variableAnchorOffsetCollection"||x.kind!=="value"&&x.kind!=="array"){if(this.checkSubtype(_,x))return null}else I=d(I,_,s.typeAnnotation||"coerce");else I=d(I,_,s.typeAnnotation||"coerce");else I=d(I,_,s.typeAnnotation||"coerce");else I=d(I,_,s.typeAnnotation||"assert")}if(!(I instanceof ba)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){x=new Je;try{I=new ba(I.type,I.evaluate(x))}catch(R){return this.error(R.message),null}}return I}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return a===void 0?this.error("'undefined' value invalid. Use null instead."):typeof a=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof a} instead.`)}concat(a,s,d){return a=typeof a=="number"?this.path.concat(a):this.path,d=d?this.scope.concat(d):this.scope,new Mt(this.registry,this._isConstant,a,s||null,d,this.errors)}error(a,...s){s=""+this.key+s.map(d=>`[${d}]`).join(""),this.errors.push(new Dt(s,a))}checkSubtype(a,s){return a=lt(a,s),a&&this.error(a),a}}class It{constructor(a,s,d){this.type=Qn,this.locale=d,this.caseSensitive=a,this.diacriticSensitive=s}static parse(a,s){if(a.length!==2)return s.error("Expected one argument.");if(a=a[1],typeof a!="object"||Array.isArray(a))return s.error("Collator options argument must be an object.");var d=s.parse(a["case-sensitive"]!==void 0&&a["case-sensitive"],1,St);if(!d)return null;var m=s.parse(a["diacritic-sensitive"]!==void 0&&a["diacritic-sensitive"],1,St);if(!m)return null;let _=null;return a.locale&&!(_=s.parse(a.locale,1,Et))?null:new It(d,m,_)}evaluate(a){return new no(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}}const Gt=8192;function Cn(h,a){h[0]=Math.min(h[0],a[0]),h[1]=Math.min(h[1],a[1]),h[2]=Math.max(h[2],a[0]),h[3]=Math.max(h[3],a[1])}function kn(h,a){return!(h[0]<=a[0]||h[2]>=a[2]||h[1]<=a[1]||h[3]>=a[3])}function yr(d,m){var s=(180+d[0])/360,d=(d=d[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360),m=Math.pow(2,m.z);return[Math.round(s*m*Gt),Math.round(d*m*Gt)]}function Sr(h,a){let s=!1;for(let U=0,H=a.length;U<H;U++){var d=a[U];for(let J=0,he=d.length;J<he-1;J++){if(m=h,_=d[J],x=d[J+1],R=I=void 0,I=m[0]-_[0],_=m[1]-_[1],R=m[0]-x[0],m=m[1]-x[1],I*m-R*_==0&&I*R<=0&&_*m<=0)return;x=h,I=d[J],R=d[J+1],I[1]>x[1]!=R[1]>x[1]&&x[0]<(R[0]-I[0])*(x[1]-I[1])/(R[1]-I[1])+I[0]&&(s=!s)}}var m,_,x,I,R;return s}function Ho(m,x,U,R){var H=m[0]-U[0],m=m[1]-U[1],_=x[0]-U[0],x=x[1]-U[1],I=R[0]-U[0],R=R[1]-U[1],U=H*R-I*m,H=_*R-I*x;return 0<U&&H<0||U<0&&0<H}function Is(h,a,s){for(const U of s)for(let H=0;H<U.length-1;++H)if(d=h,m=a,_=U[H],x=U[H+1],R=I=void 0,I=[m[0]-d[0],m[1]-d[1]],(R=[x[0]-_[0],x[1]-_[1]])[0]*I[1]-R[1]*I[0]!=0&&!(!Ho(d,m,_,x)||!Ho(_,x,d,m)))return 1;var d,m,_,x,I,R}function Qa(h,a){for(let s=0;s<h.length;++s)if(!Sr(h[s],a))return;for(let s=0;s<h.length-1;++s)if(Is(h[s],h[s+1],a))return;return 1}function wa(h,a,s){var d=[];for(let x=0;x<h.length;x++){var m=[];for(let I=0;I<h[x].length;I++){var _=yr(h[x][I],s);Cn(a,_),m.push(_)}d.push(m)}return d}function Pl(h,a,s){var d=[];for(let _=0;_<h.length;_++){var m=wa(h[_],a,s);d.push(m)}return d}function ds(h,a,s,d){if(h[0]<s[0]||h[0]>s[2]){var m=.5*d;let _=h[0]-s[0]>m?-d:s[0]-h[0]>m?d:0;_===0&&(_=h[0]-s[2]>m?-d:s[2]-h[0]>m?d:0),h[0]+=_}Cn(a,h)}function hs(h,a,s,d){var m=Math.pow(2,d.z)*Gt,_=[d.x*Gt,d.y*Gt],x=[];for(const R of h)for(const U of R){var I=[U.x+_[0],U.y+_[1]];ds(I,a,s,m),x.push(I)}return x}function xa(h,a,s,d){var m=Math.pow(2,d.z)*Gt,_=[d.x*Gt,d.y*Gt],x=[];for(const U of h){var I=[];for(const H of U){var R=[H.x+_[0],H.y+_[1]];Cn(a,R),I.push(R)}x.push(I)}if(a[2]-a[0]<=m/2){(d=a)[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(const U of x)for(const H of U)ds(H,a,s,m)}return x}function ks(h,a){var s=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=h.canonicalID();if(a.type==="Polygon"){var _=wa(a.coordinates,d,m),x=hs(h.geometry(),s,d,m);if(!kn(s,d))return!1;for(const R of x)if(!Sr(R,_))return!1}if(a.type==="MultiPolygon"){var I=Pl(a.coordinates,d,m),x=hs(h.geometry(),s,d,m);if(!kn(s,d))return!1;for(const U of x)if(!function(H,J){for(let he=0;he<J.length;he++)if(Sr(H,J[he]))return 1}(U,I))return!1}return!0}function fs(h,a){var s=[1/0,1/0,-1/0,-1/0],d=[1/0,1/0,-1/0,-1/0],m=h.canonicalID();if(a.type==="Polygon"){var _=wa(a.coordinates,d,m),x=xa(h.geometry(),s,d,m);if(!kn(s,d))return!1;for(const R of x)if(!Qa(R,_))return!1}if(a.type==="MultiPolygon"){var I=Pl(a.coordinates,d,m),x=xa(h.geometry(),s,d,m);if(!kn(s,d))return!1;for(const U of x)if(!function(H,J){for(let he=0;he<J.length;he++)if(Qa(H,J[he]))return 1}(U,I))return!1}return!0}class Ja{constructor(a,s){this.type=St,this.geojson=a,this.geometries=s}static parse(a,s){if(a.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(tl(a[1])){if(a=a[1],a.type==="FeatureCollection"){var d=[];for(const I of a.features){var{type:m,coordinates:_}=I.geometry;m==="Polygon"&&d.push(_),m==="MultiPolygon"&&d.push(..._)}if(d.length)return x={type:"MultiPolygon",coordinates:d},new Ja(a,x)}else if(a.type==="Feature"){var x=a.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new Ja(a,a.geometry)}else if(a.type==="Polygon"||a.type==="MultiPolygon")return new Ja(a,a)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return ks(a,this.geometries);if(a.geometryType()==="LineString")return fs(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ps{constructor(a,s){this.type=s.type,this.name=a,this.boundExpression=s}static parse(a,s){return a.length!==2||typeof a[1]!="string"?s.error("'var' expression requires exactly one string literal argument."):(a=a[1],s.scope.has(a)?new Ps(a,s.scope.get(a)):s.error(`Unknown variable "${a}". Make sure "${a}" has been bound in an enclosing "let" expression before using it.`,1))}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}}class ps{constructor(a,s,d,m){this.name=a,this.type=s,this._evaluate=d,this.args=m}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}static parse(a,s){var d=a[0],I=ps.definitions[d];if(!I)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);var m,_,x=Array.isArray(I)?I[0]:I.type,I=Array.isArray(I)?[[I[1],I[2]]]:I.overloads,R=I.filter(([je])=>!Array.isArray(je)||je.length===a.length-1);let U=null;for([m,_]of R){U=new Mt(s.registry,Mu,s.path,null,s.scope);var H=[];let je=!1;for(let Oe=1;Oe<a.length;Oe++){var he=a[Oe],J=Array.isArray(m)?m[Oe-1]:m.type,he=U.parse(he,1+H.length,J);if(!he){je=!0;break}H.push(he)}if(!je)if(Array.isArray(m)&&m.length!==H.length)U.error(`Expected ${m.length} arguments, but found ${H.length} instead.`);else{for(let Oe=0;Oe<H.length;Oe++){var _e=Array.isArray(m)?m[Oe]:m.type,Te=H[Oe];U.concat(Oe+1).checkSubtype(_e,Te.type)}if(U.errors.length===0)return new ps(d,x,_,H)}}if(R.length===1)s.errors.push(...U.errors);else{var R=(R.length?R:I).map(([Oe])=>Im(Oe)).join(" | "),Ne=[];for(let Oe=1;Oe<a.length;Oe++){var Ve=s.parse(a[Oe],1+Ne.length);if(!Ve)return null;Ne.push(Ee(Ve.type))}s.error(`Expected arguments of type ${R}, but found (${Ne.join(", ")}) instead.`)}return null}static register(a,s){for(const d in ps.definitions=s)a[d]=ps}}function Im(h){return Array.isArray(h)?`(${h.map(Ee).join(", ")})`:`(${Ee(h.type)}...)`}function Mu(h){if(h instanceof Ps)return Mu(h.boundExpression);if(h instanceof ps&&h.name==="error"||h instanceof It||h instanceof Ja)return!1;const a=h instanceof be||h instanceof wr;let s=!0;return h.eachChild(d=>{s=a?s&&Mu(d):s&&d instanceof ba}),!!s&&Bh(h)&&eu(h,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Bh(h){if(h instanceof ps&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Ja)return!1;let a=!0;return h.eachChild(s=>{a&&!Bh(s)&&(a=!1)}),a}function es(h){if(!(h instanceof ps&&h.name==="feature-state")){let a=!0;return h.eachChild(s=>{a&&!es(s)&&(a=!1)}),a}}function eu(h,a){if(h instanceof ps&&0<=a.indexOf(h.name))return!1;let s=!0;return h.eachChild(d=>{s&&!eu(d,a)&&(s=!1)}),s}function Ru(h,a){var s=h.length-1;let d=0,m=s;for(var _,x,I;d<=m;)if(x=h[_=Math.floor((d+m)/2)],I=h[_+1],x<=a){if(_===s||a<I)return _;d=_+1}else{if(!(a<x))throw new Or("Input is not a number.");m=_-1}return 0}class po{constructor(a,s,d){this.type=a,this.input=s,this.labels=[],this.outputs=[];for(var[m,_]of d)this.labels.push(m),this.outputs.push(_)}static parse(a,s){if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");var d=s.parse(a[1],1,xt);if(!d)return null;var m=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let H=1;H<a.length;H+=2){var x=H===1?-1/0:a[H],I=a[H+1],R=H,U=H+1;if(typeof x!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(m.length&&m[m.length-1][0]>=x)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);if(R=s.parse(I,U,_),!R)return null;_=_||R.type,m.push([x,R])}return new po(_,d,m)}evaluate(a){var s,d,m=this.labels,_=this.outputs;return(m.length===1||(s=this.input.evaluate(a))<=m[0]?_[0]:s>=m[(d=m.length)-1]?_[d-1]:_[Ru(m,s)]).evaluate(a)}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function As(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Qc=Dr;function Dr(h,a,s,d){this.cx=3*h,this.bx=3*(s-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(d-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=a,this.p2x=s,this.p2y=d}Dr.prototype={sampleCurveX:function(h){return((this.ax*h+this.bx)*h+this.cx)*h},sampleCurveY:function(h){return((this.ay*h+this.by)*h+this.cy)*h},sampleCurveDerivativeX:function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},solveCurveX:function(h,a){if(a===void 0&&(a=1e-6),h<0)return 0;if(1<h)return 1;for(var s=h,d=0;d<8;d++){var m=this.sampleCurveX(s)-h;if(Math.abs(m)<a)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=m/_}for(var x=0,I=1,s=h,d=0;d<20&&(m=this.sampleCurveX(s),!(Math.abs(m-h)<a));d++)m<h?x=s:I=s,s=.5*(I-x)+x;return s},solve:function(h,a){return this.sampleCurveY(this.solveCurveX(h,a))}};var Al=As(Qc);function Ca(h,a,s){return h+s*(a-h)}function fc(h,a,s){return h.map((d,m)=>Ca(d,a[m],s))}const ea={number:Ca,color:function(h,a,s,d="rgb"){switch(d){case"rgb":var[m,_,H,x]=fc(h.rgb,a.rgb,s);return new $n(m,_,H,x,!1);case"hcl":{var[m,_,H,x]=h.hcl,[R,U,J,I]=a.hcl;let Ve,je;if(isNaN(m)||isNaN(R))isNaN(m)?isNaN(R)?Ve=NaN:(Ve=R,H!==1&&H!==0||(je=U)):(Ve=m,J!==1&&J!==0||(je=_));else{let at=R-m;m<R&&180<at?at-=360:R<m&&180<m-R&&(at+=360),Ve=m+s*at}[R,m,_,U]=[[Ve,je??Ca(_,U,s),Ca(H,J,s),Ca(x,I,s)]][0],R=isNaN(R)?0:R*vn;var[H,J,x,I]=Wt([_,Math.cos(R)*m,Math.sin(R)*m,U]);return new $n(H,J,x,I,!1)}case"lab":var[R,U,H,J]=Wt(fc(h.lab,a.lab,s));return new $n(R,U,H,J,!1)}},array:fc,padding:function(h,a,s){return new ur(fc(h.values,a.values,s))},variableAnchorOffsetCollection:function(h,a,s){var d=h.values,m=a.values;if(d.length!==m.length)throw new Or(`Cannot interpolate values of different length. from: ${h.toString()}, to: `+a.toString());var _=[];for(let H=0;H<d.length;H+=2){if(d[H]!==m[H])throw new Or(`Cannot interpolate values containing mismatched anchors. from[${H}]: ${d[H]}, to[${H}]: `+m[H]);_.push(d[H]);var[x,I]=d[H+1],[R,U]=m[H+1];_.push([Ca(x,R,s),Ca(I,U,s)])}return new Mo(_)}};class Aa{constructor(a,s,d,m,_){this.type=a,this.operator=s,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(var[x,I]of _)this.labels.push(x),this.outputs.push(I)}static interpolationFactor(a,s,d,m){let _=0;return a.name==="exponential"?_=Ou(s,a.base,d,m):a.name==="linear"?_=Ou(s,1,d,m):a.name==="cubic-bezier"&&(a=a.controlPoints,a=new Al(a[0],a[1],a[2],a[3]),_=a.solve(Ou(s,1,d,m))),_}static parse(a,s){let[d,m,_,...x]=a;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){var I=m[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:I}}else{if(m[0]!=="cubic-bezier")return s.error("Unknown interpolation type "+String(m[0]),1,0);if(I=m.slice(1),I.length!==4||I.some(Te=>typeof Te!="number"||Te<0||1<Te))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:I}}if(a.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(!(_=s.parse(_,2,xt)))return null;var R=[];let U=null;d==="interpolate-hcl"||d==="interpolate-lab"?U=kt:s.expectedType&&s.expectedType.kind!=="value"&&(U=s.expectedType);for(let Te=0;Te<x.length;Te+=2){var H=x[Te],J=x[Te+1],he=Te+3,_e=Te+4;if(typeof H!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',he);if(R.length&&R[R.length-1][0]>=H)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',he);if(he=s.parse(J,_e,U),!he)return null;U=U||he.type,R.push([H,he])}return De(U,xt)||De(U,kt)||De(U,lr)||De(U,de)||De(U,xe(xt))?new Aa(U,d,m,_,R):s.error(`Type ${Ee(U)} is not interpolatable.`)}evaluate(a){var x=this.labels,s=this.outputs;if(x.length===1)return s[0].evaluate(a);var d=this.input.evaluate(a);if(d<=x[0])return s[0].evaluate(a);var m=x.length;if(d>=x[m-1])return s[m-1].evaluate(a);var m=Ru(x,d),_=x[m],x=x[m+1],I=Aa.interpolationFactor(this.interpolation,d,_,x),R=s[m].evaluate(a),U=s[m+1].evaluate(a);switch(this.operator){case"interpolate":return ea[this.type.kind](R,U,I);case"interpolate-hcl":return ea.color(R,U,I,"hcl");case"interpolate-lab":return ea.color(R,U,I,"lab")}}eachChild(a){a(this.input);for(const s of this.outputs)a(s)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}}function Ou(h,a,s,d){return d-=s,h-=s,d==0?0:a===1?h/d:(Math.pow(a,h)-1)/(Math.pow(a,d)-1)}class tu{constructor(a,s){this.type=a,this.args=s}static parse(a,s){if(a.length<2)return s.error("Expectected at least one argument.");let d=null;const m=s.expectedType;m&&m.kind!=="value"&&(d=m);var _=[];for(const I of a.slice(1)){var x=s.parse(I,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!x)return null;d=d||x.type,_.push(x)}if(d)return m&&_.some(I=>lt(m,I.type))?new tu(an,_):new tu(d,_);throw new Error("No output type")}evaluate(a){let s=null,d=0,m;for(const _ of this.args)if(d++,(s=(s=_.evaluate(a))&&s instanceof Vi&&!s.available&&(m=m||s.name,s=null,d===this.args.length)?m:s)!==null)break;return s}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}}class Xc{constructor(a,s){this.type=s.type,this.bindings=[].concat(a),this.result=s}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const s of this.bindings)a(s[1]);a(this.result)}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);var d=[];for(let I=1;I<a.length-1;I+=2){var m=a[I];if(typeof m!="string")return s.error(`Expected string, but found ${typeof m} instead.`,I);if(/[^a-zA-Z0-9_]/.test(m))return s.error("Variable names must contain only alphanumeric characters or '_'.",I);var _=s.parse(a[I+1],I+1);if(!_)return null;d.push([m,_])}var x=s.parse(a[a.length-1],a.length-1,s.expectedType,d);return x?new Xc(d,x):null}outputDefined(){return this.result.outputDefined()}}function Ml(h,a){return h==="=="||h==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function qd(h,a,s,d){return d.compare(a,s)===0}function nu(h,a,s){const d=h!=="=="&&h!=="!=";return class M9{constructor(_,x,I){this.type=St,this.lhs=_,this.rhs=x,this.collator=I,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");var I=_[0];let R=x.parse(_[1],1,an);if(!R)return null;if(!Ml(I,R.type))return x.concat(1).error(`"${I}" comparisons are not supported for type '${Ee(R.type)}'.`);let U=x.parse(_[2],2,an);if(!U)return null;if(!Ml(I,U.type))return x.concat(2).error(`"${I}" comparisons are not supported for type '${Ee(U.type)}'.`);if(R.type.kind!==U.type.kind&&R.type.kind!=="value"&&U.type.kind!=="value")return x.error(`Cannot compare types '${Ee(R.type)}' and '${Ee(U.type)}'.`);d&&(R.type.kind==="value"&&U.type.kind!=="value"?R=new wr(U.type,[R]):R.type.kind!=="value"&&U.type.kind==="value"&&(U=new wr(R.type,[U])));let H=null;if(_.length===4){if(R.type.kind!=="string"&&U.type.kind!=="string"&&R.type.kind!=="value"&&U.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(!(H=x.parse(_[3],3,Qn)))return null}return new M9(R,U,H)}evaluate(_){var x=this.lhs.evaluate(_),I=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){var R=di(x),U=di(I);if(R.kind!==U.kind||R.kind!=="string"&&R.kind!=="number")throw new Or(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${R.kind}, ${U.kind}) instead.`)}return this.collator&&!d&&this.hasUntypedArgument&&(R=di(x),U=di(I),R.kind!=="string"||U.kind!=="string")?a(_,x,I):this.collator?s(_,x,I,this.collator.evaluate(_)):a(_,x,I)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}var Qc=nu("==",function(h,a,s){return a===s},qd),ha=nu("!=",function(h,a,s){return a!==s},function(h,a,s,d){return!qd(0,a,s,d)}),vs=nu("<",function(h,a,s){return a<s},function(h,a,s,d){return d.compare(a,s)<0}),rl=nu(">",function(h,a,s){return s<a},function(h,a,s,d){return 0<d.compare(a,s)}),ms=nu("<=",function(h,a,s){return a<=s},function(h,a,s,d){return d.compare(a,s)<=0}),go=nu(">=",function(h,a,s){return s<=a},function(h,a,s,d){return 0<=d.compare(a,s)});class Du{constructor(a){this.type=tr,this.sections=a}static parse(a,s){if(a.length<2)return s.error("Expected at least one argument.");var d=a[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");var m=[];let _=!1;for(let R=1;R<=a.length-1;++R){var x=a[R];if(_&&typeof x=="object"&&!Array.isArray(x)){_=!1;let U=null;if(x["font-scale"]&&!(U=s.parse(x["font-scale"],1,xt)))return null;let H=null;if(x["text-font"]&&!(H=s.parse(x["text-font"],1,xe(Et))))return null;let J=null;if(x["text-color"]&&!(J=s.parse(x["text-color"],1,kt)))return null;x=m[m.length-1],x.scale=U,x.font=H,x.textColor=J}else{if(x=s.parse(a[R],1,an),!x)return null;var I=x.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,m.push({content:x,scale:null,font:null,textColor:null})}}return new Du(m)}evaluate(a){return new uo(this.sections.map(s=>{var d=s.content.evaluate(a);return di(d)===Le?new vr("",d,null,null,null):new vr(nl(d),null,s.scale?s.scale.evaluate(a):null,s.font?s.font.evaluate(a).join(","):null,s.textColor?s.textColor.evaluate(a):null)}))}eachChild(a){for(const s of this.sections)a(s.content),s.scale&&a(s.scale),s.font&&a(s.font),s.textColor&&a(s.textColor)}outputDefined(){return!1}}const qi={"==":Qc,"!=":ha,">":rl,"<":vs,">=":go,"<=":ms,array:wr,at:class R9{constructor(a,s,d){this.type=a,this.index=s,this.input=d}static parse(a,s){var d;return a.length!==3?s.error(`Expected 2 arguments, but found ${a.length-1} instead.`):(d=s.parse(a[1],1,xt),a=s.parse(a[2],2,xe(s.expectedType||an)),d&&a?(s=a.type,new R9(s.itemType,d,a)):null)}evaluate(d){var s=this.index.evaluate(d),d=this.input.evaluate(d);if(s<0)throw new Or(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Or(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Or(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}},boolean:wr,case:class O9{constructor(a,s,d){this.type=a,this.branches=s,this.otherwise=d}static parse(a,s){if(a.length<4)return s.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);var m=[];for(let R=1;R<a.length-1;R+=2){var _=s.parse(a[R],R,St);if(!_)return null;var x=s.parse(a[R+1],R+1,d);if(!x)return null;m.push([_,x]),d=d||x.type}var I=s.parse(a[a.length-1],a.length-1,d);if(!I)return null;if(d)return new O9(d,m,I);throw new Error("Can't infer output type")}evaluate(a){for(var[s,d]of this.branches)if(s.evaluate(a))return d.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(var[s,d]of this.branches)a(s),a(d);a(this.otherwise)}outputDefined(){return this.branches.every(([,a])=>a.outputDefined())&&this.otherwise.outputDefined()}},coalesce:tu,collator:It,format:Du,image:class D9{constructor(a){this.type=Le,this.input=a}static parse(a,s){return a.length!==2?s.error("Expected two arguments."):(a=s.parse(a[1],1,Et))?new D9(a):s.error("No image name provided.")}evaluate(a){var s=this.input.evaluate(a),d=Vi.fromString(s);return d&&a.availableImages&&(d.available=-1<a.availableImages.indexOf(s)),d}eachChild(a){a(this.input)}outputDefined(){return!1}},in:class L9{constructor(a,s){this.type=St,this.needle=a,this.haystack=s}static parse(a,s){var d;return a.length!==3?s.error(`Expected 2 arguments, but found ${a.length-1} instead.`):(d=s.parse(a[1],1,an),a=s.parse(a[2],2,an),d&&a?Ce(d.type,[St,Et,xt,Yt,an])?new L9(d,a):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ee(d.type)} instead`):null)}evaluate(a){var s=this.needle.evaluate(a);if(!(a=this.haystack.evaluate(a)))return!1;if(!ke(s,["boolean","string","number","null"]))throw new Or(`Expected first argument to be of type boolean, string, number or null, but found ${Ee(di(s))} instead.`);if(ke(a,["string","array"]))return 0<=a.indexOf(s);throw new Or(`Expected second argument to be of type array or string, but found ${Ee(di(a))} instead.`)}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}},"index-of":class sL{constructor(a,s,d){this.type=xt,this.needle=a,this.haystack=s,this.fromIndex=d}static parse(a,s){var d,m;return a.length<=2||5<=a.length?s.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`):(d=s.parse(a[1],1,an),m=s.parse(a[2],2,an),d&&m?Ce(d.type,[St,Et,xt,Yt,an])?a.length===4?(a=s.parse(a[3],3,xt))?new sL(d,m,a):null:new sL(d,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ee(d.type)} instead`):null)}evaluate(a){var s=this.needle.evaluate(a),d=this.haystack.evaluate(a);if(!ke(s,["boolean","string","number","null"]))throw new Or(`Expected first argument to be of type boolean, string, number or null, but found ${Ee(di(s))} instead.`);if(ke(d,["string","array"]))return this.fromIndex?(a=this.fromIndex.evaluate(a),d.indexOf(s,a)):d.indexOf(s);throw new Or(`Expected second argument to be of type array or string, but found ${Ee(di(d))} instead.`)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}},interpolate:Aa,"interpolate-hcl":Aa,"interpolate-lab":Aa,length:class N9{constructor(a){this.type=xt,this.input=a}static parse(a,s){return a.length!==2?s.error(`Expected 1 argument, but found ${a.length-1} instead.`):(a=s.parse(a[1],1))?a.type.kind!=="array"&&a.type.kind!=="string"&&a.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${Ee(a.type)} instead.`):new N9(a):null}evaluate(a){if(typeof(a=this.input.evaluate(a))=="string"||Array.isArray(a))return a.length;throw new Or(`Expected value to be of type string or array, but found ${Ee(di(a))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}},let:Xc,literal:ba,match:class F9{constructor(a,s,d,m,_,x){this.inputType=a,this.type=s,this.input=d,this.cases=m,this.outputs=_,this.otherwise=x}static parse(a,s){if(a.length<5)return s.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return s.error("Expected an even number of arguments.");let d,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);var _={},x=[];for(let J=2;J<a.length-1;J+=2){let he=a[J];var I=a[J+1],R=(Array.isArray(he)||(he=[he]),s.concat(J));if(he.length===0)return R.error("Expected at least one branch label.");for(const _e of he){if(typeof _e!="number"&&typeof _e!="string")return R.error("Branch labels must be numbers or strings.");if(typeof _e=="number"&&Math.abs(_e)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof _e=="number"&&Math.floor(_e)!==_e)return R.error("Numeric branch labels must be integer values.");if(d){if(R.checkSubtype(d,di(_e)))return null}else d=di(_e);if(_[String(_e)]!==void 0)return R.error("Branch labels must be unique.");_[String(_e)]=x.length}if(!(I=s.parse(I,J,m)))return null;m=m||I.type,x.push(I)}var U,H=s.parse(a[1],1,an);return!H||!(U=s.parse(a[a.length-1],a.length-1,m))||H.type.kind!=="value"&&s.concat(1).checkSubtype(d,H.type)?null:new F9(d,m,H,_,x,U)}evaluate(a){var s=this.input.evaluate(a);return(di(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}},number:wr,"number-format":class z9{constructor(a,s,d,m,_){this.type=Et,this.number=a,this.locale=s,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=_}static parse(a,s){if(a.length!==3)return s.error("Expected two arguments.");var d=s.parse(a[1],1,xt);if(!d)return null;if(typeof(a=a[2])!="object"||Array.isArray(a))return s.error("NumberFormat options argument must be an object.");let m=null;if(a.locale&&!(m=s.parse(a.locale,1,Et)))return null;let _=null;if(a.currency&&!(_=s.parse(a.currency,1,Et)))return null;let x=null;if(a["min-fraction-digits"]&&!(x=s.parse(a["min-fraction-digits"],1,xt)))return null;let I=null;return a["max-fraction-digits"]&&!(I=s.parse(a["max-fraction-digits"],1,xt))?null:new z9(d,m,_,x,I)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}},object:wr,slice:class lL{constructor(a,s,d,m){this.type=a,this.input=s,this.beginIndex=d,this.endIndex=m}static parse(a,s){var d,m;return a.length<=2||5<=a.length?s.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`):(d=s.parse(a[1],1,an),m=s.parse(a[2],2,xt),d&&m?Ce(d.type,[xe(an),Et,an])?a.length===4?(a=s.parse(a[3],3,xt))?new lL(d.type,d,m,a):null:new lL(d.type,d,m):s.error(`Expected first argument to be of type array or string, but found ${Ee(d.type)} instead`):null)}evaluate(a){var s=this.input.evaluate(a),d=this.beginIndex.evaluate(a);if(ke(s,["string","array"]))return this.endIndex?(a=this.endIndex.evaluate(a),s.slice(d,a)):s.slice(d);throw new Or(`Expected first argument to be of type array or string, but found ${Ee(di(s))} instead.`)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}},step:po,string:wr,"to-boolean":be,"to-color":be,"to-number":be,"to-string":be,var:Ps,within:Ja};function pc(h,[a,s,d,m]){if(a=a.evaluate(h),s=s.evaluate(h),d=d.evaluate(h),m=m?m.evaluate(h):1,h=Ji(a,s,d,m),h)throw new Or(h);return new $n(a/255,s/255,d/255,m,!1)}function ru(h,a){return a=a[h],a===void 0?null:a}function ol(h){return{type:h}}function Gd(h){return{result:"success",value:h}}function il(h){return{result:"error",value:h}}function Ms(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function ou(h){return h.expression&&-1<h.expression.parameters.indexOf("zoom")}function mc(h){return h.expression&&h.expression.interpolated}function Zr(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Wd(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function Qf(h){return h}function ts(h,a){var s=a.type==="color",d=h.stops&&typeof h.stops[0][0]=="object",m=d||h.property!==void 0,m=d||!m,_=h.type||(mc(a)?"exponential":"interval");if(s||a.type==="padding"){const _e=(s?$n:ur).parse;(h=Rt({},h)).stops&&(h.stops=h.stops.map(Te=>[Te[0],_e(Te[1])])),h.default?h.default=_e(h.default):h.default=_e(a.default)}if(h.colorSpace&&(s=h.colorSpace)!=="rgb"&&s!=="hcl"&&s!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);let x,I,R;if(_==="exponential")x=Kd;else if(_==="interval")x=_y;else if(_==="categorical"){x=Jf,I=Object.create(null);for(const _e of h.stops)I[_e[0]]=_e[1];R=typeof h.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);x=Uh}if(d){var U={},H=[];for(let Te=0;Te<h.stops.length;Te++){var J=h.stops[Te],he=J[0].zoom;U[he]===void 0&&(U[he]={zoom:he,type:h.type,property:h.property,default:h.default,stops:[]},H.push(he)),U[he].stops.push([J[0].value,J[1]])}const _e=[];for(const Te of H)_e.push([U[Te].zoom,ts(U[Te],a)]);return s={name:"linear"},{kind:"composite",interpolationType:s,interpolationFactor:Aa.interpolationFactor.bind(void 0,s),zoomStops:_e.map(Te=>Te[0]),evaluate({zoom:Te},Ne){return Kd({stops:_e,base:h.base},a,Te).evaluate(Te,Ne)}}}return m?{kind:"camera",interpolationType:d=_==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null,interpolationFactor:Aa.interpolationFactor.bind(void 0,d),zoomStops:h.stops.map(_e=>_e[0]),evaluate:({zoom:_e})=>x(h,a,_e,I,R)}:{kind:"source",evaluate(_e,Te){return Te=Te&&Te.properties?Te.properties[h.property]:void 0,Te===void 0?Lu(h.default,a.default):x(h,a,Te,I,R)}}}function Lu(h,a,s){return h!==void 0?h:a!==void 0?a:s!==void 0?s:void 0}function Jf(h,a,s,d,m){return Lu(typeof s===m?d[s]:void 0,h.default,a.default)}function _y(h,a,s){return Zr(s)!=="number"?Lu(h.default,a.default):((a=h.stops.length)===1||s<=h.stops[0][0]?h.stops[0]:s>=h.stops[a-1][0]?h.stops[a-1]:(a=Ru(h.stops.map(d=>d[0]),s),h.stops[a]))[1]}function Kd(h,a,s){var d=h.base!==void 0?h.base:1;if(Zr(s)!=="number")return Lu(h.default,a.default);var m=h.stops.length;if(m===1||s<=h.stops[0][0])return h.stops[0][1];if(s>=h.stops[m-1][0])return h.stops[m-1][1];m=Ru(h.stops.map(U=>U[0]),s);const _=function(U,H,J,he){return he-=J,U-=J,he==0?0:H===1?U/he:(Math.pow(H,U)-1)/(Math.pow(H,he)-1)}(s,d,h.stops[m][0],h.stops[m+1][0]),x=h.stops[m][1],I=h.stops[m+1][1],R=ea[a.type]||Qf;return typeof x.evaluate=="function"?{evaluate(...J){var H=x.evaluate.apply(void 0,J),J=I.evaluate.apply(void 0,J);if(H!==void 0&&J!==void 0)return R(H,J,_,h.colorSpace)}}:R(x,I,_,h.colorSpace)}function Uh(h,a,s){switch(a.type){case"color":s=$n.parse(s);break;case"formatted":s=uo.fromString(s.toString());break;case"resolvedImage":s=Vi.fromString(s.toString());break;case"padding":s=ur.parse(s);break;default:Zr(s)===a.type||a.type==="enum"&&a.values[s]||(s=void 0)}return Lu(s,h.default,a.default)}ps.register(qi,{error:[{kind:"error"},[Et],(h,[a])=>{throw new Or(a.evaluate(h))}],typeof:[Et,[an],(h,[a])=>Ee(di(a.evaluate(h)))],"to-rgba":[xe(xt,4),[kt],(d,[s])=>{var[s,d,m,_]=s.evaluate(d).rgb;return[255*s,255*d,255*m,_]}],rgb:[kt,[xt,xt,xt],pc],rgba:[kt,[xt,xt,xt,xt],pc],has:{type:St,overloads:[[[Et],(h,[a])=>a.evaluate(h)in h.properties()],[[Et,cn],(h,[a,s])=>a.evaluate(h)in s.evaluate(h)]]},get:{type:an,overloads:[[[Et],(h,[a])=>ru(a.evaluate(h),h.properties())],[[Et,cn],(h,[a,s])=>ru(a.evaluate(h),s.evaluate(h))]]},"feature-state":[an,[Et],(h,[a])=>ru(a.evaluate(h),h.featureState||{})],properties:[cn,[],h=>h.properties()],"geometry-type":[Et,[],h=>h.geometryType()],id:[an,[],h=>h.id()],zoom:[xt,[],h=>h.globals.zoom],"heatmap-density":[xt,[],h=>h.globals.heatmapDensity||0],"line-progress":[xt,[],h=>h.globals.lineProgress||0],accumulated:[an,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[xt,ol(xt),(h,a)=>{let s=0;for(const d of a)s+=d.evaluate(h);return s}],"*":[xt,ol(xt),(h,a)=>{let s=1;for(const d of a)s*=d.evaluate(h);return s}],"-":{type:xt,overloads:[[[xt,xt],(h,[a,s])=>a.evaluate(h)-s.evaluate(h)],[[xt],(h,[a])=>-a.evaluate(h)]]},"/":[xt,[xt,xt],(h,[a,s])=>a.evaluate(h)/s.evaluate(h)],"%":[xt,[xt,xt],(h,[a,s])=>a.evaluate(h)%s.evaluate(h)],ln2:[xt,[],()=>Math.LN2],pi:[xt,[],()=>Math.PI],e:[xt,[],()=>Math.E],"^":[xt,[xt,xt],(h,[a,s])=>Math.pow(a.evaluate(h),s.evaluate(h))],sqrt:[xt,[xt],(h,[a])=>Math.sqrt(a.evaluate(h))],log10:[xt,[xt],(h,[a])=>Math.log(a.evaluate(h))/Math.LN10],ln:[xt,[xt],(h,[a])=>Math.log(a.evaluate(h))],log2:[xt,[xt],(h,[a])=>Math.log(a.evaluate(h))/Math.LN2],sin:[xt,[xt],(h,[a])=>Math.sin(a.evaluate(h))],cos:[xt,[xt],(h,[a])=>Math.cos(a.evaluate(h))],tan:[xt,[xt],(h,[a])=>Math.tan(a.evaluate(h))],asin:[xt,[xt],(h,[a])=>Math.asin(a.evaluate(h))],acos:[xt,[xt],(h,[a])=>Math.acos(a.evaluate(h))],atan:[xt,[xt],(h,[a])=>Math.atan(a.evaluate(h))],min:[xt,ol(xt),(h,a)=>Math.min(...a.map(s=>s.evaluate(h)))],max:[xt,ol(xt),(h,a)=>Math.max(...a.map(s=>s.evaluate(h)))],abs:[xt,[xt],(h,[a])=>Math.abs(a.evaluate(h))],round:[xt,[xt],(h,[a])=>(a=a.evaluate(h),a<0?-Math.round(-a):Math.round(a))],floor:[xt,[xt],(h,[a])=>Math.floor(a.evaluate(h))],ceil:[xt,[xt],(h,[a])=>Math.ceil(a.evaluate(h))],"filter-==":[St,[Et,an],(h,[a,s])=>h.properties()[a.value]===s.value],"filter-id-==":[St,[an],(h,[a])=>h.id()===a.value],"filter-type-==":[St,[Et],(h,[a])=>h.geometryType()===a.value],"filter-<":[St,[Et,an],(h,[a,s])=>(h=h.properties()[a.value],a=s.value,typeof h==typeof a&&h<a)],"filter-id-<":[St,[an],(h,[a])=>(h=h.id(),a=a.value,typeof h==typeof a&&h<a)],"filter->":[St,[Et,an],(h,[a,s])=>(h=h.properties()[a.value],a=s.value,typeof h==typeof a&&a<h)],"filter-id->":[St,[an],(h,[a])=>(h=h.id(),a=a.value,typeof h==typeof a&&a<h)],"filter-<=":[St,[Et,an],(h,[a,s])=>(h=h.properties()[a.value],a=s.value,typeof h==typeof a&&h<=a)],"filter-id-<=":[St,[an],(h,[a])=>(h=h.id(),a=a.value,typeof h==typeof a&&h<=a)],"filter->=":[St,[Et,an],(h,[a,s])=>(h=h.properties()[a.value],a=s.value,typeof h==typeof a&&a<=h)],"filter-id->=":[St,[an],(h,[a])=>(h=h.id(),a=a.value,typeof h==typeof a&&a<=h)],"filter-has":[St,[an],(h,[a])=>a.value in h.properties()],"filter-has-id":[St,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[St,[xe(Et)],(h,[a])=>0<=a.value.indexOf(h.geometryType())],"filter-id-in":[St,[xe(an)],(h,[a])=>0<=a.value.indexOf(h.id())],"filter-in-small":[St,[Et,xe(an)],(h,[a,s])=>0<=s.value.indexOf(h.properties()[a.value])],"filter-in-large":[St,[Et,xe(an)],(h,[a,s])=>{for(var d=h.properties()[a.value],m=s.value,_=0,x=s.value.length-1;_<=x;){var I=_+x>>1;if(m[I]===d)return!0;m[I]>d?x=I-1:_=1+I}return!1}],all:{type:St,overloads:[[[St,St],(h,[a,s])=>a.evaluate(h)&&s.evaluate(h)],[ol(St),(h,a)=>{for(const s of a)if(!s.evaluate(h))return!1;return!0}]]},any:{type:St,overloads:[[[St,St],(h,[a,s])=>a.evaluate(h)||s.evaluate(h)],[ol(St),(h,a)=>{for(const s of a)if(s.evaluate(h))return!0;return!1}]]},"!":[St,[St],(h,[a])=>!a.evaluate(h)],"is-supported-script":[St,[Et],(h,[a])=>{var s=h.globals&&h.globals.isSupportedScript;return!s||s(a.evaluate(h))}],upcase:[Et,[Et],(h,[a])=>a.evaluate(h).toUpperCase()],downcase:[Et,[Et],(h,[a])=>a.evaluate(h).toLowerCase()],concat:[Et,ol(an),(h,a)=>a.map(s=>nl(s.evaluate(h))).join("")],"resolved-locale":[Et,[Qn],(h,[a])=>a.evaluate(h).resolvedLocale()]});class jh{constructor(a,s){this.expression=a,this._warningHistory={},this._evaluator=new Je,this._defaultValue=s?X(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(a,s,d,m,_,x){return this._evaluator.globals=a,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(a,s,d,m,_,x){this._evaluator.globals=a,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{var I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(!this._enumValues||I in this._enumValues)return I;throw new Or(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(I)} instead.`)}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(R.message)),this._defaultValue}}}function Jc(h){return Array.isArray(h)&&0<h.length&&typeof h[0]=="string"&&h[0]in qi}function gc(h,a){var s=new Mt(qi,Mu,[],a?(d=a,s={color:kt,string:Et,number:xt,enum:Et,boolean:St,formatted:tr,padding:lr,resolvedImage:Le,variableAnchorOffsetCollection:de},d.type!=="array"?s[d.type]:xe(s[d.value]||an,d.length)):void 0),d=s.parse(h,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Gd(new jh(d,a)):il(s.errors)}class Vo{constructor(a,s){this.kind=a,this._styleExpression=s,this.isStateDependent=a!=="constant"&&!es(s.expression)}evaluateWithoutErrorHandling(a,s,d,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(a,s,d,m,_,x)}evaluate(a,s,d,m,_,x){return this._styleExpression.evaluate(a,s,d,m,_,x)}}class Yd{constructor(a,s,d,m){this.kind=a,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=a!=="camera"&&!es(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(a,s,d,m,_,x){return this._styleExpression.evaluateWithoutErrorHandling(a,s,d,m,_,x)}evaluate(a,s,d,m,_,x){return this._styleExpression.evaluate(a,s,d,m,_,x)}interpolationFactor(a,s,d){return this.interpolationType?Aa.interpolationFactor(this.interpolationType,a,s,d):0}}function Hr(h){return h._styleExpression!==void 0}function Fo(_,a){var s,d,m,_=gc(_,a);return _.result==="error"?_:(s=Bh(d=_.value.expression))||Ms(a)?(m=eu(d,["zoom"]))||ou(a)?(d=function x(I){let R=null;if(I instanceof Xc)R=x(I.result);else if(I instanceof tu){for(const U of I.args)if(R=x(U))break}else(I instanceof po||I instanceof Aa)&&I.input instanceof ps&&I.input.name==="zoom"&&(R=I);return R instanceof Dt||I.eachChild(U=>{const H=x(U);H instanceof Dt?R=H:!R&&H?R=new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):R&&H&&R!==H&&(R=new Dt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),R}(d))||m?d instanceof Dt?il([d]):d instanceof Aa&&!mc(a)?il([new Dt("",'"interpolate" expressions cannot be used with this property')]):d?(m=d instanceof Aa?d.interpolation:void 0,Gd(s?new Yd("camera",_.value,d.labels,m):new Yd("composite",_.value,d.labels,m))):Gd(s?new Vo("constant",_.value):new Vo("source",_.value)):il([new Dt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):il([new Dt("","zoom expressions not supported")]):il([new Dt("","data expressions not supported")])}class ko{constructor(a,s){this._parameters=a,this._specification=s,Rt(this,ts(this._parameters,this._specification))}static deserialize(a){return new ko(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function Zd(h,a){if(Wd(h))return new ko(h,a);if(Jc(h)){var s=Fo(h,a);if(s.result==="error")throw new Error(s.value.map(d=>d.key+": "+d.message).join(", "));return s.value}{let d=h;return a.type==="color"&&typeof h=="string"?d=$n.parse(h):a.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?a.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(d=Mo.parse(h)):d=ur.parse(h),{kind:"constant",evaluate:()=>d}}}function X(h){return h.type==="color"&&Wd(h.default)?new $n(0,0,0,0):h.type==="color"?$n.parse(h.default)||null:h.type==="padding"?ur.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Mo.parse(h.default)||null:h.default===void 0?null:h.default}function ve(h){if(h===!0||h===!1)return 1;if(Array.isArray(h)&&h.length!==0)switch(h[0]){case"has":return 2<=h.length&&h[1]!=="$id"&&h[1]!=="$type";case"in":return 3<=h.length&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const a of h.slice(1))if(!ve(a)&&typeof a!="boolean")return;return 1;default:return 1}}const ze={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qe(h){if(h==null)return{filter:()=>!0,needGeometry:!1};const a=gc(h=ve(h)?h:At(h),ze);if(a.result==="error")throw new Error(a.value.map(s=>s.key+": "+s.message).join(", "));return{filter:(s,d,m)=>a.value.evaluate(s,d,{},m),needGeometry:function s(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(let m=1;m<d.length;m++)if(s(d[m]))return!0;return!1}(h)}}function Ot(h,a){return h<a?-1:a<h?1:0}function At(h){var a,s;return!h||(a=h[0],h.length<=1?a!=="any":a==="=="?nn(h[1],h[2],"=="):a==="!="?Tr(nn(h[1],h[2],"==")):a==="<"||a===">"||a==="<="||a===">="?nn(h[1],h[2],a):a==="any"?(s=h.slice(1),["any"].concat(s.map(At))):a==="all"?["all"].concat(h.slice(1).map(At)):a==="none"?["all"].concat(h.slice(1).map(At).map(Tr)):a==="in"?xn(h[1],h.slice(2)):a==="!in"?Tr(xn(h[1],h.slice(2))):a==="has"?fr(h[1]):a==="!has"?Tr(fr(h[1])):a!=="within"||h)}function nn(h,a,s){switch(h){case"$type":return["filter-type-"+s,a];case"$id":return["filter-id-"+s,a];default:return["filter-"+s,h,a]}}function xn(h,a){if(a.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return 200<a.length&&!a.some(s=>typeof s!=typeof a[0])?["filter-in-large",h,["literal",a.sort(Ot)]]:["filter-in-small",h,["literal",a]]}}function fr(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function Tr(h){return["!",h]}function xr(h){let a="";for(const s of $e)a+="/"+function d(m){var _=typeof m;if(_=="number"||_=="boolean"||_=="string"||m==null)return JSON.stringify(m);if(Array.isArray(m)){let R="[";for(const U of m)R+=d(U)+",";return R+"]"}var x=Object.keys(m).sort();let I="{";for(let R=0;R<x.length;R++)I+=`${JSON.stringify(x[R])}:${d(m[x[R]])},`;return I+"}"}(h[s]);return a}function Jo(s){var a=s.key,s=s.value;return s?[new Ge(a,s,"constants have been deprecated as of v8")]:[]}function Yr(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function ca(h){if(Array.isArray(h))return h.map(ca);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){var a={};for(const s in h)a[s]=ca(h[s]);return a}return Yr(h)}function bi(h){var a=h.key,s=h.value,d=h.valueSpec||{},m=h.objectElementValidators||{},_=h.style,x=h.styleSpec,I=h.validateSpec;let R=[];if(h=Zr(s),h!=="object")return[new Ge(a,s,`object expected, ${h} found`)];for(const J in s){var U=J.split(".")[0],H=d[U]||d["*"];let he;if(m[U])he=m[U];else if(d[U])he=I;else if(m["*"])he=m["*"];else{if(!d["*"]){R.push(new Ge(a,s[J],`unknown property "${J}"`));continue}he=I}R=R.concat(he({key:(a&&a+".")+J,value:s[J],valueSpec:H,style:_,styleSpec:x,object:s,objectKey:J,validateSpec:I},s))}for(const J in d)m[J]||d[J].required&&d[J].default===void 0&&s[J]===void 0&&R.push(new Ge(a,s,`missing required property "${J}"`));return R}function yc(h){var a=h.value,s=h.valueSpec,d=h.validateSpec,m=h.style,_=h.styleSpec,x=h.key,I=h.arrayElementValidator||d;if(Zr(a)!=="array")return[new Ge(x,a,`array expected, ${Zr(a)} found`)];if(s.length&&a.length!==s.length)return[new Ge(x,a,`array length ${s.length} expected, length ${a.length} found`)];if(s["min-length"]&&a.length<s["min-length"])return[new Ge(x,a,`array length at least ${s["min-length"]} expected, length ${a.length} found`)];let R={type:s.value,values:s.values},U=(_.$version<7&&(R.function=s.function),Zr(s.value)==="object"&&(R=s.value),[]);for(let H=0;H<a.length;H++)U=U.concat(I({array:a,arrayIndex:H,value:a[H],valueSpec:R,validateSpec:h.validateSpec,style:m,styleSpec:_,key:`${x}[${H}]`}));return U}function Xd(d){var a=d.key,s=d.value,d=d.valueSpec;let m=Zr(s);return(m=m==="number"&&s!=s?"NaN":m)!=="number"?[new Ge(a,s,`number expected, ${m} found`)]:"minimum"in d&&s<d.minimum?[new Ge(a,s,s+" is less than the minimum value "+d.minimum)]:"maximum"in d&&s>d.maximum?[new Ge(a,s,s+" is greater than the maximum value "+d.maximum)]:[]}function iu(h){const a=h.valueSpec,s=Yr(h.value.type);let d,m={},_,x;var I=s!=="categorical"&&h.value.property===void 0,R=!I;const U=Zr(h.value.stops)==="array"&&Zr(h.value.stops[0])==="array"&&Zr(h.value.stops[0][0])==="object";var H=bi({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(_e){if(s==="identity")return[new Ge(_e.key,_e.value,'identity function may not have a "stops" property')];let Te=[];var Ne=_e.value;return Te=Te.concat(yc({key:_e.key,value:Ne,valueSpec:_e.valueSpec,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,arrayElementValidator:J})),Zr(Ne)==="array"&&Ne.length===0&&Te.push(new Ge(_e.key,Ne,"array must have at least one stop")),Te},default:function(_e){return _e.validateSpec({key:_e.key,value:_e.value,valueSpec:a,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec})}}});return s==="identity"&&I&&H.push(new Ge(h.key,h.value,'missing required property "property"')),s==="identity"||h.value.stops||H.push(new Ge(h.key,h.value,'missing required property "stops"')),s==="exponential"&&h.valueSpec.expression&&!mc(h.valueSpec)&&H.push(new Ge(h.key,h.value,"exponential functions not supported")),8<=h.styleSpec.$version&&(R&&!Ms(h.valueSpec)?H.push(new Ge(h.key,h.value,"property functions not supported")):I&&!ou(h.valueSpec)&&H.push(new Ge(h.key,h.value,"zoom functions not supported"))),s!=="categorical"&&!U||h.value.property!==void 0||H.push(new Ge(h.key,h.value,'"property" property is required')),H;function J(_e){let Te=[];var Ne=_e.value,Ve=_e.key;if(Zr(Ne)!=="array")return[new Ge(Ve,Ne,`array expected, ${Zr(Ne)} found`)];if(Ne.length!==2)return[new Ge(Ve,Ne,`array length 2 expected, length ${Ne.length} found`)];if(U){if(Zr(Ne[0])!=="object")return[new Ge(Ve,Ne,`object expected, ${Zr(Ne[0])} found`)];if(Ne[0].zoom===void 0)return[new Ge(Ve,Ne,"object stop key must have zoom")];if(Ne[0].value===void 0)return[new Ge(Ve,Ne,"object stop key must have value")];if(x&&x>Yr(Ne[0].zoom))return[new Ge(Ve,Ne[0].zoom,"stop zoom values must appear in ascending order")];Yr(Ne[0].zoom)!==x&&(x=Yr(Ne[0].zoom),_=void 0,m={}),Te=Te.concat(bi({key:Ve+"[0]",value:Ne[0],valueSpec:{zoom:{}},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec,objectElementValidators:{zoom:Xd,value:he}}))}else Te=Te.concat(he({key:Ve+"[0]",value:Ne[0],valueSpec:{},validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec},Ne));return Jc(ca(Ne[1]))?Te.concat([new Ge(Ve+"[1]",Ne[1],"expressions are not allowed in function stops.")]):Te.concat(_e.validateSpec({key:Ve+"[1]",value:Ne[1],valueSpec:a,validateSpec:_e.validateSpec,style:_e.style,styleSpec:_e.styleSpec}))}function he(_e,je){var Ne=Zr(_e.value),Ve=Yr(_e.value),je=_e.value!==null?_e.value:je;if(d){if(Ne!==d)return[new Ge(_e.key,je,Ne+" stop domain type must match previous stop domain type "+d)]}else d=Ne;if(Ne!=="number"&&Ne!=="string"&&Ne!=="boolean")return[new Ge(_e.key,je,"stop domain value must be a number, string, or boolean")];if(Ne==="number"||s==="categorical")return s!=="categorical"||Ne!=="number"||isFinite(Ve)&&Math.floor(Ve)===Ve?s!=="categorical"&&Ne==="number"&&_!==void 0&&Ve<_?[new Ge(_e.key,je,"stop domain values must appear in ascending order")]:(_=Ve,s==="categorical"&&Ve in m?[new Ge(_e.key,je,"stop domain values must be unique")]:(m[Ve]=!0,[])):[new Ge(_e.key,je,"integer expected, found "+Ve)];{let Oe=`number expected, ${Ne} found`;return Ms(a)&&s===void 0&&(Oe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(_e.key,je,Oe)]}}}function $h(h){var a=(h.expressionContext==="property"?Fo:gc)(ca(h.value),h.valueSpec);if(a.result==="error")return a.value.map(s=>new Ge(""+h.key+s.key,h.value,s.message));if(a=a.value.expression||a.value._styleExpression.expression,h.expressionContext==="property"&&h.propertyKey==="text-font"&&!a.outputDefined())return[new Ge(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!es(a))return[new Ge(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!es(a))return[new Ge(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!eu(a,["zoom","feature-state"]))return[new Ge(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Bh(a))return[new Ge(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ep(d){var a=d.key,s=d.value,d=d.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(Yr(s))===-1&&m.push(new Ge(a,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(Yr(s))===-1&&m.push(new Ge(a,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function by(h){return ve(ca(h.value))?$h(Rt({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function a(s){const d=s.value,m=s.key;if(Zr(d)!=="array")return[new Ge(m,d,`array expected, ${Zr(d)} found`)];const _=s.styleSpec;let x,I=[];if(d.length<1)return[new Ge(m,d,"filter array must have at least 1 element")];switch(I=I.concat(ep({key:m+"[0]",value:d[0],valueSpec:_.filter_operator,style:s.style,styleSpec:s.styleSpec})),Yr(d[0])){case"<":case"<=":case">":case">=":2<=d.length&&Yr(d[1])==="$type"&&I.push(new Ge(m,d,`"$type" cannot be use with operator "${d[0]}"`));case"==":case"!=":d.length!==3&&I.push(new Ge(m,d,`filter array for operator "${d[0]}" must have 3 elements`));case"in":case"!in":2<=d.length&&(x=Zr(d[1]))!=="string"&&I.push(new Ge(m+"[1]",d[1],`string expected, ${x} found`));for(let R=2;R<d.length;R++)x=Zr(d[R]),Yr(d[1])==="$type"?I=I.concat(ep({key:`${m}[${R}]`,value:d[R],valueSpec:_.geometry_type,style:s.style,styleSpec:s.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&I.push(new Ge(`${m}[${R}]`,d[R],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let R=1;R<d.length;R++)I=I.concat(a({key:`${m}[${R}]`,value:d[R],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":x=Zr(d[1]),d.length!==2?I.push(new Ge(m,d,`filter array for "${d[0]}" operator must have 2 elements`)):x!=="string"&&I.push(new Ge(m+"[1]",d[1],`string expected, ${x} found`));break;case"within":x=Zr(d[1]),d.length!==2?I.push(new Ge(m,d,`filter array for "${d[0]}" operator must have 2 elements`)):x!=="object"&&I.push(new Ge(m+"[1]",d[1],`object expected, ${x} found`))}return I}(h)}function wy(h,a){var s=h.key,d=h.validateSpec,m=h.style,_=h.styleSpec,x=h.value,I=h.objectKey,R=_[a+"_"+h.layerType];if(!R)return[];var U=I.match(/^(.*)-transition$/);if(a==="paint"&&U&&R[U[1]]&&R[U[1]].transition)return d({key:s,value:x,valueSpec:_.transition,style:m,styleSpec:_});if(U=h.valueSpec||R[I],!U)return[new Ge(s,x,`unknown property "${I}"`)];let H;return Zr(x)==="string"&&Ms(U)&&!U.tokens&&(H=/^{([^}]+)}$/.exec(x))?[new Ge(s,x,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)]:(R=[],h.layerType==="symbol"&&(I==="text-field"&&m&&!m.glyphs&&R.push(new Ge(s,x,'use of "text-field" requires a style "glyphs" property')),I==="text-font")&&Wd(ca(x))&&Yr(x.type)==="identity"&&R.push(new Ge(s,x,'"text-font" does not support identity functions')),R.concat(d({key:h.key,value:x,valueSpec:U,style:m,styleSpec:_,expressionContext:"property",propertyType:a,propertyKey:I})))}function km(h){return wy(h,"paint")}function Qd(h){return wy(h,"layout")}function vc(h){let a=[];const s=h.value,d=h.key;var m,_,x=h.style;const I=h.styleSpec;s.type||s.ref||a.push(new Ge(d,s,'either "type" or "ref" is required'));let R=Yr(s.type);const U=Yr(s.ref);if(s.id){var H=Yr(s.id);for(let he=0;he<h.arrayIndex;he++){var J=x.layers[he];Yr(J.id)===H&&a.push(new Ge(d,s.id,`duplicate layer id "${s.id}", previously used at line `+J.id.__line__))}}if("ref"in s){["type","source","source-layer","filter","layout"].forEach(_e=>{_e in s&&a.push(new Ge(d,s[_e],`"${_e}" is prohibited for ref layers`))});let he;x.layers.forEach(_e=>{Yr(_e.id)===U&&(he=_e)}),he?he.ref?a.push(new Ge(d,s.ref,"ref cannot reference another ref layer")):R=Yr(he.type):a.push(new Ge(d,s.ref,`ref layer "${U}" not found`))}else R!=="background"&&(s.source?(_=(m=x.sources&&x.sources[s.source])&&Yr(m.type),m?_==="vector"&&R==="raster"?a.push(new Ge(d,s.source,`layer "${s.id}" requires a raster source`)):_!=="raster-dem"&&R==="hillshade"?a.push(new Ge(d,s.source,`layer "${s.id}" requires a raster-dem source`)):_==="raster"&&R!=="raster"?a.push(new Ge(d,s.source,`layer "${s.id}" requires a vector source`)):_!=="vector"||s["source-layer"]?_==="raster-dem"&&R!=="hillshade"?a.push(new Ge(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):R!=="line"||!s.paint||!s.paint["line-gradient"]||_==="geojson"&&m.lineMetrics||a.push(new Ge(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new Ge(d,s,`layer "${s.id}" must specify a "source-layer"`)):a.push(new Ge(d,s.source,`source "${s.source}" not found`))):a.push(new Ge(d,s,'missing required property "source"')));return a=a.concat(bi({key:d,value:s,valueSpec:I.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*"(){return[]},type(){return h.validateSpec({key:d+".type",value:s.type,valueSpec:I.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:s,objectKey:"type"})},filter:by,layout(he){return bi({layer:s,key:he.key,value:he.value,style:he.style,styleSpec:he.styleSpec,validateSpec:he.validateSpec,objectElementValidators:{"*"(_e){return Qd(Rt({layerType:R},_e))}}})},paint(he){return bi({layer:s,key:he.key,value:he.value,style:he.style,styleSpec:he.styleSpec,validateSpec:he.validateSpec,objectElementValidators:{"*"(_e){return km(Rt({layerType:R},_e))}}})}}}))}function Jd(s){var a=s.value,s=s.key,d=Zr(a);return d!=="string"?[new Ge(s,a,`string expected, ${d} found`)]:[]}const tp={promoteId:function({key:h,value:a}){{if(Zr(a)==="string")return Jd({key:h,value:a});var s=[];for(const d in a)s.push(...Jd({key:h+"."+d,value:a[d]}));return s}}};function B_(h){var a=h.value,s=h.key,d=h.styleSpec,m=h.style,_=h.validateSpec;if(!a.type)return[new Ge(s,a,'"type" is required')];var x=Yr(a.type);let I;switch(x){case"vector":case"raster":return I=bi({key:s,value:a,valueSpec:d["source_"+x.replace("-","_")],style:h.style,styleSpec:d,objectElementValidators:tp,validateSpec:_});case"raster-dem":return I=function(H){var J=(je=H.sourceName)!=null?je:"",he=H.value,_e=H.styleSpec,Te=_e.source_raster_dem,Ne=H.style;let Ve=[];var je=Zr(he);if(he!==void 0)if(je!=="object")Ve.push(new Ge("source_raster_dem",he,`object expected, ${je} found`));else{var Oe=Yr(he.encoding)==="custom",Re=["redFactor","greenFactor","blueFactor","baseShift"],qe=H.value.encoding?`"${H.value.encoding}"`:"Default";for(const at in he)!Oe&&Re.includes(at)?Ve.push(new Ge(at,he[at],`In "${J}": "${at}" is only valid when "encoding" is set to "custom". ${qe} encoding found`)):Te[at]?Ve=Ve.concat(H.validateSpec({key:at,value:he[at],valueSpec:Te[at],validateSpec:H.validateSpec,style:Ne,styleSpec:_e})):Ve.push(new Ge(at,he[at],`unknown property "${at}"`))}return Ve}({sourceName:s,value:a,style:h.style,styleSpec:d,validateSpec:_});case"geojson":if(I=bi({key:s,value:a,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:_,objectElementValidators:tp}),a.cluster)for(const H in a.clusterProperties){var[U,R]=a.clusterProperties[H],U=typeof U=="string"?[U,["accumulated"],["get",H]]:U;I.push(...$h({key:`${s}.${H}.map`,value:R,validateSpec:_,expressionContext:"cluster-map"})),I.push(...$h({key:`${s}.${H}.reduce`,value:U,validateSpec:_,expressionContext:"cluster-reduce"}))}return I;case"video":return bi({key:s,value:a,valueSpec:d.source_video,style:m,validateSpec:_,styleSpec:d});case"image":return bi({key:s,value:a,valueSpec:d.source_image,style:m,validateSpec:_,styleSpec:d});case"canvas":return[new Ge(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ep({key:s+".type",value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:_,styleSpec:d})}}function xy(h){var a=h.value,s=h.styleSpec,d=s.light,m=h.style;let _=[];var x=Zr(a);if(a!==void 0){if(x!=="object")return _=_.concat([new Ge("light",a,`object expected, ${x} found`)]);for(const R in a){var I=R.match(/^(.*)-transition$/);_=I&&d[I[1]]&&d[I[1]].transition?_.concat(h.validateSpec({key:R,value:a[R],valueSpec:s.transition,validateSpec:h.validateSpec,style:m,styleSpec:s})):d[R]?_.concat(h.validateSpec({key:R,value:a[R],valueSpec:d[R],validateSpec:h.validateSpec,style:m,styleSpec:s})):_.concat([new Ge(R,a[R],`unknown property "${R}"`)])}}return _}function Pm(_){var a=_.value,s=_.styleSpec,d=s.sky,m=_.style,_=Zr(a);if(a===void 0)return[];if(_!=="object")return[new Ge("sky",a,`object expected, ${_} found`)];let x=[];for(const I in a)x=d[I]?x.concat(Nu({key:I,value:a[I],valueSpec:d[I],style:m,styleSpec:s})):x.concat([new Ge(I,a[I],`unknown property "${I}"`)]);return x}function np(h){var a=h.value,s=h.styleSpec,d=s.terrain,m=h.style;let _=[];var x=Zr(a);if(a!==void 0){if(x!=="object")return _=_.concat([new Ge("terrain",a,`object expected, ${x} found`)]);for(const I in a)_=d[I]?_.concat(h.validateSpec({key:I,value:a[I],valueSpec:d[I],validateSpec:h.validateSpec,style:m,styleSpec:s})):_.concat([new Ge(I,a[I],`unknown property "${I}"`)])}return _}function Cy(h){let a=[];var s=h.value,d=h.key;if(Array.isArray(s)){var m=[],_=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&a.push(new Ge(d,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&_.includes(s[x].url)&&a.push(new Ge(d,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),_.push(s[x].url),a=a.concat(bi({key:`${d}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return a}return Jd({key:d,value:s})}const rp={"*"(){return[]},array:yc,boolean:function(s){var a=s.value,s=s.key,d=Zr(a);return d!=="boolean"?[new Ge(s,a,`boolean expected, ${d} found`)]:[]},number:Xd,color:function(h){var a=h.key,s=Zr(h=h.value);return s!=="string"?[new Ge(a,h,`color expected, ${s} found`)]:$n.parse(String(h))?[]:[new Ge(a,h,`color expected, "${h}" found`)]},constants:Jo,enum:ep,filter:by,function:iu,layer:vc,object:bi,source:B_,light:xy,sky:Pm,terrain:np,string:Jd,formatted:function(h){return Jd(h).length===0?[]:$h(h)},resolvedImage:function(h){return Jd(h).length===0?[]:$h(h)},padding:function(h){var a=h.key,s=h.value;if(Zr(s)!=="array")return Xd({key:a,value:s,valueSpec:{}});{if(s.length<1||4<s.length)return[new Ge(a,s,`padding requires 1 to 4 values; ${s.length} values found`)];var d={type:"number"};let m=[];for(let _=0;_<s.length;_++)m=m.concat(h.validateSpec({key:`${a}[${_}]`,value:s[_],validateSpec:h.validateSpec,valueSpec:d}));return m}},variableAnchorOffsetCollection:function(h){var a=h.key,s=h.value,d=Zr(s),m=h.styleSpec;if(d!=="array"||s.length<1||s.length%2!=0)return[new Ge(a,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<s.length;x+=2)_=(_=_.concat(ep({key:`${a}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]}))).concat(yc({key:`${a}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:m}));return _},sprite:Cy};function Nu(h){var a=h.value,s=h.valueSpec,d=h.styleSpec;return h.validateSpec=Nu,s.expression&&Wd(Yr(a))?iu(h):s.expression&&Jc(ca(a))?$h(h):s.type&&rp[s.type]?rp[s.type](h):bi(Rt({},h,{valueSpec:s.type?d[s.type]:s}))}function op(d){var a=d.value,s=d.key,d=Jd(d);return d.length||(a.indexOf("{fontstack}")===-1&&d.push(new Ge(s,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&d.push(new Ge(s,a,'"glyphs" url must include a "{range}" token'))),d}function Rl(h,a=ge){let s=[];return s=s.concat(Nu({key:"",value:h,valueSpec:a.$root,styleSpec:a,style:h,validateSpec:Nu,objectElementValidators:{glyphs:op,"*"(){return[]}}})),Sy(s=h.constants?s.concat(Jo({key:"constants",value:h.constants,style:h,styleSpec:a,validateSpec:Nu})):s)}function Ol(h){return function(a){return h({...a,validateSpec:Nu})}}function Sy(h){return[].concat(h).sort((a,s)=>a.line-s.line)}function au(h){return function(...a){return Sy(h.apply(this,a))}}Rl.source=au(Ol(B_)),Rl.sprite=au(Ol(Cy)),Rl.glyphs=au(Ol(op)),Rl.light=au(Ol(xy)),Rl.sky=au(Ol(Pm)),Rl.terrain=au(Ol(np)),Rl.layer=au(Ol(vc)),Rl.filter=au(Ol(by)),Rl.paintProperty=au(Ol(km)),Rl.layoutProperty=au(Ol(Qd));const gs=Rl;Qc=gs.light;const ip=gs.paintProperty,U_=gs.layoutProperty;function Ey(h,a){let s=!1;if(a&&a.length)for(const d of a)h.fire(new ye(new Error(d.message))),s=!0;return s}class Hh{constructor(a,s,d){var m=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var _=new Int32Array(this.arrayBuffer);a=_[0],s=_[1],d=_[2],this.d=s+2*d;for(let H=0;H<this.d*this.d;H++){var x=_[3+H],I=_[3+H+1];m.push(x===I?null:_.subarray(x,I))}var R=_[3+m.length],U=_[3+m.length+1];this.keys=_.subarray(R,U),this.bboxes=_.subarray(U),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let H=0;H<this.d*this.d;H++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=a,this.padding=d,this.scale=s/a,this.uid=0,R=d/s*a,this.min=-R,this.max=a+R}insert(a,s,d,m,_){this._forEachCell(s,d,m,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(a),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(a,s,d,m,_,x){this.cells[_].push(x)}query(a,s,d,m,_){var x=this.min,I=this.max;return a<=x&&s<=x&&I<=d&&I<=m&&!_?Array.prototype.slice.call(this.keys):(this._forEachCell(a,s,d,m,this._queryCell,x=[],{},_),x)}_queryCell(a,s,d,m,_,x,I,R){var U=this.cells[_];if(U!==null){var H=this.keys,J=this.bboxes;for(let Te=0;Te<U.length;Te++){var he,_e=U[Te];I[_e]===void 0&&(he=4*_e,(R?R(J[0+he],J[1+he],J[2+he],J[3+he]):a<=J[2+he]&&s<=J[3+he]&&d>=J[0+he]&&m>=J[1+he])?(I[_e]=!0,x.push(H[_e])):I[_e]=!1)}}}_forEachCell(a,s,d,m,_,x,I,R){var U=this._convertToCellCoord(a),H=this._convertToCellCoord(s),J=this._convertToCellCoord(d),he=this._convertToCellCoord(m);for(let Te=U;Te<=J;Te++)for(let Ne=H;Ne<=he;Ne++){var _e=this.d*Ne+Te;if((!R||R(this._convertFromCellCoord(Te),this._convertFromCellCoord(Ne),this._convertFromCellCoord(Te+1),this._convertFromCellCoord(Ne+1)))&&_.call(this,a,s,d,m,_e,x,I,R))return}}_convertFromCellCoord(a){return(a-this.padding)/this.scale}_convertToCellCoord(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;var a=this.cells,s=3+this.cells.length+1+1;let d=0;for(let I=0;I<this.cells.length;I++)d+=this.cells[I].length;var m=new Int32Array(s+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let _=s;for(let I=0;I<a.length;I++){var x=a[I];m[3+I]=_,m.set(x,_),_+=x.length}return m[3+a.length]=_,m.set(this.keys,_),_+=this.keys.length,m[3+a.length+1]=_,m.set(this.bboxes,_),_+=this.bboxes.length,m.buffer}static serialize(a,s){return a=a.toArrayBuffer(),s&&s.push(a),{buffer:a}}static deserialize(a){return new Hh(a.buffer)}}const Dl={};function Pn(h,a,s={}){if(Dl[h])throw new Error(h+" is already registered.");Object.defineProperty(a,"_classRegistryKey",{value:h,writeable:!1}),Dl[h]={klass:a,omit:s.omit||[],shallow:s.shallow||[]}}Pn("Object",Object),Pn("TransferableGridIndex",Hh),Pn("Color",$n),Pn("Error",Error),Pn("AJAXError",ot),Pn("ResolvedImage",Vi),Pn("StylePropertyFunction",ko),Pn("StyleExpression",jh,{omit:["_evaluator"]}),Pn("ZoomDependentExpression",Yd),Pn("ZoomConstantExpression",Vo),Pn("CompoundExpression",ps,{omit:["_evaluate"]});for(const h in qi)qi[h]._classRegistryKey||Pn("Expression_"+h,qi[h]);function Rs(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function _c(h,a){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error)return h;if(Rs(h)||ue(h))return a&&a.push(h),h;if(ArrayBuffer.isView(h))return d=h,a&&a.push(d.buffer),d;if(h instanceof ImageData)return a&&a.push(h.data.buffer),h;if(Array.isArray(h)){var s=[];for(const I of h)s.push(_c(I,a));return s}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);var d=h.constructor,m=d._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class "+d.name);if(!Dl[m])throw new Error(m+" is not registered.");var _,x=d.serialize?d.serialize(h,a):{};if(d.serialize){if(a&&x===a[a.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const I in h)!h.hasOwnProperty(I)||0<=Dl[m].omit.indexOf(I)||(_=h[I],x[I]=0<=Dl[m].shallow.indexOf(I)?_:_c(_,a));h instanceof Error&&(x.message=h.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(x.$name=m),x}function su(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||Rs(h)||ue(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(su);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);var a=h.$name||"Object";if(!Dl[a])throw new Error("can't deserialize unregistered class "+a);var s=Dl[a].klass;if(!s)throw new Error("can't deserialize unregistered class "+a);if(s.deserialize)return s.deserialize(h);var d,m=Object.create(s.prototype);for(const _ of Object.keys(h))_!=="$name"&&(d=h[_],m[_]=0<=Dl[a].shallow.indexOf(_)?d:su(d));return m}class Am{constructor(){this.first=!0}update(a,s){var d=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=d,!0))}}const In={"Latin-1 Supplement":h=>128<=h&&h<=255,Arabic:h=>1536<=h&&h<=1791,"Arabic Supplement":h=>1872<=h&&h<=1919,"Arabic Extended-A":h=>2208<=h&&h<=2303,"Hangul Jamo":h=>4352<=h&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>5120<=h&&h<=5759,Khmer:h=>6016<=h&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>6320<=h&&h<=6399,"General Punctuation":h=>8192<=h&&h<=8303,"Letterlike Symbols":h=>8448<=h&&h<=8527,"Number Forms":h=>8528<=h&&h<=8591,"Miscellaneous Technical":h=>8960<=h&&h<=9215,"Control Pictures":h=>9216<=h&&h<=9279,"Optical Character Recognition":h=>9280<=h&&h<=9311,"Enclosed Alphanumerics":h=>9312<=h&&h<=9471,"Geometric Shapes":h=>9632<=h&&h<=9727,"Miscellaneous Symbols":h=>9728<=h&&h<=9983,"Miscellaneous Symbols and Arrows":h=>11008<=h&&h<=11263,"CJK Radicals Supplement":h=>11904<=h&&h<=12031,"Kangxi Radicals":h=>12032<=h&&h<=12255,"Ideographic Description Characters":h=>12272<=h&&h<=12287,"CJK Symbols and Punctuation":h=>12288<=h&&h<=12351,Hiragana:h=>12352<=h&&h<=12447,Katakana:h=>12448<=h&&h<=12543,Bopomofo:h=>12544<=h&&h<=12591,"Hangul Compatibility Jamo":h=>12592<=h&&h<=12687,Kanbun:h=>12688<=h&&h<=12703,"Bopomofo Extended":h=>12704<=h&&h<=12735,"CJK Strokes":h=>12736<=h&&h<=12783,"Katakana Phonetic Extensions":h=>12784<=h&&h<=12799,"Enclosed CJK Letters and Months":h=>12800<=h&&h<=13055,"CJK Compatibility":h=>13056<=h&&h<=13311,"CJK Unified Ideographs Extension A":h=>13312<=h&&h<=19903,"Yijing Hexagram Symbols":h=>19904<=h&&h<=19967,"CJK Unified Ideographs":h=>19968<=h&&h<=40959,"Yi Syllables":h=>40960<=h&&h<=42127,"Yi Radicals":h=>42128<=h&&h<=42191,"Hangul Jamo Extended-A":h=>43360<=h&&h<=43391,"Hangul Syllables":h=>44032<=h&&h<=55215,"Hangul Jamo Extended-B":h=>55216<=h&&h<=55295,"Private Use Area":h=>57344<=h&&h<=63743,"CJK Compatibility Ideographs":h=>63744<=h&&h<=64255,"Arabic Presentation Forms-A":h=>64336<=h&&h<=65023,"Vertical Forms":h=>65040<=h&&h<=65055,"CJK Compatibility Forms":h=>65072<=h&&h<=65103,"Small Form Variants":h=>65104<=h&&h<=65135,"Arabic Presentation Forms-B":h=>65136<=h&&h<=65279,"Halfwidth and Fullwidth Forms":h=>65280<=h&&h<=65519};function bc(h){for(const a of h)if(ed(a.charCodeAt(0)))return!0;return!1}function Ty(h){for(const s of h)if(a=s.charCodeAt(0),In.Arabic(a)||In["Arabic Supplement"](a)||In["Arabic Extended-A"](a)||In["Arabic Presentation Forms-A"](a)||In["Arabic Presentation Forms-B"](a))return;var a;return 1}function ed(h){return h===746||h===747||!(h<4352)&&(In["Bopomofo Extended"](h)||In.Bopomofo(h)||In["CJK Compatibility Forms"](h)&&!(65097<=h&&h<=65103)||In["CJK Compatibility Ideographs"](h)||In["CJK Compatibility"](h)||In["CJK Radicals Supplement"](h)||In["CJK Strokes"](h)||!(!In["CJK Symbols and Punctuation"](h)||12296<=h&&h<=12305||12308<=h&&h<=12319||h===12336)||In["CJK Unified Ideographs Extension A"](h)||In["CJK Unified Ideographs"](h)||In["Enclosed CJK Letters and Months"](h)||In["Hangul Compatibility Jamo"](h)||In["Hangul Jamo Extended-A"](h)||In["Hangul Jamo Extended-B"](h)||In["Hangul Jamo"](h)||In["Hangul Syllables"](h)||In.Hiragana(h)||In["Ideographic Description Characters"](h)||In.Kanbun(h)||In["Kangxi Radicals"](h)||In["Katakana Phonetic Extensions"](h)||In.Katakana(h)&&h!==12540||!(!In["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||65306<=h&&h<=65310||h===65339||h===65341||h===65343||65371<=h&&h<=65503||h===65507||65512<=h&&h<=65519)||!(!In["Small Form Variants"](h)||65112<=h&&h<=65118||65123<=h&&h<=65126)||In["Unified Canadian Aboriginal Syllabics"](h)||In["Unified Canadian Aboriginal Syllabics Extended"](h)||In["Vertical Forms"](h)||In["Yijing Hexagram Symbols"](h)||In["Yi Syllables"](h)||!!In["Yi Radicals"](h))}function eh(h){return!(ed(h)||(h=h,In["Latin-1 Supplement"](h)&&(h===167||h===169||h===174||h===177||h===188||h===189||h===190||h===215||h===247))||In["General Punctuation"](h)&&(h===8214||h===8224||h===8225||h===8240||h===8241||h===8251||h===8252||h===8258||h===8263||h===8264||h===8265||h===8273)||In["Letterlike Symbols"](h)||In["Number Forms"](h)||In["Miscellaneous Technical"](h)&&(8960<=h&&h<=8967||8972<=h&&h<=8991||8996<=h&&h<=9e3||h===9003||9085<=h&&h<=9114||9150<=h&&h<=9165||h===9167||9169<=h&&h<=9179||9186<=h&&h<=9215)||In["Control Pictures"](h)&&h!==9251||In["Optical Character Recognition"](h)||In["Enclosed Alphanumerics"](h)||In["Geometric Shapes"](h)||In["Miscellaneous Symbols"](h)&&!(9754<=h&&h<=9759)||In["Miscellaneous Symbols and Arrows"](h)&&(11026<=h&&h<=11055||11088<=h&&h<=11097||11192<=h&&h<=11243)||In["CJK Symbols and Punctuation"](h)||In.Katakana(h)||In["Private Use Area"](h)||In["CJK Compatibility Forms"](h)||In["Small Form Variants"](h)||In["Halfwidth and Fullwidth Forms"](h)||h===8734||h===8756||h===8757||9984<=h&&h<=10087||10102<=h&&h<=10131||h===65532||h===65533)}function Mm(h){return 1424<=h&&h<=2303||In["Arabic Presentation Forms-A"](h)||In["Arabic Presentation Forms-B"](h)}function Rm(h,a){for(const d of h)if(s=d.charCodeAt(0),!a&&Mm(s)||2304<=s&&s<=3583||3840<=s&&s<=4255||In.Khmer(s))return!1;var s;return!0}const Fu=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class zo{constructor(a,s){this.zoom=a,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Am,this.transition={})}isSupportedScript(a){return Rm(a,Fu.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){var a=this.zoom,s=a-Math.floor(a),d=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class ap{constructor(a,s){this.property=a,this.value=s,this.expression=Zd(s===void 0?a.specification.default:s,a.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,s,d){return this.property.possiblyEvaluate(this,a,s,d)}}class Om{constructor(a){this.property=a,this.value=new ap(a,void 0)}transitioned(a,s){return new Dm(this.property,this.value,s,F({},a.transition,this.transition),a.now)}untransitioned(){return new Dm(this.property,this.value,null,{},0)}}class sp{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)}getValue(a){return q(this._values[a].value.value)}setValue(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Om(this._values[a].property)),this._values[a].value=new ap(this._values[a].property,s===null?void 0:q(s))}getTransition(a){return q(this._values[a].transition)}setTransition(a,s){Object.prototype.hasOwnProperty.call(this._values,a)||(this._values[a]=new Om(this._values[a].property)),this._values[a].transition=q(s)||void 0}serialize(){var a={};for(const d of Object.keys(this._values)){var s=this.getValue(d),s=(s!==void 0&&(a[d]=s),this.getTransition(d));s!==void 0&&(a[d+"-transition"]=s)}return a}transitioned(a,s){var d=new lp(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(a,s._values[m]);return d}untransitioned(){var a=new lp(this._properties);for(const s of Object.keys(this._values))a._values[s]=this._values[s].untransitioned();return a}}class Dm{constructor(a,s,d,m,_){this.property=a,this.value=s,this.begin=_+m.delay||0,this.end=this.begin+m.duration||0,a.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(a,s,d){var m=a.now||0,_=this.value.possiblyEvaluate(a,s,d),x=this.prior;return x?m>this.end||this.value.isDataDriven()?(this.prior=null,_):m<this.begin?x.possiblyEvaluate(a,s,d):(m=(m-this.begin)/(this.end-this.begin),this.property.interpolate(x.possiblyEvaluate(a,s,d),_,O(m))):_}}class lp{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,s,d){var m=new th(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(a,s,d);return m}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class td{constructor(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)}hasValue(a){return this._values[a].value!==void 0}getValue(a){return q(this._values[a].value)}setValue(a,s){this._values[a]=new ap(this._values[a].property,s===null?void 0:q(s))}serialize(){var a={};for(const d of Object.keys(this._values)){var s=this.getValue(d);s!==void 0&&(a[d]=s)}return a}possiblyEvaluate(a,s,d){var m=new th(this._properties);for(const _ of Object.keys(this._values))m._values[_]=this._values[_].possiblyEvaluate(a,s,d);return m}}class Os{constructor(a,s,d){this.property=a,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,s,d,m){return this.property.evaluate(this.value,this.parameters,a,s,d,m)}}class th{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class Kn{constructor(a){this.specification=a}possiblyEvaluate(a,s){if(a.isDataDriven())throw new Error("Value should not be data driven");return a.expression.evaluate(s)}interpolate(a,s,d){var m=this.specification.type,m=ea[m];return m?m(a,s,d):a}}class ir{constructor(a,s){this.specification=a,this.overrides=s}possiblyEvaluate(a,s,d,m){return a.expression.kind==="constant"||a.expression.kind==="camera"?new Os(this,{kind:"constant",value:a.expression.evaluate(s,null,{},d,m)},s):new Os(this,a.expression,s)}interpolate(a,s,d){var m;return a.value.kind!=="constant"||s.value.kind!=="constant"?a:a.value.value===void 0||s.value.value===void 0?new Os(this,{kind:"constant",value:void 0},a.parameters):(m=this.specification.type,(m=ea[m])?(m=m(a.value.value,s.value.value,d),new Os(this,{kind:"constant",value:m},a.parameters)):a)}evaluate(a,s,d,m,_,x){return a.kind==="constant"?a.value:a.evaluate(s,d,m,_,x)}}class lu extends ir{possiblyEvaluate(a,s,d,m){return a.value===void 0?new Os(this,{kind:"constant",value:void 0},s):a.expression.kind==="constant"?(d=a.expression.evaluate(s,null,{},d,m),m=a.property.specification.type==="resolvedImage"&&typeof d!="string"?d.name:d,d=this._calculate(m,m,m,s),new Os(this,{kind:"constant",value:d},s)):a.expression.kind==="camera"?(m=this._calculate(a.expression.evaluate({zoom:s.zoom-1}),a.expression.evaluate({zoom:s.zoom}),a.expression.evaluate({zoom:s.zoom+1}),s),new Os(this,{kind:"constant",value:m},s)):new Os(this,a.expression,s)}evaluate(a,s,d,m,_,x){return a.kind==="source"?(_=a.evaluate(s,d,m,_,x),this._calculate(_,_,_,s)):a.kind==="composite"?this._calculate(a.evaluate({zoom:Math.floor(s.zoom)-1},d,m),a.evaluate({zoom:Math.floor(s.zoom)},d,m),a.evaluate({zoom:Math.floor(s.zoom)+1},d,m),s):a.value}_calculate(a,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:d,to:s}}interpolate(a){return a}}class Lm{constructor(a){this.specification=a}possiblyEvaluate(a,s,d,m){if(a.value!==void 0)return a.expression.kind==="constant"?(d=a.expression.evaluate(s,null,{},d,m),this._calculate(d,d,d,s)):this._calculate(a.expression.evaluate(new zo(Math.floor(s.zoom-1),s)),a.expression.evaluate(new zo(Math.floor(s.zoom),s)),a.expression.evaluate(new zo(Math.floor(s.zoom+1),s)),s)}_calculate(a,s,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:a,to:s}:{from:d,to:s}}interpolate(a){return a}}class up{constructor(a){this.specification=a}possiblyEvaluate(a,s,d,m){return!!a.expression.evaluate(s,null,{},d,m)}interpolate(){return!1}}class ns{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const m in a){var d=a[m],s=(d.specification.overridable&&this.overridableProperties.push(m),this.defaultPropertyValues[m]=new ap(d,void 0)),d=this.defaultTransitionablePropertyValues[m]=new Om(d);this.defaultTransitioningPropertyValues[m]=d.untransitioned(),this.defaultPossiblyEvaluatedValues[m]=s.possiblyEvaluate({})}}}Pn("DataDrivenProperty",ir),Pn("DataConstantProperty",Kn),Pn("CrossFadedDataDrivenProperty",lu),Pn("CrossFadedProperty",Lm),Pn("ColorRampProperty",up);const qo="-transition";class Ds extends Ie{constructor(a,s){if(super(),this.id=a.id,this.type=a.type,this._featureFilter={filter:()=>!0,needGeometry:!1},a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),s.layout&&(this._unevaluatedLayout=new td(s.layout)),s.paint)){this._transitionablePaint=new sp(s.paint);for(const d in a.paint)this.setPaintProperty(d,a.paint[d],{validate:!1});for(const d in a.layout)this.setLayoutProperty(d,a.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new th(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,s,d={}){if(s!=null){var m=`layers.${this.id}.layout.`+a;if(this._validate(U_,m,a,s,d))return}a==="visibility"?this.visibility=s:this._unevaluatedLayout.setValue(a,s)}getPaintProperty(a){return a.endsWith(qo)?this._transitionablePaint.getTransition(a.slice(0,-qo.length)):this._transitionablePaint.getValue(a)}setPaintProperty(a,s,d={}){if(s!=null){var m=`layers.${this.id}.paint.`+a;if(this._validate(ip,m,a,s,d))return!1}var _;return a.endsWith(qo)?(this._transitionablePaint.setTransition(a.slice(0,-qo.length),s||void 0),!1):(d=(m=this._transitionablePaint._values[a]).property.specification["property-type"]==="cross-faded-data-driven",_=m.value.isDataDriven(),m=m.value,this._transitionablePaint.setValue(a,s),this._handleSpecialPaintPropertyUpdate(a),(s=this._transitionablePaint._values[a].value).isDataDriven()||_||d||this._handleOverridablePaintPropertyUpdate(a,m,s))}_handleSpecialPaintPropertyUpdate(a){}_handleOverridablePaintPropertyUpdate(a,s,d){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,s){a.getCrossfadeParameters&&(this._crossfadeParameters=a.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,s)}serialize(){var a={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(a.layout=a.layout||{},a.layout.visibility=this.visibility),G(a,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(a,s,d,m,_={}){return(!_||_.validate!==!1)&&Ey(this,a.call(gs,{key:s,layerType:this.type,objectKey:d,value:m,styleSpec:ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){var a=this.paint.get(s);if(a instanceof Os&&Ms(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class wc{constructor(a,s){this._structArray=a,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,s){return a._trim(),s&&(a.isTransferred=!0,s.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){var s=Object.create(this.prototype);return s.arrayBuffer=a.arrayBuffer,s.length=a.length,s.capacity=a.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){a>this.capacity&&(this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),a=this.uint8,this._refreshViews(),a)&&this.uint8.set(a)}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ni(h,a=1){let s=0,d=0;return{members:h.map(m=>{_=m.type;var _=cp[_].BYTES_PER_ELEMENT,x=s=nh(s,Math.max(a,_)),I=m.components||1;return d=Math.max(d,_),s+=_*I,{name:m.name,type:m.type,components:I,offset:x}}),size:nh(s,Math.max(d,a)),alignment:a}}function nh(h,a){return Math.ceil(h/a)*a}class xc extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s){var d=this.length;return this.resize(d+1),this.emplace(d,a,s)}emplace(a,s,d){var m=2*a;return this.int16[0+m]=s,this.int16[1+m]=d,a}}xc.prototype.bytesPerElement=4,Pn("StructArrayLayout2i4",xc);class zu extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d){var m=this.length;return this.resize(m+1),this.emplace(m,a,s,d)}emplace(a,s,d,m){var _=3*a;return this.int16[0+_]=s,this.int16[1+_]=d,this.int16[2+_]=m,a}}zu.prototype.bytesPerElement=6,Pn("StructArrayLayout3i6",zu);class Nm extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d,m){var _=this.length;return this.resize(_+1),this.emplace(_,a,s,d,m)}emplace(a,s,d,m,_){var x=4*a;return this.int16[0+x]=s,this.int16[1+x]=d,this.int16[2+x]=m,this.int16[3+x]=_,a}}Nm.prototype.bytesPerElement=8,Pn("StructArrayLayout4i8",Nm);class Iy extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x){var I=this.length;return this.resize(I+1),this.emplace(I,a,s,d,m,_,x)}emplace(a,s,d,m,_,x,I){var R=6*a;return this.int16[0+R]=s,this.int16[1+R]=d,this.int16[2+R]=m,this.int16[3+R]=_,this.int16[4+R]=x,this.int16[5+R]=I,a}}Iy.prototype.bytesPerElement=12,Pn("StructArrayLayout2i4i12",Iy);class Fm extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x){var I=this.length;return this.resize(I+1),this.emplace(I,a,s,d,m,_,x)}emplace(a,s,d,m,_,x,I){var R=4*a,U=8*a;return this.int16[0+R]=s,this.int16[1+R]=d,this.uint8[4+U]=m,this.uint8[5+U]=_,this.uint8[6+U]=x,this.uint8[7+U]=I,a}}Fm.prototype.bytesPerElement=8,Pn("StructArrayLayout2i4ub8",Fm);class rh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s){var d=this.length;return this.resize(d+1),this.emplace(d,a,s)}emplace(a,s,d){var m=2*a;return this.float32[0+m]=s,this.float32[1+m]=d,a}}rh.prototype.bytesPerElement=8,Pn("StructArrayLayout2f8",rh);class oh extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x,I,R,U,H){var J=this.length;return this.resize(J+1),this.emplace(J,a,s,d,m,_,x,I,R,U,H)}emplace(a,s,d,m,_,x,I,R,U,H,J){var he=10*a;return this.uint16[0+he]=s,this.uint16[1+he]=d,this.uint16[2+he]=m,this.uint16[3+he]=_,this.uint16[4+he]=x,this.uint16[5+he]=I,this.uint16[6+he]=R,this.uint16[7+he]=U,this.uint16[8+he]=H,this.uint16[9+he]=J,a}}oh.prototype.bytesPerElement=20,Pn("StructArrayLayout10ui20",oh);class ih extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x,I,R,U,H,J,he){var _e=this.length;return this.resize(_e+1),this.emplace(_e,a,s,d,m,_,x,I,R,U,H,J,he)}emplace(a,s,d,m,_,x,I,R,U,H,J,he,_e){var Te=12*a;return this.int16[0+Te]=s,this.int16[1+Te]=d,this.int16[2+Te]=m,this.int16[3+Te]=_,this.uint16[4+Te]=x,this.uint16[5+Te]=I,this.uint16[6+Te]=R,this.uint16[7+Te]=U,this.int16[8+Te]=H,this.int16[9+Te]=J,this.int16[10+Te]=he,this.int16[11+Te]=_e,a}}ih.prototype.bytesPerElement=24,Pn("StructArrayLayout4i4ui4i24",ih);class nd extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d){var m=this.length;return this.resize(m+1),this.emplace(m,a,s,d)}emplace(a,s,d,m){var _=3*a;return this.float32[0+_]=s,this.float32[1+_]=d,this.float32[2+_]=m,a}}nd.prototype.bytesPerElement=12,Pn("StructArrayLayout3f12",nd);class dp extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){var s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint32[0+ +a]=s,a}}dp.prototype.bytesPerElement=4,Pn("StructArrayLayout1ul4",dp);class ah extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x,I,R,U){var H=this.length;return this.resize(H+1),this.emplace(H,a,s,d,m,_,x,I,R,U)}emplace(a,s,d,m,_,x,I,R,U,H){var J=10*a,he=5*a;return this.int16[0+J]=s,this.int16[1+J]=d,this.int16[2+J]=m,this.int16[3+J]=_,this.int16[4+J]=x,this.int16[5+J]=I,this.uint32[3+he]=R,this.uint16[8+J]=U,this.uint16[9+J]=H,a}}ah.prototype.bytesPerElement=20,Pn("StructArrayLayout6i1ul2ui20",ah);class hp extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x){var I=this.length;return this.resize(I+1),this.emplace(I,a,s,d,m,_,x)}emplace(a,s,d,m,_,x,I){var R=6*a;return this.int16[0+R]=s,this.int16[1+R]=d,this.int16[2+R]=m,this.int16[3+R]=_,this.int16[4+R]=x,this.int16[5+R]=I,a}}hp.prototype.bytesPerElement=12,Pn("StructArrayLayout2i2i2i12",hp);class ky extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_){var x=this.length;return this.resize(x+1),this.emplace(x,a,s,d,m,_)}emplace(a,s,d,m,_,x){var I=4*a,R=8*a;return this.float32[0+I]=s,this.float32[1+I]=d,this.float32[2+I]=m,this.int16[6+R]=_,this.int16[7+R]=x,a}}ky.prototype.bytesPerElement=16,Pn("StructArrayLayout2f1f2i16",ky);class fp extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d,m){var _=this.length;return this.resize(_+1),this.emplace(_,a,s,d,m)}emplace(a,s,d,m,_){var x=12*a,I=3*a;return this.uint8[0+x]=s,this.uint8[1+x]=d,this.float32[1+I]=m,this.float32[2+I]=_,a}}fp.prototype.bytesPerElement=12,Pn("StructArrayLayout2ub2f12",fp);class pp extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,d){var m=this.length;return this.resize(m+1),this.emplace(m,a,s,d)}emplace(a,s,d,m){var _=3*a;return this.uint16[0+_]=s,this.uint16[1+_]=d,this.uint16[2+_]=m,a}}pp.prototype.bytesPerElement=6,Pn("StructArrayLayout3ui6",pp);class zm extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je)}emplace(a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je,Oe){var Re=24*a,qe=12*a,at=48*a;return this.int16[0+Re]=s,this.int16[1+Re]=d,this.uint16[2+Re]=m,this.uint16[3+Re]=_,this.uint32[2+qe]=x,this.uint32[3+qe]=I,this.uint32[4+qe]=R,this.uint16[10+Re]=U,this.uint16[11+Re]=H,this.uint16[12+Re]=J,this.float32[7+qe]=he,this.float32[8+qe]=_e,this.uint8[36+at]=Te,this.uint8[37+at]=Ne,this.uint8[38+at]=Ve,this.uint32[10+qe]=je,this.int16[22+Re]=Oe,a}}zm.prototype.bytesPerElement=48,Pn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",zm);class mp extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je,Oe,Re,qe,at,_t,Lt,Kt,Vt,Qt,on,hn){var dn=this.length;return this.resize(dn+1),this.emplace(dn,a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je,Oe,Re,qe,at,_t,Lt,Kt,Vt,Qt,on,hn)}emplace(a,s,d,m,_,x,I,R,U,H,J,he,_e,Te,Ne,Ve,je,Oe,Re,qe,at,_t,Lt,Kt,Vt,Qt,on,hn,dn){var Xt=32*a,Un=16*a;return this.int16[0+Xt]=s,this.int16[1+Xt]=d,this.int16[2+Xt]=m,this.int16[3+Xt]=_,this.int16[4+Xt]=x,this.int16[5+Xt]=I,this.int16[6+Xt]=R,this.int16[7+Xt]=U,this.uint16[8+Xt]=H,this.uint16[9+Xt]=J,this.uint16[10+Xt]=he,this.uint16[11+Xt]=_e,this.uint16[12+Xt]=Te,this.uint16[13+Xt]=Ne,this.uint16[14+Xt]=Ve,this.uint16[15+Xt]=je,this.uint16[16+Xt]=Oe,this.uint16[17+Xt]=Re,this.uint16[18+Xt]=qe,this.uint16[19+Xt]=at,this.uint16[20+Xt]=_t,this.uint16[21+Xt]=Lt,this.uint16[22+Xt]=Kt,this.uint32[12+Un]=Vt,this.float32[13+Un]=Qt,this.float32[14+Un]=on,this.uint16[30+Xt]=hn,this.uint16[31+Xt]=dn,a}}mp.prototype.bytesPerElement=64,Pn("StructArrayLayout8i15ui1ul2f2ui64",mp);class uu extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){var s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.float32[0+ +a]=s,a}}uu.prototype.bytesPerElement=4,Pn("StructArrayLayout1f4",uu);class Bm extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d){var m=this.length;return this.resize(m+1),this.emplace(m,a,s,d)}emplace(a,s,d,m){var _=3*a;return this.uint16[0+6*a]=s,this.float32[1+_]=d,this.float32[2+_]=m,a}}Bm.prototype.bytesPerElement=12,Pn("StructArrayLayout1ui2f12",Bm);class rd extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s,d){var m=this.length;return this.resize(m+1),this.emplace(m,a,s,d)}emplace(a,s,d,m){var _=4*a;return this.uint32[0+2*a]=s,this.uint16[2+_]=d,this.uint16[3+_]=m,a}}rd.prototype.bytesPerElement=8,Pn("StructArrayLayout1ul2ui8",rd);class Ll extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,s){var d=this.length;return this.resize(d+1),this.emplace(d,a,s)}emplace(a,s,d){var m=2*a;return this.uint16[0+m]=s,this.uint16[1+m]=d,a}}Ll.prototype.bytesPerElement=4,Pn("StructArrayLayout2ui4",Ll);class Nl extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){var s=this.length;return this.resize(s+1),this.emplace(s,a)}emplace(a,s){return this.uint16[0+ +a]=s,a}}Nl.prototype.bytesPerElement=2,Pn("StructArrayLayout1ui2",Nl);class cu extends wi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,s,d,m){var _=this.length;return this.resize(_+1),this.emplace(_,a,s,d,m)}emplace(a,s,d,m,_){var x=4*a;return this.float32[0+x]=s,this.float32[1+x]=d,this.float32[2+x]=m,this.float32[3+x]=_,a}}cu.prototype.bytesPerElement=16,Pn("StructArrayLayout4f16",cu);class Um extends wc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new p(this.anchorPointX,this.anchorPointY)}}Um.prototype.size=20;class j_ extends ah{get(a){return new Um(this,a)}}Pn("CollisionBoxArray",j_);class $_ extends wc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(a){this._structArray.uint8[this._pos1+37]=a}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(a){this._structArray.uint8[this._pos1+38]=a}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(a){this._structArray.uint32[this._pos4+10]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}$_.prototype.size=48;class Cc extends zm{get(a){return new $_(this,a)}}Pn("PlacedSymbolArray",Cc);class Vh extends wc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(a){this._structArray.uint32[this._pos4+12]=a}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Vh.prototype.size=64;class sh extends mp{get(a){return new Vh(this,a)}}Pn("SymbolInstanceArray",sh);class gp extends uu{getoffsetX(a){return this.float32[+a+0]}}Pn("GlyphOffsetArray",gp);class jm extends zu{getx(a){return this.int16[3*a+0]}gety(a){return this.int16[3*a+1]}gettileUnitDistanceFromAnchor(a){return this.int16[3*a+2]}}Pn("SymbolLineVertexArray",jm);class du extends wc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}du.prototype.size=12;class Sc extends Bm{get(a){return new du(this,a)}}Pn("TextAnchorOffsetArray",Sc);class oi extends wc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}oi.prototype.size=8;class Go extends rd{get(a){return new oi(this,a)}}Pn("FeatureIndexArray",Go);class Bu extends xc{}class Ma extends xc{}class Ls extends xc{}class Uu extends Iy{}class Ec extends Fm{}class Ns extends rh{}class Tc extends oh{}class Py extends ih{}class qh extends nd{}class $m extends dp{}class Ay extends hp{}class Ic extends fp{}class kc extends pp{}class Gh extends Ll{}const H_=Ni([{name:"a_pos",components:2,type:"Int16"}],4).members;class E{constructor(a=[]){this.segments=a}prepareSegment(a,s,d,m){let _=this.segments[this.segments.length-1];return a>E.MAX_VERTEX_ARRAY_LENGTH&&K(`Max vertices per segment is ${E.MAX_VERTEX_ARRAY_LENGTH}: bucket requested `+a),(!_||_.vertexLength+a>E.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==m)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},m!==void 0&&(_.sortKey=m),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const a of this.segments)for(const s in a.vaos)a.vaos[s].destroy()}static simpleSegment(a,s,d,m){return new E([{vertexOffset:a,primitiveOffset:s,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function u(h,a){return 256*(h=D(Math.floor(h),0,255))+(a=D(Math.floor(a),0,255))}E.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pn("SegmentVector",E);const y=Ni([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);ha={exports:{}},rl={exports:{},exports:function(h,a){for(var s,d,m=3&h.length,_=h.length-m,x=a,I=3432918353,R=461845907,U=0;U<_;)d=255&h.charCodeAt(U)|(255&h.charCodeAt(++U))<<8|(255&h.charCodeAt(++U))<<16|(255&h.charCodeAt(++U))<<24,++U,x=27492+(65535&(s=5*(65535&(x=(x^=d=(65535&(d=(d=(65535&d)*I+(((d>>>16)*I&65535)<<16)&4294967295)<<15|d>>>17))*R+(((d>>>16)*R&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(d=0,m){case 3:d^=(255&h.charCodeAt(U+2))<<16;case 2:d^=(255&h.charCodeAt(U+1))<<8;case 1:x^=d=(65535&(d=(d=(65535&(d^=255&h.charCodeAt(U)))*I+(((d>>>16)*I&65535)<<16)&4294967295)<<15|d>>>17))*R+(((d>>>16)*R&65535)<<16)&4294967295}return x=2246822507*(65535&(x=(x^=h.length)^x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}},vs={exports:{},exports:function(h,a){for(var s,d=h.length,m=a^d,_=0;4<=d;)s=1540483477*(65535&(s=255&h.charCodeAt(_)|(255&h.charCodeAt(++_))<<8|(255&h.charCodeAt(++_))<<16|(255&h.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16),d-=4,++_;switch(d){case 3:m^=(255&h.charCodeAt(_+2))<<16;case 2:m^=(255&h.charCodeAt(_+1))<<8;case 1:m=1540483477*(65535&(m^=255&h.charCodeAt(_)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0}},go=rl.exports,ms=vs.exports,ha.exports=go,ha.exports.murmur3=go,ha.exports.murmur2=ms;var b=l(ha.exports);class S{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(a,s,d,m){this.ids.push(M(a)),this.positions.push(s,d,m)}getPositions(a){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");var s=M(a);let d=0,m=this.ids.length-1;for(;d<m;){var _=d+m>>1;this.ids[_]>=s?m=_:d=1+_}for(var x=[];this.ids[d]===s;){var I=this.positions[3*d],R=this.positions[3*d+1],U=this.positions[3*d+2];x.push({index:I,start:R,end:U}),d++}return x}static serialize(m,s){var d=new Float64Array(m.ids),m=new Uint32Array(m.positions);return j(d,m,0,d.length-1),s&&s.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(a){var s=new S;return s.ids=a.ids,s.positions=a.positions,s.indexed=!0,s}}function M(h){var a=+h;return!isNaN(a)&&a<=Number.MAX_SAFE_INTEGER?a:b(String(h))}function j(h,a,s,d){for(;s<d;){var m=h[s+d>>1];let _=s-1,x=d+1;for(;;){for(;h[++_]<m;);for(;h[--x]>m;);if(_>=x)break;W(h,_,x),W(a,3*_,3*x),W(a,3*_+1,3*x+1),W(a,3*_+2,3*x+2)}x-s<d-x?(j(h,a,s,x),s=x+1):(j(h,a,x+1,d),d=x)}}function W(h,a,s){var d=h[a];h[a]=h[s],h[s]=d}Pn("FeaturePositionMap",S);class se{constructor(a,s){this.gl=a.gl,this.location=s}}class Se extends se{constructor(a,s){super(a,s),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1f(this.location,a))}}class Pe extends se{constructor(a,s){super(a,s),this.current=[0,0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]&&a[3]===this.current[3]||(this.current=a,this.gl.uniform4f(this.location,a[0],a[1],a[2],a[3]))}}class me extends se{constructor(a,s){super(a,s),this.current=$n.transparent}set(a){a.r===this.current.r&&a.g===this.current.g&&a.b===this.current.b&&a.a===this.current.a||(this.current=a,this.gl.uniform4f(this.location,a.r,a.g,a.b,a.a))}}const Me=new Float32Array(16);function Xe(h){return[u(255*h.r,255*h.g),u(255*h.b,255*h.a)]}class et{constructor(a,s,d){this.value=a,this.uniformNames=s.map(m=>"u_"+m),this.type=d}setUniform(a,s,d){a.set(d.constantOr(this.value))}getBinding(a,s,d){return new(this.type==="color"?me:Se)(a,s)}}class rt{constructor(a,s){this.uniformNames=s.map(d=>"u_"+d),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(a,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=a.tlbr}setUniform(a,s,d,m){m=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null,m&&a.set(m)}getBinding(a,s,d){return new(d.substr(0,9)==="u_pattern"?Pe:Se)(a,s)}}class tt{constructor(a,s,d,m){this.expression=a,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:"a_"+_,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(a,I,d,m,_){var x=this.paintVertexArray.length,I=this.expression.evaluate(new zo(0),I,{},m,[],_);this.paintVertexArray.resize(a),this._setPaintValue(x,a,I)}updatePaintArray(a,s,d,m){d=this.expression.evaluate({zoom:0},d,m),this._setPaintValue(a,s,d)}_setPaintValue(a,s,d){if(this.type==="color"){var m=Xe(d);for(let _=a;_<s;_++)this.paintVertexArray.emplace(_,m[0],m[1])}else{for(let _=a;_<s;_++)this.paintVertexArray.emplace(_,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ht{constructor(a,s,d,m,_,x){this.expression=a,this.uniformNames=s.map(I=>`u_${I}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(I=>({name:"a_"+I,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(a,I,d,R,_){var x=this.expression.evaluate(new zo(this.zoom),I,{},R,[],_),I=this.expression.evaluate(new zo(this.zoom+1),I,{},R,[],_),R=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(R,a,x,I)}updatePaintArray(a,s,x,m){var _=this.expression.evaluate({zoom:this.zoom},x,m),x=this.expression.evaluate({zoom:this.zoom+1},x,m);this._setPaintValue(a,s,_,x)}_setPaintValue(a,s,d,m){if(this.type==="color"){var _=Xe(d),x=Xe(m);for(let I=a;I<s;I++)this.paintVertexArray.emplace(I,_[0],_[1],x[0],x[1])}else{for(let I=a;I<s;I++)this.paintVertexArray.emplace(I,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,s){s=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,s=D(this.expression.interpolationFactor(s,this.zoom,this.zoom+1),0,1),a.set(s)}getBinding(a,s,d){return new Se(a,s)}}class gt{constructor(a,s,d,m,_,x){this.expression=a,this.type=s,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(a,s,d){var m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(m,a,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(a,s,d,m,_){this._setPaintValues(a,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(a,s,d,m){if(m&&d){var{min:d,mid:_,max:x}=d,I=m[d],R=m[_],U=m[x];if(I&&R&&U)for(let J=a;J<s;J++)this.zoomInPaintVertexArray.emplace(J,R.tl[0],R.tl[1],R.br[0],R.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],R.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,R.tl[0],R.tl[1],R.br[0],R.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],R.pixelRatio,U.pixelRatio)}}upload(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,y.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,y.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class bt{constructor(a,s,d){this.binders={},this._buffers=[];var m,_,x,I,R,U,H=[];for(const J in a.paint._values)d(J)&&(U=a.paint.get(J))instanceof Os&&Ms(U.property.specification)&&(m=Ut(J,a.type),_=U.value,x=U.property.specification.type,I=U.property.useIntegerZoom,U=(U=U.property.specification["property-type"])==="cross-faded"||U==="cross-faded-data-driven",_.kind==="constant"?(this.binders[J]=U?new rt(_.value,m):new et(_.value,m,x),H.push("/u_"+J)):_.kind==="source"||U?(R=Bt(J,x,"source"),this.binders[J]=U?new gt(_,x,I,s,R,a.id):new tt(_,m,x,R),H.push("/a_"+J)):(U=Bt(J,x,"composite"),this.binders[J]=new ht(_,m,x,I,s,U),H.push("/z_"+J)));this.cacheKey=H.sort().join("")}getMaxValue(a){return a=this.binders[a],a instanceof tt||a instanceof ht?a.maxValue:0}populatePaintArrays(a,s,d,m,_){for(const I in this.binders){var x=this.binders[I];(x instanceof tt||x instanceof ht||x instanceof gt)&&x.populatePaintArray(a,s,d,m,_)}}setConstantPatternPositions(a,s){for(const m in this.binders){var d=this.binders[m];d instanceof rt&&d.setConstantPatternPositions(a,s)}}updatePaintArrays(a,s,d,m,_){let x=!1;for(const H in a)for(const J of s.getPositions(H)){var I=d.feature(J.index);for(const he in this.binders){var R,U=this.binders[he];(U instanceof tt||U instanceof ht||U instanceof gt)&&U.expression.isStateDependent===!0&&(R=m.paint.get(he),U.expression=R.value,U.updatePaintArray(J.start,J.end,I,a[H],_),x=!0)}}return x}defines(){var a=[];for(const d in this.binders){var s=this.binders[d];(s instanceof et||s instanceof rt)&&a.push(...s.uniformNames.map(m=>"#define HAS_UNIFORM_"+m))}return a}getBinderAttributes(){var a=[];for(const d in this.binders){var s=this.binders[d];if(s instanceof tt||s instanceof ht)for(let m=0;m<s.paintVertexAttributes.length;m++)a.push(s.paintVertexAttributes[m].name);else if(s instanceof gt)for(let m=0;m<y.members.length;m++)a.push(y.members[m].name)}return a}getBinderUniforms(){var a=[];for(const d in this.binders){var s=this.binders[d];if(s instanceof et||s instanceof rt||s instanceof ht)for(const m of s.uniformNames)a.push(m)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a,s){var d=[];for(const x in this.binders){var m,_=this.binders[x];if(_ instanceof et||_ instanceof rt||_ instanceof ht)for(const I of _.uniformNames)s[I]&&(m=_.getBinding(a,s[I],I),d.push({name:I,property:x,binding:m}))}return d}setUniforms(a,s,d,m){for(var{name:_,property:x,binding:I}of s)this.binders[x].setUniform(I,m,d.get(x),_)}updatePaintBuffers(a){this._buffers=[];for(const m in this.binders){var s,d=this.binders[m];a&&d instanceof gt?(s=a.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer)&&this._buffers.push(s):(d instanceof tt||d instanceof ht)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(a){for(const d in this.binders){var s=this.binders[d];(s instanceof tt||s instanceof ht||s instanceof gt)&&s.upload(a)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){var a=this.binders[s];(a instanceof tt||a instanceof ht||a instanceof gt)&&a.destroy()}}}class $t{constructor(a,s,d=()=>!0){this.programConfigurations={};for(const m of a)this.programConfigurations[m.id]=new bt(m,s,d);this.needsUpload=!1,this._featureMap=new S,this._bufferOffset=0}populatePaintArrays(a,s,d,m,_,x){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(a,s,m,_,x);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,s,d,m){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(a,this._featureMap,s,_,m)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}function Ut(h,a){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(a+"-","").replace(/-/g,"_")]}function Bt(m,a,s){var d={color:{source:rh,composite:cu},number:{source:uu,composite:rh}},m=(m=m,{"line-pattern":{source:Tc,composite:Tc},"fill-pattern":{source:Tc,composite:Tc},"fill-extrusion-pattern":{source:Tc,composite:Tc}}[m]);return m&&m[s]||d[a][s]}Pn("ConstantBinder",et),Pn("CrossFadedConstantBinder",rt),Pn("SourceExpressionBinder",tt),Pn("CrossFadedCompositeBinder",gt),Pn("CompositeExpressionBinder",ht),Pn("ProgramConfiguration",bt,{omit:["_buffers"]}),Pn("ProgramConfigurationSet",$t);const ln=8192,en=Math.pow(2,14)-1,yn=-en-1;function Sn(h){var a=ln/h.extent,s=h.loadGeometry();for(let I=0;I<s.length;I++){var d=s[I];for(let R=0;R<d.length;R++){var m=d[R],_=Math.round(m.x*a),x=Math.round(m.y*a);m.x=D(_,yn,en),m.y=D(x,yn,en),(_<m.x||_>m.x+1||x<m.y||x>m.y+1)&&K("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Fn(h,a){return{type:h.type,id:h.id,properties:h.properties,geometry:a?Sn(h):[]}}function nr(h,a,s,d,m){h.emplaceBack(2*a+(d+1)/2,2*s+(m+1)/2)}class Yn{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(s=>s.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Ma,this.indexArray=new kc,this.segments=new E,this.programConfigurations=new $t(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(a,s,d){var m,_,x,I,R=this.layers[0],U=[];let H=null,J=!1;R.type==="circle"&&(H=R.layout.get("circle-sort-key"),J=!H.isConstant());for({feature:m,id:_,index:x,sourceLayerIndex:I}of a){var he,_e=this.layers[0]._featureFilter.needGeometry,Te=Fn(m,_e);this.layers[0]._featureFilter.filter(new zo(this.zoom),Te,d)&&(he=J?H.evaluate(Te,{},d):void 0,_e={id:_,properties:m.properties,type:m.type,sourceLayerIndex:I,index:x,geometry:_e?Te.geometry:Sn(m),patterns:{},sortKey:he},U.push(_e))}J&&U.sort((Re,qe)=>Re.sortKey-qe.sortKey);for(const Re of U){var{geometry:Ne,index:Ve,sourceLayerIndex:je}=Re,Oe=a[Ve].feature;this.addFeature(Re,Ne,Ve,d),s.featureIndex.insert(Oe,Ne,Ve,je,this.index)}}update(a,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,H_),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,s,d,m){for(const R of s)for(const U of R){var _=U.x,x=U.y;if(!(_<0||_>=ln||x<0||x>=ln)){var I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey);const H=I.vertexLength;nr(this.layoutVertexArray,_,x,-1,-1),nr(this.layoutVertexArray,_,x,1,-1),nr(this.layoutVertexArray,_,x,1,1),nr(this.layoutVertexArray,_,x,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+3,H+2),I.vertexLength+=4,I.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,d,{},m)}}function zn(h,a){for(let s=0;s<h.length;s++)if(Vr(a,h[s]))return!0;for(let s=0;s<a.length;s++)if(Vr(h,a[s]))return!0;return!!Nn(h,a)}function bn(h,a,s){return Vr(h,a)||!!Lr(a,h,s)}function Wn(h,a){if(h.length===1)return kr(a,h[0]);for(let d=0;d<a.length;d++){var s=a[d];for(let m=0;m<s.length;m++)if(Vr(h,s[m]))return!0}for(let d=0;d<h.length;d++)if(kr(a,h[d]))return!0;for(let d=0;d<a.length;d++)if(Nn(h,a[d]))return!0;return!1}function hr(h,a,s){for(let m=0;m<a.length;m++){var d=a[m];if(3<=h.length){for(let _=0;_<d.length;_++)if(Vr(h,d[_]))return!0}if(function(_,x,I){if(1<_.length){if(Nn(_,x))return 1;for(let R=0;R<x.length;R++)if(Lr(x[R],_,I))return 1}for(let R=0;R<_.length;R++)if(Lr(_[R],x,I))return 1}(h,d,s))return!0}return!1}function Nn(h,a){var s,d;if(h.length!==0&&a.length!==0)for(let R=0;R<h.length-1;R++){var m=h[R],_=h[R+1];for(let U=0;U<a.length-1;U++){var x=a[U],I=a[U+1];if(d=_,te(s=m,x=x,I=I)!==te(d,x,I)&&te(s,d,x)!==te(s,d,I))return 1}}}function Lr(h,a,s){var d=s*s;if(a.length===1)return h.distSqr(a[0])<d;for(let m=1;m<a.length;m++)if(mo(h,a[m-1],a[m])<d)return 1}function mo(h,a,s){var d=a.distSqr(s);return d===0||(d=((h.x-a.x)*(s.x-a.x)+(h.y-a.y)*(s.y-a.y))/d)<0?h.distSqr(a):1<d?h.distSqr(s):h.distSqr(s.sub(a)._mult(d)._add(a))}function kr(h,a){let s=!1,d,m,_;for(let x=0;x<h.length;x++)for(let I=0,R=(d=h[x]).length-1;I<d.length;R=I++)m=d[I],_=d[R],m.y>a.y!=_.y>a.y&&a.x<(_.x-m.x)*(a.y-m.y)/(_.y-m.y)+m.x&&(s=!s);return s}function Vr(h,a){let s=!1;for(let _=0,x=h.length-1;_<h.length;x=_++){var d=h[_],m=h[x];d.y>a.y!=m.y>a.y&&a.x<(m.x-d.x)*(a.y-d.y)/(m.y-d.y)+d.x&&(s=!s)}return s}function _r(h,a,s,d,m){for(const x of h)if(a<=x.x&&s<=x.y&&d>=x.x&&m>=x.y)return!0;var _=[new p(a,s),new p(a,m),new p(d,m),new p(d,s)];if(2<h.length){for(const x of _)if(Vr(h,x))return!0}for(let x=0;x<h.length-1;x++)if(function(I,R,U){var H=U[0],J=U[2];if(!(I.x<H.x&&R.x<H.x||I.x>J.x&&R.x>J.x||I.y<H.y&&R.y<H.y||I.y>J.y&&R.y>J.y))return H=te(I,R,U[0]),H!==te(I,R,U[1])||H!==te(I,R,U[2])||H!==te(I,R,U[3])}(h[x],h[x+1],_))return!0;return!1}function xo(h,a,s){var d=a.paint.get(h).value;return d.kind==="constant"?d.value:s.programConfigurations.get(a.id).getMaxValue(h)}function qr(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Xr(h,a,s,d,m){if(!a[0]&&!a[1])return h;var _=p.convert(a)._mult(m),x=(s==="viewport"&&_._rotate(-d),[]);for(let R=0;R<h.length;R++){var I=h[R];x.push(I.sub(_))}return x}function ei(h,a){var s=[];for(let R=0;R<h.length;R++){var d=h[R],m=[];for(let U=0;U<d.length;U++){var x=d[U-1],_=d[U],I=d[U+1],x=U===0?new p(0,0):_.sub(x)._unit()._perp(),I=U===d.length-1?new p(0,0):I.sub(_)._unit()._perp(),x=x._add(I)._unit(),I=x.x*I.x+x.y*I.y;I!=0&&x._mult(1/I),m.push(x._mult(a)._add(_))}s.push(m)}return s}Pn("CircleBucket",Yn,{omit:["layers"]});let xi,al;var Ra={get paint(){return al=al||new ns({"circle-radius":new ir(ge.paint_circle["circle-radius"]),"circle-color":new ir(ge.paint_circle["circle-color"]),"circle-blur":new ir(ge.paint_circle["circle-blur"]),"circle-opacity":new ir(ge.paint_circle["circle-opacity"]),"circle-translate":new Kn(ge.paint_circle["circle-translate"]),"circle-translate-anchor":new Kn(ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kn(ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kn(ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ir(ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ir(ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ir(ge.paint_circle["circle-stroke-opacity"])})},get layout(){return xi=xi||new ns({"circle-sort-key":new ir(ge.layout_circle["circle-sort-key"])})}},Co=1e-6,Ro=typeof Float32Array<"u"?Float32Array:Array;function Fl(){var h=new Ro(9);return Ro!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function Bo(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Ci(h,Oe,s){var d=Oe[0],m=Oe[1],_=Oe[2],x=Oe[3],I=Oe[4],R=Oe[5],U=Oe[6],H=Oe[7],J=Oe[8],he=Oe[9],_e=Oe[10],Te=Oe[11],Ne=Oe[12],Ve=Oe[13],je=Oe[14],Oe=Oe[15],Re=s[0],qe=s[1],at=s[2],_t=s[3];return h[0]=Re*d+qe*I+at*J+_t*Ne,h[1]=Re*m+qe*R+at*he+_t*Ve,h[2]=Re*_+qe*U+at*_e+_t*je,h[3]=Re*x+qe*H+at*Te+_t*Oe,Re=s[4],qe=s[5],at=s[6],_t=s[7],h[4]=Re*d+qe*I+at*J+_t*Ne,h[5]=Re*m+qe*R+at*he+_t*Ve,h[6]=Re*_+qe*U+at*_e+_t*je,h[7]=Re*x+qe*H+at*Te+_t*Oe,Re=s[8],qe=s[9],at=s[10],_t=s[11],h[8]=Re*d+qe*I+at*J+_t*Ne,h[9]=Re*m+qe*R+at*he+_t*Ve,h[10]=Re*_+qe*U+at*_e+_t*je,h[11]=Re*x+qe*H+at*Te+_t*Oe,Re=s[12],qe=s[13],at=s[14],_t=s[15],h[12]=Re*d+qe*I+at*J+_t*Ne,h[13]=Re*m+qe*R+at*he+_t*Ve,h[14]=Re*_+qe*U+at*_e+_t*je,h[15]=Re*x+qe*H+at*Te+_t*Oe,h}Math.hypot||(Math.hypot=function(){for(var h=0,a=arguments.length;a--;)h+=arguments[a]*arguments[a];return Math.sqrt(h)});function ro(h,a,s,d,m){return a=1/Math.tan(a/2),h[0]=a/s,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=a,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,m!=null&&m!==1/0?(h[10]=(m+d)*(s=1/(d-m)),h[14]=2*m*d*s):(h[10]=-1,h[14]=-2*d),h}function Oo(h,a,s,d,m,_,x){var I=1/(a-s),R=1/(d-m),U=1/(_-x);return h[0]=-2*I,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*R,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*U,h[11]=0,h[12]=(a+s)*I,h[13]=(m+d)*R,h[14]=(x+_)*U,h[15]=1,h}rl=Ci;function ja(){var h=new Ro(3);return Ro!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function ti(h,a,s){var d=new Ro(3);return d[0]=h,d[1]=a,d[2]=s,d}function da(h,a){var m=a[0],s=a[1],d=a[2],m=m*m+s*s+d*d;return 0<m&&(m=1/Math.sqrt(m)),h[0]=a[0]*m,h[1]=a[1]*m,h[2]=a[2]*m,h}function zl(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]}function Sa(h,_,R){var d=_[0],m=_[1],_=_[2],x=R[0],I=R[1],R=R[2];return h[0]=m*R-_*I,h[1]=_*x-d*R,h[2]=d*I-m*x,h}function Si(h,a,s){return h[0]=a[0]-s[0],h[1]=a[1]-s[1],h[2]=a[2]-s[2],h}function Fs(h,x,s){var d=x[0],m=x[1],_=x[2],x=x[3];return h[0]=s[0]*d+s[4]*m+s[8]*_+s[12]*x,h[1]=s[1]*d+s[5]*m+s[9]*_+s[13]*x,h[2]=s[2]*d+s[6]*m+s[10]*_+s[14]*x,h[3]=s[3]*d+s[7]*m+s[11]*_+s[15]*x,h}ja();function zs(h,a,s){return h[0]=a[0]*s[0],h[1]=a[1]*s[1],h[2]=a[2]*s[2],h[3]=a[3]*s[3],h}function Wo(){var h=new Ro(4);return Ro!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}vs=new Ro(4),Ro!=Float32Array&&(vs[0]=0,vs[1]=0,vs[2]=0,vs[3]=0),ja(),ti(1,0,0),ti(0,1,0),Wo(),Wo(),Fl();function ii(s){var a=s[0],s=s[1];return a*a+s*s}go=new Ro(2),Ro!=Float32Array&&(go[0]=0,go[1]=0);class hu extends Ds{constructor(a){super(a,Ra)}createBucket(a){return new Yn(a)}queryRadius(a){return xo("circle-radius",this,a)+xo("circle-stroke-width",this,a)+qr(this.paint.get("circle-translate"))}queryIntersectsFeature(U,H,d,m,_,x,I,R){var U=Xr(U,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,I),H=this.paint.get("circle-radius").evaluate(H,d)+this.paint.get("circle-stroke-width").evaluate(H,d),J=this.paint.get("circle-pitch-alignment")==="map",he=J?U:ni(U,R),_e=J?H*I:H;for(const Ve of m)for(const je of Ve){var Te=J?je:Bl(je,R);let Oe=_e;var Ne=Fs([],[je.x,je.y,0,1],R);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Oe*=Ne[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Oe*=x.cameraToCenterDistance/Ne[3]),bn(he,Te,Oe))return!0}return!1}}function Bl(h,a){return h=Fs([],[h.x,h.y,0,1],a),new p(h[0]/h[3],h[1]/h[3])}function ni(h,a){return h.map(s=>Bl(s,a))}class fu extends Yn{}Pn("HeatmapBucket",fu,{omit:["layers"]});let yp;var Hm={get paint(){return yp=yp||new ns({"heatmap-radius":new ir(ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ir(ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kn(ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new up(ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kn(ge.paint_heatmap["heatmap-opacity"])})}};function Bs(h,{width:a,height:s},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==a*s*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: `+a*s*d)}else m=new Uint8Array(a*s*d);return h.width=a,h.height=s,h.data=m,h}function od(h,{width:a,height:s},d){var m;a===h.width&&s===h.height||(ys(h,m=Bs({},{width:a,height:s},d),{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,a),height:Math.min(h.height,s)},d),h.width=a,h.height=s,h.data=m.data)}function ys(h,a,s,d,m,_){if(m.width!==0&&m.height!==0){if(m.width>h.width||m.height>h.height||s.x>h.width-m.width||s.y>h.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>a.width||m.height>a.height||d.x>a.width-m.width||d.y>a.height-m.height)throw new RangeError("out of range destination coordinates for image copy");var x=h.data,I=a.data;if(x===I)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<m.height;H++){var R=((s.y+H)*h.width+s.x)*_,U=((d.y+H)*a.width+d.x)*_;for(let J=0;J<m.width*_;J++)I[U+J]=x[R+J]}}}class Ei{constructor(a,s){Bs(this,a,1,s)}resize(a){od(this,a,1)}clone(){return new Ei({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,d,m,_){ys(a,s,d,m,_,1)}}class Ko{constructor(a,s){Bs(this,a,4,s)}resize(a){od(this,a,4)}replace(a,s){s?this.data.set(a):a instanceof Uint8ClampedArray?this.data=new Uint8Array(a.buffer):this.data=a}clone(){return new Ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,s,d,m,_){ys(a,s,d,m,_,4)}}function $a(h){const a={};var s=h.resolution||256,d=h.clips?h.clips.length:1;const m=h.image||new Ko({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error("width is not a power of 2 - "+s);var _=(H,J,he)=>{a[h.evaluationKey]=he,he=h.expression.evaluate(a),m.data[H+J+0]=Math.floor(255*he.r/he.a),m.data[H+J+1]=Math.floor(255*he.g/he.a),m.data[H+J+2]=Math.floor(255*he.b/he.a),m.data[H+J+3]=Math.floor(255*he.a)};if(h.clips)for(let H=0,J=0;H<d;++H,J+=4*s)for(let he=0,_e=0;he<s;he++,_e+=4){var x=he/(s-1),{start:I,end:R}=h.clips[H];_(J,_e,I*(1-x)+R*x)}else for(let H=0,J=0;H<s;H++,J+=4){var U=H/(s-1);_(0,J,U)}return m}Pn("AlphaImage",Ei),Pn("RGBAImage",Ko);class V_ extends Ds{createBucket(a){return new fu(a)}constructor(a){super(a,Hm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){var a=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=$a({expression:a,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Vm;var My={get paint(){return Vm=Vm||new ns({"hillshade-illumination-direction":new Kn(ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kn(ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kn(ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kn(ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kn(ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kn(ge.paint_hillshade["hillshade-accent-color"])})}};class sM extends Ds{constructor(a){super(a,My)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Us=Ni([{name:"a_pos",components:2,type:"Int16"}],4).members;ms={exports:{}};function Ry(h,a,s){s=s||2;var d,m,_,x,I,R=a&&a.length,U=R?a[0]*s:h.length,H=q_(h,0,U,s,!0),J=[];if(H&&H.next!==H.prev){if(R&&(H=function(Ne,Ve,je,Oe){var Re,qe,at,_t,Lt=[];for(Re=0,qe=Ve.length;Re<qe;Re++)_t=Ve[Re]*Oe,at=Re<qe-1?Ve[Re+1]*Oe:Ne.length,(_t=q_(Ne,_t,at,Oe,!1))===_t.next&&(_t.steiner=!0),Lt.push(function(Kt){for(var Vt=Kt,Qt=Kt;(Vt.x<Qt.x||Vt.x===Qt.x&&Vt.y<Qt.y)&&(Qt=Vt),Vt=Vt.next,Vt!==Kt;);return Qt}(_t));for(Lt.sort(ju),Re=0;Re<Lt.length;Re++)je=function(Kt,Vt){var Qt=function(on,hn){var dn,Xt=hn,Un=on.x,Rn=on.y,jn=-1/0;do if(Rn<=Xt.y&&Rn>=Xt.next.y&&Xt.next.y!==Xt.y){var pr=Xt.x+(Rn-Xt.y)*(Xt.next.x-Xt.x)/(Xt.next.y-Xt.y);if(pr<=Un&&jn<pr&&(jn=pr,dn=Xt.x<Xt.next.x?Xt:Xt.next,pr===Un))return dn}while(Xt=Xt.next,Xt!==hn);if(!dn)return null;var Ur,br=dn,So=dn.x,or=dn.y,Ir=1/0;for(Xt=dn;Un>=Xt.x&&Xt.x>=So&&Un!==Xt.x&&Wh(Rn<or?Un:jn,Rn,So,or,Rn<or?jn:Un,Rn,Xt.x,Xt.y)&&(Ur=Math.abs(Rn-Xt.y)/(Un-Xt.x),qm(Xt,on))&&(Ur<Ir||Ur===Ir&&(Xt.x>dn.x||Xt.x===dn.x&&function(oo,Zo){return Fi(oo.prev,oo,Zo.prev)<0&&Fi(Zo.next,oo,oo.next)<0}(dn,Xt)))&&(dn=Xt,Ir=Ur),Xt=Xt.next,Xt!==br;);return dn}(Kt,Vt);return Qt?(lh(Kt=i0(Qt,Kt),Kt.next),lh(Qt,Qt.next)):Vt}(Lt[Re],je);return je}(h,a,H,s)),h.length>80*s){for(var he=d=h[0],_e=m=h[1],Te=s;Te<U;Te+=s)(_=h[Te])<he&&(he=_),(x=h[Te+1])<_e&&(_e=x),d<_&&(d=_),m<x&&(m=x);I=(I=Math.max(d-he,m-_e))!==0?32767/I:0}Ul(H,J,s,he,_e,I,0)}return J}function q_(h,a,s,d,m){var _,x;if(m===0<G_(h,a,s,d))for(_=a;_<s;_+=d)x=a0(_,h[_],h[_+1],x);else for(_=s-d;a<=_;_-=d)x=a0(_,h[_],h[_+1],x);return x&&Oy(x,x.next)&&(Gm(x),x=x.next),x}function lh(h,a){if(!h)return h;a=a||h;var s,d=h;do if(s=!1,d.steiner||!Oy(d,d.next)&&Fi(d.prev,d,d.next)!==0)d=d.next;else{if(Gm(d),(d=a=d.prev)===d.next)break;s=!0}while(s||d!==a);return a}function Ul(h,a,s,d,m,_,x){if(h){if(!x&&_){for(var I=h,R=d,U=m,H=_,J=I;J.z===0&&(J.z=vp(J.x,J.y,R,U,H)),J.prevZ=J.prev,J.nextZ=J.next,(J=J.next)!==I;);J.prevZ.nextZ=null,J.prevZ=null;var he,_e,Te,Ne,Ve,je,Oe,Re,qe=J,at=1;do for(_e=qe,Ve=qe=null,je=0;_e;){for(je++,Te=_e,he=Oe=0;he<at&&(Oe++,Te=Te.nextZ);he++);for(Re=at;0<Oe||0<Re&&Te;)Oe!==0&&(Re===0||!Te||_e.z<=Te.z)?(_e=(Ne=_e).nextZ,Oe--):(Te=(Ne=Te).nextZ,Re--),Ve?Ve.nextZ=Ne:qe=Ne,Ne.prevZ=Ve,Ve=Ne;_e=Te}while(Ve.nextZ=null,at*=2,1<je)}for(var _t,Lt,Kt=h;h.prev!==h.next;)if(_t=h.prev,Lt=h.next,_?function(Vt,Qt,on,hn){var dn=Vt.prev,Xt=Vt,Un=Vt.next;if(!(0<=Fi(dn,Xt,Un))){for(var Rn=dn.x,jn=Xt.x,pr=Un.x,Ur=dn.y,br=Xt.y,So=Un.y,or=Rn<jn?Rn<pr?Rn:pr:jn<pr?jn:pr,Ir=Ur<br?Ur<So?Ur:So:br<So?br:So,oo=jn<Rn?pr<Rn?Rn:pr:pr<jn?jn:pr,Zo=br<Ur?So<Ur?Ur:So:So<br?br:So,Mc=vp(or,Ir,Qt,on,hn),Hl=vp(oo,Zo,Qt,on,hn),io=Vt.prevZ,eo=Vt.nextZ;io&&io.z>=Mc&&eo&&eo.z<=Hl;){if(io.x>=or&&io.x<=oo&&io.y>=Ir&&io.y<=Zo&&io!==dn&&io!==Un&&Wh(Rn,Ur,jn,br,pr,So,io.x,io.y)&&0<=Fi(io.prev,io,io.next)||(io=io.prevZ,eo.x>=or&&eo.x<=oo&&eo.y>=Ir&&eo.y<=Zo&&eo!==dn&&eo!==Un&&Wh(Rn,Ur,jn,br,pr,So,eo.x,eo.y)&&0<=Fi(eo.prev,eo,eo.next)))return;eo=eo.nextZ}for(;io&&io.z>=Mc;){if(io.x>=or&&io.x<=oo&&io.y>=Ir&&io.y<=Zo&&io!==dn&&io!==Un&&Wh(Rn,Ur,jn,br,pr,So,io.x,io.y)&&0<=Fi(io.prev,io,io.next))return;io=io.prevZ}for(;eo&&eo.z<=Hl;){if(eo.x>=or&&eo.x<=oo&&eo.y>=Ir&&eo.y<=Zo&&eo!==dn&&eo!==Un&&Wh(Rn,Ur,jn,br,pr,So,eo.x,eo.y)&&0<=Fi(eo.prev,eo,eo.next))return;eo=eo.nextZ}return 1}}(h,d,m,_):function(hn){var Qt=hn.prev,on=hn,hn=hn.next;if(!(0<=Fi(Qt,on,hn))){for(var dn=Qt.x,Xt=on.x,Un=hn.x,Rn=Qt.y,jn=on.y,pr=hn.y,Ur=dn<Xt?dn<Un?dn:Un:Xt<Un?Xt:Un,br=Rn<jn?Rn<pr?Rn:pr:jn<pr?jn:pr,So=Xt<dn?Un<dn?dn:Un:Un<Xt?Xt:Un,or=jn<Rn?pr<Rn?Rn:pr:pr<jn?jn:pr,Ir=hn.next;Ir!==Qt;){if(Ir.x>=Ur&&Ir.x<=So&&Ir.y>=br&&Ir.y<=or&&Wh(dn,Rn,Xt,jn,Un,pr,Ir.x,Ir.y)&&0<=Fi(Ir.prev,Ir,Ir.next))return;Ir=Ir.next}return 1}}(h))a.push(_t.i/s|0),a.push(h.i/s|0),a.push(Lt.i/s|0),Gm(h),h=Lt.next,Kt=Lt.next;else if((h=Lt)===Kt){x?x===1?Ul(h=function(Vt,Qt,on){var hn=Vt;do var dn=hn.prev,Xt=hn.next.next;while(!Oy(dn,Xt)&&o0(dn,hn,hn.next,Xt)&&qm(dn,Xt)&&qm(Xt,dn)&&(Qt.push(dn.i/on|0),Qt.push(hn.i/on|0),Qt.push(Xt.i/on|0),Gm(hn),Gm(hn.next),hn=Vt=Xt),hn=hn.next,hn!==Vt);return lh(hn)}(lh(h),a,s),a,s,d,m,_,2):x===2&&function(Vt,Qt,on,hn,dn,Xt){var Un=Vt;do for(var Rn,jn=Un.next.next;jn!==Un.prev;){if(Un.i!==jn.i&&function(pr,Ur){return pr.next.i!==Ur.i&&pr.prev.i!==Ur.i&&!function(br,So){var or=br;do if(or.i!==br.i&&or.next.i!==br.i&&or.i!==So.i&&or.next.i!==So.i&&o0(or,or.next,br,So))return 1;while(or=or.next,or!==br)}(pr,Ur)&&(qm(pr,Ur)&&qm(Ur,pr)&&function(br,So){for(var or=br,Ir=!1,oo=(br.x+So.x)/2,Zo=(br.y+So.y)/2;or.y>Zo!=or.next.y>Zo&&or.next.y!==or.y&&oo<(or.next.x-or.x)*(Zo-or.y)/(or.next.y-or.y)+or.x&&(Ir=!Ir),or=or.next,or!==br;);return Ir}(pr,Ur)&&(Fi(pr.prev,pr,Ur.prev)||Fi(pr,Ur.prev,Ur))||Oy(pr,Ur)&&0<Fi(pr.prev,pr,pr.next)&&0<Fi(Ur.prev,Ur,Ur.next))}(Un,jn))return Rn=i0(Un,jn),Un=lh(Un,Un.next),Rn=lh(Rn,Rn.next),Ul(Un,Qt,on,hn,dn,Xt,0),Ul(Rn,Qt,on,hn,dn,Xt,0);jn=jn.next}while(Un=Un.next,Un!==Vt)}(h,a,s,d,m,_):Ul(lh(h),a,s,d,m,_,1);break}}}function ju(h,a){return h.x-a.x}function vp(h,a,s,d,m){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-s)*m|0)|h<<8))|h<<4))|h<<2))|h<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-d)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function Wh(h,a,s,d,m,_,x,I){return(h-x)*(_-I)<=(m-x)*(a-I)&&(s-x)*(a-I)<=(h-x)*(d-I)&&(m-x)*(d-I)<=(s-x)*(_-I)}function Fi(h,a,s){return(a.y-h.y)*(s.x-a.x)-(a.x-h.x)*(s.y-a.y)}function Oy(h,a){return h.x===a.x&&h.y===a.y}function o0(h,a,s,d){var m=Ly(Fi(h,a,s)),_=Ly(Fi(h,a,d)),x=Ly(Fi(s,d,h)),I=Ly(Fi(s,d,a));return m!==_&&x!==I||m===0&&Dy(h,s,a)||_===0&&Dy(h,d,a)||x===0&&Dy(s,h,d)||!(I!==0||!Dy(s,a,d))}function Dy(h,a,s){return a.x<=Math.max(h.x,s.x)&&a.x>=Math.min(h.x,s.x)&&a.y<=Math.max(h.y,s.y)&&a.y>=Math.min(h.y,s.y)}function Ly(h){return 0<h?1:h<0?-1:0}function qm(h,a){return Fi(h.prev,h,h.next)<0?0<=Fi(h,a,h.next)&&0<=Fi(h,h.prev,a):Fi(h,a,h.prev)<0||Fi(h,h.next,a)<0}function i0(h,a){var s=new _p(h.i,h.x,h.y),d=new _p(a.i,a.x,a.y),m=h.next,_=a.prev;return(h.next=a).prev=h,(s.next=m).prev=s,(d.next=s).prev=d,(_.next=d).prev=_,d}function a0(h,a,s,d){return h=new _p(h,a,s),d?(h.next=d.next,(h.prev=d).next.prev=h,d.next=h):(h.prev=h).next=h,h}function Gm(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function _p(h,a,s){this.i=h,this.x=a,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function G_(h,a,s,d){for(var m=0,_=a,x=s-d;_<s;_+=d)m+=(h[x]-h[_])*(h[_+1]+h[x+1]),x=_;return m}ms.exports=Ry,(ms.exports.default=Ry).deviation=function(h,a,s,d){var m=a&&a.length,_=m?a[0]*s:h.length,x=Math.abs(G_(h,0,_,s));if(m)for(var I=0,R=a.length;I<R;I++){var U=a[I]*s,H=I<R-1?a[I+1]*s:h.length;x-=Math.abs(G_(h,U,H,s))}for(var J=0,I=0;I<d.length;I+=3){var he=d[I]*s,_e=d[I+1]*s,Te=d[I+2]*s;J+=Math.abs((h[he]-h[Te])*(h[1+_e]-h[1+he])-(h[he]-h[_e])*(h[1+Te]-h[1+he]))}return x===0&&J===0?0:Math.abs((J-x)/x)},Ry.flatten=function(h){for(var a=h[0][0].length,s={vertices:[],holes:[],dimensions:a},d=0,m=0;m<h.length;m++){for(var _=0;_<h[m].length;_++)for(var x=0;x<a;x++)s.vertices.push(h[m][_][x]);0<m&&(d+=h[m-1].length,s.holes.push(d))}return s};var Ny=l(ms.exports);function W_(h,a,s,d,m){(function _(x,I,R,U,H){for(;R<U;){600<U-R&&(J=U-R+1,Ne=I-R+1,_e=Math.log(J),he=.5*Math.exp(2*_e/3),_e=.5*Math.sqrt(_e*he*(J-he)/J)*(Ne-J/2<0?-1:1),Te=Math.max(R,Math.floor(I-Ne*he/J+_e)),Ne=Math.min(U,Math.floor(I+(J-Ne)*he/J+_e)),_(x,I,Te,Ne,H));var J,he,_e,Te,Ne,Ve=x[I],je=R,Oe=U;for(Wm(x,R,I),0<H(x[U],Ve)&&Wm(x,R,U);je<Oe;){for(Wm(x,je,Oe),je++,Oe--;H(x[je],Ve)<0;)je++;for(;0<H(x[Oe],Ve);)Oe--}H(x[R],Ve)===0?Wm(x,R,Oe):Wm(x,++Oe,U),Oe<=I&&(R=Oe+1),I<=Oe&&(U=Oe-1)}})(h,a,s,d||h.length-1,m)}function Wm(h,a,s){var d=h[a];h[a]=h[s],h[s]=d}function Fy(h,a){var s=h.length;if(s<=1)return[h];var d=[];let m,_;for(let I=0;I<s;I++){var x=function(R){let U=0;for(let H=0,J=R.length,he=J-1,_e,Te;H<J;he=H++)_e=R[H],Te=R[he],U+=(Te.x-_e.x)*(_e.y+Te.y);return U}(h[I]);x!==0&&(h[I].area=Math.abs(x),(_=_===void 0?x<0:_)===x<0?(m&&d.push(m),m=[h[I]]):m.push(h[I]))}if(m&&d.push(m),1<a)for(let I=0;I<d.length;I++)d[I].length<=a||(W_(d[I],a,1,d[I].length-1,CE),d[I]=d[I].slice(0,a));return d}function CE(h,a){return a.area-h.area}function K_(h,a,s){var d=s.patternDependencies;let m=!1;for(const x of a){var _=x.paint.get(h+"-pattern"),_=(_.isConstant()||(m=!0),_.constantOr(null));_&&(m=!0,d[_.to]=!0,d[_.from]=!0)}return m}function Y_(h,a,s,d,m){var _=m.patternDependencies;for(const U of a){var x,I,R=U.paint.get(h+"-pattern").value;R.kind!=="constant"&&(x=R.evaluate({zoom:d-1},s,{},m.availableImages),I=R.evaluate({zoom:d},s,{},m.availableImages),R=R.evaluate({zoom:d+1},s,{},m.availableImages),x=x&&x.name?x.name:x,I=I&&I.name?I.name:I,R=R&&R.name?R.name:R,_[x]=!0,_[I]=!0,_[R]=!0,s.patterns[U.id]={min:x,mid:I,max:R})}return s}class Z_{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(s=>s.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ls,this.indexArray=new kc,this.indexArray2=new Gh,this.programConfigurations=new $t(a.layers,a.zoom),this.segments=new E,this.segments2=new E,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(a,s,d){this.hasPattern=K_("fill",this.layers,s);var m,_,x,I,R=this.layers[0].layout.get("fill-sort-key"),U=!R.isConstant(),H=[];for({feature:m,id:_,index:x,sourceLayerIndex:I}of a){var J,he=this.layers[0]._featureFilter.needGeometry,_e=Fn(m,he);this.layers[0]._featureFilter.filter(new zo(this.zoom),_e,d)&&(J=U?R.evaluate(_e,{},d,s.availableImages):void 0,he={id:_,properties:m.properties,type:m.type,sourceLayerIndex:I,index:x,geometry:he?_e.geometry:Sn(m),patterns:{},sortKey:J},H.push(he))}U&&H.sort((Oe,Re)=>Oe.sortKey-Re.sortKey);for(const Oe of H){var{geometry:Te,index:Ne,sourceLayerIndex:Ve}=Oe,je=(this.hasPattern?(je=Y_("fill",this.layers,Oe,this.zoom,s),this.patternFeatures.push(je)):this.addFeature(Oe,Te,Ne,d,{}),a[Ne].feature);s.featureIndex.insert(je,Te,Ne,Ve,this.index)}}update(a,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,d)}addFeatures(a,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Us),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,s,d,m,_){for(const _e of Fy(s,500)){let Te=0;for(const Ne of _e)Te+=Ne.length;var x=this.segments.prepareSegment(Te,this.layoutVertexArray,this.indexArray),I=x.vertexLength,R=[],U=[];for(const Ne of _e)if(Ne.length!==0){Ne!==_e[0]&&U.push(R.length/2);var H=this.segments2.prepareSegment(Ne.length,this.layoutVertexArray,this.indexArray2),J=H.vertexLength;this.layoutVertexArray.emplaceBack(Ne[0].x,Ne[0].y),this.indexArray2.emplaceBack(J+Ne.length-1,J),R.push(Ne[0].x),R.push(Ne[0].y);for(let Ve=1;Ve<Ne.length;Ve++)this.layoutVertexArray.emplaceBack(Ne[Ve].x,Ne[Ve].y),this.indexArray2.emplaceBack(J+Ve-1,J+Ve),R.push(Ne[Ve].x),R.push(Ne[Ve].y);H.vertexLength+=Ne.length,H.primitiveLength+=Ne.length}var he=Ny(R,U);for(let Ne=0;Ne<he.length;Ne+=3)this.indexArray.emplaceBack(I+he[Ne],I+he[Ne+1],I+he[Ne+2]);x.vertexLength+=Te,x.primitiveLength+=he.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,d,_,m)}}Pn("FillBucket",Z_,{omit:["layers","patternFeatures"]});let X_,s0;var SE={get paint(){return s0=s0||new ns({"fill-antialias":new Kn(ge.paint_fill["fill-antialias"]),"fill-opacity":new ir(ge.paint_fill["fill-opacity"]),"fill-color":new ir(ge.paint_fill["fill-color"]),"fill-outline-color":new ir(ge.paint_fill["fill-outline-color"]),"fill-translate":new Kn(ge.paint_fill["fill-translate"]),"fill-translate-anchor":new Kn(ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new lu(ge.paint_fill["fill-pattern"])})},get layout(){return X_=X_||new ns({"fill-sort-key":new ir(ge.layout_fill["fill-sort-key"])})}};class EE extends Ds{constructor(a){super(a,SE)}recalculate(a,s){super.recalculate(a,s),a=this.paint._values["fill-outline-color"],a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Z_(a)}queryRadius(){return qr(this.paint.get("fill-translate"))}queryIntersectsFeature(a,s,d,m,_,x,I){return Wn(Xr(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,I),m)}isTileClipped(){return!0}}ha=Ni([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4);const lM=Ni([{name:"a_centroid",components:2,type:"Int16"}],4),TE=ha.members;var Kh={},uM=c,vs=bp;function bp(h,a,s,d,m){this.properties={},this.extent=s,this.type=0,this._pbf=h,this._geometry=-1,this._keys=d,this._values=m,h.readFields(IE,this,a)}function IE(h,a,s){if(h==1)a.id=s.readVarint();else if(h==2)for(var d=s,m=a,_=d.readVarint()+d.pos;d.pos<_;){var x=m._keys[d.readVarint()],I=m._values[d.readVarint()];m.properties[x]=I}else h==3?a.type=s.readVarint():h==4&&(a._geometry=s.pos)}bp.types=["Unknown","Point","LineString","Polygon"],bp.prototype.loadGeometry=function(){for(var h,a,s=this._pbf,d=(s.pos=this._geometry,s.readVarint()+s.pos),m=1,_=0,x=0,I=0,R=[];s.pos<d;)if(_<=0&&(m=7&(a=s.readVarint()),_=a>>3),_--,m===1||m===2)x+=s.readSVarint(),I+=s.readSVarint(),m===1&&(h&&R.push(h),h=[]),h.push(new uM(x,I));else{if(m!==7)throw new Error("unknown command "+m);h&&h.push(h[0].clone())}return h&&R.push(h),R},bp.prototype.bbox=function(){for(var h,a=this._pbf,s=(a.pos=this._geometry,a.readVarint()+a.pos),d=1,m=0,_=0,x=0,I=1/0,R=-1/0,U=1/0,H=-1/0;a.pos<s;)if(m<=0&&(d=7&(h=a.readVarint()),m=h>>3),m--,d===1||d===2)(_+=a.readSVarint())<I&&(I=_),R<_&&(R=_),(x+=a.readSVarint())<U&&(U=x),H<x&&(H=x);else if(d!==7)throw new Error("unknown command "+d);return[I,U,R,H]},bp.prototype.toGeoJSON=function(h,a,R){var d,m=this.extent*Math.pow(2,R),_=this.extent*h,x=this.extent*a,I=this.loadGeometry(),R=bp.types[this.type];function U(he){for(var _e=0;_e<he.length;_e++){var Te=he[_e],Ne=180-360*(Te.y+x)/m;he[_e]=[360*(Te.x+_)/m-180,360/Math.PI*Math.atan(Math.exp(Ne*Math.PI/180))-90]}}switch(this.type){case 1:for(var H=[],J=0;J<I.length;J++)H[J]=I[J][0];U(I=H);break;case 2:for(J=0;J<I.length;J++)U(I[J]);break;case 3:for(I=function(he){var _e=he.length;if(_e<=1)return[he];for(var Te,Ne,Ve=[],je=0;je<_e;je++){var Oe=function(Re){for(var qe,at,_t=0,Lt=0,Kt=Re.length,Vt=Kt-1;Lt<Kt;Vt=Lt++)qe=Re[Lt],at=Re[Vt],_t+=(at.x-qe.x)*(qe.y+at.y);return _t}(he[je]);Oe!==0&&((Ne=Ne===void 0?Oe<0:Ne)===Oe<0?(Te&&Ve.push(Te),Te=[he[je]]):Te.push(he[je]))}return Te&&Ve.push(Te),Ve}(I),J=0;J<I.length;J++)for(d=0;d<I[J].length;d++)U(I[J][d])}return I.length===1?I=I[0]:R="Multi"+R,h={type:"Feature",geometry:{type:R,coordinates:I},properties:this.properties},"id"in this&&(h.id=this.id),h};var kE=vs,go=PE;function PE(h,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(cM,this,a),this.length=this._features.length}function cM(h,a,s){h===15?a.version=s.readVarint():h===1?a.name=s.readString():h===5?a.extent=s.readVarint():h===2?a._features.push(s.pos):h===3?a._keys.push(s.readString()):h===4&&a._values.push(function(d){for(var m=null,_=d.readVarint()+d.pos;d.pos<_;){var x=d.readVarint()>>3;m=x==1?d.readString():x==2?d.readFloat():x==3?d.readDouble():x==4?d.readVarint64():x==5?d.readVarint():x==6?d.readSVarint():x==7?d.readBoolean():null}return m}(s))}PE.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");return this._pbf.pos=this._features[h],h=this._pbf.readVarint()+this._pbf.pos,new kE(this._pbf,h,this.extent,this._keys,this._values)};var dM=go;function Pc(h,a,s){h===3&&(h=new dM(s,s.readVarint()+s.pos)).length&&(a[h.name]=h)}Kh.VectorTile=function(h,a){this.layers=h.readFields(Pc,{},a)},Kh.VectorTileFeature=vs,Kh.VectorTileLayer=go;const l0=Kh.VectorTileFeature.types,Km=Math.pow(2,13);function Ym(h,a,s,d,m,_,x,I){h.emplaceBack(a,s,2*Math.floor(d*Km)+x,m*Km*2,_*Km*2,Math.round(I))}class Q_{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(s=>s.id),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new Uu,this.centroidVertexArray=new Bu,this.indexArray=new kc,this.programConfigurations=new $t(a.layers,a.zoom),this.segments=new E,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(a,s,d){this.features=[],this.hasPattern=K_("fill-extrusion",this.layers,s);for(var{feature:m,id:_,index:x,sourceLayerIndex:I}of a){var R=this.layers[0]._featureFilter.needGeometry,U=Fn(m,R);this.layers[0]._featureFilter.filter(new zo(this.zoom),U,d)&&(_={id:_,sourceLayerIndex:I,index:x,geometry:R?U.geometry:Sn(m),properties:m.properties,type:m.type,patterns:{}},this.hasPattern?this.features.push(Y_("fill-extrusion",this.layers,_,this.zoom,s)):this.addFeature(_,_.geometry,x,d,{}),s.featureIndex.insert(m,_.geometry,x,I,this.index,!0))}}addFeatures(a,s,d){for(const _ of this.features){var m=_.geometry;this.addFeature(_,m,_.index,s,d)}}update(a,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,TE),this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,lM.members,!0),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(a,s,d,m,_){var x={x:0,y:0,vertexCount:0};for(const Ve of Fy(s,500)){let je=0;for(const Re of Ve)je+=Re.length;let Oe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Re of Ve)if(Re.length!==0&&!u0(Re)){let qe=0;for(let at=0;at<Re.length;at++){var I,R,U,H=Re[at];1<=at&&(AE(H,I=Re[at-1])||(Oe.vertexLength+4>E.MAX_VERTEX_ARRAY_LENGTH&&(Oe=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)),R=H.sub(I)._perp()._unit(),U=I.dist(H),32768<qe+U&&(qe=0),Ym(this.layoutVertexArray,H.x,H.y,R.x,R.y,0,0,qe),Ym(this.layoutVertexArray,H.x,H.y,R.x,R.y,0,1,qe),x.x+=2*H.x,x.y+=2*H.y,x.vertexCount+=2,qe+=U,Ym(this.layoutVertexArray,I.x,I.y,R.x,R.y,0,0,qe),Ym(this.layoutVertexArray,I.x,I.y,R.x,R.y,0,1,qe),x.x+=2*I.x,x.y+=2*I.y,x.vertexCount+=2,H=Oe.vertexLength,this.indexArray.emplaceBack(H,H+2,H+1),this.indexArray.emplaceBack(H+1,H+2,H+3),Oe.vertexLength+=4,Oe.primitiveLength+=2))}}if(Oe.vertexLength+je>E.MAX_VERTEX_ARRAY_LENGTH&&(Oe=this.segments.prepareSegment(je,this.layoutVertexArray,this.indexArray)),l0[a.type]==="Polygon"){var J=[],he=[],_e=Oe.vertexLength;for(const Re of Ve)if(Re.length!==0){Re!==Ve[0]&&he.push(J.length/2);for(let qe=0;qe<Re.length;qe++){var Te=Re[qe];Ym(this.layoutVertexArray,Te.x,Te.y,0,0,1,1,0),x.x+=Te.x,x.y+=Te.y,x.vertexCount+=1,J.push(Te.x),J.push(Te.y)}}var Ne=Ny(J,he);for(let Re=0;Re<Ne.length;Re+=3)this.indexArray.emplaceBack(_e+Ne[Re],_e+Ne[Re+2],_e+Ne[Re+1]);Oe.primitiveLength+=Ne.length/3,Oe.vertexLength+=je}}for(let Ve=0;Ve<x.vertexCount;Ve++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,d,_,m)}}function AE(h,a){return h.x===a.x&&(h.x<0||h.x>ln)||h.y===a.y&&(h.y<0||h.y>ln)}function u0(h){return h.every(a=>a.x<0)||h.every(a=>a.x>ln)||h.every(a=>a.y<0)||h.every(a=>a.y>ln)}Pn("FillExtrusionBucket",Q_,{omit:["layers","features"]});let wp;var c0={get paint(){return wp=wp||new ns({"fill-extrusion-opacity":new Kn(ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ir(ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kn(ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kn(ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new lu(ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ir(ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ir(ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kn(ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class d0 extends Ds{constructor(a){super(a,c0)}createBucket(a){return new Q_(a)}queryRadius(){return qr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,s,d,m,_,x,I,R){return a=Xr(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,I),I=this.paint.get("fill-extrusion-height").evaluate(s,d),s=this.paint.get("fill-extrusion-base").evaluate(s,d),d=OE(a,R,0,0),a=RE(m,s,I,R),ME(a[0],a[1],d)}}function zy(h,a){return h.x*a.x+h.y*a.y}function h0(h,a){if(h.length===1){let H=0;var s=a[H++];let J;for(;!J||s.equals(J);)if(!(J=a[H++]))return 1/0;for(;H<a.length;H++){var d=a[H],U=h[0],_=J.sub(s),x=d.sub(s),U=U.sub(s),R=zy(_,_),m=zy(_,x),I=zy(x,x),_=zy(U,_),U=zy(U,x),x=R*I-m*m,I=(I*_-m*U)/x,R=(R*U-m*_)/x,U=s.z*(1-I-R)+J.z*I+d.z*R;if(isFinite(U))return U}return 1/0}{let H=1/0;for(const J of a)H=Math.min(H,J.z);return H}}function ME(h,a,s){let d=1/0;Wn(s,a)&&(d=h0(s,a[0]));for(let U=0;U<a.length;U++){var m=a[U],_=h[U];for(let H=0;H<m.length-1;H++){var x=m[H],R=m[H+1],I=_[H],R=[x,R,_[H+1],I,x];zn(s,R)&&(d=Math.min(d,h0(s,R)))}}return d!==1/0&&d}function RE(h,a,s,d){var m=[],_=[],x=d[8]*a,I=d[9]*a,R=d[10]*a,U=d[11]*a,H=d[8]*s,J=d[9]*s,he=d[10]*s,_e=d[11]*s;for(const Kt of h){var Te=[],Ne=[];for(const Vt of Kt){var at=Vt.x,Ve=Vt.y,_t=d[0]*at+d[4]*Ve+d[12],Lt=d[1]*at+d[5]*Ve+d[13],qe=d[2]*at+d[6]*Ve+d[14],at=d[3]*at+d[7]*Ve+d[15],Ve=qe+R,je=at+U,Oe=_t+H,Re=Lt+J,qe=qe+he,at=at+_e,_t=new p((_t+x)/je,(Lt+I)/je),Lt=(_t.z=Ve/je,Te.push(_t),new p(Oe/at,Re/at));Lt.z=qe/at,Ne.push(Lt)}m.push(Te),_.push(Ne)}return[m,_]}function OE(h,a,s,d){var m=[];for(const x of h){var _=[x.x,x.y,d,1];Fs(_,_,a),m.push(new p(_[0]/_[3],_[1]/_[3]))}return m}const DE=Ni([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,hM=Ni([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,jl=Kh.VectorTileFeature.types,sl=Math.cos(Math.PI/180*37.5),f0=Math.pow(2,14)/.5;class J_{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(s=>s.id),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Ec,this.layoutVertexArray2=new Ns,this.indexArray=new kc,this.programConfigurations=new $t(a.layers,a.zoom),this.segments=new E,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(a,s,d){this.hasPattern=K_("line",this.layers,s);var m,_,x,I,R=this.layers[0].layout.get("line-sort-key"),U=!R.isConstant(),H=[];for({feature:m,id:_,index:x,sourceLayerIndex:I}of a){var J,he=this.layers[0]._featureFilter.needGeometry,_e=Fn(m,he);this.layers[0]._featureFilter.filter(new zo(this.zoom),_e,d)&&(J=U?R.evaluate(_e,{},d):void 0,he={id:_,properties:m.properties,type:m.type,sourceLayerIndex:I,index:x,geometry:he?_e.geometry:Sn(m),patterns:{},sortKey:J},H.push(he))}U&&H.sort((Oe,Re)=>Oe.sortKey-Re.sortKey);for(const Oe of H){var{geometry:Te,index:Ne,sourceLayerIndex:Ve}=Oe,je=(this.hasPattern?(je=Y_("line",this.layers,Oe,this.zoom,s),this.patternFeatures.push(je)):this.addFeature(Oe,Te,Ne,d,{}),a[Ne].feature);s.featureIndex.insert(je,Te,Ne,Ve,this.index)}}update(a,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,s,this.stateDependentLayers,d)}addFeatures(a,s,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,hM)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,DE),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(a.properties,"mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,s,d,m,_){var x=this.layers[0].layout,I=x.get("line-join").evaluate(a,{}),R=x.get("line-cap"),U=x.get("line-miter-limit"),H=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const J of s)this.addLine(J,a,I,R,U,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,d,_,m)}addLine(a,s,d,m,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Lt=0;Lt<a.length-1;Lt++)this.totalDistance+=a[Lt].dist(a[Lt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}var I=jl[s.type]==="Polygon";let R=a.length;for(;2<=R&&a[R-1].equals(a[R-2]);)R--;let U=0;for(;U<R-1&&a[U].equals(a[U+1]);)U++;if(!(R<(I?3:2))){d==="bevel"&&(_=1.05);var H,J=this.overscaling<=16?15*ln/(512*this.overscaling):0,he=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let Lt,Kt,Vt,Qt;this.e1=this.e2=-1,I&&(Lt=a[R-2],Qt=a[U].sub(Lt)._unit()._perp());for(let on=U;on<R;on++)if(!(H=on===R-1?I?a[U+1]:void 0:a[on+1])||!a[on].equals(H)){Qt&&(Vt=Qt),Lt&&(Kt=Lt),Lt=a[on],Qt=H?H.sub(Lt)._unit()._perp():Vt;let hn=(Vt=Vt||Qt).add(Qt);hn.x===0&&hn.y===0||hn._unit();var _e=Vt.x*Qt.x+Vt.y*Qt.y,Ve=hn.x*Qt.x+hn.y*Qt.y,Te=Ve!=0?1/Ve:1/0,Ne=2*Math.sqrt(2-2*Ve),Ve=Ve<sl&&Kt&&H,je=0<Vt.x*Qt.y-Vt.y*Qt.x,Oe=(Ve&&on>U&&2*J<(Oe=Lt.dist(Kt))&&(Oe=Lt.sub(Lt.sub(Kt)._mult(J/Oe)._round()),this.updateDistance(Kt,Oe),this.addCurrentVertex(Oe,Vt,0,0,he),Kt=Oe),Kt&&H);let dn=Oe?d:I?"butt":m;if(Oe&&dn==="round"&&(Te<x?dn="miter":Te<=2&&(dn="fakeround")),(dn=dn==="miter"&&_<Te?"bevel":dn)==="bevel"&&(2<Te&&(dn="flipbevel"),Te<_)&&(dn="miter"),Kt&&this.updateDistance(Kt,Lt),dn==="miter")hn._mult(Te),this.addCurrentVertex(Lt,hn,0,0,he);else if(dn==="flipbevel")100<Te?hn=Qt.mult(-1):(Re=Te*Vt.add(Qt).mag()/Vt.sub(Qt).mag(),hn._perp()._mult(Re*(je?-1:1))),this.addCurrentVertex(Lt,hn,0,0,he),this.addCurrentVertex(Lt,hn.mult(-1),0,0,he);else if(dn==="bevel"||dn==="fakeround"){var Re=-Math.sqrt(Te*Te-1),Te=je?Re:0,qe=je?0:Re;if(Kt&&this.addCurrentVertex(Lt,Vt,Te,qe,he),dn==="fakeround"){var at=Math.round(180*Ne/Math.PI/20);for(let Un=1;Un<at;Un++){let Rn=Un/at;Rn!==.5&&(_t=Rn-.5,Rn+=Rn*_t*(Rn-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*_t*_t+(.848013+_e*(.215638*_e-1.06021))));var _t=Qt.sub(Vt)._mult(Rn)._add(Vt)._unit()._mult(je?-1:1);this.addHalfVertex(Lt,_t.x,_t.y,!1,je,0,he)}}H&&this.addCurrentVertex(Lt,Qt,-Te,-qe,he)}else dn==="butt"?this.addCurrentVertex(Lt,hn,0,0,he):dn==="square"?(Ne=Kt?1:-1,this.addCurrentVertex(Lt,hn,Ne,Ne,he)):dn==="round"&&(Kt&&(this.addCurrentVertex(Lt,Vt,0,0,he),this.addCurrentVertex(Lt,Vt,1,1,he,!0)),H)&&(this.addCurrentVertex(Lt,Qt,-1,-1,he,!0),this.addCurrentVertex(Lt,Qt,0,0,he));Ve&&on<R-1&&2*J<(Te=Lt.dist(H))&&(qe=Lt.add(H.sub(Lt)._mult(J/Te)._round()),this.updateDistance(Lt,qe),this.addCurrentVertex(qe,Qt,0,0,he),Lt=qe)}}}addCurrentVertex(a,s,d,m,_,x=!1){var I=s.x+s.y*d,R=s.y-s.x*d,U=-s.x+s.y*m,H=-s.y-s.x*m;this.addHalfVertex(a,I,R,x,!1,d,_),this.addHalfVertex(a,U,H,x,!0,-m,_),this.distance>f0/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(a,s,d,m,_,x))}addHalfVertex({x:a,y:H},d,m,_,x,I,R){var U=.5*(this.lineClips?this.scaledDistance*(f0-1):this.scaledDistance),H=(this.layoutVertexArray.emplaceBack((a<<1)+(_?1:0),(H<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(I===0?0:I<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&(a=this.scaledDistance-this.lineClips.start,_=this.lineClips.end-this.lineClips.start,this.layoutVertexArray2.emplaceBack(a/_,this.lineClipsArray.length)),R.vertexLength++);0<=this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,H),R.primitiveLength++),x?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(a,s){this.distance+=a.dist(s),this.updateScaledDistance()}}Pn("LineBucket",J_,{omit:["layers","patternFeatures"]});let p0,m0;var g0={get paint(){return m0=m0||new ns({"line-opacity":new ir(ge.paint_line["line-opacity"]),"line-color":new ir(ge.paint_line["line-color"]),"line-translate":new Kn(ge.paint_line["line-translate"]),"line-translate-anchor":new Kn(ge.paint_line["line-translate-anchor"]),"line-width":new ir(ge.paint_line["line-width"]),"line-gap-width":new ir(ge.paint_line["line-gap-width"]),"line-offset":new ir(ge.paint_line["line-offset"]),"line-blur":new ir(ge.paint_line["line-blur"]),"line-dasharray":new Lm(ge.paint_line["line-dasharray"]),"line-pattern":new lu(ge.paint_line["line-pattern"]),"line-gradient":new up(ge.paint_line["line-gradient"])})},get layout(){return p0=p0||new ns({"line-cap":new Kn(ge.layout_line["line-cap"]),"line-join":new ir(ge.layout_line["line-join"]),"line-miter-limit":new Kn(ge.layout_line["line-miter-limit"]),"line-round-limit":new Kn(ge.layout_line["line-round-limit"]),"line-sort-key":new ir(ge.layout_line["line-sort-key"])})}};class y0 extends ir{possiblyEvaluate(a,s){return s=new zo(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(a,s)}evaluate(a,s,d,m){return s=F({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(a,s,d,m)}}let eb;class v0 extends Ds{constructor(a){super(a,g0),this.gradientVersion=0,eb||((eb=new y0(g0.paint.properties["line-width"].specification)).useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(a){a==="line-gradient"&&(Hr(a=this.gradientExpression())?this.stepInterpolant=a._styleExpression.expression instanceof po:this.stepInterpolant=!1,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,s){super.recalculate(a,s),this.paint._values["line-floorwidth"]=eb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new J_(a)}queryRadius(d){var s=_0(xo("line-width",this,d),xo("line-gap-width",this,d)),d=xo("line-offset",this,d);return s/2+Math.abs(d)+qr(this.paint.get("line-translate"))}queryIntersectsFeature(a,s,d,m,_,x,I){return a=Xr(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,I),x=I/2*_0(this.paint.get("line-width").evaluate(s,d),this.paint.get("line-gap-width").evaluate(s,d)),s=this.paint.get("line-offset").evaluate(s,d),hr(a,m=s?ei(m,s*I):m,x)}isTileClipped(){return!0}}function _0(h,a){return 0<a?a+2*h:h}const LE=Ni([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),b0=Ni([{name:"a_projected_pos",components:3,type:"Float32"}],4),w0=(Ni([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ni([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),x0=(Ni([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ni([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4));ms=Ni([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function C0(h,a,s){return h.sections.forEach(d=>{var m,_;d.text=(d=d.text,_=s,(m=(m=a).layout.get("text-transform").evaluate(_,{}))==="uppercase"?d=d.toLocaleUpperCase():m==="lowercase"&&(d=d.toLocaleLowerCase()),d=Fu.applyArabicShaping?Fu.applyArabicShaping(d):d)}),h}function tb(h){const a={},s={},d=[];let m=0;function _(Ne){d.push(h[Ne]),m++}function x(Ne,Ve,je){var Oe=s[Ne];return delete s[Ne],s[Ve]=Oe,d[Oe].geometry[0].pop(),d[Oe].geometry[0]=d[Oe].geometry[0].concat(je[0]),Oe}function I(Ne,Ve,je){var Oe=a[Ve];return delete a[Ve],a[Ne]=Oe,d[Oe].geometry[0].shift(),d[Oe].geometry[0]=je[0].concat(d[Oe].geometry[0]),Oe}function R(Ne,Ve,je){return je=je?Ve[0][Ve[0].length-1]:Ve[0][0],`${Ne}:${je.x}:`+je.y}for(let Ne=0;Ne<h.length;Ne++){var U,H,J,he,Te=h[Ne],_e=Te.geometry,Te=Te.text?Te.text.toString():null;Te?(U=R(Te,_e),H=R(Te,_e,!0),U in s&&H in a&&s[U]!==a[H]?(J=I(U,H,_e),he=x(U,H,d[J].geometry),delete a[U],delete s[H],s[R(Te,d[he].geometry,!0)]=he,d[J].geometry=null):U in s?x(U,H,_e):H in a?I(U,H,_e):(_(Ne),a[U]=m-1,s[H]=m-1)):_(Ne)}return d.filter(Ne=>Ne.geometry)}Ni([{name:"triangle",components:3,type:"Uint16"}]),Ni([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ni([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ni([{type:"Float32",name:"offsetX"}]),Ni([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ni([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const By={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function NE(h){let a="";for(let m=0;m<h.length;m++){var s=h.charCodeAt(m+1)||null,d=h.charCodeAt(m-1)||null;(!s||!eh(s)||By[h[m+1]])&&(!d||!eh(d)||By[h[m-1]])&&By[h[m]]?a+=By[h[m]]:a+=h[m]}return a}var ta=24,ha={read:function(h,a,s,d,_e){var _,x,I=8*_e-d-1,R=(1<<I)-1,U=R>>1,H=-7,J=s?_e-1:0,he=s?-1:1,_e=h[a+J];for(J+=he,_=_e&(1<<-H)-1,_e>>=-H,H+=I;0<H;_=256*_+h[a+J],J+=he,H-=8);for(x=_&(1<<-H)-1,_>>=-H,H+=d;0<H;x=256*x+h[a+J],J+=he,H-=8);if(_===0)_=1-U;else{if(_===R)return x?NaN:1/0*(_e?-1:1);x+=Math.pow(2,d),_-=U}return(_e?-1:1)*x*Math.pow(2,_-d)},write:function(h,a,s,d,m,Te){var x,I,R=8*Te-m-1,U=(1<<R)-1,H=U>>1,J=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=d?0:Te-1,_e=d?1:-1,Te=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(I=isNaN(a)?1:0,x=U):(x=Math.floor(Math.log(a)/Math.LN2),a*(d=Math.pow(2,-x))<1&&(x--,d*=2),2<=(a+=1<=x+H?J/d:J*Math.pow(2,1-H))*d&&(x++,d/=2),U<=x+H?(I=0,x=U):1<=x+H?(I=(a*d-1)*Math.pow(2,m),x+=H):(I=a*Math.pow(2,H-1)*Math.pow(2,m),x=0));8<=m;h[s+he]=255&I,he+=_e,I/=256,m-=8);for(x=x<<m|I,R+=m;0<R;h[s+he]=255&x,he+=_e,x/=256,R-=8);h[s+he-_e]|=128*Te}},vs=Yo,$u=ha;function Yo(h){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(h)?h:new Uint8Array(h||0),this.pos=0,this.type=0,this.length=this.buf.length}Yo.Varint=0,Yo.Fixed64=1,Yo.Bytes=2,Yo.Fixed32=5;var nb=4294967296,rb=1/nb,S0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function id(h){return h.type===Yo.Bytes?h.readVarint()+h.pos:h.pos+1}function ad(h,a,s){return s?4294967296*a+(h>>>0):4294967296*(a>>>0)+(h>>>0)}function _s(h,a,s){var d=a<=16383?1:a<=2097151?2:a<=268435455?3:Math.floor(Math.log(a)/(7*Math.LN2));s.realloc(d);for(var m=s.pos-1;h<=m;m--)s.buf[m+d]=s.buf[m]}function fM(h,a){for(var s=0;s<h.length;s++)a.writeVarint(h[s])}function pM(h,a){for(var s=0;s<h.length;s++)a.writeSVarint(h[s])}function ob(h,a){for(var s=0;s<h.length;s++)a.writeFloat(h[s])}function js(h,a){for(var s=0;s<h.length;s++)a.writeDouble(h[s])}function mM(h,a){for(var s=0;s<h.length;s++)a.writeBoolean(h[s])}function Jn(h,a){for(var s=0;s<h.length;s++)a.writeFixed32(h[s])}function Zm(h,a){for(var s=0;s<h.length;s++)a.writeSFixed32(h[s])}function E0(h,a){for(var s=0;s<h.length;s++)a.writeFixed64(h[s])}function FE(h,a){for(var s=0;s<h.length;s++)a.writeSFixed64(h[s])}function ib(h,a){return(h[a]|h[a+1]<<8|h[a+2]<<16)+16777216*h[a+3]}function sd(h,a,s){h[s]=a,h[s+1]=a>>>8,h[s+2]=a>>>16,h[s+3]=a>>>24}function Uy(h,a){return(h[a]|h[a+1]<<8|h[a+2]<<16)+(h[a+3]<<24)}Yo.prototype={destroy:function(){this.buf=null},readFields:function(h,a,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),m=d>>3,_=this.pos;this.type=7&d,h(m,a,this),this.pos===_&&this.skip(d)}return a},readMessage:function(h,a){return this.readFields(h,a,this.readVarint()+this.pos)},readFixed32:function(){var h=ib(this.buf,this.pos);return this.pos+=4,h},readSFixed32:function(){var h=Uy(this.buf,this.pos);return this.pos+=4,h},readFixed64:function(){var h=ib(this.buf,this.pos)+ib(this.buf,this.pos+4)*nb;return this.pos+=8,h},readSFixed64:function(){var h=ib(this.buf,this.pos)+Uy(this.buf,this.pos+4)*nb;return this.pos+=8,h},readFloat:function(){var h=$u.read(this.buf,this.pos,!0,23,4);return this.pos+=4,h},readDouble:function(){var h=$u.read(this.buf,this.pos,!0,52,8);return this.pos+=8,h},readVarint:function(x){var m=this.buf,d=m[this.pos++],_=127&d;if(d<128||(_|=(127&(d=m[this.pos++]))<<7,d<128)||(_|=(127&(d=m[this.pos++]))<<14,d<128)||(_|=(127&(d=m[this.pos++]))<<21,d<128))return _;var a,s,d=_|=(15&m[this.pos])<<28,m=x,_=this,x=_.buf;if(s=x[_.pos++],a=(112&s)>>4,s<128||(s=x[_.pos++],a|=(127&s)<<3,s<128)||(s=x[_.pos++],a|=(127&s)<<10,s<128)||(s=x[_.pos++],a|=(127&s)<<17,s<128)||(s=x[_.pos++],a|=(127&s)<<24,s<128)||(s=x[_.pos++],a|=(1&s)<<31,s<128))return ad(d,a,m);throw new Error("Expected varint not more than 10 bytes")},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var h=this.readVarint();return h%2==1?(h+1)/-2:h/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var h=this.readVarint()+this.pos,a=this.pos;if(12<=(this.pos=h)-a&&S0)return s=this.buf,S0.decode(s.subarray(a,h));for(var s,d,m,_,x=this.buf,I=h,R="",U=a;U<I;){var H=x[U],J=null,he=239<H?4:223<H?3:191<H?2:1;if(I<U+he)break;he===1?H<128&&(J=H):he===2?(192&(d=x[U+1]))==128&&(J=(31&H)<<6|63&d)<=127&&(J=null):he===3?(d=x[U+1],m=x[U+2],(192&d)==128&&(192&m)==128&&((J=(15&H)<<12|(63&d)<<6|63&m)<=2047||55296<=J&&J<=57343)&&(J=null)):he===4&&(d=x[U+1],m=x[U+2],_=x[U+3],(192&d)==128)&&(192&m)==128&&(192&_)==128&&((J=(15&H)<<18|(63&d)<<12|(63&m)<<6|63&_)<=65535||1114112<=J)&&(J=null),J===null?(J=65533,he=1):65535<J&&(J-=65536,R+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),R+=String.fromCharCode(J),U+=he}return R},readBytes:function(){var h=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,h);return this.pos=h,a},readPackedVarint:function(h,a){if(this.type!==Yo.Bytes)return h.push(this.readVarint(a));var s=id(this);for(h=h||[];this.pos<s;)h.push(this.readVarint(a));return h},readPackedSVarint:function(h){if(this.type!==Yo.Bytes)return h.push(this.readSVarint());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readSVarint());return h},readPackedBoolean:function(h){if(this.type!==Yo.Bytes)return h.push(this.readBoolean());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readBoolean());return h},readPackedFloat:function(h){if(this.type!==Yo.Bytes)return h.push(this.readFloat());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readFloat());return h},readPackedDouble:function(h){if(this.type!==Yo.Bytes)return h.push(this.readDouble());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readDouble());return h},readPackedFixed32:function(h){if(this.type!==Yo.Bytes)return h.push(this.readFixed32());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readFixed32());return h},readPackedSFixed32:function(h){if(this.type!==Yo.Bytes)return h.push(this.readSFixed32());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readSFixed32());return h},readPackedFixed64:function(h){if(this.type!==Yo.Bytes)return h.push(this.readFixed64());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readFixed64());return h},readPackedSFixed64:function(h){if(this.type!==Yo.Bytes)return h.push(this.readSFixed64());var a=id(this);for(h=h||[];this.pos<a;)h.push(this.readSFixed64());return h},skip:function(h){if(h&=7,h===Yo.Varint)for(;127<this.buf[this.pos++];);else if(h===Yo.Bytes)this.pos=this.readVarint()+this.pos;else if(h===Yo.Fixed32)this.pos+=4;else{if(h!==Yo.Fixed64)throw new Error("Unimplemented type: "+h);this.pos+=8}},writeTag:function(h,a){this.writeVarint(h<<3|a)},realloc:function(h){for(var a,s=this.length||16;s<this.pos+h;)s*=2;s!==this.length&&((a=new Uint8Array(s)).set(this.buf),this.buf=a,this.length=s)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(h){this.realloc(4),sd(this.buf,h,this.pos),this.pos+=4},writeSFixed32:function(h){this.realloc(4),sd(this.buf,h,this.pos),this.pos+=4},writeFixed64:function(h){this.realloc(8),sd(this.buf,-1&h,this.pos),sd(this.buf,Math.floor(h*rb),this.pos+4),this.pos+=8},writeSFixed64:function(h){this.realloc(8),sd(this.buf,-1&h,this.pos),sd(this.buf,Math.floor(h*rb),this.pos+4),this.pos+=8},writeVarint:function(h){if(268435455<(h=+h||0)||h<0){var s=h,m=this;if(0<=s?(a=s%4294967296|0,d=s/4294967296|0):(d=~(-s/4294967296),4294967295^(a=~(-s%4294967296))?a=a+1|0:d=d+1|(a=0)),18446744073709552e3<=s||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");m.realloc(10);var s=a,a=m,s=(a.buf[a.pos++]=127&s|128,s>>>=7,a.buf[a.pos++]=127&s|128,s>>>=7,a.buf[a.pos++]=127&s|128,s>>>=7,a.buf[a.pos++]=127&s|128,s>>>=7,a.buf[a.pos]=127&s,d),d=m,m=(7&s)<<4;d.buf[d.pos++]|=m|((s>>>=3)?128:0),s&&(d.buf[d.pos++]=127&s|((s>>>=7)?128:0),s)&&(d.buf[d.pos++]=127&s|((s>>>=7)?128:0),s)&&(d.buf[d.pos++]=127&s|((s>>>=7)?128:0),s)&&(d.buf[d.pos++]=127&s|((s>>>=7)?128:0),s)&&(d.buf[d.pos++]=127&s)}else this.realloc(4),this.buf[this.pos++]=127&h|(127<h?128:0),h<=127||(this.buf[this.pos++]=127&(h>>>=7)|(127<h?128:0),h<=127)||(this.buf[this.pos++]=127&(h>>>=7)|(127<h?128:0),h<=127)||(this.buf[this.pos++]=h>>>7&127)},writeSVarint:function(h){this.writeVarint(h<0?2*-h-1:2*h)},writeBoolean:function(h){this.writeVarint(!!h)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var a=this.pos,s=(this.pos=function(d,m,_){for(var x,I,R=0;R<m.length;R++){if(55295<(x=m.charCodeAt(R))&&x<57344){if(!I){56319<x||R+1===m.length?(d[_++]=239,d[_++]=191,d[_++]=189):I=x;continue}if(x<56320){d[_++]=239,d[_++]=191,d[_++]=189,I=x;continue}x=I-55296<<10|x-56320|65536,I=null}else I&&(d[_++]=239,d[_++]=191,d[_++]=189,I=null);x<128?d[_++]=x:(x<2048?d[_++]=x>>6|192:(x<65536?d[_++]=x>>12|224:(d[_++]=x>>18|240,d[_++]=x>>12&63|128),d[_++]=x>>6&63|128),d[_++]=63&x|128)}return _}(this.buf,s,this.pos),this.pos-a);128<=s&&_s(a,s,this),this.pos=a-1,this.writeVarint(s),this.pos+=s},writeFloat:function(h){this.realloc(4),$u.write(this.buf,h,this.pos,!0,23,4),this.pos+=4},writeDouble:function(h){this.realloc(8),$u.write(this.buf,h,this.pos,!0,52,8),this.pos+=8},writeBytes:function(h){var a=h.length;this.writeVarint(a),this.realloc(a);for(var s=0;s<a;s++)this.buf[this.pos++]=h[s]},writeRawMessage:function(d,a){this.pos++;var s=this.pos,d=(d(a,this),this.pos-s);128<=d&&_s(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(h,a,s){this.writeTag(h,Yo.Bytes),this.writeRawMessage(a,s)},writePackedVarint:function(h,a){a.length&&this.writeMessage(h,fM,a)},writePackedSVarint:function(h,a){a.length&&this.writeMessage(h,pM,a)},writePackedBoolean:function(h,a){a.length&&this.writeMessage(h,mM,a)},writePackedFloat:function(h,a){a.length&&this.writeMessage(h,ob,a)},writePackedDouble:function(h,a){a.length&&this.writeMessage(h,js,a)},writePackedFixed32:function(h,a){a.length&&this.writeMessage(h,Jn,a)},writePackedSFixed32:function(h,a){a.length&&this.writeMessage(h,Zm,a)},writePackedFixed64:function(h,a){a.length&&this.writeMessage(h,E0,a)},writePackedSFixed64:function(h,a){a.length&&this.writeMessage(h,FE,a)},writeBytesField:function(h,a){this.writeTag(h,Yo.Bytes),this.writeBytes(a)},writeFixed32Field:function(h,a){this.writeTag(h,Yo.Fixed32),this.writeFixed32(a)},writeSFixed32Field:function(h,a){this.writeTag(h,Yo.Fixed32),this.writeSFixed32(a)},writeFixed64Field:function(h,a){this.writeTag(h,Yo.Fixed64),this.writeFixed64(a)},writeSFixed64Field:function(h,a){this.writeTag(h,Yo.Fixed64),this.writeSFixed64(a)},writeVarintField:function(h,a){this.writeTag(h,Yo.Varint),this.writeVarint(a)},writeSVarintField:function(h,a){this.writeTag(h,Yo.Varint),this.writeSVarint(a)},writeStringField:function(h,a){this.writeTag(h,Yo.Bytes),this.writeString(a)},writeFloatField:function(h,a){this.writeTag(h,Yo.Fixed32),this.writeFloat(a)},writeDoubleField:function(h,a){this.writeTag(h,Yo.Fixed64),this.writeDouble(a)},writeBooleanField:function(h,a){this.writeVarintField(h,!!a)}};var Xm,ab=l(vs);const sb=3;function zE(h,a,s){h===1&&s.readMessage(T0,a)}function T0(h,a,s){var d,m,_,x,I;h===3&&({id:h,bitmap:s,width:d,height:m,left:_,top:x,advance:I}=s.readMessage(I0,{}),a.push({id:h,bitmap:new Ei({width:d+2*sb,height:m+2*sb},s),metrics:{width:d,height:m,left:_,top:x,advance:I}}))}function I0(h,a,s){h===1?a.id=s.readVarint():h===2?a.bitmap=s.readBytes():h===3?a.width=s.readVarint():h===4?a.height=s.readVarint():h===5?a.left=s.readSVarint():h===6?a.top=s.readSVarint():h===7&&(a.advance=s.readVarint())}const bs=sb;function Hu(h){let a=0,s=0;for(const R of h)a+=R.w*R.h,s=Math.max(s,R.w);h.sort((R,U)=>U.h-R.h);var d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),s),h:1/0}];let m=0,_=0;for(const R of h)for(let U=d.length-1;0<=U;U--){var x,I=d[U];if(!(R.w>I.w||R.h>I.h)){R.x=I.x,R.y=I.y,_=Math.max(_,R.y+R.h),m=Math.max(m,R.x+R.w),R.w===I.w&&R.h===I.h?(x=d.pop(),U<d.length&&(d[U]=x)):R.h===I.h?(I.x+=R.w,I.w-=R.w):(R.w!==I.w&&d.push({x:I.x+R.w,y:I.y,w:I.w-R.w,h:R.h}),I.y+=R.h,I.h-=R.h);break}}return{w:m,h:_,fill:a/(m*_)||0}}(go=Xm=Xm||{}).none="none",go.height="height",go.width="width";const fa=1;class lb{constructor(a,{pixelRatio:s,version:d,stretchX:m,stretchY:_,content:x,contentMatch:I}){this.paddedRect=a,this.pixelRatio=s,this.stretchX=m,this.stretchY=_,this.content=x,this.version=d,this.contentMatch=I}get tl(){return[this.paddedRect.x+fa,this.paddedRect.y+fa]}get br(){return[this.paddedRect.x+this.paddedRect.w-fa,this.paddedRect.y+this.paddedRect.h-fa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*fa)/this.pixelRatio,(this.paddedRect.h-2*fa)/this.pixelRatio]}}class k0{constructor(a,s){var d={},m={},_=(this.haveRenderCallbacks=[],[]);this.addImages(a,d,_),this.addImages(s,m,_);const{w:x,h:I}=Hu(_);var R=new Ko({width:x||1,height:I||1});for(const _e in a){var U=a[_e],H=d[_e].paddedRect;Ko.copy(U.data,R,{x:0,y:0},{x:H.x+fa,y:H.y+fa},U.data)}for(const _e in s){var J=s[_e],he=m[_e].paddedRect;const Te=he.x+fa,Ne=he.y+fa,Ve=J.data.width,je=J.data.height;Ko.copy(J.data,R,{x:0,y:0},{x:Te,y:Ne},J.data),Ko.copy(J.data,R,{x:0,y:je-1},{x:Te,y:Ne-1},{width:Ve,height:1}),Ko.copy(J.data,R,{x:0,y:0},{x:Te,y:Ne+je},{width:Ve,height:1}),Ko.copy(J.data,R,{x:Ve-1,y:0},{x:Te-1,y:Ne},{width:1,height:je}),Ko.copy(J.data,R,{x:0,y:0},{x:Te+Ve,y:Ne},{width:1,height:je})}this.image=R,this.iconPositions=d,this.patternPositions=m}addImages(a,s,d){for(const x in a){var m=a[x],_={x:0,y:0,w:m.data.width+2*fa,h:m.data.height+2*fa};d.push(_),s[x]=new lb(_,m),m.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(a,s){a.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in a.updatedImages)this.patchUpdatedImage(this.iconPositions[d],a.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],a.getImage(d),s)}patchUpdatedImage(a,s,d){var m;a&&s&&a.version!==s.version&&(a.version=s.version,[a,m]=a.tl,d.update(s.data,void 0,{x:a,y:m}))}}Pn("ImagePosition",lb),Pn("ImageAtlas",k0),o.WritingMode=void 0,(ha=o.WritingMode||(o.WritingMode={}))[ha.none=0]="none",ha[ha.horizontal=1]="horizontal",ha[ha.vertical=2]="vertical",ha[ha.horizontalOnly=3]="horizontalOnly";const ll=-17;class Qm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,s){var d=new Qm;return d.scale=a||1,d.fontStack=s,d}static forImage(a){var s=new Qm;return s.imageName=a,s}}class ul{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,s){var d=new ul;for(let _=0;_<a.sections.length;_++){var m=a.sections[_];m.image?d.addImageSection(m):d.addTextSection(m,s)}return d}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSectionIndex(a){return this.sectionIndex[a]}getCharCode(a){return this.text.charCodeAt(a)}verticalizePunctuation(){this.text=NE(this.text)}trim(){let a=0;for(let d=0;d<this.text.length&&jy[this.text.charCodeAt(d)];d++)a++;let s=this.text.length;for(let d=this.text.length-1;0<=d&&d>=a&&jy[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(a,s),this.sectionIndex=this.sectionIndex.slice(a,s)}substring(a,s){var d=new ul;return d.text=this.text.substring(a,s),d.sectionIndex=this.sectionIndex.slice(a,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,s)=>Math.max(a,this.sections[s].scale),0)}addTextSection(a,s){this.text+=a.text,this.sections.push(Qm.forText(a.scale,a.fontStack||s));var d=this.sections.length-1;for(let m=0;m<a.text.length;++m)this.sectionIndex.push(d)}addImageSection(d){var s,d=d.image?d.image.name:"";d.length===0?K("Can't add FormattedSection with an empty image."):(s=this.getNextImageSectionCharCode())?(this.text+=String.fromCharCode(s),this.sections.push(Qm.forImage(d)),this.sectionIndex.push(this.sections.length-1)):K("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ub(Oe,a,s,d,Re,_,x,I,R,U,H,J,he,_e,Te,Ne){var Ve=ul.fromFeature(Oe,Re);J===o.WritingMode.vertical&&Ve.verticalizePunctuation();let je;var{processBidirectionalText:Oe,processStyledBidirectionalText:Re}=Fu;if(Oe&&Ve.sections.length===1){je=[];for(const Va of Oe(Ve.toString(),Jm(Ve,U,_,a,d,_e,Te))){var qe=new ul;qe.text=Va,qe.sections=Ve.sections;for(let Hs=0;Hs<Va.length;Hs++)qe.sectionIndex.push(0);je.push(qe)}}else if(Re){je=[];for(const Va of Re(Ve.text,Ve.sectionIndex,Jm(Ve,U,_,a,d,_e,Te))){var at=new ul;at.text=Va[0],at.sectionIndex=Va[1],at.sections=Ve.sections,je.push(at)}}else je=function(Va,Hs){var fd=[],Mp=Va.text;let Ao=0;for(const Eo of Hs)fd.push(Va.substring(Ao,Eo)),Ao=Eo;return Ao<Mp.length&&fd.push(Va.substring(Ao,Mp.length)),fd}(Ve,Jm(Ve,U,_,a,d,_e,Te));Oe=[],Re={positionedLines:Oe,text:Ve.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:J,iconsInText:!1,verticalizable:!1};{var _t=Re,Lt=a,Kt=s,Vt=d,Qt=(_=je,x),on=(_e=I,Te=R,J),hn=U,dn=he,Xt=Ne;let Va=0,Hs=ll,fd=0,Mp=0;var Un=Te==="right"?1:Te==="left"?0:.5;let Ao=0;for(const Oa of _){Oa.trim();var Rn=Oa.getMaxScale(),jn=(Rn-1)*ta,pr={positionedGlyphs:[],lineOffset:0},Ur=(_t.positionedLines[Ao]=pr).positionedGlyphs;let yu=0;if(Oa.length()){for(let hi=0;hi<Oa.length();hi++){var br=Oa.getSection(hi),So=Oa.getSectionIndex(hi),or=Oa.getCharCode(hi);let Da=0,Vs=null,hl=null,qu=null,qs=ta;var Ir=!(on===o.WritingMode.horizontal||!dn&&!ed(or)||dn&&(jy[or]||function(fl){return In.Arabic(fl)||In["Arabic Supplement"](fl)||In["Arabic Extended-A"](fl)||In["Arabic Presentation Forms-A"](fl)||In["Arabic Presentation Forms-B"](fl)}(or)));if(br.imageName){var oo=Vt[br.imageName];if(!oo)continue;qu=br.imageName,_t.iconsInText=_t.iconsInText||!0,hl=oo.paddedRect;var oo=oo.displaySize,Zo=(br.scale=br.scale*ta/Xt,Vs={width:oo[0],height:oo[1],left:fa,top:-3,advance:Ir?oo[1]:oo[0]},ta-oo[1]*br.scale),Zo=(Da=jn+Zo,qs=Vs.advance,Ir?oo[0]*br.scale-ta*Rn:oo[1]*br.scale-ta*Rn);0<Zo&&Zo>yu&&(yu=Zo)}else{if(oo=Kt[br.fontStack],Zo=oo&&oo[or],Zo&&Zo.rect)hl=Zo.rect,Vs=Zo.metrics;else{var Mc=Lt[br.fontStack],Mc=Mc&&Mc[or];if(!Mc)continue;Vs=Mc.metrics}Da=(Rn-br.scale)*ta}Ir?(_t.verticalizable=!0,Ur.push({glyph:or,imageName:qu,x:Va,y:Hs+Da,vertical:Ir,scale:br.scale,fontStack:br.fontStack,sectionIndex:So,metrics:Vs,rect:hl}),Va+=qs*br.scale+hn):(Ur.push({glyph:or,imageName:qu,x:Va,y:Hs+Da,vertical:Ir,scale:br.scale,fontStack:br.fontStack,sectionIndex:So,metrics:Vs,rect:hl}),Va+=Vs.advance*br.scale+hn)}Ur.length!==0&&(Hl=Va-hn,fd=Math.max(Hl,fd),function(hi,Da,Vs,hl,qu){if(hl||qu){var qs=hi[Vs],qs=qs.metrics.advance*qs.scale,fl=(hi[Vs].x+qs)*hl;for(let pd=Da;pd<=Vs;pd++)hi[pd].x-=fl,hi[pd].y+=qu}}(Ur,0,Ur.length-1,Un,yu)),Va=0;var Hl=Qt*Rn+yu;pr.lineOffset=Math.max(yu,jn),Hs+=Hl,Mp=Math.max(Hl,Mp)}else Hs+=Qt;++Ao}var Te=Hs-ll,{horizontalAlign:_e,verticalAlign:H}=$y(_e);{var io=_t.positionedLines,eo=Un,fh=_e,ig=H,dd=fd,tf=Mp,dl=Qt,hd=Te,vM=_.length,W0=(eo-fh)*dd;let Oa=0;Oa=tf!==dl?-hd*ig-ll:(-ig*vM+.5)*dl;for(const yu of io)for(const hi of yu.positionedGlyphs)hi.x+=W0,hi.y+=Oa}_t.top+=-H*Te,_t.bottom=_t.top+Te,_t.left+=-_e*fd,_t.right=_t.left+fd}return!function(Va){for(const Hs of Va)if(Hs.positionedGlyphs.length!==0)return;return 1}(Oe)&&Re}const jy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},BE={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function P0(h,a,s,d,m,_){return a.imageName?(d=d[a.imageName])?d.displaySize[0]*a.scale*ta/_+m:0:(_=(d=s[a.fontStack])&&d[h])?_.metrics.advance*a.scale+m:0}function A0(h,a,s,d){var m=Math.pow(h-a,2);return d?h<a?m/2:2*m:m+Math.abs(s)*s}function UE(h,a,s,d,m,_){let x=null,I=A0(a,s,m,_);for(const U of d){var R=A0(a-U.x,s,m,_)+U.badness;R<=I&&(x=U,I=R)}return{index:h,x:a,priorBreak:x,badness:I}}function Jm(h,a,s,d,m,_,x){if(_!=="point")return[];if(!h)return[];var I=[],R=function(Te,Ne,Ve,je,Oe,Re){let qe=0;for(let _t=0;_t<Te.length();_t++){var at=Te.getSection(_t);qe+=P0(Te.getCharCode(_t),at,je,Oe,Ne,Re)}return Ve=Math.max(1,Math.ceil(qe/Ve)),qe/Ve}(h,a,s,d,m,x),U=0<=h.text.indexOf("​");let H=0;for(let Te=0;Te<h.length();Te++){var J,he=h.getSection(Te),_e=h.getCharCode(Te);jy[_e]||(H+=P0(_e,he,d,m,a,x)),Te<h.length()-1&&(J=!((J=_e)<11904||!In["Bopomofo Extended"](J)&&!(In.Bopomofo(J)||In["CJK Compatibility Forms"](J)||In["CJK Compatibility Ideographs"](J)||In["CJK Compatibility"](J)||In["CJK Radicals Supplement"](J)||In["CJK Strokes"](J)||In["CJK Symbols and Punctuation"](J)||In["CJK Unified Ideographs Extension A"](J)||In["CJK Unified Ideographs"](J)||In["Enclosed CJK Letters and Months"](J)||In["Halfwidth and Fullwidth Forms"](J)||In.Hiragana(J)||In["Ideographic Description Characters"](J)||In["Kangxi Radicals"](J)||In["Katakana Phonetic Extensions"](J)||In.Katakana(J)||In["Vertical Forms"](J)||In["Yi Radicals"](J)||In["Yi Syllables"](J))),BE[_e]||J||he.imageName)&&I.push(UE(Te+1,H,R,I,function(Ne,Ve,je){let Oe=0;return Ne===10&&(Oe-=1e4),je&&(Oe+=150),Ne!==40&&Ne!==65288||(Oe+=50),Ve!==41&&Ve!==65289||(Oe+=50),Oe}(_e,h.getCharCode(Te+1),J&&U),!1))}return function Te(Ne){return Ne?Te(Ne.priorBreak).concat(Ne.index):[]}(UE(h.length(),H,R,I,0,!0))}function $y(h){let a=.5,s=.5;switch(h){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:a,verticalAlign:s}}function pu(h){let a=h.left,s=h.top,d=h.right-a,m=h.bottom-s;var _=h.image.content[2]-h.image.content[0],x=h.image.content[3]-h.image.content[1];return x!=0&&d!==0&&m!==0&&(_=_/x,h.image.contentMatch===Xm.height?d/m<_&&(x=m*_,a*=x/d,d=x):h.image.contentMatch===Xm.width&&_!=0&&d/m>_&&(x=d/_,s*=x/x,m=x)),{x1:a,y1:s,x2:a+d,y2:s+m}}function Po(h,a,s,d,m,_){h=h.image;let x;h.content&&(I=h.content,R=h.pixelRatio||1,x=[I[0]/R,I[1]/R,h.displaySize[0]-I[2]/R,h.displaySize[1]-I[3]/R]);var I=a.left*_,R=a.right*_;let U,H,J,he;return H=s==="width"||s==="both"?(he=m[0]+I-d[3],m[0]+R+d[1]):(he=m[0]+(I+R-h.displaySize[0])/2)+h.displaySize[0],I=a.top*_,R=a.bottom*_,J=s==="height"||s==="both"?(U=m[1]+I-d[0],m[1]+R+d[2]):(U=m[1]+(I+R-h.displaySize[1])/2)+h.displaySize[1],{image:h,top:U,right:H,bottom:J,left:he,collisionPadding:x}}const pa=255,ai=128,Gi=pa*ai;function $l(h,a){if(a=a.expression,a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new zo(h+1))};if(a.kind==="source")return{kind:"source"};{var{zoomStops:s,interpolationType:d}=a;let x=0;for(;x<s.length&&s[x]<=h;)x++;let I=x=Math.max(0,x-1);for(;I<s.length&&s[I]<h+1;)I++;I=Math.min(s.length-1,I);var m=s[x],_=s[I];return a.kind==="composite"?{kind:"composite",minZoom:m,maxZoom:_,interpolationType:d}:{kind:"camera",minZoom:m,maxZoom:_,minSize:a.evaluate(new zo(m)),maxSize:a.evaluate(new zo(_)),interpolationType:d}}}function Yh(h,a,s){let d="never";return a=h.get(a),a?d=a:h.get(s)&&(d="always"),d}const Ha=Kh.VectorTileFeature.types,Hy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ld(h,a,s,d,m,_,x,Te,R,U,H,J,he){var _e=Te?Math.min(Gi,Math.round(Te[0])):0,Te=Te?Math.min(Gi,Math.round(Te[1])):0;h.emplaceBack(a,s,Math.round(32*d),Math.round(32*m),_,x,(_e<<1)+(R?1:0),Te,16*U,16*H,256*J,256*he)}function eg(h,a,s){h.emplaceBack(a.x,a.y,s),h.emplaceBack(a.x,a.y,s),h.emplaceBack(a.x,a.y,s),h.emplaceBack(a.x,a.y,s)}function M0(h){for(const a of h.sections)if(function(s){for(const d of s)if(Mm(d.charCodeAt(0)))return 1}(a.text))return!0;return!1}class xp{constructor(a){this.layoutVertexArray=new Py,this.indexArray=new kc,this.programConfigurations=a,this.segments=new E,this.dynamicLayoutVertexArray=new qh,this.opacityVertexArray=new $m,this.hasVisibleVertices=!1,this.placedSymbolArray=new Cc}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(a,s,d,m){!this.isEmpty()&&(d&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,LE.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,b0.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,Hy,!0),this.opacityVertexBuffer.itemSize=1),d||m)&&this.programConfigurations.upload(a)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pn("SymbolBuffers",xp);class $s{constructor(a,s,d){this.layoutVertexArray=new a,this.layoutAttributes=s,this.indexArray=new d,this.segments=new E,this.collisionVertexArray=new Ic}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,w0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pn("CollisionBuffers",$s);class Zh{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(_=>_.id),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bo([]),this.placementViewportMatrix=Bo([]);var s=this.layers[0]._unevaluatedLayout._values,s=(this.textSizeData=$l(this.zoom,s["text-size"]),this.iconSizeData=$l(this.zoom,s["icon-size"]),this.layers[0].layout),m=s.get("symbol-sort-key"),d=s.get("symbol-z-order"),m=(this.canOverlap=Yh(s,"text-overlap","text-allow-overlap")!=="never"||Yh(s,"icon-overlap","icon-allow-overlap")!=="never"||s.get("text-ignore-placement")||s.get("icon-ignore-placement"),this.sortFeaturesByKey=d!=="viewport-y"&&!m.isConstant(),d==="viewport-y"||d==="auto"&&!this.sortFeaturesByKey);this.sortFeaturesByY=m&&this.canOverlap,s.get("symbol-placement")==="point"&&(this.writingModes=s.get("text-writing-mode").map(_=>o.WritingMode[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=a.sourceID}createArrays(){this.text=new xp(new $t(this.layers,this.zoom,a=>/^text/.test(a))),this.icon=new xp(new $t(this.layers,this.zoom,a=>/^icon/.test(a))),this.glyphOffsetArray=new gp,this.lineVertexArray=new jm,this.symbolInstances=new sh,this.textAnchorOffsets=new Sc}calculateGlyphDependencies(a,s,d,m,_){for(let I=0;I<a.length;I++){var x;s[a.charCodeAt(I)]=!0,(d||m)&&_&&(x=By[a.charAt(I)])&&(s[x.charCodeAt(0)]=!0)}}populate(a,s,d){var m=this.layers[0],_=m.layout,x=_.get("text-font"),I=_.get("text-field"),R=_.get("icon-image"),U=(I.value.kind!=="constant"||I.value.value instanceof uo&&!I.value.value.isEmpty()||0<I.value.value.toString().length)&&(x.value.kind!=="constant"||0<x.value.value.length),H=R.value.kind!=="constant"||!!R.value.value||0<Object.keys(R.parameters).length,J=_.get("symbol-sort-key");if(this.features=[],U||H){var he,_e,Te,Ne,Ve=s.iconDependencies,je=s.glyphDependencies,Oe=s.availableImages,Re=new zo(this.zoom);for({feature:he,id:_e,index:Te,sourceLayerIndex:Ne}of a){var qe,at=m._featureFilter.needGeometry,_t=Fn(he,at);if(m._featureFilter.filter(Re,_t,d)){at||(_t.geometry=Sn(he));let on;U&&(at=m.getValueAndResolveTokens("text-field",_t,d,Oe),at=uo.factory(at),!(qe=this.hasRTLText=this.hasRTLText||M0(at))||Fu.getRTLTextPluginStatus()==="unavailable"||qe&&Fu.isParsed())&&(on=C0(at,m,_t));let hn;if(H&&(qe=m.getValueAndResolveTokens("icon-image",_t,d,Oe),hn=qe instanceof Vi?qe:Vi.fromString(qe)),(on||hn)&&(at=this.sortFeaturesByKey?J.evaluate(_t,{},d):void 0,at={id:_e,text:on,icon:hn,index:Te,sourceLayerIndex:Ne,geometry:_t.geometry,properties:he.properties,type:Ha[he.type],sortKey:at},this.features.push(at),hn&&(Ve[hn.name]=!0),on)){var Lt,Kt,Vt=x.evaluate(_t,{},d).join(","),Qt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(o.WritingMode.vertical);for(const dn of on.sections)dn.image?Ve[dn.image.name]=!0:(Lt=bc(on.toString()),Kt=je[Kt=dn.fontStack||Vt]=je[Kt]||{},this.calculateGlyphDependencies(dn.text,Kt,Qt,this.allowVerticalPlacement,Lt))}}}_.get("symbol-placement")==="line"&&(this.features=tb(this.features)),this.sortFeaturesByKey&&this.features.sort((on,hn)=>on.sortKey-hn.sortKey)}}update(a,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(a,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,s){var d=this.lineVertexArray.length;if(a.segment!==void 0){let x=a.dist(s[a.segment+1]),I=a.dist(s[a.segment]);var m={};for(let R=a.segment+1;R<s.length;R++)m[R]={x:s[R].x,y:s[R].y,tileUnitDistanceFromAnchor:x},R<s.length-1&&(x+=s[R+1].dist(s[R]));for(let R=a.segment||0;0<=R;R--)m[R]={x:s[R].x,y:s[R].y,tileUnitDistanceFromAnchor:I},0<R&&(I+=s[R-1].dist(s[R]));for(let R=0;R<s.length;R++){var _=m[R];this.lineVertexArray.emplaceBack(_.x,_.y,_.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(a,s,d,m,_,x,I,R,U,H,J,he){var _e=a.indexArray,Te=a.layoutVertexArray,Ne=a.segments.prepareSegment(4*s.length,Te,_e,this.canOverlap?x.sortKey:void 0),Ve=this.glyphOffsetArray.length,je=Ne.vertexLength,Oe=this.allowVerticalPlacement&&I===o.WritingMode.vertical?Math.PI/2:0,Re=x.text&&x.text.sections;for(let pr=0;pr<s.length;pr++){var{tl:qe,tr:at,bl:_t,br:Lt,tex:Kt,pixelOffsetTL:Vt,pixelOffsetBR:Qt,minFontScaleX:on,minFontScaleY:hn,glyphOffset:dn,isSDF:Xt,sectionIndex:Un}=s[pr],Rn=Ne.vertexLength,jn=dn[1];ld(Te,R.x,R.y,qe.x,jn+qe.y,Kt.x,Kt.y,d,Xt,Vt.x,Vt.y,on,hn),ld(Te,R.x,R.y,at.x,jn+at.y,Kt.x+Kt.w,Kt.y,d,Xt,Qt.x,Vt.y,on,hn),ld(Te,R.x,R.y,_t.x,jn+_t.y,Kt.x,Kt.y+Kt.h,d,Xt,Vt.x,Qt.y,on,hn),ld(Te,R.x,R.y,Lt.x,jn+Lt.y,Kt.x+Kt.w,Kt.y+Kt.h,d,Xt,Qt.x,Qt.y,on,hn),eg(a.dynamicLayoutVertexArray,R,Oe),_e.emplaceBack(Rn,Rn+1,Rn+2),_e.emplaceBack(Rn+1,Rn+2,Rn+3),Ne.vertexLength+=4,Ne.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dn[0]),pr!==s.length-1&&Un===s[pr+1].sectionIndex||a.programConfigurations.populatePaintArrays(Te.length,x,x.index,{},he,Re&&Re[Un])}a.placedSymbolArray.emplaceBack(R.x,R.y,Ve,this.glyphOffsetArray.length-Ve,je,U,H,R.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],I,0,!1,0,J)}_addCollisionDebugVertex(a,s,d,m,_,x){return s.emplaceBack(0,0),a.emplaceBack(d.x,d.y,m,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(a,Te,d,m,_,x,_e){var R=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),U=R.vertexLength,H=_.layoutVertexArray,J=_.collisionVertexArray,he=_e.anchorX,_e=_e.anchorY,Te=(this._addCollisionDebugVertex(H,J,x,he,_e,new p(a,Te)),this._addCollisionDebugVertex(H,J,x,he,_e,new p(d,Te)),this._addCollisionDebugVertex(H,J,x,he,_e,new p(d,m)),this._addCollisionDebugVertex(H,J,x,he,_e,new p(a,m)),R.vertexLength+=4,_.indexArray);Te.emplaceBack(U,U+1),Te.emplaceBack(U+1,U+2),Te.emplaceBack(U+2,U+3),Te.emplaceBack(U+3,U),R.primitiveLength+=4}addDebugCollisionBoxes(a,s,d,m){for(let H=a;H<s;H++){var _=this.collisionBoxArray.get(H),x=_.x1,I=_.y1,R=_.x2,U=_.y2;this.addCollisionDebugVertices(x,I,R,U,m?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new $s(Ay,x0.members,Gh),this.iconCollisionBox=new $s(Ay,x0.members,Gh);for(let s=0;s<this.symbolInstances.length;s++){var a=this.symbolInstances.get(s);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(a,s,d,m,_,x,I,R,U){var H={};for(let Ne=s;Ne<d;Ne++){var J=a.get(Ne);H.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},H.textFeatureIndex=J.featureIndex;break}for(let Ne=m;Ne<_;Ne++){var he=a.get(Ne);H.verticalTextBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},H.verticalTextFeatureIndex=he.featureIndex;break}for(let Ne=x;Ne<I;Ne++){var _e=a.get(Ne);H.iconBox={x1:_e.x1,y1:_e.y1,x2:_e.x2,y2:_e.y2,anchorPointX:_e.anchorPointX,anchorPointY:_e.anchorPointY},H.iconFeatureIndex=_e.featureIndex;break}for(let Ne=R;Ne<U;Ne++){var Te=a.get(Ne);H.verticalIconBox={x1:Te.x1,y1:Te.y1,x2:Te.x2,y2:Te.y2,anchorPointX:Te.anchorPointX,anchorPointY:Te.anchorPointY},H.verticalIconFeatureIndex=Te.featureIndex;break}return H}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let d=0;d<this.symbolInstances.length;d++){var s=this.symbolInstances.get(d);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,s.textBoxStartIndex,s.textBoxEndIndex,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s.iconBoxStartIndex,s.iconBoxEndIndex,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex))}}hasTextData(){return 0<this.text.segments.get().length}hasIconData(){return 0<this.icon.segments.get().length}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length}hasIconCollisionBoxData(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length}addIndicesForPlacedSymbol(a,d){var d=a.placedSymbolArray.get(d),m=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<m;_+=4)a.indexArray.emplaceBack(_,_+1,_+2),a.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;var s=Math.sin(a),d=Math.cos(a);const m=[],_=[];var x=[];for(let R=0;R<this.symbolInstances.length;++R){x.push(R);var I=this.symbolInstances.get(R);m.push(0|Math.round(s*I.anchorX+d*I.anchorY)),_.push(I.featureIndex)}return x.sort((R,U)=>m[R]-m[U]||_[U]-_[R]),x}addToSortKeyRanges(a,s){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const d of this.symbolInstanceIndexes){var s=this.symbolInstances.get(d);this.featureSortOrder.push(s.featureIndex),[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach((m,_,x)=>{0<=m&&x.indexOf(m)===_&&this.addIndicesForPlacedSymbol(this.text,m)}),0<=s.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,s.verticalPlacedTextSymbolIndex),0<=s.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,s.placedIconSymbolIndex),0<=s.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,s.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}function tg(h,a){return a.replace(/{([^{}]+)}/g,(s,d)=>h&&d in h?String(h[d]):"")}Pn("SymbolBucket",Zh,{omit:["layers","collisionBoxArray","features","compareText"]}),Zh.MAX_GLYPHS=65535,Zh.addDynamicAttributes=eg;let ud,Vy;var qy={get paint(){return Vy=Vy||new ns({"icon-opacity":new ir(ge.paint_symbol["icon-opacity"]),"icon-color":new ir(ge.paint_symbol["icon-color"]),"icon-halo-color":new ir(ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new ir(ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ir(ge.paint_symbol["icon-halo-blur"]),"icon-translate":new Kn(ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kn(ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new ir(ge.paint_symbol["text-opacity"]),"text-color":new ir(ge.paint_symbol["text-color"],{runtimeType:kt,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new ir(ge.paint_symbol["text-halo-color"]),"text-halo-width":new ir(ge.paint_symbol["text-halo-width"]),"text-halo-blur":new ir(ge.paint_symbol["text-halo-blur"]),"text-translate":new Kn(ge.paint_symbol["text-translate"]),"text-translate-anchor":new Kn(ge.paint_symbol["text-translate-anchor"])})},get layout(){return ud=ud||new ns({"symbol-placement":new Kn(ge.layout_symbol["symbol-placement"]),"symbol-spacing":new Kn(ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kn(ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ir(ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kn(ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kn(ge.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kn(ge.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kn(ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kn(ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kn(ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new ir(ge.layout_symbol["icon-size"]),"icon-text-fit":new Kn(ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kn(ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new ir(ge.layout_symbol["icon-image"]),"icon-rotate":new ir(ge.layout_symbol["icon-rotate"]),"icon-padding":new ir(ge.layout_symbol["icon-padding"]),"icon-keep-upright":new Kn(ge.layout_symbol["icon-keep-upright"]),"icon-offset":new ir(ge.layout_symbol["icon-offset"]),"icon-anchor":new ir(ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kn(ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kn(ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kn(ge.layout_symbol["text-rotation-alignment"]),"text-field":new ir(ge.layout_symbol["text-field"]),"text-font":new ir(ge.layout_symbol["text-font"]),"text-size":new ir(ge.layout_symbol["text-size"]),"text-max-width":new ir(ge.layout_symbol["text-max-width"]),"text-line-height":new Kn(ge.layout_symbol["text-line-height"]),"text-letter-spacing":new ir(ge.layout_symbol["text-letter-spacing"]),"text-justify":new ir(ge.layout_symbol["text-justify"]),"text-radial-offset":new ir(ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kn(ge.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ir(ge.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ir(ge.layout_symbol["text-anchor"]),"text-max-angle":new Kn(ge.layout_symbol["text-max-angle"]),"text-writing-mode":new Kn(ge.layout_symbol["text-writing-mode"]),"text-rotate":new ir(ge.layout_symbol["text-rotate"]),"text-padding":new Kn(ge.layout_symbol["text-padding"]),"text-keep-upright":new Kn(ge.layout_symbol["text-keep-upright"]),"text-transform":new ir(ge.layout_symbol["text-transform"]),"text-offset":new ir(ge.layout_symbol["text-offset"]),"text-allow-overlap":new Kn(ge.layout_symbol["text-allow-overlap"]),"text-overlap":new Kn(ge.layout_symbol["text-overlap"]),"text-ignore-placement":new Kn(ge.layout_symbol["text-ignore-placement"]),"text-optional":new Kn(ge.layout_symbol["text-optional"])})}};class uh{constructor(a){if(a.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=a.property.overrides?a.property.overrides.runtimeType:Yt,this.defaultValue=a}evaluate(a){if(a.formattedSection){var s=this.defaultValue.property.overrides;if(s&&s.hasOverride(a.formattedSection))return s.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pn("FormatSectionOverride",uh,{omit:["defaultValue"]});class Cp extends Ds{constructor(a){super(a,qy)}recalculate(a,s){if(super.recalculate(a,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point")if(a=this.layout.get("text-writing-mode"),a){var d=[];for(const m of a)d.indexOf(m)<0&&d.push(m);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()}getValueAndResolveTokens(a,s,d,m){return d=this.layout.get(a).evaluate(s,{},d,m),m=this._unevaluatedLayout._values[a],m.isDataDriven()||Jc(m.value)||!d?d:tg(s.properties,d)}createBucket(a){return new Zh(a)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const d of qy.paint.overridableProperties)if(Cp.hasPaintOverride(this.layout,d)){var a=this.paint.get(d),s=new uh(a),s=new jh(s,a.property.specification);let m=null;m=a.value.kind==="constant"||a.value.kind==="source"?new Vo("source",s):new Yd("composite",s,a.value.zoomStops),this.paint._values[d]=new Os(a.property,m,a.parameters)}}_handleOverridablePaintPropertyUpdate(a,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&Cp.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,s){a=a.get("text-field");const d=qy.paint.properties[s];let m=!1;const _=x=>{for(const I of x)if(d.overrides&&d.overrides.hasOverride(I))return void(m=!0)};if(a.value.kind==="constant"&&a.value.value instanceof uo)_(a.value.value.sections);else if(a.value.kind==="source"){const x=I=>{var R;m||(I instanceof ba&&di(I.value)===tr?(R=I.value,_(R.sections)):I instanceof Du?_(I.sections):I.eachChild(x))};s=a.value,s._styleExpression&&x(s._styleExpression.expression)}return m}}let ch;var cb={get paint(){return ch=ch||new ns({"background-color":new Kn(ge.paint_background["background-color"]),"background-pattern":new Lm(ge.paint_background["background-pattern"]),"background-opacity":new Kn(ge.paint_background["background-opacity"])})}};class Gy extends Ds{constructor(a){super(a,cb)}}let db;var hb={get paint(){return db=db||new ns({"raster-opacity":new Kn(ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kn(ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kn(ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kn(ge.paint_raster["raster-brightness-max"]),"raster-saturation":new Kn(ge.paint_raster["raster-saturation"]),"raster-contrast":new Kn(ge.paint_raster["raster-contrast"]),"raster-resampling":new Kn(ge.paint_raster["raster-resampling"]),"raster-fade-duration":new Kn(ge.paint_raster["raster-fade-duration"])})}};class fb extends Ds{constructor(a){super(a,hb)}}class cl extends Ds{constructor(a){super(a,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=a}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Xh{constructor(a){this._methodToThrottle=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const mu=63710088e-1;class Ea{constructor(a,s){if(isNaN(a)||isNaN(s))throw new Error(`Invalid LngLat object: (${a}, ${s})`);if(this.lng=+a,this.lat=+s,90<this.lat||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ea(N(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){var s=Math.PI/180,m=this.lat*s,d=a.lat*s,m=Math.sin(m)*Math.sin(d)+Math.cos(m)*Math.cos(d)*Math.cos((a.lng-this.lng)*s);return mu*Math.acos(Math.min(m,1))}static convert(a){if(a instanceof Ea)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Ea(Number(a[0]),Number(a[1]));if(Array.isArray(a)||typeof a!="object"||a===null)throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");return new Ea(Number("lng"in a?a.lng:a.lon),Number(a.lat))}}const R0=2*Math.PI*mu;function pb(h){return R0*Math.cos(h*Math.PI/180)}function mb(h){return(180+h)/360}function jE(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function dh(h,a){return h/pb(a)}function $E(h){return 360*h-180}function Wy(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Sp(h,a){return h*pb(Wy(a))}function O0(h){return 1/Math.cos(h*Math.PI/180)}class cd{constructor(a,s,d=0){this.x=+a,this.y=+s,this.z=+d}static fromLngLat(a,s=0){return a=Ea.convert(a),new cd(mb(a.lng),jE(a.lat),dh(s,a.lat))}toLngLat(){return new Ea($E(this.x),Wy(this.y))}toAltitude(){return Sp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/R0*O0(Wy(this.y))}}function HE(m,a,s){var d=D0(256*m,256*(a=Math.pow(2,s)-a-1),s),m=D0(256*(m+1),256*(a+1),s);return d[0]+","+d[1]+","+m[0]+","+m[1]}function D0(h,a,s){return s=2*Math.PI*6378137/256/Math.pow(2,s),[h*s-2*Math.PI*6378137/2,a*s-2*Math.PI*6378137/2]}class Ky{constructor(a,s,d){if(a<0||25<a||d<0||d>=Math.pow(2,a)||s<0||s>=Math.pow(2,a))throw new Error(`x=${s}, y=${d}, z=${a} outside of bounds. 0<=x<${Math.pow(2,a)}, 0<=y<${Math.pow(2,a)} 0<=z<=25 `);this.z=a,this.x=s,this.y=d,this.key=Zy(0,a,a,s,d)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,s,d){var m=HE(this.x,this.y,this.z),_=VE(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,1<s?"@2x":"").replace(/{quadkey}/g,_).replace(/{bbox-epsg-3857}/g,m)}isChildOf(a){var s=this.z-a.z;return 0<s&&a.x===this.x>>s&&a.y===this.y>>s}getTilePoint(a){var s=Math.pow(2,this.z);return new p((a.x*s-this.x)*ln,(a.y*s-this.y)*ln)}toString(){return`${this.z}/${this.x}/`+this.y}}class Yy{constructor(a,s){this.wrap=a,this.canonical=s,this.key=Zy(a,s.z,s.z,s.x,s.y)}}class gu{constructor(a,s,d,m,_){if(a<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${a}; z = `+d);this.overscaledZ=a,this.wrap=s,this.canonical=new Ky(d,+m,+_),this.key=Zy(s,a,d,m,_)}clone(){return new gu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = `+this.overscaledZ);var s=this.canonical.z-a;return a>this.canonical.z?new gu(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gu(a,this.wrap,a,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(a,s){if(a>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${a}; overscaledZ = `+this.overscaledZ);var d=this.canonical.z-a;return a>this.canonical.z?Zy(this.wrap*+s,a,this.canonical.z,this.canonical.x,this.canonical.y):Zy(this.wrap*+s,a,a,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(a){var s;return a.wrap===this.wrap&&(s=this.canonical.z-a.canonical.z,a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>s&&a.canonical.y===this.canonical.y>>s)}children(a){var s,d;return this.overscaledZ>=a?[new gu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)]:(a=this.canonical.z+1,s=2*this.canonical.x,d=2*this.canonical.y,[new gu(a,this.wrap,a,s,d),new gu(a,this.wrap,a,1+s,d),new gu(a,this.wrap,a,s,1+d),new gu(a,this.wrap,a,1+s,1+d)])}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new gu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new gu(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Yy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/`+this.canonical.y}getTilePoint(a){return this.canonical.getTilePoint(new cd(a.x-this.wrap,a.y))}}function Zy(h,a,s,d,m){var _=1<<s;return(_*_*(h=(h*=2)<0?-1*h-1:h)+_*m+d).toString(36)+s.toString(36)+a.toString(36)}function VE(h,a,s){let d="",m;for(let _=h;0<_;_--)m=1<<_-1,d+=(a&m?1:0)+(s&m?2:0);return d}Pn("CanonicalTileID",Ky),Pn("OverscaledTileID",gu,{omit:["posMatrix"]});class L0{constructor(a,s,d,m=1,_=1,x=1,I=0){if(this.uid=a,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))K(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);else{this.stride=s.height;var R=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=_,this.blueFactor=x,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let H=0;H<R;H++)this.data[this._idx(-1,H)]=this.data[this._idx(0,H)],this.data[this._idx(R,H)]=this.data[this._idx(R-1,H)],this.data[this._idx(H,-1)]=this.data[this._idx(H,0)],this.data[this._idx(H,R)]=this.data[this._idx(H,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let H=0;H<R;H++)for(let J=0;J<R;J++){var U=this.get(H,J);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}}get(m,s){var d=new Uint8Array(this.data.buffer),m=4*this._idx(m,s);return this.unpack(d[m],d[1+m],d[2+m])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(a,s){if(a<-1||a>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(a+1)}unpack(a,s,d){return a*this.redFactor+s*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new Ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(a,s,d){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,_=s*this.dim+this.dim,x=d*this.dim,I=d*this.dim+this.dim;switch(s){case-1:m=_-1;break;case 1:_=m+1}switch(d){case-1:x=I-1;break;case 1:I=x+1}var R=-s*this.dim,U=-d*this.dim;for(let H=x;H<I;H++)for(let J=m;J<_;J++)this.data[this._idx(J,H)]=a.data[this._idx(J+R,H+U)]}}Pn("DEMData",L0);class Qh{constructor(a){this._stringToNumber={},this._numberToString=[];for(let d=0;d<a.length;d++){var s=a[d];this._stringToNumber[s]=d,this._numberToString[d]=s}}encode(a){return this._stringToNumber[a]}decode(a){if(a>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${a} can't be >= this._numberToString.length `+this._numberToString.length);return this._numberToString[a]}}class qE{constructor(a,s,d,m,_){this.type="Feature",(this._vectorTileFeature=a)._z=s,a._x=d,a._y=m,this.properties=a.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){var a={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(a[s]=this[s]);return a}}class Ep{constructor(a,s){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Hh(ln,16,0),this.grid3D=new Hh(ln,16,0),this.featureIndexArray=new Go,this.promoteId=s}insert(a,s,d,m,_,x){var I=this.featureIndexArray.length,R=(this.featureIndexArray.emplaceBack(d,m,_),x?this.grid3D:this.grid);for(let he=0;he<s.length;he++){var U=s[he],H=[1/0,1/0,-1/0,-1/0];for(let _e=0;_e<U.length;_e++){var J=U[_e];H[0]=Math.min(H[0],J.x),H[1]=Math.min(H[1],J.y),H[2]=Math.max(H[2],J.x),H[3]=Math.max(H[3],J.y)}H[0]<ln&&H[1]<ln&&0<=H[2]&&0<=H[3]&&R.insert(I,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Kh.VectorTile(new ab(this.rawTileData)).layers,this.sourceLayerCoder=new Qh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(a,s,d,m){this.loadVTLayers();const _=a.params||{},x=ln/a.tileSize/a.scale,I=Qe(_.filter),R=a.queryGeometry,U=a.queryPadding*x;var J=na(R),H=this.grid.query(J.minX-U,J.minY-U,J.maxX+U,J.maxY+U),J=na(a.cameraQueryGeometry);for(const Ne of this.grid3D.query(J.minX-U,J.minY-U,J.maxX+U,J.maxY+U,(Ve,je,Oe,Re)=>_r(a.cameraQueryGeometry,Ve-U,je-U,Oe+U,Re+U)))H.push(Ne);H.sort(gM);var he={};let _e;for(let Ne=0;Ne<H.length;Ne++){var Te=H[Ne];if(Te!==_e){_e=Te,Te=this.featureIndexArray.get(Te);let Ve=null;this.loadMatchingFeature(he,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,I,_.layers,_.availableImages,s,d,m,(je,Oe,Re)=>(Ve=Ve||Sn(je),Oe.queryIntersectsFeature(R,je,Re,Ve,this.z,a.transform,x,a.pixelPosMatrix)))}}return he}loadMatchingFeature(a,s,d,m,_,x,I,R,U,H,J){var he=this.bucketLayerIDs[s];if(!x||z(x,he)){var s=this.sourceLayerCoder.decode(d),_e=this.vtLayers[s].feature(m);if(_.needGeometry){if(d=Fn(_e,!0),!_.filter(new zo(this.tileID.overscaledZ),d,this.tileID.canonical))return}else if(!_.filter(new zo(this.tileID.overscaledZ),_e))return;var Te=this.getId(_e,s);for(let qe=0;qe<he.length;qe++){var Ne=he[qe];if(!(x&&x.indexOf(Ne)<0)){var Ve=R[Ne];if(Ve){let at={};Te&&H&&(at=H.getState(Ve.sourceLayer||"_geojsonTileLayer",Te));var je=F({},U[Ne]),Ve=(je.paint=N0(je.paint,Ve.paint,_e,at,I),je.layout=N0(je.layout,Ve.layout,_e,at,I),!J||J(_e,Ve,at));if(Ve){var Oe=new qE(_e,this.z,this.x,this.y,Te);Oe.layer=je;let Lt=a[Ne];(Lt=Lt===void 0?a[Ne]=[]:Lt).push({featureIndex:m,feature:Oe,intersectionZ:Ve})}}}}}}lookupSymbolFeatures(a,s,d,m,_,x,I,R){var U={},H=(this.loadVTLayers(),Qe(_));for(const J of a)this.loadMatchingFeature(U,d,m,J,H,x,I,R,s);return U}hasLayer(a){for(const s of this.bucketLayerIDs)for(const d of s)if(a===d)return!0;return!1}getId(a,s){let d=a.id;return d=this.promoteId&&(s=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s],typeof(d=a.properties[s])=="boolean")?Number(d):d}}function N0(h,a,s,d,m){return V(h,(_,x)=>(x=a instanceof th?a.get(x):null,x&&x.evaluate?x.evaluate(s,d,m):x))}function na(h){let a=1/0,s=1/0,d=-1/0,m=-1/0;for(const _ of h)a=Math.min(a,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),m=Math.max(m,_.y);return{minX:a,minY:s,maxX:d,maxY:m}}function gM(h,a){return a-h}function F0(h,a,s,d,m){var _=[];for(let I=0;I<h.length;I++){var x=h[I];let R;for(let U=0;U<x.length-1;U++){let H=x[U],J=x[U+1];H.x<a&&J.x<a||(H.x<a?H=new p(a,H.y+(J.y-H.y)*((a-H.x)/(J.x-H.x)))._round():J.x<a&&(J=new p(a,H.y+(J.y-H.y)*((a-H.x)/(J.x-H.x)))._round()),H.y<s&&J.y<s)||(H.y<s?H=new p(H.x+(J.x-H.x)*((s-H.y)/(J.y-H.y)),s)._round():J.y<s&&(J=new p(H.x+(J.x-H.x)*((s-H.y)/(J.y-H.y)),s)._round()),H.x>=d&&J.x>=d)||(H.x>=d?H=new p(d,H.y+(J.y-H.y)*((d-H.x)/(J.x-H.x)))._round():J.x>=d&&(J=new p(d,H.y+(J.y-H.y)*((d-H.x)/(J.x-H.x)))._round()),H.y>=m&&J.y>=m)||(H.y>=m?H=new p(H.x+(J.x-H.x)*((m-H.y)/(J.y-H.y)),m)._round():J.y>=m&&(J=new p(H.x+(J.x-H.x)*((m-H.y)/(J.y-H.y)),m)._round()),R&&H.equals(R[R.length-1])||(R=[H],_.push(R)),R.push(J))}}return _}Pn("FeatureIndex",Ep,{omit:["rawTileData","sourceLayerCoder"]});class Jh extends p{constructor(a,s,d,m){super(a,s),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new Jh(this.x,this.y,this.angle,this.segment)}}function GE(h,a,s,d,m){if(a.segment!==void 0&&s!==0){let U=a,H=a.segment+1,J=0;for(;J>-s/2;){if(--H<0)return;J-=h[H].dist(U),U=h[H]}J+=h[H].dist(h[H+1]),H++;var _=[];let he=0;for(;J<s/2;){var x=h[H-1],I=h[H],R=h[H+1];if(!R)return;for(x=x.angleTo(I)-I.angleTo(R),x=Math.abs((x+3*Math.PI)%(2*Math.PI)-Math.PI),_.push({distance:J,angleDelta:x}),he+=x;J-_[0].distance>d;)he-=_.shift().angleDelta;if(he>m)return;H++,J+=I.dist(R)}}return 1}function z0(h){let a=0;for(let s=0;s<h.length-1;s++)a+=h[s].dist(h[s+1]);return a}function B0(h,a,s){return h?.6*a*s:0}function WE(h,a){return Math.max(h?h.right-h.left:0,a?a.right-a.left:0)}function Vu(h,a,s,H,J,_e,x,I,R){var U=B0(H,_e,x),H=WE(H,J),J=H*x,he=h[0].x===0||h[0].x===R||h[0].y===0||h[0].y===R,_e=(a-J<a/4&&(a=J+a/4),2*_e);return function Te(Ne,Ve,je,Oe,Re,qe,at,_t,Lt){const Kt=qe/2,Vt=z0(Ne);let Qt=0,on=Ve-je,hn=[];for(let dn=0;dn<Ne.length-1;dn++){const Xt=Ne[dn],Un=Ne[dn+1],Rn=Xt.dist(Un),jn=Un.angleTo(Xt);for(;on+je<Qt+Rn;){const pr=((on+=je)-Qt)/Rn,Ur=ea.number(Xt.x,Un.x,pr),br=ea.number(Xt.y,Un.y,pr);if(0<=Ur&&Ur<Lt&&0<=br&&br<Lt&&0<=on-Kt&&on+Kt<=Vt){const So=new Jh(Ur,br,jn,dn);So._round(),Oe&&!GE(Ne,So,qe,Oe,Re)||hn.push(So)}}Qt+=Rn}return _t||hn.length||at||(hn=Te(Ne,Qt/2,je,Oe,Re,qe,at,!0,Lt)),hn}(h,he?a/2*I%a:(H/2+_e)*x*I%a,a,U,s,J,he,!1,R)}Pn("Anchor",Jh);const Tp=fa;function KE(h,a,s,d){var m=[];const _=h.image,x=_.pixelRatio;var I=_.paddedRect.w-2*Tp,R=_.paddedRect.h-2*Tp;let U={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};var H=_.stretchX||[[0,I]],J=_.stretchY||[[0,R]],je=(or,Ir)=>or+Ir[1]-Ir[0];const he=H.reduce(je,0),_e=J.reduce(je,0);var Te,Ne,Ve,je=I-he,Oe=R-_e;let Re=0,qe=he,at=0,_t=_e,Lt=0,Kt=je,Vt=0,Qt=Oe;_.content&&d&&(Ne=(Te=_.content)[2]-Te[0],Ve=Te[3]-Te[1],_.contentMatch&&_.content&&(U=pu(h)),Re=Ac(H,0,Te[0]),at=Ac(J,0,Te[1]),qe=Ac(H,Te[0],Te[2]),_t=Ac(J,Te[1],Te[3]),Lt=Te[0]-Re,Vt=Te[1]-at,Kt=Ne-qe,Qt=Ve-_t);const on=U.x1,hn=U.y1,dn=U.x2-on,Xt=U.y2-hn;var Un=(hd,Ir,oo,Zo)=>{var eo=(hd.stretch-Re)/qe*dn+on,ig=hd.fixed-Lt-Kt*hd.stretch/he,Hl=(Ir.stretch-at)/_t*Xt+hn,dl=Ir.fixed-Vt-Qt*Ir.stretch/_e,io=(oo.stretch-Re)/qe*dn+on,dd=oo.fixed-Lt-Kt*oo.stretch/he,fh=(Zo.stretch-at)/_t*Xt+hn,tf=Zo.fixed-Vt-Qt*Zo.stretch/_e,Mc=new p(eo,Hl),Hl=new p(io,Hl),io=new p(io,fh),eo=new p(eo,fh),fh=new p(ig/x,dl/x),ig=new p(dd/x,tf/x),dl=a*Math.PI/180,dd=(dl&&(dd=Math.sin(dl),tf=Math.cos(dl),Mc._matMult(dl=[tf,-dd,dd,tf]),Hl._matMult(dl),eo._matMult(dl),io._matMult(dl)),hd.stretch+hd.fixed),tf=oo.stretch+oo.fixed,dl=Ir.stretch+Ir.fixed,hd=Zo.stretch+Zo.fixed;return{tl:Mc,tr:Hl,bl:eo,br:io,tex:{x:_.paddedRect.x+Tp+dd,y:_.paddedRect.y+Tp+dl,w:tf-dd,h:hd-dl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fh,pixelOffsetBR:ig,minFontScaleX:Kt/x/dn,minFontScaleY:Qt/x/Xt,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){var Rn=Xy(H,je,he),jn=Xy(J,Oe,_e);for(let or=0;or<Rn.length-1;or++){var pr=Rn[or],Ur=Rn[or+1];for(let Ir=0;Ir<jn.length-1;Ir++){var br=jn[Ir],So=jn[Ir+1];m.push(Un(pr,br,Ur,So))}}}else m.push(Un({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:1+I},{fixed:0,stretch:1+R}));return m}function Ac(h,a,s){let d=0;for(const m of h)d+=Math.max(a,Math.min(s,m[1]))-Math.max(a,Math.min(s,m[0]));return d}function Xy(h,a,s){var d,m,_=[{fixed:-1,stretch:0}];for([d,m]of h){var x=_[_.length-1];_.push({fixed:d-x.stretch,stretch:x.stretch}),_.push({fixed:d-x.stretch,stretch:x.stretch+(m-d)})}return _.push({fixed:a+Tp,stretch:s}),_}function Ip(h,a,s,d,m,_,x,I){var R=d.layout.get("text-rotate").evaluate(_,{})*Math.PI/180,U=[];for(const at of a.positionedLines)for(const _t of at.positionedGlyphs)if(_t.rect){var H=_t.rect||{};let Lt=bs+1,Kt=!0,Vt=1,Qt=0;var J,qe=(m||I)&&_t.vertical,he=_t.metrics.advance*_t.scale/2,_e=(I&&a.verticalizable&&(_e=(_t.scale-1)*ta,J=(ta-_t.metrics.width*_t.scale)/2,Qt=at.lineOffset/2-(_t.imageName?-J:_e)),_t.imageName&&(J=x[_t.imageName],Kt=J.sdf,Vt=J.pixelRatio,Lt=fa/Vt),m?[_t.x+he,_t.y]:[0,0]);let on=m?[0,0]:[_t.x+he+s[0],_t.y+s[1]-Qt],hn=[0,0];qe&&(hn=on,on=[0,0]);var Te=_t.metrics.isDoubleResolution?2:1,je=(_t.metrics.left-Lt)*_t.scale-he+on[0],Ve=(-_t.metrics.top-Lt)*_t.scale+on[1],Oe=je+H.w/Te*_t.scale/Vt,Te=Ve+H.h/Te*_t.scale/Vt,Ne=new p(je,Ve),Ve=new p(Oe,Ve),je=new p(je,Te),Oe=new p(Oe,Te),Re=(qe&&(Te=new p(-he,he-ll),qe=-Math.PI/2,he=ta/2-he,Re=_t.imageName?he:0,he=new p(5-ll-he,-Re),Re=new p(...hn),Ne._rotateAround(qe,Te)._add(he)._add(Re),Ve._rotateAround(qe,Te)._add(he)._add(Re),je._rotateAround(qe,Te)._add(he)._add(Re),Oe._rotateAround(qe,Te)._add(he)._add(Re)),R&&(qe=Math.sin(R),Te=Math.cos(R),Ne._matMult(he=[Te,-qe,qe,Te]),Ve._matMult(he),je._matMult(he),Oe._matMult(he)),new p(0,0)),qe=new p(0,0);U.push({tl:Ne,tr:Ve,bl:je,br:Oe,tex:H,writingMode:a.writingMode,glyphOffset:_e,sectionIndex:_t.sectionIndex,isSDF:Kt,pixelOffsetTL:Re,pixelOffsetBR:qe,minFontScaleX:0,minFontScaleY:0})}return U}class kp{constructor(a,s,d,m,_,x,I,R,U,H){if(this.boxStartIndex=a.length,U){let he=x.top,_e=x.bottom;var U=x.collisionPadding,U=(U&&(he-=U[1],_e+=U[3]),_e-he);0<U&&(U=Math.max(10,U),this.circleDiameter=U)}else{var J,U=(U=x.image)!=null&&U.contentMatch&&x.image.content?pu(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom},R=(U.y1=U.y1*I-R[0],U.x2=U.x2*I+R[1],U.y2=U.y2*I+R[2],U.x1=U.x1*I-R[3],x.collisionPadding);R&&(U.x1-=R[0]*I,U.y1-=R[1]*I,U.x2+=R[2]*I,U.y2+=R[3]*I),H&&(x=new p(U.x1,U.y1),R=new p(U.x2,U.y1),I=new p(U.x1,U.y2),J=new p(U.x2,U.y2),H=H*Math.PI/180,x._rotate(H),R._rotate(H),I._rotate(H),J._rotate(H),U.x1=Math.min(x.x,R.x,I.x,J.x),U.x2=Math.max(x.x,R.x,I.x,J.x),U.y1=Math.min(x.y,R.y,I.y,J.y),U.y2=Math.max(x.y,R.y,I.y,J.y)),a.emplaceBack(s.x,s.y,U.x1,U.y1,U.x2,U.y2,d,m,_)}this.boxEndIndex=a.length}}class U0{constructor(a=[],s=j0){if(this.data=a,this.length=this.data.length,this.compare=s,0<this.length)for(let d=(this.length>>1)-1;0<=d;d--)this._down(d)}push(a){this.data.push(a),this.length++,this._up(this.length-1)}pop(){var a,s;if(this.length!==0)return a=this.data[0],s=this.data.pop(),this.length--,0<this.length&&(this.data[0]=s,this._down(0)),a}peek(){return this.data[0]}_up(a){for(var{data:s,compare:d}=this,m=s[a];0<a;){var _=a-1>>1,x=s[_];if(0<=d(m,x))break;s[a]=x,a=_}s[a]=m}_down(a){for(var{data:s,compare:d}=this,m=this.length>>1,_=s[a];a<m;){let I=1+(a<<1),R=s[I];var x=I+1;if(x<this.length&&d(s[x],R)<0&&(I=x,R=s[x]),0<=d(R,_))break;s[a]=R,a=I}s[a]=_}}function j0(h,a){return h<a?-1:a<h?1:0}function yM(h,a=1,s=!1){let d=1/0,m=1/0,_=-1/0,x=-1/0;var I=h[0];for(let je=0;je<I.length;je++){var R=I[je];(!je||R.x<d)&&(d=R.x),(!je||R.y<m)&&(m=R.y),(!je||R.x>_)&&(_=R.x),(!je||R.y>x)&&(x=R.y)}var U=_-d,H=x-m,J=Math.min(U,H);let he=J/2;var _e=new U0([],$0);if(J===0)return new p(d,m);for(let je=d;je<_;je+=J)for(let Oe=m;Oe<x;Oe+=J)_e.push(new ng(je+he,Oe+he,he,h));let Te=function(je){let Oe=0,Re=0,qe=0;var at=je[0];for(let Vt=0,Qt=at.length,on=Qt-1;Vt<Qt;on=Vt++){var _t=at[Vt],Lt=at[on],Kt=_t.x*Lt.y-Lt.x*_t.y;Re+=(_t.x+Lt.x)*Kt,qe+=(_t.y+Lt.y)*Kt,Oe+=3*Kt}return new ng(Re/Oe,qe/Oe,0,je)}(h),Ne=_e.length;for(;_e.length;){var Ve=_e.pop();(Ve.d>Te.d||!Te.d)&&(Te=Ve,s)&&console.log("found best %d after %d probes",Math.round(1e4*Ve.d)/1e4,Ne),Ve.max-Te.d<=a||(he=Ve.h/2,_e.push(new ng(Ve.p.x-he,Ve.p.y-he,he,h)),_e.push(new ng(Ve.p.x+he,Ve.p.y-he,he,h)),_e.push(new ng(Ve.p.x-he,Ve.p.y+he,he,h)),_e.push(new ng(Ve.p.x+he,Ve.p.y+he,he,h)),Ne+=4)}return s&&(console.log("num probes: "+Ne),console.log("best distance: "+Te.d)),Te.p}function $0(h,a){return a.max-h.max}function ng(h,a,s,d){this.p=new p(h,a),this.h=s,this.d=function(m,_){let x=!1,I=1/0;for(let J=0;J<_.length;J++){var R=_[J];for(let he=0,_e=R.length,Te=_e-1;he<_e;Te=he++){var U=R[he],H=R[Te];U.y>m.y!=H.y>m.y&&m.x<(H.x-U.x)*(m.y-U.y)/(H.y-U.y)+U.x&&(x=!x),I=Math.min(I,mo(m,U,H))}}return(x?1:-1)*Math.sqrt(I)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}o.TextAnchorEnum=void 0,(go=o.TextAnchorEnum||(o.TextAnchorEnum={}))[go.center=1]="center",go[go.left=2]="left",go[go.right=3]="right",go[go.top=4]="top",go[go.bottom=5]="bottom",go[go["top-left"]=6]="top-left",go[go["top-right"]=7]="top-right",go[go["bottom-left"]=8]="bottom-left",go[go["bottom-right"]=9]="bottom-right";const hh=7,gb=Number.POSITIVE_INFINITY;function Qy(h,a){if(a[1]!==gb){var s=h,d=a[0],m=a[1];let I=0,R=0;switch(d=Math.abs(d),m=Math.abs(m),s){case"top-right":case"top-left":case"top":R=m-hh;break;case"bottom-right":case"bottom-left":case"bottom":R=-m+hh}switch(s){case"top-right":case"bottom-right":case"right":I=-d;break;case"top-left":case"bottom-left":case"left":I=d}return[I,R]}{var s=h,_=a[0];let R=0,U=0;var x=(_=_<0?0:_)/Math.SQRT2;switch(s){case"top-right":case"top-left":U=x-hh;break;case"bottom-right":case"bottom-left":U=-x+hh;break;case"bottom":U=-_+hh;break;case"top":U=_-hh}switch(s){case"top-right":case"bottom-right":R=-x;break;case"top-left":case"bottom-left":R=x;break;case"left":R=_;break;case"right":R=-_}return[R,U]}}function Jy(h,a,s){var d=h.layout,m=(m=d.get("text-variable-anchor-offset"))==null?void 0:m.evaluate(a,{},s);if(m){var _=m.values,x=[];for(let H=0;H<_.length;H+=2){var I=x[H]=_[H],R=_[H+1].map(J=>J*ta);I.startsWith("top")?R[1]-=hh:I.startsWith("bottom")&&(R[1]+=hh),x[H+1]=R}return new Mo(x)}if(m=d.get("text-variable-anchor"),m){let H;var h=h._unevaluatedLayout,U=(H=h.getValue("text-radial-offset")!==void 0?[d.get("text-radial-offset").evaluate(a,{},s)*ta,gb]:d.get("text-offset").evaluate(a,{},s).map(he=>he*ta),[]);for(const he of m)U.push(he,Qy(he,H));return new Mo(U)}return null}function yb(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function vb(h,a,s,d,m,_,x,I,R,U,H,J,he,_e,Te){s=Ip(0,s,I,m,_,x,d,h.allowVerticalPlacement),d=h.textSizeData;let Ne=null;d.kind==="source"?(Ne=[ai*m.layout.get("text-size").evaluate(x,{})])[0]>Gi&&K(`${h.layerIds[0]}: Value for "text-size" is >= ${pa}. Reduce your "text-size".`):d.kind==="composite"&&((Ne=[ai*_e.compositeTextSizes[0].evaluate(x,{},Te),ai*_e.compositeTextSizes[1].evaluate(x,{},Te)])[0]>Gi||Ne[1]>Gi)&&K(`${h.layerIds[0]}: Value for "text-size" is >= ${pa}. Reduce your "text-size".`),h.addSymbols(h.text,s,Ne,I,_,x,U,a,R.lineStartIndex,R.lineLength,he,Te);for(const Ve of H)J[Ve]=h.text.placedSymbolArray.length-1;return 4*s.length}function H0(h){for(const a in h)return h[a];return null}const _b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];function rg(h,a,s,d,m,_){var x;m-d<=s||(function I(R,U,H,J,he,_e){for(;J<he;){if(600<he-J){const je=he-J+1,Oe=H-J+1,Re=Math.log(je),qe=.5*Math.exp(2*Re/3),at=.5*Math.sqrt(Re*qe*(je-qe)/je)*(Oe-je/2<0?-1:1),_t=Math.max(J,Math.floor(H-Oe*qe/je+at)),Lt=Math.min(he,Math.floor(H+(je-Oe)*qe/je+at));I(R,U,H,_t,Lt,_e)}const Te=U[2*H+_e];let Ne=J,Ve=he;for(Pp(R,U,J,H),U[2*he+_e]>Te&&Pp(R,U,J,he);Ne<Ve;){for(Pp(R,U,Ne,Ve),Ne++,Ve--;U[2*Ne+_e]<Te;)Ne++;for(;U[2*Ve+_e]>Te;)Ve--}U[2*J+_e]===Te?Pp(R,U,J,Ve):(Ve++,Pp(R,U,Ve,he)),Ve<=H&&(J=Ve+1),H<=Ve&&(he=Ve-1)}}(h,a,x=d+m>>1,d,m,_),rg(h,a,s,d,x-1,1-_),rg(h,a,s,1+x,m,1-_))}function Pp(h,a,s,d){og(h,s,d),og(a,2*s,2*d),og(a,2*s+1,2*d+1)}function og(h,a,s){var d=h[a];h[a]=h[s],h[s]=d}function V0(h,a,s,d){return h-=s,s=a-d,h*h+s*s}o.PerformanceMarkers=void 0,(ha=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",ha.load="load",ha.fullLoad="fullLoad";let bb=null,ef=[];const q0=1e3/60,Ap="loadTime",G0="fullLoadTime";go={mark(h){performance.mark(h)},frame(h){var a;bb!=null&&(a=h-bb,ef.push(a)),bb=h},clearMetrics(){bb=null,ef=[],performance.clearMeasures(Ap),performance.clearMeasures(G0);for(const h in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[h])},getPerformanceMetrics(){performance.measure(Ap,o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure(G0,o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);var h=performance.getEntriesByName(Ap)[0].duration,a=performance.getEntriesByName(G0)[0].duration,s=ef.length,d=1/(ef.reduce((_,x)=>_+x,0)/s/1e3),m=ef.filter(_=>_>q0).reduce((_,x)=>_+(x-q0)/q0,0);return{loadTime:h,fullLoadTime:a,fps:d,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}},o.AJAXError=ot,o.Actor=class{constructor(h,a){this.target=h,this.mapId=a,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Xh(()=>this.process()),this.subscription=le(this.target,"message",s=>this.receive(s),!1),this.globalScope=re(self)?h:window}registerMessageHandler(h,a){this.messageHandlers[h]=a}sendAsync(h,a){return new Promise((s,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[m]={resolve:s,reject:d},a&&a.signal.addEventListener("abort",()=>{delete this.resolveRejects[m];var _={id:m,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(_)},{once:!0}),s=[],d=Object.assign(Object.assign({},h),{id:m,sourceMapId:this.mapId,origin:location.origin,data:_c(h.data,s)}),this.target.postMessage(d,{transfer:s})})}receive(s){var a,s=s.data,d=s.id;s.origin!=="file://"&&location.origin!=="file://"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId||(s.type==="<cancel>"?(delete this.tasks[d],a=this.abortControllers[d],delete this.abortControllers[d],a&&a.abort()):re(self)||s.mustQueue?(this.tasks[d]=s,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,s))}process(){var h,a;this.taskQueue.length!==0&&(h=this.taskQueue.shift(),a=this.tasks[h],delete this.tasks[h],0<this.taskQueue.length&&this.invoker.trigger(),a)&&this.processTask(h,a)}processTask(h,a){return i(this,void 0,void 0,function*(){if(a.type==="<response>")return s=this.resolveRejects[h],delete this.resolveRejects[h],s?void(a.error?s.reject(su(a.error)):s.resolve(su(a.data))):void 0;if(this.messageHandlers[a.type]){var s=su(a.data),d=new AbortController;this.abortControllers[h]=d;try{var m=yield this.messageHandlers[a.type](a.sourceMapId,s,d);this.completeTask(h,null,m)}catch(_){this.completeTask(h,_)}}else this.completeTask(h,new Error(`Could not find a registered handler for ${a.type}, map ID: ${this.mapId}, available handlers: `+Object.keys(this.messageHandlers).join(", ")))})}completeTask(m,a,s){var d=[],m=(delete this.abortControllers[m],{id:m,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:a?_c(a):null,data:_c(s,d)});this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.AlphaImage=Ei,o.CanonicalTileID=Ky,o.CollisionBoxArray=j_,o.CollisionCircleLayoutArray=class extends ky{},o.Color=$n,o.DEMData=L0,o.DataConstantProperty=Kn,o.DictionaryCoder=Qh,o.EXTENT=ln,o.ErrorEvent=ye,o.EvaluationParameters=zo,o.Event=ee,o.Evented=Ie,o.FeatureIndex=Ep,o.FillBucket=Z_,o.FillExtrusionBucket=Q_,o.GLOBAL_DISPATCHER_ID=it,o.GeoJSONFeature=qE,o.ImageAtlas=k0,o.ImagePosition=lb,o.KDBush=class B9{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var s,[d,m]=new Uint8Array(a,0,2);if(d!==219)throw new Error("Data does not appear to be in a KDBush format.");if((d=m>>4)!=1)throw new Error(`Got v${d} data when expected v1.`);if(d=_b[15&m])return[m]=new Uint16Array(a,2,1),[s]=new Uint32Array(a,4,1),new B9(s,m,d,a);throw new Error("Unrecognized array type.")}constructor(a,s=64,d=Float64Array,m){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=d,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;var _=_b.indexOf(this.ArrayType),x=2*a*this.ArrayType.BYTES_PER_ELEMENT,I=a*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-I%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+R,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+x+I+R),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+I+R,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=a)}add(a,s){var d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=a,this.coords[this._pos++]=s,d}finish(){var a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return rg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,s,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:_,coords:x,nodeSize:I}=this,R=[0,_.length-1,0],U=[];R.length;){var H=R.pop()||0,J=R.pop()||0,he=R.pop()||0;if(J-he<=I)for(let Oe=he;Oe<=J;Oe++){var _e=x[2*Oe],Te=x[2*Oe+1];a<=_e&&_e<=d&&s<=Te&&Te<=m&&U.push(_[Oe])}else{var Ne=he+J>>1,Ve=x[2*Ne],je=x[2*Ne+1];a<=Ve&&Ve<=d&&s<=je&&je<=m&&U.push(_[Ne]),(H===0?a<=Ve:s<=je)&&(R.push(he),R.push(Ne-1),R.push(1-H)),(H===0?Ve<=d:je<=m)&&(R.push(1+Ne),R.push(J),R.push(1-H))}}return U}within(a,s,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:m,coords:_,nodeSize:x}=this,I=[0,m.length-1,0],R=[],U=d*d;I.length;){var H=I.pop()||0,J=I.pop()||0,he=I.pop()||0;if(J-he<=x)for(let Ve=he;Ve<=J;Ve++)V0(_[2*Ve],_[2*Ve+1],a,s)<=U&&R.push(m[Ve]);else{var _e=he+J>>1,Te=_[2*_e],Ne=_[2*_e+1];V0(Te,Ne,a,s)<=U&&R.push(m[_e]),(H===0?a-d<=Te:s-d<=Ne)&&(I.push(he),I.push(_e-1),I.push(1-H)),(H===0?Te<=a+d:Ne<=s+d)&&(I.push(1+_e),I.push(J),I.push(1-H))}}return R}},o.LineBucket=J_,o.LineStripIndexArray=class extends Nl{},o.LngLat=Ea,o.MercatorCoordinate=cd,o.ONE_EM=ta,o.OverscaledTileID=gu,o.PerformanceUtils=go,o.Point=p,o.Pos3dArray=class extends zu{},o.PosArray=Bu,o.Properties=ns,o.Protobuf=ab,o.QuadTriangleArray=class extends pp{},o.RGBAImage=Ko,o.RasterBoundsArray=class extends Nm{},o.RequestPerformance=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},o.SegmentVector=E,o.SymbolBucket=Zh,o.Transitionable=sp,o.TriangleIndexArray=kc,o.Uniform1f=Se,o.Uniform1i=class extends se{constructor(h,a){super(h,a),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},o.Uniform2f=class extends se{constructor(h,a){super(h,a),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},o.Uniform3f=class extends se{constructor(h,a){super(h,a),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},o.Uniform4f=Pe,o.UniformColor=me,o.UniformMatrix4f=class extends se{constructor(h,a){super(h,a),this.current=Me}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);else for(let a=1;a<16;a++)if(h[a]!==this.current[a]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},o.UnwrappedTileID=Yy,o.ValidationError=Ge,o.ZoomHistory=Am,o.__awaiter=i,o.add=function(h,a,s){return h[0]=a[0]+s[0],h[1]=a[1]+s[1],h[2]=a[2]+s[2],h},o.addDynamicAttributes=eg,o.addProtocol=function(h,a){Be.REGISTERED_PROTOCOLS[h]=a},o.arrayBufferToImage=h=>new Promise((a,s)=>{const d=new Image;d.onload=()=>{a(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=Q})},d.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));var m=new Blob([new Uint8Array(h)],{type:"image/png"});d.src=h.byteLength?URL.createObjectURL(m):Q}),o.arrayBufferToImageBitmap=h=>i(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));var a=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(a)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.bezier=L,o.clamp=D,o.clipLine=F0,o.clone=function(h){var a=new Ro(16);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],a},o.clone$1=q,o.clone$2=function(h){var a=new Ro(3);return a[0]=h[0],a[1]=h[1],a[2]=h[2],a},o.collisionCircleLayout=ms,o.config=Be,o.copy=function(h,a){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},o.create=function(){var h=new Ro(16);return Ro!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},o.create$1=Fl,o.create$2=function(){var h=new Ro(4);return Ro!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h},o.createAbortError=Fe,o.createExpression=gc,o.createFilter=Qe,o.createLayout=Ni,o.createStyleLayer=function(h){if(h.type==="custom")return new cl(h);switch(h.type){case"background":return new Gy(h);case"circle":return new hu(h);case"fill":return new EE(h);case"fill-extrusion":return new d0(h);case"heatmap":return new V_(h);case"hillshade":return new sM(h);case"line":return new v0(h);case"raster":return new fb(h);case"symbol":return new Cp(h)}},o.cross=Sa,o.deepEqual=function h(a,s){if(Array.isArray(a)){if(!Array.isArray(s)||a.length!==s.length)return!1;for(let d=0;d<a.length;d++)if(!h(a[d],s[d]))return!1}else{if(typeof a!="object"||a===null||s===null)return a===s;if(typeof s!="object"||Object.keys(a).length!==Object.keys(s).length)return!1;for(const d in a)if(!h(a[d],s[d]))return!1}return!0},o.defaultEasing=g,o.degreesToRadians=function(h){return h*Math.PI/180},o.derefLayers=function(h){h=h.slice();var a=Object.create(null);for(let s=0;s<h.length;s++)a[h[s].id]=h[s];for(let s=0;s<h.length;s++)"ref"in h[s]&&(h[s]=function(d,m){const _={};for(const x in d)x!=="ref"&&(_[x]=d[x]);return $e.forEach(x=>{x in m&&(_[x]=m[x])}),_}(h[s],a[h[s].ref]));return h},o.diffStyles=function(h,a){if(!h)return[{command:"setStyle",args:[a]}];let s=[];try{if(!nt(h.version,a.version))return[{command:"setStyle",args:[a]}];nt(h.center,a.center)||s.push({command:"setCenter",args:[a.center]}),nt(h.zoom,a.zoom)||s.push({command:"setZoom",args:[a.zoom]}),nt(h.bearing,a.bearing)||s.push({command:"setBearing",args:[a.bearing]}),nt(h.pitch,a.pitch)||s.push({command:"setPitch",args:[a.pitch]}),nt(h.sprite,a.sprite)||s.push({command:"setSprite",args:[a.sprite]}),nt(h.glyphs,a.glyphs)||s.push({command:"setGlyphs",args:[a.glyphs]}),nt(h.transition,a.transition)||s.push({command:"setTransition",args:[a.transition]}),nt(h.light,a.light)||s.push({command:"setLight",args:[a.light]}),nt(h.terrain,a.terrain)||s.push({command:"setTerrain",args:[a.terrain]}),nt(h.sky,a.sky)||s.push({command:"setSky",args:[a.sky]});const Ne={};var d=[];zt(h.sources,a.sources,d,Ne);const Ve=[];h.layers&&h.layers.forEach(je=>{"source"in je&&Ne[je.source]?s.push({command:"removeLayer",args:[je.id]}):Ve.push(je)}),s=s.concat(d);{var m=Ve,_=a.layers,x=s;_=_||[];var I,R,U=(m=m||[]).map(Zt),H=_.map(Zt),J=m.reduce(We,{}),he=_.reduce(We,{}),_e=U.slice(),Te=Object.create(null);let je,Oe,Re;for(let qe=0,at=0;qe<U.length;qe++)je=U[qe],Object.prototype.hasOwnProperty.call(he,je)?at++:(pt(x,{command:"removeLayer",args:[je]}),_e.splice(_e.indexOf(je,at),1));for(let qe=0,at=0;qe<H.length;qe++)je=H[H.length-1-qe],_e[_e.length-1-qe]!==je&&(Object.prototype.hasOwnProperty.call(J,je)?(pt(x,{command:"removeLayer",args:[je]}),_e.splice(_e.lastIndexOf(je,_e.length-at),1)):at++,Oe=_e[_e.length-qe],pt(x,{command:"addLayer",args:[he[je],Oe]}),_e.splice(_e.length-qe,0,je),Te[je]=!0);for(let qe=0;qe<H.length;qe++)if(I=J[je=H[qe]],R=he[je],!Te[je]&&!nt(I,R))if(nt(I.source,R.source)&&nt(I["source-layer"],R["source-layer"])&&nt(I.type,R.type)){for(Re in Pt(I.layout,R.layout,x,je,null,"setLayoutProperty"),Pt(I.paint,R.paint,x,je,null,"setPaintProperty"),nt(I.filter,R.filter)||pt(x,{command:"setFilter",args:[je,R.filter]}),nt(I.minzoom,R.minzoom)&&nt(I.maxzoom,R.maxzoom)||pt(x,{command:"setLayerZoomRange",args:[je,R.minzoom,R.maxzoom]}),I)Object.prototype.hasOwnProperty.call(I,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Pt(I[Re],R[Re],x,je,Re.slice(6),"setPaintProperty"):nt(I[Re],R[Re])||pt(x,{command:"setLayerProperty",args:[je,Re,R[Re]]}));for(Re in R)Object.prototype.hasOwnProperty.call(R,Re)&&!Object.prototype.hasOwnProperty.call(I,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Pt(I[Re],R[Re],x,je,Re.slice(6),"setPaintProperty"):nt(I[Re],R[Re])||pt(x,{command:"setLayerProperty",args:[je,Re,R[Re]]}))}else pt(x,{command:"removeLayer",args:[je]}),pt(x,{command:"addLayer",args:[R,Oe=_e[_e.lastIndexOf(je)+1]]})}}catch(Ne){console.warn("Unable to compute style diff:",Ne),s=[{command:"setStyle",args:[a]}]}return s},o.dot=zl,o.dot$1=function(h,a){return h[0]*a[0]+h[1]*a[1]+h[2]*a[2]+h[3]*a[3]},o.earthRadius=mu,o.emitValidationErrors=Ey,o.emptyStyle=function(){var h={},a=ge.$version;for(const d in ge.$root){var s=ge.$root[d];if(s.required){let m=null;(m=d==="version"?a:s.type==="array"?[]:{})!=null&&(h[d]=m)}}return h},o.equals=function(je,jn){var s=je[0],d=je[1],m=je[2],_=je[3],x=je[4],I=je[5],R=je[6],U=je[7],H=je[8],J=je[9],he=je[10],_e=je[11],Te=je[12],Ne=je[13],Ve=je[14],je=je[15],Oe=jn[0],Re=jn[1],qe=jn[2],at=jn[3],_t=jn[4],Lt=jn[5],Kt=jn[6],Vt=jn[7],Qt=jn[8],on=jn[9],hn=jn[10],dn=jn[11],Xt=jn[12],Un=jn[13],Rn=jn[14],jn=jn[15];return Math.abs(s-Oe)<=Co*Math.max(1,Math.abs(s),Math.abs(Oe))&&Math.abs(d-Re)<=Co*Math.max(1,Math.abs(d),Math.abs(Re))&&Math.abs(m-qe)<=Co*Math.max(1,Math.abs(m),Math.abs(qe))&&Math.abs(_-at)<=Co*Math.max(1,Math.abs(_),Math.abs(at))&&Math.abs(x-_t)<=Co*Math.max(1,Math.abs(x),Math.abs(_t))&&Math.abs(I-Lt)<=Co*Math.max(1,Math.abs(I),Math.abs(Lt))&&Math.abs(R-Kt)<=Co*Math.max(1,Math.abs(R),Math.abs(Kt))&&Math.abs(U-Vt)<=Co*Math.max(1,Math.abs(U),Math.abs(Vt))&&Math.abs(H-Qt)<=Co*Math.max(1,Math.abs(H),Math.abs(Qt))&&Math.abs(J-on)<=Co*Math.max(1,Math.abs(J),Math.abs(on))&&Math.abs(he-hn)<=Co*Math.max(1,Math.abs(he),Math.abs(hn))&&Math.abs(_e-dn)<=Co*Math.max(1,Math.abs(_e),Math.abs(dn))&&Math.abs(Te-Xt)<=Co*Math.max(1,Math.abs(Te),Math.abs(Xt))&&Math.abs(Ne-Un)<=Co*Math.max(1,Math.abs(Ne),Math.abs(Un))&&Math.abs(Ve-Rn)<=Co*Math.max(1,Math.abs(Ve),Math.abs(Rn))&&Math.abs(je-jn)<=Co*Math.max(1,Math.abs(je),Math.abs(jn))},o.evaluateSizeForFeature=function(h,{uSize:a,uSizeT:s},{lowerSize:d,upperSize:m}){return h.kind==="source"?d/ai:h.kind==="composite"?ea.number(d/ai,m/ai,s):a},o.evaluateSizeForZoom=function(h,a){let s=0,d=0;var m,_,x;return h.kind==="constant"?d=h.layoutSize:h.kind!=="source"&&({interpolationType:x,minZoom:m,maxZoom:_}=h,x=x?D(Aa.interpolationFactor(x,a,m,_),0,1):0,h.kind==="camera"?d=ea.number(h.minSize,h.maxSize,x):s=x),{uSizeT:s,uSize:d}},o.exactEquals=function(h,a){return h[0]===a[0]&&h[1]===a[1]&&h[2]===a[2]&&h[3]===a[3]&&h[4]===a[4]&&h[5]===a[5]&&h[6]===a[6]&&h[7]===a[7]&&h[8]===a[8]&&h[9]===a[9]&&h[10]===a[10]&&h[11]===a[11]&&h[12]===a[12]&&h[13]===a[13]&&h[14]===a[14]&&h[15]===a[15]},o.extend=F,o.filterObject=G,o.findLineIntersection=function(h,_,s,I){var m=_.y-h.y,_=_.x-h.x,x=I.y-s.y,I=I.x-s.x,R=x*_-I*m;return R==0?null:(I=(I*(h.y-s.y)-x*(h.x-s.x))/R,new p(h.x+I*_,h.y+I*m))},o.fromRotation=function(h,d){var s=Math.sin(d),d=Math.cos(d);return h[0]=d,h[1]=s,h[2]=0,h[3]=-s,h[4]=d,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},o.fromScaling=function(h,a){return h[0]=a[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=a[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=a[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},o.getAnchorAlignment=$y,o.getAnchorJustification=yb,o.getArrayBuffer=(h,a)=>ct(F(h,{type:"arrayBuffer"}),a),o.getDefaultExportFromCjs=l,o.getImageData=function(h,a,s,d,m){return i(this,void 0,void 0,function*(){if(P())try{return yield ce(h,a,s,d,m)}catch{}return x=a,I=s,R=d,U=m,H=(_=h).width,J=_.height,ae&&fe||(ae=new OffscreenCanvas(H,J),fe=ae.getContext("2d",{willReadFrequently:!0})),ae.width=H,ae.height=J,fe.drawImage(_,0,0,H,J),_=fe.getImageData(x,I,R,U),fe.clearRect(0,0,H,J),_.data;var _,x,I,R,U,H,J})},o.getJSON=(h,a)=>ct(F(h,{type:"json"}),a),o.getOverlapMode=Yh,o.getProtocol=Ze,o.getReferrer=ut,o.getVideo=h=>{const a=window.document.createElement("video");return a.muted=!0,new Promise(s=>{a.onloadstart=()=>{s(a)};for(const m of h){var d=window.document.createElement("source");Ae(m)||(a.crossOrigin="Anonymous"),d.src=m,a.appendChild(d)}})},o.groupByLayout=function(h,a){var s={};for(let _=0;_<h.length;_++){var d=a&&a[h[_].id]||xr(h[_]);a&&(a[h[_].id]=d);let x=s[d];(x=x||(s[d]=[])).push(h[_])}var m=[];for(const _ in s)m.push(s[_]);return m},o.identity=Bo,o.interpolate=ea,o.invert=function(h,je){var s=je[0],d=je[1],m=je[2],_=je[3],x=je[4],I=je[5],R=je[6],U=je[7],H=je[8],J=je[9],he=je[10],_e=je[11],Te=je[12],Ne=je[13],Ve=je[14],je=je[15],Oe=s*I-d*x,Re=s*R-m*x,qe=s*U-_*x,at=d*R-m*I,_t=d*U-_*I,Lt=m*U-_*R,Kt=H*Ne-J*Te,Vt=H*Ve-he*Te,Qt=H*je-_e*Te,on=J*Ve-he*Ne,hn=J*je-_e*Ne,dn=he*je-_e*Ve,Xt=Oe*dn-Re*hn+qe*on+at*Qt-_t*Vt+Lt*Kt;return Xt?(h[0]=(I*dn-R*hn+U*on)*(Xt=1/Xt),h[1]=(m*hn-d*dn-_*on)*Xt,h[2]=(Ne*Lt-Ve*_t+je*at)*Xt,h[3]=(he*_t-J*Lt-_e*at)*Xt,h[4]=(R*Qt-x*dn-U*Vt)*Xt,h[5]=(s*dn-m*Qt+_*Vt)*Xt,h[6]=(Ve*qe-Te*Lt-je*Re)*Xt,h[7]=(H*Lt-he*qe+_e*Re)*Xt,h[8]=(x*hn-I*Qt+U*Kt)*Xt,h[9]=(d*Qt-s*hn-_*Kt)*Xt,h[10]=(Te*_t-Ne*qe+je*Oe)*Xt,h[11]=(J*qe-H*_t-_e*Oe)*Xt,h[12]=(I*Vt-x*on-R*Kt)*Xt,h[13]=(s*on-d*Vt+m*Kt)*Xt,h[14]=(Ne*Re-Te*at-Ve*Oe)*Xt,h[15]=(H*at-J*Re+he*Oe)*Xt,h):null},o.isAbortError=function(h){return h.message===pe},o.isImageBitmap=ue,o.isOffscreenCanvasDistorted=P,o.isSafari=function(h){var a;return oe==null&&(a=h.navigator?h.navigator.userAgent:null,oe=!!h.safari||!(!a||!(/\b(iPad|iPhone|iPod)\b/.test(a)||a.match("Safari")&&!a.match("Chrome")))),oe},o.isWorker=re,o.keysDifference=function(h,a){var s=[];for(const d in h)d in a||s.push(d);return s},o.makeRequest=ct,o.mapObject=V,o.mercatorXfromLng=mb,o.mercatorYfromLat=jE,o.mercatorZfromAltitude=dh,o.mul=rl,o.mul$1=zs,o.multiply=Ci,o.nextPowerOfTwo=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},o.normalize=da,o.offscreenCanvasSupported=T,o.ortho=Oo,o.parseCacheControl=function(h){const a={};return h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,m,_)=>(m=m||_,a[d]=!m||m.toLowerCase(),"")),a["max-age"]&&(h=parseInt(a["max-age"],10),isNaN(h)?delete a["max-age"]:a["max-age"]=h),a},o.parseGlyphPbf=function(h){return new ab(h).readFields(zE,[])},o.pbf=vs,o.performSymbolLayout=function(h){h.bucket.createArrays();var a,s,d=512*h.bucket.overscaling,m=(h.bucket.tilePixelRatio=ln/d,h.bucket.compareText={},h.bucket.iconsNeedLinear=!1,h.bucket.layers[0]),_=m.layout,x={layoutIconSize:(d=m._unevaluatedLayout._values)["icon-size"].possiblyEvaluate(new zo(h.bucket.zoom+1),h.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new zo(h.bucket.zoom+1),h.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new zo(18))};h.bucket.textSizeData.kind==="composite"&&({minZoom:a,maxZoom:s}=h.bucket.textSizeData,x.compositeTextSizes=[d["text-size"].possiblyEvaluate(new zo(a),h.canonical),d["text-size"].possiblyEvaluate(new zo(s),h.canonical)]),h.bucket.iconSizeData.kind==="composite"&&({minZoom:a,maxZoom:s}=h.bucket.iconSizeData,x.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new zo(a),h.canonical),d["icon-size"].possiblyEvaluate(new zo(s),h.canonical)]);const I=_.get("text-line-height")*ta;var R=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point",U=_.get("text-keep-upright"),H=_.get("text-size");for(const je of h.bucket.features){const Oe=_.get("text-font").evaluate(je,{},h.canonical).join(","),Re=H.evaluate(je,{},h.canonical),qe=x.layoutTextSize.evaluate(je,{},h.canonical);var J=x.layoutIconSize.evaluate(je,{},h.canonical);const at={horizontal:{},vertical:void 0},_t=je.text;let Lt=[0,0];if(_t){const Qt=_t.toString();var he=_.get("text-letter-spacing").evaluate(je,{},h.canonical)*ta;const on=Ty(Qt)?he:0,hn=_.get("text-anchor").evaluate(je,{},h.canonical);var _e=Jy(m,je,h.canonical);_e||(he=_.get("text-radial-offset").evaluate(je,{},h.canonical),Lt=he?Qy(hn,[he*ta,gb]):_.get("text-offset").evaluate(je,{},h.canonical).map(Rn=>Rn*ta));let dn=R?"center":_.get("text-justify").evaluate(je,{},h.canonical);const Xt=_.get("symbol-placement"),Un=Xt==="point"?_.get("text-max-width").evaluate(je,{},h.canonical)*ta:0;if(he=()=>{h.bucket.allowVerticalPlacement&&bc(Qt)&&(at.vertical=ub(_t,h.glyphMap,h.glyphPositions,h.imagePositions,Oe,Un,I,hn,"left",on,Lt,o.WritingMode.vertical,!0,Xt,qe,Re))},!R&&_e){var Te,Ne=new Set;if(dn==="auto")for(let jn=0;jn<_e.values.length;jn+=2)Ne.add(yb(_e.values[jn]));else Ne.add(dn);let Rn=!1;for(const jn of Ne)at.horizontal[jn]||(Rn?at.horizontal[jn]=at.horizontal[0]:(Te=ub(_t,h.glyphMap,h.glyphPositions,h.imagePositions,Oe,Un,I,"center",jn,on,Lt,o.WritingMode.horizontal,!1,Xt,qe,Re))&&(at.horizontal[jn]=Te,Rn=Te.positionedLines.length===1));he()}else{dn==="auto"&&(dn=yb(hn));var Ve=ub(_t,h.glyphMap,h.glyphPositions,h.imagePositions,Oe,Un,I,hn,dn,on,Lt,o.WritingMode.horizontal,!1,Xt,qe,Re);Ve&&(at.horizontal[dn]=Ve),he(),bc(Qt)&&R&&U&&(at.vertical=ub(_t,h.glyphMap,h.glyphPositions,h.imagePositions,Oe,Un,I,hn,dn,on,Lt,o.WritingMode.vertical,!1,Xt,qe,Re))}}let Kt,Vt=!1;je.icon&&je.icon.name&&(Ve=h.imageMap[je.icon.name])&&(Kt=function(Qt,Rn,Un){var{horizontalAlign:Un,verticalAlign:dn}=$y(Un),Xt=Rn[0],Rn=Rn[1],Un=(Xt=Xt-Qt.displaySize[0]*Un)+Qt.displaySize[0],Rn=Rn-Qt.displaySize[1]*dn;return{image:Qt,top:Rn,bottom:Rn+Qt.displaySize[1],left:Xt,right:Un}}(h.imagePositions[je.icon.name],_.get("icon-offset").evaluate(je,{},h.canonical),_.get("icon-anchor").evaluate(je,{},h.canonical)),Vt=!!Ve.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=Vt:h.bucket.sdfIcons!==Vt&&K("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),Ve.pixelRatio!==h.bucket.pixelRatio||_.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0),he=H0(at.horizontal)||at.vertical,h.bucket.iconsInText=!!he&&he.iconsInText,(he||Kt)&&function(Qt,on,hn,dn,Xt,Un,Rn,jn,pr,Ur,br){let So=Un.textMaxSize.evaluate(on,{});So===void 0&&(So=Rn);const or=Qt.layers[0].layout,Ir=or.get("icon-offset").evaluate(on,{},br),oo=H0(hn.horizontal),Zo=Rn/24,Mc=Qt.tilePixelRatio*Zo,Hl=Qt.tilePixelRatio*So/24,io=Qt.tilePixelRatio*jn,eo=Qt.tilePixelRatio*or.get("symbol-spacing"),fh=or.get("text-padding")*Qt.tilePixelRatio,ig=function(Ao,Eo,To,ma=1){return Ao=Ao.get("icon-padding").evaluate(Eo,{},To),[(Eo=Ao&&Ao.values)[0]*ma,Eo[1]*ma,Eo[2]*ma,Eo[3]*ma]}(or,on,br,Qt.tilePixelRatio),dd=or.get("text-max-angle")/180*Math.PI,tf=or.get("text-rotation-alignment")!=="viewport"&&or.get("symbol-placement")!=="point",dl=or.get("icon-rotation-alignment")==="map"&&or.get("symbol-placement")!=="point",hd=or.get("symbol-placement"),vM=eo/2,W0=or.get("icon-text-fit");let Va;dn&&W0!=="none"&&(Qt.allowVerticalPlacement&&hn.vertical&&(Va=Po(dn,hn.vertical,W0,or.get("icon-text-fit-padding"),Ir,Zo)),oo)&&(dn=Po(dn,oo,W0,or.get("icon-text-fit-padding"),Ir,Zo));var Hs=(Ao,Eo)=>{if(!(Eo.x<0||Eo.x>=ln||Eo.y<0||Eo.y>=ln)){var To=Qt,ma=Eo;Eo=Ao;var Oa=hn;Ao=dn;var yu=Xt,hi=Va,Da=Qt.layers[0],Vs=Qt.collisionBoxArray,hl=on.index,qu=on.sourceLayerIndex,qs=Qt.index,fl=Mc,pd=[fh,fh,fh,fh],nf=tf,wb=pr,rf=io,YE=ig,of=dl,ZE=Ir,Rc=on,XE=Un,ev=Ur,Rp=br,Y0=Rn,xb=To.addToLineVertexArray(ma,Eo);let tv,Cb,Sb,Eb,NB=0,FB=0,zB=0,BB=0,_M=-1,bM=-1;var Op={};let UB=b("");if(To.allowVerticalPlacement&&Oa.vertical&&(Eo=Da.layout.get("text-rotate").evaluate(Rc,{},Rp)+90,K0=Oa.vertical,Sb=new kp(Vs,ma,hl,qu,qs,K0,fl,pd,nf,Eo),hi)&&(Eb=new kp(Vs,ma,hl,qu,qs,hi,rf,YE,nf,Eo)),Ao){var K0=Da.layout.get("icon-rotate").evaluate(Rc,{}),Eo=Da.layout.get("icon-text-fit")!=="none",QE=KE(Ao,K0,ev,Eo),hi=hi?KE(hi,K0,ev,Eo):void 0,ev=(Cb=new kp(Vs,ma,hl,qu,qs,Ao,rf,YE,!1,K0),NB=4*QE.length,To.iconSizeData);let ph=null;ev.kind==="source"?(ph=[ai*Da.layout.get("icon-size").evaluate(Rc,{})])[0]>Gi&&K(`${To.layerIds[0]}: Value for "icon-size" is >= ${pa}. Reduce your "icon-size".`):ev.kind==="composite"&&((ph=[ai*XE.compositeIconSizes[0].evaluate(Rc,{},Rp),ai*XE.compositeIconSizes[1].evaluate(Rc,{},Rp)])[0]>Gi||ph[1]>Gi)&&K(`${To.layerIds[0]}: Value for "icon-size" is >= ${pa}. Reduce your "icon-size".`),To.addSymbols(To.icon,QE,ph,ZE,of,Rc,o.WritingMode.none,ma,xb.lineStartIndex,xb.lineLength,-1,Rp),_M=To.icon.placedSymbolArray.length-1,hi&&(FB=4*hi.length,To.addSymbols(To.icon,hi,ph,ZE,of,Rc,o.WritingMode.vertical,ma,xb.lineStartIndex,xb.lineLength,-1,Rp),bM=To.icon.placedSymbolArray.length-1)}var LB=Object.keys(Oa.horizontal);for(const sf of LB){var JE=Oa.horizontal[sf],eT=(tv||(UB=b(JE.text),eT=Da.layout.get("text-rotate").evaluate(Rc,{},Rp),tv=new kp(Vs,ma,hl,qu,qs,JE,fl,pd,nf,eT)),JE.positionedLines.length===1);if(zB+=vb(To,ma,JE,yu,Da,nf,Rc,wb,xb,Oa.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,eT?LB:[sf],Op,_M,XE,Rp),eT)break}Oa.vertical&&(BB+=vb(To,ma,Oa.vertical,yu,Da,nf,Rc,wb,xb,o.WritingMode.vertical,["vertical"],Op,bM,XE,Rp)),Eo=tv?tv.boxStartIndex:To.collisionBoxArray.length,Ao=tv?tv.boxEndIndex:To.collisionBoxArray.length,rf=Sb?Sb.boxStartIndex:To.collisionBoxArray.length,YE=Sb?Sb.boxEndIndex:To.collisionBoxArray.length,ev=Cb?Cb.boxStartIndex:To.collisionBoxArray.length,QE=Cb?Cb.boxEndIndex:To.collisionBoxArray.length,hi=Eb?Eb.boxStartIndex:To.collisionBoxArray.length,ZE=Eb?Eb.boxEndIndex:To.collisionBoxArray.length;let af=-1;of=(sf,Z0)=>sf&&sf.circleDiameter?Math.max(sf.circleDiameter,Z0):Z0,af=of(tv,af),af=of(Sb,af),af=of(Cb,af),of=-1<(af=of(Eb,af))?1:0,of&&(af*=Y0/ta),To.glyphOffsetArray.length>=Zh.MAX_GLYPHS&&K("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rc.sortKey!==void 0&&To.addToSortKeyRanges(To.symbolInstances.length,Rc.sortKey);var Y0=Jy(Da,Rc,Rp),[Y0,HZ]=function(sf,Z0){var VZ=sf.length,ph=Z0==null?void 0:Z0.values;if(0<(ph==null?void 0:ph.length))for(let tT=0;tT<ph.length;tT+=2){var qZ=o.TextAnchorEnum[ph[tT]],jB=ph[tT+1];sf.emplaceBack(qZ,jB[0],jB[1])}return[VZ,sf.length]}(To.textAnchorOffsets,Y0);To.symbolInstances.emplaceBack(ma.x,ma.y,0<=Op.right?Op.right:-1,0<=Op.center?Op.center:-1,0<=Op.left?Op.left:-1,Op.vertical||-1,_M,bM,UB,Eo,Ao,rf,YE,ev,QE,hi,ZE,hl,zB,BB,NB,FB,of,0,fl,af,Y0,HZ)}};if(hd==="line")for(const Ao of F0(on.geometry,0,0,ln,ln))for(const Eo of Vu(Ao,eo,dd,hn.vertical||oo,dn,24,Hl,Qt.overscaling,ln))oo&&function(To,ma,Oa,yu){if(To=To.compareText,ma in To){var hi=To[ma];for(let Da=hi.length-1;0<=Da;Da--)if(yu.dist(hi[Da])<Oa)return 1}else To[ma]=[];return To[ma].push(yu),0}(Qt,oo.text,vM,Eo)||Hs(Ao,Eo);else if(hd==="line-center")for(const Ao of on.geometry){var fd;1<Ao.length&&(fd=function(Eo,To,ma,Oa,yu,hi){var Da=B0(ma,yu,hi),Vs=WE(ma,Oa)*hi;let hl=0;var qu=z0(Eo)/2;for(let rf=0;rf<Eo.length-1;rf++){var qs,fl,pd=Eo[rf],nf=Eo[rf+1],wb=pd.dist(nf);if(hl+wb>qu)return qs=(qu-hl)/wb,fl=ea.number(pd.x,nf.x,qs),qs=ea.number(pd.y,nf.y,qs),(fl=new Jh(fl,qs,nf.angleTo(pd),rf))._round(),!Da||GE(Eo,fl,Vs,Da,To)?fl:void 0;hl+=wb}}(Ao,dd,hn.vertical||oo,dn,24,Hl))&&Hs(Ao,fd)}else if(on.type==="Polygon")for(const Ao of Fy(on.geometry,0)){var Mp=yM(Ao,16);Hs(Ao[0],new Jh(Mp.x,Mp.y,0))}else if(on.type==="LineString")for(const Ao of on.geometry)Hs(Ao,new Jh(Ao[0].x,Ao[0].y,0));else if(on.type==="Point")for(const Ao of on.geometry)for(const Eo of Ao)Hs([Eo],new Jh(Eo.x,Eo.y,0))}(h.bucket,je,at,Kt,h.imageMap,x,qe,J,Lt,Vt,h.canonical)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},o.perspective=ro,o.pick=function(h,a){var s={};for(let m=0;m<a.length;m++){var d=a[m];d in h&&(s[d]=h[d])}return s},o.pointGeometry=c,o.polygonIntersectsPolygon=zn,o.potpack=Hu,o.readImageUsingVideoFrame=ce,o.register=Pn,o.removeProtocol=function(h){delete Be.REGISTERED_PROTOCOLS[h]},o.renderColorRamp=$a,o.renderStyleImage=function(h){var a=h.userImage;return!!(a&&a.render&&a.render())&&(h.data.replace(new Uint8Array(a.data.buffer)),!0)},o.rotate=function(h,x,R){var d=x[0],m=x[1],_=x[2],x=x[3],I=Math.sin(R),R=Math.cos(R);return h[0]=d*R+_*I,h[1]=m*R+x*I,h[2]=d*-I+_*R,h[3]=m*-I+x*R,h},o.rotateX=function(h,a,m){var d=Math.sin(m),m=Math.cos(m),_=a[4],x=a[5],I=a[6],R=a[7],U=a[8],H=a[9],J=a[10],he=a[11];return a!==h&&(h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[4]=_*m+U*d,h[5]=x*m+H*d,h[6]=I*m+J*d,h[7]=R*m+he*d,h[8]=U*m-_*d,h[9]=H*m-x*d,h[10]=J*m-I*d,h[11]=he*m-R*d,h},o.rotateZ=function(h,a,m){var d=Math.sin(m),m=Math.cos(m),_=a[0],x=a[1],I=a[2],R=a[3],U=a[4],H=a[5],J=a[6],he=a[7];return a!==h&&(h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]),h[0]=_*m+U*d,h[1]=x*m+H*d,h[2]=I*m+J*d,h[3]=R*m+he*d,h[4]=U*m-_*d,h[5]=H*m-x*d,h[6]=J*m-I*d,h[7]=he*m-R*d,h},o.rtlWorkerPlugin=Fu,o.sameOrigin=Ae,o.scale=function(h,a,_){var d=_[0],m=_[1],_=_[2];return h[0]=a[0]*d,h[1]=a[1]*d,h[2]=a[2]*d,h[3]=a[3]*d,h[4]=a[4]*m,h[5]=a[5]*m,h[6]=a[6]*m,h[7]=a[7]*m,h[8]=a[8]*_,h[9]=a[9]*_,h[10]=a[10]*_,h[11]=a[11]*_,h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},o.scale$1=function(h,a,s){return h[0]=a[0]*s,h[1]=a[1]*s,h[2]=a[2]*s,h},o.sphericalToCartesian=function([h,a,s]){return a=(a+=90)*(Math.PI/180),s*=Math.PI/180,{x:h*Math.cos(a)*Math.sin(s),y:h*Math.sin(a)*Math.sin(s),z:h*Math.cos(s)}},o.sqrLen=ii,o.sub=Si,o.toEvaluationFeature=Fn,o.transformMat3=function(h,_,s){var d=_[0],m=_[1],_=_[2];return h[0]=d*s[0]+m*s[3]+_*s[6],h[1]=d*s[1]+m*s[4]+_*s[7],h[2]=d*s[2]+m*s[5]+_*s[8],h},o.transformMat4=Fs,o.transformMat4$1=function(h,m,s){var d=m[0],m=m[1];return h[0]=s[0]*d+s[4]*m+s[12],h[1]=s[1]*d+s[5]*m+s[13],h},o.translate=function(h,a,je){var d,m,_,x,I,R,U,H,J,he,_e,Te,Ne=je[0],Ve=je[1],je=je[2];return a===h?(h[12]=a[0]*Ne+a[4]*Ve+a[8]*je+a[12],h[13]=a[1]*Ne+a[5]*Ve+a[9]*je+a[13],h[14]=a[2]*Ne+a[6]*Ve+a[10]*je+a[14],h[15]=a[3]*Ne+a[7]*Ve+a[11]*je+a[15]):(d=a[0],m=a[1],_=a[2],x=a[3],I=a[4],R=a[5],U=a[6],H=a[7],J=a[8],he=a[9],_e=a[10],Te=a[11],h[0]=d,h[1]=m,h[2]=_,h[3]=x,h[4]=I,h[5]=R,h[6]=U,h[7]=H,h[8]=J,h[9]=he,h[10]=_e,h[11]=Te,h[12]=d*Ne+I*Ve+J*je+a[12],h[13]=m*Ne+R*Ve+he*je+a[13],h[14]=_*Ne+U*Ve+_e*je+a[14],h[15]=x*Ne+H*Ve+Te*je+a[15]),h},o.unicodeBlockLookup=In,o.uniqueId=function(){return B++},o.v8Spec=ge,o.validateCustomStyleLayer=function(h){var a=[],s=h.id;return s===void 0&&a.push({message:`layers.${s}: missing required property "id"`}),h.render===void 0&&a.push({message:`layers.${s}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&a.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),a},o.validateLight=Qc,o.validateStyle=gs,o.vectorTile=Kh,o.warnOnce=K,o.wrap=N}),r("worker",0,function(o){class i{constructor(de){this.keyCache={},de&&this.replace(de)}replace(de){this._layerConfigs={},this._layers={},this.update(de,[])}update(de,xe){for(const ke of de){this._layerConfigs[ke.id]=ke;var Ee=this._layers[ke.id]=o.createStyleLayer(ke);Ee._featureFilter=o.createFilter(Ee.filter),this.keyCache[ke.id]&&delete this.keyCache[ke.id]}for(const ke of xe)delete this.keyCache[ke],delete this._layerConfigs[ke],delete this._layers[ke];this.familiesBySource={};for(const ke of o.groupByLayout(Object.values(this._layerConfigs),this.keyCache)){var Ye=ke.map(De=>this._layers[De.id]),lt=Ye[0];if(lt.visibility!=="none"){var Ce=lt.source||"";let De=this.familiesBySource[Ce];De=De||(this.familiesBySource[Ce]={}),Ce=lt.sourceLayer||"_geojsonTileLayer";let He=De[Ce];(He=He||(De[Ce]=[])).push(Ye)}}}}class l{constructor(de){var xe={},Ee=[];for(const Ht in de){var Ye=de[Ht],lt=xe[Ht]={};for(const Ft in Ye){var Ce,ke=Ye[+Ft];ke&&ke.bitmap.width!==0&&ke.bitmap.height!==0&&(Ce={x:0,y:0,w:ke.bitmap.width+2,h:ke.bitmap.height+2},Ee.push(Ce),lt[Ft]={rect:Ce,metrics:ke.metrics})}}var{w:De,h:He}=o.potpack(Ee),vt=new o.AlphaImage({width:De||1,height:He||1});for(const Ht in de){var Ct=de[Ht];for(const Ft in Ct){var Nt,jt=Ct[+Ft];jt&&jt.bitmap.width!==0&&jt.bitmap.height!==0&&(Nt=xe[Ht][Ft].rect,o.AlphaImage.copy(jt.bitmap,vt,{x:0,y:0},{x:Nt.x+1,y:Nt.y+1},jt.bitmap))}}this.image=vt,this.positions=xe}}o.register("GlyphAtlas",l);class c{constructor(de){this.tileID=new o.OverscaledTileID(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[]}parse(de,xe,Ee,Ye){return o.__awaiter(this,void 0,void 0,function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new o.CollisionBoxArray;var lt=new o.DictionaryCoder(Object.keys(de.layers).sort()),Ce=new o.FeatureIndex(this.tileID,this.promoteId),ke=(Ce.bucketLayerIDs=[],{}),De={featureIndex:Ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},He=xe.familiesBySource[this.source];for(const qn in He){var vt=de.layers[qn];if(vt){vt.version===1&&o.warnOnce(`Vector tile source "${this.source}" layer "${qn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);var Ct=lt.encode(qn),Nt=[];for(let to=0;to<vt.length;to++){var jt=vt.feature(to),Ht=Ce.getId(jt,qn);Nt.push({feature:jt,id:Ht,index:to,sourceLayerIndex:Ct})}for(const to of He[qn]){var Ft=to[0];Ft.source!==this.source&&o.warnOnce(`layer.source = ${Ft.source} does not equal this.source = `+this.source),Ft.minzoom&&this.zoom<Math.floor(Ft.minzoom)||Ft.maxzoom&&this.zoom>=Ft.maxzoom||Ft.visibility!=="none"&&(f(to,this.zoom,Ee),(ke[Ft.id]=Ft.createBucket({index:Ce.bucketLayerIDs.length,layers:to,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ct,sourceID:this.source})).populate(Nt,De,this.tileID.canonical),Ce.bucketLayerIDs.push(to.map(la=>la.id)))}}}var Wt=o.mapObject(De.glyphDependencies,qn=>Object.keys(qn).map(Number));this.inFlightDependencies.forEach(qn=>qn==null?void 0:qn.abort()),this.inFlightDependencies=[];let vn=Promise.resolve({});Object.keys(Wt).length&&(_n=new AbortController,this.inFlightDependencies.push(_n),vn=Ye.sendAsync({type:"GG",data:{stacks:Wt,source:this.source,tileID:this.tileID,type:"glyphs"}},_n)),Wt=Object.keys(De.iconDependencies);let gn=Promise.resolve({});Wt.length&&(_n=new AbortController,this.inFlightDependencies.push(_n),gn=Ye.sendAsync({type:"GI",data:{icons:Wt,source:this.source,tileID:this.tileID,type:"icons"}},_n));var _n,Wt=Object.keys(De.patternDependencies);let Dn=Promise.resolve({});Wt.length&&(_n=new AbortController,this.inFlightDependencies.push(_n),Dn=Ye.sendAsync({type:"GI",data:{icons:Wt,source:this.source,tileID:this.tileID,type:"patterns"}},_n));var[ft,dt,Wt]=yield Promise.all([vn,gn,Dn]),Mn=new l(ft),Bn=new o.ImageAtlas(dt,Wt);for(const qn in ke){var dr=ke[qn];dr instanceof o.SymbolBucket?(f(dr.layers,this.zoom,Ee),o.performSymbolLayout({bucket:dr,glyphMap:ft,glyphPositions:Mn.positions,imageMap:dt,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):dr.hasPattern&&(dr instanceof o.LineBucket||dr instanceof o.FillBucket||dr instanceof o.FillExtrusionBucket)&&(f(dr.layers,this.zoom,Ee),dr.addFeatures(De,this.tileID.canonical,Bn.patternPositions))}return this.status="done",{buckets:Object.values(ke).filter(qn=>!qn.isEmpty()),featureIndex:Ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Mn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?ft:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?Mn.positions:null}})}}function f(Le,de,xe){var Ee=new o.EvaluationParameters(de);for(const Ye of Le)Ye.recalculate(Ee,xe)}class p{constructor(de,xe,Ee){this.actor=de,this.layerIndex=xe,this.availableImages=Ee,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(de,xe){return o.__awaiter(this,void 0,void 0,function*(){var Ee=yield o.getArrayBuffer(de.request,xe);try{return{vectorTile:new o.vectorTile.VectorTile(new o.Protobuf(Ee.data)),rawData:Ee.data,cacheControl:Ee.cacheControl,expires:Ee.expires}}catch(Ye){Ee=new Uint8Array(Ee.data),Ee=Ee[0]===31&&Ee[1]===139;let lt=`Unable to parse the tile at ${de.request.url}, `;throw lt+=Ee?"please make sure the data is not gzipped and that you have configured the relevant header in the server":"got error: "+Ye.messge,new Error(lt)}})}loadTile(de){return o.__awaiter(this,void 0,void 0,function*(){var xe=de.uid,Ee=!!(de&&de.request&&de.request.collectResourceTiming)&&new o.RequestPerformance(de.request),Ye=new c(de),lt=(this.loading[xe]=Ye,new AbortController);Ye.abort=lt;try{var Ce=yield this.loadVectorTile(de,lt);if(delete this.loading[xe],!Ce)return null;var ke,De=Ce.rawData,He={},vt=(Ce.expires&&(He.expires=Ce.expires),Ce.cacheControl&&(He.cacheControl=Ce.cacheControl),{}),Ct=(Ee&&(ke=Ee.finish())&&(vt.resourceTiming=JSON.parse(JSON.stringify(ke))),Ye.vectorTile=Ce.vectorTile,Ye.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor));this.loaded[xe]=Ye,this.fetching[xe]={rawTileData:De,cacheControl:He,resourceTiming:vt};try{var Nt=yield Ct;return o.extend({rawTileData:De.slice(0)},Nt,He,vt)}finally{delete this.fetching[xe]}}catch(jt){throw delete this.loading[xe],Ye.status="done",this.loaded[xe]=Ye,jt}})}reloadTile(de){return o.__awaiter(this,void 0,void 0,function*(){var xe=de.uid;if(!this.loaded||!this.loaded[xe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");var Ee=this.loaded[xe];if(Ee.showCollisionBoxes=de.showCollisionBoxes,Ee.status==="parsing"){var Ye,lt,Ce,ke=yield Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor);return this.fetching[xe]?({rawTileData:Ye,cacheControl:lt,resourceTiming:Ce}=this.fetching[xe],delete this.fetching[xe],o.extend({rawTileData:Ye.slice(0)},ke,lt,Ce)):ke}if(Ee.status==="done"&&Ee.vectorTile)return Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(de){return o.__awaiter(this,void 0,void 0,function*(){var xe=this.loading,Ee=de.uid;xe&&xe[Ee]&&xe[Ee].abort&&(xe[Ee].abort.abort(),delete xe[Ee])})}removeTile(de){return o.__awaiter(this,void 0,void 0,function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]})}}class g{constructor(){this.loaded={}}loadTile(de){return o.__awaiter(this,void 0,void 0,function*(){var{uid:xe,encoding:Ee,rawImageData:Ye,redFactor:lt,greenFactor:Ce,blueFactor:ke,baseShift:De}=de,He=Ye.width+2,vt=Ye.height+2,He=o.isImageBitmap(Ye)?new o.RGBAImage({width:He,height:vt},yield o.getImageData(Ye,-1,-1,He,vt)):Ye,vt=new o.DEMData(xe,He,Ee,lt,Ce,ke,De);return this.loaded=this.loaded||{},this.loaded[xe]=vt})}removeTile(Ee){var xe=this.loaded,Ee=Ee.uid;xe&&xe[Ee]&&delete xe[Ee]}}function v(Le,de){if(Le.length!==0){w(Le[0],de);for(var xe=1;xe<Le.length;xe++)w(Le[xe],!de)}}function w(Le,de){for(var xe=0,Ee=0,Ye=0,lt=Le.length,Ce=lt-1;Ye<lt;Ce=Ye++){var ke=(Le[Ye][0]-Le[Ce][0])*(Le[Ce][1]+Le[Ye][1]),De=xe+ke;Ee+=Math.abs(xe)>=Math.abs(ke)?xe-De+ke:ke-De+xe,xe=De}0<=xe+Ee!=!!de&&Le.reverse()}var C=o.getDefaultExportFromCjs(function Le(de,xe){var Ee,Ye=de&&de.type;if(Ye==="FeatureCollection")for(Ee=0;Ee<de.features.length;Ee++)Le(de.features[Ee],xe);else if(Ye==="GeometryCollection")for(Ee=0;Ee<de.geometries.length;Ee++)Le(de.geometries[Ee],xe);else if(Ye==="Feature")Le(de.geometry,xe);else if(Ye==="Polygon")v(de.coordinates,xe);else if(Ye==="MultiPolygon")for(Ee=0;Ee<de.coordinates.length;Ee++)v(de.coordinates[Ee],xe);return de});const T=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;let k=class{constructor(Le){this._feature=Le,this.extent=o.EXTENT,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){var Le=[];for(const Ee of this._feature.geometry)Le.push([new o.Point(Ee[0],Ee[1])]);return Le}var de=[];for(const Ee of this._feature.geometry){var xe=[];for(const Ye of Ee)xe.push(new o.Point(Ye[0],Ye[1]));de.push(xe)}return de}toGeoJSON(Le,de,xe){return T.call(this,Le,de,xe)}},P=class{constructor(Le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=Le.length,this._features=Le}feature(Le){return new k(this._features[Le])}};var O={exports:{}},L=o.pointGeometry,D=o.vectorTile.VectorTileFeature,N=F;function F(Le,de){this.options=de||{},this.features=Le,this.length=Le.length}function B(Le,de){this.id=typeof Le.id=="number"?Le.id:void 0,this.type=Le.type,this.rawGeometry=Le.type===1?[Le.geometry]:Le.geometry,this.properties=Le.tags,this.extent=de||4096}F.prototype.feature=function(Le){return new B(this.features[Le],this.options.extent)},B.prototype.loadGeometry=function(){var Le=this.rawGeometry;this.geometry=[];for(var de=0;de<Le.length;de++){for(var xe=Le[de],Ee=[],Ye=0;Ye<xe.length;Ye++)Ee.push(new L(xe[Ye][0],xe[Ye][1]));this.geometry.push(Ee)}return this.geometry},B.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Le=this.geometry,de=1/0,xe=-1/0,Ee=1/0,Ye=-1/0,lt=0;lt<Le.length;lt++)for(var Ce=Le[lt],ke=0;ke<Ce.length;ke++)var De=Ce[ke],de=Math.min(de,De.x),xe=Math.max(xe,De.x),Ee=Math.min(Ee,De.y),Ye=Math.max(Ye,De.y);return[de,Ee,xe,Ye]},B.prototype.toGeoJSON=D.prototype.toGeoJSON;var V=o.pbf,G=N;function q(Le){var de,xe=new V,Ee=Le,Ye=xe;for(de in Ee.layers)Ye.writeMessage(3,z,Ee.layers[de]);return xe.finish()}function z(Le,de){de.writeVarintField(15,Le.version||1),de.writeStringField(1,Le.name||""),de.writeVarintField(5,Le.extent||4096);for(var xe={keys:[],values:[],keycache:{},valuecache:{}},Ee=0;Ee<Le.length;Ee++)xe.feature=Le.feature(Ee),de.writeMessage(2,$,xe);var Ye=xe.keys;for(Ee=0;Ee<Ye.length;Ee++)de.writeStringField(3,Ye[Ee]);var lt=xe.values;for(Ee=0;Ee<lt.length;Ee++)de.writeMessage(4,ue,lt[Ee])}function $(Le,de){var xe=Le.feature;xe.id!==void 0&&de.writeVarintField(1,xe.id),de.writeMessage(2,K,Le),de.writeVarintField(3,xe.type),de.writeMessage(4,oe,xe)}function K(Le,de){var xe,Ee=Le.feature,Ye=Le.keys,lt=Le.values,Ce=Le.keycache,ke=Le.valuecache;for(xe in Ee.properties){var De,He=Ee.properties[xe],vt=Ce[xe];He!==null&&(vt===void 0&&(Ye.push(xe),vt=Ye.length-1,Ce[xe]=vt),de.writeVarint(vt),(De=ke[vt=(vt=typeof He)+":"+(He=vt!="string"&&vt!="boolean"&&vt!="number"?JSON.stringify(He):He)])===void 0&&(lt.push(He),De=lt.length-1,ke[vt]=De),de.writeVarint(De))}}function te(Le,de){return(de<<3)+(7&Le)}function re(Le){return Le<<1^Le>>31}function oe(Le,de){for(var xe=Le.loadGeometry(),Ee=Le.type,Ye=0,lt=0,Ce=xe.length,ke=0;ke<Ce;ke++){for(var De=xe[ke],He=1,vt=(Ee===1&&(He=De.length),de.writeVarint(te(1,He)),Ee===3?De.length-1:De.length),Ct=0;Ct<vt;Ct++){Ct===1&&Ee!==1&&de.writeVarint(te(2,vt-1));var Nt=De[Ct].x-Ye,jt=De[Ct].y-lt;de.writeVarint(re(Nt)),de.writeVarint(re(jt)),Ye+=Nt,lt+=jt}Ee===3&&de.writeVarint(15)}}function ue(Le,de){var xe=typeof Le;xe=="string"?de.writeStringField(1,Le):xe=="boolean"?de.writeBooleanField(7,Le):xe=="number"&&(Le%1!=0?de.writeDoubleField(3,Le):Le<0?de.writeSVarintField(6,Le):de.writeVarintField(5,Le))}O.exports=q,O.exports.fromVectorTileJs=q,O.exports.fromGeojsonVt=function(Le,de){de=de||{};var xe,Ee={};for(xe in Le)Ee[xe]=new G(Le[xe].features,de),Ee[xe].name=xe,Ee[xe].version=de.version,Ee[xe].extent=de.extent;return q({layers:Ee})},O.exports.GeoJSONWrapper=G;var Q,ce=o.getDefaultExportFromCjs(O.exports);const ae={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Le=>Le},fe=Math.fround||(Q=new Float32Array(1),Le=>(Q[0]=+Le,Q[0])),le=3,pe=5,Fe=6;class Be{constructor(de){this.options=Object.assign(Object.create(ae),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){var{log:xe,minZoom:Ee,maxZoom:Ye}=this.options,lt=(xe&&console.time("total time"),`prepare ${de.length} points`),Ce=(xe&&console.time(lt),this.points=de,[]);for(let Ct=0;Ct<de.length;Ct++){var ke,De=de[Ct];De.geometry&&([De,ke]=De.geometry.coordinates,De=fe(ot(De)),ke=fe(ut(ke)),Ce.push(De,ke,1/0,Ct,-1,1),this.options.reduce)&&Ce.push(0)}let He=this.trees[Ye+1]=this._createTree(Ce);xe&&console.timeEnd(lt);for(let Ct=Ye;Ct>=Ee;Ct--){var vt=+Date.now();He=this.trees[Ct]=this._createTree(this._cluster(He,Ct)),xe&&console.log("z%d: %d clusters in %dms",Ct,He.numItems,+Date.now()-vt)}return xe&&console.timeEnd("total time"),this}getClusters(ke,xe){let Ee=((ke[0]+180)%360+360)%360-180;var Ye=Math.max(-90,Math.min(90,ke[1]));let lt=ke[2]===180?180:((ke[2]+180)%360+360)%360-180;var Ce=Math.max(-90,Math.min(90,ke[3]));if(360<=ke[2]-ke[0])Ee=-180,lt=180;else if(Ee>lt)return ke=this.getClusters([Ee,Ye,180,Ce],xe),De=this.getClusters([-180,Ye,lt,Ce],xe),ke.concat(De);var ke=this.trees[this._limitZoom(xe)],De=ke.range(ot(Ee),ut(Ce),ot(lt),ut(Ye)),He=ke.data,vt=[];for(const Nt of De){var Ct=this.stride*Nt;vt.push(1<He[Ct+pe]?Ze(He,Ct,this.clusterProps):this.points[He[Ct+le]])}return vt}getChildren(de){var ke=this._getOriginId(de),lt=this._getOriginZoom(de),xe="No cluster with the specified id.",Ee=this.trees[lt];if(!Ee)throw new Error(xe);var Ye=Ee.data;if(ke*this.stride>=Ye.length)throw new Error(xe);var lt=this.options.radius/(this.options.extent*Math.pow(2,lt-1)),Ce=Ye[ke*this.stride],ke=Ye[ke*this.stride+1],De=[];for(const vt of Ee.within(Ce,ke,lt)){var He=vt*this.stride;Ye[4+He]===de&&De.push(1<Ye[He+pe]?Ze(Ye,He,this.clusterProps):this.points[Ye[He+le]])}if(De.length===0)throw new Error(xe);return De}getLeaves(de,xe,Ee){var Ye=[];return this._appendLeaves(Ye,de,xe=xe||10,Ee=Ee||0,0),Ye}getTile(lt,xe,Ee){var Ye=this.trees[this._limitZoom(lt)],lt=Math.pow(2,lt),{extent:ke,radius:Ce}=this.options,Ce=Ce/ke,ke=(Ee-Ce)/lt,De=(Ee+1+Ce)/lt,He={features:[]};return this._addTileFeatures(Ye.range((xe-Ce)/lt,ke,(xe+1+Ce)/lt,De),Ye.data,xe,Ee,lt,He),xe===0&&this._addTileFeatures(Ye.range(1-Ce/lt,ke,1,De),Ye.data,lt,Ee,lt,He),xe===lt-1&&this._addTileFeatures(Ye.range(0,ke,Ce/lt,De),Ye.data,-1,Ee,lt,He),He.features.length?He:null}getClusterExpansionZoom(de){let xe=this._getOriginZoom(de)-1;for(;xe<=this.options.maxZoom;){var Ee=this.getChildren(de);if(xe++,Ee.length!==1)break;de=Ee[0].properties.cluster_id}return xe}_appendLeaves(de,xe,Ee,Ye,lt){for(const ke of this.getChildren(xe)){var Ce=ke.properties;if(Ce&&Ce.cluster?lt+Ce.point_count<=Ye?lt+=Ce.point_count:lt=this._appendLeaves(de,Ce.cluster_id,Ee,Ye,lt):lt<Ye?lt++:de.push(ke),de.length===Ee)break}return lt}_createTree(de){var xe=new o.KDBush(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ee=0;Ee<de.length;Ee+=this.stride)xe.add(de[Ee],de[Ee+1]);return xe.finish(),xe.data=de,xe}_addTileFeatures(de,xe,Ee,Ye,lt,Ce){for(const Ct of de){var ke,De=Ct*this.stride,He=1<xe[De+pe];let Nt,jt,Ht;Ht=He?(Nt=it(xe,De,this.clusterProps),jt=xe[De],xe[1+De]):(vt=this.points[xe[De+le]],[vt,ke]=(Nt=vt.properties,vt.geometry.coordinates),jt=ot(vt),ut(ke));var vt={type:1,geometry:[[Math.round(this.options.extent*(jt*lt-Ee)),Math.round(this.options.extent*(Ht*lt-Ye))]],tags:Nt};let Ft;(Ft=He||this.options.generateId?xe[De+le]:this.points[xe[De+le]].id)!==void 0&&(vt.id=Ft),Ce.features.push(vt)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,xe){var{radius:Ee,extent:Ye,reduce:lt,minPoints:Ce}=this.options,ke=Ee/(Ye*Math.pow(2,xe)),De=de.data,He=[],vt=this.stride;for(let ft=0;ft<De.length;ft+=vt)if(!(De[ft+2]<=xe)){De[ft+2]=xe;var Ct=De[ft],Nt=De[ft+1],jt=de.within(De[ft],De[ft+1],ke),Ht=De[ft+pe];let dt=Ht;for(const Wt of jt){var Ft=Wt*vt;De[2+Ft]>xe&&(dt+=De[Ft+pe])}if(dt>Ht&&dt>=Ce){let Wt=Ct*Ht,Mn=Nt*Ht,Bn,dr=-1;var vn=((ft/vt|0)<<5)+(xe+1)+this.points.length;for(const qn of jt){var gn,_n=qn*vt;De[2+_n]<=xe||(De[2+_n]=xe,gn=De[_n+pe],Wt+=De[_n]*gn,Mn+=De[1+_n]*gn,De[4+_n]=vn,lt&&(Bn||(Bn=this._map(De,ft,!0),dr=this.clusterProps.length,this.clusterProps.push(Bn)),lt(Bn,this._map(De,_n))))}De[ft+4]=vn,He.push(Wt/dt,Mn/dt,1/0,vn,-1,dt),lt&&He.push(dr)}else{for(let Wt=0;Wt<vt;Wt++)He.push(De[ft+Wt]);if(1<dt)for(const Wt of jt){var Dn=Wt*vt;if(!(De[2+Dn]<=xe)){De[2+Dn]=xe;for(let Mn=0;Mn<vt;Mn++)He.push(De[Dn+Mn])}}}}return He}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,xe,Ee){var Ye;return 1<de[xe+pe]?(Ye=this.clusterProps[de[xe+Fe]],Ee?Object.assign({},Ye):Ye):(Ye=this.points[de[xe+le]].properties,de=this.options.map(Ye),Ee&&de===Ye?Object.assign({},de):de)}}function Ze(Le,de,xe){return{type:"Feature",id:Le[de+le],properties:it(Le,de,xe),geometry:{type:"Point",coordinates:[360*(Le[de]-.5),function(Ee){return Ee=(180-360*Ee)*Math.PI/180,360*Math.atan(Math.exp(Ee))/Math.PI-90}(Le[de+1])]}}}function it(Le,de,Ce){var Ee=Le[de+pe],Ye=1e4<=Ee?Math.round(Ee/1e3)+"k":1e3<=Ee?Math.round(Ee/100)/10+"k":Ee,lt=Le[de+Fe],Ce=lt===-1?{}:Object.assign({},Ce[lt]);return Object.assign(Ce,{cluster:!0,cluster_id:Le[de+le],point_count:Ee,point_count_abbreviated:Ye})}function ot(Le){return Le/360+.5}function ut(Le){return Le=Math.sin(Le*Math.PI/180),Le=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI,Le<0?0:1<Le?1:Le}function st(Le,de,xe,Ee){for(var Ye,lt=Ee,Ce=xe-de>>1,ke=xe-de,De=Le[de],He=Le[de+1],vt=Le[xe],Ct=Le[xe+1],Nt=de+3;Nt<xe;Nt+=3){var jt=function(Ht,Ft,vn,gn,_n,Dn){var ft=_n-vn,dt=Dn-gn;{var Wt;ft==0&&dt==0||(1<(Wt=((Ht-vn)*ft+(Ft-gn)*dt)/(ft*ft+dt*dt))?(vn=_n,gn=Dn):0<Wt&&(vn+=ft*Wt,gn+=dt*Wt))}return(ft=Ht-vn)*ft+(dt=Ft-gn)*dt}(Le[Nt],Le[Nt+1],De,He,vt,Ct);lt<jt?(Ye=Nt,lt=jt):jt===lt&&(jt=Math.abs(Nt-Ce))<ke&&(Ye=Nt,ke=jt)}Ee<lt&&(3<Ye-de&&st(Le,de,Ye,Ee),Le[Ye+2]=lt,3<xe-Ye)&&st(Le,Ye,xe,Ee)}function ct(Ye,ke,xe,Ee){var Ye={id:Ye===void 0?null:Ye,type:ke,geometry:xe,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},lt=Ye,Ce=lt.geometry,ke=lt.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")Ae(lt,Ce);else if(ke==="Polygon"||ke==="MultiLineString")for(var De=0;De<Ce.length;De++)Ae(lt,Ce[De]);else if(ke==="MultiPolygon")for(De=0;De<Ce.length;De++)for(var He=0;He<Ce[De].length;He++)Ae(lt,Ce[De][He]);return Ye}function Ae(Le,de){for(var xe=0;xe<de.length;xe+=3)Le.minX=Math.min(Le.minX,de[xe]),Le.minY=Math.min(Le.minY,de[xe+1]),Le.maxX=Math.max(Le.maxX,de[xe]),Le.maxY=Math.max(Le.maxY,de[xe+1])}function Z(Le,de,xe,Ee){if(de.geometry){var Ye=de.geometry.coordinates,lt=de.geometry.type,Ce=Math.pow(xe.tolerance/((1<<xe.maxZoom)*xe.extent),2),ke=[],De=de.id;if(xe.promoteId?De=de.properties[xe.promoteId]:xe.generateId&&(De=Ee||0),lt==="Point")ne(Ye,ke);else if(lt==="MultiPoint")for(var He=0;He<Ye.length;He++)ne(Ye[He],ke);else if(lt==="LineString")ee(Ye,ke,Ce,!1);else if(lt==="MultiLineString"){if(xe.lineMetrics){for(He=0;He<Ye.length;He++)ee(Ye[He],ke=[],Ce,!1),Le.push(ct(De,"LineString",ke,de.properties));return}ye(Ye,ke,Ce,!1)}else if(lt==="Polygon")ye(Ye,ke,Ce,!0);else{if(lt!=="MultiPolygon"){if(lt!=="GeometryCollection")throw new Error("Input data is not a valid GeoJSON object.");for(He=0;He<de.geometry.geometries.length;He++)Z(Le,{id:De,geometry:de.geometry.geometries[He],properties:de.properties},xe,Ee);return}for(He=0;He<Ye.length;He++){var vt=[];ye(Ye[He],vt,Ce,!0),ke.push(vt)}}Le.push(ct(De,lt,ke,de.properties))}}function ne(Le,de){de.push(Ie(Le[0])),de.push(ge(Le[1])),de.push(0)}function ee(Le,de,xe,Ee){for(var Ye,lt,Ce=0,ke=0;ke<Le.length;ke++){var De=Ie(Le[ke][0]),He=ge(Le[ke][1]);de.push(De),de.push(He),de.push(0),0<ke&&(Ce+=Ee?(Ye*He-De*lt)/2:Math.sqrt(Math.pow(De-Ye,2)+Math.pow(He-lt,2))),Ye=De,lt=He}var vt=de.length-3;de[2]=1,st(de,0,vt,xe),de[2+vt]=1,de.size=Math.abs(Ce),de.start=0,de.end=de.size}function ye(Le,de,xe,Ee){for(var Ye=0;Ye<Le.length;Ye++){var lt=[];ee(Le[Ye],lt,xe,Ee),de.push(lt)}}function Ie(Le){return Le/360+.5}function ge(Le){return Le=Math.sin(Le*Math.PI/180),Le=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI,Le<0?0:1<Le?1:Le}function $e(Le,de,xe,Ee,Ye,lt,Ce,ke){if(Ee/=de,(xe/=de)<=lt&&Ce<Ee)return Le;if(Ce<xe||Ee<=lt)return null;for(var De=[],He=0;He<Le.length;He++){var vt=Le[He],Ct=vt.geometry,Nt=vt.type,jt=Ye===0?vt.minX:vt.minY,Ht=Ye===0?vt.maxX:vt.maxY;if(xe<=jt&&Ht<Ee)De.push(vt);else if(!(Ht<xe||Ee<=jt)){var Ft=[];if(Nt==="Point"||Nt==="MultiPoint"){Wt=dt=ft=Dn=_n=gn=vn=void 0;for(var vn=Ct,gn=Ft,_n=xe,Dn=Ee,ft=Ye,dt=0;dt<vn.length;dt+=3){var Wt=vn[dt+ft];_n<=Wt&&Wt<=Dn&&(gn.push(vn[dt]),gn.push(vn[dt+1]),gn.push(vn[dt+2]))}}else if(Nt==="LineString")nt(Ct,Ft,xe,Ee,Ye,!1,ke.lineMetrics);else if(Nt==="MultiLineString")wt(Ct,Ft,xe,Ee,Ye,!1);else if(Nt==="Polygon")wt(Ct,Ft,xe,Ee,Ye,!0);else if(Nt==="MultiPolygon")for(var Mn=0;Mn<Ct.length;Mn++){var Bn=[];wt(Ct[Mn],Bn,xe,Ee,Ye,!0),Bn.length&&Ft.push(Bn)}if(Ft.length)if(ke.lineMetrics&&Nt==="LineString")for(Mn=0;Mn<Ft.length;Mn++)De.push(ct(vt.id,Nt,Ft[Mn],vt.tags));else Nt!=="LineString"&&Nt!=="MultiLineString"||(Ft.length===1?(Nt="LineString",Ft=Ft[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=Ft.length===3?"Point":"MultiPoint"),De.push(ct(vt.id,Nt,Ft,vt.tags))}}return De.length?De:null}function nt(Le,de,xe,Ee,Ye,lt,Ce){for(var ke,De,He=pt(Le),vt=Ye===0?zt:Pt,Ct=Le.start,Nt=0;Nt<Le.length-3;Nt+=3){var Dn=Le[Nt],ft=Le[Nt+1],dt=Le[Nt+2],jt=Le[Nt+3],Ht=Le[Nt+4],Ft=Ye===0?Dn:ft,vn=Ye===0?jt:Ht,gn=!1;Ce&&(ke=Math.sqrt(Math.pow(Dn-jt,2)+Math.pow(ft-Ht,2))),Ft<xe?xe<vn&&(De=vt(He,Dn,ft,jt,Ht,xe),Ce)&&(He.start=Ct+ke*De):Ee<Ft?vn<Ee&&(De=vt(He,Dn,ft,jt,Ht,Ee),Ce)&&(He.start=Ct+ke*De):mt(He,Dn,ft,dt),vn<xe&&xe<=Ft&&(De=vt(He,Dn,ft,jt,Ht,xe),gn=!0),Ee<vn&&Ft<=Ee&&(De=vt(He,Dn,ft,jt,Ht,Ee),gn=!0),!lt&&gn&&(Ce&&(He.end=Ct+ke*De),de.push(He),He=pt(Le)),Ce&&(Ct+=ke)}var _n=Le.length-3,Dn=Le[_n],ft=Le[1+_n],dt=Le[2+_n];xe<=(Ft=Ye===0?Dn:ft)&&Ft<=Ee&&mt(He,Dn,ft,dt),_n=He.length-3,lt&&3<=_n&&(He[_n]!==He[0]||He[1+_n]!==He[1])&&mt(He,He[0],He[1],He[2]),He.length&&de.push(He)}function pt(Le){var de=[];return de.size=Le.size,de.start=Le.start,de.end=Le.end,de}function wt(Le,de,xe,Ee,Ye,lt){for(var Ce=0;Ce<Le.length;Ce++)nt(Le[Ce],de,xe,Ee,Ye,lt,!1)}function mt(Le,de,xe,Ee){Le.push(de),Le.push(xe),Le.push(Ee)}function zt(Le,de,xe,Ee,Ye,lt){return Ee=(lt-de)/(Ee-de),Le.push(lt),Le.push(xe+(Ye-xe)*Ee),Le.push(1),Ee}function Pt(Le,de,xe,Ee,Ye,lt){return Ye=(lt-xe)/(Ye-xe),Le.push(de+(Ee-de)*Ye),Le.push(lt),Le.push(1),Ye}function Zt(Le,de){for(var xe=[],Ee=0;Ee<Le.length;Ee++){var Ye=Le[Ee],lt=Ye.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Ce=We(Ye.geometry,de);else if(lt==="MultiLineString"||lt==="Polygon")for(var Ce=[],ke=0;ke<Ye.geometry.length;ke++)Ce.push(We(Ye.geometry[ke],de));else if(lt==="MultiPolygon")for(Ce=[],ke=0;ke<Ye.geometry.length;ke++){for(var De=[],He=0;He<Ye.geometry[ke].length;He++)De.push(We(Ye.geometry[ke][He],de));Ce.push(De)}xe.push(ct(Ye.id,lt,Ce,Ye.tags))}return xe}function We(Le,de){var xe=[];xe.size=Le.size,Le.start!==void 0&&(xe.start=Le.start,xe.end=Le.end);for(var Ee=0;Ee<Le.length;Ee+=3)xe.push(Le[Ee]+de,Le[Ee+1],Le[Ee+2]);return xe}function Ge(Le,de){if(!Le.transformed){for(var xe,Ee=1<<Le.z,Ye=Le.x,lt=Le.y,Ce=0;Ce<Le.features.length;Ce++){var ke=Le.features[Ce],De=ke.geometry,He=ke.type;if(ke.geometry=[],He===1)for(xe=0;xe<De.length;xe+=2)ke.geometry.push(Rt(De[xe],De[xe+1],de,Ee,Ye,lt));else for(xe=0;xe<De.length;xe++){for(var vt=[],Ct=0;Ct<De[xe].length;Ct+=2)vt.push(Rt(De[xe][Ct],De[xe][Ct+1],de,Ee,Ye,lt));ke.geometry.push(vt)}}Le.transformed=!0}return Le}function Rt(Le,de,xe,Ee,Ye,lt){return[Math.round(xe*(Le*Ee-Ye)),Math.round(xe*(de*Ee-lt))]}function Dt(Le,de,xe,Ee,Ye){for(var lt=de===Ye.maxZoom?0:Ye.tolerance/((1<<de)*Ye.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:xe,y:Ee,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<Le.length;ke++){Ce.numFeatures++,_n=gn=vn=Ft=Ht=jt=Nt=Ct=Dn=vt=He=De=void 0;var De=Ce,He=Le[ke],vt=lt,Dn=Ye,Ct=He.geometry,Nt=He.type,jt=[];if(Nt==="Point"||Nt==="MultiPoint")for(var Ht=0;Ht<Ct.length;Ht+=3)jt.push(Ct[Ht]),jt.push(Ct[Ht+1]),De.numPoints++,De.numSimplified++;else if(Nt==="LineString")qt(jt,Ct,De,vt,!1,!1);else if(Nt==="MultiLineString"||Nt==="Polygon")for(Ht=0;Ht<Ct.length;Ht++)qt(jt,Ct[Ht],De,vt,Nt==="Polygon",Ht===0);else if(Nt==="MultiPolygon")for(var Ft=0;Ft<Ct.length;Ft++){var vn=Ct[Ft];for(Ht=0;Ht<vn.length;Ht++)qt(jt,vn[Ht],De,vt,!0,Ht===0)}if(jt.length){var gn=He.tags||null;if(Nt==="LineString"&&Dn.lineMetrics){for(var _n in gn={},He.tags)gn[_n]=He.tags[_n];gn.mapbox_clip_start=Ct.start/Ct.size,gn.mapbox_clip_end=Ct.end/Ct.size}Dn={geometry:jt,type:Nt==="Polygon"||Nt==="MultiPolygon"?3:Nt==="LineString"||Nt==="MultiLineString"?2:1,tags:gn},He.id!==null&&(Dn.id=He.id),De.features.push(Dn)}var Dn=Le[ke].minX,ft=Le[ke].minY,dt=Le[ke].maxX,Wt=Le[ke].maxY;Dn<Ce.minX&&(Ce.minX=Dn),ft<Ce.minY&&(Ce.minY=ft),Ce.maxX<dt&&(Ce.maxX=dt),Ce.maxY<Wt&&(Ce.maxY=Wt)}return Ce}function qt(Le,de,xe,Ee,Ye,lt){var Ce=Ee*Ee;if(0<Ee&&de.size<(Ye?Ce:Ee))xe.numPoints+=de.length/3;else{for(var ke=[],De=0;De<de.length;De+=3)(Ee===0||de[De+2]>Ce)&&(xe.numSimplified++,ke.push(de[De]),ke.push(de[De+1])),xe.numPoints++;if(Ye){for(var He=ke,Ye=lt,vt=0,Ct=0,Nt=He.length,jt=Nt-2;Ct<Nt;jt=Ct,Ct+=2)vt+=(He[Ct]-He[jt])*(He[Ct+1]+He[jt+1]);if(0<vt===Ye)for(Ct=0,Nt=He.length;Ct<Nt/2;Ct+=2){var Ht=He[Ct],Ft=He[Ct+1];He[Ct]=He[Nt-2-Ct],He[Ct+1]=He[Nt-1-Ct],He[Nt-2-Ct]=Ht,He[Nt-1-Ct]=Ft}}Le.push(ke)}}function Yt(Le,de){return new xt(Le,de)}function xt(De,de){var xe=(de=this.options=function(He,vt){for(var Ct in vt)He[Ct]=vt[Ct];return He}(Object.create(this.options),de)).debug;if(xe&&console.time("preprocess data"),de.maxZoom<0||24<de.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(de.promoteId&&de.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee,Ye,lt,Ce,ke,De=function(He,vt){var Ct=[];if(He.type==="FeatureCollection")for(var Nt=0;Nt<He.features.length;Nt++)Z(Ct,He.features[Nt],vt,Nt);else He.type==="Feature"?Z(Ct,He,vt):Z(Ct,{geometry:He},vt);return Ct}(De,de);this.tiles={},this.tileCoords=[],xe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",de.indexMaxZoom,de.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=De,Ye=(de=de).buffer/de.extent,Ce=$e(lt=Ee,1,-1-Ye,Ye,0,-1,2,de),ke=$e(Ee,1,1-Ye,2+Ye,0,-1,2,de),(De=lt=(Ce||ke)&&(lt=$e(Ee,1,-Ye,1+Ye,0,-1,2,de)||[],Ce&&(lt=Zt(Ce,1).concat(lt)),ke)?lt.concat(Zt(ke,-1)):lt).length&&this.splitTile(De,0,0,0),xe&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Et(Le,de,xe){return 32*((1<<Le)*xe+de)+Le}function St(Le,de){return de?Le.properties[de]:Le.id}function kt(Le,de){if(Le==null)return 1;if(Le.type==="Feature")return St(Le,de)!=null;if(Le.type==="FeatureCollection"){var xe=new Set;for(const Ye of Le.features){var Ee=St(Ye,de);if(Ee==null||xe.has(Ee))return;xe.add(Ee)}return 1}}function cn(Le,de){var xe=new Map;if(Le!=null)if(Le.type==="Feature")xe.set(St(Le,de),Le);else for(const Ee of Le.features)xe.set(St(Ee,de),Ee);return xe}function an(Le,de,xe){if(de.removeAll&&Le.clear(),de.remove)for(const De of de.remove)Le.delete(De);if(de.add)for(const De of de.add){var Ee=St(De,xe);Ee!=null&&Le.set(Ee,De)}if(de.update)for(const De of de.update){let He=Le.get(De.id);if(He!=null){var Ye=De.newGeometry||De.removeAllProperties,lt=!De.removeAllProperties&&(0<((lt=De.removeProperties)==null?void 0:lt.length)||0<((lt=De.addOrUpdateProperties)==null?void 0:lt.length));if((Ye||lt)&&(He=Object.assign({},He),Le.set(De.id,He),lt)&&(He.properties=Object.assign({},He.properties)),De.newGeometry&&(He.geometry=De.newGeometry),De.removeAllProperties)He.properties={};else if(0<((Ye=De.removeProperties)==null?void 0:Ye.length))for(const vt of De.removeProperties)Object.prototype.hasOwnProperty.call(He.properties,vt)&&delete He.properties[vt];if(0<((Ye=De.addOrUpdateProperties)==null?void 0:Ye.length))for(var{key:Ce,value:ke}of De.addOrUpdateProperties)He.properties[Ce]=ke}}}xt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},xt.prototype.splitTile=function(Le,de,xe,Ee,Ye,lt,Ce){for(var ke=[Le,de,xe,Ee],De=this.options,He=De.debug;ke.length;){Ee=ke.pop(),xe=ke.pop(),de=ke.pop(),Le=ke.pop();var vt,Ct,Nt,jt,Ht,Ft,vn,gn,_n,Dn=1<<de,ft=Et(de,xe,Ee),dt=this.tiles[ft];if(dt||(1<He&&console.time("creation"),dt=this.tiles[ft]=Dt(Le,de,xe,Ee,De),this.tileCoords.push({z:de,x:xe,y:Ee}),He&&(1<He&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",de,xe,Ee,dt.numFeatures,dt.numPoints,dt.numSimplified),console.timeEnd("creation")),this.stats[ft="z"+de]=(this.stats[ft]||0)+1,this.total++)),dt.source=Le,Ye){if(de===De.maxZoom||de===Ye)continue;var ft=1<<Ye-de;if(xe!==Math.floor(lt/ft)||Ee!==Math.floor(Ce/ft))continue}else if(de===De.indexMaxZoom||dt.numPoints<=De.indexMaxPoints)continue;dt.source=null,Le.length!==0&&(1<He&&console.time("clipping"),vt=.5-(ft=.5*De.buffer/De.extent),Nt=1+ft,vn=jt=Ht=Ft=null,gn=$e(Le,Dn,xe-ft,xe+(Ct=.5+ft),0,dt.minX,dt.maxX,De),_n=$e(Le,Dn,xe+vt,xe+Nt,0,dt.minX,dt.maxX,De),Le=null,gn&&(vn=$e(gn,Dn,Ee-ft,Ee+Ct,1,dt.minY,dt.maxY,De),jt=$e(gn,Dn,Ee+vt,Ee+Nt,1,dt.minY,dt.maxY,De),gn=null),_n&&(Ht=$e(_n,Dn,Ee-ft,Ee+Ct,1,dt.minY,dt.maxY,De),Ft=$e(_n,Dn,Ee+vt,Ee+Nt,1,dt.minY,dt.maxY,De),_n=null),1<He&&console.timeEnd("clipping"),ke.push(vn||[],de+1,2*xe,2*Ee),ke.push(jt||[],de+1,2*xe,2*Ee+1),ke.push(Ht||[],de+1,2*xe+1,2*Ee),ke.push(Ft||[],de+1,2*xe+1,2*Ee+1))}},xt.prototype.getTile=function(Le,de,xe){var Ye=this.options,Ee=Ye.extent,Ye=Ye.debug;if(Le<0||24<Le)return null;var lt=1<<Le,lt=Et(Le,de=(de%lt+lt)%lt,xe);if(this.tiles[lt])return Ge(this.tiles[lt],Ee);1<Ye&&console.log("drilling down to z%d-%d-%d",Le,de,xe);for(var Ce,ke=Le,De=de,He=xe;!Ce&&0<ke;)ke--,De=Math.floor(De/2),He=Math.floor(He/2),Ce=this.tiles[Et(ke,De,He)];return Ce&&Ce.source&&(1<Ye&&console.log("found parent tile z%d-%d-%d",ke,De,He),1<Ye&&console.time("drilling down"),this.splitTile(Ce.source,ke,De,He,Le,de,xe),1<Ye&&console.timeEnd("drilling down"),this.tiles[lt])?Ge(this.tiles[lt],Ee):null};class Qn extends p{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(de,xe){return o.__awaiter(this,void 0,void 0,function*(){var Ee=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");if(Ee=this._geoJSONIndex.getTile(Ee.z,Ee.x,Ee.y),!Ee)return null;Ee=new P(Ee.features);let Ye=ce(Ee);return{vectorTile:Ee,rawData:(Ye=Ye.byteOffset===0&&Ye.byteLength===Ye.buffer.byteLength?Ye:new Uint8Array(Ye)).buffer}})}loadData(de){return o.__awaiter(this,void 0,void 0,function*(){(xe=this._pendingRequest)!=null&&xe.abort();var xe=!!(de&&de.request&&de.request.collectResourceTiming)&&new o.RequestPerformance(de.request);this._pendingRequest=new AbortController;try{let Ce=yield this.loadGeoJSON(de,this._pendingRequest);if(delete this._pendingRequest,typeof Ce!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(C(Ce,!0),de.filter){const ke=o.createExpression(de.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ke.result==="error")throw new Error(ke.value.map(De=>De.key+": "+De.message).join(", "));var Ee=Ce.features.filter(De=>ke.value.evaluate({zoom:0},De));Ce={type:"FeatureCollection",features:Ee}}this._geoJSONIndex=de.cluster?new Be(tr(de)).load(Ce.features):Yt(Ce,de.geojsonVtOptions),this.loaded={};var Ye,lt={};return xe&&(Ye=xe.finish())&&(lt.resourceTiming={},lt.resourceTiming[de.source]=JSON.parse(JSON.stringify(Ye))),lt}catch(Ce){if(delete this._pendingRequest,o.isAbortError(Ce))return{abandoned:!0};throw Ce}})}reloadTile(de){var xe=this.loaded,Ee=de.uid;return xe&&xe[Ee]?super.reloadTile(de):this.loadTile(de)}loadGeoJSON(de,xe){return o.__awaiter(this,void 0,void 0,function*(){var Ee,Ye=de.promoteId;if(de.request)return Ee=yield o.getJSON(de.request,xe),this._dataUpdateable=kt(Ee.data,Ye)?cn(Ee.data,Ye):void 0,Ee.data;if(typeof de.data=="string")try{var lt=JSON.parse(de.data);return this._dataUpdateable=kt(lt,Ye)?cn(lt,Ye):void 0,lt}catch{throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`)}if(!de.dataDiff)throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);if(this._dataUpdateable)return an(this._dataUpdateable,de.dataDiff,Ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())};throw new Error("Cannot update existing geojson data in "+de.source)})}removeSource(de){return o.__awaiter(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}function tr({superclusterOptions:Le,clusterProperties:de}){if(de&&Le){const Ye={},lt={},Ce={accumulated:null,zoom:0},ke={properties:null},De=Object.keys(de);for(const He of De){var[Ee,xe]=de[He],xe=o.createExpression(xe),Ee=o.createExpression(typeof Ee=="string"?[Ee,["accumulated"],["get",He]]:Ee);Ye[He]=xe.value,lt[He]=Ee.value}Le.map=He=>{ke.properties=He;var vt={};for(const Ct of De)vt[Ct]=Ye[Ct].evaluate(Ce,ke);return vt},Le.reduce=(He,vt)=>{ke.properties=vt;for(const Ct of De)Ce.accumulated=He[Ct],He[Ct]=lt[Ct].evaluate(Ce,ke)}}return Le}class lr{constructor(de){this.self=de,this.actor=new o.Actor(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(xe,Ee)=>{if(this.externalWorkerSourceTypes[xe])throw new Error(`Worker source with name "${xe}" already registered.`);this.externalWorkerSourceTypes[xe]=Ee},this.self.addProtocol=o.addProtocol,this.self.removeProtocol=o.removeProtocol,this.self.registerRTLTextPlugin=xe=>{if(o.rtlWorkerPlugin.isParsed())throw new Error("RTL text plugin already registered.");o.rtlWorkerPlugin.setMethods(xe)},this.actor.registerMessageHandler("LDT",(xe,Ee)=>this._getDEMWorkerSource(xe,Ee.source).loadTile(Ee)),this.actor.registerMessageHandler("RDT",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){this._getDEMWorkerSource(xe,Ee.source).removeTile(Ee)})),this.actor.registerMessageHandler("GCEZ",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(xe,Ee.type,Ee.source).getClusterExpansionZoom(Ee)})),this.actor.registerMessageHandler("GCC",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(xe,Ee.type,Ee.source).getClusterChildren(Ee)})),this.actor.registerMessageHandler("GCL",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){return this._getWorkerSource(xe,Ee.type,Ee.source).getClusterLeaves(Ee)})),this.actor.registerMessageHandler("LD",(xe,Ee)=>this._getWorkerSource(xe,Ee.type,Ee.source).loadData(Ee)),this.actor.registerMessageHandler("LT",(xe,Ee)=>this._getWorkerSource(xe,Ee.type,Ee.source).loadTile(Ee)),this.actor.registerMessageHandler("RT",(xe,Ee)=>this._getWorkerSource(xe,Ee.type,Ee.source).reloadTile(Ee)),this.actor.registerMessageHandler("AT",(xe,Ee)=>this._getWorkerSource(xe,Ee.type,Ee.source).abortTile(Ee)),this.actor.registerMessageHandler("RMT",(xe,Ee)=>this._getWorkerSource(xe,Ee.type,Ee.source).removeTile(Ee)),this.actor.registerMessageHandler("RS",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){var Ye;this.workerSources[xe]&&this.workerSources[xe][Ee.type]&&this.workerSources[xe][Ee.type][Ee.source]&&(Ye=this.workerSources[xe][Ee.type][Ee.source],delete this.workerSources[xe][Ee.type][Ee.source],Ye.removeSource!==void 0)&&Ye.removeSource(Ee)})),this.actor.registerMessageHandler("RM",xe=>o.__awaiter(this,void 0,void 0,function*(){delete this.layerIndexes[xe],delete this.availableImages[xe],delete this.workerSources[xe],delete this.demWorkerSources[xe]})),this.actor.registerMessageHandler("SR",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){this.referrer=Ee})),this.actor.registerMessageHandler("SRPS",(xe,Ee)=>this._syncRTLPluginState(xe,Ee)),this.actor.registerMessageHandler("IS",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){this.self.importScripts(Ee)})),this.actor.registerMessageHandler("SI",(xe,Ee)=>this._setImages(xe,Ee)),this.actor.registerMessageHandler("UL",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){this._getLayerIndex(xe).update(Ee.layers,Ee.removedIds)})),this.actor.registerMessageHandler("SL",(xe,Ee)=>o.__awaiter(this,void 0,void 0,function*(){this._getLayerIndex(xe).replace(Ee)}))}_setImages(de,xe){return o.__awaiter(this,void 0,void 0,function*(){this.availableImages[de]=xe;for(const Ye in this.workerSources[de]){var Ee=this.workerSources[de][Ye];for(const lt in Ee)Ee[lt].availableImages=xe}})}_syncRTLPluginState(de,xe){return o.__awaiter(this,void 0,void 0,function*(){if(o.rtlWorkerPlugin.isParsed())return o.rtlWorkerPlugin.getState();if(xe.pluginStatus!=="loading")return o.rtlWorkerPlugin.setState(xe),xe;var Ee=xe.pluginURL,Ye=(this.self.importScripts(Ee),o.rtlWorkerPlugin.isParsed());if(Ye)return o.rtlWorkerPlugin.setState(Ye={pluginStatus:"loaded",pluginURL:Ee}),Ye;throw o.rtlWorkerPlugin.setState({pluginStatus:"error",pluginURL:""}),new Error("RTL Text Plugin failed to import scripts from "+Ee)})}_getAvailableImages(de){let xe=this.availableImages[de];return xe=xe||[]}_getLayerIndex(de){let xe=this.layerIndexes[de];return xe=xe||(this.layerIndexes[de]=new i)}_getWorkerSource(de,xe,Ee){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][xe]||(this.workerSources[de][xe]={}),!this.workerSources[de][xe][Ee]){var Ye={sendAsync:(lt,Ce)=>(lt.targetMapId=de,this.actor.sendAsync(lt,Ce))};switch(xe){case"vector":this.workerSources[de][xe][Ee]=new p(Ye,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][xe][Ee]=new Qn(Ye,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][xe][Ee]=new this.externalWorkerSourceTypes[xe](Ye,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][xe][Ee]}_getDEMWorkerSource(de,xe){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][xe]||(this.demWorkerSources[de][xe]=new g),this.demWorkerSources[de][xe]}}return o.isWorker(self)&&(self.worker=new lr(self)),lr}),r("index",0,function(o,i){var l,c="4.1.2",Or=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date);let f,p;const g={now:Or,frameAsync(E){return new Promise((u,y)=>{const b=requestAnimationFrame(u);E.signal.addEventListener("abort",()=>{cancelAnimationFrame(b),y(i.createAbortError())})})},getImageData(E,u=0){return this.getImageCanvasContext(E).getImageData(-u,-u,E.width+2*u,E.height+2*u)},getImageCanvasContext(E){var u=window.document.createElement("canvas"),y=u.getContext("2d",{willReadFrequently:!0});if(y)return u.width=E.width,u.height=E.height,y.drawImage(E,0,0,E.width,E.height),y;throw new Error("failed to create canvas 2d context")},resolveURL(E){return(f=f||document.createElement("a")).href=E,f.href},hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(p=p??matchMedia("(prefers-reduced-motion: reduce)")).matches}};class v{static testProp(u){if(v.docStyle){for(let y=0;y<u.length;y++)if(u[y]in v.docStyle)return u[y]}return u[0]}static create(u,y,b){return u=window.document.createElement(u),y!==void 0&&(u.className=y),b&&b.appendChild(u),u}static createNS(u,y){return window.document.createElementNS(u,y)}static disableDrag(){v.docStyle&&v.selectProp&&(v.userSelect=v.docStyle[v.selectProp],v.docStyle[v.selectProp]="none")}static enableDrag(){v.docStyle&&v.selectProp&&(v.docStyle[v.selectProp]=v.userSelect)}static setTransform(u,y){u.style[v.transformProp]=y}static addEventListener(u,y,b,S={}){"passive"in S?u.addEventListener(y,b,S):u.addEventListener(y,b,S.capture)}static removeEventListener(u,y,b,S={}){"passive"in S?u.removeEventListener(y,b,S):u.removeEventListener(y,b,S.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",v.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",v.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",v.suppressClickInternal,!0)},0)}static getScale(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}static getPoint(u,y,b){var S=y.boundingClientRect;return new i.Point((b.clientX-S.left)/y.x-u.clientLeft,(b.clientY-S.top)/y.y-u.clientTop)}static mousePos(u,y){var b=v.getScale(u);return v.getPoint(u,b,y)}static touchPos(u,y){var b=[],S=v.getScale(u);for(let M=0;M<y.length;M++)b.push(v.getPoint(u,S,y[M]));return b}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}v.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,v.selectProp=v.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),v.transformProp=v.testProp(["transform","WebkitTransform"]);const w={supported:!1,testSupport:function(E){!T&&k&&(P?O(E):C=E)}};let C,T=!1,k,P=!1;function O(E){var u=E.createTexture();E.bindTexture(E.TEXTURE_2D,u);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,k),E.isContextLost())return;w.supported=!0}catch{}E.deleteTexture(u),T=!0}typeof document<"u"&&((k=document.createElement("img")).onload=function(){C&&O(C),C=null,P=!0},k.onerror=function(){T=!0,C=null},k.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let u,y,b,S;E.resetRequestQueue=()=>{u=[],y=0,b=0,S={}},E.addThrottleControl=Se=>{var Pe=b++;return S[Pe]=Se,Pe},E.removeThrottleControl=Se=>{delete S[Se],W()},E.getImage=(Se,Pe,me=!0)=>new Promise((Me,Xe)=>{w.supported&&(Se.headers||(Se.headers={}),Se.headers.accept="image/webp,*/*"),i.extend(Se,{type:"image"});var et={abortController:Pe,requestParameters:Se,supportImageRefresh:me,state:"queued",onError:rt=>{Xe(rt)},onSuccess:rt=>{Me(rt)}};u.push(et),W()});const M=Se=>typeof createImageBitmap=="function"?i.arrayBufferToImageBitmap(Se):i.arrayBufferToImage(Se),j=Se=>i.__awaiter(this,void 0,void 0,function*(){Se.state="running";var{requestParameters:Pe,supportImageRefresh:et,onError:me,onSuccess:Me,abortController:Xe}=Se,et=et===!1&&!i.isWorker(self)&&!i.getProtocol(Pe.url)&&(!Pe.headers||Object.keys(Pe.headers).reduce((tt,ht)=>tt&&ht==="accept",!0)),et=(y++,et?se(Pe,Xe):i.makeRequest(Pe,Xe));try{var rt=yield et;delete Se.abortController,Se.state="completed",rt.data instanceof HTMLImageElement||i.isImageBitmap(rt.data)?Me(rt):rt.data&&Me({data:yield M(rt.data),cacheControl:rt.cacheControl,expires:rt.expires})}catch(tt){delete Se.abortController,me(tt)}finally{y--,W()}}),W=()=>{var Se=(()=>{for(const me of Object.keys(S))if(S[me]())return!0;return!1})()?i.config.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.config.MAX_PARALLEL_IMAGE_REQUESTS;for(let me=y;me<Se&&0<u.length;me++){var Pe=u.shift();Pe.abortController.signal.aborted?me--:j(Pe)}},se=(Se,Pe)=>new Promise((me,Me)=>{const Xe=new Image;var et=Se.url,rt=Se.credentials;rt&&rt==="include"?Xe.crossOrigin="use-credentials":(rt&&rt==="same-origin"||!i.sameOrigin(et))&&(Xe.crossOrigin="anonymous"),Pe.signal.addEventListener("abort",()=>{Xe.src="",Me(i.createAbortError())}),Xe.fetchPriority="high",Xe.onload=()=>{Xe.onerror=Xe.onload=null,me({data:Xe})},Xe.onerror=()=>{Xe.onerror=Xe.onload=null,Pe.signal.aborted||Me(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Xe.src=et})}(l=l||{}),l.resetRequestQueue();class L{constructor(u){this._transformRequestFn=u}transformRequest(u,y){return this._transformRequestFn&&this._transformRequestFn(u,y)||{url:u}}normalizeSpriteURL(u,y,b){return u=N(u),u.path+=""+y+b,F(u)}setTransformRequest(u){this._transformRequestFn=u}}const D=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function N(E){var u=E.match(D);if(u)return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("&"):[]};throw new Error(`Unable to parse URL "${E}"`)}function F(E){var u=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+u}function B(E){var u=[];if(typeof E=="string")u.push({id:"default",url:E});else if(E&&0<E.length){var y,b,S=[];for({id:y,url:b}of E){var M=""+y+b;S.indexOf(M)===-1&&(S.push(M),u.push({id:y,url:b}))}}return u}function V(E,u,y,b){return i.__awaiter(this,void 0,void 0,function*(){var S,M,j=B(E),W=1<y?"@2x":"",se={},Se={};for({id:S,url:M}of j){var Pe=u.transformRequest(u.normalizeSpriteURL(M,W,".json"),"SpriteJSON"),Pe=(se[S]=i.getJSON(Pe,b),u.transformRequest(u.normalizeSpriteURL(M,W,".png"),"SpriteImage"));Se[S]=l.getImage(Pe,b)}return yield Promise.all([...Object.values(se),...Object.values(Se)]),function(me,Me){return i.__awaiter(this,void 0,void 0,function*(){var Xe={};for(const Sn in me){Xe[Sn]={};var et=g.getImageCanvasContext((yield Me[Sn]).data),rt=(yield me[Sn]).data;for(const Fn in rt){var{width:tt,height:ht,x:gt,y:bt,sdf:$t,pixelRatio:Ut,stretchX:Bt,stretchY:ln,content:en,contentMatch:yn}=rt[Fn];Xe[Sn][Fn]={data:null,pixelRatio:Ut,sdf:$t,stretchX:Bt,stretchY:ln,content:en,spriteData:{width:tt,height:ht,x:gt,y:bt,context:et},contentMatch:yn}}}return Xe})}(se,Se)})}class G{constructor(u,y,b,S){this.context=u,this.format=b,this.texture=u.gl.createTexture(),this.update(y,S)}update(u,y,b){var{width:S,height:M}=u,j=!(this.size&&this.size[0]===S&&this.size[1]===M||b),W=this.context,se=W.gl;this.useMipmap=!!(y&&y.useMipmap),se.bindTexture(se.TEXTURE_2D,this.texture),W.pixelStoreUnpackFlipY.set(!1),W.pixelStoreUnpack.set(1),W.pixelStoreUnpackPremultiplyAlpha.set(this.format===se.RGBA&&(!y||y.premultiply!==!1)),j?(this.size=[S,M],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||i.isImageBitmap(u)?se.texImage2D(se.TEXTURE_2D,0,this.format,this.format,se.UNSIGNED_BYTE,u):se.texImage2D(se.TEXTURE_2D,0,this.format,S,M,0,this.format,se.UNSIGNED_BYTE,u.data)):({x:W,y}=b||{x:0,y:0},u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||i.isImageBitmap(u)?se.texSubImage2D(se.TEXTURE_2D,0,W,y,se.RGBA,se.UNSIGNED_BYTE,u):se.texSubImage2D(se.TEXTURE_2D,0,W,y,S,M,se.RGBA,se.UNSIGNED_BYTE,u.data)),this.useMipmap&&this.isSizePowerOfTwo()&&se.generateMipmap(se.TEXTURE_2D)}bind(u,y,b){var S=this.context,S=S.gl;S.bindTexture(S.TEXTURE_2D,this.texture),b!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(b=S.LINEAR),u!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,b||u),this.filter=u),y!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,y),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,y),this.wrap=y)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){var u=this.context.gl;u.deleteTexture(this.texture),this.texture=null}}class q extends i.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u)){for(var{ids:y,promiseResolve:b}of this.requestors)b(this._getImagesForIds(y));this.requestors=[]}}getImage(b){var y,b=this.images[b];return b&&!b.data&&b.spriteData&&(y=b.spriteData,b.data=new i.RGBAImage({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),b.spriteData=null),b}addImage(u,y){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,y)&&(this.images[u]=y)}_validate(u,y){let b=!0;var S=y.data||y.spriteData;return this._validateStretch(y.stretchX,S&&S.width)||(this.fire(new i.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),b=!1),this._validateStretch(y.stretchY,S&&S.height)||(this.fire(new i.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),b=!1),this._validateContent(y.content,y)||(this.fire(new i.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),b=!1),b}_validateStretch(u,y){if(u){let b=0;for(const S of u){if(S[0]<b||S[1]<S[0]||y<S[1])return!1;b=S[1]}}return!0}_validateContent(u,y){var b,S;return!u||u.length===4&&(b=(S=y.spriteData)&&S.width||y.data.width,S=S&&S.height||y.data.height,!(u[0]<0||b<u[0]||u[1]<0||S<u[1]||u[2]<0||b<u[2]||u[3]<0||S<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,y,b=!0){var S=this.getImage(u);if(b&&(S.data.width!==y.data.width||S.data.height!==y.data.height))throw new Error(`size mismatch between old image (${S.data.width}x${S.data.height}) and new image (${y.data.width}x${y.data.height}).`);y.version=S.version+1,this.images[u]=y,this.updatedImages[u]=!0}removeImage(u){var y=this.images[u];delete this.images[u],delete this.patterns[u],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((y,b)=>{let S=!0;if(!this.isLoaded())for(const M of u)this.images[M]||(S=!1);this.isLoaded()||S?y(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:y})})}_getImagesForIds(u){var y={};for(const b of u){let S=this.getImage(b);S||(this.fire(new i.Event("styleimagemissing",{id:b})),S=this.getImage(b)),S?y[b]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,contentMatch:S.contentMatch,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:i.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return y}getPixelSize(){var{width:u,height:y}=this.atlasImage;return{width:u,height:y}}getPattern(u){var y=this.patterns[u],b=this.getImage(u);return b?(y&&y.position.version===b.version?y:(y?y.position.version=b.version:(y={w:b.data.width+2,h:b.data.height+2,x:0,y:0},b=new i.ImagePosition(y,b),this.patterns[u]={bin:y,position:b}),this._updatePatternAtlas(),this.patterns[u])).position:null}bind(u){var y=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new G(u,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)}_updatePatternAtlas(){var u=[];for(const se in this.patterns)u.push(this.patterns[se].bin);const{w:y,h:b}=i.potpack(u);var S=this.atlasImage;S.resize({width:y||1,height:b||1});for(const se in this.patterns){var j=this.patterns[se].bin,M=j.x+1,j=j.y+1,W=this.getImage(se).data;const Se=W.width,Pe=W.height;i.RGBAImage.copy(W,S,{x:0,y:0},{x:M,y:j},{width:Se,height:Pe}),i.RGBAImage.copy(W,S,{x:0,y:Pe-1},{x:M,y:j-1},{width:Se,height:1}),i.RGBAImage.copy(W,S,{x:0,y:0},{x:M,y:j+Pe},{width:Se,height:1}),i.RGBAImage.copy(W,S,{x:Se-1,y:0},{x:M-1,y:j},{width:1,height:Pe}),i.RGBAImage.copy(W,S,{x:0,y:0},{x:M+Se,y:j},{width:1,height:Pe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const b of u){var y;this.callbackDispatchedThisFrame[b]||(this.callbackDispatchedThisFrame[b]=!0,(y=this.getImage(b))||i.warnOnce(`Image with ID: "${b}" was not found`),i.renderStyleImage(y)&&this.updateImage(b,y))}}}const z=1e20;function $(E,u,y,b,S,M,j,W,se){for(let Se=u;Se<u+b;Se++)K(E,y*M+Se,M,S,j,W,se);for(let Se=y;Se<y+S;Se++)K(E,Se*M+u,1,b,j,W,se)}function K(E,u,y,b,S,M,j){j[M[0]=0]=-1e20,j[1]=z,S[0]=E[u];for(let me=1,Me=0,Xe=0;me<b;me++){S[me]=E[u+me*y];var W=me*me;do{var se=M[Me];Xe=(S[me]-S[se]+W-se*se)/(me-se)/2}while(Xe<=j[Me]&&-1<--Me);M[++Me]=me,j[Me]=Xe,j[Me+1]=z}for(let me=0,Me=0;me<b;me++){for(;j[Me+1]<me;)Me++;var Se=M[Me],Pe=me-Se;E[u+me*y]=S[Se]+Pe*Pe}}class te{constructor(u,y){this.requestManager=u,this.localIdeographFontFamily=y,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return i.__awaiter(this,void 0,void 0,function*(){var y=[];for(const W in u)for(const se of u[W])y.push(this._getAndCacheGlyphsPromise(W,se));var b,S,M,j={};for({stack:b,id:S,glyph:M}of yield Promise.all(y))j[b]||(j[b]={}),j[b][S]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return j})}_getAndCacheGlyphsPromise(u,y){return i.__awaiter(this,void 0,void 0,function*(){let b=this.entries[u];var S=(b=b||(this.entries[u]={glyphs:{},requests:{},ranges:{}})).glyphs[y];if(S!==void 0)return{stack:u,id:y,glyph:S};if(S=this._tinySDF(b,u,y))return b.glyphs[y]=S,{stack:u,id:y,glyph:S};var M=Math.floor(y/256);if(65535<256*M)throw new Error("glyphs > 65535 not supported");if(b.ranges[M])return{stack:u,id:y,glyph:S};if(!this.url)throw new Error("glyphsUrl is not set");b.requests[M]||(S=te.loadGlyphRange(u,M,this.url,this.requestManager),b.requests[M]=S);var j=yield b.requests[M];for(const W in j)this._doesCharSupportLocalGlyph(+W)||(b.glyphs[+W]=j[+W]);return b.ranges[M]=!0,{stack:u,id:y,glyph:j[y]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(i.unicodeBlockLookup["CJK Unified Ideographs"](u)||i.unicodeBlockLookup["Hangul Syllables"](u)||i.unicodeBlockLookup.Hiragana(u)||i.unicodeBlockLookup.Katakana(u))}_tinySDF(u,y,b){var S=this.localIdeographFontFamily;if(S&&this._doesCharSupportLocalGlyph(b)){let M=u.tinySDF;if(!M){let j="400";/bold/i.test(y)?j="900":/medium/i.test(y)?j="500":/light/i.test(y)&&(j="200"),M=u.tinySDF=new te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:S,fontWeight:j})}return y=M.draw(String.fromCharCode(b)),{id:b,bitmap:new i.AlphaImage({width:y.width||60,height:y.height||60},y.data),metrics:{width:y.glyphWidth/2||24,height:y.glyphHeight/2||24,left:y.glyphLeft/2+.5||0,top:y.glyphTop/2-27.5||-8,advance:y.glyphAdvance/2||24,isDoubleResolution:!0}}}}}te.loadGlyphRange=function(E,u,y,b){return i.__awaiter(this,void 0,void 0,function*(){var S=256*u,M=255+S,j=b.transformRequest(y.replace("{fontstack}",E).replace("{range}",S+"-"+M),"Glyphs"),j=yield i.getArrayBuffer(j,new AbortController);if(!j||!j.data)throw new Error(`Could not load glyph range. range: ${u}, ${S}-`+M);var W={};for(const se of i.parseGlyphPbf(j.data))W[se.id]=se;return W})},te.TinySDF=class{constructor({fontSize:E=24,buffer:u=3,radius:y=8,cutoff:b=.25,fontFamily:S="sans-serif",fontWeight:M="normal",fontStyle:j="normal"}={}){this.buffer=u,this.cutoff=b,this.radius=y,b=this.size=E+4*u,y=this._createCanvas(b),u=this.ctx=y.getContext("2d",{willReadFrequently:!0}),u.font=j+` ${M} ${E}px `+S,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(E){var u=document.createElement("canvas");return u.width=u.height=E,u}draw(E){var{width:u,actualBoundingBoxAscent:b,actualBoundingBoxDescent:y,actualBoundingBoxLeft:Pe,actualBoundingBoxRight:W}=this.ctx.measureText(E),b=Math.ceil(b),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(W-Pe))),M=Math.min(this.size-this.buffer,b+Math.ceil(y)),j=S+2*this.buffer,W=M+2*this.buffer,se=Math.max(j*W,0),Se=new Uint8ClampedArray(se),Pe={data:Se,width:j,height:W,glyphWidth:S,glyphHeight:M,glyphTop:b,glyphLeft:0,glyphAdvance:u};if(S!==0&&M!==0){var{ctx:y,buffer:me,gridInner:Me,gridOuter:Xe}=this,et=(y.clearRect(me,me,S,M),y.fillText(E,me,me+b),y.getImageData(me,me,S,M));Xe.fill(z,0,se),Me.fill(0,0,se);for(let bt=0;bt<M;bt++)for(let $t=0;$t<S;$t++){var rt,tt=et.data[4*(bt*S+$t)+3]/255;tt!=0&&(rt=(bt+me)*j+$t+me,tt==1?(Xe[rt]=0,Me[rt]=z):(Xe[rt]=0<(tt=.5-tt)?tt*tt:0,Me[rt]=tt<0?tt*tt:0))}$(Xe,0,0,j,W,j,this.f,this.v,this.z),$(Me,me,me,S,M,j,this.f,this.v,this.z);for(let bt=0;bt<se;bt++){var ht=Math.sqrt(Xe[bt])-Math.sqrt(Me[bt]);Se[bt]=Math.round(255-255*(ht/this.radius+this.cutoff))}}return Pe}};class re{constructor(){this.specification=i.v8Spec.light.position}possiblyEvaluate(u,y){return i.sphericalToCartesian(u.expression.evaluate(y))}interpolate(u,y,b){return{x:i.interpolate.number(u.x,y.x,b),y:i.interpolate.number(u.y,y.y,b),z:i.interpolate.number(u.z,y.z,b)}}}const oe="-transition";let ue;class Q extends i.Evented{constructor(u){super(),ue=ue||new i.Properties({anchor:new i.DataConstantProperty(i.v8Spec.light.anchor),position:new re,color:new i.DataConstantProperty(i.v8Spec.light.color),intensity:new i.DataConstantProperty(i.v8Spec.light.intensity)}),this._transitionable=new i.Transitionable(ue),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,y={}){if(!this._validate(i.validateLight,u,y))for(const S in u){var b=u[S];S.endsWith(oe)?this._transitionable.setTransition(S.slice(0,-oe.length),b):this._transitionable.setValue(S,b)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,y,b){return(!b||b.validate!==!1)&&i.emitValidationErrors(this,u.call(i.validateStyle,{value:y,style:{glyphs:!0,sprite:!0},styleSpec:i.v8Spec}))}}class ce{constructor(u,y){this.width=u,this.height=y,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,y){var b=u.join(",")+String(y);return this.dashEntry[b]||(this.dashEntry[b]=this.addDash(u,y)),this.dashEntry[b]}getDashRanges(u,y,b){var S=[],M=u.length%2==1?-u[u.length-1]*b:0,j=u[0]*b;let W=!0,se=(S.push({left:M,right:j,isDash:W,zeroLength:u[0]===0}),u[0]);for(let Pe=1;Pe<u.length;Pe++){W=!W;var Se=u[Pe],M=se*b,j=(se+=Se)*b;S.push({left:M,right:j,isDash:W,zeroLength:Se===0})}return S}addRoundDash(u,y,b){var S=y/2;for(let Pe=-b;Pe<=b;Pe++){var M=this.nextRow+b+Pe,j=this.width*M;let me=0,Me=u[me];for(let Xe=0;Xe<this.width;Xe++){1<Xe/Me.right&&(Me=u[++me]);var W=Math.abs(Xe-Me.left),Se=Math.abs(Xe-Me.right),W=Math.min(W,Se);let et;var se,Se=Pe/b*(1+S);et=Me.isDash?(se=S-Math.abs(Se),Math.sqrt(W*W+se*se)):S-Math.sqrt(W*W+Se*Se),this.data[j+Xe]=Math.max(0,Math.min(255,et+128))}}}addRegularDash(u){for(let me=u.length-1;0<=me;--me){var y=u[me],b=u[me+1];y.zeroLength?u.splice(me,1):b&&b.isDash===y.isDash&&(b.left=y.left,u.splice(me,1))}var S=u[0],M=u[u.length-1],j=(S.isDash===M.isDash&&(S.left=M.left-this.width,M.right=S.right+this.width),this.width*this.nextRow);let W=0,se=u[W];for(let me=0;me<this.width;me++){1<me/se.right&&(se=u[++W]);var Se=Math.abs(me-se.left),Pe=Math.abs(me-se.right),Se=Math.min(Se,Pe),Pe=se.isDash?Se:-Se;this.data[j+me]=Math.max(0,Math.min(255,Pe+128))}}addDash(u,y){var b,S,M=y?7:0,j=2*M+1;if(this.nextRow+j>this.height)return i.warnOnce("LineAtlas out of space"),null;let W=0;for(let se=0;se<u.length;se++)W+=u[se];return W!==0&&(b=this.width/W,S=this.getDashRanges(u,this.width,b),y?this.addRoundDash(S,b,M):this.addRegularDash(S)),y={y:(this.nextRow+M+.5)/this.height,height:2*M/this.height,width:W},this.nextRow+=j,this.dirty=!0,y}bind(u){u=u.gl,this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}function ae(){return new Worker(i.config.WORKER_URL)}const fe="maplibre_preloaded_worker_pool";class le{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<le.workerCount;)this.workers.push(ae());return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(y=>{y.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[fe]}numActive(){return Object.keys(this.active).length}}Or=Math.floor(g.hardwareConcurrency/2),le.workerCount=i.isSafari(globalThis)?Math.max(Math.min(Or,3),1):1;let pe;function Fe(){return pe=pe||new le}class Be{constructor(u,y){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=y;var b=this.workerPool.acquire(y);for(let M=0;M<b.length;M++){var S=b[M],S=new i.Actor(S,y);S.name="Worker "+M,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,y){var b=[];for(const S of this.actors)b.push(S.sendAsync({type:u,data:y}));return Promise.all(b)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(y=>{y.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,y){for(const b of this.actors)b.registerMessageHandler(u,y)}}let Ze;function it(){return Ze||(Ze=new Be(Fe(),i.GLOBAL_DISPATCHER_ID)).registerMessageHandler("GR",(E,u,y)=>i.makeRequest(u,y)),Ze}function ot(E,u,y,me,S,M){var j,W,se,Se=function(et,rt,tt){if(et)for(const bt of et){var ht=rt[bt];if(ht&&ht.source===tt&&ht.type==="fill-extrusion")return!0}else for(const bt in rt){var gt=rt[bt];if(gt.source===tt&&gt.type==="fill-extrusion")return!0}return!1}(S&&S.layers,u,E.id),Pe=M.maxPitchScaleFactor(),me=E.tilesIn(me,Pe,Se),Me=(me.sort(ct),[]);for(const et of me)Me.push({wrappedTileID:et.tileID.wrapped().key,queryResults:et.tile.queryRenderedFeatures(u,y,E._state,et.queryGeometry,et.cameraQueryGeometry,et.scale,S,M,Pe,(j=E.transform,W=et.tileID,se=void 0,se=i.create(),i.translate(se,se,[1,1,0]),i.scale(se,se,[.5*j.width,.5*j.height,1]),i.multiply(se,se,j.calculatePosMatrix(W.toUnwrapped()))))});var Xe=function(et){var rt={},tt={};for(const ln of et){var ht=ln.queryResults,gt=ln.wrappedTileID,bt=tt[gt]=tt[gt]||{};for(const en in ht){var $t=ht[en],Ut=bt[en]=bt[en]||{},Bt=rt[en]=rt[en]||[];for(const yn of $t)Ut[yn.featureIndex]||(Ut[yn.featureIndex]=!0,Bt.push(yn))}}return rt}(Me);for(const et in Xe)Xe[et].forEach(tt=>{var tt=tt.feature,ht=E.getFeatureState(tt.layer["source-layer"],tt.id);tt.source=tt.layer.source,tt.layer["source-layer"]&&(tt.sourceLayer=tt.layer["source-layer"]),tt.state=ht});return Xe}function ut(E,u,y,b,S,M,j){var W={},se=M.queryRenderedSymbols(b),Se=[];for(const Xe of Object.keys(se).map(Number))Se.push(j[Xe]);Se.sort(ct);for(const Xe of Se){var Pe=Xe.featureIndex.lookupSymbolFeatures(se[Xe.bucketInstanceId],u,Xe.bucketIndex,Xe.sourceLayerIndex,S.filter,S.layers,S.availableImages,E);for(const et in Pe){var me=W[et]=W[et]||[],Me=Pe[et];Me.sort((rt,tt)=>{var ht,gt=Xe.featureSortOrder;return gt?(ht=gt.indexOf(rt.featureIndex),gt.indexOf(tt.featureIndex)-ht):tt.featureIndex-rt.featureIndex});for(const rt of Me)me.push(rt)}}for(const Xe in W)W[Xe].forEach(rt=>{var rt=rt.feature,tt=E[Xe],tt=y[tt.source].getFeatureState(rt.layer["source-layer"],rt.id);rt.source=rt.layer.source,rt.layer["source-layer"]&&(rt.sourceLayer=rt.layer["source-layer"]),rt.state=tt});return W}function st(E,u){var y=E.getRenderableIds().map(W=>E.getTileByID(W)),b=[],S={};for(let W=0;W<y.length;W++){var M=y[W],j=M.tileID.canonical.key;S[j]||(S[j]=!0,M.querySourceFeatures(b,u))}return b}function ct(E,u){return E=E.tileID,u=u.tileID,E.overscaledZ-u.overscaledZ||E.canonical.y-u.canonical.y||E.wrap-u.wrap||E.canonical.x-u.canonical.x}function Ae(E,u,y){return i.__awaiter(this,void 0,void 0,function*(){let b=E;var S;return E.url?(S=yield i.getJSON(u.transformRequest(E.url,"Source"),y),b=S.data):yield g.frameAsync(y),b?(S=i.pick(i.extend(b,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]),"vector_layers"in b&&b.vector_layers&&(S.vectorLayerIds=b.vector_layers.map(M=>M.id)),S):null})}class Z{constructor(u,y){u&&(y?this.setSouthWest(u).setNorthEast(y):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof i.LngLat?new i.LngLat(u.lng,u.lat):i.LngLat.convert(u),this}setSouthWest(u){return this._sw=u instanceof i.LngLat?new i.LngLat(u.lng,u.lat):i.LngLat.convert(u),this}extend(u){var y,b=this._sw,S=this._ne;let M,j;if(u instanceof i.LngLat)M=u,j=u;else{if(!(u instanceof Z))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?(y=u,this.extend(Z.convert(y))):this.extend(i.LngLat.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(i.LngLat.convert(u)):this;if(M=u._sw,j=u._ne,!M||!j)return this}return b||S?(b.lng=Math.min(M.lng,b.lng),b.lat=Math.min(M.lat,b.lat),S.lng=Math.max(j.lng,S.lng),S.lat=Math.max(j.lat,S.lat)):(this._sw=new i.LngLat(M.lng,M.lat),this._ne=new i.LngLat(j.lng,j.lat)),this}getCenter(){return new i.LngLat((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.LngLat(this.getWest(),this.getNorth())}getSouthEast(){return new i.LngLat(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(y){var{lng:y,lat:b}=i.LngLat.convert(y),b=this._sw.lat<=b&&b<=this._ne.lat;let S=this._sw.lng<=y&&y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=y&&y>=this._ne.lng),b&&S}static convert(u){return u instanceof Z?u:u&&new Z(u)}static fromLngLat(u,b=0){var b=360*b/40075017,S=b/Math.cos(Math.PI/180*u.lat);return new Z(new i.LngLat(u.lng-S,u.lat-b),new i.LngLat(u.lng+S,u.lat+b))}}class ne{constructor(u,y,b){this.bounds=Z.convert(this.validateBounds(u)),this.minzoom=y||0,this.maxzoom=b||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){var y=Math.pow(2,u.z);const b=Math.floor(i.mercatorXfromLng(this.bounds.getWest())*y),S=Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*y),M=Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*y),j=Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*y);return u.x>=b&&u.x<M&&u.y>=S&&u.y<j}}class ee extends i.Evented{constructor(u,y,b,S){if(super(),this.id=u,this.dispatcher=b,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(y,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){return i.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{var u=yield Ae(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(i.extend(this,u),u.bounds&&(this.tileBounds=new ne(u.bounds,this.minzoom,this.maxzoom)),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))}catch(y){this._tileJSONRequest=null,this.fire(new i.ErrorEvent(y))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.extend({},this._options)}loadTile(u){return i.__awaiter(this,void 0,void 0,function*(){var y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(y,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};y.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((M,j)=>{u.reloadPromise={resolve:M,reject:j}})}else u.actor=this.dispatcher.getActor(),b="LT";u.abortController=new AbortController;try{var S=yield u.actor.sendAsync({type:b,data:y},u.abortController);delete u.abortController,u.aborted||this._afterTileLoadWorkerResponse(u,S)}catch(M){if(delete u.abortController,!u.aborted){if(M&&M.status!==404)throw M;this._afterTileLoadWorkerResponse(u,null)}}})}_afterTileLoadWorkerResponse(u,y){y&&y.resourceTiming&&(u.resourceTiming=y.resourceTiming),y&&this.map._refreshExpiredTiles&&u.setExpiryData(y),u.loadVectorData(y,this.map.painter),u.reloadPromise&&(y=u.reloadPromise,u.reloadPromise=null,this.loadTile(u).then(y.resolve).catch(y.reject))}abortTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ye extends i.Evented{constructor(u,y,b,S){super(),this.id=u,this.dispatcher=b,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},y),i.extend(this,i.pick(y,["url","scheme","tileSize"]))}load(){return i.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{var u=yield Ae(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(i.extend(this,u),u.bounds&&(this.tileBounds=new ne(u.bounds,this.minzoom,this.maxzoom)),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))}catch(y){this._tileJSONRequest=null,this.fire(new i.ErrorEvent(y))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return i.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return i.__awaiter(this,void 0,void 0,function*(){var y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{var b,S,M,j=yield l.getImage(this.map._requestManager.transformRequest(y,"Tile"),u.abortController,this.map._refreshExpiredTiles);delete u.abortController,u.aborted?u.state="unloaded":j&&j.data&&(this.map._refreshExpiredTiles&&j.cacheControl&&j.expires&&u.setExpiryData({cacheControl:j.cacheControl,expires:j.expires}),S=(b=this.map.painter.context).gl,M=j.data,u.texture=this.map.painter.getTileTexture(M.width),u.texture?u.texture.update(M,{useMipmap:!0}):(u.texture=new G(b,M,S.RGBA,{useMipmap:!0}),u.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&S.texParameterf(S.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax)),u.state="loaded")}catch(W){if(delete u.abortController,u.aborted)u.state="unloaded";else if(W)throw u.state="errored",W}})}abortTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class Ie extends ye{constructor(u,y,b,S){super(u,y,b,S),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox",this.redFactor=y.redFactor,this.greenFactor=y.greenFactor,this.blueFactor=y.blueFactor,this.baseShift=y.baseShift}loadTile(u){return i.__awaiter(this,void 0,void 0,function*(){var y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(y,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{var b,S,M,j,W=yield l.getImage(y,u.abortController,this.map._refreshExpiredTiles);delete u.abortController,u.aborted?u.state="unloaded":W&&W.data&&(b=W.data,this.map._refreshExpiredTiles&&W.cacheControl&&W.expires&&u.setExpiryData({cacheControl:W.cacheControl,expires:W.expires}),S=i.isImageBitmap(b)&&i.offscreenCanvasSupported()?b:yield this.readImageNow(b),M={type:this.type,uid:u.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift},u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),j=yield u.actor.sendAsync({type:"LDT",data:M}),u.dem=j,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"))}catch(se){if(delete u.abortController,u.aborted)u.state="unloaded";else if(se)throw u.state="errored",se}})}readImageNow(u){return i.__awaiter(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&i.isOffscreenCanvasDistorted()){var y=u.width+2,b=u.height+2;try{return new i.RGBAImage({width:y,height:b},yield i.readImageUsingVideoFrame(u,-1,-1,y,b))}catch{}}return g.getImageData(u,1)})}_getNeighboringTiles(u){var y=u.canonical,b=Math.pow(2,y.z),S=(y.x-1+b)%b,M=y.x===0?u.wrap-1:u.wrap,j=(y.x+1+b)%b,W=y.x+1===b?u.wrap+1:u.wrap,se={};return se[new i.OverscaledTileID(u.overscaledZ,M,y.z,S,y.y).key]={backfilled:!1},se[new i.OverscaledTileID(u.overscaledZ,W,y.z,j,y.y).key]={backfilled:!1},0<y.y&&(se[new i.OverscaledTileID(u.overscaledZ,M,y.z,S,y.y-1).key]={backfilled:!1},se[new i.OverscaledTileID(u.overscaledZ,u.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},se[new i.OverscaledTileID(u.overscaledZ,W,y.z,j,y.y-1).key]={backfilled:!1}),y.y+1<b&&(se[new i.OverscaledTileID(u.overscaledZ,M,y.z,S,y.y+1).key]={backfilled:!1},se[new i.OverscaledTileID(u.overscaledZ,u.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},se[new i.OverscaledTileID(u.overscaledZ,W,y.z,j,y.y+1).key]={backfilled:!1}),se}unloadTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class ge extends i.Evented{constructor(u,y,b,S){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=b.getActor(),this.setEventedParent(S),this._data=y.data,this._options=i.extend({},y),this._collectResourceTiming=y.collectResourceTiming,y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId,u=i.EXTENT/this.tileSize,this.workerOptions=i.extend({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*u,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*u,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?y.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:i.EXTENT,radius:(y.clusterRadius||50)*u,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return i.__awaiter(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0)&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,y,b){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:y,offset:b}})}_updateWorkerData(u){return i.__awaiter(this,void 0,void 0,function*(){var y=i.extend({type:this.type},this.workerOptions);u?y.dataDiff=u:typeof this._data=="string"?(y.request=this.map._requestManager.transformRequest(g.resolveURL(this._data),"Source"),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new i.Event("dataloading",{dataType:"source"}));try{var b=yield this.actor.sendAsync({type:"LD",data:y});if(this._pendingLoads--,this._removed||b.abandoned)this.fire(new i.Event("dataabort",{dataType:"source"}));else{let M=null;b.resourceTiming&&b.resourceTiming[this.id]&&(M=b.resourceTiming[this.id].slice(0));var S={dataType:"source"};this._collectResourceTiming&&M&&0<M.length&&i.extend(S,{resourceTiming:M}),this.fire(new i.Event("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new i.Event("data",Object.assign(Object.assign({},S),{sourceDataType:"content"})))}}catch(M){this._pendingLoads--,this._removed?this.fire(new i.Event("dataabort",{dataType:"source"})):this.fire(new i.ErrorEvent(M))}})}loaded(){return this._pendingLoads===0}loadTile(u){return i.__awaiter(this,void 0,void 0,function*(){var y=u.actor?"RT":"LT",b=(u.actor=this.actor,{type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId}),b=(u.abortController=new AbortController,yield this.actor.sendAsync({type:y,data:b},u.abortController));delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(b,this.map.painter,y=="RT")})}abortTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return i.__awaiter(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var $e=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class nt extends i.Evented{constructor(u,y,b,S){super(),this.id=u,this.dispatcher=b,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=y}load(u){return i.__awaiter(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{var y=yield l.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,y&&y.data&&(this.image=y.data,u&&(this.coordinates=u),this._finishLoading())}catch(b){this._request=null,this.fire(new i.ErrorEvent(b))}})}loaded(){return this._loaded}updateImage(u){return u.url&&(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null})),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){return u=(this.coordinates=u).map(i.MercatorCoordinate.fromLngLat),this.tileID=pt(u),this.minzoom=this.maxzoom=this.tileID.z,u=u.map(y=>this.tileID.getTilePoint(y)._round()),this._boundsArray=new i.RasterBoundsArray,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(u[2].x,u[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length!==0&&this.image){var u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new G(u,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let S=!1;for(const M in this.tiles){var b=this.tiles[M];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,S=!0)}S&&this.fire(new i.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}loadTile(u){return i.__awaiter(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u).buckets={}:u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}function pt(j){let u=1/0,y=1/0,b=-1/0,S=-1/0;for(const W of j)u=Math.min(u,W.x),y=Math.min(y,W.y),b=Math.max(b,W.x),S=Math.max(S,W.y);var j=b-u,M=S-y,j=Math.max(j,M),M=Math.max(0,Math.floor(-Math.log(j)/Math.LN2)),j=Math.pow(2,M);return new i.CanonicalTileID(M,Math.floor((u+b)/2*j),Math.floor((y+S)/2*j))}class wt extends nt{constructor(u,y,b,S){super(u,y,b,S),this.roundZoom=!0,this.type="video",this.options=y}load(){return i.__awaiter(this,void 0,void 0,function*(){this._loaded=!1;var u=this.options;this.urls=[];for(const b of u.urls)this.urls.push(this.map._requestManager.transformRequest(b,"Source").url);try{var y=yield i.getVideo(this.urls);this._loaded=!0,y&&(this.video=y,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())}catch(b){this.fire(new i.ErrorEvent(b))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){var y;this.video&&(u<(y=this.video.seekable).start(0)||u>y.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${y.start(0)} and ${y.end(0)}-second mark.`))):this.video.currentTime=u)}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var u=this.map.painter.context,y=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new G(u,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let S=!1;for(const M in this.tiles){var b=this.tiles[M];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,S=!0)}S&&this.fire(new i.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mt extends nt{constructor(u,y,b,S){super(u,y,b,S),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some(M=>!Array.isArray(M)||M.length!==2||M.some(j=>typeof j!="number"))||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+u,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+u,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+u,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof HTMLCanvasElement||this.fire(new i.ErrorEvent(new i.ValidationError("sources."+u,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+u,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}load(){return i.__awaiter(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var y=this.map.painter.context,b=y.gl;this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,$e.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new G(y,this.canvas,b.RGBA,{premultiply:!0});let M=!1;for(const j in this.tiles){var S=this.tiles[j];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,M=!0)}M&&this.fire(new i.Event("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const zt={},Pt=(E,u,y,b)=>{if(u=new(Zt(u.type))(E,u,y,b),u.id!==E)throw new Error(`Expected Source id to be ${E} instead of `+u.id);return u},Zt=E=>{switch(E){case"geojson":return ge;case"image":return nt;case"raster":return ye;case"raster-dem":return Ie;case"vector":return ee;case"video":return wt;case"canvas":return mt}return zt[E]};function We(E,u){var y={};if(u)for(const b of E){const S=b.layerIds.map(M=>u.getLayer(M)).filter(Boolean);if(S.length!==0){b.layers=S,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(M=>S.filter(j=>j.id===M)[0]));for(const M of S)y[M.id]=b}}return y}const Ge="RTLPluginLoaded";class Rt extends i.Evented{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=it()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch(y=>{throw this.status="error",y})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return i.__awaiter(this,arguments,void 0,function*(y,b=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=g.resolveURL(y),!this.url)throw new Error(`requested url ${y} is invalid`);if(this.status==="unavailable"){if(!b)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i.__awaiter(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.Event(Ge))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Dt=null;function qt(){return Dt=Dt||new Rt}class Yt{constructor(u,y){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=i.uniqueId(),this.uses=0,this.tileSize=y,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){u+=this.timeAdded,u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,y,b){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=We(u.buckets,y.style),this.hasSymbolBuckets=!1;for(const W in this.buckets){var S=this.buckets[W];if(S instanceof i.SymbolBucket){if(this.hasSymbolBuckets=!0,!b)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const W in this.buckets){var M=this.buckets[W];if(M instanceof i.SymbolBucket&&M.hasRTLText){this.hasRTLText=!0,qt().lazyLoad();break}}this.queryPadding=0;for(const W in this.buckets){var j=this.buckets[W];this.queryPadding=Math.max(this.queryPadding,y.style.getLayer(W).queryRadius(j))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new i.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const S in this.buckets){var y=this.buckets[S];y.uploadPending()&&y.upload(u)}var b=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new G(u,this.imageAtlas.image,b.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new G(u,this.glyphAtlasImage,b.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,y,b,S,M,j,W,se,Se,Pe){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:M,scale:j,tileSize:this.tileSize,pixelPosMatrix:Pe,transform:se,params:W,queryPadding:this.queryPadding*Se},u,y,b):{}}querySourceFeatures(u,y){var b=this.latestFeatureIndex;if(b&&b.rawTileData){var S=b.loadVTLayers(),M=y&&y.sourceLayer?y.sourceLayer:"",j=S._geojsonTileLayer||S[M];if(j){var W=i.createFilter(y&&y.filter),{z:se,x:Se,y:Pe}=this.tileID.canonical,me={z:se,x:Se,y:Pe};for(let et=0;et<j.length;et++){var Me=j.feature(et);if(W.needGeometry){var Xe=i.toEvaluationFeature(Me,!0);if(!W.filter(new i.EvaluationParameters(this.tileID.overscaledZ),Xe,this.tileID.canonical))continue}else if(!W.filter(new i.EvaluationParameters(this.tileID.overscaledZ),Me))continue;Xe=b.getId(Me,M),Me=new i.GeoJSONFeature(Me,se,Se,Pe,Xe),Me.tile=me,u.push(Me)}}}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){var y=this.expirationTime;if(u.cacheControl?(b=i.parseCacheControl(u.cacheControl))["max-age"]&&(this.expirationTime=Date.now()+1e3*b["max-age"]):u.expires&&(this.expirationTime=new Date(u.expires).getTime()),this.expirationTime){var b=Date.now();let S=!1;this.expirationTime>b?S=!1:y&&!(this.expirationTime<y)&&(u=this.expirationTime-y)?this.expirationTime=b+Math.max(u,3e4):S=!0,S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,y){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(u).length!==0){var b,S,M,j=this.latestFeatureIndex.loadVTLayers();for(const W in this.buckets)y.style.hasLayer(W)&&(S=j[M=(b=this.buckets[W]).layers[0].sourceLayer||"_geojsonTileLayer"],M=u[M],S)&&M&&Object.keys(M).length!==0&&(b.update(M,S,this.imageAtlas&&this.imageAtlas.patternPositions||{}),M=y&&y.style&&y.style.getLayer(W))&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<g.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=g.now()+u}setDependencies(u,y){var b={};for(const S of y)b[S]=!0;this.dependencies[u]=b}hasDependency(u,y){for(const S of u){var b=this.dependencies[S];if(b){for(const M of y)if(b[M])return!0}}return!1}}class xt{constructor(u,y){this.max=u,this.onRemove=y,this.reset()}reset(){for(const u in this.data)for(const y of this.data[u])y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value);return this.data={},this.order=[],this}add(u,y,b){var S=u.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const M={value:y,timeout:void 0};return b!==void 0&&(M.timeout=setTimeout(()=>{this.remove(u,M)},b)),this.data[S].push(M),this.order.push(S),this.order.length>this.max&&(y=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(y),this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){var y=this.data[u].shift();return y.timeout&&clearTimeout(y.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),y.value}getByKey(u){return u=this.data[u],u?u[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,y){var b;return this.has(u)&&(u=u.wrapped().key,y=y===void 0?0:this.data[u].indexOf(y),b=this.data[u][y],this.data[u].splice(y,1),b.timeout&&clearTimeout(b.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(b.value),this.order.splice(this.order.indexOf(u),1)),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){var y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}filter(u){var y=[];for(const b in this.data)for(const S of this.data[b])u(S.value)||y.push(S);for(const b of y)this.remove(b.value.tileID,b)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,y,b){var S=String(y);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][S]=this.stateChanges[u][S]||{},i.extend(this.stateChanges[u][S],b),this.deletedStates[u]===null){this.deletedStates[u]={};for(const M in this.state[u])M!==S&&(this.deletedStates[u][M]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][S]===null){this.deletedStates[u][S]={};for(const M in this.state[u][S])b[M]||(this.deletedStates[u][S][M]=null)}else for(const M in b)this.deletedStates[u]&&this.deletedStates[u][S]&&this.deletedStates[u][S][M]===null&&delete this.deletedStates[u][S][M]}removeFeatureState(u,y,b){var S=this.deletedStates[u]===null;if(!S){var M=String(y);if(this.deletedStates[u]=this.deletedStates[u]||{},b&&y!==void 0)this.deletedStates[u][M]!==null&&(this.deletedStates[u][M]=this.deletedStates[u][M]||{},this.deletedStates[u][M][b]=null);else if(y!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][M])for(b in this.deletedStates[u][M]={},this.stateChanges[u][M])this.deletedStates[u][M][b]=null;else this.deletedStates[u][M]=null;else this.deletedStates[u]=null}}getState(u,y){var b=String(y),S=this.state[u]||{},M=this.stateChanges[u]||{},j=i.extend({},S[b],M[b]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){if(S=this.deletedStates[u][y],S===null)return{};for(const W in S)delete j[W]}return j}initializeTileState(u,y){u.setFeatureState(this.state,y)}coalesceChanges(u,y){var b={};for(const j in this.stateChanges){this.state[j]=this.state[j]||{};var S={};for(const W in this.stateChanges[j])this.state[j][W]||(this.state[j][W]={}),i.extend(this.state[j][W],this.stateChanges[j][W]),S[W]=this.state[j][W];b[j]=S}for(const j in this.deletedStates){this.state[j]=this.state[j]||{};var M={};if(this.deletedStates[j]===null)for(const W in this.state[j])M[W]={},this.state[j][W]={};else for(const W in this.deletedStates[j]){if(this.deletedStates[j][W]===null)this.state[j][W]={};else for(const se of Object.keys(this.deletedStates[j][W]))delete this.state[j][W][se];M[W]=this.state[j][W]}b[j]=b[j]||{},i.extend(b[j],M)}if(this.stateChanges={},this.deletedStates={},Object.keys(b).length!==0)for(const j in u)u[j].setFeatureState(b,y)}}class St extends i.Evented{constructor(u,y,b){super(),this.id=u,this.dispatcher=b,this.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=Pt(u,y,b,this),this._tiles={},this._cache=new xt(0,S=>this._unloadTile(S)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Et,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(!this._sourceErrored){if(!this._sourceLoaded||!this._source.loaded())return!1;if(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain){if(!this._updated)return!1;for(const y in this._tiles){var u=this._tiles[y];if(u.state!=="loaded"&&u.state!=="errored")return!1}}}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){var u;this._paused&&(u=this._shouldReloadOnResume,this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform)&&this.update(this.transform,this.terrain)}_loadTile(u,y,b){return i.__awaiter(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,y,b)}catch(S){u.state="errored",S.status!==404?this._source.fire(new i.ErrorEvent(S,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new i.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const b in this._tiles){var y=this._tiles[b];y.upload(u),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(kt).map(u=>u.key)}getRenderableIds(u){var y=[];for(const b in this._tiles)this._isIdRenderable(b,u)&&y.push(this._tiles[b]);return u?y.sort((M,j)=>{var M=M.tileID,j=j.tileID,W=new i.Point(M.canonical.x,M.canonical.y)._rotate(this.transform.angle),se=new i.Point(j.canonical.x,j.canonical.y)._rotate(this.transform.angle);return M.overscaledZ-j.overscaledZ||se.y-W.y||se.x-W.x}).map(b=>b.tileID.key):y.map(b=>b.tileID).sort(kt).map(b=>b.key)}hasRenderableParent(u){return u=this.findLoadedParent(u,0),!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(u,y){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(y||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,y){return i.__awaiter(this,void 0,void 0,function*(){var b=this._tiles[u];b&&(b.state!=="loading"&&(b.state=y),yield this._loadTile(b,u,y))})}_tileLoaded(u,y,b){u.timeAdded=g.now(),b==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(y,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new i.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){var y=this.getRenderableIds();for(let M=0;M<y.length;M++){var b=y[M];u.neighboringTiles&&u.neighboringTiles[b]&&(S(u,b=this.getTileByID(b)),S(b,u))}function S(M,j){M.needsHillshadePrepare=!0,M.needsTerrainPrepare=!0;let W=j.tileID.canonical.x-M.tileID.canonical.x;var se=j.tileID.canonical.y-M.tileID.canonical.y,Se=Math.pow(2,M.tileID.canonical.z),Pe=j.tileID.key;W===0&&se==0||1<Math.abs(se)||(1<Math.abs(W)&&(Math.abs(W+Se)===1?W+=Se:Math.abs(W-Se)===1&&(W-=Se)),j.dem&&M.dem&&(M.dem.backfillBorder(j.dem,W,se),M.neighboringTiles)&&M.neighboringTiles[Pe]&&(M.neighboringTiles[Pe].backfilled=!0))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,y,b,S){for(const j in this._tiles){let W=this._tiles[j];if(!(S[j]||!W.hasData()||W.tileID.overscaledZ<=y||W.tileID.overscaledZ>b)){let se=W.tileID;for(;W&&W.tileID.overscaledZ>y+1;){var M=W.tileID.scaledTo(W.tileID.overscaledZ-1);(W=this._tiles[M.key])&&W.hasData()&&(se=M)}let Se=se;for(;Se.overscaledZ>y;)if(u[(Se=Se.scaledTo(Se.overscaledZ-1)).key]){S[se.key]=se;break}}}}findLoadedParent(u,y){var b;if(u.key in this._loadedParentTiles)return(b=this._loadedParentTiles[u.key])&&b.tileID.overscaledZ>=y?b:null;for(let M=u.overscaledZ-1;M>=y;M--){var S=u.scaledTo(M),S=this._getLoadedTile(S);if(S)return S}}_getLoadedTile(u){var y=this._tiles[u.key];return y&&y.hasData()?y:this._cache.getByKey(u.wrapped().key)}updateCacheSize(S){var b=Math.ceil(S.width/this._source.tileSize)+1,S=Math.ceil(S.height/this._source.tileSize)+1,y=this._maxTileCacheZoomLevels===null?i.config.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels,b=Math.floor(b*S*y),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(S)}handleWrapJump(u){var y=this._prevLng===void 0?u:this._prevLng,b=Math.round((u-y)/360);if(this._prevLng=u,b){var S={};for(const W in this._tiles){var M=this._tiles[W];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+b),S[M.tileID.key]=M}this._tiles=S;for(const W in this._timers)clearTimeout(this._timers[W]),delete this._timers[W];for(const W in this._tiles){var j=this._tiles[W];this._setTileReloadTimer(W,j)}}}update(u,y){if(this.transform=u,this.terrain=y,this._sourceLoaded&&!this._paused){this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};let bt;this.used||this.usedForTerrain?this._source.tileID?bt=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ut=>new i.OverscaledTileID(Ut.canonical.z,Ut.wrap,Ut.canonical.z,Ut.canonical.x,Ut.canonical.y)):(bt=u.coveringTiles({tileSize:(this.usedForTerrain?this:this._source).tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:y}),this._source.hasTile&&(bt=bt.filter(Ut=>this._source.hasTile(Ut)))):bt=[];var u=u.coveringZoomLevel(this._source),b=Math.max(u-St.maxOverzooming,this._source.minzoom),S=Math.max(u+St.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){var M,j={};for(const Ut of bt)Ut.canonical.z>this._source.minzoom&&(j[(M=Ut.scaledTo(Ut.canonical.z-1)).key]=M,j[(M=Ut.scaledTo(Math.max(this._source.minzoom,Math.min(Ut.canonical.z,5)))).key]=M);bt=bt.concat(Object.values(j))}var W=bt.length===0&&!this._updated&&this._didEmitContent,se=(this._updated=!0,W&&this.fire(new i.Event("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id})),this._updateRetainedTiles(bt,u));if(cn(this._source.type)){var Se={},Pe={},W=Object.keys(se),me=g.now();for(const Bt of W){var Me=se[Bt],Xe=this._tiles[Bt];!Xe||Xe.fadeEndTime!==0&&Xe.fadeEndTime<=me||((Xe=this.findLoadedParent(Me,b))&&(this._addTile(Xe.tileID),Se[Xe.tileID.key]=Xe.tileID),Pe[Bt]=Me)}this._retainLoadedChildren(Pe,u,S,se);for(const Bt in Se)se[Bt]||(this._coveredTiles[Bt]=!0,se[Bt]=Se[Bt]);if(y){var et={},rt={};for(const Bt of bt)this._tiles[Bt.key].hasData()?et[Bt.key]=Bt:rt[Bt.key]=Bt;for(const Bt in rt){var tt=rt[Bt].children(this._source.maxzoom);this._tiles[tt[0].key]&&this._tiles[tt[1].key]&&this._tiles[tt[2].key]&&this._tiles[tt[3].key]&&(et[tt[0].key]=se[tt[0].key]=tt[0],et[tt[1].key]=se[tt[1].key]=tt[1],et[tt[2].key]=se[tt[2].key]=tt[2],et[tt[3].key]=se[tt[3].key]=tt[3],delete rt[Bt])}for(const Bt in rt){var ht=this.findLoadedParent(rt[Bt],this._source.minzoom);if(ht){et[ht.tileID.key]=se[ht.tileID.key]=ht.tileID;for(const ln in et)et[ln].isChildOf(ht.tileID)&&delete et[ln]}}for(const Bt in this._tiles)et[Bt]||(this._coveredTiles[Bt]=!0)}}for(const Ut in se)this._tiles[Ut].clearFadeHold();for(const Ut of i.keysDifference(this._tiles,se)){var gt=this._tiles[Ut];gt.hasSymbolBuckets&&!gt.holdingForFade()?gt.setHoldDuration(this.map._fadeDuration):gt.hasSymbolBuckets&&!gt.symbolFadeFinished()||this._removeTile(Ut)}this._updateLoadedParentTileCache()}}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,y){var b={},S={},M=Math.max(y-St.maxOverzooming,this._source.minzoom),j=Math.max(y+St.maxUnderzooming,this._source.minzoom),W={};for(const Xe of u){var se=this._addTile(Xe);b[Xe.key]=Xe,se.hasData()||y<this._source.maxzoom&&(W[Xe.key]=Xe)}this._retainLoadedChildren(W,y,j,b);for(const Xe of u){let et=this._tiles[Xe.key];if(!et.hasData()){if(y+1>this._source.maxzoom){var Se=Xe.children(this._source.maxzoom)[0],Pe=this.getTile(Se);if(Pe&&Pe.hasData()){b[Se.key]=Se;continue}}else if(Pe=Xe.children(this._source.maxzoom),b[Pe[0].key]&&b[Pe[1].key]&&b[Pe[2].key]&&b[Pe[3].key])continue;let rt=et.wasRequested();for(let tt=Xe.overscaledZ-1;tt>=M;--tt){var me=Xe.scaledTo(tt);if(S[me.key])break;if(S[me.key]=!0,et=!(et=this.getTile(me))&&rt?this._addTile(me):et){var Me=et.hasData();if((rt||Me)&&(b[me.key]=me),rt=et.wasRequested(),Me)break}}}}return b}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const b in this._tiles){var u=[];let S,M=this._tiles[b].tileID;for(;0<M.overscaledZ;){if(M.key in this._loadedParentTiles){S=this._loadedParentTiles[M.key];break}u.push(M.key);var y=M.scaledTo(M.overscaledZ-1);if(S=this._getLoadedTile(y))break;M=y}for(const j of u)this._loadedParentTiles[j]=S}}_addTile(u){let y=this._tiles[u.key];var b;return y||((y=this._cache.getAndRemove(u))&&(this._setTileReloadTimer(u.key,y),y.tileID=u,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[u.key])&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,y)),(b=y)||(y=new Yt(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(y,u.key,y.state)),y.uses++,this._tiles[u.key]=y,b)||this._source.fire(new i.Event("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y}_setTileReloadTimer(u,y){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]),y=y.getExpiryTimeout(),y&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},y))}_removeTile(u){var y=this._tiles[u];y&&(y.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),0<y.uses||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,y,b){var S=[];const M=this.transform;if(M){var b=b?M.getCameraQueryGeometry(u):u,j=u.map(gt=>M.pointCoordinate(gt,this.terrain)),W=b.map(gt=>M.pointCoordinate(gt,this.terrain)),se=this.getIds();let et=1/0,rt=1/0,tt=-1/0,ht=-1/0;for(const gt of W)et=Math.min(et,gt.x),rt=Math.min(rt,gt.y),tt=Math.max(tt,gt.x),ht=Math.max(ht,gt.y);for(let gt=0;gt<se.length;gt++){var Se=this._tiles[se[gt]];if(!Se.holdingForFade()){const bt=Se.tileID;var Pe=Math.pow(2,M.zoom-Se.tileID.overscaledZ),me=y*Se.queryPadding*i.EXTENT/Se.tileSize/Pe,Me=[bt.getTilePoint(new i.MercatorCoordinate(et,rt)),bt.getTilePoint(new i.MercatorCoordinate(tt,ht))];Me[0].x-me<i.EXTENT&&Me[0].y-me<i.EXTENT&&0<=Me[1].x+me&&0<=Me[1].y+me&&(Me=j.map($t=>bt.getTilePoint($t)),me=W.map($t=>bt.getTilePoint($t)),S.push({tile:Se,tileID:bt,queryGeometry:Me,cameraQueryGeometry:me,scale:Pe}))}}}return S}getVisibleCoordinates(u){u=this.getRenderableIds(u).map(y=>this._tiles[y].tileID);for(const y of u)y.posMatrix=this.transform.calculatePosMatrix(y.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(cn(this._source.type)){var u=g.now();for(const y in this._tiles)if(this._tiles[y].fadeEndTime>=u)return!0}return!1}setFeatureState(u,y,b){this._state.updateState(u=u||"_geojsonTileLayer",y,b)}removeFeatureState(u,y,b){this._state.removeFeatureState(u=u||"_geojsonTileLayer",y,b)}getFeatureState(u,y){return this._state.getState(u=u||"_geojsonTileLayer",y)}setDependencies(u,y,b){u=this._tiles[u],u&&u.setDependencies(y,b)}reloadTilesForDependencies(u,y){for(const b in this._tiles)this._tiles[b].hasDependency(u,y)&&this._reloadTile(b,"reloading");this._cache.filter(b=>!b.hasDependency(u,y))}}function kt(E,u){var y=Math.abs(2*E.wrap)-(E.wrap<0),b=Math.abs(2*u.wrap)-(u.wrap<0);return E.overscaledZ-u.overscaledZ||b-y||u.canonical.y-E.canonical.y||u.canonical.x-E.canonical.x}function cn(E){return E==="raster"||E==="image"||E==="video"}St.maxOverzooming=10,St.maxUnderzooming=3;class an{constructor(u,y){this.reset(u,y)}reset(u,y){this.points=u||[],this._distances=[0];for(let b=1;b<this.points.length;b++)this._distances[b]=this._distances[b-1]+this.points[b].dist(this.points[b-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(y||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(M){if(this.points.length===1)return this.points[0];M=i.clamp(M,0,1);let y=1,b=this._distances[y];for(var S=M*this.paddedLength+this.padding;b<S&&y<this._distances.length;)b=this._distances[++y];var M=y-1,W=this._distances[M],j=b-W,W=0<j?(S-W)/j:0;return this.points[M].mult(1-W).add(this.points[y].mult(W))}}function Qn(E,u){return E==="always"||E!=="never"&&u!=="never"}class tr{constructor(u,y,b){var S=this.boxCells=[],M=this.circleCells=[];this.xCellCount=Math.ceil(u/b),this.yCellCount=Math.ceil(y/b);for(let j=0;j<this.xCellCount*this.yCellCount;j++)S.push([]),M.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=y,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/y,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,y,b,S,M){this._forEachCell(y,b,S,M,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(y),this.bboxes.push(b),this.bboxes.push(S),this.bboxes.push(M)}insertCircle(u,y,b,S){this._forEachCell(y-S,b-S,y+S,b+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(y),this.circles.push(b),this.circles.push(S)}_insertBoxCell(u,y,b,S,M,j){this.boxCells[M].push(j)}_insertCircleCell(u,y,b,S,M,j){this.circleCells[M].push(j)}_query(u,y,b,S,M,j,W){if(b<0||u>this.width||S<0||y>this.height)return[];var se=[];if(u<=0&&y<=0&&this.width<=b&&this.height<=S){if(M)return[{key:null,x1:u,y1:y,x2:b,y2:S}];for(let Me=0;Me<this.boxKeys.length;Me++)se.push({key:this.boxKeys[Me],x1:this.bboxes[4*Me],y1:this.bboxes[4*Me+1],x2:this.bboxes[4*Me+2],y2:this.bboxes[4*Me+3]});for(let Me=0;Me<this.circleKeys.length;Me++){var Se=this.circles[3*Me],Pe=this.circles[3*Me+1],me=this.circles[3*Me+2];se.push({key:this.circleKeys[Me],x1:Se-me,y1:Pe-me,x2:Se+me,y2:Pe+me})}}else this._forEachCell(u,y,b,S,this._queryCell,se,{hitTest:M,overlapMode:j,seenUids:{box:{},circle:{}}},W);return se}query(u,y,b,S){return this._query(u,y,b,S,!1,null)}hitTest(u,y,b,S,M,j){return 0<this._query(u,y,b,S,!0,M,j).length}hitTestCircle(u,y,b,S,M){var j=u-b,W=u+b,se=y-b,Se=y+b;return!(W<0||j>this.width||Se<0||se>this.height)&&(this._forEachCell(j,se,W,Se,this._queryCellCircle,j=[],{hitTest:!0,overlapMode:S,circle:{x:u,y,radius:b},seenUids:{box:{},circle:{}}},M),0<j.length)}_queryCell(u,y,b,S,M,j,Me,se){var{seenUids:Se,hitTest:Pe,overlapMode:me}=Me,Me=this.boxCells[M];if(Me!==null){var Xe=this.bboxes;for(const Ut of Me)if(!Se.box[Ut]){Se.box[Ut]=!0;var et=4*Ut,rt=this.boxKeys[Ut];if(u<=Xe[2+et]&&y<=Xe[3+et]&&b>=Xe[0+et]&&S>=Xe[1+et]&&(!se||se(rt))&&(!Pe||!Qn(me,rt.overlapMode))&&(j.push({key:rt,x1:Xe[et],y1:Xe[1+et],x2:Xe[2+et],y2:Xe[3+et]}),Pe))return!0}}if(Me=this.circleCells[M],Me!==null){var tt=this.circles;for(const Ut of Me)if(!Se.circle[Ut]){Se.circle[Ut]=!0;var ht=3*Ut,gt=this.circleKeys[Ut];if(this._circleAndRectCollide(tt[ht],tt[1+ht],tt[2+ht],u,y,b,S)&&(!se||se(gt))&&(!Pe||!Qn(me,gt.overlapMode))){var bt=tt[ht],$t=tt[1+ht],ht=tt[2+ht];if(j.push({key:gt,x1:bt-ht,y1:$t-ht,x2:bt+ht,y2:$t+ht}),Pe)return!0}}}return!1}_queryCellCircle(u,y,b,S,M,j,Me,se){var{circle:Se,seenUids:Pe,overlapMode:me}=Me,Me=this.boxCells[M];if(Me!==null){var Xe=this.bboxes;for(const bt of Me)if(!Pe.box[bt]){Pe.box[bt]=!0;var et=4*bt,rt=this.boxKeys[bt];if(this._circleAndRectCollide(Se.x,Se.y,Se.radius,Xe[0+et],Xe[1+et],Xe[2+et],Xe[3+et])&&(!se||se(rt))&&!Qn(me,rt.overlapMode))return j.push(!0),!0}}if(Me=this.circleCells[M],Me!==null){var tt=this.circles;for(const bt of Me)if(!Pe.circle[bt]){Pe.circle[bt]=!0;var ht=3*bt,gt=this.circleKeys[bt];if(this._circlesCollide(tt[ht],tt[1+ht],tt[2+ht],Se.x,Se.y,Se.radius)&&(!se||se(gt))&&!Qn(me,gt.overlapMode))return j.push(!0),!0}}}_forEachCell(u,y,b,S,M,j,W,se){var Se=this._convertToXCellCoord(u),Pe=this._convertToYCellCoord(y),me=this._convertToXCellCoord(b),Me=this._convertToYCellCoord(S);for(let et=Se;et<=me;et++)for(let rt=Pe;rt<=Me;rt++){var Xe=this.xCellCount*rt+et;if(M.call(this,u,y,b,S,Xe,j,W,se))return}}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,y,b,S,M,j){return S-=u,u=M-y,M=b+j,S*S+u*u<M*M}_circleAndRectCollide(u,y,b,S,M,j,W){return j=(j-S)/2,u=Math.abs(u-(S+j)),!(j+b<u||(S=(W-M)/2)+b<(W=Math.abs(y-(M+S)))||!(u<=j||W<=S||(y=u-j)*y+(M=W-S)*M<=b*b))}}function lr(E,u,y,b,S){var M=i.create();return u?(i.scale(M,M,[1/S,1/S,1]),y||i.rotateZ(M,M,b.angle)):i.multiply(M,b.labelPlaneMatrix,E),M}function Le(E,u,y,b,S){return u?(u=i.clone(E),i.scale(u,u,[S,S,1]),y||i.rotateZ(u,u,-b.angle),u):b.glCoordMatrix}function de(E,u,y){let b;return y?(b=[E.x,E.y,y(E.x,E.y),1],i.transformMat4(b,b,u)):Nt(b=[E.x,E.y,0,1],b,u),y=b[3],{point:new i.Point(b[0]/y,b[1]/y),signedDistanceFromCamera:y}}function xe(E,u){return .5+E/u*.5}function Ee(E,tt,y,b,S,M,j,W,se,Se,Pe,me,Me){var ht=W.glyphStartIndex+W.numGlyphs,Xe=W.lineStartIndex,et=W.lineStartIndex+W.lineLength,rt=tt.getoffsetX(W.glyphStartIndex),tt=tt.getoffsetX(ht-1),ht=He(E*rt,y,b,S,M,j,W.segment,Xe,et,se,Se,Pe,me,Me);return ht&&(rt=He(E*tt,y,b,S,M,j,W.segment,Xe,et,se,Se,Pe,me,Me))?{first:ht,last:rt}:null}function Ye(E,u,y,b){if(E===i.WritingMode.horizontal){var S=Math.abs(y.y-u.y);if(Math.abs(y.x-u.x)*b<S)return{useVertical:!0}}return(E===i.WritingMode.vertical?u.y<y.y:u.x>y.x)?{needsFlipping:!0}:null}function lt(E,u,y,b,S,M,j,W,se,Se,Pe,me,Me,Xe,et,rt){var tt=u/24,ht=E.lineOffsetX*tt,gt=E.lineOffsetY*tt;let bt;if(1<E.numGlyphs){var $t=E.glyphStartIndex+E.numGlyphs,Ut=E.lineStartIndex,Bt=E.lineStartIndex+E.lineLength,u=Ee(tt,W,ht,gt,y,Pe,me,E,se,M,Me,et,rt);if(!u)return{notEnoughRoom:!0};var ln=de(u.first.point,j,rt).point,j=de(u.last.point,j,rt).point;if(b&&!y&&(ln=Ye(E.writingMode,ln,j,Xe),ln))return ln;bt=[u.first];for(let Sn=E.glyphStartIndex+1;Sn<$t-1;Sn++)bt.push(He(tt*W.getoffsetX(Sn),ht,gt,y,Pe,me,E.segment,Ut,Bt,se,M,Me,et,rt));bt.push(u.last)}else{if(b&&!y&&(j=de(me,S,rt).point,ln=E.lineStartIndex+E.segment+1,u=new i.Point(se.getx(ln),se.gety(ln)),b=de(u,S,rt),ln=0<b.signedDistanceFromCamera?b.point:Ce(me,u,j,1,S,rt),b=Ye(E.writingMode,j,ln,Xe),b))return b;if(u=He(tt*W.getoffsetX(E.glyphStartIndex),ht,gt,y,Pe,me,E.segment,E.lineStartIndex,E.lineStartIndex+E.lineLength,se,M,Me,et,rt),!u)return{notEnoughRoom:!0};bt=[u]}for(const en of bt)i.addDynamicAttributes(Se,en.point,en.angle);return{}}function Ce(E,u,y,b,S,M){return E=de(E.add(E.sub(u)._unit()),S,M).point,u=y.sub(E),y.add(u._mult(b/u.mag()))}function ke(E,S){var y,b,{projectionCache:S,lineVertexArray:M,labelPlaneMatrix:j,tileAnchorPoint:W,distanceFromAnchor:se,getElevation:Se,previousVertex:Pe,direction:me,absOffsetX:Me}=S;return S.projections[E]||(0<(b=de(y=new i.Point(M.getx(E),M.gety(E)),j,Se)).signedDistanceFromCamera?(S.projections[E]=b.point,b.point):(S=E-me,Ce(se===0?W:new i.Point(M.getx(S),M.gety(S)),y,Pe,Me-se+1,j,Se)))}function De(E,u,y){return E._unit()._perp()._mult(u*y)}function He(E,u,y,b,S,M,j,W,se,Se,Pe,me,Me,Xe){E=b?E-u:E+u;let et=0<E?1:-1,rt=0,tt=(b&&(et*=-1,rt=Math.PI),et<0&&(rt+=Math.PI),0<et?W+j:W+j+1),ht=S,gt=S,bt,$t,Ut=0,Bt=0;var ln=Math.abs(E),en=[];let yn;for(;Ut+Bt<=ln;){if((tt+=et)<W||tt>=se)return null;Ut+=Bt,gt=ht,$t=bt;var Sn={projectionCache:me,lineVertexArray:Se,labelPlaneMatrix:Pe,tileAnchorPoint:M,distanceFromAnchor:Ut,getElevation:Xe,previousVertex:gt,direction:et,absOffsetX:ln};if(ht=ke(tt,Sn),y===0)en.push(gt),yn=ht.sub(gt);else{let nr;var Fn=ht.sub(gt);nr=Fn.mag()===0?De(ke(tt+et,Sn).sub(ht),y,et):De(Fn,y,et),$t=$t||gt.add(nr),bt=function(Yn,zn,bn,Wn,hr,Nn,Lr,mo){var{projectionCache:kr,direction:Vr}=mo;if(!kr.offsets[Yn]){if(zn=bn.add(zn),Yn+Vr<Wn||hr<=Yn+Vr)return kr.offsets[Yn]=zn;Wn=ke(Yn+Vr,mo),hr=De(Wn.sub(bn),Lr,Vr),mo=bn.add(hr),Lr=Wn.add(hr),kr.offsets[Yn]=i.findLineIntersection(Nn,zn,mo,Lr)||zn}return kr.offsets[Yn]}(tt,nr,ht,W,se,$t,y,Sn),en.push($t),yn=bt.sub($t)}Bt=yn.mag()}return u=(ln-Ut)/Bt,b=yn._mult(u)._add($t||gt),j=rt+Math.atan2(ht.y-gt.y,ht.x-gt.x),en.push(b),{point:b,angle:Me?j:0,path:en}}const vt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ct(E,u){for(let b=0;b<E;b++){var y=u.length;u.resize(y+4),u.float32.set(vt,3*y)}}function Nt(E,S,y){var b=S[0],S=S[1];E[0]=y[0]*b+y[4]*S+y[12],E[1]=y[1]*b+y[5]*S+y[13],E[3]=y[3]*b+y[7]*S+y[15]}class jt{constructor(u,y=new tr(u.width+200,u.height+200,25),b=new tr(u.width+200,u.height+200,25)){this.transform=u,this.grid=y,this.ignoredGrid=b,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+100,this.screenBottomBoundary=u.height+100,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(Me,y,Se,W,M,se){var W=this.projectAndGetPerspectiveRatio(W,Me.anchorPointX,Me.anchorPointY,se),se=Se*W.perspectiveRatio,Se=Me.x1*se+W.point.x,Pe=Me.y1*se+W.point.y,me=Me.x2*se+W.point.x,Me=Me.y2*se+W.point.y;return!this.isInsideGrid(Se,Pe,me,Me)||y!=="always"&&this.grid.hitTest(Se,Pe,me,Me,y,M)||W.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[Se,Pe,me,Me],offscreen:this.isOffscreen(Se,Pe,me,Me)}}placeCollisionCircles(u,y,b,$t,bt,ht,W,se,Se,gt,me,Me,Xe,et){var rt=[],tt=new i.Point(y.anchorX,y.anchorY),ht=de(tt,ht,et),ht=xe(this.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),gt=(gt?bt/ht:bt*ht)/i.ONE_EM,bt=de(tt,W,et).point,$t=Ee(gt,$t,y.lineOffsetX*gt,y.lineOffsetY*gt,!1,bt,tt,y,b,W,{projections:{},offsets:{}},!1,et);let Ut=!1,Bt=!1,ln=!0;if($t){var en=.5*Me*ht+Xe,gt=new i.Point(-100,-100),bt=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),yn=new an,Sn=$t.first,Fn=$t.last;let _r=[];for(let qr=Sn.path.length-1;1<=qr;qr--)_r.push(Sn.path[qr]);for(let qr=1;qr<Fn.path.length;qr++)_r.push(Fn.path[qr]);var nr=2.5*en;se&&(tt=_r.map(qr=>de(qr,se,et)),_r=tt.some(qr=>qr.signedDistanceFromCamera<=0)?[]:tt.map(qr=>qr.point));let xo=[];if(0<_r.length){var Yn=_r[0].clone(),zn=_r[0].clone();for(let qr=1;qr<_r.length;qr++)Yn.x=Math.min(Yn.x,_r[qr].x),Yn.y=Math.min(Yn.y,_r[qr].y),zn.x=Math.max(zn.x,_r[qr].x),zn.y=Math.max(zn.y,_r[qr].y);xo=Yn.x>=gt.x&&zn.x<=bt.x&&Yn.y>=gt.y&&zn.y<=bt.y?[_r]:zn.x<gt.x||Yn.x>bt.x||zn.y<gt.y||Yn.y>bt.y?[]:i.clipLine([_r],gt.x,gt.y,bt.x,bt.y)}for(const qr of xo){yn.reset(qr,.25*en);let Xr=0;Xr=yn.length<=.5*en?1:Math.ceil(yn.paddedLength/nr)+1;for(let ei=0;ei<Xr;ei++){var Wn=ei/Math.max(Xr-1,1),Wn=yn.lerp(Wn),bn=Wn.x+100,Wn=Wn.y+100,hr=(rt.push(bn,Wn,en,0),bn-en),Nn=Wn-en,Lr=bn+en,mo=Wn+en;if(ln=ln&&this.isOffscreen(hr,Nn,Lr,mo),Bt=Bt||this.isInsideGrid(hr,Nn,Lr,mo),u!=="always"&&this.grid.hitTestCircle(bn,Wn,en,u,me)&&(Ut=!0,!Se))return{circles:[],offscreen:!1,collisionDetected:Ut}}}}return{circles:!Se&&Ut||!Bt||ht<this.perspectiveRatioCutoff?[]:rt,offscreen:ln,collisionDetected:Ut}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};var y=[];let b=1/0,S=1/0,M=-1/0,j=-1/0;for(const Me of u){var W=new i.Point(Me.x+100,Me.y+100);b=Math.min(b,W.x),S=Math.min(S,W.y),M=Math.max(M,W.x),j=Math.max(j,W.y),y.push(W)}var se={},Se={};for(const Me of this.grid.query(b,S,M,j).concat(this.ignoredGrid.query(b,S,M,j))){var Pe,me=Me.key;se[me.bucketInstanceId]===void 0&&(se[me.bucketInstanceId]={}),se[me.bucketInstanceId][me.featureIndex]||(Pe=[new i.Point(Me.x1,Me.y1),new i.Point(Me.x2,Me.y1),new i.Point(Me.x2,Me.y2),new i.Point(Me.x1,Me.y2)],i.polygonIntersectsPolygon(y,Pe)&&(se[me.bucketInstanceId][me.featureIndex]=!0,Se[me.bucketInstanceId]===void 0&&(Se[me.bucketInstanceId]=[]),Se[me.bucketInstanceId].push(me.featureIndex)))}return Se}insertCollisionBox(u,y,b,S,M,j){(b?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:M,collisionGroupID:j,overlapMode:y},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,y,b,S,M,j){var W=b?this.ignoredGrid:this.grid,se={bucketInstanceId:S,featureIndex:M,collisionGroupID:j,overlapMode:y};for(let Se=0;Se<u.length;Se+=4)W.insertCircle(se,u[Se],u[Se+1],u[Se+2])}projectAndGetPerspectiveRatio(u,y,b,S){let M;return S?(M=[y,b,S(y,b),1],i.transformMat4(M,M,u)):Nt(M=[y,b,0,1],M,u),{point:new i.Point((M[0]/M[3]+1)/2*this.transform.width+100,(-M[1]/M[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/M[3]*.5}}isOffscreen(u,y,b,S){return b<100||u>=this.screenRightBoundary||S<100||y>this.screenBottomBoundary}isInsideGrid(u,y,b,S){return 0<=b&&u<this.gridRightBoundary&&0<=S&&y<this.gridBottomBoundary}getViewportMatrix(){var u=i.identity([]);return i.translate(u,u,[-100,-100,0]),u}}function Ht(E,u,y){return u*(i.EXTENT/(E.tileSize*Math.pow(2,y-E.tileID.overscaledZ)))}class Ft{constructor(u,y,b,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?y:-y))):S&&b?1:0,this.placed=b}isHidden(){return this.opacity===0&&!this.placed}}class vn{constructor(u,y,b,S,M){this.text=new Ft(u?u.text:null,y,b,M),this.icon=new Ft(u?u.icon:null,y,S,M)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gn{constructor(u,y,b){this.text=u,this.icon=y,this.skipFade=b}}class _n{constructor(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]}}class Dn{constructor(u,y,b,S,M){this.bucketInstanceId=u,this.featureIndex=y,this.sourceLayerIndex=b,this.bucketIndex=S,this.tileID=M}}class ft{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const y=++this.maxGroupID;this.collisionGroups[u]={ID:y,predicate:b=>b.collisionGroupID===y}}return this.collisionGroups[u]}}function dt(M,u,y,b,S){var{horizontalAlign:M,verticalAlign:j}=i.getAnchorAlignment(M);return new i.Point(-(M-.5)*u+b[0]*S,-(j-.5)*y+b[1]*S)}function Wt(j,Me,y,b,S,M){var{x1:j,x2:W,y1:se,y2:Se,anchorPointX:Pe,anchorPointY:me}=j,Me=new i.Point(Me,y);return b&&Me._rotate(S?M:-M),{x1:j+Me.x,y1:se+Me.y,x2:W+Me.x,y2:Se+Me.y,anchorPointX:Pe,anchorPointY:me}}class Mn{constructor(u,y,b,S,M){this.transform=u.clone(),this.terrain=y,this.collisionIndex=new jt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=b,this.retainedQueryData={},this.collisionGroups=new ft(S),this.collisionCircleArrays={},(this.prevPlacement=M)&&(M.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,y,b,S){var M=b.getBucket(y),j=b.latestFeatureIndex;if(M&&j&&y.id===M.layerIds[0]){var y=b.collisionBoxArray,W=M.layers[0].layout,se=Math.pow(2,this.transform.zoom-b.tileID.overscaledZ),Se=b.tileSize/i.EXTENT,Pe=this.transform.calculatePosMatrix(b.tileID.toUnwrapped()),me=W.get("text-pitch-alignment")==="map",Me=W.get("text-rotation-alignment")==="map",Xe=Ht(b,1,this.transform.zoom),et=lr(Pe,me,Me,this.transform,Xe);let $t=null;me&&(me=Le(Pe,me,Me,this.transform,Xe),$t=i.multiply([],this.transform.labelPlaneMatrix,me)),this.retainedQueryData[M.bucketInstanceId]=new Dn(M.bucketInstanceId,j,M.sourceLayerIndex,M.index,b.tileID);var rt={bucket:M,layout:W,posMatrix:Pe,textLabelPlaneMatrix:et,labelToScreenMatrix:$t,scale:se,textPixelRatio:Se,holdingForFade:b.holdingForFade(),collisionBoxArray:y,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(M.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(M.sourceID)};if(S)for(const Ut of M.sortKeyRanges){var{sortKey:tt,symbolInstanceStart:ht,symbolInstanceEnd:gt}=Ut;u.push({sortKey:tt,symbolInstanceStart:ht,symbolInstanceEnd:gt,parameters:rt})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:M.symbolInstances.length,parameters:rt})}}attemptAnchorPlacement(gt,$t,b,S,M,j,W,se,Se,Pe,me,Me,Xe,et,rt,tt){var ht=i.TextAnchorEnum[gt.textAnchor],gt=[gt.textOffset0,gt.textOffset1],bt=dt(ht,b,S,gt,M),$t=this.collisionIndex.placeCollisionBox(Wt($t,bt.x,bt.y,j,W,this.transform.angle),me,se,Se,Pe.predicate,tt);if(!(rt&&this.collisionIndex.placeCollisionBox(Wt(rt,bt.x,bt.y,j,W,this.transform.angle),me,se,Se,Pe.predicate,tt).box.length===0)&&0<$t.box.length){let Ut;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID].text&&(Ut=this.prevPlacement.variableOffsets[Me.crossTileID].anchor),Me.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Me.crossTileID]={textOffset:gt,width:b,height:S,anchor:ht,textBoxScale:M,prevAnchor:Ut},this.markUsedJustification(Xe,ht,Me,et),Xe.allowVerticalPlacement&&(this.markUsedOrientation(Xe,et,Me),this.placedOrientations[Me.crossTileID]=et),{shift:bt,placedGlyphBoxes:$t}}}placeLayerBucketPart(u,y,b){const{bucket:S,layout:M,posMatrix:j,textLabelPlaneMatrix:W,labelToScreenMatrix:se,textPixelRatio:Se,holdingForFade:Pe,collisionBoxArray:me,partiallyEvaluatedTextSize:Me,collisionGroup:Xe}=u.parameters,et=M.get("text-optional"),rt=M.get("icon-optional"),tt=i.getOverlapMode(M,"text-overlap","text-allow-overlap"),ht=tt==="always",gt=i.getOverlapMode(M,"icon-overlap","icon-allow-overlap");var bt=gt==="always";const $t=M.get("text-rotation-alignment")==="map",Ut=M.get("text-pitch-alignment")==="map",Bt=M.get("icon-text-fit")!=="none";var ln=M.get("symbol-z-order")==="viewport-y";const en=ht&&(bt||!S.hasIconData()||rt),yn=bt&&(ht||!S.hasTextData()||et),Sn=(!S.collisionArrays&&me&&S.deserializeCollisionBoxes(me),this.retainedQueryData[S.bucketInstanceId].tileID),Fn=this.terrain?(bn,Wn)=>this.terrain.getElevation(Sn,bn,Wn):null;var nr=(bn,Wn)=>{if(!y[bn.crossTileID])if(Pe)this.placements[bn.crossTileID]=new gn(!1,!1,!1);else{let Vr=!1,_r=!1,xo=!0,qr=null,Xr={box:null,offscreen:null},ei={box:null,offscreen:null},xi=null,al=null,Ra=0,Co=0,Ro=0;Wn.textFeatureIndex?Ra=Wn.textFeatureIndex:bn.useRuntimeCollisionCircles&&(Ra=bn.featureIndex),Wn.verticalTextFeatureIndex&&(Co=Wn.verticalTextFeatureIndex);const Fl=Wn.textBox;if(Fl){var hr=ro=>{let Oo=i.WritingMode.horizontal;return S.allowVerticalPlacement&&!ro&&this.prevPlacement&&(ro=this.prevPlacement.placedOrientations[bn.crossTileID])&&(this.placedOrientations[bn.crossTileID]=ro,Oo=ro,this.markUsedOrientation(S,Oo,bn)),Oo},Nn=(ro,Oo)=>{if(S.allowVerticalPlacement&&0<bn.numVerticalGlyphVertices&&Wn.verticalTextBox){for(const ja of S.writingModes)if(ja===i.WritingMode.vertical?(Xr=Oo(),ei=Xr):Xr=ro(),Xr&&Xr.box&&Xr.box.length)break}else Xr=ro()};const Bo=bn.textAnchorOffsetStartIndex,Ci=bn.textAnchorOffsetEndIndex;if(Ci===Bo){const ro=(Oo,ja)=>(Oo=this.collisionIndex.placeCollisionBox(Oo,tt,Se,j,Xe.predicate,Fn),Oo&&Oo.box&&Oo.box.length&&(this.markUsedOrientation(S,ja,bn),this.placedOrientations[bn.crossTileID]=ja),Oo);Nn(()=>ro(Fl,i.WritingMode.horizontal),()=>{var Oo=Wn.verticalTextBox;return S.allowVerticalPlacement&&0<bn.numVerticalGlyphVertices&&Oo?ro(Oo,i.WritingMode.vertical):{box:null,offscreen:null}}),hr(Xr&&Xr.box&&Xr.box.length)}else{let ro=i.TextAnchorEnum[(Lr=(Lr=this.prevPlacement)==null?void 0:Lr.variableOffsets[bn.crossTileID])==null?void 0:Lr.anchor];const Oo=(ti,da,zl)=>{var Sa=ti.x2-ti.x1,Si=ti.y2-ti.y1,Fs=bn.textBoxScale,zs=Bt&&gt==="never"?da:null;let Wo={box:[],offscreen:!1},ii=tt==="never"?1:2,hu="never";ro&&ii++;for(let ni=0;ni<ii;ni++){for(let fu=Bo;fu<Ci;fu++){var Bl=S.textAnchorOffsets.get(fu);if((!ro||Bl.textAnchor===ro)&&(Bl=this.attemptAnchorPlacement(Bl,ti,Sa,Si,Fs,$t,Ut,Se,j,Xe,hu,bn,S,zl,zs,Fn),Bl&&(Wo=Bl.placedGlyphBoxes)&&Wo.box&&Wo.box.length))return Vr=!0,qr=Bl.shift,Wo}ro?ro=null:hu=tt}return Wo};Nn(()=>Oo(Fl,Wn.iconBox,i.WritingMode.horizontal),()=>{var ti=Wn.verticalTextBox,da=Xr&&Xr.box&&Xr.box.length;return S.allowVerticalPlacement&&!da&&0<bn.numVerticalGlyphVertices&&ti?Oo(ti,Wn.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}}),Xr&&(Vr=Xr.box,xo=Xr.offscreen);var Lr=hr(Xr&&Xr.box);!Vr&&this.prevPlacement&&(Nn=this.prevPlacement.variableOffsets[bn.crossTileID])&&(this.variableOffsets[bn.crossTileID]=Nn,this.markUsedJustification(S,Nn.anchor,bn,Lr))}}hr=Xr,Vr=hr&&hr.box&&0<hr.box.length,xo=hr&&hr.offscreen,bn.useRuntimeCollisionCircles&&(Nn=S.text.placedSymbolArray.get(bn.centerJustifiedTextSymbolIndex),Lr=i.evaluateSizeForFeature(S.textSizeData,Me,Nn),kr=M.get("text-padding"),mo=bn.collisionCircleDiameter,(xi=this.collisionIndex.placeCollisionCircles(tt,Nn,S.lineVertexArray,S.glyphOffsetArray,Lr,j,W,se,b,Ut,Xe.predicate,mo,kr,Fn)).circles.length&&xi.collisionDetected&&!b&&i.warnOnce("Collisions detected, but collision boxes are not shown"),Vr=ht||0<xi.circles.length&&!xi.collisionDetected,xo=xo&&xi.offscreen),Wn.iconFeatureIndex&&(Ro=Wn.iconFeatureIndex),Wn.iconBox&&(Nn=Bo=>(Bo=Bt&&qr?Wt(Bo,qr.x,qr.y,$t,Ut,this.transform.angle):Bo,this.collisionIndex.placeCollisionBox(Bo,gt,Se,j,Xe.predicate,Fn)),_r=0<(al=ei&&ei.box&&ei.box.length&&Wn.verticalIconBox?Nn(Wn.verticalIconBox):Nn(Wn.iconBox)).box.length,xo=xo&&al.offscreen);var Lr=et||bn.numHorizontalGlyphVertices===0&&bn.numVerticalGlyphVertices===0,mo=rt||bn.numIconVertices===0;if(Lr||mo?mo?Lr||(_r=_r&&Vr):Vr=_r&&Vr:_r=Vr=_r&&Vr,Vr&&hr&&hr.box&&(ei&&ei.box&&Co?this.collisionIndex.insertCollisionBox(hr.box,tt,M.get("text-ignore-placement"),S.bucketInstanceId,Co,Xe.ID):this.collisionIndex.insertCollisionBox(hr.box,tt,M.get("text-ignore-placement"),S.bucketInstanceId,Ra,Xe.ID)),_r&&al&&this.collisionIndex.insertCollisionBox(al.box,gt,M.get("icon-ignore-placement"),S.bucketInstanceId,Ro,Xe.ID),xi&&(Vr&&this.collisionIndex.insertCollisionCircles(xi.circles,tt,M.get("text-ignore-placement"),S.bucketInstanceId,Ra,Xe.ID),b)){var kr=S.bucketInstanceId;let Bo=this.collisionCircleArrays[kr];Bo===void 0&&(Bo=this.collisionCircleArrays[kr]=new _n);for(let Ci=0;Ci<xi.circles.length;Ci+=4)Bo.circles.push(xi.circles[Ci+0]),Bo.circles.push(xi.circles[Ci+1]),Bo.circles.push(xi.circles[Ci+2]),Bo.circles.push(xi.collisionDetected?1:0)}if(bn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[bn.crossTileID]=new gn(Vr||en,_r||yn,xo||S.justReloaded),y[bn.crossTileID]=!0}};if(ln){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");var Yn=S.getSortedSymbolIndexes(this.transform.angle);for(let bn=Yn.length-1;0<=bn;--bn){var zn=Yn[bn];nr(S.symbolInstances.get(zn),S.collisionArrays[zn])}}else for(let bn=u.symbolInstanceStart;bn<u.symbolInstanceEnd;bn++)nr(S.symbolInstances.get(bn),S.collisionArrays[bn]);b&&S.bucketInstanceId in this.collisionCircleArrays&&(bt=this.collisionCircleArrays[S.bucketInstanceId],i.invert(bt.invProjMatrix,j),bt.viewportMatrix=this.collisionIndex.getViewportMatrix()),S.justReloaded=!1}markUsedJustification(u,y,b,S){var M={left:b.leftJustifiedTextSymbolIndex,center:b.centerJustifiedTextSymbolIndex,right:b.rightJustifiedTextSymbolIndex};let j;j=S===i.WritingMode.vertical?b.verticalPlacedTextSymbolIndex:M[i.getAnchorJustification(y)];for(const W of[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex,b.verticalPlacedTextSymbolIndex])0<=W&&(0<=j&&W!==j?u.text.placedSymbolArray.get(W).crossTileID=0:u.text.placedSymbolArray.get(W).crossTileID=b.crossTileID)}markUsedOrientation(u,M,b){var S=M===i.WritingMode.horizontal||M===i.WritingMode.horizontalOnly?M:0,M=M===i.WritingMode.vertical?M:0;for(const j of[b.leftJustifiedTextSymbolIndex,b.centerJustifiedTextSymbolIndex,b.rightJustifiedTextSymbolIndex])u.text.placedSymbolArray.get(j).placedOrientation=S;b.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(b.verticalPlacedTextSymbolIndex).placedOrientation=M)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;var y=this.prevPlacement;let b=!1;this.prevZoomAdjustment=y?y.zoomAdjustment(this.transform.zoom):0;var S=y?y.symbolFadeChange(u):1,M=y?y.opacities:{},j=y?y.variableOffsets:{},W=y?y.placedOrientations:{};for(const Me in this.placements){var se=this.placements[Me],Se=M[Me];b=Se?(this.opacities[Me]=new vn(Se,S,se.text,se.icon),b||se.text!==Se.text.placed||se.icon!==Se.icon.placed):(this.opacities[Me]=new vn(null,S,se.text,se.icon,se.skipFade),b||se.text||se.icon)}for(const Me in M){var Pe,me=M[Me];this.opacities[Me]||(Pe=new vn(me,S,!1,!1)).isHidden()||(this.opacities[Me]=Pe,b=b||me.text.placed||me.icon.placed)}for(const Me in j)this.variableOffsets[Me]||!this.opacities[Me]||this.opacities[Me].isHidden()||(this.variableOffsets[Me]=j[Me]);for(const Me in W)this.placedOrientations[Me]||!this.opacities[Me]||this.opacities[Me].isHidden()||(this.placedOrientations[Me]=W[Me]);if(y&&y.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");b?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=y?y.lastPlacementChangeTime:u)}updateLayerOpacities(u,y){var b={};for(const M of y){var S=M.getBucket(u);S&&M.latestFeatureIndex&&u.id===S.layerIds[0]&&this.updateBucketOpacities(S,b,M.collisionBoxArray)}}updateBucketOpacities(u,y,b){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();var S=u.layers[0],M=S.layout,j=new vn(null,0,!1,!1,!0),W=M.get("text-allow-overlap"),se=M.get("icon-allow-overlap"),Se=S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Pe=M.get("text-rotation-alignment")==="map",me=M.get("text-pitch-alignment")==="map",Me=M.get("icon-text-fit")!=="none",Xe=new vn(null,0,W&&(se||!u.hasIconData()||M.get("icon-optional")),se&&(W||!u.hasTextData()||M.get("text-optional")),!0),et=(!u.collisionArrays&&b&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(b),(en,yn,Sn)=>{for(let Fn=0;Fn<yn/4;Fn++)en.opacityVertexArray.emplaceBack(Sn);en.hasVisibleVertices=en.hasVisibleVertices||Sn!==no});for(let en=0;en<u.symbolInstances.length;en++){var rt=u.symbolInstances.get(en),{numHorizontalGlyphVertices:tt,numVerticalGlyphVertices:ht,crossTileID:gt}=rt,bt=y[gt];let yn=this.opacities[gt];bt?yn=j:yn||(yn=Xe,this.opacities[gt]=yn),y[gt]=!0;var bt=0<rt.numIconVertices,$t=this.placedOrientations[rt.crossTileID];const Sn=$t===i.WritingMode.vertical;var Ut=$t===i.WritingMode.horizontal||$t===i.WritingMode.horizontalOnly;if(0<tt||0<ht){var ln=$n(yn.text),Bt=Sn?no:ln,tt=(et(u.text,tt,Bt),Ut?no:ln);et(u.text,ht,tt);const nr=yn.text.isHidden();[rt.rightJustifiedTextSymbolIndex,rt.centerJustifiedTextSymbolIndex,rt.leftJustifiedTextSymbolIndex].forEach(Yn=>{0<=Yn&&(u.text.placedSymbolArray.get(Yn).hidden=nr||Sn?1:0)}),0<=rt.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(rt.verticalPlacedTextSymbolIndex).hidden=nr||Ut?1:0);var Bt=this.variableOffsets[rt.crossTileID],ln=(Bt&&this.markUsedJustification(u,Bt.anchor,rt,$t),this.placedOrientations[rt.crossTileID]);ln&&(this.markUsedJustification(u,"left",rt,ln),this.markUsedOrientation(u,ln,rt))}if(bt&&(ht=$n(yn.icon),tt=!(Me&&rt.verticalPlacedIconSymbolIndex&&Sn),0<=rt.placedIconSymbolIndex&&(Bt=tt?ht:no,et(u.icon,rt.numIconVertices,Bt),u.icon.placedSymbolArray.get(rt.placedIconSymbolIndex).hidden=yn.icon.isHidden()),0<=rt.verticalPlacedIconSymbolIndex)&&($t=tt?no:ht,et(u.icon,rt.numVerticalIconVertices,$t),u.icon.placedSymbolArray.get(rt.verticalPlacedIconSymbolIndex).hidden=yn.icon.isHidden()),(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&(ln=u.collisionArrays[en],ln)){let Fn=new i.Point(0,0);if(ln.textBox||ln.verticalTextBox){let nr=!0;Se&&((bt=this.variableOffsets[gt])?(Fn=dt(bt.anchor,bt.width,bt.height,bt.textOffset,bt.textBoxScale),Pe&&Fn._rotate(me?this.transform.angle:-this.transform.angle)):nr=!1),ln.textBox&&Bn(u.textCollisionBox.collisionVertexArray,yn.text.placed,!nr||Sn,Fn.x,Fn.y),ln.verticalTextBox&&Bn(u.textCollisionBox.collisionVertexArray,yn.text.placed,!nr||Ut,Fn.x,Fn.y)}tt=!!(!Ut&&ln.verticalIconBox),ln.iconBox&&Bn(u.iconCollisionBox.collisionVertexArray,yn.icon.placed,tt,Me?Fn.x:0,Me?Fn.y:0),ln.verticalIconBox&&Bn(u.iconCollisionBox.collisionVertexArray,yn.icon.placed,!tt,Me?Fn.x:0,Me?Fn.y:0)}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);u.bucketInstanceId in this.collisionCircleArrays&&(S=this.collisionCircleArrays[u.bucketInstanceId],u.placementInvProjMatrix=S.invProjMatrix,u.placementViewportMatrix=S.viewportMatrix,u.collisionCircleArray=S.circles,delete this.collisionCircleArrays[u.bucketInstanceId])}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,y){var b=this.zoomAtLastRecencyCheck===y?1-this.zoomAdjustment(y):1;return this.zoomAtLastRecencyCheck=y,this.commitTime+this.fadeDuration*b>u}setStale(){this.stale=!0}}function Bn(E,u,y,b,S){E.emplaceBack(u?1:0,y?1:0,b||0,S||0),E.emplaceBack(u?1:0,y?1:0,b||0,S||0),E.emplaceBack(u?1:0,y?1:0,b||0,S||0),E.emplaceBack(u?1:0,y?1:0,b||0,S||0)}const dr=Math.pow(2,25),qn=Math.pow(2,24),to=Math.pow(2,17),la=Math.pow(2,16),ua=Math.pow(2,9),lo=Math.pow(2,8),_i=Math.pow(2,1);function $n(E){var u;return E.opacity!==0||E.placed?E.opacity===1&&E.placed?4294967295:(u=E.placed?1:0,(E=Math.floor(127*E.opacity))*dr+u*qn+E*to+u*la+E*ua+u*lo+E*_i+u):0}const no=0;class vr{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,y,b,S,M){for(var j=this._bucketParts;this._currentTileIndex<u.length;){var W=u[this._currentTileIndex];if(y.getBucketParts(j,S,W,this._sortAcrossTiles),this._currentTileIndex++,M())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,j.sort((Se,Pe)=>Se.sortKey-Pe.sortKey));this._currentPartIndex<j.length;){var se=j[this._currentPartIndex];if(y.placeLayerBucketPart(se,this._seenCrossTileIDs,b),this._currentPartIndex++,M())return!0}return!1}}class uo{constructor(u,y,b,S,M,j,W,se){this.placement=new Mn(u,y,j,W,se),this._currentPlacementIndex=b.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=M,this._done=!1}isDone(){return this._done}continuePlacement(u,y,b){const S=g.now();for(var M=()=>!this._forceFullPlacement&&2<g.now()-S;0<=this._currentPlacementIndex;){var j=y[u[this._currentPlacementIndex]],W=this.placement.collisionIndex.transform.zoom;if(j.type==="symbol"&&(!j.minzoom||j.minzoom<=W)&&(!j.maxzoom||j.maxzoom>W)){if(this._inProgressLayer||(this._inProgressLayer=new vr(j)),this._inProgressLayer.continuePlacement(b[j.source],this.placement,this._showCollisionBoxes,j,M))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const ur=512/i.EXTENT/2;class ci{constructor(u,y,b){this.tileID=u,this.bucketInstanceId=b,this._symbolsByKey={};var S,M,j=new Map;for(let et=0;et<y.length;et++){var W=y.get(et),se=W.key,Se=j.get(se);Se?Se.push(W):j.set(se,[W])}for([S,M]of j){var Pe={positions:M.map(et=>({x:Math.floor(et.anchorX*ur),y:Math.floor(et.anchorY*ur)})),crossTileIDs:M.map(et=>et.crossTileID)};if(128<Pe.positions.length){var me,Me,Xe=new i.KDBush(Pe.positions.length,16,Uint16Array);for({x:me,y:Me}of Pe.positions)Xe.add(me,Me);Xe.finish(),delete Pe.positions,Pe.index=Xe}this._symbolsByKey[S]=Pe}}getScaledCoordinates(Se,W){var{x:b,y:S,z:M}=this.tileID.canonical,{x:W,y:se,z:j}=W.canonical,j=j-M,M=ur/Math.pow(2,j),j=(W*i.EXTENT+Se.anchorX)*M,W=(se*i.EXTENT+Se.anchorY)*M,se=b*i.EXTENT*ur,Se=S*i.EXTENT*ur;return{x:Math.floor(j-se),y:Math.floor(W-Se)}}findMatches(u,y,b){var S=this.tileID.canonical.z<y.canonical.z?1:Math.pow(2,this.tileID.canonical.z-y.canonical.z);for(let me=0;me<u.length;me++){var M=u.get(me);if(!M.crossTileID){var j=this._symbolsByKey[M.key];if(j){var W=this.getScaledCoordinates(M,y);if(j.index)for(const Me of j.index.range(W.x-S,W.y-S,W.x+S,W.y+S).sort()){var se=j.crossTileIDs[Me];if(!b[se]){b[se]=!0,M.crossTileID=se;break}}else if(j.positions)for(let Me=0;Me<j.positions.length;Me++){var Se=j.positions[Me],Pe=j.crossTileIDs[Me];if(Math.abs(Se.x-W.x)<=S&&Math.abs(Se.y-W.y)<=S&&!b[Pe]){b[Pe]=!0,M.crossTileID=Pe;break}}}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Mo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Vi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){var y=Math.round((u-this.lng)/360);if(y!==0)for(const j in this.indexes){var b=this.indexes[j],S={};for(const W in b){var M=b[W];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+y),S[M.tileID.key]=M}this.indexes[j]=S}this.lng=u}addBucket(u,y,b){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===y.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let Se=0;Se<y.symbolInstances.length;Se++)y.symbolInstances.get(Se).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});var S=this.usedCrossTileIDs[u.overscaledZ];for(const Se in this.indexes){var M=this.indexes[Se];if(Number(Se)>u.overscaledZ)for(const Pe in M){var j=M[Pe];j.tileID.isChildOf(u)&&j.findMatches(y.symbolInstances,u,S)}else{var W=M[u.scaledTo(Number(Se)).key];W&&W.findMatches(y.symbolInstances,u,S)}}for(let Se=0;Se<y.symbolInstances.length;Se++){var se=y.symbolInstances.get(Se);se.crossTileID||(se.crossTileID=b.generate(),S[se.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new ci(u,y.symbolInstances,y.bucketInstanceId),!0}removeBucketCrossTileIDs(u,y){for(const b of y.getCrossTileIDsLists())for(const S of b)delete this.usedCrossTileIDs[u][S]}removeStaleBuckets(u){let y=!1;for(const S in this.indexes){var b=this.indexes[S];for(const M in b)u[b[M].bucketInstanceId]||(this.removeBucketCrossTileIDs(S,b[M]),delete b[M],y=!0)}return y}}class Ji{constructor(){this.layerIndexes={},this.crossTileIDs=new Mo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,y,b){let S=this.layerIndexes[u.id],M=!1;var j={};(S=S===void 0?this.layerIndexes[u.id]=new Vi:S).handleWrapJump(b);for(const se of y){var W=se.getBucket(u);W&&u.id===W.layerIds[0]&&(W.bucketInstanceId||(W.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(se.tileID,W,this.crossTileIDs)&&(M=!0),j[W.bucketInstanceId]=!0)}return M=S.removeStaleBuckets(j)?!0:M}pruneUnusedLayers(u){const y={};u.forEach(b=>{y[b]=!0});for(const b in this.layerIndexes)y[b]||delete this.layerIndexes[b]}}const tl=(E,u)=>i.emitValidationErrors(E,u&&u.filter(y=>y.identifier!=="source.canvas")),di=i.emptyStyle();class nl extends i.Evented{constructor(u,y={}){super(),this._rtlPluginLoaded=()=>{for(const S in this.sourceCaches){var b=this.sourceCaches[S].getSource().type;b!=="vector"&&b!=="geojson"||this.sourceCaches[S].reload()}},this.map=u,this.dispatcher=new Be(Fe(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",(b,S)=>this.getGlyphs(b,S)),this.dispatcher.registerMessageHandler("GI",(b,S)=>this.getImages(b,S)),this.imageManager=new q,this.imageManager.setEventedParent(this),this.glyphManager=new te(u._requestManager,y.localIdeographFontFamily),this.lineAtlas=new ce(256,512),this.crossTileSymbolIndex=new Ji,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",i.getReferrer()),qt().on(Ge,this._rtlPluginLoaded),this.on("data",b=>{if(b.dataType==="source"&&b.sourceDataType==="metadata"&&(b=this.sourceCaches[b.sourceId],b)){var S=b.getSource();if(S&&S.vectorLayerIds)for(const j in this._layers){var M=this._layers[j];M.source===S.id&&this._validateLayer(M)}}})}loadURL(u,y={},b){this.fire(new i.Event("dataloading",{dataType:"style"})),y.validate=typeof y.validate!="boolean"||y.validate,u=this.map._requestManager.transformRequest(u,"Style"),this._loadStyleRequest=new AbortController,i.getJSON(u,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,y,b)}).catch(S=>{this._loadStyleRequest=null,S&&this.fire(new i.ErrorEvent(S))})}loadJSON(u,y={},b){this.fire(new i.Event("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,g.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,y.validate=y.validate!==!1,this._load(u,y,b)}).catch(()=>{})}loadEmpty(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(di,{validate:!1})}_load(u,y,b){var S=y.transformStyle?y.transformStyle(b,u):u;if(!y.validate||!tl(this,i.validateStyle(S))){this._loaded=!0;for(const M in(this.stylesheet=S).sources)this.addSource(M,S.sources[M],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new Q(this.stylesheet.light),this.map.setTerrain((b=this.stylesheet.terrain)!=null?b:null),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}}_createLayers(){var u=i.derefLayers(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(b=>b.id),this._layers={},this._serializedLayers=null;for(const b of u){var y=i.createStyleLayer(b);y.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=y}}_loadSprite(u,y=!1,b=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController;let S;V(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(M=>{if(this._spriteRequest=null,M)for(const W in M){this._spritesImagesIds[W]=[];for(const se of this._spritesImagesIds[W]?this._spritesImagesIds[W].filter(Se=>!(Se in M)):[])this.imageManager.removeImage(se),this._changedImages[se]=!0;for(const se in M[W]){var j=W==="default"?se:W+":"+se;this._spritesImagesIds[W].push(j),j in this.imageManager.images?this.imageManager.updateImage(j,M[W][se],!1):this.imageManager.addImage(j,M[W][se]),y&&(this._changedImages[j]=!0)}}}).catch(M=>{this._spriteRequest=null,S=M,this.fire(new i.ErrorEvent(S))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),y&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.Event("data",{dataType:"style"})),b&&b(S)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))}_validateLayer(u){var y,b=this.sourceCaches[u.source];b&&(y=u.sourceLayer)&&((b=b.getSource()).type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(y)===-1)&&this.fire(new i.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${b.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){var y=this._serializedAllLayers();if(!u||u.length===0)return Object.values(y);var b=[];for(const S of u)y[S]&&b.push(y[S]);return b}_serializedAllLayers(){var u=this._serializedLayers;if(!u){u=this._serializedLayers={};for(const b of Object.keys(this._layers)){var y=this._layers[b];y.type!=="custom"&&(u[b]=y.serialize())}}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(this._loaded){var y=this._changed;if(this._changed){var b=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(b.length||S.length)&&this._updateWorkerLayers(b,S);for(const Pe in this._updatedSources){var M=this._updatedSources[Pe];if(M==="reload")this._reloadSource(Pe);else{if(M!=="clear")throw new Error("Invalid action "+M);this._clearSource(Pe)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const Pe in this._updatedPaintProps)this._layers[Pe].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}var j={};for(const Pe in this.sourceCaches){var W=this.sourceCaches[Pe];j[Pe]=W.used,W.used=!1}for(const Pe of this._order){var se=this._layers[Pe];se.recalculate(u,this._availableImages),!se.isHidden(u.zoom)&&se.source&&(this.sourceCaches[se.source].used=!0)}for(const Pe in j){var Se=this.sourceCaches[Pe];j[Pe]!==Se.used&&Se.fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Pe}))}this.light.recalculate(u),this.z=u.zoom,y&&this.fire(new i.Event("data",{dataType:"style"}))}}_updateTilesForChangedImages(){var u=Object.keys(this._changedImages);if(u.length){for(const y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,y){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u),removedIds:y})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,S={}){this._checkLoaded();var b=this.serialize(),S=(u=S.transformStyle?S.transformStyle(b,u):u,(S=S.validate)==null||S);if(S&&tl(this,i.validateStyle(u)))return!1;if((u=i.clone$1(u)).layers=i.derefLayers(u.layers),S=i.diffStyles(b,u),b=this._getOperationsToPerform(S),0<b.unimplemented.length)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(const M of b.operations)M();return this.stylesheet=u,!(this._serializedLayers=null)}_getOperationsToPerform(u){var y=[],b=[];for(const S of u)switch(S.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":y.push(()=>this.addLayer.apply(this,S.args));break;case"removeLayer":y.push(()=>this.removeLayer.apply(this,S.args));break;case"setPaintProperty":y.push(()=>this.setPaintProperty.apply(this,S.args));break;case"setLayoutProperty":y.push(()=>this.setLayoutProperty.apply(this,S.args));break;case"setFilter":y.push(()=>this.setFilter.apply(this,S.args));break;case"addSource":y.push(()=>this.addSource.apply(this,S.args));break;case"removeSource":y.push(()=>this.removeSource.apply(this,S.args));break;case"setLayerZoomRange":y.push(()=>this.setLayerZoomRange.apply(this,S.args));break;case"setLight":y.push(()=>this.setLight.apply(this,S.args));break;case"setGeoJSONSourceData":y.push(()=>this.setGeoJSONSourceData.apply(this,S.args));break;case"setGlyphs":y.push(()=>this.setGlyphs.apply(this,S.args));break;case"setSprite":y.push(()=>this.setSprite.apply(this,S.args));break;case"setTerrain":y.push(()=>this.map.setTerrain.apply(this,S.args));break;case"setTransition":y.push(()=>{});break;default:b.push(S.command)}return{operations:y,unimplemented:b}}addImage(u,y){if(this.getImage(u))return this.fire(new i.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,y),this._afterImageUpdated(u)}updateImage(u,y){this.imageManager.updateImage(u,y)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new i.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,y,b={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!y.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(y).join(", ")}.`);var S=0<=["vector","raster","geojson","video","image"].indexOf(y.type);if(!S||!this._validate(i.validateStyle.source,"sources."+u,y,null,b)){this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);const M=this.sourceCaches[u]=new St(u,y,this.dispatcher);M.style=this,M.setEventedParent(this,()=>({isSourceLoaded:M.loaded(),source:M.serialize(),sourceId:u})),M.onAdd(this.map),this._changed=!0}}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===u)return this.fire(new i.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${b}" is using it.`)));var y=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],y.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),y.setEventedParent(null),y.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,y){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID="+u);if(u=this.sourceCaches[u].getSource(),u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(y),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,y,b={}){this._checkLoaded();var S=u.id;if(this.getLayer(S))this.fire(new i.ErrorEvent(new Error(`Layer "${S}" already exists on this map.`)));else{let M;if(u.type==="custom"){if(tl(this,i.validateCustomStyleLayer(u)))return;M=i.createStyleLayer(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(S,u.source),u=i.clone$1(u),u=i.extend(u,{source:S})),this._validate(i.validateStyle.layer,"layers."+S,u,{arrayIndex:-1},b))return;M=i.createStyleLayer(u),this._validateLayer(M),M.setEventedParent(this,{layer:{id:S}})}b=y?this._order.indexOf(y):this._order.length,y&&b===-1?this.fire(new i.ErrorEvent(new Error(`Cannot add layer "${S}" before non-existing layer "${y}".`))):(this._order.splice(b,0,S),this._layerOrderChanged=!0,this._layers[S]=M,this._removedLayers[S]&&M.source&&M.type!=="custom"&&(u=this._removedLayers[S],delete this._removedLayers[S],u.type!==M.type?this._updatedSources[M.source]="clear":(this._updatedSources[M.source]="reload",this.sourceCaches[M.source].pause())),this._updateLayer(M),M.onAdd&&M.onAdd(this.map))}}moveLayer(u,y){var b;this._checkLoaded(),this._changed=!0,this._layers[u]?u!==y&&(b=this._order.indexOf(u),this._order.splice(b,1),b=y?this._order.indexOf(y):this._order.length,y&&b===-1?this.fire(new i.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${y}".`))):(this._order.splice(b,0,u),this._layerOrderChanged=!0)):this.fire(new i.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)))}removeLayer(u){this._checkLoaded();var y,b=this._layers[u];b?(b.setEventedParent(null),y=this._order.indexOf(u),this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=b,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],b.onRemove&&b.onRemove(this.map)):this.fire(new i.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)))}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,y,b){this._checkLoaded();var S=this.getLayer(u);S?S.minzoom===y&&S.maxzoom===b||(y!=null&&(S.minzoom=y),b!=null&&(S.maxzoom=b),this._updateLayer(S)):this.fire(new i.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,y,b={}){this._checkLoaded();var S=this.getLayer(u);S?i.deepEqual(S.filter,y)||(y==null?(S.filter=void 0,this._updateLayer(S)):this._validate(i.validateStyle.filter,`layers.${S.id}.filter`,y,null,b)||(S.filter=i.clone$1(y),this._updateLayer(S))):this.fire(new i.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return i.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,y,b,S={}){this._checkLoaded();var M=this.getLayer(u);M?i.deepEqual(M.getLayoutProperty(y),b)||(M.setLayoutProperty(y,b,S),this._updateLayer(M)):this.fire(new i.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,y){var b=this.getLayer(u);if(b)return b.getLayoutProperty(y);this.fire(new i.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,y,b,S={}){this._checkLoaded();var M=this.getLayer(u);M?i.deepEqual(M.getPaintProperty(y),b)||(M.setPaintProperty(y,b,S)&&this._updateLayer(M),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new i.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,y){return this.getLayer(u).getPaintProperty(y)}setFeatureState(u,y){this._checkLoaded();var b=u.source,S=u.sourceLayer,M=this.sourceCaches[b];M===void 0?this.fire(new i.ErrorEvent(new Error(`The source '${b}' does not exist in the map's style.`))):(b=M.getSource().type)==="geojson"&&S?this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||S?(u.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),M.setFeatureState(S,u.id,y)):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,y){this._checkLoaded();var b,S=u.source,M=this.sourceCaches[S];M===void 0?this.fire(new i.ErrorEvent(new Error(`The source '${S}' does not exist in the map's style.`))):(b=(S=M.getSource().type)==="vector"?u.sourceLayer:void 0,S!=="vector"||b?y&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):M.removeFeatureState(b,u.id,y):this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types."))))}getFeatureState(u){this._checkLoaded();var y=u.source,b=u.sourceLayer,S=this.sourceCaches[y];if(S===void 0)this.fire(new i.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));else{if(S.getSource().type!=="vector"||b)return u.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),S.getFeatureState(b,u.id);this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}}getTransition(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){var u,y,b,S;if(this._loaded)return u=i.mapObject(this.sourceCaches,M=>M.serialize()),y=this._serializeByIds(this._order),b=this.map.getTerrain()||void 0,S=this.stylesheet,i.filterObject({version:S.version,name:S.name,metadata:S.metadata,light:S.light,center:S.center,zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,sprite:S.sprite,glyphs:S.glyphs,transition:S.transition,sources:u,layers:y,terrain:b},M=>M!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){var y=me=>this._layers[me].type==="fill-extrusion",b={},S=[];for(let me=this._order.length-1;0<=me;me--){var M=this._order[me];if(y(M)){b[M]=me;for(const Me of u){var j=Me[M];if(j)for(const Xe of j)S.push(Xe)}}}S.sort((me,Me)=>Me.intersectionZ-me.intersectionZ);var W=[];for(let me=this._order.length-1;0<=me;me--){var se=this._order[me];if(y(se))for(let Me=S.length-1;0<=Me;Me--){var Se=S[Me].feature;if(b[Se.layer.id]<me)break;W.push(Se),S.pop()}else for(const Me of u){var Pe=Me[se];if(Pe)for(const Xe of Pe)W.push(Xe.feature)}}return W}queryRenderedFeatures(u,y,b){y&&y.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",y.filter,null,y);var S={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const se of y.layers){var M=this._layers[se];if(!M)return this.fire(new i.ErrorEvent(new Error(`The layer '${se}' does not exist in the map's style and cannot be queried for features.`))),[];S[M.source]=!0}}var j=[],W=(y.availableImages=this._availableImages,this._serializedAllLayers());for(const se in this.sourceCaches)y.layers&&!S[se]||j.push(ot(this.sourceCaches[se],this._layers,W,u,y,b));return this.placement&&j.push(ut(this._layers,W,this.sourceCaches,u,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(u,y){return y&&y.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",y.filter,null,y),u=this.sourceCaches[u],u?st(u,y):[]}getLight(){return this.light.getLight()}setLight(u,y={}){this._checkLoaded();var b,S=this.light.getLight();let M=!1;for(const j in u)if(!i.deepEqual(u[j],S[j])){M=!0;break}M&&(b={now:g.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(u,y),this.light.updateTransitions(b))}_validate(u,y,b,S,M={}){return(!M||M.validate!==!1)&&tl(this,u.call(i.validateStyle,i.extend({key:y,style:this.serialize(),value:b,styleSpec:i.v8Spec},S)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),qt().off(Ge,this._rtlPluginLoaded);for(const b in this._layers)this._layers[b].setEventedParent(null);for(const b in this.sourceCaches){var y=this.sourceCaches[b];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const y in this.sourceCaches)this.sourceCaches[y].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,y,b,S,M=!1){let j=!1,W=!1;var se={};for(const me of this._order){var Se=this._layers[me];if(Se.type==="symbol"){if(!se[Se.source]){const Me=this.sourceCaches[Se.source];se[Se.source]=Me.getRenderableIds(!0).map(Xe=>Me.getTileByID(Xe)).sort((Xe,et)=>et.tileID.overscaledZ-Xe.tileID.overscaledZ||(Xe.tileID.isLessThan(et.tileID)?-1:1))}Se=this.crossTileSymbolIndex.addLayer(Se,se[Se.source],u.center.lng),j=j||Se}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((M=M||this._layerOrderChanged||b===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.now(),u.zoom))&&(this.pauseablePlacement=new uo(u,this.map.terrain,this._order,M,y,b,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,se),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.now()),W=!0),j&&this.pauseablePlacement.placement.setStale()),W||j)for(const me of this._order){var Pe=this._layers[me];Pe.type==="symbol"&&this.placement.updateLayerOpacities(Pe,se[Pe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,y){return i.__awaiter(this,void 0,void 0,function*(){var b=yield this.imageManager.getImages(y.icons),S=(this._updateTilesForChangedImages(),this.sourceCaches[y.source]);return S&&S.setDependencies(y.tileID.key,y.type,y.icons),b})}getGlyphs(u,y){return i.__awaiter(this,void 0,void 0,function*(){var b=yield this.glyphManager.getGlyphs(y.stacks),S=this.sourceCaches[y.source];return S&&S.setDependencies(y.tileID.key,y.type,[""]),b})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,y={}){this._checkLoaded(),u&&this._validate(i.validateStyle.glyphs,"glyphs",u,null,y)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,y,b={},S){this._checkLoaded(),u=[{id:u,url:y}],y=[...B(this.stylesheet.sprite),...u],this._validate(i.validateStyle.sprite,"sprite",y,null,b)||(this.stylesheet.sprite=y,this._loadSprite(u,!0,S))}removeSprite(u){this._checkLoaded();var y=B(this.stylesheet.sprite);if(y.find(b=>b.id===u)){if(this._spritesImagesIds[u])for(const b of this._spritesImagesIds[u])this.imageManager.removeImage(b),this._changedImages[b]=!0;y.splice(y.findIndex(b=>b.id===u),1),this.stylesheet.sprite=0<y.length?y:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))}else this.fire(new i.ErrorEvent(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return B(this.stylesheet.sprite)}setSprite(u,y={},b){this._checkLoaded(),u&&this._validate(i.validateStyle.sprite,"sprite",u,null,y)||((this.stylesheet.sprite=u)?this._loadSprite(u,!0,b):(this._unloadSprite(),b&&b(null)))}}var ba=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),Or="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ua={prelude:wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:wr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:wr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:wr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:wr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:wr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:wr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Or),terrainDepth:wr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Or),terrainCoords:wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Or)};function wr(E,u){var y=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,b=u.match(/attribute ([\w]+) ([\w]+)/g),S=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=M?M.concat(S):S;const j={};return{fragmentSource:E=E.replace(y,(W,se,Se,Pe,me)=>(j[me]=!0,se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
varying ${Se} ${Pe} ${me};
#else
uniform ${Se} ${Pe} u_${me};
#endif
`:`
#ifdef HAS_UNIFORM_u_${me}
    ${Se} ${Pe} ${me} = u_${me};
#endif
`)),vertexSource:u=u.replace(y,(W,se,Se,Pe,me)=>{var Me=Pe==="float"?"vec2":"vec4",Xe=me.match(/color/)?"color":Me;return j[me]?se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${Se} ${Me} a_${me};
varying ${Se} ${Pe} ${me};
#else
uniform ${Se} ${Pe} u_${me};
#endif
`:Xe=="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = a_${me};
#else
    ${Se} ${Pe} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${me} = unpack_mix_${Xe}(a_${me}, u_${me}_t);
#else
    ${Se} ${Pe} ${me} = u_${me};
#endif
`:se==="define"?`
#ifndef HAS_UNIFORM_u_${me}
uniform lowp float u_${me}_t;
attribute ${Se} ${Me} a_${me};
#else
uniform ${Se} ${Pe} u_${me};
#endif
`:Xe=="vec4"?`
#ifndef HAS_UNIFORM_u_${me}
    ${Se} ${Pe} ${me} = a_${me};
#else
    ${Se} ${Pe} ${me} = u_${me};
#endif
`:`
#ifndef HAS_UNIFORM_u_${me}
    ${Se} ${Pe} ${me} = unpack_mix_${Xe}(a_${me}, u_${me}_t);
#else
    ${Se} ${Pe} ${me} = u_${me};
#endif
`}),staticAttributes:b,staticUniforms:M}}class Y{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,y,b,S,M,j,W,se,Se){this.context=u;let Pe=this.boundPaintVertexBuffers.length!==S.length;for(let me=0;!Pe&&me<S.length;me++)this.boundPaintVertexBuffers[me]!==S[me]&&(Pe=!0);!this.vao||this.boundProgram!==y||this.boundLayoutVertexBuffer!==b||Pe||this.boundIndexBuffer!==M||this.boundVertexOffset!==j||this.boundDynamicVertexBuffer!==W||this.boundDynamicVertexBuffer2!==se||this.boundDynamicVertexBuffer3!==Se?this.freshBind(y,b,S,M,j,W,se,Se):(u.bindVertexArray.set(this.vao),W&&W.bind(),M&&M.dynamicDraw&&M.bind(),se&&se.bind(),Se&&Se.bind())}freshBind(u,y,b,S,M,j,W,se){var Se=u.numAttributes,Pe=this.context,me=Pe.gl;this.vao&&this.destroy(),this.vao=Pe.createVertexArray(),Pe.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=y,this.boundPaintVertexBuffers=b,this.boundIndexBuffer=S,this.boundVertexOffset=M,this.boundDynamicVertexBuffer=j,this.boundDynamicVertexBuffer2=W,this.boundDynamicVertexBuffer3=se,y.enableAttributes(me,u);for(const Me of b)Me.enableAttributes(me,u);j&&j.enableAttributes(me,u),W&&W.enableAttributes(me,u),se&&se.enableAttributes(me,u),y.bind(),y.setVertexAttribPointers(me,u,M);for(const Me of b)Me.bind(),Me.setVertexAttribPointers(me,u,M);j&&(j.bind(),j.setVertexAttribPointers(me,u,M)),S&&S.bind(),W&&(W.bind(),W.setVertexAttribPointers(me,u,M)),se&&(se.bind(),se.setVertexAttribPointers(me,u,M)),Pe.currentNumAttributes=Se}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const be=(E,u)=>({u_depth:new i.Uniform1i(E,u.u_depth),u_terrain:new i.Uniform1i(E,u.u_terrain),u_terrain_dim:new i.Uniform1f(E,u.u_terrain_dim),u_terrain_matrix:new i.UniformMatrix4f(E,u.u_terrain_matrix),u_terrain_unpack:new i.Uniform4f(E,u.u_terrain_unpack),u_terrain_exaggeration:new i.Uniform1f(E,u.u_terrain_exaggeration)});function Ue(E){var u,y=[];for(let b=0;b<E.length;b++)E[b]!==null&&(u=E[b].split(" "),y.push(u.pop()));return y}class Je{constructor(u,y,b,S,M,j){var W=u.gl,Se=(this.program=W.createProgram(),Ue(y.staticAttributes)),Pe=b?b.getBinderAttributes():[],se=Se.concat(Pe),Se=Ua.prelude.staticUniforms?Ue(Ua.prelude.staticUniforms):[],Pe=y.staticUniforms?Ue(y.staticUniforms):[],me=b?b.getBinderUniforms():[],Me=[];for(const tt of Se.concat(Pe).concat(me))Me.indexOf(tt)<0&&Me.push(tt);if(Se=b?b.defines():[],M&&Se.push("#define OVERDRAW_INSPECTOR;"),j&&Se.push("#define TERRAIN3D;"),Pe=Se.concat(Ua.prelude.fragmentSource,y.fragmentSource).join(`
`),me=Se.concat(Ua.prelude.vertexSource,y.vertexSource).join(`
`),M=W.createShader(W.FRAGMENT_SHADER),W.isContextLost())this.failedToCreate=!0;else{if(W.shaderSource(M,Pe),W.compileShader(M),!W.getShaderParameter(M,W.COMPILE_STATUS))throw new Error("Could not compile fragment shader: "+W.getShaderInfoLog(M));if(W.attachShader(this.program,M),j=W.createShader(W.VERTEX_SHADER),W.isContextLost())this.failedToCreate=!0;else{if(W.shaderSource(j,me),W.compileShader(j),!W.getShaderParameter(j,W.COMPILE_STATUS))throw new Error("Could not compile vertex shader: "+W.getShaderInfoLog(j));W.attachShader(this.program,j),this.attributes={};var Xe={};this.numAttributes=se.length;for(let tt=0;tt<this.numAttributes;tt++)se[tt]&&(W.bindAttribLocation(this.program,tt,se[tt]),this.attributes[se[tt]]=tt);if(W.linkProgram(this.program),!W.getProgramParameter(this.program,W.LINK_STATUS))throw new Error("Program failed to link: "+W.getProgramInfoLog(this.program));W.deleteShader(j),W.deleteShader(M);for(let tt=0;tt<Me.length;tt++){var et,rt=Me[tt];rt&&!Xe[rt]&&(et=W.getUniformLocation(this.program,rt))&&(Xe[rt]=et)}this.fixedUniforms=S(u,Xe),this.terrainUniforms=be(u,Xe),this.binderUniforms=b?b.getUniforms(u,Xe):[]}}}draw(u,y,b,S,M,j,W,se,Se,Pe,me,Me,Xe,et,rt,tt,ht,gt){var bt=u.gl;if(!this.failedToCreate){if(u.program.set(this.program),u.setDepthMode(b),u.setStencilMode(S),u.setColorMode(M),u.setCullFace(j),se){u.activeTexture.set(bt.TEXTURE2),bt.bindTexture(bt.TEXTURE_2D,se.depthTexture),u.activeTexture.set(bt.TEXTURE3),bt.bindTexture(bt.TEXTURE_2D,se.texture);for(const Bt in this.terrainUniforms)this.terrainUniforms[Bt].set(se[Bt])}for(const Bt in this.fixedUniforms)this.fixedUniforms[Bt].set(W[Bt]);rt&&rt.setUniforms(u,this.binderUniforms,Xe,{zoom:et});let Ut=0;switch(y){case bt.LINES:Ut=2;break;case bt.TRIANGLES:Ut=3;break;case bt.LINE_STRIP:Ut=1}for(const Bt of Me.get()){var $t=Bt.vaos||(Bt.vaos={});($t[Se]||($t[Se]=new Y)).bind(u,this,Pe,rt?rt.getPaintVertexBuffers():[],me,Bt.vertexOffset,tt,ht,gt),bt.drawElements(y,Bt.primitiveLength*Ut,bt.UNSIGNED_SHORT,Bt.primitiveOffset*Ut*2)}}}}function Mt(E,M,y){var b=1/Ht(y,1,M.transform.tileZoom),S=Math.pow(2,y.tileID.overscaledZ),M=y.tileSize*Math.pow(2,M.transform.tileZoom)/S,S=M*(y.tileID.canonical.x+y.tileID.wrap*S),M=M*y.tileID.canonical.y;return{u_image:0,u_texsize:y.imageAtlasTexture.size,u_scale:[b,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[S>>16,M>>16],u_pixel_coord_lower:[65535&S,65535&M]}}const It=(E,W,y,b)=>{var S=W.style.light,M=S.properties.get("position"),M=[M.x,M.y,M.z],j=i.create$1(),W=(S.properties.get("anchor")==="viewport"&&i.fromRotation(j,-W.transform.angle),i.transformMat3(M,M,j),S.properties.get("color"));return{u_matrix:E,u_lightpos:M,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[W.r,W.g,W.b],u_vertical_gradient:+y,u_opacity:b}},Gt=(E,u,y,b,S,M,j)=>i.extend(It(E,u,y,b),Mt(M,u,j),{u_height_factor:-Math.pow(2,S.overscaledZ)/j.tileSize/8}),Cn=E=>({u_matrix:E}),kn=(E,u,y,b)=>i.extend(Cn(E),Mt(y,u,b)),yr=(E,u)=>({u_matrix:E,u_world:u}),Sr=(E,u,y,b,S)=>i.extend(kn(E,u,y,b),{u_world:S}),Ho=(E,u,M)=>{var b=Ht(M,1,u.zoom),S=Math.pow(2,u.zoom-M.tileID.overscaledZ),M=M.tileID.overscaleFactor();return{u_matrix:E,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:b,u_extrude_scale:[u.pixelsToGLUnits[0]/(b*S),u.pixelsToGLUnits[1]/(b*S)],u_overscale_factor:M}},Is=(E,u,y)=>({u_matrix:E,u_inv_matrix:u,u_camera_to_center_distance:y.cameraToCenterDistance,u_viewport_size:[y.width,y.height]}),Qa=(E,u,y=1)=>({u_matrix:E,u_color:u,u_overlay:0,u_overlay_scale:y}),wa=E=>({u_matrix:E}),Pl=(M,u,y,b)=>{var S=i.create(),M=(i.ortho(S,0,M.width,M.height,0,0,1),M.context.gl);return{u_matrix:S,u_world:[M.drawingBufferWidth,M.drawingBufferHeight],u_image:y,u_color_ramp:b,u_opacity:u.paint.get("heatmap-opacity")}},ds=(E,u,y,b)=>{var S=y.paint.get("hillshade-shadow-color"),M=y.paint.get("hillshade-highlight-color"),j=y.paint.get("hillshade-accent-color");let W=y.paint.get("hillshade-illumination-direction")*(Math.PI/180);y.paint.get("hillshade-illumination-anchor")==="viewport"&&(W-=E.transform.angle);var se=!E.options.moving;return{u_matrix:b?b.posMatrix:E.transform.calculatePosMatrix(u.tileID.toUnwrapped(),se),u_image:0,u_latrange:(b=u.tileID,E=Math.pow(2,b.canonical.z),b=b.canonical.y,[new i.MercatorCoordinate(0,b/E).toLngLat().lat,new i.MercatorCoordinate(0,(b+1)/E).toLngLat().lat]),u_light:[y.paint.get("hillshade-exaggeration"),W],u_shadow:S,u_highlight:M,u_accent:j}},hs=(E,u)=>{var y=u.stride,b=i.create();return i.ortho(b,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(b,b,[0,-i.EXTENT,0]),{u_matrix:b,u_image:1,u_dimension:[y,y],u_zoom:E.overscaledZ,u_unpack:u.getUnpackVector()}},xa=(E,u,y,b)=>{var S=E.transform;return{u_matrix:fs(E,u,y,b),u_ratio:1/Ht(u,1,S.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}};function ks(E,u){return 1/Ht(E,1,u.tileZoom)}function fs(E,u,y,b){return E.translatePosMatrix((b||u.tileID).posMatrix,u,y.paint.get("line-translate"),y.paint.get("line-translate-anchor"))}const Ja=(E,u,y,b,S)=>({u_matrix:E,u_tl_parent:u,u_scale_parent:y,u_buffer_scale:1,u_fade_t:b.mix,u_opacity:b.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:0<(E=S.paint.get("raster-saturation"))?1-1/(1.001-E):-E,u_contrast_factor:0<(u=S.paint.get("raster-contrast"))?1/(1-u):1+u,u_spin_weights:(y=S.paint.get("raster-hue-rotate"),y*=Math.PI/180,b=Math.sin(y),[(2*(y=Math.cos(y))+1)/3,(-Math.sqrt(3)*b-y+1)/3,(Math.sqrt(3)*b-y+1)/3])}),Ps=(E,u,y,b,S,M,j,W,se,Se)=>{var Pe=S.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Pe.cameraToCenterDistance,u_pitch:Pe.pitch/360*2*Math.PI,u_rotate_symbol:+y,u_aspect_ratio:Pe.width/Pe.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:M,u_label_plane_matrix:j,u_coord_matrix:W,u_is_text:+se,u_pitch_with_map:+b,u_texsize:Se,u_texture:0}},ps=(E,u,y,b,S,M,j,W,se,Se,Pe)=>{var me=S.transform;return i.extend(Ps(E,u,y,b,S,M,j,W,se,Se),{u_gamma_scale:b?Math.cos(me._pitch)*me.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},Im=(E,u,y,b,S,M,j,W,se,Se)=>i.extend(ps(E,u,y,b,S,M,j,W,!0,se),{u_texsize_icon:Se,u_texture_icon:1}),Mu=(E,u,y,b,S,M)=>i.extend(function(me,W,se,Se){var Pe=se.imageManager.getPattern(me.from.toString()),me=se.imageManager.getPattern(me.to.toString()),{width:Me,height:Xe}=se.imageManager.getPixelSize(),et=Math.pow(2,Se.tileID.overscaledZ),et=(rt=Se.tileSize*Math.pow(2,se.transform.tileZoom)/et)*(Se.tileID.canonical.x+Se.tileID.wrap*et),rt=rt*Se.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Pe.tl,u_pattern_br_a:Pe.br,u_pattern_tl_b:me.tl,u_pattern_br_b:me.br,u_texsize:[Me,Xe],u_mix:W.t,u_pattern_size_a:Pe.displaySize,u_pattern_size_b:me.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ht(Se,1,se.transform.tileZoom),u_pixel_coord_upper:[et>>16,rt>>16],u_pixel_coord_lower:[65535&et,65535&rt]}}(b,M,y,S),{u_matrix:E,u_opacity:u}),Bh={fillExtrusion:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_lightpos:new i.Uniform3f(E,u.u_lightpos),u_lightintensity:new i.Uniform1f(E,u.u_lightintensity),u_lightcolor:new i.Uniform3f(E,u.u_lightcolor),u_vertical_gradient:new i.Uniform1f(E,u.u_vertical_gradient),u_opacity:new i.Uniform1f(E,u.u_opacity)}),fillExtrusionPattern:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_lightpos:new i.Uniform3f(E,u.u_lightpos),u_lightintensity:new i.Uniform1f(E,u.u_lightintensity),u_lightcolor:new i.Uniform3f(E,u.u_lightcolor),u_vertical_gradient:new i.Uniform1f(E,u.u_vertical_gradient),u_height_factor:new i.Uniform1f(E,u.u_height_factor),u_image:new i.Uniform1i(E,u.u_image),u_texsize:new i.Uniform2f(E,u.u_texsize),u_pixel_coord_upper:new i.Uniform2f(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(E,u.u_pixel_coord_lower),u_scale:new i.Uniform3f(E,u.u_scale),u_fade:new i.Uniform1f(E,u.u_fade),u_opacity:new i.Uniform1f(E,u.u_opacity)}),fill:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix)}),fillPattern:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_image:new i.Uniform1i(E,u.u_image),u_texsize:new i.Uniform2f(E,u.u_texsize),u_pixel_coord_upper:new i.Uniform2f(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(E,u.u_pixel_coord_lower),u_scale:new i.Uniform3f(E,u.u_scale),u_fade:new i.Uniform1f(E,u.u_fade)}),fillOutline:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_world:new i.Uniform2f(E,u.u_world)}),fillOutlinePattern:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_world:new i.Uniform2f(E,u.u_world),u_image:new i.Uniform1i(E,u.u_image),u_texsize:new i.Uniform2f(E,u.u_texsize),u_pixel_coord_upper:new i.Uniform2f(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(E,u.u_pixel_coord_lower),u_scale:new i.Uniform3f(E,u.u_scale),u_fade:new i.Uniform1f(E,u.u_fade)}),circle:(E,u)=>({u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(E,u.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(E,u.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(E,u.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(E,u.u_matrix)}),collisionBox:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(E,u.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(E,u.u_extrude_scale),u_overscale_factor:new i.Uniform1f(E,u.u_overscale_factor)}),collisionCircle:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_inv_matrix:new i.UniformMatrix4f(E,u.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(E,u.u_viewport_size)}),debug:(E,u)=>({u_color:new i.UniformColor(E,u.u_color),u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_overlay:new i.Uniform1i(E,u.u_overlay),u_overlay_scale:new i.Uniform1f(E,u.u_overlay_scale)}),clippingMask:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix)}),heatmap:(E,u)=>({u_extrude_scale:new i.Uniform1f(E,u.u_extrude_scale),u_intensity:new i.Uniform1f(E,u.u_intensity),u_matrix:new i.UniformMatrix4f(E,u.u_matrix)}),heatmapTexture:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_world:new i.Uniform2f(E,u.u_world),u_image:new i.Uniform1i(E,u.u_image),u_color_ramp:new i.Uniform1i(E,u.u_color_ramp),u_opacity:new i.Uniform1f(E,u.u_opacity)}),hillshade:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_image:new i.Uniform1i(E,u.u_image),u_latrange:new i.Uniform2f(E,u.u_latrange),u_light:new i.Uniform2f(E,u.u_light),u_shadow:new i.UniformColor(E,u.u_shadow),u_highlight:new i.UniformColor(E,u.u_highlight),u_accent:new i.UniformColor(E,u.u_accent)}),hillshadePrepare:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_image:new i.Uniform1i(E,u.u_image),u_dimension:new i.Uniform2f(E,u.u_dimension),u_zoom:new i.Uniform1f(E,u.u_zoom),u_unpack:new i.Uniform4f(E,u.u_unpack)}),line:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_ratio:new i.Uniform1f(E,u.u_ratio),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(E,u.u_units_to_pixels)}),lineGradient:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_ratio:new i.Uniform1f(E,u.u_ratio),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(E,u.u_units_to_pixels),u_image:new i.Uniform1i(E,u.u_image),u_image_height:new i.Uniform1f(E,u.u_image_height)}),linePattern:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_texsize:new i.Uniform2f(E,u.u_texsize),u_ratio:new i.Uniform1f(E,u.u_ratio),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_image:new i.Uniform1i(E,u.u_image),u_units_to_pixels:new i.Uniform2f(E,u.u_units_to_pixels),u_scale:new i.Uniform3f(E,u.u_scale),u_fade:new i.Uniform1f(E,u.u_fade)}),lineSDF:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_ratio:new i.Uniform1f(E,u.u_ratio),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(E,u.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(E,u.u_patternscale_a),u_patternscale_b:new i.Uniform2f(E,u.u_patternscale_b),u_sdfgamma:new i.Uniform1f(E,u.u_sdfgamma),u_image:new i.Uniform1i(E,u.u_image),u_tex_y_a:new i.Uniform1f(E,u.u_tex_y_a),u_tex_y_b:new i.Uniform1f(E,u.u_tex_y_b),u_mix:new i.Uniform1f(E,u.u_mix)}),raster:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_tl_parent:new i.Uniform2f(E,u.u_tl_parent),u_scale_parent:new i.Uniform1f(E,u.u_scale_parent),u_buffer_scale:new i.Uniform1f(E,u.u_buffer_scale),u_fade_t:new i.Uniform1f(E,u.u_fade_t),u_opacity:new i.Uniform1f(E,u.u_opacity),u_image0:new i.Uniform1i(E,u.u_image0),u_image1:new i.Uniform1i(E,u.u_image1),u_brightness_low:new i.Uniform1f(E,u.u_brightness_low),u_brightness_high:new i.Uniform1f(E,u.u_brightness_high),u_saturation_factor:new i.Uniform1f(E,u.u_saturation_factor),u_contrast_factor:new i.Uniform1f(E,u.u_contrast_factor),u_spin_weights:new i.Uniform3f(E,u.u_spin_weights)}),symbolIcon:(E,u)=>({u_is_size_zoom_constant:new i.Uniform1i(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(E,u.u_is_size_feature_constant),u_size_t:new i.Uniform1f(E,u.u_size_t),u_size:new i.Uniform1f(E,u.u_size),u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_pitch:new i.Uniform1f(E,u.u_pitch),u_rotate_symbol:new i.Uniform1i(E,u.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(E,u.u_aspect_ratio),u_fade_change:new i.Uniform1f(E,u.u_fade_change),u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(E,u.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(E,u.u_coord_matrix),u_is_text:new i.Uniform1i(E,u.u_is_text),u_pitch_with_map:new i.Uniform1i(E,u.u_pitch_with_map),u_texsize:new i.Uniform2f(E,u.u_texsize),u_texture:new i.Uniform1i(E,u.u_texture)}),symbolSDF:(E,u)=>({u_is_size_zoom_constant:new i.Uniform1i(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(E,u.u_is_size_feature_constant),u_size_t:new i.Uniform1f(E,u.u_size_t),u_size:new i.Uniform1f(E,u.u_size),u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_pitch:new i.Uniform1f(E,u.u_pitch),u_rotate_symbol:new i.Uniform1i(E,u.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(E,u.u_aspect_ratio),u_fade_change:new i.Uniform1f(E,u.u_fade_change),u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(E,u.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(E,u.u_coord_matrix),u_is_text:new i.Uniform1i(E,u.u_is_text),u_pitch_with_map:new i.Uniform1i(E,u.u_pitch_with_map),u_texsize:new i.Uniform2f(E,u.u_texsize),u_texture:new i.Uniform1i(E,u.u_texture),u_gamma_scale:new i.Uniform1f(E,u.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(E,u.u_is_halo)}),symbolTextAndIcon:(E,u)=>({u_is_size_zoom_constant:new i.Uniform1i(E,u.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(E,u.u_is_size_feature_constant),u_size_t:new i.Uniform1f(E,u.u_size_t),u_size:new i.Uniform1f(E,u.u_size),u_camera_to_center_distance:new i.Uniform1f(E,u.u_camera_to_center_distance),u_pitch:new i.Uniform1f(E,u.u_pitch),u_rotate_symbol:new i.Uniform1i(E,u.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(E,u.u_aspect_ratio),u_fade_change:new i.Uniform1f(E,u.u_fade_change),u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(E,u.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(E,u.u_coord_matrix),u_is_text:new i.Uniform1i(E,u.u_is_text),u_pitch_with_map:new i.Uniform1i(E,u.u_pitch_with_map),u_texsize:new i.Uniform2f(E,u.u_texsize),u_texsize_icon:new i.Uniform2f(E,u.u_texsize_icon),u_texture:new i.Uniform1i(E,u.u_texture),u_texture_icon:new i.Uniform1i(E,u.u_texture_icon),u_gamma_scale:new i.Uniform1f(E,u.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(E,u.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(E,u.u_is_halo)}),background:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_opacity:new i.Uniform1f(E,u.u_opacity),u_color:new i.UniformColor(E,u.u_color)}),backgroundPattern:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_opacity:new i.Uniform1f(E,u.u_opacity),u_image:new i.Uniform1i(E,u.u_image),u_pattern_tl_a:new i.Uniform2f(E,u.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(E,u.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(E,u.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(E,u.u_pattern_br_b),u_texsize:new i.Uniform2f(E,u.u_texsize),u_mix:new i.Uniform1f(E,u.u_mix),u_pattern_size_a:new i.Uniform2f(E,u.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(E,u.u_pattern_size_b),u_scale_a:new i.Uniform1f(E,u.u_scale_a),u_scale_b:new i.Uniform1f(E,u.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(E,u.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(E,u.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(E,u.u_tile_units_to_pixels)}),terrain:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_texture:new i.Uniform1i(E,u.u_texture),u_ele_delta:new i.Uniform1f(E,u.u_ele_delta)}),terrainDepth:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_ele_delta:new i.Uniform1f(E,u.u_ele_delta)}),terrainCoords:(E,u)=>({u_matrix:new i.UniformMatrix4f(E,u.u_matrix),u_texture:new i.Uniform1i(E,u.u_texture),u_terrain_coords_id:new i.Uniform1f(E,u.u_terrain_coords_id),u_ele_delta:new i.Uniform1f(E,u.u_ele_delta)})};class es{constructor(u,y,b){var S=(this.context=u).gl;this.buffer=S.createBuffer(),this.dynamicDraw=!!b,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){var y=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),y.bufferSubData(y.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){var u=this.context.gl;this.buffer&&(u.deleteBuffer(this.buffer),delete this.buffer)}}const eu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ru{constructor(u,y,b,S){this.length=y.length,this.attributes=b,this.itemSize=y.bytesPerElement,this.dynamicDraw=S,b=(this.context=u).gl,this.buffer=b.createBuffer(),u.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,y.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete y.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of `+this.length);var y=this.context.gl;this.bind(),y.bufferSubData(y.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,y){for(let S=0;S<this.attributes.length;S++){var b=this.attributes[S],b=y.attributes[b.name];b!==void 0&&u.enableVertexAttribArray(b)}}setVertexAttribPointers(u,y,b){for(let j=0;j<this.attributes.length;j++){var S=this.attributes[j],M=y.attributes[S.name];M!==void 0&&u.vertexAttribPointer(M,S.components,u[eu[S.type]],!1,this.itemSize,S.offset+this.itemSize*(b||0))}}destroy(){var u=this.context.gl;this.buffer&&(u.deleteBuffer(this.buffer),delete this.buffer)}}const po=new WeakMap;function As(E){var u;return po.has(E)?po.get(E):(u=(u=E.getParameter(E.VERSION))==null?void 0:u.startsWith("WebGL 2.0"),po.set(E,u),u)}class Dr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Al extends Dr{getDefault(){return i.Color.transparent}set(u){var y=this.current;u.r===y.r&&u.g===y.g&&u.b===y.b&&u.a===y.a&&!this.dirty||(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ca extends Dr{getDefault(){return 1}set(u){u===this.current&&!this.dirty||(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class fc extends Dr{getDefault(){return 0}set(u){u===this.current&&!this.dirty||(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class ea extends Dr{getDefault(){return[!0,!0,!0,!0]}set(u){var y=this.current;u[0]===y[0]&&u[1]===y[1]&&u[2]===y[2]&&u[3]===y[3]&&!this.dirty||(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Aa extends Dr{getDefault(){return!0}set(u){u===this.current&&!this.dirty||(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ou extends Dr{getDefault(){return 255}set(u){u===this.current&&!this.dirty||(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class tu extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){var y=this.current;u.func===y.func&&u.ref===y.ref&&u.mask===y.mask&&!this.dirty||(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Xc extends Dr{getDefault(){var u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){var y=this.current;u[0]===y[0]&&u[1]===y[1]&&u[2]===y[2]&&!this.dirty||(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Ml extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||(y=this.gl,u?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=u,this.dirty=!1)}}class qd extends Dr{getDefault(){return[0,1]}set(u){var y=this.current;u[0]===y[0]&&u[1]===y[1]&&!this.dirty||(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class nu extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||(y=this.gl,u?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=u,this.dirty=!1)}}class Qc extends Dr{getDefault(){return this.gl.LESS}set(u){u===this.current&&!this.dirty||(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class rl extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||(y=this.gl,u?y.enable(y.BLEND):y.disable(y.BLEND),this.current=u,this.dirty=!1)}}class ms extends Dr{getDefault(){var u=this.gl;return[u.ONE,u.ZERO]}set(u){var y=this.current;u[0]===y[0]&&u[1]===y[1]&&!this.dirty||(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Du extends Dr{getDefault(){return i.Color.transparent}set(u){var y=this.current;u.r===y.r&&u.g===y.g&&u.b===y.b&&u.a===y.a&&!this.dirty||(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class qi extends Dr{getDefault(){return this.gl.FUNC_ADD}set(u){u===this.current&&!this.dirty||(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class pc extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||(y=this.gl,u?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=u,this.dirty=!1)}}class ru extends Dr{getDefault(){return this.gl.BACK}set(u){u===this.current&&!this.dirty||(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class ol extends Dr{getDefault(){return this.gl.CCW}set(u){u===this.current&&!this.dirty||(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Gd extends Dr{getDefault(){return null}set(u){u===this.current&&!this.dirty||(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class il extends Dr{getDefault(){return this.gl.TEXTURE0}set(u){u===this.current&&!this.dirty||(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Ms extends Dr{getDefault(){var u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){var y=this.current;u[0]===y[0]&&u[1]===y[1]&&u[2]===y[2]&&u[3]===y[3]&&!this.dirty||(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class ou extends Dr{getDefault(){return null}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).bindFramebuffer(y.FRAMEBUFFER,u),this.current=u,this.dirty=!1)}}class mc extends Dr{getDefault(){return null}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).bindRenderbuffer(y.RENDERBUFFER,u),this.current=u,this.dirty=!1)}}class Zr extends Dr{getDefault(){return null}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).bindTexture(y.TEXTURE_2D,u),this.current=u,this.dirty=!1)}}class Wd extends Dr{getDefault(){return null}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).bindBuffer(y.ARRAY_BUFFER,u),this.current=u,this.dirty=!1)}}class Qf extends Dr{getDefault(){return null}set(u){var y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ts extends Dr{getDefault(){return null}set(u){var y;u===this.current&&!this.dirty||(As(y=this.gl)?y.bindVertexArray(u):(y=y.getExtension("OES_vertex_array_object"))!=null&&y.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class Lu extends Dr{getDefault(){return 4}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).pixelStorei(y.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1)}}class Jf extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1)}}class _y extends Dr{getDefault(){return!1}set(u){var y;u===this.current&&!this.dirty||((y=this.gl).pixelStorei(y.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1)}}class Kd extends Dr{constructor(u,y){super(u),this.context=u,this.parent=y}getDefault(){return null}}class Uh extends Kd{setDirty(){this.dirty=!0}set(u){var y;u===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(y=this.gl).framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,u,0),this.current=u,this.dirty=!1)}}class jh extends Kd{set(u){var y;u===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(y=this.gl).framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1)}}class Jc extends Kd{set(u){var y;u===this.current&&!this.dirty||(this.context.bindFramebuffer.set(this.parent),(y=this.gl).framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_STENCIL_ATTACHMENT,y.RENDERBUFFER,u),this.current=u,this.dirty=!1)}}class gc{constructor(u,y,b,S,M){if(this.context=u,this.width=y,this.height=b,y=u.gl,b=this.framebuffer=y.createFramebuffer(),this.colorAttachment=new Uh(u,b),S)this.depthAttachment=new(M?Jc:jh)(u,b);else if(M)throw new Error("Stencil cannot be set without depth");if(y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){var u=this.context.gl,y=this.colorAttachment.get();y&&u.deleteTexture(y),this.depthAttachment&&(y=this.depthAttachment.get())&&u.deleteRenderbuffer(y),u.deleteFramebuffer(this.framebuffer)}}class Vo{constructor(u,y,b){this.blendFunction=u,this.blendColor=y,this.mask=b}}Vo.Replace=[1,0],Vo.disabled=new Vo(Vo.Replace,i.Color.transparent,[!1,!1,!1,!1]),Vo.unblended=new Vo(Vo.Replace,i.Color.transparent,[!0,!0,!0,!0]),Vo.alphaBlended=new Vo([1,771],i.Color.transparent,[!0,!0,!0,!0]);class Yd{constructor(u){var y,b;this.gl=u,this.clearColor=new Al(this),this.clearDepth=new Ca(this),this.clearStencil=new fc(this),this.colorMask=new ea(this),this.depthMask=new Aa(this),this.stencilMask=new Ou(this),this.stencilFunc=new tu(this),this.stencilOp=new Xc(this),this.stencilTest=new Ml(this),this.depthRange=new qd(this),this.depthTest=new nu(this),this.depthFunc=new Qc(this),this.blend=new rl(this),this.blendFunc=new ms(this),this.blendColor=new Du(this),this.blendEquation=new qi(this),this.cullFace=new pc(this),this.cullFaceSide=new ru(this),this.frontFace=new ol(this),this.program=new Gd(this),this.activeTexture=new il(this),this.viewport=new Ms(this),this.bindFramebuffer=new ou(this),this.bindRenderbuffer=new mc(this),this.bindTexture=new Zr(this),this.bindVertexBuffer=new Wd(this),this.bindElementBuffer=new Qf(this),this.bindVertexArray=new ts(this),this.pixelStoreUnpack=new Lu(this),this.pixelStoreUnpackPremultiplyAlpha=new Jf(this),this.pixelStoreUnpackFlipY=new _y(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),As(u)?(this.HALF_FLOAT=u.HALF_FLOAT,y=u.getExtension("EXT_color_buffer_half_float"),this.RGBA16F=(b=u.RGBA16F)!=null?b:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(b=u.RGB16F)!=null?b:y==null?void 0:y.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")):(u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear"),b=u.getExtension("OES_texture_half_float"),this.HALF_FLOAT=b==null?void 0:b.HALF_FLOAT_OES)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,y){return new es(this,u,y)}createVertexBuffer(u,y,b){return new Ru(this,u,y,b)}createRenderbuffer(u,y,b){var S=this.gl,M=S.createRenderbuffer();return this.bindRenderbuffer.set(M),S.renderbufferStorage(S.RENDERBUFFER,u,y,b),this.bindRenderbuffer.set(null),M}createFramebuffer(u,y,b,S){return new gc(this,u,y,b,S)}clear({color:u,depth:y,stencil:b}){var S=this.gl;let M=0;u&&(M|=S.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),y!==void 0&&(M|=S.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(y),this.depthMask.set(!0)),b!==void 0&&(M|=S.STENCIL_BUFFER_BIT,this.clearStencil.set(b),this.stencilMask.set(255)),S.clear(M)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){i.deepEqual(u.blendFunction,Vo.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return As(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))==null?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var y;return As(this.gl)?this.gl.deleteVertexArray(u):(y=this.gl.getExtension("OES_vertex_array_object"))==null?void 0:y.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Hr{constructor(u,y,b){this.func=u,this.mask=y,this.range=b}}Hr.ReadOnly=!1,Hr.ReadWrite=!0,Hr.disabled=new Hr(519,Hr.ReadOnly,[0,1]);class Fo{constructor(u,y,b,S,M,j){this.test=u,this.ref=y,this.mask=b,this.fail=S,this.depthFail=M,this.pass=j}}Fo.disabled=new Fo({func:519,mask:0},0,0,7680,7680,7680);class ko{constructor(u,y,b){this.enable=u,this.mode=y,this.frontFace=b}}ko.disabled=new ko(!1,1029,2305),ko.backCCW=new ko(!0,1029,2305);let Zd;function X(E,u,y,b,S,M,j){var W=E.context,se=W.gl,Se=E.useProgram("collisionBox"),Pe=[];let me=0,Me=0;for(let Yn=0;Yn<b.length;Yn++){var Xe=b[Yn],et=u.getTile(Xe),rt=et.getBucket(y);if(rt){let zn=Xe.posMatrix;S[0]===0&&S[1]===0||(zn=E.translatePosMatrix(Xe.posMatrix,et,S,M));var tt,ht,gt=j?rt.textCollisionBox:rt.iconCollisionBox,bt=rt.collisionCircleArray;0<bt.length&&(tt=i.create(),ht=zn,i.mul(tt,rt.placementInvProjMatrix,E.transform.glCoordMatrix),i.mul(tt,tt,rt.placementViewportMatrix),Pe.push({circleArray:bt,circleOffset:Me,transform:ht,invTransform:tt,coord:Xe}),me+=bt.length/4,Me=me),gt&&Se.draw(W,se.LINES,Hr.disabled,Fo.disabled,E.colorModeForRenderPass(),ko.disabled,Ho(zn,E.transform,et),E.style.map.terrain&&E.style.map.terrain.getTerrainData(Xe),y.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,E.transform.zoom,null,null,gt.collisionVertexBuffer)}}if(j&&Pe.length){var $t=E.useProgram("collisionCircle"),Ut=new i.CollisionCircleLayoutArray;Ut.resize(4*me),Ut._trim();let Yn=0;for(const zn of Pe)for(let bn=0;bn<zn.circleArray.length/4;bn++){var yn=4*bn,Bt=zn.circleArray[0+yn],ln=zn.circleArray[1+yn],en=zn.circleArray[2+yn],yn=zn.circleArray[3+yn];Ut.emplace(Yn++,Bt,ln,en,yn,0),Ut.emplace(Yn++,Bt,ln,en,yn,1),Ut.emplace(Yn++,Bt,ln,en,yn,2),Ut.emplace(Yn++,Bt,ln,en,yn,3)}(!Zd||Zd.length<2*me)&&(Zd=function(zn){var bn=2*zn,Wn=new i.QuadTriangleArray;Wn.resize(bn),Wn._trim();for(let Nn=0;Nn<bn;Nn++){var hr=6*Nn;Wn.uint16[0+hr]=4*Nn+0,Wn.uint16[1+hr]=4*Nn+1,Wn.uint16[2+hr]=4*Nn+2,Wn.uint16[3+hr]=4*Nn+2,Wn.uint16[4+hr]=4*Nn+3,Wn.uint16[5+hr]=4*Nn+0}return Wn}(me));var Sn=W.createIndexBuffer(Zd,!0),Fn=W.createVertexBuffer(Ut,i.collisionCircleLayout.members,!0);for(const zn of Pe){var nr=Is(zn.transform,zn.invTransform,E.transform);$t.draw(W,se.TRIANGLES,Hr.disabled,Fo.disabled,E.colorModeForRenderPass(),ko.disabled,nr,E.style.map.terrain&&E.style.map.terrain.getTerrainData(zn.coord),y.id,Fn,Sn,i.SegmentVector.simpleSegment(0,2*zn.circleOffset,zn.circleArray.length,zn.circleArray.length/2),null,E.transform.zoom,null,null,null)}Fn.destroy(),Sn.destroy()}}const ve=i.identity(new Float32Array(16));function ze(E,u,y,b,S){if(E.renderPass==="translucent"){var M=Fo.disabled,j=E.colorModeForRenderPass();if(y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset")){var W=b,se=E,Se=y,Pe=u,me=y.layout.get("text-rotation-alignment"),Me=y.layout.get("text-pitch-alignment"),Xe=S,et=se.transform,rt=me==="map",tt=Me==="map";for(const ln of W){var ht,gt,bt,$t,Ut=Pe.getTile(ln),Bt=Ut.getBucket(Se);Bt&&Bt.text&&Bt.text.segments.get().length&&(ht=Bt.textSizeData,ht=i.evaluateSizeForZoom(ht,et.zoom),gt=Ht(Ut,1,se.transform.zoom),gt=lr(ln.posMatrix,tt,rt,se.transform,gt),bt=Se.layout.get("icon-text-fit")!=="none"&&Bt.hasIconData(),ht)&&(Ut=Math.pow(2,et.zoom-Ut.tileID.overscaledZ),$t=se.style.map.terrain?(en,yn)=>se.style.map.terrain.getElevation(ln,en,yn):null,function(en,yn,Sn,Fn,nr,Yn,zn,bn,Wn,hr,Nn){var Lr=en.text.placedSymbolArray,mo=en.text.dynamicLayoutVertexArray,kr=en.icon.dynamicLayoutVertexArray,Vr={};mo.clear();for(let ro=0;ro<Lr.length;ro++){var _r=Lr.get(ro),xo=en.allowVerticalPlacement&&!_r.placedOrientation,xo=_r.hidden||!_r.crossTileID||xo?null:Fn[_r.crossTileID];if(xo){var qr=new i.Point(_r.anchorX,_r.anchorY),Xr=de(qr,Sn?zn:Yn,Nn),ei=xe(nr.cameraToCenterDistance,Xr.signedDistanceFromCamera);let Oo=i.evaluateSizeForFeature(en.textSizeData,Wn,_r)*ei/i.ONE_EM;Sn&&(Oo*=en.tilePixelRatio/bn);var{width:ei,height:xo,anchor:Ra,textOffset:xi,textBoxScale:al}=xo,Ra=function(Wo,ii,zl,Sa,Si,Fs){var{horizontalAlign:Wo,verticalAlign:zs}=i.getAnchorAlignment(Wo),Wo=-(Wo-.5)*ii,ii=-(zs-.5)*zl;return new i.Point((Wo/Si+Sa[0])*Fs,(ii/Si+Sa[1])*Fs)}(Ra,ei,xo,xi,al,Oo),Co=Sn?de(qr.add(Ra),Yn,Nn).point:Xr.point.add(yn?Ra.rotate(-nr.angle):Ra),Ro=en.allowVerticalPlacement&&_r.placedOrientation===i.WritingMode.vertical?Math.PI/2:0;for(let ti=0;ti<_r.numGlyphs;ti++)i.addDynamicAttributes(mo,Co,Ro);hr&&0<=_r.associatedIconIndex&&(Vr[_r.associatedIconIndex]={shiftedAnchor:Co,angle:Ro})}else Ct(_r.numGlyphs,mo)}if(hr){kr.clear();var Fl=en.icon.placedSymbolArray;for(let ro=0;ro<Fl.length;ro++){var Bo=Fl.get(ro);if(Bo.hidden)Ct(Bo.numGlyphs,kr);else{var Ci=Vr[ro];if(Ci)for(let Oo=0;Oo<Bo.numGlyphs;Oo++)i.addDynamicAttributes(kr,Ci.shiftedAnchor,Ci.angle);else Ct(Bo.numGlyphs,kr)}}en.icon.dynamicLayoutVertexBuffer.updateData(kr)}en.text.dynamicLayoutVertexBuffer.updateData(mo)}(Bt,rt,tt,Xe,et,gt,ln.posMatrix,Ut,ht,bt,$t))}}y.paint.get("icon-opacity").constantOr(1)!==0&&Qe(E,u,y,b,!1,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),y.layout.get("icon-rotation-alignment"),y.layout.get("icon-pitch-alignment"),y.layout.get("icon-keep-upright"),M,j),y.paint.get("text-opacity").constantOr(1)!==0&&Qe(E,u,y,b,!0,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),y.layout.get("text-rotation-alignment"),y.layout.get("text-pitch-alignment"),y.layout.get("text-keep-upright"),M,j),u.map.showCollisionBoxes&&(X(E,u,y,b,y.paint.get("text-translate"),y.paint.get("text-translate-anchor"),!0),X(E,u,y,b,y.paint.get("icon-translate"),y.paint.get("icon-translate-anchor"),!1))}}function Qe(E,u,y,b,S,M,j,W,se,Se,Pe,me){var Me=E.context,Xe=Me.gl,et=E.transform,rt=W==="map",tt=se==="map",ht=W!=="viewport"&&y.layout.get("symbol-placement")!=="point",gt=rt&&!tt&&!ht,bt=!y.layout.get("symbol-sort-key").isConstant();let $t=!1;var Ut=E.depthModeForSublayer(0,Hr.ReadOnly),Bt=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ln=[];for(const ii of b){var en=u.getTile(ii),yn=en.getBucket(y);if(yn){var Sn=S?yn.text:yn.icon;if(Sn&&Sn.segments.get().length&&Sn.hasVisibleVertices){var hr=Sn.programConfigurations.get(y.id),Fn=S||yn.sdfIcons,nr=S?yn.textSizeData:yn.iconSizeData,Wn=tt||et.pitch!==0,Yn=E.useProgram((zn=Fn,Yn=S,yn.iconsInText&&Yn?"symbolTextAndIcon":zn?"symbolSDF":"symbolIcon"),hr),zn=i.evaluateSizeForZoom(nr,et.zoom),bn=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ii);let hu,Bl=[0,0],ni,fu,yp=null,Hm;S?(ni=en.glyphAtlasTexture,fu=Xe.LINEAR,hu=en.glyphAtlasTexture.size,yn.iconsInText&&(Bl=en.imageAtlasTexture.size,yp=en.imageAtlasTexture,hr=nr.kind==="composite"||nr.kind==="camera",Hm=Wn||E.options.rotating||E.options.zooming||hr?Xe.LINEAR:Xe.NEAREST)):(hr=y.layout.get("icon-size").constantOr(0)!==1||yn.iconsNeedLinear,ni=en.imageAtlasTexture,fu=Fn||E.options.rotating||E.options.zooming||hr||Wn?Xe.LINEAR:Xe.NEAREST,hu=en.imageAtlasTexture.size);var hr=Ht(en,1,E.transform.zoom),Wn=lr(ii.posMatrix,tt,rt,E.transform,hr),hr=Le(ii.posMatrix,tt,rt,E.transform,hr),Nn=Bt&&yn.hasTextData(),Nn=y.layout.get("icon-text-fit")!=="none"&&Nn&&yn.hasIconData();if(ht){var Lr=E.style.map.terrain?(Bs,od)=>E.style.map.terrain.getElevation(ii,Bs,od):null,mo=y.layout.get("text-rotation-alignment")==="map";{kr=void 0,Vr=void 0,_r=void 0,xo=void 0,qr=void 0,Xr=void 0,ei=void 0,xi=void 0,al=void 0,Ra=void 0,Co=void 0,Ro=void 0,Fl=void 0,Bo=void 0,Ci=void 0,ro=void 0,Oo=void 0,Si=void 0,ti=void 0,da=void 0,ja=void 0,zl=void 0,Sa=void 0;var kr=yn,Vr=ii.posMatrix,_r=E,xo=S,qr=Wn,Xr=hr,ei=tt,xi=Se,al=mo,Ra=Lr,Co=xo?kr.textSizeData:kr.iconSizeData,Ro=i.evaluateSizeForZoom(Co,_r.transform.zoom),Fl=[256/_r.width*2+1,256/_r.height*2+1],Bo=(xo?kr.text:kr.icon).dynamicLayoutVertexArray,Ci=(Bo.clear(),kr.lineVertexArray),ro=(xo?kr.text:kr.icon).placedSymbolArray,Oo=_r.transform.width/_r.transform.height;let Bs=!1;for(let od=0;od<ro.length;od++){var ja,ti,da,zl,Sa,Si=ro.get(od);if(Si.hidden||Si.writingMode===i.WritingMode.vertical&&!Bs)Ct(Si.numGlyphs,Bo);else{Bs=!1;let ys;Ra?(ys=[Si.anchorX,Si.anchorY,Ra(Si.anchorX,Si.anchorY),1],i.transformMat4(ys,ys,Vr)):Nt(ys=[Si.anchorX,Si.anchorY,0,1],ys,Vr),da=ys,ti=Fl,ja=void 0,ja=da[0]/da[3],da=da[1]/da[3],(!(ja>=-ti[0]&&ja<=ti[0]&&da>=-ti[1]&&da<=ti[1])||(ja=ys[3],da=xe(_r.transform.cameraToCenterDistance,ja),ti=i.evaluateSizeForFeature(Co,Ro,Si),ja=ei?ti/da:ti*da,da=de(ti=new i.Point(Si.anchorX,Si.anchorY),qr,Ra).point,Sa=lt(Si,ja,!(zl={projections:{},offsets:{}}),xi,Vr,qr,Xr,kr.glyphOffsetArray,Ci,Bo,da,ti,zl,Oo,al,Ra),Bs=Sa.useVertical,Sa.notEnoughRoom)||Bs||Sa.needsFlipping&&lt(Si,ja,!0,xi,Vr,qr,Xr,kr.glyphOffsetArray,Ci,Bo,da,ti,zl,Oo,al,Ra).notEnoughRoom)&&Ct(Si.numGlyphs,Bo)}}(xo?kr.text:kr.icon).dynamicLayoutVertexBuffer.updateData(Bo)}}mo=E.translatePosMatrix(ii.posMatrix,en,M,j),Lr=ht||S&&Bt||Nn?ve:Wn,xo=E.translatePosMatrix(hr,en,M,j,!0),Nn=Fn&&y.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;var Fs={program:Yn,buffers:Sn,uniformValues:Fn?yn.iconsInText?Im(nr.kind,zn,gt,tt,E,mo,Lr,xo,hu,Bl):ps(nr.kind,zn,gt,tt,E,mo,Lr,xo,S,hu):Ps(nr.kind,zn,gt,tt,E,mo,Lr,xo,S,hu),atlasTexture:ni,atlasTextureIcon:yp,atlasInterpolation:fu,atlasInterpolationIcon:Hm,isSDF:Fn,hasHalo:Nn};if(bt&&yn.canOverlap){$t=!0;for(const Bs of Sn.segments.get())ln.push({segments:new i.SegmentVector([Bs]),sortKey:Bs.sortKey,state:Fs,terrainData:bn})}else ln.push({segments:Sn.segments,sortKey:0,state:Fs,terrainData:bn})}}}$t&&ln.sort((ii,hu)=>ii.sortKey-hu.sortKey);for(const ii of ln){var zs,Wo=ii.state;Me.activeTexture.set(Xe.TEXTURE0),Wo.atlasTexture.bind(Wo.atlasInterpolation,Xe.CLAMP_TO_EDGE),Wo.atlasTextureIcon&&(Me.activeTexture.set(Xe.TEXTURE1),Wo.atlasTextureIcon)&&Wo.atlasTextureIcon.bind(Wo.atlasInterpolationIcon,Xe.CLAMP_TO_EDGE),Wo.isSDF&&(zs=Wo.uniformValues,Wo.hasHalo&&(zs.u_is_halo=1,Ot(Wo.buffers,ii.segments,y,E,Wo.program,Ut,Pe,me,zs,ii.terrainData)),zs.u_is_halo=0),Ot(Wo.buffers,ii.segments,y,E,Wo.program,Ut,Pe,me,Wo.uniformValues,ii.terrainData)}}function Ot(E,u,y,b,S,M,j,W,se,Se){var Pe=b.context,me=Pe.gl;S.draw(Pe,me.TRIANGLES,M,j,W,ko.disabled,se,Se,y.id,E.layoutVertexBuffer,E.indexBuffer,u,y.paint,b.transform.zoom,E.programConfigurations.get(y.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function At(E,u,y,b){if(E.renderPass==="translucent"){var S=y.paint.get("circle-opacity"),M=y.paint.get("circle-stroke-width"),j=y.paint.get("circle-stroke-opacity"),W=!y.layout.get("circle-sort-key").isConstant();if(S.constantOr(1)!==0||M.constantOr(1)!==0&&j.constantOr(1)!==0){var se=E.context,Se=se.gl,Pe=E.depthModeForSublayer(0,Hr.ReadOnly),me=Fo.disabled,Me=E.colorModeForRenderPass(),Xe=[];for(let zn=0;zn<b.length;zn++){var et=b[zn],rt=u.getTile(et),tt=rt.getBucket(y);if(tt){var ht=tt.programConfigurations.get(y.id),gt=E.useProgram("circle",ht),bt=tt.layoutVertexBuffer,$t=tt.indexBuffer,Ut=E.style.map.terrain&&E.style.map.terrain.getTerrainData(et),Bt={programConfiguration:ht,program:gt,layoutVertexBuffer:bt,indexBuffer:$t,uniformValues:((bn,Wn,hr,Nn)=>{var Lr,mo=bn.transform;let kr,Vr;return Vr=Nn.paint.get("circle-pitch-alignment")==="map"?(Lr=Ht(hr,1,mo.zoom),kr=!0,[Lr,Lr]):(kr=!1,mo.pixelsToGLUnits),{u_camera_to_center_distance:mo.cameraToCenterDistance,u_scale_with_map:+(Nn.paint.get("circle-pitch-scale")==="map"),u_matrix:bn.translatePosMatrix(Wn.posMatrix,hr,Nn.paint.get("circle-translate"),Nn.paint.get("circle-translate-anchor")),u_pitch_with_map:+kr,u_device_pixel_ratio:bn.pixelRatio,u_extrude_scale:Vr}})(E,et,rt,y),terrainData:Ut};if(W)for(const bn of tt.segments.get())Xe.push({segments:new i.SegmentVector([bn]),sortKey:bn.sortKey,state:Bt});else Xe.push({segments:tt.segments,sortKey:0,state:Bt})}}W&&Xe.sort((zn,bn)=>zn.sortKey-bn.sortKey);for(const zn of Xe){var{programConfiguration:ln,program:en,layoutVertexBuffer:yn,indexBuffer:Sn,uniformValues:Fn,terrainData:nr}=zn.state,Yn=zn.segments;en.draw(se,Se.TRIANGLES,Pe,me,Me,ko.disabled,Fn,nr,y.id,yn,Sn,Yn,y.paint,E.transform.zoom,ln)}}}}function nn(E,u,y,b){if(y.paint.get("heatmap-opacity")!==0){if(E.renderPass==="offscreen"){var S=E.context,M=S.gl,j=Fo.disabled,W=new Vo([M.ONE,M.ONE],i.Color.transparent,[!0,!0,!0,!0]);{var se=S,Se=E,Pe=y,me=se.gl;se.activeTexture.set(me.TEXTURE1),se.viewport.set([0,0,Se.width/4,Se.height/4]);let bt=Pe.heatmapFbo;bt?(me.bindTexture(me.TEXTURE_2D,bt.colorAttachment.get()),se.bindFramebuffer.set(bt.framebuffer)):(gt=me.createTexture(),me.bindTexture(me.TEXTURE_2D,gt),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_S,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_WRAP_T,me.CLAMP_TO_EDGE),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MIN_FILTER,me.LINEAR),me.texParameteri(me.TEXTURE_2D,me.TEXTURE_MAG_FILTER,me.LINEAR),bt=Pe.heatmapFbo=se.createFramebuffer(Se.width/4,Se.height/4,!1,!1),function(Sn,Ut,Bt,ln){var en=Sn.gl,yn=(yn=Sn.HALF_FLOAT)!=null?yn:en.UNSIGNED_BYTE,Sn=(Sn=Sn.RGBA16F)!=null?Sn:en.RGBA;en.texImage2D(en.TEXTURE_2D,0,Sn,Ut.width/4,Ut.height/4,0,en.RGBA,yn,null),ln.colorAttachment.set(Bt)}(se,Se,gt,bt))}S.clear({color:i.Color.transparent});for(let bt=0;bt<b.length;bt++){var Me,Xe,et,rt,tt,ht=b[bt];u.hasRenderableParent(ht)||(Xe=(Me=u.getTile(ht)).getBucket(y))&&(et=Xe.programConfigurations.get(y.id),rt=E.useProgram("heatmap",et),tt=E.transform.zoom,rt.draw(S,M.TRIANGLES,Hr.disabled,j,W,ko.disabled,(rt=ht.posMatrix,ht=Me,Me=tt,tt=y.paint.get("heatmap-intensity"),{u_matrix:rt,u_extrude_scale:Ht(ht,1,Me),u_intensity:tt}),null,y.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,y.paint,E.transform.zoom,et))}S.viewport.set([0,0,E.width,E.height])}else if(E.renderPass==="translucent"){E.context.setColorMode(E.colorModeForRenderPass());var me=E,Pe=y,se=me.context,Se=se.gl,gt=Pe.heatmapFbo;if(gt){se.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_2D,gt.colorAttachment.get()),se.activeTexture.set(Se.TEXTURE1);let ln=Pe.colorRampTexture;(ln=ln||(Pe.colorRampTexture=new G(se,Pe.colorRamp,Se.RGBA))).bind(Se.LINEAR,Se.CLAMP_TO_EDGE),me.useProgram("heatmapTexture").draw(se,Se.TRIANGLES,Hr.disabled,Fo.disabled,me.colorModeForRenderPass(),ko.disabled,Pl(me,Pe,0,1),null,Pe.id,me.viewportBuffer,me.quadTriangleIndexBuffer,me.viewportSegments,Pe.paint,me.transform.zoom)}}}}function xn(E,u,y,b){if(E.renderPass==="translucent"){var S=y.paint.get("line-opacity"),M=y.paint.get("line-width");if(S.constantOr(1)!==0&&M.constantOr(1)!==0){var j,W,se,Se,Pe,me,Me,Xe,et,rt,tt=E.depthModeForSublayer(0,Hr.ReadOnly),ht=E.colorModeForRenderPass(),gt=y.paint.get("line-dasharray"),bt=y.paint.get("line-pattern"),$t=bt.constantOr(1),Ut=y.paint.get("line-gradient"),Bt=y.getCrossfadeParameters(),ln=$t?"linePattern":gt?"lineSDF":Ut?"lineGradient":"line",en=E.context,yn=en.gl;let mo=!0;for(const kr of b){var Sn=u.getTile(kr);if(!$t||Sn.patternsLoaded()){var Fn=Sn.getBucket(y);if(Fn){var nr,Yn,zn=Fn.programConfigurations.get(y.id),Wn=E.context.program.get(),bn=E.useProgram(ln,zn),Wn=mo||bn.program!==Wn,hr=E.style.map.terrain&&E.style.map.terrain.getTerrainData(kr),Nn=bt.constantOr(null),Nn=(Nn&&Sn.imageAtlas&&(nr=(Yn=Sn.imageAtlas).patternPositions[Nn.to.toString()],Yn=Yn.patternPositions[Nn.from.toString()],nr)&&Yn&&zn.setConstantPatternPositions(nr,Yn),hr?kr:null),Lr=$t?(nr=Sn,Yn=y,Me=Bt,Xe=Nn,rt=et=void 0,et=(me=E).transform,rt=ks(nr,et),{u_matrix:fs(me,nr,Yn,Xe),u_texsize:nr.imageAtlasTexture.size,u_ratio:1/Ht(nr,1,et.zoom),u_device_pixel_ratio:me.pixelRatio,u_image:0,u_scale:[rt,Me.fromScale,Me.toScale],u_fade:Me.t,u_units_to_pixels:[1/et.pixelsToGLUnits[0],1/et.pixelsToGLUnits[1]]}):gt?(Xe=Sn,me=y,rt=gt,Me=Bt,et=Nn,Pe=Se=Lr=Se=W=se=W=void 0,W=(j=E).transform,se=j.lineAtlas,W=ks(Xe,W),Se=me.layout.get("line-cap")==="round",Lr=se.getDash(rt.from,Se),rt=se.getDash(rt.to,Se),Se=Lr.width*Me.fromScale,Pe=rt.width*Me.toScale,i.extend(xa(j,Xe,me,et),{u_patternscale_a:[W/Se,-Lr.height/2],u_patternscale_b:[W/Pe,-rt.height/2],u_sdfgamma:se.width/(256*Math.min(Se,Pe)*j.pixelRatio)/2,u_image:0,u_tex_y_a:Lr.y,u_tex_y_b:rt.y,u_mix:Me.t})):Ut?(W=E,se=Sn,Se=y,Pe=Fn.lineClipsArray.length,j=Nn,i.extend(xa(W,se,Se,j),{u_image:0,u_image_height:Pe})):xa(E,Sn,y,Nn);if($t)en.activeTexture.set(yn.TEXTURE0),Sn.imageAtlasTexture.bind(yn.LINEAR,yn.CLAMP_TO_EDGE),zn.updatePaintBuffers(Bt);else if(gt&&(Wn||E.lineAtlas.dirty))en.activeTexture.set(yn.TEXTURE0),E.lineAtlas.bind(en);else if(Ut){Nn=Fn.gradients[y.id];let Vr=Nn.texture;if(y.gradientVersion!==Nn.version){let _r=256;y.stepInterpolant&&(Sn=u.getSource().maxzoom,Wn=kr.canonical.z===Sn?Math.ceil(1<<E.transform.maxZoom-kr.canonical.z):1,Sn=Fn.maxLineLength/i.EXTENT,_r=i.clamp(i.nextPowerOfTwo(1024*Sn*Wn),256,en.maxTextureSize)),Nn.gradient=i.renderColorRamp({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:_r,image:Nn.gradient||void 0,clips:Fn.lineClipsArray}),Nn.texture?Nn.texture.update(Nn.gradient):Nn.texture=new G(en,Nn.gradient,yn.RGBA),Nn.version=y.gradientVersion,Vr=Nn.texture}en.activeTexture.set(yn.TEXTURE0),Vr.bind(y.stepInterpolant?yn.NEAREST:yn.LINEAR,yn.CLAMP_TO_EDGE)}bn.draw(en,yn.TRIANGLES,tt,E.stencilModeForClipping(kr),ht,ko.disabled,Lr,hr,y.id,Fn.layoutVertexBuffer,Fn.indexBuffer,Fn.segments,y.paint,E.transform.zoom,zn,Fn.layoutVertexBuffer2),mo=!1}}}}}}function fr(E,u,y,b,S){if(y&&b&&b.imageAtlas){b=b.imageAtlas.patternPositions;let M=b[y.to.toString()],j=b[y.from.toString()];!M&&j&&(M=j),!j&&M&&(j=M),M&&j||(y=S.getPaintProperty(u),M=b[y],j=b[y]),M&&j&&E.setConstantPatternPositions(M,j)}}function Tr(E,u,y,b){var S,M,j=y.paint.get("fill-color"),W=y.paint.get("fill-opacity");W.constantOr(1)!==0&&(S=E.colorModeForRenderPass(),M=y.paint.get("fill-pattern"),M=E.opaquePassEnabledForLayer()&&!M.constantOr(1)&&j.constantOr(i.Color.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent",E.renderPass===M&&(j=E.depthModeForSublayer(1,E.renderPass==="opaque"?Hr.ReadWrite:Hr.ReadOnly),xr(E,u,y,b,j,S,!1)),E.renderPass==="translucent")&&y.paint.get("fill-antialias")&&(W=E.depthModeForSublayer(y.getPaintProperty("fill-outline-color")?2:0,Hr.ReadOnly),xr(E,u,y,b,W,S,!0))}function xr(E,u,y,b,S,M,j){var W=E.context.gl,se="fill-pattern",Se=y.paint.get(se),Pe=Se&&Se.constantOr(1),me=y.getCrossfadeParameters();let Me,Xe,et,rt,tt;Me=j?(Xe=Pe&&!y.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W.LINES):(Xe=Pe?"fillPattern":"fill",W.TRIANGLES);var ht=Se.constantOr(null);for(const yn of b){var gt,bt,$t,Ut,Bt,ln,en=u.getTile(yn);Pe&&!en.patternsLoaded()||(gt=en.getBucket(y))&&(bt=gt.programConfigurations.get(y.id),$t=E.useProgram(Xe,bt),Ut=E.style.map.terrain&&E.style.map.terrain.getTerrainData(yn),Pe&&(E.context.activeTexture.set(W.TEXTURE0),en.imageAtlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE),bt.updatePaintBuffers(me)),fr(bt,se,ht,en,y),Bt=((Ut?yn:null)||yn).posMatrix,Bt=E.translatePosMatrix(Bt,en,y.paint.get("fill-translate"),y.paint.get("fill-translate-anchor")),et=j?(rt=gt.indexBuffer2,tt=gt.segments2,ln=[W.drawingBufferWidth,W.drawingBufferHeight],Xe==="fillOutlinePattern"&&Pe?Sr(Bt,E,me,en,ln):yr(Bt,ln)):(rt=gt.indexBuffer,tt=gt.segments,Pe?kn(Bt,E,me,en):Cn(Bt)),$t.draw(E.context,Me,S,E.stencilModeForClipping(yn),M,ko.disabled,et,Ut,y.id,gt.layoutVertexBuffer,rt,tt,y.paint,E.transform.zoom,bt))}}function Jo(E,u,y,b){var S,M=y.paint.get("fill-extrusion-opacity");M!==0&&E.renderPass==="translucent"&&(S=new Hr(E.context.gl.LEQUAL,Hr.ReadWrite,E.depthRangeFor3D),M!==1||y.paint.get("fill-extrusion-pattern").constantOr(1)?(Yr(E,u,y,b,S,Fo.disabled,Vo.disabled),Yr(E,u,y,b,S,E.stencilModeFor3D(),E.colorModeForRenderPass())):(M=E.colorModeForRenderPass(),Yr(E,u,y,b,S,Fo.disabled,M)))}function Yr(E,u,y,b,S,M,j){var W=E.context,se=W.gl,Se="fill-extrusion-pattern",Pe=y.paint.get(Se),me=Pe.constantOr(1),Me=y.getCrossfadeParameters(),Xe=y.paint.get("fill-extrusion-opacity"),et=Pe.constantOr(null);for(const Bt of b){var rt,tt,ht,gt,bt,$t=u.getTile(Bt),Ut=$t.getBucket(y);Ut&&(rt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Bt),tt=Ut.programConfigurations.get(y.id),ht=E.useProgram(me?"fillExtrusionPattern":"fillExtrusion",tt),me&&(E.context.activeTexture.set(se.TEXTURE0),$t.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),tt.updatePaintBuffers(Me)),fr(tt,Se,et,$t,y),gt=E.translatePosMatrix(Bt.posMatrix,$t,y.paint.get("fill-extrusion-translate"),y.paint.get("fill-extrusion-translate-anchor")),bt=y.paint.get("fill-extrusion-vertical-gradient"),$t=me?Gt(gt,E,bt,Xe,Bt,Me,$t):It(gt,E,bt,Xe),ht.draw(W,W.gl.TRIANGLES,S,M,j,ko.backCCW,$t,rt,y.id,Ut.layoutVertexBuffer,Ut.indexBuffer,Ut.segments,y.paint,E.transform.zoom,tt,E.style.map.terrain&&Ut.centroidVertexBuffer))}}function ca(E,u,y,b){if(E.renderPass==="offscreen"||E.renderPass==="translucent"){var S=E.context,M=E.depthModeForSublayer(0,Hr.ReadOnly),j=E.colorModeForRenderPass(),[W,b]=E.renderPass==="translucent"?E.stencilConfigForOverlap(b):[{},b];for(const Bt of b){var se=u.getTile(Bt);if(se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&E.renderPass==="offscreen"){$t=bt=gt=ht=tt=rt=et=Xe=Me=me=Pe=Se=void 0;var Se=E,Pe=se,me=y,Me=M,Xe=Fo.disabled,et=j,rt=Se.context,tt=rt.gl,ht=Pe.dem;if(ht&&ht.data){var gt=ht.dim,bt=ht.stride,$t=ht.getPixels();rt.activeTexture.set(tt.TEXTURE1),rt.pixelStoreUnpackPremultiplyAlpha.set(!1),Pe.demTexture=Pe.demTexture||Se.getTileTexture(bt),(Pe.demTexture?((bt=Pe.demTexture).update($t,{premultiply:!1}),bt):(Pe.demTexture=new G(rt,$t,tt.RGBA,{premultiply:!1}),Pe.demTexture)).bind(tt.NEAREST,tt.CLAMP_TO_EDGE),rt.activeTexture.set(tt.TEXTURE0);let ln=Pe.fbo;ln||((bt=new G(rt,{width:gt,height:gt,data:null},tt.RGBA)).bind(tt.LINEAR,tt.CLAMP_TO_EDGE),(ln=Pe.fbo=rt.createFramebuffer(gt,gt,!0,!1)).colorAttachment.set(bt.texture)),rt.bindFramebuffer.set(ln.framebuffer),rt.viewport.set([0,0,gt,gt]),Se.useProgram("hillshadePrepare").draw(rt,tt.TRIANGLES,Me,Xe,et,ko.disabled,hs(Pe.tileID,ht),null,me.id,Se.rasterBoundsBuffer,Se.quadTriangleIndexBuffer,Se.rasterBoundsSegments),Pe.needsHillshadePrepare=!1}}else E.renderPass==="translucent"&&($t=E,bt=Bt,gt=se,rt=y,tt=M,Me=W[Bt.overscaledZ],Xe=j,Pe=Se=me=ht=et=void 0,et=$t.context,ht=et.gl,me=gt.fbo)&&(Se=$t.useProgram("hillshade"),Pe=$t.style.map.terrain&&$t.style.map.terrain.getTerrainData(bt),et.activeTexture.set(ht.TEXTURE0),ht.bindTexture(ht.TEXTURE_2D,me.colorAttachment.get()),me=Pe?bt:null,Se.draw(et,ht.TRIANGLES,tt,Me,Xe,ko.disabled,ds($t,gt,rt,me),Pe,rt.id,$t.rasterBoundsBuffer,$t.quadTriangleIndexBuffer,$t.rasterBoundsSegments))}S.viewport.set([0,0,E.width,E.height])}}function bi(E,u,y,b){if(E.renderPass==="translucent"&&y.paint.get("raster-opacity")!==0&&b.length){var S=E.context,M=S.gl,j=u.getSource(),W=E.useProgram("raster"),se=E.colorModeForRenderPass(),[Se,b]=j instanceof nt?[{},b]:E.stencilConfigForOverlap(b),Pe=b[b.length-1].overscaledZ,me=!E.options.moving;for(const gt of b){var Me=E.depthModeForSublayer(gt.overscaledZ-Pe,y.paint.get("raster-opacity")===1?Hr.ReadWrite:Hr.ReadOnly,M.LESS),tt=u.getTile(gt),et=(tt.registerFadeDuration(y.paint.get("raster-fade-duration")),u.findLoadedParent(gt,0)),Xe=function(Ut,Bt,ln,en,yn,Sn){en=en.paint.get("raster-fade-duration");{var Fn;return!Sn&&0<en?(Sn=g.now(),Fn=(Sn-Ut.timeAdded)/en,Sn=Bt?(Sn-Bt.timeAdded)/en:-1,en=ln.getSource(),ln=yn.coveringZoomLevel({tileSize:en.tileSize,roundZoom:en.roundZoom}),yn=!Bt||Math.abs(Bt.tileID.overscaledZ-ln)>Math.abs(Ut.tileID.overscaledZ-ln),en=yn&&Ut.refreshedUponExpiration?1:i.clamp(yn?Fn:1-Sn,0,1),Ut.refreshedUponExpiration&&1<=Fn&&(Ut.refreshedUponExpiration=!1),Bt?{opacity:1,mix:1-en}:{opacity:en,mix:0}):{opacity:1,mix:0}}}(tt,et,u,y,E.transform,E.style.map.terrain);let bt,$t;var rt=y.paint.get("raster-resampling")==="nearest"?M.NEAREST:M.LINEAR,et=(S.activeTexture.set(M.TEXTURE0),tt.texture.bind(rt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(M.TEXTURE1),et?(et.texture.bind(rt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),bt=Math.pow(2,et.tileID.overscaledZ-tt.tileID.overscaledZ),$t=[tt.tileID.canonical.x*bt%1,tt.tileID.canonical.y*bt%1]):tt.texture.bind(rt,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),E.style.map.terrain&&E.style.map.terrain.getTerrainData(gt)),tt=et?gt:null,rt=tt?tt.posMatrix:E.transform.calculatePosMatrix(gt.toUnwrapped(),me),tt=Ja(rt,$t||[0,0],bt||1,Xe,y);j instanceof nt?W.draw(S,M.TRIANGLES,Me,Fo.disabled,se,ko.disabled,tt,et,y.id,j.boundsBuffer,E.quadTriangleIndexBuffer,j.boundsSegments):W.draw(S,M.TRIANGLES,Me,Se[gt.overscaledZ],se,ko.disabled,tt,et,y.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}}}function yc(E,u,y,b){var S=y.paint.get("background-color"),M=y.paint.get("background-opacity");if(M!==0){var j=E.context,W=j.gl,se=E.transform,Se=se.tileSize,Pe=y.paint.get("background-pattern");if(!E.isPatternMissing(Pe)){var me=!Pe&&S.a===1&&M===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass===me){var Me=Fo.disabled,Xe=E.depthModeForSublayer(0,me=="opaque"?Hr.ReadWrite:Hr.ReadOnly),et=E.colorModeForRenderPass(),rt=E.useProgram(Pe?"backgroundPattern":"background"),me=b||se.coveringTiles({tileSize:Se,terrain:E.style.map.terrain}),tt=(Pe&&(j.activeTexture.set(W.TEXTURE0),E.imageManager.bind(E.context)),y.getCrossfadeParameters());for(const $t of me){var ht=b?$t.posMatrix:E.transform.calculatePosMatrix($t.toUnwrapped()),ht=Pe?Mu(ht,M,E,Pe,{tileID:$t,tileSize:Se},tt):{u_matrix:ht,u_opacity:M,u_color:S},gt=E.style.map.terrain&&E.style.map.terrain.getTerrainData($t);rt.draw(j,W.TRIANGLES,Xe,Me,et,ko.disabled,ht,gt,y.id,E.tileExtentBuffer,E.quadTriangleIndexBuffer,E.tileExtentSegments)}}}}}const Xd=new i.Color(1,0,0,1),iu=new i.Color(0,1,0,1),$h=new i.Color(0,0,1,1),ep=new i.Color(1,0,1,1),by=new i.Color(0,1,1,1);function wy(E){var u,y,b=E.transform.padding,b=(km(E,E.transform.height-(b.top||0),3,Xd),km(E,b.bottom||0,3,iu),Qd(E,b.left||0,3,$h),Qd(E,E.transform.width-(b.right||0),3,ep),E.transform.centerPoint);u=E,y=b.x,E=E.transform.height-b.y,b=by,vc(u,y-1,E-10,2,20,b),vc(u,y-10,E-1,20,2,b)}function km(E,u,y,b){vc(E,0,u+y/2,E.transform.width,y,b)}function Qd(E,u,y,b){vc(E,u-y/2,0,y,E.transform.height,b)}function vc(E,u,y,b,S,M){var j=E.context,W=j.gl;W.enable(W.SCISSOR_TEST),W.scissor(u*E.pixelRatio,y*E.pixelRatio,b*E.pixelRatio,S*E.pixelRatio),j.clear({color:M}),W.disable(W.SCISSOR_TEST)}function Jd(E,u,y){for(let rt=0;rt<y.length;rt++){b=void 0,et=void 0,S=void 0,M=void 0,j=void 0,W=void 0,se=void 0,Se=void 0,Pe=void 0,me=void 0,Me=void 0,Xe=void 0;var b=E,et=u,S=y[rt],M=b.context,j=M.gl,W=S.posMatrix,se=b.useProgram("debug"),Se=Hr.disabled,Pe=Fo.disabled,me=b.colorModeForRenderPass(),Me=b.style.map.terrain&&b.style.map.terrain.getTerrainData(S),Xe=(M.activeTexture.set(j.TEXTURE0),et.getTileByID(S.key).latestRawTileData),Xe=Xe&&Xe.byteLength||0,Xe=Math.floor(Xe/1024),et=et.getTile(S).tileSize,et=512/Math.min(et,512)*(S.overscaledZ/b.transform.zoom)*.5;let tt=S.canonical.toString();S.overscaledZ!==S.canonical.z&&(tt+=" => "+S.overscaledZ),S=tt+` ${Xe}kB`,function(ht,gt){ht.initDebugOverlayCanvas();var bt=ht.debugOverlayCanvas,$t=ht.context.gl,Ut=ht.debugOverlayCanvas.getContext("2d");Ut.clearRect(0,0,bt.width,bt.height),Ut.shadowColor="white",Ut.shadowBlur=2,Ut.lineWidth=1.5,Ut.strokeStyle="white",Ut.textBaseline="top",Ut.font="bold 36px Open Sans, sans-serif",Ut.fillText(gt,5,5),Ut.strokeText(gt,5,5),ht.debugOverlayTexture.update(bt),ht.debugOverlayTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE)}(b,S),se.draw(M,j.TRIANGLES,Se,Pe,Vo.alphaBlended,ko.disabled,Qa(W,i.Color.transparent,et),null,"$debug",b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),se.draw(M,j.LINE_STRIP,Se,Pe,me,ko.disabled,Qa(W,i.Color.red),Me,"$debug",b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}}function tp(E,u){let y=null;var S=Object.values(E._layers).flatMap(j=>j.source&&!j.isHidden(u)?[E.sourceCaches[j.source]]:[]),b=S.filter(j=>j.getSource().type==="vector"),S=S.filter(j=>j.getSource().type!=="vector");const M=j=>{(!y||y.getSource().maxzoom<j.getSource().maxzoom)&&(y=j)};return b.forEach(j=>M(j)),y||S.forEach(j=>M(j)),y}function B_(E,u,M){var b,S=E.context,M=M.implementation;E.renderPass==="offscreen"?(b=M.prerender)&&(E.setCustomLayerDefaults(),S.setColorMode(E.colorModeForRenderPass()),b.call(M,S.gl,E.transform.customLayerMatrix()),S.setDirty(),E.setBaseState()):E.renderPass==="translucent"&&(E.setCustomLayerDefaults(),S.setColorMode(E.colorModeForRenderPass()),S.setStencilMode(Fo.disabled),b=M.renderingMode==="3d"?new Hr(E.context.gl.LEQUAL,Hr.ReadWrite,E.depthRangeFor3D):E.depthModeForSublayer(0,Hr.ReadOnly),S.setDepthMode(b),M.render(S.gl,E.transform.customLayerMatrix()),S.setDirty(),E.setBaseState(),S.bindFramebuffer.set(null))}function xy(E,u){var y=E.context,b=y.gl,S=Vo.unblended,M=new Hr(b.LEQUAL,Hr.ReadWrite,[0,1]),j=u.getTerrainMesh(),W=u.sourceCache.getRenderableTiles(),se=E.useProgram("terrainDepth");y.bindFramebuffer.set(u.getFramebuffer("depth").framebuffer),y.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),y.clear({color:i.Color.transparent,depth:1});for(const me of W){var Se=u.getTerrainData(me.tileID),Pe={u_matrix:E.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_ele_delta:u.getMeshFrameDelta(E.transform.zoom)};se.draw(y,b.TRIANGLES,M,Fo.disabled,S,ko.backCCW,Pe,Se,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}y.bindFramebuffer.set(null),y.viewport.set([0,0,E.width,E.height])}function Pm(E,u){var y=E.context,b=y.gl,S=Vo.unblended,M=new Hr(b.LEQUAL,Hr.ReadWrite,[0,1]),j=u.getTerrainMesh(),W=u.getCoordsTexture(),se=u.sourceCache.getRenderableTiles(),Se=E.useProgram("terrainCoords");y.bindFramebuffer.set(u.getFramebuffer("coords").framebuffer),y.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),y.clear({color:i.Color.transparent,depth:1}),u.coordsIndex=[];for(const Me of se){var Pe=u.getTerrainData(Me.tileID),me=(y.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,W.texture),E.transform.calculatePosMatrix(Me.tileID.toUnwrapped())),me={u_matrix:me,u_terrain_coords_id:(255-u.coordsIndex.length)/255,u_texture:0,u_ele_delta:u.getMeshFrameDelta(E.transform.zoom)};Se.draw(y,b.TRIANGLES,M,Fo.disabled,S,ko.backCCW,me,Pe,"terrain",j.vertexBuffer,j.indexBuffer,j.segments),u.coordsIndex.push(Me.tileID.key)}y.bindFramebuffer.set(null),y.viewport.set([0,0,E.width,E.height])}function np(E,u,y){var b=E.context,S=b.gl,M=E.colorModeForRenderPass(),j=new Hr(S.LEQUAL,Hr.ReadWrite,E.depthRangeFor3D),W=E.useProgram("terrain"),se=u.getTerrainMesh();b.bindFramebuffer.set(null),b.viewport.set([0,0,E.width,E.height]);for(const me of y){var Pe=E.renderToTexture.getTexture(me),Se=u.getTerrainData(me.tileID),Pe=(b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,Pe.texture),E.transform.calculatePosMatrix(me.tileID.toUnwrapped())),Pe={u_matrix:Pe,u_texture:0,u_ele_delta:u.getMeshFrameDelta(E.transform.zoom)};W.draw(b,S.TRIANGLES,j,Fo.disabled,M,ko.backCCW,Pe,Se,"terrain",se.vertexBuffer,se.indexBuffer,se.segments)}}class Cy{constructor(u,y){this.context=new Yd(u),this.transform=y,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.identity(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=St.maxUnderzooming+St.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ji}resize(u,y,b){if(this.width=Math.floor(u*b),this.height=Math.floor(y*b),this.pixelRatio=b,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){var y=this.context,u=new i.PosArray,u=(u.emplaceBack(0,0),u.emplaceBack(i.EXTENT,0),u.emplaceBack(0,i.EXTENT),u.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=y.createVertexBuffer(u,ba.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2),new i.PosArray),u=(u.emplaceBack(0,0),u.emplaceBack(i.EXTENT,0),u.emplaceBack(0,i.EXTENT),u.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=y.createVertexBuffer(u,ba.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5),new i.RasterBoundsArray),u=(u.emplaceBack(0,0,0,0),u.emplaceBack(i.EXTENT,0,i.EXTENT,0),u.emplaceBack(0,i.EXTENT,0,i.EXTENT),u.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=y.createVertexBuffer(u,$e.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2),new i.PosArray),u=(u.emplaceBack(0,0),u.emplaceBack(1,0),u.emplaceBack(0,1),u.emplaceBack(1,1),this.viewportBuffer=y.createVertexBuffer(u,ba.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2),new i.LineStripIndexArray),u=(u.emplaceBack(0),u.emplaceBack(1),u.emplaceBack(3),u.emplaceBack(2),u.emplaceBack(0),this.tileBorderIndexBuffer=y.createIndexBuffer(u),new i.TriangleIndexArray),y=(u.emplaceBack(0,1,2),u.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=y.createIndexBuffer(u),this.context.gl);this.stencilClearMode=new Fo({func:y.ALWAYS,mask:0},0,255,y.ZERO,y.ZERO,y.ZERO)}clearStencil(){var u=this.context,y=u.gl,b=(this.nextStencilID=1,this.currentStencilSource=void 0,i.create());i.ortho(b,0,this.width,this.height,0,0,1),i.scale(b,b,[y.drawingBufferWidth,y.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,y.TRIANGLES,Hr.disabled,this.stencilClearMode,Vo.disabled,ko.disabled,wa(b),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,y){if(this.currentStencilSource!==u.source&&u.isTileClipped()&&y&&y.length){this.currentStencilSource=u.source;var b=this.context,S=b.gl,M=(256<this.nextStencilID+y.length&&this.clearStencil(),b.setColorMode(Vo.disabled),b.setDepthMode(Hr.disabled),this.useProgram("clippingMask"));this._tileClippingMaskIDs={};for(const se of y){var j=this._tileClippingMaskIDs[se.key]=this.nextStencilID++,W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(se);M.draw(b,S.TRIANGLES,Hr.disabled,new Fo({func:S.ALWAYS,mask:0},j,255,S.KEEP,S.KEEP,S.REPLACE),Vo.disabled,ko.disabled,wa(se.posMatrix),W,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}}stencilModeFor3D(){this.currentStencilSource=void 0,256<this.nextStencilID+1&&this.clearStencil();var u=this.nextStencilID++,y=this.context.gl;return new Fo({func:y.NOTEQUAL,mask:255},u,255,y.KEEP,y.KEEP,y.REPLACE)}stencilModeForClipping(u){var y=this.context.gl;return new Fo({func:y.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,y.KEEP,y.KEEP,y.REPLACE)}stencilConfigForOverlap(b){var y=this.context.gl,b=b.sort((W,se)=>se.overscaledZ-W.overscaledZ),S=b[b.length-1].overscaledZ,M=b[0].overscaledZ-S+1;if(1<M){this.currentStencilSource=void 0,256<this.nextStencilID+M&&this.clearStencil();var j={};for(let W=0;W<M;W++)j[W+S]=new Fo({func:y.GEQUAL,mask:255},W+this.nextStencilID,255,y.KEEP,y.KEEP,y.REPLACE);return this.nextStencilID+=M,[j,b]}return[{[S]:Fo.disabled},b]}colorModeForRenderPass(){var u=this.context.gl;return this._showOverdrawInspector?new Vo([u.CONSTANT_COLOR,u.ONE],new i.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Vo.unblended:Vo.alphaBlended}depthModeForSublayer(u,y,b){return this.opaquePassEnabledForLayer()?(u=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon,new Hr(b||this.context.gl.LEQUAL,y,[u,u])):Hr.disabled}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,y){this.style=u,this.options=y,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(g.now()),this.imageManager.beginFrame();var b=this.style._order,S=this.style.sourceCaches,M={},j={},W={};for(const gt in S){var se=S[gt];se.used&&se.prepare(this.context),M[gt]=se.getVisibleCoordinates(),j[gt]=M[gt].slice().reverse(),W[gt]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let gt=0;gt<b.length;gt++){var Se=b[gt];if(this.style._layers[Se].is3D()){this.opaquePassCutoff=gt;break}}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const gt of b){var Pe,me=this.style._layers[gt];me.hasOffscreenPass()&&!me.isHidden(this.transform.zoom)&&(Pe=j[me.source],me.type==="custom"||Pe.length)&&this.renderLayer(this,S[me.source],me,Pe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:y.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=y.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;0<=this.currentLayer;this.currentLayer--){var Me=this.style._layers[b[this.currentLayer]],Xe=S[Me.source],et=M[Me.source];this._renderTileClippingMasks(Me,et),this.renderLayer(this,Xe,Me,et)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){var rt,tt=this.style._layers[b[this.currentLayer]],ht=S[tt.source];this.renderToTexture&&this.renderToTexture.renderLayer(tt)||(rt=(tt.type==="symbol"?W:j)[tt.source],this._renderTileClippingMasks(tt,M[tt.source]),this.renderLayer(this,ht,tt,rt))}this.options.showTileBoundaries&&(y=tp(this.style,this.transform.zoom))&&Jd(this,y,y.getVisibleCoordinates()),this.options.showPadding&&wy(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(this.style&&this.style.map&&this.style.map.terrain){var y=this.terrainFacilitator.matrix,b=this.transform.projMatrix;let S=this.terrainFacilitator.dirty;(S=(S=S||(u?!i.exactEquals(y,b):!i.equals(y,b)))||0<this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length)&&(i.copy(y,b),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,xy(this,this.style.map.terrain),Pm(this,this.style.map.terrain))}}renderLayer(u,y,b,S){if(!b.isHidden(this.transform.zoom)&&(b.type==="background"||b.type==="custom"||(S||[]).length))switch(this.id=b.id,b.type){case"symbol":ze(u,y,b,S,this.style.placement.variableOffsets);break;case"circle":At(u,y,b,S);break;case"heatmap":nn(u,y,b,S);break;case"line":xn(u,y,b,S);break;case"fill":Tr(u,y,b,S);break;case"fill-extrusion":Jo(u,y,b,S);break;case"hillshade":ca(u,y,b,S);break;case"raster":bi(u,y,b,S);break;case"background":yc(u,0,b,S);break;case"custom":B_(u,0,b)}}translatePosMatrix(u,y,b,S,M){var j;return b[0]||b[1]?((S=M?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0)&&(j=Math.sin(S),S=Math.cos(S),b=[b[0]*S-b[1]*j,b[0]*j+b[1]*S]),j=[M?b[0]:Ht(y,b[0],this.transform.zoom),M?b[1]:Ht(y,b[1],this.transform.zoom),0],S=new Float32Array(16),i.translate(S,u,j),S):u}saveTileTexture(u){var y=this._tileTextures[u.size[0]];y?y.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){return u=this._tileTextures[u],u&&0<u.length?u.pop():null}isPatternMissing(u){var y;return!(!u||u.from&&u.to&&(y=this.imageManager.getPattern(u.from.toString()),u=this.imageManager.getPattern(u.to.toString()),y)&&u)}useProgram(u,y){this.cache=this.cache||{};var b=u+(y?y.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[b]||(this.cache[b]=new Je(this.context,Ua[u],y,Bh[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[b]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){var u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){var u;this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,u=this.context.gl,this.debugOverlayTexture=new G(this.context,this.debugOverlayCanvas,u.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){var{drawingBufferWidth:u,drawingBufferHeight:y}=this.context.gl;return this.width!==u||this.height!==y}}class rp{constructor(u,y){this.points=u,this.planes=y}static fromInvProjectionMatrix(u,y,b){const S=Math.pow(2,b),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(j=>{var W=1/(j=i.transformMat4([],j,u))[3]/y*S;return i.mul$1(j,j,[W,W,1/j[3],W])});return b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(j=>{var W=i.sub([],M[j[0]],M[j[1]]),se=i.sub([],M[j[2]],M[j[1]]),W=i.normalize([],i.cross([],W,se)),se=-i.dot(W,M[j[1]]);return W.concat(se)}),new rp(M,b)}}class Nu{constructor(u,y){this.min=u,this.max=y,this.center=i.scale$1([],i.add([],this.min,this.max),.5)}quadrant(u){var y=[u%2==0,u<2],b=i.clone$2(this.min),S=i.clone$2(this.max);for(let M=0;M<y.length;M++)b[M]=(y[M]?this.min:this.center)[M],S[M]=(y[M]?this.center:this.max)[M];return S[2]=this.max[2],new Nu(b,S)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){var y=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let b=!0;for(let j=0;j<u.planes.length;j++){var S=u.planes[j];let W=0;for(let se=0;se<y.length;se++)0<=i.dot$1(S,y[se])&&W++;if(W===0)return 0;W!==y.length&&(b=!1)}if(b)return 2;for(let j=0;j<3;j++){let W=Number.MAX_VALUE,se=-Number.MAX_VALUE;for(let Se=0;Se<u.points.length;Se++){var M=u.points[Se][j]-this.min[j];W=Math.min(W,M),se=Math.max(se,M)}if(se<0||W>this.max[j]-this.min[j])return 0}return 1}}class op{constructor(u=0,y=0,b=0,S=0){if(isNaN(u)||u<0||isNaN(y)||y<0||isNaN(b)||b<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=y,this.left=b,this.right=S}interpolate(u,y,b){return y.top!=null&&u.top!=null&&(this.top=i.interpolate.number(u.top,y.top,b)),y.bottom!=null&&u.bottom!=null&&(this.bottom=i.interpolate.number(u.bottom,y.bottom,b)),y.left!=null&&u.left!=null&&(this.left=i.interpolate.number(u.left,y.left,b)),y.right!=null&&u.right!=null&&(this.right=i.interpolate.number(u.right,y.right,b)),this}getCenter(u,y){return u=i.clamp((this.left+u-this.right)/2,0,u),y=i.clamp((this.top+y-this.bottom)/2,0,y),new i.Point(u,y)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new op(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Rl=85.051129;class Ol{constructor(u,y,b,S,M){this.tileSize=512,this._renderWorldCopies=M===void 0||!!M,this._minZoom=u||0,this._maxZoom=y||22,this._minPitch=b??0,this._maxPitch=S??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new op,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){var u=new Ol(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){u=-i.wrap(u,-180,180)*Math.PI/180,this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){u=i.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI,this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){u=Math.min(Math.max(u,this.minZoom),this.maxZoom),this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,y,b){this._unmodified=!1,this._edgeInsets.interpolate(u,y,b),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){return u=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize)),Math.max(0,u)}getVisibleUnwrappedCoordinates(u){var y=[new i.UnwrappedTileID(0,u)];if(this._renderWorldCopies){var b=this.pointCoordinate(new i.Point(0,0)),S=this.pointCoordinate(new i.Point(this.width,0)),M=this.pointCoordinate(new i.Point(this.width,this.height)),j=this.pointCoordinate(new i.Point(0,this.height)),W=Math.floor(Math.min(b.x,S.x,M.x,j.x)),se=Math.floor(Math.max(b.x,S.x,M.x,j.x));for(let Se=W-1;Se<=se+1;Se++)Se!==0&&y.push(new i.UnwrappedTileID(Se,u))}return y}coveringTiles(u){let y=this.coveringZoomLevel(u);var b=y;if(u.minzoom!==void 0&&y<u.minzoom)return[];u.maxzoom!==void 0&&y>u.maxzoom&&(y=u.maxzoom);var S=this.pointCoordinate(this.getCameraPoint()),M=i.MercatorCoordinate.fromLngLat(this.center);const j=Math.pow(2,y);var W=[j*S.x,j*S.y,0],se=[j*M.x,j*M.y,0],Se=rp.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let Pe=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Pe=y);var me=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,Me=nr=>({aabb:new Nu([nr*j,0,0],[(nr+1)*j,j,0]),zoom:0,x:0,y:0,wrap:nr,fullyVisible:!1}),Xe=[],et=[],rt=y,tt=u.reparseOverscaled?b:y;if(this._renderWorldCopies)for(let nr=1;nr<=3;nr++)Xe.push(Me(-nr)),Xe.push(Me(nr));for(Xe.push(Me(0));0<Xe.length;){var ht=Xe.pop(),gt=ht.x,bt=ht.y;let nr=ht.fullyVisible;if(!nr){var $t=ht.aabb.intersects(Se);if($t===0)continue;nr=$t===2}var $t=u.terrain?W:se,Ut=ht.aabb.distanceX($t),Bt=ht.aabb.distanceY($t),Ut=Math.max(Math.abs(Ut),Math.abs(Bt)),Bt=me+(1<<rt-ht.zoom)-2;if(ht.zoom===rt||Bt<Ut&&ht.zoom>=Pe)Bt=rt-ht.zoom,Ut=W[0]-.5-(gt<<Bt),Bt=W[1]-.5-(bt<<Bt),et.push({tileID:new i.OverscaledTileID(ht.zoom===rt?tt:ht.zoom,ht.wrap,ht.zoom,gt,bt),distanceSq:i.sqrLen([se[0]-.5-gt,se[1]-.5-bt]),tileDistanceToCamera:Math.sqrt(Ut*Ut+Bt*Bt)});else for(let Yn=0;Yn<4;Yn++){var ln,en,yn=(gt<<1)+Yn%2,Sn=(bt<<1)+(Yn>>1),Fn=ht.zoom+1;let zn=ht.aabb.quadrant(Yn);u.terrain&&(en=new i.OverscaledTileID(Fn,ht.wrap,Fn,yn,Sn),ln=(ln=(en=u.terrain.getMinMaxElevation(en)).minElevation)!=null?ln:this.elevation,en=(en=en.maxElevation)!=null?en:this.elevation,zn=new Nu([zn.min[0],zn.min[1],ln],[zn.max[0],zn.max[1],en])),Xe.push({aabb:zn,zoom:Fn,x:yn,y:Sn,wrap:ht.wrap,fullyVisible:nr})}}return et.sort((nr,Yn)=>nr.distanceSq-Yn.distanceSq).map(nr=>nr.tileID)}resize(u,y){this.width=u,this.height=y,this.pixelsToGLUnits=[2/u,-2/y],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){var y=i.clamp(u.lat,-85.051129,Rl);return new i.Point(i.mercatorXfromLng(u.lng)*this.worldSize,i.mercatorYfromLat(y)*this.worldSize)}unproject(u){return new i.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(M){var y=this.elevation,b=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,S=this.pointLocation(this.centerPoint,M),M=M.getElevationForLngLatZoom(S,this.tileZoom);this.elevation-M&&(b=b+y-M,y=Math.cos(this._pitch)*this.cameraToCenterDistance/b/i.mercatorZfromAltitude(1,S.lat)/this.tileSize,b=this.scaleZoom(y),this._elevation=M,this._center=S,this.zoom=b)}setLocationAtPoint(M,b){var b=this.pointCoordinate(b),S=this.pointCoordinate(this.centerPoint),M=this.locationCoordinate(M),M=new i.MercatorCoordinate(M.x-(b.x-S.x),M.y-(b.y-S.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,y){return y?this.coordinatePoint(this.locationCoordinate(u),y.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,y){return this.coordinateLocation(this.pointCoordinate(u,y))}locationCoordinate(u){return i.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(S,b){if(b&&(b=b.pointCoordinate(S),b!=null))return b;var b=[S.x,S.y,0,1],S=[S.x,S.y,1,1],M=(i.transformMat4(b,b,this.pixelMatrixInverse),i.transformMat4(S,S,this.pixelMatrixInverse),b[3]),j=S[3],W=b[1]/M,se=S[1]/j,Se=b[2]/M,Pe=S[2]/j,Pe=Se==Pe?0:(0-Se)/(Pe-Se);return new i.MercatorCoordinate(i.interpolate.number(b[0]/M,S[0]/j,Pe)/this.worldSize,i.interpolate.number(W,se,Pe)/this.worldSize)}coordinatePoint(u,y=0,b=this.pixelMatrix){return u=[u.x*this.worldSize,u.y*this.worldSize,y,1],i.transformMat4(u,u,b),new i.Point(u[0]/u[3],u[1]/u[3])}getBounds(){var u=Math.max(0,this.height/2-this.getHorizon());return new Z().extend(this.pointLocation(new i.Point(0,u))).extend(this.pointLocation(new i.Point(this.width,u))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Z([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Rl])}calculatePosMatrix(u,y=!1){var b,S,M,j=u.key,W=y?this._alignedPosMatrixCache:this._posMatrixCache;return W[j]||(b=u.canonical,S=this.worldSize/this.zoomScale(b.z),u=b.x+Math.pow(2,b.z)*u.wrap,M=i.identity(new Float64Array(16)),i.translate(M,M,[u*S,b.y*S,0]),i.scale(M,M,[S/i.EXTENT,S/i.EXTENT,1]),i.multiply(M,y?this.alignedProjMatrix:this.projMatrix,M),W[j]=new Float32Array(M)),W[j]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(et,y){y=i.clamp(+y,this.minZoom,this.maxZoom),y={center:new i.LngLat(et.lng,et.lat),zoom:y};let b=this.lngRange;this._renderWorldCopies||b!==null||(b=[-179.9999999999,180-1e-10]);var S=this.tileSize*this.zoomScale(y.zoom);let M=0,j=S,W=0,se=S,Se=0,Pe=0;var{x:me,y:Me}=this.size,{x:Xe,y:et}=(this.latRange&&(Xe=this.latRange,M=i.mercatorYfromLat(Xe[1])*S,(j=i.mercatorYfromLat(Xe[0])*S)-M<Me)&&(Se=Me/(j-M)),b&&(W=i.wrap(i.mercatorXfromLng(b[0])*S,0,S),(se=i.wrap(i.mercatorXfromLng(b[1])*S,0,S))<W&&(se+=S),se-W<me)&&(Pe=me/(se-W)),this.project.call({worldSize:S},et));let rt,tt;var ht,gt=Math.max(Pe||0,Se||0);if(gt)ht=new i.Point(Pe?(se+W)/2:Xe,Se?(j+M)/2:et),y.center=this.unproject.call({worldSize:S},ht).wrap(),y.zoom+=this.scaleZoom(gt);else{if(this.latRange&&(et-(ht=Me/2)<M&&(tt=M+ht),et+ht>j)&&(tt=j-ht),b){gt=(W+se)/2;let bt=Xe;Me=me/2,(bt=this._renderWorldCopies?i.wrap(Xe,gt-S/2,gt+S/2):bt)-Me<W&&(rt=W+Me),bt+Me>se&&(rt=se-Me)}rt===void 0&&tt===void 0||(ht=new i.Point(rt??Xe,tt??et),y.center=this.unproject.call({worldSize:S},ht).wrap())}return y}_constrain(){var u,y,b;this.center&&this.width&&this.height&&!this._constraining&&(this._constraining=!0,u=this._unmodified,{center:y,zoom:b}=this.getConstrained(this.center,this.zoom),this.center=y,this.zoom=b,this._unmodified=u,this._constraining=!1)}_calcMatrices(){if(this.height){var S=this._fov/2,M=this.centerOffset,j=this.point.x,W=this.point.y;this.cameraToCenterDistance=.5/Math.tan(S)*this.height,this._pixelPerMeter=i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let se=i.identity(new Float64Array(16));i.scale(se,se,[this.width/2,-this.height/2,1]),i.translate(se,se,[1,-1,0]),this.labelPlaneMatrix=se,se=i.identity(new Float64Array(16)),i.scale(se,se,[1,-1,1]),i.translate(se,se,[-1,-1,0]),i.scale(se,se,[2/this.width,2/this.height,1]),this.glCoordMatrix=se;var S=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),y=Math.min(this.elevation,this.minElevationForCurrentTile),b=S-y*this._pixelPerMeter/Math.cos(this._pitch),y=y<0?b:S,b=Math.PI/2+this._pitch,S=this._fov*(.5+M.y/this.height),S=Math.sin(S)*y/Math.sin(i.clamp(Math.PI-b-S,.01,Math.PI-.01)),u=this.getHorizon(),u=2*Math.atan(u/this.cameraToCenterDistance)*(.5+M.y/(2*u)),b=Math.sin(u)*y/Math.sin(i.clamp(Math.PI-b-u,.01,Math.PI-.01)),u=Math.min(S,b),S=1.01*(Math.cos(Math.PI/2-this._pitch)*u+y),b=this.height/50,u=(se=new Float64Array(16),i.perspective(se,this._fov,this.width/this.height,b,S),se[8]=2*-M.x/this.width,se[9]=2*M.y/this.height,i.scale(se,se,[1,-1,1]),i.translate(se,se,[0,0,-this.cameraToCenterDistance]),i.rotateX(se,se,this._pitch),i.rotateZ(se,se,this.angle),i.translate(se,se,[-j,-W,0]),this.mercatorMatrix=i.scale([],se,[this.worldSize,this.worldSize,this.worldSize]),i.scale(se,se,[1,1,this._pixelPerMeter]),this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,se),i.translate(se,se,[0,0,-this.elevation]),this.projMatrix=se,this.invProjMatrix=i.invert([],se),this.pixelMatrix3D=i.multiply(new Float64Array(16),this.labelPlaneMatrix,se),this.width%2/2),y=this.height%2/2,b=Math.cos(this.angle),S=Math.sin(this.angle),M=j-Math.round(j)+b*u+S*y,j=W-Math.round(W)+b*y+S*u,W=new Float64Array(se);if(i.translate(W,W,[.5<M?M-1:M,.5<j?j-1:j,0]),this.alignedProjMatrix=W,!(se=i.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=se,this._posMatrixCache={},this._alignedPosMatrixCache={}}}maxPitchScaleFactor(){var u;return this.pixelMatrixInverse?(u=[(u=this.pointCoordinate(new i.Point(0,0))).x*this.worldSize,u.y*this.worldSize,0,1],i.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance):1}getCameraPoint(){var u=this._pitch,u=Math.tan(u)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,u))}getCameraQueryGeometry(u){var y=this.getCameraPoint();if(u.length===1)return[u[0],y];{let b=y.x,S=y.y,M=y.x,j=y.y;for(const W of u)b=Math.min(b,W.x),S=Math.min(S,W.y),M=Math.max(M,W.x),j=Math.max(j,W.y);return[new i.Point(b,S),new i.Point(M,S),new i.Point(M,j),new i.Point(b,j),new i.Point(b,S)]}}lngLatToCameraDepth(u,y){return u=this.locationCoordinate(u),u=[u.x*this.worldSize,u.y*this.worldSize,y,1],i.transformMat4(u,u,this.projMatrix),u[2]/u[3]}}function Sy(E,u){let y=!1,b=null,S,M;const j=()=>{b=null,y&&(E.apply(S,M),b=setTimeout(j,u),y=!1)};return(...W)=>(y=!0,S=this,M=W,b||j(),b)}class au{constructor(u){this._getCurrentHash=()=>{var y=window.location.hash.replace("#","");if(this._hashName){let b;return y.split("&").map(S=>S.split("=")).forEach(S=>{S[0]===this._hashName&&(b=S)}),(b&&b[1]||"").split("/")}return y.split("/")},this._onHashChange=()=>{var y,b=this._getCurrentHash();return 3<=b.length&&!b.some(S=>isNaN(S))&&(y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(b[3]||0):this._map.getBearing(),this._map.jumpTo({center:[+b[2],+b[1]],zoom:+b[0],bearing:y,pitch:+(b[4]||0)}),!0)},this._updateHashUnthrottled=()=>{var y=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,y)}catch{}},this._updateHash=Sy(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){var S=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,M=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),M=Math.pow(10,M),b=Math.round(S.lng*M)/M,S=Math.round(S.lat*M)/M,M=this._map.getBearing(),j=this._map.getPitch();let W="";if(W+=u?`/${b}/${S}/`+y:y+`/${S}/`+b,(M||j)&&(W+="/"+Math.round(10*M)/10),j&&(W+="/"+Math.round(j)),this._hashName){const se=this._hashName;let Se=!1;return u=window.location.hash.slice(1).split("&").map(Pe=>{var me=Pe.split("=")[0];return me===se?(Se=!0,me+"="+W):Pe}).filter(Pe=>Pe),Se||u.push(se+"="+W),"#"+u.join("&")}return"#"+W}}Or={linearity:.3,easing:i.bezier(0,0,.3,1)};const gs=i.extend({deceleration:2500,maxSpeed:1400},Or),ip=i.extend({deceleration:20,maxSpeed:1400},Or),U_=i.extend({deceleration:1e3,maxSpeed:360},Or),Ey=i.extend({deceleration:1e3,maxSpeed:90},Or);class Hh{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.now(),settings:u})}_drainInertiaBuffer(){for(var u=this._inertiaBuffer,y=g.now();0<u.length&&160<y-u[0].time;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var y,b={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0};for({settings:y}of this._inertiaBuffer)b.zoom+=y.zoomDelta||0,b.bearing+=y.bearingDelta||0,b.pitch+=y.pitchDelta||0,y.panDelta&&b.pan._add(y.panDelta),y.around&&(b.around=y.around),y.pinchAround&&(b.pinchAround=y.pinchAround);var S=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,M={};return b.pan.mag()&&(u=Pn(b.pan.mag(),S,i.extend({},gs,u||{})),M.offset=b.pan.mult(u.amount/b.pan.mag()),M.center=this._map.transform.center,Dl(M,u)),b.zoom&&(u=Pn(b.zoom,S,ip),M.zoom=this._map.transform.zoom+u.amount,Dl(M,u)),b.bearing&&(u=Pn(b.bearing,S,U_),M.bearing=this._map.transform.bearing+i.clamp(u.amount,-179,179),Dl(M,u)),b.pitch&&(u=Pn(b.pitch,S,Ey),M.pitch=this._map.transform.pitch+u.amount,Dl(M,u)),(M.zoom||M.bearing)&&(M.around=(S=b.pinchAround===void 0?b.around:b.pinchAround)?this._map.unproject(S):this._map.getCenter()),this.clear(),i.extend(M,{noMoveStart:!0})}}}function Dl(E,u){(!E.duration||E.duration<u.duration)&&(E.duration=u.duration,E.easing=u.easing)}function Pn(j,W,y){var{maxSpeed:b,linearity:S,deceleration:M}=y,j=i.clamp(j*S/(W/1e3),-b,b),W=Math.abs(j)/(M*S);return{easing:y.easing,duration:1e3*W,amount:j*(W/2)}}class Rs extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,b,S={}){var M=v.mousePos(y.getCanvas(),b),j=y.unproject(M);super(u,i.extend({point:M,lngLat:j,originalEvent:b},S)),this._defaultPrevented=!1,this.target=y}}class _c extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,b){var S=u==="touchend"?b.changedTouches:b.touches,S=v.touchPos(y.getCanvasContainer(),S),M=S.map(W=>y.unproject(W)),j=S.reduce((W,se,Se,Pe)=>W.add(se.div(Pe.length)),new i.Point(0,0));super(u,{points:S,point:j,lngLats:M,lngLat:y.unproject(j),originalEvent:b}),this._defaultPrevented=!1}}class su extends i.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,y,b){super(u,{originalEvent:b}),this._defaultPrevented=!1}}class Am{constructor(u,y){this._map=u,this._clickTolerance=y.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new su(u.type,this._map,u))}mousedown(u,y){return this._mousedownPos=y,this._firePreventable(new Rs(u.type,this._map,u))}mouseup(u){this._map.fire(new Rs(u.type,this._map,u))}click(u,y){this._mousedownPos&&this._mousedownPos.dist(y)>=this._clickTolerance||this._map.fire(new Rs(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Rs(u.type,this._map,u))}mouseover(u){this._map.fire(new Rs(u.type,this._map,u))}mouseout(u){this._map.fire(new Rs(u.type,this._map,u))}touchstart(u){return this._firePreventable(new _c(u.type,this._map,u))}touchmove(u){this._map.fire(new _c(u.type,this._map,u))}touchend(u){this._map.fire(new _c(u.type,this._map,u))}touchcancel(u){this._map.fire(new _c(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class In{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Rs(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Rs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Rs(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bc{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(i.Point.convert(u),this._map.terrain)}}class Ty{constructor(u,y){this._map=u,this._tr=new bc(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=y.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,y){this.isEnabled()&&u.shiftKey&&u.button===0&&(v.disableDrag(),this._startPos=this._lastPos=y,this._active=!0)}mousemoveWindow(u,y){var b,S,M;!this._active||this._lastPos.equals(y=y)||!this._box&&y.dist(this._startPos)<this._clickTolerance||(M=this._startPos,this._lastPos=y,this._box||(this._box=v.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u)),u=Math.min(M.x,y.x),b=Math.max(M.x,y.x),S=Math.min(M.y,y.y),M=Math.max(M.y,y.y),v.setTransform(this._box,`translate(${u}px,${S}px)`),this._box.style.width=b-u+"px",this._box.style.height=M-S+"px")}mouseupWindow(u,y){if(this._active&&u.button===0){const b=this._startPos,S=y;if(this.reset(),v.suppressClick(),b.x!==S.x||b.y!==S.y)return this._map.fire(new i.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:M=>M.fitScreenCoordinates(b,S,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(v.remove(this._box),this._box=null),v.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,y){return this._map.fire(new i.Event(u,{originalEvent:y}))}}function ed(E,u){if(E.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points `+u.length);var y={};for(let b=0;b<E.length;b++)y[E[b].identifier]=u[b];return y}function eh(E){var u=new i.Point(0,0);for(const y of E)u._add(y);return u.div(E.length)}class Mm{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,y,b){(this.centroid||b.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),b.length===this.numTouches&&(this.centroid=eh(y),this.touches=ed(b,y)))}touchmove(u,y,b){if(!this.aborted&&this.centroid){var S=ed(b,y);for(const W in this.touches){var M=this.touches[W],j=S[W];(!j||30<j.dist(M))&&(this.aborted=!0)}}}touchend(u,y,b){if((!this.centroid||500<u.timeStamp-this.startTime)&&(this.aborted=!0),b.length===0&&(u=!this.aborted&&this.centroid,this.reset(),u))return u}}class Rm{constructor(u){this.singleTap=new Mm(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,y,b){this.singleTap.touchstart(u,y,b)}touchmove(u,y,b){this.singleTap.touchmove(u,y,b)}touchend(u,y,b){if(y=this.singleTap.touchend(u,y,b),y){var b=u.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(b&&S||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Fu{constructor(u){this._tr=new bc(u),this._zoomIn=new Rm({numTouches:1,numTaps:2}),this._zoomOut=new Rm({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,y,b){this._zoomIn.touchstart(u,y,b),this._zoomOut.touchstart(u,y,b)}touchmove(u,y,b){this._zoomIn.touchmove(u,y,b),this._zoomOut.touchmove(u,y,b)}touchend(u,y,b){const S=this._zoomIn.touchend(u,y,b),M=this._zoomOut.touchend(u,y,b),j=this._tr;return S?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:j.zoom+1,around:j.unproject(S)},{originalEvent:u})}):M?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:W=>W.easeTo({duration:300,zoom:j.zoom-1,around:j.unproject(M)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){if(u=this._moveFunction(...u),u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(u,y){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=y.length?y[0]:y,this._activateOnStart)&&this._lastPoint&&(this._active=!0)}dragMove(u,y){if(this.isEnabled()){var b=this._lastPoint;if(b)if(u.preventDefault(),this._moveStateManager.isValidMoveEvent(u)){if(y=y.length?y[0]:y,this._moved||!(y.dist(b)<this._clickTolerance))return this._moved=!0,this._lastPoint=y,this._move(b,y)}else this.reset(u)}}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&v.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ap={0:1,2:2};function Om(E,u){return u=ap[u],E.buttons===void 0||(E.buttons&u)!==u}class sp{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){u=v.mouseButton(u),this._eventButton=u}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!Om(u,this._eventButton)}isValidEndEvent(u){return v.mouseButton(u)===this._eventButton}}class Dm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){u=u.targetTouches[0].identifier,this._firstTouch=u}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const lp=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=function(u){u.preventDefault()}},td=({enable:E,clickTolerance:u})=>{var y=new sp({checkCorrectEvent:b=>v.mouseButton(b)===0&&!b.ctrlKey});return new zo({clickTolerance:u,move:(b,S)=>({around:S,panDelta:S.sub(b)}),activateOnStart:!0,moveStateManager:y,enable:E,assignEvents:lp})},Os=({enable:E,clickTolerance:u,bearingDegreesPerPixelMoved:y=.8})=>{var b=new sp({checkCorrectEvent:S=>v.mouseButton(S)===0&&S.ctrlKey||v.mouseButton(S)===2});return new zo({clickTolerance:u,move:(S,M)=>({bearingDelta:(M.x-S.x)*y}),moveStateManager:b,enable:E,assignEvents:lp})},th=({enable:E,clickTolerance:u,pitchDegreesPerPixelMoved:y=-.5})=>{var b=new sp({checkCorrectEvent:S=>v.mouseButton(S)===0&&S.ctrlKey||v.mouseButton(S)===2});return new zo({clickTolerance:u,move:(S,M)=>({pitchDelta:(M.y-S.y)*y}),moveStateManager:b,enable:E,assignEvents:lp})};class Kn{constructor(u,y){this._clickTolerance=u.clickTolerance||1,this._map=y,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,y,b){return this._calculateTransform(u,y,b)}touchmove(u,y,b){if(this._active&&!(b.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,y,b)}touchend(u,y,b){this._calculateTransform(u,y,b),this._active&&b.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,y,b){0<b.length&&(this._active=!0);var S=ed(b,y),M=new i.Point(0,0),j=new i.Point(0,0);let W=0;for(const Pe in S){var se=S[Pe],Se=this._touches[Pe];Se&&(M._add(se),j._add(se.sub(Se)),W++,S[Pe]=se)}if(this._touches=S,!(W<this.minTouchs())&&j.mag()&&(b=j.div(W),this._sum._add(b),!(this._sum.mag()<this._clickTolerance)))return{around:M.div(W),panDelta:b}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ir{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,y,b){this._firstTwoTouches||b.length<2||(this._firstTwoTouches=[b[0].identifier,b[1].identifier],this._start([y[0],y[1]]))}touchmove(u,y,b){if(this._firstTwoTouches){u.preventDefault();var[M,S]=this._firstTwoTouches,M=lu(b,y,M),b=lu(b,y,S);if(M&&b)return y=this._aroundCenter?null:M.add(b).div(2),this._move([M,b],y,u)}}touchend(u,y,b){var S,M;this._firstTwoTouches&&([M,S]=this._firstTwoTouches,M=lu(b,y,M),b=lu(b,y,S),M&&b||(this._active&&v.suppressClick(),this.reset()))}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function lu(E,u,y){for(let b=0;b<E.length;b++)if(E[b].identifier===y)return u[b]}function Lm(E,u){return Math.log(E/u)/Math.LN2}class up extends ir{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,y){var b=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Lm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Lm(this._distance,b),pinchAround:y}}}function ns(E,u){return 180*E.angleWith(u)/Math.PI}class qo extends ir{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,y,b){var S=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ns(this._vector,S),pinchAround:y}}_isBelowThreshold(b){this._minDiameter=Math.min(this._minDiameter,b.mag());var y=25/(Math.PI*this._minDiameter)*360,b=ns(b,this._startVector);return Math.abs(b)<y}}function Ds(E){return Math.abs(E.y)>Math.abs(E.x)}class cp extends ir{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,y,b){super.touchstart(u,y,b),this._currentTouchCount=b.length}_start(u){Ds((this._lastPoints=u)[0].sub(u[1]))&&(this._valid=!1)}_move(u,y,b){if(!(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)){var S=u[0].sub(this._lastPoints[0]),M=u[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(S,M,b.timeStamp),this._valid)return this._lastPoints=u,this._active=!0,{pitchDelta:-.5*((S.y+M.y)/2)}}}gestureBeginsVertically(u,y,b){var S,M;return this._valid!==void 0?this._valid:(M=2<=u.mag(),S=2<=y.mag(),M||S?M&&S?(M=0<u.y==0<y.y,Ds(u)&&Ds(y)&&M):(this._firstMove===void 0&&(this._firstMove=b),b-this._firstMove<100&&void 0):void 0)}}const wc={panStep:100,bearingStep:15,pitchStep:10};class wi{constructor(u){this._tr=new bc(u),u=wc,this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){let y=0,b=0,S=0,M=0,j=0;switch(u.keyCode){case 61:case 107:case 171:case 187:y=1;break;case 189:case 109:case 173:y=-1;break;case 37:u.shiftKey?b=-1:(u.preventDefault(),M=-1);break;case 39:u.shiftKey?b=1:(u.preventDefault(),M=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),j=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),j=1);break;default:return}return this._rotationDisabled&&(b=0,S=0),{cameraAnimation:W=>{var se=this._tr;W.easeTo({duration:300,easeId:"keyboardHandler",easing:Ni,zoom:y?Math.round(se.zoom)+y*(u.shiftKey?2:1):se.zoom,bearing:se.bearing+b*this._bearingStep,pitch:se.pitch+S*this._pitchStep,offset:[-M*this._panStep,-j*this._panStep],center:se.center},{originalEvent:u})}}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ni(E){return E*(2-E)}const nh=4.000244140625;class xc{constructor(u,y){this._onTimeout=b=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(b)},this._map=u,this._tr=new bc(u),this._triggerRenderFrame=y,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(this.isEnabled()&&(!this._map.cooperativeGestures.isEnabled()||u[this._map.cooperativeGestures._bypassKey])){let S=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;var y=g.now(),b=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,S!==0&&S%nh==0?this._type="wheel":S!==0&&Math.abs(S)<4?this._type="trackpad":400<b?(this._type=null,this._lastValue=S,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(b*S)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,S+=this._lastValue)),u.shiftKey&&S&&(S/=4),this._type&&(this._lastWheelEvent=u,this._delta-=S,this._active||this._start(u)),u.preventDefault()}}_start(u){var y;this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),u=v.mousePos(this._map.getCanvas(),u),y=this._tr,u.y>y.transform.height/2-y.transform.getHorizon()?this._around=i.LngLat.convert(this._aroundCenter?y.center:y.unproject(u)):this._around=i.LngLat.convert(y.center),this._aroundPoint=y.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame()))}renderFrame(){if(this._frameId&&(this._frameId=null,this.isActive())){var u=this._tr.transform;if(this._delta!==0){var b=this._type==="wheel"&&Math.abs(this._delta)>nh?this._wheelZoomRate:this._defaultZoomRate;let Se=2/(1+Math.exp(-Math.abs(this._delta*b)));this._delta<0&&Se!==0&&(Se=1/Se),b=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale,this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(b*Se))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var y,b=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,S=this._startZoom,M=this._easing;let j=!1,W;return this._type==="wheel"&&S&&M?(y=M(M=Math.min((g.now()-this._lastWheelEventTime)/200,1)),W=i.interpolate.number(S,b,y),M<1?this._frameId||(this._frameId=!0):j=!0):(W=b,j=!0),this._active=!0,j&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!j,zoomDelta:W-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}}_smoothOutEasing(u){let y=i.defaultEasing;var b,S;return this._prevEase&&(S=this._prevEase,b=(g.now()-S.start)/S.duration,S=S.easing(.01+b)-S.easing(b),b=.27/Math.sqrt(S*S+1e-4)*.01,S=Math.sqrt(.0729-b*b),y=i.bezier(b,S,.25,1)),this._prevEase={start:g.now(),duration:u,easing:y},y}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zu{constructor(u,y){this._clickZoom=u,this._tapZoom=y}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Nm{constructor(u){this._tr=new bc(u),this.reset()}reset(){this._active=!1}dblclick(u,y){return u.preventDefault(),{cameraAnimation:b=>{b.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(y)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Iy{constructor(){this._tap=new Rm({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,y,b){var S,M,j;this._swipePoint||(this._tapTime?(S=y[0],M=u.timeStamp-this._tapTime<500,j=this._tapPoint.dist(S)<30,M&&j?0<b.length&&(this._swipePoint=S,this._swipeTouch=b[0].identifier):this.reset()):this._tap.touchstart(u,y,b))}touchmove(u,y,b){if(this._tapTime){if(this._swipePoint){var S,M;if(b[0].identifier===this._swipeTouch)return M=(S=y[0]).y-this._swipePoint.y,this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:M/128}}}else this._tap.touchmove(u,y,b)}touchend(u,y,b){this._tapTime?this._swipePoint&&b.length===0&&this.reset():(y=this._tap.touchend(u,y,b))&&(this._tapTime=u.timeStamp,this._tapPoint=y)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fm{constructor(u,y,b){this._el=u,this._mousePan=y,this._touchPan=b}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class rh{constructor(u,y,b){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=y,this._mousePitch=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class oh{constructor(u,y,b,S){this._el=u,this._touchZoom=y,this._touchRotate=b,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ih{constructor(u,y){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=y,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(!this._container){var u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=v.create("div","maplibregl-cooperative-gesture-screen",u);let b=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(b=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));var u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div"),y=(y.className="maplibregl-desktop-message",y.textContent=b,this._container.appendChild(y),document.createElement("div"));y.className="maplibregl-mobile-message",y.textContent=u,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}}_destoryUI(){this._container&&(v.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const nd=E=>E.zoom||E.drag||E.pitch||E.rotate;class dp extends i.Event{}function ah(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class hp{constructor(j,y){this.handleWindowEvent=W=>{this.handleEvent(W,W.type+"Window")},this.handleEvent=(W,se)=>{if(W.type==="blur")this.stop(!0);else{this._updatingCamera=!0;var Se,Pe,me,Me=W.type==="renderFrame"?void 0:W,Xe={needsRenderFrame:!1},et={},rt={},tt=W.touches,ht=tt?this._getMapTouches(tt):void 0,gt=ht?v.touchPos(this._map.getCanvas(),ht):v.mousePos(this._map.getCanvas(),W);for({handlerName:Se,handler:Pe,allowed:me}of this._handlers)if(Pe.isEnabled()){let $t;this._blockedByActive(rt,me,Se)?Pe.reset():Pe[se||W.type]&&($t=Pe[se||W.type](W,gt,ht),this.mergeHandlerResult(Xe,et,$t,Se,Me),$t)&&$t.needsRenderFrame&&this._triggerRenderFrame(),($t||Pe.isActive())&&(rt[Se]=Pe)}var bt={};for(const $t in this._previousActiveHandlers)rt[$t]||(bt[$t]=Me);this._previousActiveHandlers=rt,(Object.keys(bt).length||ah(Xe))&&(this._changes.push([Xe,et,bt]),this._triggerRenderFrame()),(Object.keys(rt).length||ah(Xe))&&this._map._stop(!0),this._updatingCamera=!1,tt=Xe.cameraAnimation,tt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],tt(this._map))}},this._map=j,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Hh(j),this._bearingSnap=y.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(y);var b,S,M,j=this._el;this._listeners=[[j,"touchstart",{passive:!0}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[window,"blur",void 0]];for([b,S,M]of this._listeners)v.addEventListener(b,S,b===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(var[u,y,b]of this._listeners)v.removeEventListener(u,y,u===document?this.handleWindowEvent:this.handleEvent,b)}_addDefaultHandlers(u){var y=this._map,M=y.getCanvasContainer(),j=(this._add("mapEvent",new Am(y,u)),y.boxZoom=new Ty(y,u)),j=(this._add("boxZoom",j),u.interactive&&u.boxZoom&&j.enable(),y.cooperativeGestures=new ih(y,u.cooperativeGestures)),j=(this._add("cooperativeGestures",j),u.cooperativeGestures&&j.enable(),new Fu(y)),b=new Nm(y),j=(y.doubleClickZoom=new zu(b,j),this._add("tapZoom",j),this._add("clickZoom",b),u.interactive&&u.doubleClickZoom&&y.doubleClickZoom.enable(),new Iy),b=(this._add("tapDragZoom",j),y.touchPitch=new cp(y)),b=(this._add("touchPitch",b),u.interactive&&u.touchPitch&&y.touchPitch.enable(u.touchPitch),Os(u)),S=th(u),b=(y.dragRotate=new rh(u,b,S),this._add("mouseRotate",b,["mousePitch"]),this._add("mousePitch",S,["mouseRotate"]),u.interactive&&u.dragRotate&&y.dragRotate.enable(),td(u)),S=new Kn(u,y),b=(y.dragPan=new Fm(M,b,S),this._add("mousePan",b),this._add("touchPan",S,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&y.dragPan.enable(u.dragPan),new qo),S=new up,M=(y.touchZoomRotate=new oh(M,S,b,j),this._add("touchRotate",b,["touchPan","touchZoom"]),this._add("touchZoom",S,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&y.touchZoomRotate.enable(u.touchZoomRotate),y.scrollZoom=new xc(y,()=>this._triggerRenderFrame())),j=(this._add("scrollZoom",M,["mousePan"]),u.interactive&&u.scrollZoom&&y.scrollZoom.enable(u.scrollZoom),y.keyboard=new wi(y));this._add("keyboard",j),u.interactive&&u.keyboard&&y.keyboard.enable(),this._add("blockableMapEvent",new In(y))}_add(u,y,b){this._handlers.push({handlerName:u,handler:y,allowed:b}),this._handlersById[u]=y}stop(u){if(!this._updatingCamera){for(var{handler:y}of this._handlers)y.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(var{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!nd(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,y,b){for(const S in u)if(S!==b&&(!y||y.indexOf(S)<0))return!0;return!1}_getMapTouches(u){var y=[];for(const S of u){var b=S.target;this._el.contains(b)&&y.push(S)}return y}mergeHandlerResult(u,y,b,S,M){b&&(i.extend(u,b),u={handlerName:S,originalEvent:b.originalEvent||M},b.zoomDelta!==void 0&&(y.zoom=u),b.panDelta!==void 0&&(y.drag=u),b.pitchDelta!==void 0&&(y.pitch=u),b.bearingDelta!==void 0)&&(y.rotate=u)}_applyChanges(){var u,y,b,S={},M={},j={};for([u,y,b]of this._changes)u.panDelta&&(S.panDelta=(S.panDelta||new i.Point(0,0))._add(u.panDelta)),u.zoomDelta&&(S.zoomDelta=(S.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(S.bearingDelta=(S.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(S.pitchDelta=(S.pitchDelta||0)+u.pitchDelta),u.around!==void 0&&(S.around=u.around),u.pinchAround!==void 0&&(S.pinchAround=u.pinchAround),u.noInertia&&(S.noInertia=u.noInertia),i.extend(M,y),i.extend(j,b);this._updateMapTransform(S,M,j),this._changes=[]}_updateMapTransform(u,y,b){const S=this._map,M=S._getTransformForUpdate();var j=S.terrain;if(!(ah(u)||j&&this._terrainMovement))return this._fireEvents(y,b,!0);let{panDelta:W,zoomDelta:se,bearingDelta:Se,pitchDelta:Pe,around:me,pinchAround:Me}=u;Me!==void 0&&(me=Me),S._stop(!0),me=me||S.transform.centerPoint;var Xe=M.pointLocation(W?me.sub(W):me);Se&&(M.bearing+=Se),Pe&&(M.pitch+=Pe),se&&(M.zoom+=se),j?this._terrainMovement||!y.drag&&!y.zoom?y.drag&&this._terrainMovement?M.center=M.pointLocation(M.centerPoint.sub(W)):M.setLocationAtPoint(Xe,me):(this._terrainMovement=!0,this._map._elevationFreeze=!0,M.setLocationAtPoint(Xe,me),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,M.recalculateZoom(S.terrain)})):M.setLocationAtPoint(Xe,me),S._applyUpdatedTransform(M),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(y,b,!0)}_fireEvents(u,y,b){var S=nd(this._eventsInProgress),M=nd(u),j={};for(const et in u){var W=u[et].originalEvent;this._eventsInProgress[et]||(j[et+"start"]=W),this._eventsInProgress[et]=u[et]}!S&&M&&this._fireEvent("movestart",M.originalEvent);for(const et in j)this._fireEvent(et,j[et]);M&&this._fireEvent("move",M.originalEvent);for(const et in u){var se=u[et].originalEvent;this._fireEvent(et,se)}var Se={};let Pe;for(const et in this._eventsInProgress){var{handlerName:me,originalEvent:Me}=this._eventsInProgress[et];this._handlersById[me].isActive()||(delete this._eventsInProgress[et],Pe=y[me]||Me,Se[et+"end"]=Pe)}for(const et in Se)this._fireEvent(et,Se[et]);var Xe=nd(this._eventsInProgress);b&&(S||M)&&!Xe&&(this._updatingCamera=!0,b=et=>et!==0&&-this._bearingSnap<et&&et<this._bearingSnap,!(S=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions))||!S.essential&&g.prefersReducedMotion?(this._map.fire(new i.Event("moveend",{originalEvent:Pe})),b(this._map.getBearing())&&this._map.resetNorth()):(b(S.bearing||this._map.getBearing())&&(S.bearing=0),S.freezeElevation=!0,this._map.easeTo(S,{originalEvent:Pe})),this._updatingCamera=!1)}_fireEvent(u,y){this._map.fire(new i.Event(u,y?{originalEvent:y}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new dp("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ky extends i.Evented{constructor(u,y){super(),this._renderFrameCallback=()=>{var b=Math.min((g.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=y.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,y){return this.jumpTo({center:u},y)}panBy(u,y,b){return u=i.Point.convert(u).mult(-1),this.panTo(this.transform.center,i.extend({offset:u},y),b)}panTo(u,y,b){return this.easeTo(i.extend({center:u},y),b)}getZoom(){return this.transform.zoom}setZoom(u,y){return this.jumpTo({zoom:u},y),this}zoomTo(u,y,b){return this.easeTo(i.extend({zoom:u},y),b)}zoomIn(u,y){return this.zoomTo(this.getZoom()+1,u,y),this}zoomOut(u,y){return this.zoomTo(this.getZoom()-1,u,y),this}getBearing(){return this.transform.bearing}setBearing(u,y){return this.jumpTo({bearing:u},y),this}getPadding(){return this.transform.padding}setPadding(u,y){return this.jumpTo({padding:u},y),this}rotateTo(u,y,b){return this.easeTo(i.extend({bearing:u},y),b)}resetNorth(u,y){return this.rotateTo(0,i.extend({duration:1e3},u),y),this}resetNorthPitch(u,y){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},u),y),this}snapToNorth(u,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,y):this}getPitch(){return this.transform.pitch}setPitch(u,y){return this.jumpTo({pitch:u},y),this}cameraForBounds(u,y){u=Z.convert(u);var b=y&&y.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),b,y)}_cameraForBoxAndBearing(Me,W,b,S){var j={top:0,bottom:0,right:0,left:0},M=(typeof(S=i.extend({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"&&(M=S.padding,S.padding={top:M,bottom:M,right:M,left:M}),S.padding=i.extend(j,S.padding),this.transform),j=M.padding,Me=new Z(Me,W),W=M.project(Me.getNorthWest()),me=M.project(Me.getNorthEast()),se=M.project(Me.getSouthEast()),Me=M.project(Me.getSouthWest()),Se=i.degreesToRadians(-b),Pe=W.rotate(Se),me=me.rotate(Se),Xe=se.rotate(Se),Me=Me.rotate(Se),Se=new i.Point(Math.max(Pe.x,me.x,Me.x,Xe.x),Math.max(Pe.y,me.y,Me.y,Xe.y)),Pe=new i.Point(Math.min(Pe.x,me.x,Me.x,Xe.x),Math.min(Pe.y,me.y,Me.y,Xe.y)),me=Se.sub(Pe),Me=(M.width-(j.left+j.right+S.padding.left+S.padding.right))/me.x,Xe=(M.height-(j.top+j.bottom+S.padding.top+S.padding.bottom))/me.y;if(!(Xe<0||Me<0))return Se=Math.min(M.scaleZoom(M.scale*Math.min(Me,Xe)),S.maxZoom),Pe=i.Point.convert(S.offset),j=(S.padding.left-S.padding.right)/2,me=(S.padding.top-S.padding.bottom)/2,Me=new i.Point(j,me).rotate(i.degreesToRadians(b)),Xe=Pe.add(Me).mult(M.scale/M.zoomScale(Se)),{center:M.unproject(W.add(se).div(2).sub(Xe)),zoom:Se,bearing:b};i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}fitBounds(u,y,b){return this._fitInternal(this.cameraForBounds(u,y),y,b)}fitScreenCoordinates(u,y,b,S,M){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(u)),this.transform.pointLocation(i.Point.convert(y)),b,S),S,M)}_fitInternal(u,y,b){return u?(delete(y=i.extend(u,y)).padding,y.linear?this.easeTo(y,b):this.flyTo(y,b)):this}jumpTo(u,y){this.stop();var b=this._getTransformForUpdate();let S=!1,M=!1,j=!1;return"zoom"in u&&b.zoom!==+u.zoom&&(S=!0,b.zoom=+u.zoom),u.center!==void 0&&(b.center=i.LngLat.convert(u.center)),"bearing"in u&&b.bearing!==+u.bearing&&(M=!0,b.bearing=+u.bearing),"pitch"in u&&b.pitch!==+u.pitch&&(j=!0,b.pitch=+u.pitch),u.padding==null||b.isPaddingEqual(u.padding)||(b.padding=u.padding),this._applyUpdatedTransform(b),this.fire(new i.Event("movestart",y)).fire(new i.Event("move",y)),S&&this.fire(new i.Event("zoomstart",y)).fire(new i.Event("zoom",y)).fire(new i.Event("zoomend",y)),M&&this.fire(new i.Event("rotatestart",y)).fire(new i.Event("rotate",y)).fire(new i.Event("rotateend",y)),j&&this.fire(new i.Event("pitchstart",y)).fire(new i.Event("pitch",y)).fire(new i.Event("pitchend",y)),this.fire(new i.Event("moveend",y))}calculateCameraOptionsFromTo(j,M,Pe,me=0){var j=i.MercatorCoordinate.fromLngLat(j,M),M=i.MercatorCoordinate.fromLngLat(Pe,me),Pe=M.x-j.x,me=M.y-j.y,j=M.z-j.z,W=Math.hypot(Pe,me,j);if(W===0)throw new Error("Can't calculate camera options with same From and To");var se=Math.hypot(Pe,me),Se=this.transform.scaleZoom(this.transform.cameraToCenterDistance/W/this.transform.tileSize),Pe=180*Math.atan2(Pe,-me)/Math.PI,me=180*Math.acos(se/W)/Math.PI,me=j<0?90-me:90+me;return{center:M.toLngLat(),zoom:Se,pitch:me,bearing:Pe}}easeTo(u,y){this._stop(!1,u.easeId),((u=i.extend({offset:[0,0],duration:500,easing:i.defaultEasing},u)).animate===!1||!u.essential&&g.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),S=this.getZoom(),M=this.getBearing(),j=this.getPitch(),W=this.getPadding(),se="bearing"in u?this._normalizeBearing(u.bearing,M):M,Se="pitch"in u?+u.pitch:j,Pe=("padding"in u?u:b).padding,me=i.Point.convert(u.offset);let Me=b.centerPoint.add(me);var Xe=b.pointLocation(Me);const{center:et,zoom:rt}=b.getConstrained(i.LngLat.convert(u.center||Xe),(Ut=u.zoom)!=null?Ut:S),tt=(this._normalizeCenter(et),b.project(Xe)),ht=b.project(et).sub(tt),gt=b.zoomScale(rt-S);let bt,$t;u.around&&(bt=i.LngLat.convert(u.around),$t=b.locationPoint(bt));var Ut={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||rt!==S,this._rotating=this._rotating||M!==se,this._pitching=this._pitching||Se!==j,this._padding=!b.isPaddingEqual(Pe),this._easeId=u.easeId,this._prepareEase(y,u.noMoveStart,Ut),this.terrain&&this._prepareElevation(et),this._ease(Bt=>{var ln,en;this._zooming&&(b.zoom=i.interpolate.number(S,rt,Bt)),this._rotating&&(b.bearing=i.interpolate.number(M,se,Bt)),this._pitching&&(b.pitch=i.interpolate.number(j,Se,Bt)),this._padding&&(b.interpolatePadding(W,Pe,Bt),Me=b.centerPoint.add(me)),this.terrain&&!u.freezeElevation&&this._updateElevation(Bt),bt?b.setLocationAtPoint(bt,$t):(ln=b.zoomScale(b.zoom-S),en=rt>S?Math.min(2,gt):Math.max(.5,gt),en=Math.pow(en,1-Bt),Bt=b.unproject(tt.add(ht.mult(Bt*en)).mult(ln)),b.setLocationAtPoint(b.renderWorldCopies?Bt.wrap():Bt,Me)),this._applyUpdatedTransform(b),this._fireMoveEvents(y)},Bt=>{this.terrain&&this._finalizeElevation(),this._afterEase(y,Bt)},u),this}_prepareEase(u,y,b={}){this._moving=!0,y||b.moving||this.fire(new i.Event("movestart",u)),this._zooming&&!b.zooming&&this.fire(new i.Event("zoomstart",u)),this._rotating&&!b.rotating&&this.fire(new i.Event("rotatestart",u)),this._pitching&&!b.pitching&&this.fire(new i.Event("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);var y,b,S=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);u<1&&S!==this._elevationTarget&&(b=(S-((y=this._elevationTarget-this._elevationStart)*u+this._elevationStart))/(1-u),this._elevationStart+=u*(y-b),this._elevationTarget=S),this.transform.elevation=i.interpolate.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){var y,b,S,M,j;this.transformCameraUpdate&&(u=u.clone(),{center:y,zoom:b,pitch:S,bearing:M,elevation:j}=this.transformCameraUpdate(u),y&&(u.center=y),b!==void 0&&(u.zoom=b),S!==void 0&&(u.pitch=S),M!==void 0&&(u.bearing=M),j!==void 0&&(u.elevation=j),this.transform.apply(u))}_fireMoveEvents(u){this.fire(new i.Event("move",u)),this._zooming&&this.fire(new i.Event("zoom",u)),this._rotating&&this.fire(new i.Event("rotate",u)),this._pitching&&this.fire(new i.Event("pitch",u))}_afterEase(u,y){var b,S;this._easeId&&y&&this._easeId===y||(delete this._easeId,this.fire(new i.Event("freezeElevation",{freeze:!1})),y=this._zooming,b=this._rotating,S=this._pitching,this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new i.Event("zoomend",u)),b&&this.fire(new i.Event("rotateend",u)),S&&this.fire(new i.Event("pitchend",u)),this.fire(new i.Event("moveend",u)))}flyTo(u,y){if(!u.essential&&g.prefersReducedMotion)return Xe=i.pick(u,["center","zoom","bearing","pitch","around"]),this.jumpTo(Xe,y);this.stop(),u=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.defaultEasing},u);const b=this._getTransformForUpdate(),S=this.getZoom(),M=this.getBearing(),j=this.getPitch(),W=this.getPadding(),se="bearing"in u?this._normalizeBearing(u.bearing,M):M,Se="pitch"in u?+u.pitch:j,Pe=("padding"in u?u:b).padding,me=i.Point.convert(u.offset);let Me=b.centerPoint.add(me);var Xe=b.pointLocation(Me);const{center:et,zoom:rt}=b.getConstrained(i.LngLat.convert(u.center||Xe),(tt=u.zoom)!=null?tt:S);this._normalizeCenter(et);var tt=b.zoomScale(rt-S);const ht=b.project(Xe),gt=b.project(et).sub(ht);let bt=u.curve;const $t=Math.max(b.width,b.height),Ut=$t/tt,Bt=gt.mag(),ln=("minZoom"in u&&(Xe=i.clamp(Math.min(u.minZoom,S,rt),b.minZoom,b.maxZoom),tt=$t/b.zoomScale(Xe-S),bt=Math.sqrt(tt/Bt*2)),bt*bt);function en(bn){return bn=(Ut*Ut-$t*$t+(bn?-1:1)*ln*ln*Bt*Bt)/(2*(bn?Ut:$t)*ln*Bt),Math.log(Math.sqrt(bn*bn+1)-bn)}function yn(bn){return(Math.exp(bn)-Math.exp(-bn))/2}function Sn(bn){return(Math.exp(bn)+Math.exp(-bn))/2}const Fn=en(!1);let nr=function(bn){return Sn(Fn)/Sn(Fn+bt*bn)},Yn=function(bn){return $t*((Sn(Fn)*(yn(bn=Fn+bt*bn)/Sn(bn))-yn(Fn))/ln)/Bt},zn=(en(!0)-Fn)/bt;if(Math.abs(Bt)<1e-6||!isFinite(zn)){if(Math.abs($t-Ut)<1e-6)return this.easeTo(u,y);const bn=Ut<$t?-1:1;zn=Math.abs(Math.log(Ut/$t))/bt,Yn=function(){return 0},nr=function(Wn){return Math.exp(bn*bt*Wn)}}return"duration"in u?u.duration=+u.duration:(Xe="screenSpeed"in u?+u.screenSpeed/bt:+u.speed,u.duration=1e3*zn/Xe),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=M!==se,this._pitching=Se!==j,this._padding=!b.isPaddingEqual(Pe),this._prepareEase(y,!1),this.terrain&&this._prepareElevation(et),this._ease(Nn=>{var Wn=Nn*zn,hr=1/nr(Wn),Nn=(b.zoom=Nn===1?rt:S+b.scaleZoom(hr),this._rotating&&(b.bearing=i.interpolate.number(M,se,Nn)),this._pitching&&(b.pitch=i.interpolate.number(j,Se,Nn)),this._padding&&(b.interpolatePadding(W,Pe,Nn),Me=b.centerPoint.add(me)),this.terrain&&!u.freezeElevation&&this._updateElevation(Nn),Nn===1?et:b.unproject(ht.add(gt.mult(Yn(Wn))).mult(hr)));b.setLocationAtPoint(b.renderWorldCopies?Nn.wrap():Nn,Me),this._applyUpdatedTransform(b),this._fireMoveEvents(y)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(y)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,y){var b;return this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd&&(b=this._onEaseEnd,delete this._onEaseEnd,b.call(this,y)),u||(b=this.handlers)&&b.stop(!1),this}_ease(u,y,b){b.animate===!1||b.duration===0?(u(1),y()):(this._easeStart=g.now(),this._easeOptions=b,this._onEaseFrame=u,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,y){u=i.wrap(u,-180,180);var b=Math.abs(u-y);return Math.abs(u-360-y)<b&&(u-=360),Math.abs(u+360-y)<b&&(u+=360),u}_normalizeCenter(u){var y=this.transform;y.renderWorldCopies&&!y.lngRange&&(y=u.lng-y.center.lng,u.lng+=180<y?-360:y<-180?360:0)}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(i.LngLat.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const fp={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class pp{constructor(u=fp){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=y=>{!y||y.sourceDataType!=="metadata"&&y.sourceDataType!=="visibility"&&y.dataType!=="style"&&y.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=v.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=v.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=v.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){v.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,y){y=this._map._getUIString("AttributionControl."+y),u.title=y,u.setAttribute("aria-label",y)}_updateAttributions(){if(this._map.style){let S=[];this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?S=S.concat(this.options.customAttribution.map(M=>typeof M!="string"?"":M)):typeof this.options.customAttribution=="string"&&S.push(this.options.customAttribution)),this._map.style.stylesheet&&(b=this._map.style.stylesheet,this.styleOwner=b.owner,this.styleId=b.id);var u=this._map.style.sourceCaches;for(const M in u){var y=u[M];(y.used||y.usedForTerrain)&&(y=y.getSource()).attribution&&S.indexOf(y.attribution)<0&&S.push(y.attribution)}(S=S.filter(M=>String(M).trim())).sort((M,j)=>M.length-j.length);var b=(S=S.filter((M,j)=>{for(let W=j+1;W<S.length;W++)if(0<=S[W].indexOf(M))return!1;return!0})).join(" | ");b!==this._attribHTML&&(this._attribHTML=b,S.length?(this._innerContainer.innerHTML=b,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}}class zm{constructor(u={}){this._updateCompact=()=>{var y=this._container.children;y.length&&(y=y[0],this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact"))},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=v.create("div","maplibregl-ctrl"),u=v.create("a","maplibregl-ctrl-logo"),u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){v.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class mp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){var y=++this._id;return this._queue.push({callback:u,id:y,cancelled:!1}),y}remove(u){var y=this._currentlyRunning;for(const b of y?this._queue.concat(y):this._queue)if(b.id===u)return void(b.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");var y=this._currentlyRunning=this._queue;this._queue=[];for(const b of y)if(!b.cancelled&&(b.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var uu=i.createLayout([{name:"a_pos3d",type:"Int16",components:3}]);class Bm extends i.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,y){this.sourceCache.update(u,y),this._renderableTilesKeys=[];var b={};for(const S of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:y}))b[S.key]=!0,this._renderableTilesKeys.push(S.key),this._tiles[S.key]||(S.posMatrix=new Float64Array(16),i.ortho(S.posMatrix,0,i.EXTENT,0,i.EXTENT,0,1),this._tiles[S.key]=new Yt(S,this.tileSize));for(const S in this._tiles)b[S]||delete this._tiles[S]}freeRtt(u){for(const b in this._tiles){var y=this._tiles[b];(!u||y.tileID.equals(u)||y.tileID.isChildOf(u)||u.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){var y={};for(const Se of this._renderableTilesKeys){var b,S,M,j,W,se=this._tiles[Se].tileID;se.canonical.equals(u.canonical)?((b=u.clone()).posMatrix=new Float64Array(16),i.ortho(b.posMatrix,0,i.EXTENT,0,i.EXTENT,0,1),y[Se]=b):se.canonical.isChildOf(u.canonical)?((b=u.clone()).posMatrix=new Float64Array(16),j=se.canonical.z-u.canonical.z,S=se.canonical.x-(se.canonical.x>>j<<j),M=se.canonical.y-(se.canonical.y>>j<<j),j=i.EXTENT>>j,i.ortho(b.posMatrix,0,j,0,j,0,1),i.translate(b.posMatrix,b.posMatrix,[-S*j,-M*j,0]),y[Se]=b):u.canonical.isChildOf(se.canonical)&&((S=u.clone()).posMatrix=new Float64Array(16),M=u.canonical.z-se.canonical.z,j=u.canonical.x-(u.canonical.x>>M<<M),se=u.canonical.y-(u.canonical.y>>M<<M),W=i.EXTENT>>M,i.ortho(S.posMatrix,0,i.EXTENT,0,i.EXTENT,0,1),i.translate(S.posMatrix,S.posMatrix,[j*W,se*W,0]),i.scale(S.posMatrix,S.posMatrix,[1/2**M,1/2**M,0]),y[Se]=S)}return y}getSourceTile(u,y){var b=this.sourceCache._source;let S=u.overscaledZ-this.deltaZoom;if((S=S>b.maxzoom?b.maxzoom:S)<b.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(S).key);let M=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!M||!M.dem)&&y)for(;S>=b.minzoom&&(!M||!M.dem);)M=this.sourceCache.getTileByID(u.scaledTo(S--).key);return M}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(y=>y.timeAdded>=u)}}class rd{constructor(u,y,b){this.painter=u,this.sourceCache=new Bm(y),this.options=b,this.exaggeration=typeof b.exaggeration=="number"?b.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,y,b,S=i.EXTENT){var M;return 0<=y&&y<S&&0<=b&&b<S&&(M=(M=(u=this.getTerrainData(u)).tile)==null?void 0:M.dem)?(b=[(y=i.transformMat4$1([],[y/S*i.EXTENT,b/S*i.EXTENT],u.u_terrain_matrix))[0]*M.dim,y[1]*M.dim],S=Math.floor(b[0]),u=Math.floor(b[1]),y=b[0]-S,b=b[1]-u,M.get(S,u)*(1-y)*(1-b)+M.get(S+1,u)*y*(1-b)+M.get(S,u+1)*(1-y)*b+M.get(S+1,u+1)*y*b):0}getElevationForLngLatZoom(b,S){var{tileID:b,mercatorX:S,mercatorY:M}=this._getOverscaledTileIDFromLngLatZoom(b,S);return this.getElevation(b,S%i.EXTENT,M%i.EXTENT,i.EXTENT)}getElevation(u,y,b,S=i.EXTENT){return this.getDEMElevation(u,y,b,S)*this.exaggeration}getTerrainData(u){this._emptyDemTexture||(b=this.painter.context,y=new i.RGBAImage({width:1,height:1},new Uint8Array(4)),this._emptyDepthTexture=new G(b,y,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new G(b,new i.RGBAImage({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.identity([]));var y=this.sourceCache.getSourceTile(u,!0),b=(y&&y.dem&&(!y.demTexture||y.needsTerrainPrepare)&&(b=this.painter.context,y.demTexture=this.painter.getTileTexture(y.dem.stride),y.demTexture?y.demTexture.update(y.dem.getPixels(),{premultiply:!1}):y.demTexture=new G(b,y.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),y.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),y.needsTerrainPrepare=!1),y&&y+y.tileID.key+u.key);if(b&&!this._demMatrixCache[b]){var S=this.sourceCache.sourceCache._source.maxzoom;let W=u.canonical.z-y.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=S?W=u.canonical.z-S:i.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));var S=u.canonical.x-(u.canonical.x>>W<<W),M=u.canonical.y-(u.canonical.y>>W<<W),j=i.fromScaling(new Float64Array(16),[1/(i.EXTENT<<W),1/(i.EXTENT<<W),0]);i.translate(j,j,[S*i.EXTENT,M*i.EXTENT,0]),this._demMatrixCache[u.key]={matrix:j,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:y&&y.dem&&y.dem.dim||1,u_terrain_matrix:b?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:y&&y.dem&&y.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(y&&y.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:y}}getFramebuffer(u){var y=this.painter,b=y.width/devicePixelRatio,S=y.height/devicePixelRatio;return!this._fbo||this._fbo.width===b&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new G(y.context,{width:b,height:S,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new G(y.context,{width:b,height:S,data:null},y.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(y.context.gl.NEAREST,y.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=y.context.createFramebuffer(b,S,!0,!1),this._fbo.depthAttachment.set(y.context.createRenderbuffer(y.context.gl.DEPTH_COMPONENT16,b,S))),this._fbo.colorAttachment.set((u==="coords"?this._fboCoordsTexture:this._fboDepthTexture).texture),this._fbo}getCoordsTexture(){var u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;var y=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,M=0;S<this._coordsTextureSize;S++)for(let j=0;j<this._coordsTextureSize;j++,M+=4)y[M+0]=255&j,y[M+1]=255&S,y[M+2]=j>>8<<4|S>>8,y[M+3]=0;var b=new i.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(y.buffer)),b=new G(u,b,u.gl.RGBA,{premultiply:!1});return b.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=b}pointCoordinate(j){this.painter.maybeDrawDepthAndCoords(!0);var y=new Uint8Array(4),b=this.painter.context,W=b.gl,S=Math.round(j.x*this.painter.pixelRatio/devicePixelRatio),j=Math.round(j.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio),S=(b.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),W.readPixels(S,M-j-1,1,1,W.RGBA,W.UNSIGNED_BYTE,y),b.bindFramebuffer.set(null),y[0]+(y[2]>>4<<8)),M=y[1]+((15&y[2])<<8),j=this.coordsIndex[255-y[3]],W=j&&this.sourceCache.getTileByID(j);return W?(b=this._coordsTextureSize,y=(1<<W.tileID.canonical.z)*b,new i.MercatorCoordinate((W.tileID.canonical.x*b+S)/y+W.tileID.wrap,(W.tileID.canonical.y*b+M)/y,this.getElevation(W.tileID,S,M,b))):null}depthAtPoint(M){var y=new Uint8Array(4),b=this.painter.context,S=b.gl,M=(b.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),S.readPixels(M.x,this.painter.height/devicePixelRatio-M.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,y),b.bindFramebuffer.set(null),(y[0]/16777216+y[1]/65536+y[2]/256+y[3])/256);return M}getTerrainMesh(){if(!this._mesh){var u=this.painter.context,y=new i.Pos3dArray,b=new i.TriangleIndexArray,S=this.meshSize,M=i.EXTENT/S,j=S*S;for(let me=0;me<=S;me++)for(let Me=0;Me<=S;Me++)y.emplaceBack(Me*M,me*M,0);for(let me=0;me<j;me+=S+1)for(let Me=0;Me<S;Me++)b.emplaceBack(Me+me,S+Me+me+1,S+Me+me+2),b.emplaceBack(Me+me,S+Me+me+2,Me+me+1);var W=y.length,se=W+2*(S+1);for(const me of[0,1])for(let Me=0;Me<=S;Me++)for(const Xe of[0,1])y.emplaceBack(Me*M,me*i.EXTENT,Xe);for(let me=0;me<2*S;me+=2)b.emplaceBack(se+me,se+me+1,se+me+3),b.emplaceBack(se+me,se+me+3,se+me+2),b.emplaceBack(W+me,W+me+3,W+me+1),b.emplaceBack(W+me,W+me+2,W+me+3);var Se=y.length,Pe=Se+2*(S+1);for(const me of[0,1])for(let Me=0;Me<=S;Me++)for(const Xe of[0,1])y.emplaceBack(me*i.EXTENT,Me*M,Xe);for(let me=0;me<2*S;me+=2)b.emplaceBack(Se+me,Se+me+1,Se+me+3),b.emplaceBack(Se+me,Se+me+3,Se+me+2),b.emplaceBack(Pe+me,Pe+me+3,Pe+me+1),b.emplaceBack(Pe+me,Pe+me+2,Pe+me+3);this._mesh={indexBuffer:u.createIndexBuffer(b),vertexBuffer:u.createVertexBuffer(y,uu.members),segments:i.SegmentVector.simpleSegment(0,0,y.length,b.length)}}return this._mesh}getMeshFrameDelta(u){return 2*Math.PI*i.earthRadius/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,y){return u=this._getOverscaledTileIDFromLngLatZoom(u,y).tileID,(y=this.getMinMaxElevation(u).minElevation)!=null?y:0}getMinMaxElevation(y){var y=this.getTerrainData(y).tile,b={minElevation:null,maxElevation:null};return y&&y.dem&&(b.minElevation=y.dem.min*this.exaggeration,b.maxElevation=y.dem.max*this.exaggeration),b}_getOverscaledTileIDFromLngLatZoom(S,y){var S=i.MercatorCoordinate.fromLngLat(S.wrap()),M=(1<<y)*i.EXTENT,b=S.x*M,S=S.y*M,M=Math.floor(b/i.EXTENT),j=Math.floor(S/i.EXTENT);return{tileID:new i.OverscaledTileID(y,0,y,M,j),mercatorX:b,mercatorY:S}}}class Ll{constructor(u,y,b){this._context=u,this._size=y,this._tileSize=b,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){var y=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),b=new G(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return b.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),y.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),y.colorAttachment.set(b.texture),{id:u,fbo:y,texture:b,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(y=>u.id!==y),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const y of this._recentlyUsed)if(!this._objects[y].inUse)return this._objects[y];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");var u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const Nl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class cu{constructor(u,y){this.painter=u,this.terrain=y,this.pool=new Ll(u.context,30,y.sourceCache.tileSize*y.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,y){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(W=>!u._layers[W].isHidden(y)),this._coordsDescendingInv={};for(const W in u.sourceCaches){this._coordsDescendingInv[W]={};for(const se of u.sourceCaches[W].getVisibleCoordinates()){var b=this.terrain.sourceCache.getTerrainCoords(se);for(const Se in b)this._coordsDescendingInv[W][Se]||(this._coordsDescendingInv[W][Se]=[]),this._coordsDescendingInv[W][Se].push(b[Se])}}this._coordsDescendingInvStr={};for(const W of u._order){var S=u._layers[W],M=S.source;if(Nl[S.type]&&!this._coordsDescendingInvStr[M]){this._coordsDescendingInvStr[M]={};for(const se in this._coordsDescendingInv[M])this._coordsDescendingInvStr[M][se]=this._coordsDescendingInv[M][se].map(Se=>Se.key).sort().join()}}for(const W of this._renderableTiles)for(const se in this._coordsDescendingInvStr){var j=this._coordsDescendingInvStr[se][W.tileID.key];j&&j!==W.rttCoords[se]&&(W.rtt=[])}}renderLayer(u){if(!u.isHidden(this.painter.transform.zoom)){var y=u.type,b=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Nl[y]&&(this._prevType&&Nl[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(u.id),!S))return!0;if(Nl[this._prevType]||Nl[y]&&S){this._prevType=y;var M=this._stacks.length-1,j=this._stacks[M]||[];for(const Pe of this._renderableTiles){if(this.pool.isFull()&&(np(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Pe),Pe.rtt[M]){var W=this.pool.getObjectForId(Pe.rtt[M].id);if(W.stamp===Pe.rtt[M].stamp){this.pool.useObject(W);continue}}var se=this.pool.getOrCreateFreeObject();this.pool.useObject(se),this.pool.stampObject(se),Pe.rtt[M]={id:se.id,stamp:se.stamp},b.context.bindFramebuffer.set(se.fbo.framebuffer),b.context.clear({color:i.Color.transparent,stencil:0}),b.currentStencilSource=void 0;for(let me=0;me<j.length;me++){const Me=b.style._layers[j[me]];var Se=Me.source?this._coordsDescendingInv[Me.source][Pe.tileID.key]:[Pe.tileID];b.context.viewport.set([0,0,se.fbo.width,se.fbo.height]),b._renderTileClippingMasks(Me,Se),b.renderLayer(b,b.style.sourceCaches[Me.source],Me,Se),Me.source&&(Pe.rttCoords[Me.source]=this._coordsDescendingInvStr[Me.source][Pe.tileID.key])}}return np(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Nl[y]}}return!1}}const Um={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},j_=c,$_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:fp,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.config.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]};Or=class extends ky{constructor(E){if(i.PerformanceUtils.mark(i.PerformanceMarkers.create),(E=i.extend({},$_,E)).minZoom!=null&&E.maxZoom!=null&&E.minZoom>E.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(E.minPitch!=null&&E.maxPitch!=null&&E.minPitch>E.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(E.minPitch!=null&&E.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(E.maxPitch!=null&&85<E.maxPitch)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ol(E.minZoom,E.maxZoom,E.minPitch,E.maxPitch,E.renderWorldCopies),{bearingSnap:E.bearingSnap}),this._contextLost=y=>{y.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.Event("webglcontextlost",{originalEvent:y}))},this._contextRestored=y=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:y}))},this._onMapScroll=y=>{if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=E.interactive,this._maxTileCacheSize=E.maxTileCacheSize,this._maxTileCacheZoomLevels=E.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=E.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=E.preserveDrawingBuffer,this._antialias=E.antialias,this._trackResize=E.trackResize,this._bearingSnap=E.bearingSnap,this._refreshExpiredTiles=E.refreshExpiredTiles,this._fadeDuration=E.fadeDuration,this._crossSourceCollisions=E.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=E.collectResourceTiming,this._renderTaskQueue=new mp,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},Um,E.locale),this._clickTolerance=E.clickTolerance,this._overridePixelRatio=E.pixelRatio,this._maxCanvasSize=E.maxCanvasSize,this.transformCameraUpdate=E.transformCameraUpdate,this._imageQueueHandle=l.addThrottleControl(()=>this.isMoving()),this._requestManager=new L(E.transformRequest),typeof E.container=="string"){if(this._container=document.getElementById(E.container),!this._container)throw new Error(`Container '${E.container}' not found.`)}else{if(!(E.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=E.container}if(E.maxBounds&&this.setMaxBounds(E.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let y=!1;const b=Sy(S=>{this._trackResize&&!this._removed&&this.resize(S)._update()},50);this._resizeObserver=new ResizeObserver(S=>{y?b(S):y=!0}),this._resizeObserver.observe(this._container)}this.handlers=new hp(this,E);var u=typeof E.hash=="string"&&E.hash||void 0;this._hash=E.hash&&new au(u).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:E.center,zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),E.bounds&&(this.resize(),this.fitBounds(E.bounds,i.extend({},E.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=E.localIdeographFontFamily,this._validateStyle=E.validateStyle,E.style&&this.setStyle(E.style,{localIdeographFontFamily:E.localIdeographFontFamily}),E.attributionControl&&this.addControl(new pp(typeof E.attributionControl=="boolean"?void 0:E.attributionControl)),E.maplibreLogo&&this.addControl(new zm,E.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",y=>{this._update(y.dataType==="style"),this.fire(new i.Event(y.dataType+"data",y))}),this.on("dataloading",y=>{this.fire(new i.Event(y.dataType+"dataloading",y))}),this.on("dataabort",y=>{this.fire(new i.Event("sourcedataabort",y))})}_getMapId(){return this._mapId}addControl(E,u){var y;return u===void 0&&(u=E.getDefaultPosition?E.getDefaultPosition():"top-right"),E&&E.onAdd?(y=E.onAdd(this),this._controls.push(E),E=this._controlPositions[u],u.indexOf("bottom")!==-1?E.insertBefore(y,E.firstChild):E.appendChild(y),this):this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")))}removeControl(E){var u;return E&&E.onRemove?(-1<(u=this._controls.indexOf(E))&&this._controls.splice(u,1),E.onRemove(this),this):this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")))}hasControl(E){return-1<this._controls.indexOf(E)}calculateCameraOptionsFromTo(E,u,y,b){return b==null&&this.terrain&&(b=this.terrain.getElevationForLngLatZoom(y,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,u,y,b)}resize(E){var y=this._containerDimensions(),u=y[0],y=y[1];const b=this._getClampedPixelRatio(u,y);if(this._resizeCanvas(u,y,b),this.painter.resize(u,y,b),this.painter.overLimit()){var S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const M=this._getClampedPixelRatio(u,y);this._resizeCanvas(u,y,M),this.painter.resize(u,y,M)}return this.transform.resize(u,y),(S=this._requestedCameraState)!=null&&S.resize(u,y),S=!this._moving,S&&(this.stop(),this.fire(new i.Event("movestart",E)).fire(new i.Event("move",E))),this.fire(new i.Event("resize",E)),S&&this.fire(new i.Event("moveend",E)),this}_getClampedPixelRatio(M,j){var{0:y,1:b}=this._maxCanvasSize,S=this.getPixelRatio(),M=M*S,j=j*S;return Math.min(y<M?y/M:1,b<j?b/j:1)*S}getPixelRatio(){var E;return(E=this._overridePixelRatio)!=null?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(Z.convert(E)),this._update()}setMinZoom(E){if(-2<=(E=E??-2)&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E??22)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(0<=E&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if(85<(E=E??60))throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(i.LngLat.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(i.Point.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)==null?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)==null?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)==null?void 0:E.isRotating())}_createDelegatedListener(E,u,y){if(E==="mouseenter"||E==="mouseover"){let b=!1;return{layer:u,listener:y,delegates:{mousemove:S=>{var M=this.getLayer(u)?this.queryRenderedFeatures(S.point,{layers:[u]}):[];M.length?b||(b=!0,y.call(this,new Rs(E,this,S.originalEvent,{features:M}))):b=!1},mouseout:()=>{b=!1}}}}if(E!=="mouseleave"&&E!=="mouseout")return{layer:u,listener:y,delegates:{[E]:b=>{var S=this.getLayer(u)?this.queryRenderedFeatures(b.point,{layers:[u]}):[];S.length&&(b.features=S,y.call(this,b),delete b.features)}}};{let b=!1;return{layer:u,listener:y,delegates:{mousemove:S=>{(this.getLayer(u)?this.queryRenderedFeatures(S.point,{layers:[u]}):[]).length?b=!0:b&&(b=!1,y.call(this,new Rs(E,this,S.originalEvent)))},mouseout:S=>{b&&(b=!1,y.call(this,new Rs(E,this,S.originalEvent)))}}}}}on(E,u,y){if(y===void 0)return super.on(E,u);var b=this._createDelegatedListener(E,u,y);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(b);for(const S in b.delegates)this.on(S,b.delegates[S]);return this}once(E,u,y){if(y===void 0)return super.once(E,u);var b=this._createDelegatedListener(E,u,y);for(const S in b.delegates)this.once(S,b.delegates[S]);return this}off(E,u,y){return y===void 0?super.off(E,u):(this._delegatedListeners&&this._delegatedListeners[E]&&(b=>{var S=b[E];for(let j=0;j<S.length;j++){var M=S[j];if(M.layer===u&&M.listener===y){for(const W in M.delegates)this.off(W,M.delegates[W]);return S.splice(j,1),this}}})(this._delegatedListeners),this)}queryRenderedFeatures(E,u){if(!this.style)return[];let y;var b=E instanceof i.Point||Array.isArray(E),S=b?E:[[0,0],[this.transform.width,this.transform.height]];return u=u||(b?{}:E)||{},y=S instanceof i.Point||typeof S[0]=="number"?[i.Point.convert(S)]:(b=i.Point.convert(S[0]),E=i.Point.convert(S[1]),[b,new i.Point(E.x,b.y),E,new i.Point(b.x,E.y),b]),this.style.queryRenderedFeatures(y,u,this.transform)}querySourceFeatures(E,u){return this.style.querySourceFeatures(E,u)}setStyle(E,u){return(u=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(E,u))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){var u=this._locale[E];if(u==null)throw new Error(`Missing UI string '${E}'`);return u}_updateStyle(E,u){var y;if(!u.transformStyle||!this.style||this.style._loaded)return y=this.style&&u.transformStyle?this.style.serialize():void 0,this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new nl(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,u,y):this.style.loadJSON(E,u,y)):delete this.style,this;this.style.once("style.load",()=>this._updateStyle(E,u))}_lazyInitEmptyStyle(){this.style||(this.style=new nl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,u){var y;typeof E=="string"?(y=this._requestManager.transformRequest(E,"Style"),i.getJSON(y,new AbortController).then(b=>{this._updateDiff(b.data,u)}).catch(b=>{b&&this.fire(new i.ErrorEvent(b))})):typeof E=="object"&&this._updateDiff(E,u)}_updateDiff(E,u){try{this.style.setState(E,u)&&this._update(!0)}catch(y){i.warnOnce(`Unable to perform style diff: ${y.message||y.error||y}.  Rebuilding the style from scratch.`),this._updateStyle(E,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")}addSource(E,u){return this._lazyInitEmptyStyle(),this.style.addSource(E,u),this._update(!0)}isSourceLoaded(E){var u=this.style&&this.style.sourceCaches[E];if(u!==void 0)return u.loaded();this.fire(new i.ErrorEvent(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){var u=this.style.sourceCaches[E.source];if(!u)throw new Error("cannot load terrain, because there exists no source with ID: "+E.source);this.terrain===null&&u.reload();for(const b in this.style._layers){var y=this.style._layers[b];y.type==="hillshade"&&y.source===E.source&&i.warnOnce("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new rd(this.painter,u,E),this.painter.renderToTexture=new cu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=b=>{b.dataType==="style"?this.terrain.sourceCache.freeRtt():b.dataType==="source"&&b.tile&&(b.sourceId!==E.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(b.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new i.Event("terrain",{terrain:E})),this}getTerrain(){var E;return(E=(E=this.terrain)==null?void 0:E.options)!=null?E:null}areTilesLoaded(){var E=this.style&&this.style.sourceCaches;for(const b in E){var u=E[b]._tiles;for(const S in u){var y=u[S];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,u,W={}){var b,S,M,j,{pixelRatio:W=1,sdf:se=!1,stretchX:Se,stretchY:Pe,content:me,contentMatch:Me}=W;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||i.isImageBitmap(u)))return u.width===void 0||u.height===void 0?this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):({width:b,height:S,data:M}=u,j=u,this.style.addImage(E,{data:new i.RGBAImage({width:b,height:S},new Uint8Array(M)),pixelRatio:W,stretchX:Se,stretchY:Pe,content:me,contentMatch:Me,sdf:se,version:0,userImage:j}),j.onAdd&&j.onAdd(this,E),this);({width:b,height:S,data:M}=g.getImageData(u)),this.style.addImage(E,{data:new i.RGBAImage({width:b,height:S},M),pixelRatio:W,stretchX:Se,stretchY:Pe,content:me,contentMatch:Me,sdf:se,version:0})}updateImage(E,u){var y,b,S,M=this.style.getImage(E);return M?({width:S,height:y,data:b}=u instanceof HTMLImageElement||i.isImageBitmap(u)?g.getImageData(u):u,S===void 0||y===void 0?this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):S!==M.data.width||y!==M.data.height?this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(S=!(u instanceof HTMLImageElement||i.isImageBitmap(u)),M.data.replace(b,S),this.style.updateImage(E,M),this)):this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return l.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,u){return this._lazyInitEmptyStyle(),this.style.addLayer(E,u),this._update(!0)}moveLayer(E,u){return this.style.moveLayer(E,u),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,u,y){return this.style.setLayerZoomRange(E,u,y),this._update(!0)}setFilter(E,u,y={}){return this.style.setFilter(E,u,y),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,u,y,b={}){return this.style.setPaintProperty(E,u,y,b),this._update(!0)}getPaintProperty(E,u){return this.style.getPaintProperty(E,u)}setLayoutProperty(E,u,y,b={}){return this.style.setLayoutProperty(E,u,y,b),this._update(!0)}getLayoutProperty(E,u){return this.style.getLayoutProperty(E,u)}setGlyphs(E,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,u,y={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,u,y,b=>{b||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,u,y=>{y||this._update(!0)}),this}setLight(E,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(E,u){return this.style.setFeatureState(E,u),this._update()}removeFeatureState(E,u){return this.style.removeFeatureState(E,u),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,u=0;return this._container&&(E=this._container.clientWidth||400,u=this._container.clientHeight||300),[E,u]}_setupContainer(){var E=this._container,u=(E.classList.add("maplibregl-map"),this._canvasContainer=v.create("div","maplibregl-canvas-container",E)),u=(this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=v.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region"),this._containerDimensions()),y=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],y);const b=this._controlContainer=v.create("div","maplibregl-control-container",E),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(M=>{S[M]=v.create("div",`maplibregl-ctrl-${M} `,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,u,y){this._canvas.width=Math.floor(y*E),this._canvas.height=Math.floor(y*u),this._canvas.style.width=E+"px",this._canvas.style.height=u+"px"}_setupPainter(){const E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",S=>{u={requestedAttributes:E},S&&(u.statusMessage=S.statusMessage,u.type=S.type)},{once:!0});var y,b=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!b)throw y="Failed to initialize WebGL",u?(u.message=y,new Error(JSON.stringify(u))):new Error(y);this.painter=new Cy(b,this.transform),w.testSupport(b)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded&&(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint()),this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){var u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),!this._removed){let b=!1;this.style&&this._styleDirty&&(this._styleDirty=!1,E=this.transform.zoom,y=g.now(),this.style.zoomHistory.update(E,y),(y=(E=new i.EvaluationParameters(E,{now:y,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()})).crossFadingFactor())===1&&y===this._crossFadingFactor||(b=!0,this._crossFadingFactor=y),this.style.update(E)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.PerformanceUtils.mark(i.PerformanceMarkers.load),this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||b)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();var y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,i.PerformanceUtils.mark(i.PerformanceMarkers.fullLoad)),this}}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),l.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)!=null&&E.disconnect();var E=this.painter.context.gl.getExtension("WEBGL_lose_context");E&&E.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),v.remove(this._canvasContainer),v.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),i.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new i.Event("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,g.frameAsync(this._frameRequest).then(E=>{i.PerformanceUtils.frame(E),this._frameRequest=null,this._render(E)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&((this._showCollisionBoxes=E)?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return j_}getCameraTargetElevation(){return this.transform.elevation}};const Cc=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},Vh=({enable:E,clickTolerance:u,bearingDegreesPerPixelMoved:y=.8})=>{var b=new Dm;return new zo({clickTolerance:u,move:(S,M)=>({bearingDelta:(M.x-S.x)*y}),moveStateManager:b,enable:E,assignEvents:Cc})},sh=({enable:E,clickTolerance:u,pitchDegreesPerPixelMoved:y=-.5})=>{var b=new Dm;return new zo({clickTolerance:u,move:(S,M)=>({pitchDelta:(M.y-S.y)*y}),moveStateManager:b,enable:E,assignEvents:Cc})},gp={showCompass:!0,showZoom:!0,visualizePitch:!1};class jm{constructor(u,y,b=!1){this.mousedown=j=>{this.startMouse(i.extend({},j,{ctrlKey:!0,preventDefault:()=>j.preventDefault()}),v.mousePos(this.element,j)),v.addEventListener(window,"mousemove",this.mousemove),v.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=j=>{this.moveMouse(j,v.mousePos(this.element,j))},this.mouseup=j=>{this.mouseRotate.dragEnd(j),this.mousePitch&&this.mousePitch.dragEnd(j),this.offTemp()},this.touchstart=j=>{j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=v.touchPos(this.element,j.targetTouches)[0],this.startTouch(j,this._startPos),v.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.addEventListener(window,"touchend",this.touchend))},this.touchmove=j=>{j.targetTouches.length!==1?this.reset():(this._lastPos=v.touchPos(this.element,j.targetTouches)[0],this.moveTouch(j,this._lastPos))},this.touchend=j=>{j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;var S=u.dragRotate._mouseRotate.getClickTolerance(),M=u.dragRotate._mousePitch.getClickTolerance();this.element=y,this.mouseRotate=Os({clickTolerance:S,enable:!0}),this.touchRotate=Vh({clickTolerance:S,enable:!0}),this.map=u,b&&(this.mousePitch=th({clickTolerance:M,enable:!0}),this.touchPitch=sh({clickTolerance:M,enable:!0})),v.addEventListener(y,"mousedown",this.mousedown),v.addEventListener(y,"touchstart",this.touchstart,{passive:!1}),v.addEventListener(y,"touchcancel",this.reset)}startMouse(u,y){this.mouseRotate.dragStart(u,y),this.mousePitch&&this.mousePitch.dragStart(u,y),v.disableDrag()}startTouch(u,y){this.touchRotate.dragStart(u,y),this.touchPitch&&this.touchPitch.dragStart(u,y),v.disableDrag()}moveMouse(u,y){var b=this.map,S=(this.mouseRotate.dragMove(u,y)||{}).bearingDelta;S&&b.setBearing(b.getBearing()+S),this.mousePitch&&(S=(this.mousePitch.dragMove(u,y)||{}).pitchDelta,S)&&b.setPitch(b.getPitch()+S)}moveTouch(u,y){var b=this.map,S=(this.touchRotate.dragMove(u,y)||{}).bearingDelta;S&&b.setBearing(b.getBearing()+S),this.touchPitch&&(S=(this.touchPitch.dragMove(u,y)||{}).pitchDelta,S)&&b.setPitch(b.getPitch()+S)}off(){var u=this.element;v.removeEventListener(u,"mousedown",this.mousedown),v.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend),v.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){v.enableDrag(),v.removeEventListener(window,"mousemove",this.mousemove),v.removeEventListener(window,"mouseup",this.mouseup),v.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),v.removeEventListener(window,"touchend",this.touchend)}}let du;function Sc(){return i.__awaiter(this,arguments,void 0,function*(E=!1){if(du===void 0||E){if(window.navigator.permissions===void 0)return du=!!window.navigator.geolocation;try{var u=yield window.navigator.permissions.query({name:"geolocation"});du=u.state!=="denied"}catch{du=!!window.navigator.geolocation}}return du})}function oi(E,u,y){var b,S,M,j=new i.LngLat(E.lng,E.lat);for(E=new i.LngLat(E.lng,E.lat),u&&(b=new i.LngLat(E.lng-360,E.lat),S=new i.LngLat(E.lng+360,E.lat),M=y.locationPoint(E).distSqr(u),y.locationPoint(b).distSqr(u)<M?E=b:y.locationPoint(S).distSqr(u)<M&&(E=S));180<Math.abs(E.lng-y.center.lng);){var W=y.locationPoint(E);if(0<=W.x&&0<=W.y&&W.x<=y.width&&W.y<=y.height)break;E.lng>y.center.lng?E.lng-=360:E.lng+=360}return E.lng!==j.lng&&y.locationPoint(E).y>y.height/2-y.getHorizon()?E:j}const Go={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bu(E,u,y){var b=E.classList;for(const S in Go)b.remove(`maplibregl-${y}-anchor-`+S);b.add(`maplibregl-${y}-anchor-`+u)}class Ma extends i.Evented{constructor(u){if(super(),this._onKeyPress=et=>{var Xe=et.code,et=et.charCode||et.keyCode;Xe!=="Space"&&Xe!=="Enter"&&et!==32&&et!==13||this.togglePopup()},this._onMapClick=Xe=>{var Xe=Xe.originalEvent.target,et=this._element;this._popup&&(Xe===et||et.contains(Xe))&&this.togglePopup()},this._update=Me=>{if(this._map){var Xe=this._map.loaded()&&!this._map.isMoving();(Me==null?void 0:Me.type)!=="terrain"&&((Me==null?void 0:Me.type)!=="render"||Xe)||this._map.once("render",this._update),this._map.transform.renderWorldCopies?this._lngLat=oi(this._lngLat,this._flatPos,this._map.transform):this._lngLat=(Xe=this._lngLat)==null?void 0:Xe.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let et="",rt=(this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?et=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(et=`rotateZ(${this._rotation-this._map.getBearing()}deg)`),"");this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?rt="rotateX(0deg)":this._pitchAlignment==="map"&&(rt=`rotateX(${this._map.getPitch()}deg)`),Me&&Me.type!=="moveend"||(this._pos=this._pos.round()),v.setTransform(this._element,`${Go[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${rt} `+et),g.frameAsync(new AbortController).then(()=>{this._updateOpacity(Me&&Me.type==="moveend")}).catch(()=>{})}},this._onMove=Me=>{var Xe;this._isDragging||(Xe=this._clickTolerance||this._map._clickTolerance,this._isDragging=Me.point.dist(this._pointerdownPos)>=Xe),this._isDragging&&(this._pos=Me.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},this._addDragHandler=Me=>{this._element.contains(Me.originalEvent.target)&&(Me.preventDefault(),this._positionDelta=Me.point.sub(this._pos).add(this._offset),this._pointerdownPos=Me.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=i.Point.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=v.create("div"),this._element.setAttribute("aria-label","Map marker");var y=v.createNS("http://www.w3.org/2000/svg","svg"),b=(y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height","41px"),y.setAttributeNS(null,"width","27px"),y.setAttributeNS(null,"viewBox","0 0 27 41"),v.createNS("http://www.w3.org/2000/svg","g")),b=(b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd"),v.createNS("http://www.w3.org/2000/svg","g")),S=(b.setAttributeNS(null,"fill-rule","nonzero"),v.createNS("http://www.w3.org/2000/svg","g")),j=(S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000"),[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}]);for(const Me of j){var M=v.createNS("http://www.w3.org/2000/svg","ellipse");M.setAttributeNS(null,"opacity","0.04"),M.setAttributeNS(null,"cx","10.5"),M.setAttributeNS(null,"cy","5.80029008"),M.setAttributeNS(null,"rx",Me.rx),M.setAttributeNS(null,"ry",Me.ry),S.appendChild(M)}var j=v.createNS("http://www.w3.org/2000/svg","g"),W=(j.setAttributeNS(null,"fill",this._color),v.createNS("http://www.w3.org/2000/svg","path")),W=(W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(W),v.createNS("http://www.w3.org/2000/svg","g")),se=(W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000"),v.createNS("http://www.w3.org/2000/svg","path")),se=(se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(se),v.createNS("http://www.w3.org/2000/svg","g")),Se=(se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF"),v.createNS("http://www.w3.org/2000/svg","g")),Pe=(Se.setAttributeNS(null,"transform","translate(8.0, 8.0)"),v.createNS("http://www.w3.org/2000/svg","circle")),me=(Pe.setAttributeNS(null,"fill","#000000"),Pe.setAttributeNS(null,"opacity","0.25"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962"),v.createNS("http://www.w3.org/2000/svg","circle"));me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),Se.appendChild(Pe),Se.appendChild(me),b.appendChild(S),b.appendChild(j),b.appendChild(W),b.appendChild(se),b.appendChild(Se),y.appendChild(b),y.setAttributeNS(null,"height",41*this._scale+"px"),y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(y),this._offset=i.Point.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",Me=>{Me.preventDefault()}),this._element.addEventListener("mousedown",Me=>{Me.preventDefault()}),Bu(this._element,this._anchor,"marker"),u&&u.className)for(const Me of u.className.split(" "))this._element.classList.add(Me);this._popup=null}addTo(u){return this.remove(),(this._map=u).getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),v.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=i.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){var y;return this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u&&("offset"in u.options||(y=Math.abs(13.5)/Math.SQRT2,u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(24.6+y)],"bottom-right":[-y,-1*(24.6+y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset),this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)),this}getPopup(){return this._popup}togglePopup(){var u=this._popup;return this._element.style.opacity!==this._opacityWhenCovered&&u&&(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map))),this}_updateOpacity(u=!1){if((b=this._map)!=null&&b.terrain){if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}var y,b=this._map,u=b.terrain.depthAtPoint(this._pos),S=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);b.transform.lngLatToCameraDepth(this._lngLat,S)-u<.006?this._element.style.opacity=this._opacity:(u=-this._offset.y/b.transform._pixelPerMeter,u=Math.sin(b.getPitch()*Math.PI/180)*u,y=b.terrain.depthAtPoint(new i.Point(this._pos.x,this._pos.y-this._offset.y)),b=.006<b.transform.lngLatToCameraDepth(this._lngLat,S+u)-y,(S=this._popup)!=null&&S.isOpen()&&b&&this._popup.remove(),this._element.style.opacity=b?this._opacityWhenCovered:this._opacity)}else this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity)}getOffset(){return this._offset}setOffset(u){return this._offset=i.Point.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,y){return u===void 0&&y===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),y!==void 0&&(this._opacityWhenCovered=y),this._map&&this._updateOpacity(!0),this}}const Ls={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Uu=0,Ec=!1;class Ns extends i.Evented{constructor(u){super(),this._onSuccess=y=>{if(this._map){if(this._isOutOfMapMaxBounds(y))this._setErrorState(),this.fire(new i.Event("outofmaxbounds",y)),this._updateMarker();else{if(this.options.trackUserLocation)switch(this._lastKnownPosition=y,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error("Unexpected watchState "+this._watchState)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(y),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(y),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.Event("geolocate",y))}this._finish()}},this._updateCamera=b=>{var M=new i.LngLat(b.coords.longitude,b.coords.latitude),b=b.coords.accuracy,S=this._map.getBearing(),S=i.extend({bearing:S},this.options.fitBoundsOptions),M=Z.fromLngLat(M,b);this._map.fitBounds(M,S,{geolocateSource:!0})},this._updateMarker=y=>{var b;y?(b=new i.LngLat(y.coords.longitude,y.coords.latitude),this._accuracyCircleMarker.setLngLat(b).addTo(this._map),this._userLocationDotMarker.setLngLat(b).addTo(this._map),this._accuracy=y.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()):(this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove())},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=y=>{if(this._map){if(this.options.trackUserLocation)if(y.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var b=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=b,this._geolocateButton.setAttribute("aria-label",b),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(y.code===3&&Ec)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.Event("error",y)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=y=>{this._map&&(this._container.addEventListener("contextmenu",b=>b.preventDefault()),this._geolocateButton=v.create("button","maplibregl-ctrl-geolocate",this._container),v.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),!(this._geolocateButton.type="button")===y?(i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),y=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)):(y=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=v.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ma({element:this._dotElement}),this._circleElement=v.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ma({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation)&&this._map.on("movestart",b=>{var S=b.originalEvent&&b.originalEvent.type==="resize";b.geolocateSource||this._watchState!=="ACTIVE_LOCK"||S||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.Event("trackuserlocationend")))})},this.options=i.extend({},Ls,u)}onAdd(u){return this._map=u,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),Sc().then(y=>this._setupUI(y)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),v.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Uu=0,Ec=!1}_isOutOfMapMaxBounds(b){var y=this._map.getMaxBounds(),b=b.coords;return y&&(b.longitude<y.getWest()||b.longitude>y.getEast()||b.latitude<y.getSouth()||b.latitude>y.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error("Unexpected watchState "+this._watchState)}}_updateCircleRadius(){var u=this._map.getBounds(),y=u.getSouthEast(),u=u.getNorthEast(),y=y.distanceTo(u),u=this._map._container.clientHeight,y=Math.ceil(this._accuracy/(y/u)*2);this._circleElement.style.width=y+"px",this._circleElement.style.height=y+"px"}trigger(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Uu--,Ec=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"));break;default:throw new Error("Unexpected watchState "+this._watchState)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error("Unexpected watchState "+this._watchState)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Uu++;let u;Ec=1<Uu?(u={maximumAge:6e5,timeout:0},!0):(u=this.options.positionOptions,!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,u)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}const Tc={maxWidth:100,unit:"metric"};function Py(E,u,y){var b=y&&y.maxWidth||100,S=E._container.clientHeight/2,M=E.unproject([0,S]),S=E.unproject([b,S]),M=M.distanceTo(S);y&&y.unit==="imperial"?5280<(S=3.2808*M)?qh(u,b,S/5280,E._getUIString("ScaleControl.Miles")):qh(u,b,S,E._getUIString("ScaleControl.Feet")):y&&y.unit==="nautical"?qh(u,b,M/1852,E._getUIString("ScaleControl.NauticalMiles")):1e3<=M?qh(u,b,M/1e3,E._getUIString("ScaleControl.Kilometers")):qh(u,b,M,E._getUIString("ScaleControl.Meters"))}function qh(E,u,y,b){var S=function(M){var j=Math.pow(10,(""+Math.floor(M)).length-1);return M/=j,M=10<=M?10:5<=M?5:3<=M?3:2<=M?2:1<=M?1:function(W){var se=Math.pow(10,Math.ceil(-Math.log(W)/Math.LN10));return Math.round(W*se)/se}(M),j*M}(y);E.style.width=u*(S/y)+"px",E.innerHTML=S+"&nbsp;"+b}class $m extends i.Evented{constructor(u={}){super(),this._onFullscreenChange=()=>{var y;let b=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;(y=b==null?void 0:b.shadowRoot)!=null&&y.fullscreenElement;)b=b.shadowRoot.fullscreenElement;b===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,u&&u.container&&(u.container instanceof HTMLElement?this._container=u.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(u){return this._map=u,this._container||(this._container=this._map.getContainer()),this._controlContainer=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){v.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){var u=this._fullscreenButton=v.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);v.create("span","maplibregl-ctrl-icon",u).setAttribute("aria-hidden","true"),u.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){var u=this._getTitle();this._fullscreenButton.setAttribute("aria-label",u),this._fullscreenButton.title=u}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.Event("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.Event("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}}const Ay={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Ic=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");class kc extends i.Evented{constructor(u){super(),this.remove=()=>(this._content&&v.remove(this._content),this._container&&(v.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.Event("close"))),this),this._onMouseUp=y=>{this._update(y.point)},this._onMouseMove=y=>{this._update(y.point)},this._onDrag=y=>{this._update(y.point)},this._update=y=>{var b=this._lngLat||this._trackPointer;if(this._map&&b&&this._content){if(!this._container){if(this._container=v.create("div","maplibregl-popup",this._map.getContainer()),this._tip=v.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const j of this.options.className.split(" "))this._container.classList.add(j);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer?this._lngLat=oi(this._lngLat,this._flatPos,this._map.transform):this._lngLat=(b=this._lngLat)==null?void 0:b.wrap(),!this._trackPointer||y){b=this._flatPos=this._pos=this._trackPointer&&y?y:this._map.project(this._lngLat),this._map.terrain&&(this._flatPos=this._trackPointer&&y?y:this._map.transform.locationPoint(this._lngLat));let j=this.options.anchor;if(y=Gh(this.options.offset),!j){var S=this._container.offsetWidth,M=this._container.offsetHeight;let se;se=b.y+y.bottom.y<M?["top"]:b.y>this._map.transform.height-M?["bottom"]:[],b.x<S/2?se.push("left"):b.x>this._map.transform.width-S/2&&se.push("right"),j=se.length===0?"bottom":se.join("-")}let W=b.add(y[j]);this.options.subpixelPositioning||(W=W.round()),v.setTransform(this._container,`${Go[j]} translate(${W.x}px,${W.y}px)`),Bu(this._container,j,"popup")}}},this._onClose=()=>{this.remove()},this.options=i.extend(Object.create(Ay),u)}addTo(u){return this._map&&this.remove(),this._map=u,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=i.LngLat.convert(u),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(u){return this.setDOMContent(document.createTextNode(u))}setHTML(u){var y,b=document.createDocumentFragment(),S=document.createElement("body");for(S.innerHTML=u;y=S.firstChild;)b.appendChild(y);return this.setDOMContent(b)}getMaxWidth(){var u;return(u=this._container)==null?void 0:u.style.maxWidth}setMaxWidth(u){return this.options.maxWidth=u,this._update(),this}setDOMContent(u){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=v.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(u),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(u){this._container&&this._container.classList.add(u)}removeClassName(u){this._container&&this._container.classList.remove(u)}setOffset(u){return this.options.offset=u,this._update(),this}toggleClassName(u){if(this._container)return this._container.classList.toggle(u)}setSubpixelPositioning(u){this.options.subpixelPositioning=u}_createCloseButton(){this.options.closeButton&&(this._closeButton=v.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){var u;this.options.focusAfterOpen&&this._container&&(u=this._container.querySelector(Ic))&&u.focus()}}function Gh(E){var u;return E?typeof E=="number"?(u=Math.round(Math.abs(E)/Math.SQRT2),{center:new i.Point(0,0),top:new i.Point(0,E),"top-left":new i.Point(u,u),"top-right":new i.Point(-u,u),bottom:new i.Point(0,-E),"bottom-left":new i.Point(u,-u),"bottom-right":new i.Point(-u,-u),left:new i.Point(E,0),right:new i.Point(-E,0)}):E instanceof i.Point||Array.isArray(E)?{center:u=i.Point.convert(E),top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}:{center:i.Point.convert(E.center||[0,0]),top:i.Point.convert(E.top||[0,0]),"top-left":i.Point.convert(E["top-left"]||[0,0]),"top-right":i.Point.convert(E["top-right"]||[0,0]),bottom:i.Point.convert(E.bottom||[0,0]),"bottom-left":i.Point.convert(E["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(E["bottom-right"]||[0,0]),left:i.Point.convert(E.left||[0,0]),right:i.Point.convert(E.right||[0,0])}:Gh(new i.Point(0,0))}const H_=c;o.AJAXError=i.AJAXError,o.Evented=i.Evented,o.LngLat=i.LngLat,o.MercatorCoordinate=i.MercatorCoordinate,o.Point=i.Point,o.addProtocol=i.addProtocol,o.config=i.config,o.removeProtocol=i.removeProtocol,o.AttributionControl=pp,o.BoxZoomHandler=Ty,o.CanvasSource=mt,o.CooperativeGesturesHandler=ih,o.DoubleClickZoomHandler=zu,o.DragPanHandler=Fm,o.DragRotateHandler=rh,o.EdgeInsets=op,o.FullscreenControl=$m,o.GeoJSONSource=ge,o.GeolocateControl=Ns,o.Hash=au,o.ImageSource=nt,o.KeyboardHandler=wi,o.LngLatBounds=Z,o.LogoControl=zm,o.Map=Or,o.MapMouseEvent=Rs,o.MapTouchEvent=_c,o.MapWheelEvent=su,o.Marker=Ma,o.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{var y=this._map.getZoom(),u=y===this._map.getMaxZoom(),y=y===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{var u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,y)=>{y=this._map._getUIString("NavigationControl."+y),u.title=y,u.setAttribute("aria-label",y)},this.options=i.extend({},gp,E),this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),v.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),v.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=v.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){v.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,u){return E=v.create("button",E,this._container),E.type="button",E.addEventListener("click",u),E}},o.Popup=kc,o.RasterDEMTileSource=Ie,o.RasterTileSource=ye,o.ScaleControl=class{constructor(E){this._onMove=()=>{Py(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,Py(this._map,this._container,this.options)},this.options=i.extend({},Tc,E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){v.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=xc,o.Style=nl,o.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=v.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=v.create("button","maplibregl-ctrl-terrain",this._container),v.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){v.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=cp,o.TwoFingersTouchRotateHandler=qo,o.TwoFingersTouchZoomHandler=up,o.TwoFingersTouchZoomRotateHandler=oh,o.VectorTileSource=ee,o.VideoSource=wt,o.addSourceType=(E,u)=>i.__awaiter(void 0,void 0,void 0,function*(){if(Zt(E))throw new Error(`A source type called "${E}" already exists.`);var y,b;y=E,b=u,zt[y]=b}),o.clearPrewarmedResources=function(){var E=pe;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(fe),pe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return qt().getRTLTextPluginStatus()},o.getVersion=function(){return H_},o.getWorkerCount=function(){return le.workerCount},o.getWorkerUrl=function(){return i.config.WORKER_URL},o.importScriptInWorkers=function(E){return it().broadcast("IS",E)},o.prewarm=function(){Fe().acquire(fe)},o.setMaxParallelImageRequests=function(E){i.config.MAX_PARALLEL_IMAGE_REQUESTS=E},o.setRTLTextPlugin=function(E,u){return qt().setRTLTextPlugin(E,u)},o.setWorkerCount=function(E){le.workerCount=E},o.setWorkerUrl=function(E){i.config.WORKER_URL=E}}),t},xH.exports=e()}(),xH.exports),Pu=fy(nve);function rve(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ai,CH={exports:{}},ove={},ive=Object.freeze({__proto__:null,default:ove}),ave=tve(ive),sve=(function(e){for(var t,n,r=0,o=[],i=0;i<256;i++)o[i]=(i+256).toString(16).substr(1);function l(){f=16,(!t||c.BUFFER_SIZE<r+f)&&(r=0,t=c.randomBytes(c.BUFFER_SIZE));var f=t.slice(r,r+=f);return f[6]=15&f[6]|64,f[8]=63&f[8]|128,f}function c(){var f=l();return o[f[0]]+o[f[1]]+o[f[2]]+o[f[3]]+"-"+o[f[4]]+o[f[5]]+"-"+o[f[6]]+o[f[7]]+"-"+o[f[8]]+o[f[9]]+"-"+o[f[10]]+o[f[11]]+o[f[12]]+o[f[13]]+o[f[14]]+o[f[15]]}c.BUFFER_SIZE=4096,c.bin=l,c.clearBuffer=function(){t=null,r=0},c.test=function(f){return typeof f=="string"&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f)},typeof crypto<"u"?n=crypto:typeof window<"u"&&window.msCrypto!==void 0&&(n=window.msCrypto),typeof rve=="function"?(n=n||ave,e.exports=c):typeof window<"u"&&(window.uuid=c),c.randomBytes=function(){if(n){if(n.randomBytes)return n.randomBytes;if(n.getRandomValues)return typeof Uint8Array.prototype.slice!="function"?function(f){return f=new Uint8Array(f),n.getRandomValues(f),Array.from(f)}:function(f){return f=new Uint8Array(f),n.getRandomValues(f),f}}return function(f){for(var p=[],g=0;g<f;g++)p.push(Math.floor(256*Math.random()));return p}}()}(CH),CH.exports),f_=fy(sve),Mh={domain:"atlas.microsoft.com",staticAssetsDomain:"atlas.microsoft.com",stylePath:"styling",styleDefinitionsVersion:"2023-01-01",appInsightsKey:"e96cb745-c6f5-409c-a775-c4313e468c1d",aadInstance:"https://login.microsoftonline.com/"},Pr={apiVersionQueryParameter:"api-version",authorizationHeaderName:"Authorization",authorizationTokenPrefix:"Bearer ",jwtSasPrefix:"jwt-sas ",domainPlaceHolder:"{{azMapsDomain}}",legacyDomainPlaceHolder:"{azMapsDomain}",viewPlaceHolder:"{{azMapsView}}",viewParameter:"view",languagePlaceHolder:"{{azMapsLanguage}}",stylePathHolder:"{{azMapsStylingPath}}",styleResourcePlaceholder:"{{azMapsStylePath}}",stylePath:"styling",styleResourcePath:"styles",styleApiVersion:"2.0",mapAgentHeaderName:"Map-Agent",msClientIdHeaderName:"x-ms-client-id",msOriginHeaderName:"Ms-Am-Request-Origin",msOriginHeaderValue:"MapControl",aadResourceId:"https://atlas.microsoft.com/.default",sessionIdHeaderName:"Session-Id"},lve=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Hi=function(){function e(){}return e.prototype.merge=function(){for(var t,n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];try{for(var l=lve(o),c=l.next();!c.done;c=l.next()){var f=c.value;if(f)for(var p in f)f.hasOwnProperty(p)&&this.hasOwnProperty(p)&&(f[p]!==void 0&&f[p]!=null?this[p]instanceof e?this[p].merge(f[p]):this[p]=f[p]:(r=r||new(Object.getPrototypeOf(this)).constructor,this[p]=r[p]))}}catch(g){t={error:g}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return this},e}(),uve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cve=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},dve=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.domain=void 0,n.headers={},n.path="",n.protocol="https",n.queryParams={},n.subdomain="",n}return uve(t,e),t}(Hi),Af=function(){function e(t){this.options=new dve().merge(t)}return e.prototype.get=function(){return fetch(this.toString(),{method:"GET",mode:"cors",headers:new Headers(this.options.headers)}).then(function(t){if(t.ok)return t.json();throw new Error("HTTP ".concat(t.status,": ").concat(t.statusText))})},e.prototype.toString=function(){var t=Object.entries(this.options.queryParams).map(function(l){var l=cve(l,2),i=l[0],l=l[1];return"".concat(i,"=").concat(l)}).join("&"),n=[],r=this.options.path||"";return e.protoRegEx.test(r)?n.push(r):(this.options.domain&&(e.protoRegEx.test(this.options.domain)||(n.push("".concat(this.options.protocol,"://")),n.push(this.options.subdomain?"".concat(this.options.subdomain,"."):"")),n.push(this.options.domain)),n.push(this.options.path?"/".concat(r):"")),n.push(t?"?".concat(t):""),n.join("")},e.protoRegEx=new RegExp(/^(((file|http|https):\/\/)|blob:)/i),e}(),SH=function(){function e(){}return e.parse=function(t){var n=(t=t.toLowerCase()).lastIndexOf("-");return n!==-1?{code:t,language:t.substring(0,n),region:t.substring(n+1)}:{code:t,language:t}},e}(),ug={localizationsPath:"locs/mapcontrol/2019-3-12",sensitiveUserRegions:["il","kr","pk","in","cn","ar","bh","eg","jo","sa","kw","om","qa","ma","ae"],locales:{defaultLanguage:{defaultRegion:{code:"NGT",strings:"en/resource.json"},latn:{code:"NGT-Latn",strings:"en/resource.json"}},ar:{defaultRegion:{code:"ar",strings:"ar-sa/resource.json"}},bg:{defaultRegion:{code:"bg-BG",strings:"bg-bg/resource.json"}},cs:{defaultRegion:{code:"cs-CZ",strings:"cs-cz/resource.json"}},da:{defaultRegion:{code:"da-DK",strings:"da-dk/resource.json"}},de:{defaultRegion:{code:"de-DE",strings:"de-de/resource.json"}},el:{defaultRegion:{code:"el-GR",strings:"el-gr/resource.json"}},en:{defaultRegion:{code:"en",strings:"en/resource.json"},us:{code:"en-US",strings:"en/resource.json"},au:{code:"en-AU",strings:"en/resource.json"},gb:{code:"en-GB",strings:"en/resource.json"},nz:{code:"en-NZ",strings:"en/resource.json"}},es:{defaultRegion:{code:"es-ES",strings:"es-es/resource.json"},mx:{code:"es-MX",strings:"es-mx/resource.json"}},fi:{defaultRegion:{code:"fi-FI",strings:"fi-fi/resource.json"}},fr:{defaultRegion:{code:"fr-FR",strings:"fr-fr/resource.json"}},hu:{defaultRegion:{code:"hu-HU",strings:"hu-hu/resource.json"}},id:{defaultRegion:{code:"id-ID",strings:"id-id/resource.json"}},it:{defaultRegion:{code:"it-IT",strings:"it-it/resource.json"}},ko:{defaultRegion:{code:"ko-KR",strings:"ko-kr/resource.json"}},lt:{defaultRegion:{code:"lt-LT",strings:"lt-lt/resource.json"}},ms:{defaultRegion:{code:"ms-MY",strings:"ms-my/resource.json"}},nb:{defaultRegion:{code:"nb-NO",strings:"nb-no/resource.json"}},nl:{defaultRegion:{code:"nl-NL",strings:"nl-nl/resource.json"}},pl:{defaultRegion:{code:"pl-PL",strings:"pl-pl/resource.json"}},pt:{defaultRegion:{code:"pt-PT",strings:"pt-pt/resource.json"},br:{code:"pt-BR",strings:"pt-br/resource.json"}},ru:{defaultRegion:{code:"ru-RU",strings:"ru-ru/resource.json"}},sk:{defaultRegion:{code:"sk-SK",strings:"sk-sk/resource.json"}},sl:{defaultRegion:{code:"sl-SL",strings:"sl-sl/resource.json"}},sv:{defaultRegion:{code:"sv-SE",strings:"sv-se/resource.json"}},th:{defaultRegion:{code:"th-TH",strings:"th-th/resource.json"}},tr:{defaultRegion:{code:"tr-TR",strings:"tr-tr/resource.json"}},zh:{defaultRegion:{code:"zh",strings:"en/resource.json"}},"zh-hans":{defaultRegion:{code:"zh-Hans",strings:"zh-cn/resource.json"},cn:{code:"zh-Hans-CN",strings:"zh-cn/resource.json"}},"zh-hant":{defaultRegion:{code:"zh-Hant",strings:"en/resource.json"},tw:{code:"zh-Hant-TW",strings:"zh-tw/resource.json"}}}},EH=function(){this.Unknown="Unknown",this.Accident="Accident",this.Fog="Fog",this.Danger="Danger",this.Rain="Rain",this.Ice="Ice",this.Jam="Jam",this.LaneClosed="Lane Closed",this.RoadClosed="Road Closed",this.RoadWorks="Road Works",this.Wind="Wind",this.Flood="Flood",this.Detour="Detour"},xk=function(){function e(){}return e.getCode=function(t){var n=SH.parse(t);return ug.sensitiveUserRegions.indexOf(n.region)===-1?this.getLocaleData(n).code:t},e.getStrings=function(t){return t=this.getLocaleData(t),ug.locales.defaultLanguage.defaultRegion.code===t.code?new Promise(function(n){n(new EH)}):new Af({domain:Mh.staticAssetsDomain,path:"".concat(ug.localizationsPath,"/").concat(t.strings)}).get().then(function(n){return n},function(){return new EH})},e.getLocaleData=function(t){if(typeof t=="string"&&(t=SH.parse(t)),ug.locales[t.code])return ug.locales[t.code].defaultRegion;var n;if(ug.locales[t.language])n=ug.locales[t.language];else{if(t.language.indexOf("-")!==-1)return this.getLocaleData(t.language);n=ug.locales.defaultLanguage}return t.region&&n[t.region]?n[t.region]:n.defaultRegion},e}(),hve=function(){function e(){}return e.getEdgeOrIEVersion=function(){var t=window.navigator.userAgent,n=t.indexOf("MSIE ");return 0<n?parseInt(t.substring(n+5,t.indexOf(".",n)),10):0<t.indexOf("Trident/")?(n=t.indexOf("rv:"),parseInt(t.substring(n+3,t.indexOf(".",n)),10)):0<(n=t.indexOf("Edge/"))?parseInt(t.substring(n+5,t.indexOf(".",n)),10):-1},e.isEdgeOrIE=function(){return this.getEdgeOrIEVersion()!==-1},e.isIE=function(){var t=this.getEdgeOrIEVersion();return t!==-1&&t<=11},e}(),Rg="3.5.0",MA=function(){function e(){}return e.getFullVersion=function(){return Rg},e.getEndpointVersion=function(){var t=Rg.indexOf(".");return(t=Rg.indexOf(".",t+1))===-1?Rg:Rg.substring(0,t)},e}(),fve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pve=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},mve=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},U9=(function(e){e.subscriptionKey="subscriptionKey",e.aad="aad",e.anonymous="anonymous",e.sas="sas"}(Ai=Ai||{}),function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.authType=void 0,n.subscriptionKey=void 0,n.clientId=void 0,n.aadAppId=void 0,n.aadTenant=void 0,n.aadInstance=void 0,n.getToken=void 0,n.sasToken=void 0,n.authContext=void 0,n}return fve(t,e),t.prototype.setSubscriptionKey=function(n){this.authType=Ai.subscriptionKey,this.subscriptionKey=n},t.prototype.setAadProperties=function(n,r,o,i,l){this.authType=Ai.aad,this.authContext=l||this.authContext,this.aadInstance=i||this.aadInstance,this.clientId=n,this.aadAppId=r,this.aadTenant=o},t.prototype.setTokenCallbackFunction=function(n){this.authType=Ai.anonymous,this.getToken=n},t.prototype.setSasCallbackFunction=function(n){this.authType=Ai.sas,this.getToken=n},t.prototype.merge=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=e.prototype.merge.apply(this,mve([],pve(n),!1));return o.authType===Ai.subscriptionKey?o.authContext=o.aadAppId=o.getToken=void 0:o.authType===Ai.aad?o.subscriptionKey=o.getToken=void 0:o.authType===Ai.anonymous?o.subscriptionKey=o.authContext=o.aadAppId=void 0:o.authType===Ai.sas&&(o.authContext=o.subscriptionKey=o.aadAppId=void 0),o},t}(Hi)),uL=fz;function fz(e){return!gve(e)}function gve(e){return yve()?vve()?_ve()?bve()?wve()?xve()?Cve()?Sve()?Eve()?Tve(e&&e.failIfMajorPerformanceCaveat)?Pve()?void 0:"insufficient ECMAScript 6 support":"insufficient WebGL support":"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser"}function yve(){return typeof window<"u"&&typeof document<"u"}function vve(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function _ve(){return Function.prototype&&Function.prototype.bind}function bve(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function wve(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function xve(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(n);try{t=new Worker(n),e=!0}catch{e=!1}return t&&t.terminate(),URL.revokeObjectURL(n),e}function Cve(){return"Uint8ClampedArray"in window}function Sve(){return ArrayBuffer.isView}function Eve(){var e=document.createElement("canvas"),t=(e.width=e.height=1,e.getContext("2d"));return!!t&&(t=t.getImageData(0,0,1,1))&&t.width===e.width}var RA,bR={};function Tve(e){return bR[e]===void 0&&(bR[e]=kve(e)),bR[e]}function Ive(e){var t=document.createElement("canvas"),n=Object.create(fz.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}function kve(n){var t,n=Ive(n);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch{return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),n.getShaderParameter(t,n.COMPILE_STATUS)===!0)}function Pve(){return!document.documentMode}fz.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var j9="NGT",$9=f_(),H9=Mh.domain,Ave=Mh.staticAssetsDomain,V9=Mh.stylePath,q9=Mh.styleDefinitionsVersion,G9=Pr.styleApiVersion,Cx=new U9,pz=!1,W9=!1,K9=!1,Y9=!1,Z9=!1,X9=!1,Q9=!1,J9=!1,mz=!1;function eW(){return Object.assign({},Cx)}function tW(){return Ave}function Ck(){return H9}function nW(){return V9}function rW(){return q9}function oW(){return G9}function iW(){return Pu.getWorkerCount()}function aW(){return Pu.getMaxParallelImageRequests()}function sW(){return j9}function lW(){return $9}function uW(){return Cx.authType===Ai.subscriptionKey?Cx.subscriptionKey:void 0}function Mve(){return RA}function cW(){return RA}function Rve(){return MA.getFullVersion()}function Ove(e){var t=!hve.isIE();return t=t&&uL({failIfMajorPerformanceCaveat:e})&&document.createElement("canvas").getContext("webgl2")!==null}function dW(e){Cx=new U9().merge(Cx,e),mz=!0}function hW(e){H9=e,W9=!0}function fW(e){V9=e,K9=!0}function Dve(e){q9=e,Y9=!0}function Lve(e){G9=e}function pW(e){0<e&&(Pu.setWorkerCount(e),Z9=!0)}function mW(e){0<e&&(Pu.setMaxParallelImageRequests(e),X9=!0)}function gW(e){j9=xk.getCode(e),Q9=!0}function yW(e){$9=e,J9=!0}function vW(e){Cx.setSubscriptionKey(e),mz=!0}function _W(e){RA=e,pz=!0}function Nve(e){RA=e,pz=!0}function Fve(e,t,n){!n&&vS[e.toLowerCase()]||(vS[e.toLowerCase()]=t)}function bW(e,t){if(t=Math.abs(t||1),typeof e=="string"&&vS[e.toLowerCase()]){for(var n=vS[e.toLowerCase()],r=/calc\(([0-9.]+)[px]*\s*\*\s*\{scale\}\)/gi,o=n,i=r.exec(n);i;)o=o.replace(i[0],parseFloat(i[1])*t+""),i=r.exec(n);return o=o.replace("{scale}",t+"")}throw new Error("Invalid templateName.")}function zve(){return Object.keys(vS)}function Bve(){Pu.prewarm()}function Uve(){Pu.clearPrewarmedResources()}function jve(e,t){Pu.addProtocol(e,t)}function $ve(e){Pu.removeProtocol(e)}function cL(){return mz}function wW(){return W9}function xW(){return K9}function Hve(){return Y9}function CW(){return Z9}function SW(){return X9}function EW(){return Q9}function TW(){return J9}function IW(){return pz}function Vve(){return Mh.domain}function qve(){return Ck()}function TH(){var e=new Af({domain:Mh.staticAssetsDomain,path:"sdk/javascript/mapcontrol/".concat(MA.getEndpointVersion(),"/mapbox-gl-rtl-text.min.js")});Pu.setRTLTextPlugin(e.toString(),!0).catch(function(t){t&&console.warn(t)})}var Iu,Qs,vS={marker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 26 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><text x="12.5" y="17.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:2"/><text x="12.5" y="18.5" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-circle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(39 * {scale})" viewBox="-1 -1 27 38"><path d="M12.25.25a12.254 12.254 0 0 0-12 12.494c0 6.444 6.488 12.109 11.059 22.564.549 1.256 1.333 1.256 1.882 0C17.762 24.853 24.25 19.186 24.25 12.744A12.254 12.254 0 0 0 12.25.25Z" style="fill:{color};stroke:{secondaryColor};stroke-width:1"/><circle cx="12.5" cy="12.5" r="9" fill="{secondaryColor}"/><text x="12" y="17.5" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',pin:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(24 * {scale})" height="calc(28 * {scale})" viewBox="0 0 24 28"><path d="m11.988 16.615a5.15 5.15 0 0 1-2.268-.525 4.909 4.909 0 0 1-2.805-4.442 5.019 5.019 0 0 1 5.072-4.936h.012a5.03 5.03 0 0 1 5.085 4.961 4.907 4.907 0 0 1-.549 2.224 5.114 5.114 0 0 1-4.548 2.718zm0-8.06a3.173 3.173 0 0 0-3.226 3.099 3.081 3.081 0 0 0 1.77 2.782 3.299 3.299 0 0 0 4.365-1.386 3.049 3.049 0 0 0 .342-1.381 3.184 3.184 0 0 0-3.239-3.114h-.012z" fill="{secondaryColor}"/><path d="m11.999.922a10.908 10.908 0 0 0-11.076 10.732 10.639 10.639 0 0 0 4.418 8.598l6.658 6.464 6.658-6.463a10.537 10.537 0 0 0 2.198-15.041 11.182 11.182 0 0 0-8.856-4.289zm1.873 14.341a4.221 4.221 0 0 1-5.589-1.789 3.945 3.945 0 0 1-.445-1.8 4.164 4.164 0 0 1 8.323-.037 4.028 4.028 0 0 1-2.289 3.626Z" fill="{color}"/><path d="m11.999 28-7.256-7.044a11.611 11.611 0 0 1-4.743-9.303 11.844 11.844 0 0 1 11.988-11.652.102 .102 0 0 1 .02 0 12.164 12.164 0 0 1 9.577 4.647 11.357 11.357 0 0 1 2.299 8.614 11.521 11.521 0 0 1-4.63 7.695zm-.01-26.157a9.997 9.997 0 0 0-10.143 9.812 9.769 9.769 0 0 0 4.04 7.853l.099.083 6.014 5.838 6.113-5.922a9.7 9.7 0 0 0 3.945-6.505 9.533 9.533 0 0 0-1.933-7.229 10.305 10.305 0 0 0-8.116-3.931h-.021zm.021 14.772a5.11 5.11 0 0 1-4.547-2.718 4.868 4.868 0 0 1 .932-5.743 5.118 5.118 0 0 1 3.58-1.46h.024a5.031 5.031 0 0 1 5.084 4.938 4.92 4.92 0 0 1-2.805 4.457h0a5.152 5.152 0 0 1-2.269.525zm-.011-8.079h-.015a3.277 3.277 0 0 0-2.295.933 3.029 3.029 0 0 0-.587 3.58 3.297 3.297 0 0 0 4.364 1.386h0a3.092 3.092 0 0 0 1.772-2.795 3.185 3.185 0 0 0-3.239-3.105z" fill="{secondaryColor}"/><text x="12" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"pin-round":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25 * {scale})" height="calc(25 * {scale})" viewBox="0 0 25 25"><g transform="translate(0 1)"><circle cx="12.25" cy="11.5833" r="11" fill="{color}"/><path d="m12.25 23.583a12 12 0 1 1 12-12 12 12 0 0 1-12 12zm0-22a10 10 0 1 0 10 10 10 10 0 0 0-10-10z" fill="{secondaryColor}"/><circle cx="12.25" cy="11.5833" r="4.2386" fill="{secondaryColor}"/></g><text x="12.5" y="17" style="font-size:14px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-flat":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(42.8 * {scale})"  viewBox="0 0 1600 2570"><g fill="{color}"><path d="M691 2419c-409-575-641-1086-683-1504-10-106-10-136 5-224 31-188 105-330 241-458 129-124 270-190 453-214 69-9 113-10 182-1 373 46 655 326 703 698 40 308-120 801-424 1309-134 224-348 535-369 535-4 0-53-63-108-141z"/></g><g fill="rgba(0,0,0,0.15)" style="transform:scale(-1,1);transform-origin:center"><path d="M691 2419c-407-571-639-1083-682-1498-14-139-3-249 37-371 69-208 254-402 459-481 68-27 217-59 271-59h24v160 180 940 635c0 349-2 635-5 635-2 0-49-63-104-141z"/></g><circle cx="800" cy="800" r="600" fill="{secondaryColor}"/><text x="800" y="1100" style="font-size:800px;fill:#000;text-anchor:middle">{text}</text></svg>',"marker-arrow":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(25.47 * {scale})" height="calc(35.18 * {scale})" viewBox="0 0 4330 5980"><g fill="{color}"><path d="m2080 5969c-49-20-93-63-115-113-25-55-1928-5486-1953-5573-40-138 67-282 210-283 36 0 246 73 987 345 518 190 947 345 955 345 8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29-33 0-71-5-85-10z"/></g><g fill="{secondaryColor}"><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z"/><path d="m2200 1600c-36 10-83 2-484-84-243-53-451-94-461-91-11 4-22 18-25 31-5 19 114 371 436 1292 244 697 448 1273 454 1281 19 24 50 30 71 12z" style="transform:scale(-1,1);transform-origin:center"/></g><g fill="rgba(0,0,0,0.2)" ><path d="m2165 685c8 0 438-155 955-345 615-226 954-345 979-345 87 0 165 47 204 123 46 91 107-95-957 2942-537 1535-986 2805-997 2823-11 18-43 46-72 62-41 24-62 30-111 29z"/></g><text x="2165" y="3300" style="font-size:2500px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-ball-pin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15.67 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 235 452"><g transform="translate(-135 10)"><path fill="{secondaryColor}" d="m256 442 0 0c-13 0-18-11-18-24l-6-323c0-13 11-24 24-24h0c13 0 24 11 24 24l-6 323c0 13-5 24-18 24z"/><circle style="fill:{color};stroke-width:10;stroke:{secondaryColor}" cx="256" cy="112" r="111"/><ellipse transform="matrix(0.834 0.5518 -0.5518 0.834 65.7916 -97.18)" fill="rgba(255,255,255,0.3)" cx="194.399" cy="60.749" rx="19.076" ry="32.428"/></g><text x="117.5" y="160" style="font-size:160px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.67 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2000 2420"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M845 2152c-22-37-58-95-80-129-22-35-62-99-90-143l-50-80-312 0-313 0 0-900 0-900 900 0 900 0 0 900 0 900-313 0-313 0-34 58c-19 31-38 59-42 60-5 2-8 8-8 12 0 9-69 123-88 145-5 6-11 15-13 21-16 39-77 123-89 124-8 0-33-31-55-68z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(38.8 * {scale})" viewBox="0 0 2500 2910"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m866 2652c-17-31-37-68-46-82-9-14-32-54-51-90-19-36-50-92-70-125l-36-60-332-3-331-2 0-905 0-905 660 0 660 0 0-38c0-71 50-196 102-258 71-85 189-164 244-164 12 0 26-4 29-10 8-13 222-13 230 0 3 6 17 10 30 10 25 0 117 45 154 76 130 107 191 232 191 392 0 155-63 284-190 386-36 29-129 76-150 76-11 0-22 5-25 10-3 6-31 10-61 10l-54 0 0 660 0 660-332 2-332 3-29 50c-17 28-48 84-70 125-22 41-47 86-56 100-9 14-30 51-46 83-17 32-36 57-45 57-8 0-28-25-44-58z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(26.8 * {scale})" height="calc(32.27 * {scale})" viewBox="0 0 2010 2410"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="M856 2155c-20-30-36-59-36-65 0-5-4-10-10-10-5 0-10-5-10-11 0-5-18-37-40-69-22-32-40-64-40-69 0-6-4-11-10-11-5 0-10-5-10-10 0-6-15-33-32-60l-33-50-127 0c-74 0-129-4-133-10-3-5-17-10-30-10-25 0-116-45-155-76-87-69-142-151-178-265-15-46-17-1075-2-1084 5-3 10-17 10-30 0-13 5-27 10-30 6-3 10-13 10-22 0-22 83-135 122-168 57-46 62-50 112-75l50-25 585 0 586 0 63 34c84 46 169 133 212 218l35 68 0 565 0 565-28 59c-32 69-100 157-139 180-15 9-33 22-40 29-23 22-99 57-123 57-13 0-27 5-30 10-4 6-60 10-135 10l-128 0-128 205c-84 136-133 205-144 205-10 0-33-24-54-55z"/></g><text x="1000" y="1300" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',"marker-square-rounded-cluster":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(33.33 * {scale})" height="calc(32.13 * {scale})" viewBox="0 0 2500 2900"><g transform="translate(100 100)" style="stroke:{secondaryColor};stroke-width:100;fill:{color}"><path d="m874 2669c-9-18-26-49-37-68-11-20-30-55-43-78-13-24-36-64-51-90-14-27-38-69-52-95l-26-48-142 0c-84 0-144-4-148-10-3-5-17-10-30-10-25 0-118-46-154-76-91-76-136-142-175-254-13-38-16-119-16-554 0-358 3-520 12-545 40-125 106-219 195-278 127-84 116-83 646-83l467 0 0-42c0-46 11-87 45-163 54-121 169-220 306-264 46-14 232-14 278 0 165 53 284 175 340 350 19 61 14 204-10 273-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-3 6-28 10-56 10l-49 0 0 462c0 446-1 464-21 522-32 91-94 178-169 240-38 31-130 76-155 76-13 0-27 5-30 10-4 6-65 10-149 10-138 0-143 1-154 23-12 23-62 114-112 202-16 28-44 79-63 115-42 77-67 88-93 39z"/></g><text x="1650" y="900" style="font-size:1000px;fill:#fff">+</text><text x="1000" y="1800" style="font-size:1000px;fill:#fff;text-anchor:middle">{text}</text></svg>',flag:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(23.5 * {scale})" height="calc(40 * {scale})" viewBox="34 28 198 308"><path style="stroke:{secondaryColor};stroke-width:15;stroke-linecap:round;" d="M42 327l0 -291"/><path style="fill:{color};stroke:{secondaryColor};stroke-width:10;stroke-linejoin:round;" d="M49 50c70 30 104 28 178 2-21 42-21 74 0 116-72 25-101 25-178 0l0-118z"/><text x="130" y="165" style="font-size:100px;fill:#fff;text-anchor:middle">{text}</text></svg>',"flag-triangle":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(27 * {scale})" height="calc(35.33 * {scale})" viewBox="0 0 40.5 53"><g transform="translate(-31 -20)"><path fill="{secondaryColor}" d="M34.7,73.3V48.4l34.6-10.1c0.7-0.2,1.2-0.8,1.2-1.5s-0.4-1.4-1-1.7L33.7,20.5c-0.5-0.2-1.1-0.2-1.6,0.2 c-0.5,0.3-0.7,0.8-0.7,1.4v51.2H34.7z"/><polygon points="34.7,24.5 66,36.5 34.7,45 34.7,10" fill="{color}"/></g><text x="11" y="21" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(34 * {scale})" height="calc(34 * {scale})" viewBox="0 0 34 34"><g transform="translate(2 2)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17" y="22" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"rounded-square-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(38 * {scale})" height="calc(38 * {scale})" viewBox="0 0 38 38"><g transform="translate(4 4)"><rect x="0" y="0" rx="8" ry="8" width="30" height="30" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19" y="24" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',triangle:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(36 * {scale})" height="calc(36 * {scale})" viewBox="0 0 36 36"><g transform="translate(2 2)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="30" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><g transform="translate(4 4)"><polygon points="16,0 32,32 0,32 16,0" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="32" style="font-size:12px;fill:#fff;text-anchor:middle">{text}</text></svg>',hexagon:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(35 * {scale})" height="calc(40 * {scale})" viewBox="0 0 35 40"><g transform="translate(2 2)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:2;fill:{color}"/></g><text x="17.5" y="25" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(39 * {scale})" height="calc(44 * {scale})" viewBox="0 0 39 44"><g transform="translate(4 4)"><path d="M31 9 15.5 0 0 9 0 27 15.5 36 31 27 31 9Z" style="stroke:{secondaryColor};stroke-width:4;fill:{color}"/></g><text x="19.5" y="27" style="font-size:14px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1100 1100"><g transform="translate(50 50)"><path style="stroke:{secondaryColor};stroke-width:50;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="550" y="700" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"hexagon-rounded-thick":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 1200 1200"><g transform="translate(100 100)"><path style="stroke:{secondaryColor};stroke-width:100;fill:{color}" d="M881 210 561 25c-33-19-88-19-121 0L119 210c-33 19-61 67-61 105v370c0 39 27 86 61 105l321 185c33 19 88 19 122 0l321-185c33-19 61-67 61-105V315C942 276 915 229 881 210z"/></g><text x="600" y="750" style="font-size:400px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="17" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"triangle-arrow-left":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(28 * {scale})" height="calc(28 * {scale})" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="24,12 0,0 7,12 0,24" stroke-width="2" stroke="{secondaryColor}" fill="{color}"/></g><text x="14" y="16.5" style="font-size:8px;fill:#fff;text-anchor:middle">{text}</text></svg>',"arrow-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(12.16 * {scale})" height="calc(30.1 * {scale})" viewBox="0 0 902 364"><g fill="{color}" transform="matrix(0,2.4,-2.4,0,897,-930)"><polygon points="902,222 233,222 233,364 0,182 233,0 233,141 902,141 902,222"/></g><text x="450" y="700" style="font-size:900px;fill:#000;text-anchor:middle">{text}</text></svg>',"arrow-up-thin":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(33.33 * {scale})" viewBox="0 0 12 25"><g transform="translate(-136.91823 -751.91998)"><path fill="{color}" d="m148.271 760.71c-1.641-.547-3.186-1.47-4.633-2.769l0 18.07-1.675 0 0-18.07c-1.447 1.299-2.986 2.222-4.616 2.769l0-1.231c2.325-1.596 4.006-3.812 5.043-6.65l.838 0c1.037 2.838 2.718 5.055 5.043 6.65l0 1.231z"/></g><text x="6" y="20" style="font-size:10px;fill:#000;text-anchor:middle">{text}</text></svg>',car:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(21.93 * {scale})" height="calc(40.9 * {scale})" viewBox="0 0 6580 12270"><g transform="translate(0 12270) rotate(-90)"><path fill="{secondaryColor}" d="M7045 6566c-42-13-105-44-105-51 0-2 23-105 50-228 28-123 50-230 50-236 0-8-241-11-907-11-855 0-1145 6-1513 30-85 6-189 13-230 15-41 3-133 10-205 15-286 21-430 32-705 50-953 63-1459 18-2335-205-304-77-746-209-799-238-131-72-221-408-285-1062-34-345-42-532-48-1130-16-1557 108-2532 336-2649 32-17 469-149 676-205 409-110 819-191 1205-238 116-14 224-18 540-18 395 1 494 5 1140 50 1124 79 1224 82 2496 78l641-3-53-237c-29-131-52-238-51-239 1-1 31-14 66-29 56-23 76-26 142-23 67 3 83 7 120 33 23 17 50 41 61 55 10 14 51 117 91 230l73 205 674 3 675 2 90-39c98-43 198-72 315-93 122-21 829-18 990 5 321 45 626 143 849 270 293 168 516 378 704 662 266 402 416 893 467 1527 15 174 8 882-9 998-6 41-18 127-27 190-69 502-253 969-523 1325-79 105-262 284-381 374-189 142-355 229-574 300-336 110-526 139-952 148-457 9-685-23-887-124l-47-24-678-6-678-6-64 179c-79 224-92 253-121 284-67 70-177 97-274 66zm-2752-5073c-23-2-64-2-90 0-26 2-7 3 42 3 50 0 71-1 48-3zm395 0c-21-2-55-2-75 0-21 2-4 4 37 4 41 0 58-2 38-4z"/><path fill="{color}" d="M7043 6498c-13-6-23-19-23-28 0-9 23-117 50-240 28-123 50-230 50-237 0-22-2126-13-2465 10-132 10-400 28-595 42-661 47-824 55-1160 62-435 7-656-8-1040-73-415-70-865-183-1447-365-168-53-272-556-325-1569-16-319-16-1311 0-1630 45-872 129-1366 257-1518 22-26 51-39 172-77 557-177 1122-310 1563-369 271-36 351-40 690-40 361 1 463 6 1165 54 1122 78 1288 83 2337 79 460-2 840-7 843-11 4-4-17-117-47-252l-55-245 39-16c76-30 180-8 224 47 10 13 54 124 98 246l79 222 709 0 709 0 47-24c74-37 219-83 322-101 122-22 606-32 802-16 374 29 658 102 933 238 124 62 271 155 361 230l61 51 6 100c19 278 103 497 247 643 88 89 173 136 278 152l70 11 41 131c116 369 159 673 168 1170 10 584-38 984-167 1397l-40 126-70 12c-193 33-348 175-441 405-56 139-89 302-89 445 0 43-3 47-58 91-290 235-644 384-1068 450-191 29-796 39-974 16-135-18-263-54-368-102l-75-35-701 0-701 0-79 223c-82 232-102 267-163 293-38 16-138 17-170 2zm-2023-820c332-15 1155-12 1835 6 308 8 563 12 566 8 4-4 10-21 13-38 7-30 6-31-92-77-518-244-1197-396-2112-474-295-25-1282-25-1579 0-231 20-473 46-479 51-6 7 49 110 93 171 160 226 416 335 855 365 142 10 539 5 900-12zm3304-263c525-111 899-887 934-1935 19-557-37-1023-172-1435-186-563-521-900-896-899-81 0-158 14-525 92-426 91-431 92-540 146-195 96-287 207-306 368-12 104-11 2985 1 3078 22 170 135 291 365 389 49 21 191 55 480 115 226 47 419 87 430 89 45 10 164 6 229-8zm-5570-485c112-43 197-156 216-291 12-83 13-2623 1-2706-23-158-125-273-270-304-44-9-100-1-542 75-272 47-514 91-539 98-266 68-487 424-594 958-56 280-70 548-40 800 56 484 207 878 414 1081 115 114 122 116 702 218 277 49 524 90 550 90 26 1 72-8 102-19zm2111-3440c1023-44 1884-213 2462-486l113-53-7-33c-3-18-8-35-10-37-2-3-236 1-521 7-993 24-1271 26-1708 11-541-18-1128-18-1249-1-377 56-588 181-734 437-32 55-41 79-32 84 12 8 246 32 491 51 356 28 815 36 1195 20z"/></g><text x="3250" y="8250" style="font-size:3000px;fill:#fff;text-anchor:middle">{text}</text></svg>',checker:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 16 16"><pattern id="p" x="0" y="0" width="16" height="16" patternUnits="userSpaceOnUse"><rect fill="{color}" x="0" width="8" height="8" y="0"/><rect fill="{color}" x="8" width="8" height="8" y="8"/></pattern><rect x="0" y="0" width="16" height="16" fill="{secondaryColor}"/><rect x="0" y="0" width="16" height="16" fill="url(#p)"/></svg>',"checker-rotated":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(16 * {scale})" height="calc(16 * {scale})" viewBox="0 0 60 60"><rect width="60" height="60" fill="{secondaryColor}"/><rect width="42.42" height="42.42" transform="translate(30 0) rotate(45)" fill="{color}"/></svg>',"zig-zag":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120"/></svg>',"zig-zag-vertical":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(15 * {scale})" height="calc(15 * {scale})" viewBox="0 0 120 120"><rect x="0" y="0" width="120" height="120" fill="{secondaryColor}"/><polygon fill="{color}" points="120 0 120 60 90 30 60 0 0 0 0 0 60 60 0 120 60 120 90 90 120 60 120 0"/></svg>',"circles-spaced":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="2" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',circles:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(7 * {scale})" height="calc(7 * {scale})" viewBox="0 0 20 20"><defs><pattern id="p" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="6" stroke="none" fill="{color}"/></pattern></defs><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><rect x="0" y="0" width="100" height="100" fill="url(#p)"/></svg>',"diagonal-lines-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-lines-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"diagonal-stripes-up":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"diagonal-stripes-down":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(14 * {scale})" height="calc(14 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(45 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}" transform="rotate(-45 3 3)"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-lines":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(18 * {scale})" height="calc(18 * {scale})" viewBox="0 0 6 6"><rect x="0" y="0" width="6" height="6" fill="{secondaryColor}"/><g transform="rotate(90 3 3)" fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g><g fill="{color}"><path d="M5 0h1L0 6V5zM6 5v1H5z"/></g></svg>',"rotated-grid-stripes":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(20 * {scale})" height="calc(20 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="40" height="40" fill="{secondaryColor}"/><g transform="rotate(90 20 20)" fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g><g fill="{color}"><path d="M0 40L40 0H20L0 20M40 40V20L20 40"/></g></svg>',"x-fill":'<svg xmlns="http://www.w3.org/2000/svg" width="calc(40 * {scale})" height="calc(40 * {scale})" viewBox="0 0 40 40"><rect x="0" y="0" width="45.3" height="45.3" fill="{secondaryColor}"/><g fill="{color}"><path d="M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z"/></g></svg>',dots:'<svg xmlns="http://www.w3.org/2000/svg" width="calc(13 * {scale})" height="calc(13 * {scale})" viewBox="0 0 20 20"><rect x="0" y="0" width="20" height="20" fill="{secondaryColor}"/><g fill="{color}"><circle cx="3" cy="3" r="3"/><circle cx="13" cy="13" r="3"/></g></svg>'},wR=4,Js=function(e){var t=document.createElement("span");return t.innerText=e,t.classList.add("tooltiptext"),navigator.userAgent.indexOf("Edg")!=-1?t.classList.add("edge"):navigator.userAgent.indexOf("Chrome")!=-1?t.classList.add("chrome"):navigator.userAgent.indexOf("Safari")!=-1?t.classList.add("safari"):navigator.userAgent.indexOf("Firefox")!=-1&&t.classList.add("firefox"),navigator.userAgent.indexOf("Windows")!=-1?t.classList.add("win"):navigator.userAgent.indexOf("Macintosh")!=-1&&t.classList.add("mac"),t},aa=function(e,t,n){n===void 0&&(n=!1);function r(o){var i=t.getBoundingClientRect(),c=e.getBoundingClientRect(),l=i.x+c.width>window.innerWidth?window.innerWidth-c.width:i.x,c=i.y+i.height+c.height+wR>window.innerHeight?i.y-c.height-wR:i.y+i.height+wR;n&&t.parentElement&&(i=t.parentElement?t.parentElement.getBoundingClientRect():null,e.style.position="absolute",l-=i.x,c-=i.y),e.style.transform="translate(".concat(l,"px, ").concat(c,"px)"),e.style.display="block"}t.addEventListener("mouseover",r),t.addEventListener("focusin",r),t.addEventListener("keydown",function(o){o.key!=="Escape"&&o.key!=="Esc"||e.style.display!=="block"||(o.stopPropagation(),e.style.display="none")})},Gve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wve=(function(e){e.TopLeft="top-left",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomRight="bottom-right",e.NonFixed="non-fixed"}(Iu=Iu||{}),function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.position=Iu.NonFixed,n}return Gve(t,e),t}(Hi)),Kve=function(){function e(t){var n;t&&(n=void 0,3<=(n=typeof t=="string"?this.getRBGA(t):t).length)&&(this.r=n[0],this.g=n[1],this.b=n[2],3<n.length)&&(this.a=n[3])}return e.prototype.getLuminosity=function(){for(var t=[this.r,this.g,this.b],n=[],r=0;r<t.length;r++){var o=t[r]/255;n[r]=o<=.03928?o/12.92:Math.pow((.055+o)/1.055,2.4)}return .2126*n[0]+.7152*n[1]+.0722*n[2]},e.prototype.getRBGA=function(r){var n=document.createElement("canvas").getContext("2d"),r=(n.globalAlpha=1,n.fillStyle=r,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data);return[r[0],r[1],r[2],r[3]]},e}(),Hc=(function(e){e.light="light",e.dark="dark",e.auto="auto"}(Qs=Qs||{}),Map),Cm=function(){function e(){this.listeners=new Hc}return e.prototype._addEventListener=function(t,n,r){this.listeners.has(t)||this.listeners.set(t,new Hc),this.listeners.get(t).set(n,r)},e.prototype._removeEventListener=function(t,n){this.listeners.has(t)&&this.listeners.get(t).delete(n)},e.prototype._invokeEvent=function(t,n){var r=this;this.listeners.has(t)&&this.listeners.get(t).forEach(function(o,i){o&&r._removeEventListener(t,i);try{i(n)}catch(l){console.error(l)}})},e}(),Yve=Object.freeze({__proto__:null,EventEmitter:Cm}),Zve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yc=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._onStyleChange=function(){n._map.getStyle().style.toLowerCase().startsWith("blank")?n._observer||(n._onBackgroundChange(),n._observer=new MutationObserver(n._onBackgroundChange),n._observer.observe(n._map.getMapContainer(),{attributes:!0,attributeFilter:["style"]})):(n._observer&&(n._observer.disconnect(),delete n._observer),n._map.styles.getThemeAsync(n._map.getStyle()).then(function(r){n._setTheme(r)}))},n._onBackgroundChange=function(){var r=new Kve(n._map.getMapContainer().style.backgroundColor).getLuminosity(),r=isNaN(r)||.5<r?Qs.light:Qs.dark;n._setTheme(r)},n}return Zve(t,e),t.prototype.onRemove=function(){this._container&&(this._container.remove(),delete this._container),this._map&&(this._map.events.remove("stylechanged",this._onStyleChange),delete this._map),this._observer&&(this._observer.disconnect(),delete this._observer),delete this._theme},t.prototype.buildContainer=function(n,r,o,i){return this._map=n,this._container=document.createElement(i||"div"),this._container.classList.add("azure-maps-control-container"),typeof o=="string"&&this._container.setAttribute("aria-label",o),r.toLowerCase()===Qs.auto?this._map&&this._map.events.add("stylechanged",this._onStyleChange):this._container.classList.add(r),this._container},t.prototype._setTheme=function(n){this._theme!==n&&(this._container.classList.remove(this._theme),this._container.classList.add(n),this._theme=n)},t.activateClickDelay=100,t}(Cm),Xve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qve=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.rotationDegreesDelta=15,n.style=Qs.light,n.inverted=!1,n}return Xve(t,e),t}(Hi),Jve=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kW=function(e){function t(n){var r=e.call(this)||this;return r.hasMouse=!1,r.hasFocus=!1,r.options=new Qve().merge(n),r}return Jve(t,e),t.prototype.onAdd=function(n,r){function o(g){g?(l.classList.add("in-use"),f.setAttribute("aria-hidden","false"),f.classList.remove("hidden-accessible-element")):(l.classList.remove("in-use"),f.setAttribute("aria-hidden","true"),f.classList.add("hidden-accessible-element"))}var i=this,l=this.buildContainer(n,this.options.style,"Rotation Control"),c=this.constructRotationButton(n),f=this.constructRotationGrid(n,r),p=Js("Reset to Default Rotation");return l.addEventListener("mouseover",function(g){i.lastActiveTime=i.lastActiveTime||g.timeStamp,i.hasMouse=!0,o(!0)}),l.addEventListener("focusin",function(g){i.lastActiveTime=i.lastActiveTime||g.timeStamp,i.hasFocus=!0,o(!0)}),l.addEventListener("mouseleave",function(){i.hasMouse=!1,i.hasFocus||(delete i.lastActiveTime,o(!1))}),l.addEventListener("focusout",function(g){g.relatedTarget instanceof Node&&l.contains(g.relatedTarget)||(i.hasFocus=!1,i.hasMouse)||(delete i.lastActiveTime,o(!1))}),f.addEventListener("keydown",function(g){g.key!=="Escape"&&g.key!=="Esc"||(g.stopPropagation(),c.focus(),o(!1))}),c.addEventListener("keydown",function(g){g.key!=="Escape"&&g.key!=="Esc"||l==null||!l.classList.contains("in-use")||(p==null?void 0:p.style.display)!=="none"||(g.stopPropagation(),o(!1))}),r&&t.InvertOrderPositions.includes(r.position)?(l.appendChild(f),l.appendChild(c),l.appendChild(p),aa(p,c)):(l.appendChild(c),l.appendChild(p),aa(p,c),l.appendChild(f)),l},t.prototype.constructRotationGrid=function(l,r){var o=document.createElement("div"),i=(o.classList.add("sub-container"),o.classList.add("hidden-accessible-element"),o.setAttribute("aria-hidden","true"),this.constructRightRotationButton(l)),l=this.constructLeftRotationButton(l),c=Js("Rotate Left"),f=Js("Rotate Right");return r&&t.InvertOrderPositions.includes(r.position)?(o.appendChild(i),o.appendChild(f),aa(f,i),o.appendChild(l),o.appendChild(c),aa(c,l)):(o.appendChild(l),o.appendChild(c),aa(c,l),o.appendChild(i),o.appendChild(f),aa(f,i)),o},t.prototype.constructRotationButton=function(n){var r=this,o=document.createElement("button"),i=(o.classList.add("azure-maps-control-button"),o.classList.add("rotation"),o.setAttribute("aria-label","Reset to Default Rotation"),o.setAttribute("alt","Reset to Default Rotation"),o.setAttribute("type","button"),document.createElement("div"));return o.appendChild(i),o.addEventListener("click",function(l){l.timeStamp-r.lastActiveTime>Yc.activateClickDelay&&n.setCamera({bearing:t.DefaultRotation},!0)}),n.events.add("rotate",function(l){i.style.transform="rotate(".concat(-l.map.getCamera().bearing,"deg)")}),o},t.prototype.constructRightRotationButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("rotation-right"),o.setAttribute("aria-label","Rotate Right"),o.setAttribute("alt","Rotate Right"),o.setAttribute("type","button"),o.addEventListener("click",function(){n.setCamera({bearing:n.getCamera().bearing-(r.options.inverted?-1:1)*r.options.rotationDegreesDelta,duration:t.RotationDuration,type:"ease"},!0)}),o},t.prototype.constructLeftRotationButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("rotation-left"),o.setAttribute("aria-label","Rotate Left"),o.setAttribute("alt","Rotate Left"),o.setAttribute("type","button"),o.addEventListener("click",function(){n.setCamera({bearing:n.getCamera().bearing+(r.options.inverted?-1:1)*r.options.rotationDegreesDelta,duration:t.RotationDuration,type:"ease"},!0)}),o},t.DefaultRotation=0,t.RotationDuration=100,t.InvertOrderPositions=[Iu.BottomRight,Iu.TopRight],t}(Yc),e_e=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),t_e=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.pitchDegreesDelta=10,n.style=Qs.light,n.inverted=!1,n}return e_e(t,e),t}(Hi),n_e=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),r_e=function(e){function t(n){var r=e.call(this)||this;return r.container=null,r.map=null,r.pitchButton=null,r.pitchIncrementButton=null,r.pitchDecrementButton=null,r.hasMouse=!1,r.hasFocus=!1,r.pitchChanged=function(o){return r.updatePitchButtonsState()},r.updatePitchButtonsState=function(){var o=r.map.getCamera().pitch<=0,i=60<=r.map.getCamera().pitch;r.hasFocus&&r.pitchButton&&(o||i)&&r.pitchButton.focus(),r.options.inverted?(r.pitchIncrementButton&&r.pitchIncrementButton.disabled!=o&&(r.pitchIncrementButton.disabled=o),r.pitchDecrementButton&&r.pitchDecrementButton.disabled!=i&&(r.pitchDecrementButton.disabled=i)):(r.pitchIncrementButton&&r.pitchIncrementButton.disabled!=i&&(r.pitchIncrementButton.disabled=i),r.pitchDecrementButton&&r.pitchDecrementButton.disabled!=o&&(r.pitchDecrementButton.disabled=o))},r.options=new t_e().merge(n),r}return n_e(t,e),t.prototype.onAdd=function(n,r){function o(g){g?(l.classList.add("in-use"),f.setAttribute("aria-hidden","false"),f.classList.remove("hidden-accessible-element")):(l.classList.remove("in-use"),f.setAttribute("aria-hidden","true"),f.classList.add("hidden-accessible-element"))}var i=this,l=this.buildContainer(n,this.options.style,"Pitch Control"),c=this.constructPitchButton(n),f=this.constructPitchGrid(n,r),p=Js("Reset to Default Pitch");return l.addEventListener("mouseover",function(g){i.lastActiveTime=i.lastActiveTime||g.timeStamp,i.hasMouse=!0,o(!0)}),l.addEventListener("focusin",function(g){i.lastActiveTime=i.lastActiveTime||g.timeStamp,i.hasFocus=!0,o(!0)}),l.addEventListener("mouseleave",function(){i.hasMouse=!1,i.hasFocus||(delete i.lastActiveTime,o(!1))}),l.addEventListener("focusout",function(g){g.relatedTarget instanceof Node&&l.contains(g.relatedTarget)||(i.hasFocus=!1,i.hasMouse)||(delete i.lastActiveTime,o(!1))}),f.addEventListener("keydown",function(g){g.key!=="Escape"&&g.key!=="Esc"||(g.stopPropagation(),c.focus(),o(!1))}),c.addEventListener("keydown",function(g){g.key!=="Escape"&&g.key!=="Esc"||l==null||!l.classList.contains("in-use")||(p==null?void 0:p.style.display)!=="none"||(g.stopPropagation(),o(!1))}),r&&t.INVERT_ORDER_POSITIONS.includes(r.position)?(l.appendChild(f),l.appendChild(c),l.appendChild(p),aa(p,l)):(l.appendChild(c),l.appendChild(p),aa(p,l),l.appendChild(f)),this.map=n,this.container=l,this.pitchButton=c,n.events.add("pitch",this.pitchChanged),this.updatePitchButtonsState(),l},t.prototype.onRemove=function(){this.container&&(this.container.remove(),this.container=null,this.pitchButton=null,this.pitchIncrementButton=null,this.pitchDecrementButton=null),this.map&&(this.map.events.remove("pitch",this.pitchChanged),this.map=null)},t.prototype.constructPitchGrid=function(i,r){var o=document.createElement("div"),i=(o.classList.add("sub-container"),o.classList.add("hidden-accessible-element"),o.setAttribute("aria-hidden","true"),this.pitchIncrementButton=this.constructPitchIncrementButton(i),this.pitchDecrementButton=this.constructPitchDecrementButton(i),Js("Increase Pitch")),l=Js("Decrease Pitch");return r&&t.INVERT_ORDER_POSITIONS.includes(r.position)?(o.appendChild(this.pitchDecrementButton),o.appendChild(l),aa(l,this.pitchDecrementButton),o.appendChild(this.pitchIncrementButton),o.appendChild(i),aa(i,this.pitchIncrementButton)):(o.appendChild(this.pitchIncrementButton),o.appendChild(i),aa(i,this.pitchIncrementButton),o.appendChild(this.pitchDecrementButton),o.appendChild(l),aa(l,this.pitchDecrementButton)),o},t.prototype.constructPitchButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch"),o.setAttribute("aria-label","Reset to Default Pitch"),o.setAttribute("alt","Reset to Default Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){event.timeStamp-r.lastActiveTime>Yc.activateClickDelay&&n.setCamera({pitch:t.DEFAULT_PITCH},!0)}),o},t.prototype.constructPitchDecrementButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch-down"),o.setAttribute("aria-label","Decrease Pitch"),o.setAttribute("alt","Decrease Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){n.setCamera({pitch:n.getCamera().pitch-(r.options.inverted?-1:1)*r.options.pitchDegreesDelta,duration:t.PITCH_DURATION_MS,type:"ease"},!0)}),o},t.prototype.constructPitchIncrementButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("pitch-up"),o.setAttribute("aria-label","Increase Pitch"),o.setAttribute("alt","Increase Pitch"),o.setAttribute("type","button"),o.addEventListener("click",function(){n.setCamera({pitch:n.getCamera().pitch+(r.options.inverted?-1:1)*r.options.pitchDegreesDelta,duration:t.PITCH_DURATION_MS,type:"ease"},!0)}),o},t.PITCH_DURATION_MS=100,t.DEFAULT_PITCH=0,t.INVERT_ORDER_POSITIONS=[Iu.BottomRight,Iu.TopRight],t}(Yc),o_e=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),i_e=function(e){function t(n){var r=e.call(this)||this;return r.map=null,r.control=new Pu.ScaleControl({maxWidth:n==null?void 0:n.maxWidth,unit:n==null?void 0:n.unit}),r}return o_e(t,e),t.prototype.onAdd=function(n,r){this.map=n,(o=(o=this.map)==null?void 0:o._getMap())!=null&&o.addControl(this.control);var o=this.buildContainer(n,Qs.auto,"Scale Bar");return o.appendChild((n=this.control)==null?void 0:n._container),o},t.prototype.onRemove=function(){var n;e.prototype.onRemove.call(this),(n=(n=this.map)==null?void 0:n._getMap())!=null&&n.removeControl(this.control),this.map=null},t.prototype.setUnit=function(n){var r;(r=this.control)!=null&&r.setUnit(n)},t}(Yc);function a_e(){this.__data__=[],this.size=0}var s_e=a_e;function l_e(e,t){return e===t||e!=e&&t!=t}var sE=l_e,u_e=sE;function c_e(e,t){for(var n=e.length;n--;)if(u_e(e[n][0],t))return n;return-1}var OA=c_e,d_e=OA,h_e=Array.prototype,f_e=h_e.splice;function p_e(n){var t=this.__data__,n=d_e(t,n);return!(n<0||(n==t.length-1?t.pop():f_e.call(t,n,1),--this.size,0))}var m_e=OA;function g_e(n){var t=this.__data__,n=m_e(t,n);return n<0?void 0:t[n][1]}var y_e=OA;function v_e(e){return-1<y_e(this.__data__,e)}var __e=OA;function b_e(e,t){var n=this.__data__,r=__e(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var w_e=s_e,x_e=p_e,C_e=g_e,S_e=v_e,E_e=b_e;function uw(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uw.prototype.clear=w_e,uw.prototype.delete=x_e,uw.prototype.get=C_e,uw.prototype.has=S_e,uw.prototype.set=E_e;var DA=uw,T_e=DA;function I_e(){this.__data__=new T_e,this.size=0}var k_e=I_e;function P_e(n){var t=this.__data__,n=t.delete(n);return this.size=t.size,n}var A_e=P_e;function M_e(e){return this.__data__.get(e)}var R_e=M_e;function O_e(e){return this.__data__.has(e)}var D_e=O_e,L_e=typeof wT=="object"&&wT&&wT.Object===Object&&wT,PW=L_e,N_e=PW,F_e=typeof self=="object"&&self&&self.Object===Object&&self,z_e=N_e||F_e||Function("return this")(),Kf=z_e,B_e=Kf.Symbol,p_=B_e,IH=p_,AW=Object.prototype,U_e=AW.hasOwnProperty,j_e=AW.toString,mC=IH?IH.toStringTag:void 0;function $_e(e){var t=U_e.call(e,mC),n=e[mC];try{var r=!(e[mC]=void 0)}catch{}var o=j_e.call(e);return r&&(t?e[mC]=n:delete e[mC]),o}var H_e=$_e,V_e=Object.prototype,q_e=V_e.toString;function G_e(e){return q_e.call(e)}var W_e=H_e,K_e=G_e,Y_e="[object Null]",Z_e="[object Undefined]",kH=p_?p_.toStringTag:void 0;function X_e(e){return e==null?e===void 0?Z_e:Y_e:(kH&&kH in Object(e)?W_e:K_e)(e)}var lE=X_e;function Q_e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var py=Q_e,J_e=lE,ebe=py,tbe="[object AsyncFunction]",nbe="[object Function]",rbe="[object GeneratorFunction]",obe="[object Proxy]";function ibe(e){return!!ebe(e)&&((e=J_e(e))==nbe||e==rbe||e==tbe||e==obe)}var gz=ibe,abe=Kf["__core-js_shared__"],xR=abe,PH=function(){var e=/[^.]+$/.exec(xR&&xR.keys&&xR.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function sbe(e){return!!PH&&PH in e}var lbe=sbe,ube=Function.prototype,cbe=ube.toString;function dbe(e){if(e!=null){try{return cbe.call(e)}catch{}try{return e+""}catch{}}return""}var MW=dbe,hbe=gz,fbe=lbe,pbe=py,mbe=MW,gbe=/[\\^$.*+?()[\]{}|]/g,ybe=/^\[object .+?Constructor\]$/,vbe=Function.prototype,_be=Object.prototype,bbe=vbe.toString,wbe=_be.hasOwnProperty,xbe=RegExp("^"+bbe.call(wbe).replace(gbe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cbe(e){return!(!pbe(e)||fbe(e))&&(hbe(e)?xbe:ybe).test(mbe(e))}function Sbe(e,t){return e==null?void 0:e[t]}var Ebe=Cbe,Tbe=Sbe;function Ibe(e,t){return e=Tbe(e,t),Ebe(e)?e:void 0}var k_=Ibe,kbe=k_(Kf,"Map"),yz=kbe,Pbe=k_(Object,"create"),LA=Pbe,AH=LA;function Abe(){this.__data__=AH?AH(null):{},this.size=0}var Mbe=Abe;function Rbe(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e}var Obe=Rbe,Dbe=LA,Lbe="__lodash_hash_undefined__",Nbe=Object.prototype,Fbe=Nbe.hasOwnProperty;function zbe(e){var t,n=this.__data__;return Dbe?(t=n[e])===Lbe?void 0:t:Fbe.call(n,e)?n[e]:void 0}var Bbe=zbe,Ube=LA,jbe=Object.prototype,$be=jbe.hasOwnProperty;function Hbe(e){var t=this.__data__;return Ube?t[e]!==void 0:$be.call(t,e)}var Vbe=LA,qbe="__lodash_hash_undefined__";function Gbe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Vbe&&t===void 0?qbe:t,this}var Wbe=Mbe,Kbe=Obe,Ybe=Bbe,Zbe=Hbe,Xbe=Gbe;function cw(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cw.prototype.clear=Wbe,cw.prototype.delete=Kbe,cw.prototype.get=Ybe,cw.prototype.has=Zbe,cw.prototype.set=Xbe;var MH=cw,Qbe=DA,Jbe=yz;function ewe(){this.size=0,this.__data__={hash:new MH,map:new(Jbe||Qbe),string:new MH}}function twe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var nwe=twe;function NA(e,t){return e=e.__data__,nwe(t)?e[typeof t=="string"?"string":"hash"]:e.map}var rwe=NA;function owe(e){return e=rwe(this,e).delete(e),this.size-=e?1:0,e}var iwe=NA;function awe(e){return iwe(this,e).get(e)}var swe=NA;function lwe(e){return swe(this,e).has(e)}var uwe=NA;function cwe(e,t){var n=uwe(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var dwe=ewe,hwe=owe,fwe=awe,pwe=lwe,mwe=cwe;function dw(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}dw.prototype.clear=dwe,dw.prototype.delete=hwe,dw.prototype.get=fwe,dw.prototype.has=pwe,dw.prototype.set=mwe;var RW=dw,gwe=DA,ywe=yz,vwe=RW,_we=200;function bwe(e,t){var n=this.__data__;if(n instanceof gwe){var r=n.__data__;if(!ywe||r.length<_we-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new vwe(r)}return n.set(e,t),this.size=n.size,this}var wwe=DA,xwe=k_e,Cwe=A_e,Swe=R_e,Ewe=D_e,Twe=bwe;function hw(e){e=this.__data__=new wwe(e),this.size=e.size}hw.prototype.clear=xwe,hw.prototype.delete=Cwe,hw.prototype.get=Swe,hw.prototype.has=Ewe,hw.prototype.set=Twe;var vz=hw;function Iwe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var kwe=Iwe,Pwe=k_,Awe=function(){try{var e=Pwe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),OW=Awe,RH=OW;function Mwe(e,t,n){t=="__proto__"&&RH?RH(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var _z=Mwe,Rwe=_z,Owe=sE,Dwe=Object.prototype,Lwe=Dwe.hasOwnProperty;function Nwe(e,t,n){var r=e[t];Lwe.call(e,t)&&Owe(r,n)&&(n!==void 0||t in e)||Rwe(e,t,n)}var DW=Nwe,Fwe=DW,zwe=_z;function Bwe(e,t,n,r){for(var o=!n,i=(n=n||{},-1),l=t.length;++i<l;){var c=t[i],f=r?r(n[c],e[c],c,n,e):void 0;f===void 0&&(f=e[c]),(o?zwe:Fwe)(n,c,f)}return n}var uE=Bwe;function Uwe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var jwe=Uwe;function $we(e){return e!=null&&typeof e=="object"}var Sm=$we,Hwe=lE,Vwe=Sm,qwe="[object Arguments]";function Gwe(e){return Vwe(e)&&Hwe(e)==qwe}var OH=Gwe,Wwe=Sm,LW=Object.prototype,Kwe=LW.hasOwnProperty,Ywe=LW.propertyIsEnumerable,Zwe=OH(function(){return arguments}())?OH:function(e){return Wwe(e)&&Kwe.call(e,"callee")&&!Ywe.call(e,"callee")},NW=Zwe,Xwe=Array.isArray,cE=Xwe,xT={exports:{}};function Qwe(){return!1}var Jwe=Qwe,FA=(xT.exports,function(e,r){var r=r&&!r.nodeType&&r,n=r&&e&&!e.nodeType&&e,n=n&&n.exports===r?Kf.Buffer:void 0,r=n?n.isBuffer:void 0;e.exports=r||Jwe}(xT,xT.exports),xT.exports),exe=9007199254740991,txe=/^(?:0|[1-9]\d*)$/;function nxe(e,t){var n=typeof e;return!!(t=t??exe)&&(n=="number"||n!="symbol"&&txe.test(e))&&-1<e&&e%1==0&&e<t}var FW=nxe,rxe=9007199254740991;function oxe(e){return typeof e=="number"&&-1<e&&e%1==0&&e<=rxe}var zW=oxe,ixe=lE,axe=zW,sxe=Sm,lxe="[object Arguments]",uxe="[object Array]",cxe="[object Boolean]",dxe="[object Date]",hxe="[object Error]",fxe="[object Function]",pxe="[object Map]",mxe="[object Number]",gxe="[object Object]",yxe="[object RegExp]",vxe="[object Set]",_xe="[object String]",bxe="[object WeakMap]",wxe="[object ArrayBuffer]",xxe="[object DataView]",Cxe="[object Float32Array]",Sxe="[object Float64Array]",Exe="[object Int8Array]",Txe="[object Int16Array]",Ixe="[object Int32Array]",kxe="[object Uint8Array]",Pxe="[object Uint8ClampedArray]",Axe="[object Uint16Array]",Mxe="[object Uint32Array]",ra={};function Rxe(e){return sxe(e)&&axe(e.length)&&!!ra[ixe(e)]}ra[Cxe]=ra[Sxe]=ra[Exe]=ra[Txe]=ra[Ixe]=ra[kxe]=ra[Pxe]=ra[Axe]=ra[Mxe]=!0,ra[lxe]=ra[uxe]=ra[wxe]=ra[cxe]=ra[xxe]=ra[dxe]=ra[hxe]=ra[fxe]=ra[pxe]=ra[mxe]=ra[gxe]=ra[yxe]=ra[vxe]=ra[_xe]=ra[bxe]=!1;var Oxe=Rxe;function Dxe(e){return function(t){return e(t)}}var bz=Dxe,CT={exports:{}},Sx=(CT.exports,function(e,o){var o=o&&!o.nodeType&&o,n=o&&e&&!e.nodeType&&e,r=n&&n.exports===o&&PW.process,o=function(){try{var i=n&&n.require&&n.require("util").types;return i||r&&r.binding&&r.binding("util")}catch{}}();e.exports=o}(CT,CT.exports),CT.exports),Lxe=Oxe,Nxe=bz,DH=Sx&&Sx.isTypedArray,Fxe=DH?Nxe(DH):Lxe,wz=Fxe,zxe=jwe,Bxe=NW,Uxe=cE,jxe=FA,$xe=FW,Hxe=wz,Vxe=Object.prototype,qxe=Vxe.hasOwnProperty;function Gxe(e,t){var n,r=Uxe(e),o=!r&&Bxe(e),i=!r&&!o&&jxe(e),l=!r&&!o&&!i&&Hxe(e),c=r||o||i||l,f=c?zxe(e.length,String):[],p=f.length;for(n in e)!t&&!qxe.call(e,n)||c&&(n=="length"||i&&(n=="offset"||n=="parent")||l&&(n=="buffer"||n=="byteLength"||n=="byteOffset")||$xe(n,p))||f.push(n);return f}var BW=Gxe,Wxe=Object.prototype;function Kxe(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||Wxe)}var xz=Kxe;function Yxe(e,t){return function(n){return e(t(n))}}var UW=Yxe,Zxe=UW(Object.keys,Object),Xxe=xz,Qxe=Zxe,Jxe=Object.prototype,e0e=Jxe.hasOwnProperty;function t0e(e){if(!Xxe(e))return Qxe(e);var t,n=[];for(t in Object(e))e0e.call(e,t)&&t!="constructor"&&n.push(t);return n}var n0e=gz,r0e=zW;function o0e(e){return e!=null&&r0e(e.length)&&!n0e(e)}var zA=o0e,i0e=BW,a0e=t0e,s0e=zA;function l0e(e){return(s0e(e)?i0e:a0e)(e)}var Cz=l0e,u0e=uE,c0e=Cz;function d0e(e,t){return e&&u0e(t,c0e(t),e)}var h0e=d0e;function f0e(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var p0e=py,m0e=xz,g0e=f0e,y0e=Object.prototype,v0e=y0e.hasOwnProperty;function _0e(e){if(!p0e(e))return g0e(e);var t,n=m0e(e),r=[];for(t in e)(t!="constructor"||!n&&v0e.call(e,t))&&r.push(t);return r}var b0e=BW,w0e=_0e,x0e=zA;function C0e(e){return x0e(e)?b0e(e,!0):w0e(e)}var dE=C0e,S0e=uE,E0e=dE;function T0e(e,t){return e&&S0e(t,E0e(t),e)}var I0e=T0e,ST={exports:{}},jW=(ST.exports,function(e,n){var n=n&&!n.nodeType&&n,r=n&&e&&!e.nodeType&&e,r=r&&r.exports===n?Kf.Buffer:void 0,o=r?r.allocUnsafe:void 0;e.exports=function(i,l){return l?i.slice():(l=i.length,l=o?o(l):new i.constructor(l),i.copy(l),l)}}(ST,ST.exports),ST.exports);function k0e(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t}var $W=k0e;function P0e(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var l=e[n];t(l,n,e)&&(i[o++]=l)}return i}function A0e(){return[]}var HW=A0e,M0e=P0e,R0e=HW,O0e=Object.prototype,D0e=O0e.propertyIsEnumerable,LH=Object.getOwnPropertySymbols,L0e=LH?function(e){return e==null?[]:(e=Object(e),M0e(LH(e),function(t){return D0e.call(e,t)}))}:R0e,Sz=L0e,N0e=uE,F0e=Sz;function z0e(e,t){return N0e(e,F0e(e),t)}var B0e=z0e;function U0e(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var VW=U0e,j0e=UW(Object.getPrototypeOf,Object),Ez=j0e,$0e=VW,H0e=Ez,V0e=Sz,q0e=HW,G0e=Object.getOwnPropertySymbols,qW=G0e?function(e){for(var t=[];e;)$0e(t,V0e(e)),e=H0e(e);return t}:q0e,W0e=uE,K0e=qW;function Y0e(e,t){return W0e(e,K0e(e),t)}var Z0e=Y0e,X0e=VW,Q0e=cE;function GW(e,t,n){return t=t(e),Q0e(e)?t:X0e(t,n(e))}var J0e=GW,eCe=Sz,tCe=Cz;function nCe(e){return J0e(e,tCe,eCe)}var WW=nCe,rCe=GW,oCe=qW,iCe=dE;function aCe(e){return rCe(e,iCe,oCe)}var sCe=aCe,lCe=k_(Kf,"DataView"),uCe=lCe,cCe=k_(Kf,"Promise"),dCe=cCe,hCe=k_(Kf,"Set"),fCe=hCe,pCe=k_(Kf,"WeakMap"),dL=uCe,hL=yz,fL=dCe,pL=fCe,mL=pCe,KW=lE,Wx=MW,NH="[object Map]",mCe="[object Object]",FH="[object Promise]",zH="[object Set]",BH="[object WeakMap]",UH="[object DataView]",gCe=Wx(dL),yCe=Wx(hL),vCe=Wx(fL),_Ce=Wx(pL),bCe=Wx(mL),rv=KW,BA=rv=dL&&rv(new dL(new ArrayBuffer(1)))!=UH||hL&&rv(new hL)!=NH||fL&&rv(fL.resolve())!=FH||pL&&rv(new pL)!=zH||mL&&rv(new mL)!=BH?function(n){var t=KW(n),n=t==mCe?n.constructor:void 0,n=n?Wx(n):"";if(n)switch(n){case gCe:return UH;case yCe:return NH;case vCe:return FH;case _Ce:return zH;case bCe:return BH}return t}:rv,wCe=Object.prototype,xCe=wCe.hasOwnProperty;function CCe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&xCe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var SCe=CCe,ECe=Kf.Uint8Array,YW=ECe,jH=YW;function TCe(e){var t=new e.constructor(e.byteLength);return new jH(t).set(new jH(e)),t}var Tz=TCe,ICe=Tz;function kCe(e,t){return t=t?ICe(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength)}var PCe=kCe,ACe=/\w*$/;function MCe(e){var t=new e.constructor(e.source,ACe.exec(e));return t.lastIndex=e.lastIndex,t}var RCe=MCe,$H=p_?p_.prototype:void 0,HH=$H?$H.valueOf:void 0;function OCe(e){return HH?Object(HH.call(e)):{}}var DCe=Tz;function LCe(e,t){return t=t?DCe(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)}var ZW=LCe,NCe=Tz,FCe=PCe,zCe=RCe,BCe=OCe,UCe=ZW,jCe="[object Boolean]",$Ce="[object Date]",HCe="[object Map]",VCe="[object Number]",qCe="[object RegExp]",GCe="[object Set]",WCe="[object String]",KCe="[object Symbol]",YCe="[object ArrayBuffer]",ZCe="[object DataView]",XCe="[object Float32Array]",QCe="[object Float64Array]",JCe="[object Int8Array]",e1e="[object Int16Array]",t1e="[object Int32Array]",n1e="[object Uint8Array]",r1e="[object Uint8ClampedArray]",o1e="[object Uint16Array]",i1e="[object Uint32Array]";function a1e(e,t,n){var r=e.constructor;switch(t){case YCe:return NCe(e);case jCe:case $Ce:return new r(+e);case ZCe:return FCe(e,n);case XCe:case QCe:case JCe:case e1e:case t1e:case n1e:case r1e:case o1e:case i1e:return UCe(e,n);case HCe:return new r;case VCe:case WCe:return new r(e);case qCe:return zCe(e);case GCe:return new r;case KCe:return BCe(e)}}var s1e=a1e,l1e=py,VH=Object.create,u1e=function(){function e(){}return function(t){return l1e(t)?VH?VH(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),c1e=u1e,d1e=Ez,h1e=xz;function f1e(e){return typeof e.constructor!="function"||h1e(e)?{}:c1e(d1e(e))}var XW=f1e,p1e=BA,m1e=Sm,g1e="[object Map]";function y1e(e){return m1e(e)&&p1e(e)==g1e}var v1e=y1e,_1e=bz,qH=Sx&&Sx.isMap,b1e=qH?_1e(qH):v1e,w1e=b1e,x1e=BA,C1e=Sm,S1e="[object Set]";function E1e(e){return C1e(e)&&x1e(e)==S1e}var T1e=E1e,I1e=bz,GH=Sx&&Sx.isSet,k1e=GH?I1e(GH):T1e,P1e=vz,A1e=kwe,M1e=DW,R1e=h0e,O1e=I0e,D1e=jW,L1e=$W,N1e=B0e,F1e=Z0e,z1e=WW,B1e=sCe,U1e=BA,j1e=SCe,$1e=s1e,H1e=XW,V1e=cE,q1e=FA,G1e=w1e,W1e=py,K1e=k1e,Y1e=Cz,Z1e=dE,X1e=1,Q1e=2,J1e=4,QW="[object Arguments]",eSe="[object Array]",tSe="[object Boolean]",nSe="[object Date]",rSe="[object Error]",JW="[object Function]",oSe="[object GeneratorFunction]",iSe="[object Map]",aSe="[object Number]",e7="[object Object]",sSe="[object RegExp]",lSe="[object Set]",uSe="[object String]",cSe="[object Symbol]",dSe="[object WeakMap]",hSe="[object ArrayBuffer]",fSe="[object DataView]",pSe="[object Float32Array]",mSe="[object Float64Array]",gSe="[object Int8Array]",ySe="[object Int16Array]",vSe="[object Int32Array]",_Se="[object Uint8Array]",bSe="[object Uint8ClampedArray]",wSe="[object Uint16Array]",xSe="[object Uint32Array]",Wi={};function wI(e,t,n,r,o,i){var l,c=t&X1e,f=t&Q1e,p=t&J1e;if((l=n?o?n(e,r,o,i):n(e):l)===void 0){if(!W1e(e))return e;if(r=V1e(e),r){if(l=j1e(e),!c)return L1e(e,l)}else{var g=U1e(e),v=g==JW||g==oSe;if(q1e(e))return D1e(e,c);if(g==e7||g==QW||v&&!o){if(l=f||v?{}:H1e(e),!c)return f?F1e(e,O1e(l,e)):N1e(e,R1e(l,e))}else{if(!Wi[g])return o?e:{};l=$1e(e,g,c)}}if(v=(i=i||new P1e).get(e),v)return v;i.set(e,l),K1e(e)?e.forEach(function(C){l.add(wI(C,t,n,C,e,i))}):G1e(e)&&e.forEach(function(C,T){l.set(T,wI(C,t,n,T,e,i))});var w=r?void 0:(p?f?B1e:z1e:f?Z1e:Y1e)(e);A1e(w||e,function(C,T){w&&(C=e[T=C]),M1e(l,T,wI(C,t,n,T,e,i))})}return l}Wi[QW]=Wi[eSe]=Wi[hSe]=Wi[fSe]=Wi[tSe]=Wi[nSe]=Wi[pSe]=Wi[mSe]=Wi[gSe]=Wi[ySe]=Wi[vSe]=Wi[iSe]=Wi[aSe]=Wi[e7]=Wi[sSe]=Wi[lSe]=Wi[uSe]=Wi[cSe]=Wi[_Se]=Wi[bSe]=Wi[wSe]=Wi[xSe]=!0,Wi[rSe]=Wi[JW]=Wi[dSe]=!1;var t7=wI,CSe=t7,SSe=1,ESe=4;function TSe(e){return CSe(e,SSe|ESe)}var Ka=fy(TSe),ISe=_z,kSe=sE;function PSe(e,t,n){(n===void 0||kSe(e[t],n))&&(n!==void 0||t in e)||ISe(e,t,n)}var n7=PSe;function ASe(e){return function(t,n,r){for(var o=-1,i=Object(t),l=r(t),c=l.length;c--;){var f=l[e?c:++o];if(n(i[f],f,i)===!1)break}return t}}var MSe=ASe(),RSe=MSe,OSe=zA,DSe=Sm;function LSe(e){return DSe(e)&&OSe(e)}var NSe=LSe,FSe=lE,zSe=Ez,BSe=Sm,USe="[object Object]",jSe=Function.prototype,$Se=Object.prototype,r7=jSe.toString,HSe=$Se.hasOwnProperty,VSe=r7.call(Object);function qSe(e){return!(!BSe(e)||FSe(e)!=USe)&&((e=zSe(e))===null||typeof(e=HSe.call(e,"constructor")&&e.constructor)=="function"&&e instanceof e&&r7.call(e)==VSe)}var o7=qSe;function i7(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]}var GSe=uE,WSe=dE;function KSe(e){return GSe(e,WSe(e))}var YSe=n7,ZSe=jW,XSe=ZW,QSe=$W,JSe=XW,WH=NW,KH=cE,eEe=NSe,tEe=FA,nEe=gz,rEe=py,oEe=o7,iEe=wz,YH=i7,aEe=KSe;function sEe(e,t,n,r,o,i,l){var c,f,p,g=YH(e,n),v=YH(t,n),w=l.get(v);w||((t=(w=i?i(g,v,n+"",e,t,l):void 0)===void 0)&&(f=!(c=KH(v))&&tEe(v),p=!c&&!f&&iEe(v),w=v,c||f||p?w=KH(g)?g:eEe(g)?QSe(g):f?ZSe(v,!(t=!1)):p?XSe(v,!(t=!1)):[]:oEe(v)||WH(v)?WH(w=g)?w=aEe(g):rEe(g)&&!nEe(g)||(w=JSe(v)):t=!1),t&&(l.set(v,w),o(w,v,r,i,l),l.delete(v))),YSe(e,n,w)}var lEe=vz,uEe=n7,cEe=RSe,dEe=sEe,hEe=py,fEe=dE,pEe=i7;function a7(e,t,n,r,o){e!==t&&cEe(t,function(i,l){var c;o=o||new lEe,hEe(i)?dEe(e,t,l,n,a7,r,o):(c=r?r(pEe(e,l),i,l+"",e,t,o):void 0,uEe(e,l,c=c===void 0?i:c))},fEe)}var mEe=a7;function gEe(e){return e}var s7=gEe;function yEe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var vEe=yEe,ZH=Math.max;function _Ee(e,t,n){return t=ZH(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=ZH(r.length-t,0),l=Array(i);++o<i;)l[o]=r[t+o];for(var o=-1,c=Array(t+1);++o<t;)c[o]=r[o];return c[t]=n(l),vEe(e,this,c)}}var bEe=_Ee;function wEe(e){return function(){return e}}var xEe=wEe,XH=OW,CEe=XH?function(e,t){return XH(e,"toString",{configurable:!0,enumerable:!1,value:xEe(t),writable:!0})}:s7,SEe=CEe,EEe=800,TEe=16,IEe=Date.now;function kEe(e){var t=0,n=0;return function(){var r=IEe(),o=TEe-(r-n);if(n=r,0<o){if(++t>=EEe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var PEe=kEe(SEe),AEe=s7,MEe=bEe,REe=PEe;function OEe(e,t){return REe(MEe(e,t,AEe),e+"")}var DEe=sE,LEe=zA,NEe=FW,FEe=py;function zEe(e,t,n){var r;return!!FEe(n)&&!!((r=typeof t)=="number"?LEe(n)&&NEe(t,n.length):r=="string"&&t in n)&&DEe(n[t],e)}var BEe=OEe,UEe=zEe;function jEe(e){return BEe(function(t,n){var r=-1,o=n.length,l=1<o?n[o-1]:void 0,i=2<o?n[2]:void 0,l=3<e.length&&typeof l=="function"?(o--,l):void 0;for(i&&UEe(n[0],n[1],i)&&(l=o<3?void 0:l,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,l)}return t})}var $Ee=mEe,HEe=jEe(function(e,t,n){$Ee(e,t,n)}),l7=fy(HEe),VEe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qEe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.layout="icons",n.mapStyles=["road","grayscale_light","grayscale_dark","night","road_shaded_relief"],n.style=Qs.light,n.autoSelectionMode=!0,n}return VEe(t,e),t}(Hi),GEe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),WEe=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},KEe=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},CR=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},YEe=function(e){function t(n){var r=e.call(this)||this;return r.styleOpsGrid=null,r.hasMouse=!1,r.hasFocus=!1,r.styleButtons=new Hc,r.styleIcons=new Hc,r.thumbnailCache={assumedConfiguration:void 0,response:new Hc,blob:new Hc},r.onStyleChange=function(){var o;r.options.autoSelectionMode&&(o=r.map.getStyle().style,r.setSelectedStyle(o))},r.onMapConfigurationChange=function(o){!r.styleOpsGrid||0<r.styleOpsGrid.children.length&&r.thumbnailCache.assumedConfiguration===o||(r.thumbnailCache.assumedConfiguration=o,Array.from(r.styleOpsGrid.children).forEach(function(i){return i.remove()}),r.styleButtons.clear(),r.populateOpsGridFromDefinitions(o))},r.mapToFriendlyStyleName=function(o,i){return i=i.configurations.find(function(l){return l.name===o}),(i==null?void 0:i.displayName)||o},r.options=new qEe().merge(Ka(n)),r}return GEe(t,e),t.prototype.onAdd=function(p,r){function o(g){g?(l.classList.add(t.Css.inUse),c.setAttribute("aria-hidden","false"),c.classList.remove("hidden-accessible-element")):(l.classList.remove(t.Css.inUse),c.setAttribute("aria-hidden","true"),c.classList.add("hidden-accessible-element"))}var i=this,l=(this.map=p,this.buildContainer(p,this.options.style,"Map Style Control")),c=this.buildStyleOpsGrid(),f=(this.styleOpsGrid=c,this.buildCurrStyleBtn()),p=Js("Select Style");return c.classList.add(r&&r.position||"top-right"),l.addEventListener("mouseover",function(){i.hasMouse=!0,o(!0)}),l.addEventListener("focusin",function(){i.hasFocus=!0,o(!0)}),l.addEventListener("mouseleave",function(){i.hasMouse=!1,i.hasFocus||o(!1)}),l.addEventListener("focusout",function(g){g.target===f&&Array.from(c.children).forEach(function(v){return v.removeAttribute("tabIndex")}),g.relatedTarget instanceof Node&&l.contains(g.relatedTarget)||(i.hasFocus=!1,i.hasMouse)||o(!1)}),c.addEventListener("keydown",function(g){g.keyCode===27&&(g.stopPropagation(),f.focus(),Array.from(c.children).forEach(function(v){return v.setAttribute("tabIndex","-1")}),l.classList.contains(t.Css.inUse))&&o(!1)}),f.addEventListener("click",function(g){l.classList.contains(t.Css.inUse)?o(!1):(o(!0),c.firstElementChild&&c.firstElementChild.focus())}),r&&t.InvertOrderPositions.includes(r.position)?(l.appendChild(c),l.appendChild(f),l.appendChild(p),aa(p,f)):(l.appendChild(f),l.appendChild(p),aa(p,f),l.appendChild(c)),l},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.styleOpsGrid=null,this.styleButtons.clear(),this.thumbnailCache.response.clear(),this.thumbnailCache.blob.clear(),this.thumbnailCache.assumedConfiguration=void 0,this.map.events.remove("stylechanged",this.onStyleChange),this.map.events.remove("mapconfigurationchanged",this.onMapConfigurationChange)},t.prototype.setSelectedStyle=function(n){var r,o,i=this;this.styleIcons.has(n)&&(r=this.currStyleImage,o=this.styleIcons.get(n),r.src!==o&&(r.src=o),Object.entries(this.styleButtons).forEach(function(c){var c=CR(c,2),f=c[0];return c[1].setAttribute("aria-current",f===n?"true":"false")}),this.map.styles.definitions().then(function(l){l=i.mapToFriendlyStyleName(n,l),r.alt!==l&&(r.alt=l),r.parentElement.lastChild instanceof Text&&(r.parentElement.lastChild.textContent=l)}))},t.prototype.disableStyle=function(n){n=this.styleButtons[n],n&&n.setAttribute("disabled","true")},t.prototype.enableStyle=function(n){n=this.styleButtons[n],n&&n.removeAttribute("disabled")},t.prototype.buildSelectStyleBtn=function(n,p,o){var i=this,l=document.createElement("button"),c=this.mapToFriendlyStyleName(n,p),f=(l.setAttribute("aria-label",c),l.setAttribute("type","button"),new Image),p=(o.then(function(g){var v;return i.thumbnailCache.blob.has(g.url)?i.thumbnailCache.blob.get(g.url):(v=g.clone().blob(),i.thumbnailCache.blob.set(g.url,v),v)}).then(function(g){g=URL.createObjectURL(g),f.src=g,n===i.map.getStyle().style&&(i.currStyleImage.src=g,i.currStyleImage.alt=c,i.currStyleImage.parentElement.lastChild.nodeType==Node.TEXT_NODE?i.currStyleImage.parentElement.lastChild.textContent=c:i.currStyleImage.parentElement.appendChild(document.createTextNode(c))),i.styleIcons.set(n,g)}),f.setAttribute("aria-hidden","true"),l.appendChild(f),this.options.layout==="icons"?l.classList.add(t.Css.button):(l.classList.add(t.Css.listButton),l.classList.add(t.Css.expanded),l.appendChild(document.createTextNode(c))),l.addEventListener("click",function(){i.hasMouse=!1,i.hasFocus=!1;var g=i.styleButtons[n];g&&!g.hasAttribute("disabled")&&(i._invokeEvent("styleselected",n),i.options.autoSelectionMode&&i.map.setStyle({style:n}),Object.entries(i.styleButtons).forEach(function(w){var w=CR(w,2),C=w[0];return w[1].setAttribute("aria-current",C===n?"true":"false")}))}),document.createElement("div"));return p.classList.add("selected-icon"),l.appendChild(p),l},t.prototype.buildCurrStyleBtn=function(){var n=document.createElement("button"),r=(this.options.layout=="icons"?n.classList.add(t.Css.button):n.classList.add(t.Css.listButton),n.classList.add(t.Css.currentStyle),n.setAttribute("aria-label","Select Style"),n.setAttribute("tabindex","-1"),this.currStyleImage=new Image,n.appendChild(this.currStyleImage),document.createElement("div"));return r.classList.add("icon"),n.appendChild(r),n},t.prototype.buildStyleOpsGrid=function(){var n=this,r=document.createElement("div");return r.classList.add(t.Css.styleOptions),this.options.layout==="icons"?r.classList.add(this.options.layout):r.classList.add(t.Css.dropdown),r.setAttribute("aria-label","Style Options"),r.classList.add("hidden-accessible-element"),r.setAttribute("aria-hidden","true"),this.map.styles.definitions().then(function(o){return WEe(n,void 0,void 0,function(){return KEe(this,function(i){return this.onMapConfigurationChange(o),this.map.events.add("stylechanged",this.onStyleChange),[2]})})}),this.map.events.add("mapconfigurationchanged",this.onMapConfigurationChange),r},t.prototype.populateOpsGridFromDefinitions=function(n){var r,o,i=this;this.styleOpsGrid&&(r=n.configurations,(r=Array.isArray(this.options.mapStyles)?r.filter(function(l){return i.options.mapStyles.includes(l.name.split("_indoor")[0])}):r).forEach(function(l){var c,f={url:l.thumbnail},p=(l.thumbnail&&i.map.styles._transformStyleRequest(l.thumbnail,f),i.map.getServiceOptions()),p=(p.transformRequest&&l7(f,p.transformRequest(f.url,"Thumbnail")),i.thumbnailCache.response.has(f.url)?c=Promise.resolve(i.thumbnailCache.response.get(f.url)):(c=fetch(f.url,{headers:f.headers}),i.thumbnailCache.response.set(f.url,c)),i.buildSelectStyleBtn(l.name,n,c));i.styleOpsGrid.appendChild(p),i.styleButtons[l.name]=p,i.options.layout==="icons"&&(f=Js(i.mapToFriendlyStyleName(l.name,n)),i.styleOpsGrid.appendChild(f),aa(f,p))}),o=this.map.getStyle().style,Object.entries(this.styleButtons).forEach(function(c){var c=CR(c,2),f=c[0];return c[1].setAttribute("aria-current",f===o?"true":"false")}))},t.InvertOrderPositions=[Iu.TopRight,Iu.BottomRight],t.Css={button:"azure-maps-control-button",listButton:"azure-maps-control-list-button",expanded:"expanded",currentStyle:"curr-style",inUse:"in-use",styleOptions:"style-options",dropdown:"azure-maps-control-dropdown"},t}(Yc),ZEe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sk=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.flow="none",n.incidents=!1,n}return ZEe(t,e),t}(Hi),XEe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QEe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isActive=!1,n.style=Qs.light,n}return XEe(t,e),t}(Sk),JEe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u7=function(e){function t(n){var r,o=this;return(o=e.call(this)||this).hasMouse=!1,o.hasFocus=!1,o.options=new Sk().merge({flow:"relative",incidents:!0}),o.style=Qs.light,o.container=null,o.trafficButton=null,o.map=null,n&&(o.initIsActive=(r=n.isActive)!=null&&r,o.options.flow=n.flow||"relative",o.options.incidents=(r=n.incidents)==null||r,o.style=n.style||Qs.light),o}return JEe(t,e),Object.defineProperty(t.prototype,"isActive",{get:function(){var n;return!!this.map&&((n=this.map.getTraffic()).flow!=="none"||n.incidents)},set:function(n){this.map&&this.map.setTraffic({flow:n?this.options.flow:"none",incidents:!!n&&this.options.incidents})},enumerable:!1,configurable:!0}),t.prototype.onAdd=function(r){(this.map=r).getTraffic(),this.initIsActive!==void 0&&(this.isActive=this.initIsActive),this.container=this.buildContainer(r,this.style,"Traffic Control"),this.container.style.flexDirection="column";var r=this.constructTrafficButton(r),o=(this.container.appendChild(r),Js("Toggle Traffic Display"));return this.container.appendChild(o),aa(o,r),this.container},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.map=null},t.prototype.getOptions=function(){return new QEe().merge({isActive:this.isActive,flow:this.options.flow,incidents:this.options.incidents,style:this.style})},t.prototype.updateButtonState=function(){this.trafficButton&&(this.isActive?(this.container.classList.add("in-use"),this.trafficButton.setAttribute("aria-description","Traffic is displayed")):(this.container.classList.remove("in-use"),this.trafficButton.removeAttribute("aria-description")),this.trafficButton.setAttribute("aria-pressed",this.isActive?"true":"false"))},t.prototype.constructTrafficButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("traffic"),o.setAttribute("aria-label","Toggle Traffic Display"),o.setAttribute("alt","Toggle Traffic Display"),o.setAttribute("type","button"),this.trafficButton=o,this.updateButtonState(),o.addEventListener("click",function(){r.isActive=!r.isActive}),o},t}(Yc),eTe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),QH=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},tTe=function(e){function t(){var n=e.call(this)||this;return n.table=["Fast",["green","yellow","red","dark-red"],"Slow"],n.map=null,n.syncHiddenState=null,n}return eTe(t,e),t.prototype.onAdd=function(o){this.map=o;var r=this.buildContainer(o,Qs.auto,"Traffic Legend"),o=this.buildTrafficLegendDiv(o);return r.setAttribute("role","definition"),r.appendChild(o),r},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.syncHiddenState&&(this.map.events.remove("styledata",this.syncHiddenState),this.syncHiddenState=null),this.map=null},t.prototype.buildTrafficLegendDiv=function(n){var r,o,i,l,c=document.createElement("div"),f=(c.classList.add("traffic-legend","hidden"),c.setAttribute("alt","Traffic Legend"),document.createElement("table")),p=document.createElement("tr"),g=document.createElement("td"),v=(g.setAttribute("alt","Traffic"),g.appendChild(document.createTextNode("Traffic")),Js("Traffic")),w=(g.classList.add("traffic-legend-title"),g.colSpan=6,p.appendChild(g),p.appendChild(v),aa(v,g),f.appendChild(p),document.createElement("tr"));try{for(var C=QH(this.table),T=C.next();!T.done;T=C.next()){var k=T.value,P=document.createElement("td");if(k==="Fast"||k==="Slow")P.setAttribute("alt",k),P.appendChild(document.createTextNode(k)),P.classList.add("traffic-legend-text");else{P.classList.add("traffic-legend-colors"),P.setAttribute("aria-label","Traffic Legend"),P.setAttribute("role","img");try{i=void 0;for(var O=QH(k),L=O.next();!L.done;L=O.next()){var D=L.value,N=document.createElement("div");N.classList.add(D),P.appendChild(N)}}catch(B){i={error:B}}finally{try{L&&!L.done&&(l=O.return)&&l.call(O)}finally{if(i)throw i.error}}}w.appendChild(P);var F=Js(k instanceof Array?"Traffic Legend":k);w.appendChild(F),aa(F,P)}}catch(B){r={error:B}}finally{try{T&&!T.done&&(o=C.return)&&o.call(C)}finally{if(r)throw r.error}}return f.appendChild(w),c.appendChild(f),this.syncHiddenState=function(B){B.dataType==="style"&&((B=n.getTraffic()).flow&&B.flow!=="none"?c.classList.remove("hidden"):c.classList.add("hidden"))},this.syncHiddenState({dataType:"style"}),n.events.add("styledata",this.syncHiddenState),c},t}(Yc),nTe="__lodash_hash_undefined__";function rTe(e){return this.__data__.set(e,nTe),this}function oTe(e){return this.__data__.has(e)}var iTe=RW,aTe=rTe,sTe=oTe;function xI(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new iTe;++t<n;)this.add(e[t])}xI.prototype.add=xI.prototype.push=aTe,xI.prototype.has=sTe;function lTe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function uTe(e,t){return e.has(t)}var cTe=xI,dTe=lTe,hTe=uTe,fTe=1,pTe=2;function mTe(e,t,n,r,o,i){var l=n&fTe,c=e.length,f=t.length;if(c!=f&&!(l&&c<f))return!1;var f=i.get(e),p=i.get(t);if(f&&p)return f==t&&p==e;var g=-1,v=!0,w=n&pTe?new cTe:void 0;for(i.set(e,t),i.set(t,e);++g<c;){var C,T=e[g],k=t[g];if((C=r?l?r(k,T,g,t,e,i):r(T,k,g,e,t,i):C)!==void 0){if(C)continue;v=!1;break}if(w){if(!dTe(t,function(P,O){if(!hTe(w,O)&&(T===P||o(T,P,n,r,i)))return w.push(O)})){v=!1;break}}else if(T!==k&&!o(T,k,n,r,i)){v=!1;break}}return i.delete(e),i.delete(t),v}var c7=mTe;function gTe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}function yTe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var JH=YW,vTe=sE,_Te=c7,bTe=gTe,wTe=yTe,xTe=1,CTe=2,STe="[object Boolean]",ETe="[object Date]",TTe="[object Error]",ITe="[object Map]",kTe="[object Number]",PTe="[object RegExp]",ATe="[object Set]",MTe="[object String]",RTe="[object Symbol]",OTe="[object ArrayBuffer]",DTe="[object DataView]",e6=p_?p_.prototype:void 0,SR=e6?e6.valueOf:void 0;function LTe(e,t,n,r,o,i,l){switch(n){case DTe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case OTe:return!!(e.byteLength==t.byteLength&&i(new JH(e),new JH(t)));case STe:case ETe:case kTe:return vTe(+e,+t);case TTe:return e.name==t.name&&e.message==t.message;case PTe:case MTe:return e==t+"";case ITe:var c=bTe;case ATe:if(c=c||wTe,e.size!=t.size&&!(r&xTe))return!1;var f=l.get(e);return f?f==t:(r|=CTe,l.set(e,t),f=_Te(c(e),c(t),r,o,i,l),l.delete(e),f);case RTe:if(SR)return SR.call(e)==SR.call(t)}return!1}var NTe=LTe,t6=WW,FTe=1,zTe=Object.prototype,BTe=zTe.hasOwnProperty;function UTe(e,t,n,r,o,i){var l=n&FTe,c=t6(e),f=c.length;if(f!=t6(t).length&&!l)return!1;for(var p=f;p--;){var g=c[p];if(!(l?g in t:BTe.call(t,g)))return!1}var v=i.get(e),w=i.get(t);if(v&&w)return v==t&&w==e;for(var C=!0,T=(i.set(e,t),i.set(t,e),l);++p<f;){var k,P=e[g=c[p]],O=t[g];if(!((k=r?l?r(O,P,g,t,e,i):r(P,O,g,e,t,i):k)===void 0?P===O||o(P,O,n,r,i):k)){C=!1;break}T=T||g=="constructor"}return C&&!T&&(v=e.constructor)!=(w=t.constructor)&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof w=="function"&&w instanceof w)&&(C=!1),i.delete(e),i.delete(t),C}var ER=vz,jTe=c7,$Te=NTe,HTe=UTe,n6=BA,r6=cE,o6=FA,VTe=wz,qTe=1,i6="[object Arguments]",a6="[object Array]",ET="[object Object]",GTe=Object.prototype,s6=GTe.hasOwnProperty;function WTe(e,t,n,r,o,i){var l=r6(e),g=r6(t),c=l?a6:n6(e),g=g?a6:n6(t),f=(c=c==i6?ET:c)==ET,p=(g=g==i6?ET:g)==ET,g=c==g;if(g&&o6(e)){if(!o6(t))return!1;f=!(l=!0)}return g&&!f?(i=i||new ER,l||VTe(e)?jTe(e,t,n,r,o,i):$Te(e,t,c,n,r,o,i)):!(n&qTe)&&(l=f&&s6.call(e,"__wrapped__"),c=p&&s6.call(t,"__wrapped__"),l||c)?o(l?e.value():e,c?t.value():t,n,r,i=i||new ER):g&&(i=i||new ER,HTe(e,t,n,r,o,i))}var KTe=WTe,l6=Sm;function d7(e,t,n,r,o){return e===t||(e==null||t==null||!l6(e)&&!l6(t)?e!=e&&t!=t:KTe(e,t,n,r,d7,o))}var YTe=d7;function ZTe(e,t){return YTe(e,t)}var Ki,jo,Ri,Mi,Uo,ku=fy(ZTe),Ih=function(){function e(t,n,r,o){this.type="Feature",this.type=e.TYPE,this.properties=n||{},this.id=r,this.geometry=t,this.bbox=o}return e.TYPE="Feature",e}(),XTe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tl=function(e){function t(n,r){return e.call(this,n,r)||this}return XTe(t,e),t.fromData=function(n){var r=NaN,o=NaN,i=new Set(["y"]),l=new Set(["x"]);return Object.keys(n).forEach(function(c){var f=c.toLowerCase();isNaN(r)&&i.has(f)&&typeof n[c]=="number"?r=n[c]:isNaN(o)&&l.has(f)&&typeof n[c]=="number"&&(o=n[c])}),isNaN(r)||isNaN(o)?null:new t(r,o)},t.getX=function(n){return 0<n.length?n[0]:NaN},t.getY=function(n){return 1<n.length?n[1]:NaN},t.getDestination=function(n,r,o){return new t(t.getX(n)+o*Math.cos((r+270)*Math.PI/180),t.getY(n)+o*Math.sin((r+270)*Math.PI/180))},t.getDistance=function(i,r){var o=t.getX(i)-t.getX(r),i=t.getY(i)-t.getY(r);return Math.sqrt(o*o+i*i)},t.getHeading=function(i,r){var o=t.getX(r)-t.getX(i),i=t.getY(i)-t.getY(r);return 180*(2.5*Math.PI-Math.atan2(i,o))/Math.PI%360},t}(Array),kh=function(){function e(t){this.type="Point",this.type=e.TYPE,this.coordinates=t}return e.TYPE="Point",e}(),_S=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},QTe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Ek=6378137,JTe=Math.PI/180,h7=180/Math.PI,u6=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],Iz=85.0511;function Cl(e){return e*JTe}function bS(e){return e*h7}function kz(e,t,n){return Math.min(Math.max(e,t),n)}function f7(o,t){var r=Cl(t[1]-o[1]),n=Cl(t[0]-o[0]),r=Math.pow(Math.sin(r/2),2)+Math.cos(Cl(o[1]))*Math.cos(Cl(t[1]))*Math.pow(Math.sin(n/2),2),o=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r));return Math.round(Ek*o*100)/100}function gL(e){if(e)switch(e.toLowerCase()){case"feet":case"foot":case"ft":return jo.feet;case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return jo.kilometers;case"miles":case"mile":case"mi":return jo.miles;case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return jo.nauticalMiles;case"yards":case"yard":case"yds":case"yrd":case"yrds":return jo.yards;default:return jo.meters}return jo.meters}function c6(e){if(e)switch(e.toLowerCase()){case"milespersecondsquared":case"milepersecondsquared":case"mi/s^2":case"mi/s2":return Uo.milesPerSecondSquared;case"kilometerspersecondsquared":case"kilometrespersecondsquared":case"kilometerpersecondsquared":case"kilometrepersecondsquared":case"km/s^2":case"km/s2":return Uo.kilometersPerSecondSquared;case"knotspersecond":case"knotpersecond":case"knts/s":case"kn/s":case"kt/s":return Uo.knotsPerSecond;case"standardgravity":case"g":return Uo.standardGravity;case"feetpersecondsquared":case"footpersecondsquared":case"ft/s^2":case"ft/s2":return Uo.feetPerSecondSquared;case"yardspersecondsquared":case"yardpersecondsquared":case"yds/s^2":case"yds/s2":case"yd/s^2":case"yd/s2":return Uo.yardsPerSecondSquared;case"milesperhoursecond":case"mileperhoursecond":case"milesperhourseconds":case"mileperhourseconds":case"mi/h/s":return Uo.milesPerHourSecond;case"kilometersperhoursecond":case"kilometrespersoursecond":case"kilometerperhoursecond":case"kilometrepersoursecond":case"kilometersperhourssecond":case"kilometrespersourssecond":case"kilometerperhourssecond":case"kilometrepersourssecond":case"kmhs":case"km/h/s":return Uo.kilometersPerHourSecond;default:return Uo.metersPerSecondSquared}return Uo.metersPerSecondSquared}function d6(e){if(e)switch(e){case"acres":case"ac":return Ki.acres;case"hectares":case"ha":return Ki.hectares;case"squareFeet":case"ft^2":case"ft2":return Ki.squareFeet;case"squareYards":case"squareYard":case"yds^2":case"yds2":case"yd^2":case"yd2":return Ki.squareYards;case"squareKilometers":case"squareKilometres":case"squareKilometer":case"squareKilometre":case"km^2":case"km2":return Ki.squareKilometers;case"squareMiles":case"squareMile":case"mi^2":case"mi2":return Ki.squareMiles;default:return Ki.squareMeters}return Ki.squareMeters}function h6(e){if(e)switch(e.toLowerCase()){case"feetpersecond":case"footsecond":case"ftps":case"ft/s":return Mi.feetPerSecond;case"milesperhour":case"mileperhour":case"mph":case"mi/hr":case"mi/h":return Mi.milesPerHour;case"knots":case"knot":case"knts":case"knt":case"kn":case"kt":return Mi.knots;case"mach":case"m":return Mi.mach;case"kilometersperhour":case"kilometresperhour":case"kmperhour":case"kmph":case"km/hr":case"km/h":return Mi.kilometersPerHour;default:return Mi.metersPerSecond}return Mi.metersPerSecond}function f6(e){if(e)switch(e.toLowerCase()){case"milliseconds":case"ms":return Ri.ms;case"minutes":case"minute":case"mins":case"min":return Ri.minutes;case"hours":case"hour":case"hr":case"h":return Ri.hours;case"days":case"day":case"d":return Ri.days;default:return Ri.seconds}return Ri.seconds}function p6(e){var t=0;if(e&&0<e.length)for(var t=Math.abs(m6(e[0])),n=1,r=e.length;n<r;n++)t-=Math.abs(m6(e[n]));return t}function m6(e){var t=0;if(3<=e.length){for(var n=void 0,r=void 0,o=0,i=e.length;o<i;o++)t+=(Cl(e[o===i-2?(n=i-2,r=i-1,0):o===i-1?(n=i-1,r=0,1):(r=(n=o)+1,o+2)][0])-Cl(e[n][0]))*Math.sin(Cl(e[r][1]));t=t*Ek*Ek/2}return t}function g6(e,t,n){return(e[0]-n[0])*(t[1]-n[1])-(e[1]-n[1])*(t[0]-n[0])}function eIe(e,t,n){if(2<=n.length){for(var r,o,i,l=1/0,c=null,f=hE(n,22),p=0,g=f.length-1;p<g;p++)o=tIe(t,f[p],f[p+1]),(r=Tl.getDistance(t,o))<l&&(l=r,c=o);if(c)return i=Rz([c],22)[0],new Ih(new kh(i),{distance:lc(e,i)})}else if(n.length===1)return new Ih(new kh(n[0]),{distance:lc(e,n[0])});return null}function tIe(e,t,n){var r,o;return t[0]===n[0]&&t[1]===n[1]||(o=e[0]-t[0],e=e[1]-t[1],(e=((r=n[0]-t[0])*o+(o=n[1]-t[1])*e)/(r*r+o*o))<0)?t:1<e?n:[t[0]+r*e,t[1]+o*e]}function Ju(e,t){var n;return!isNaN(e)&&typeof t=="number"&&0<=t&&(n=void 0,n=t<u6.length?u6[t]:Math.pow(10,t),e=Math.round(e*n)/n),e}function nIe(o){var t=za(so.getWest(o)),n=za(so.getEast(o)),r=rs(so.getNorth(o)),i=rs(so.getSouth(o)),o=so.getCenter(o),i=[[t,r],[t,i],[o[0],i],[n,i],[n,r],[o[0],r],[t,r]];return new jA([i])}function um(e,t,n,r){switch(gL(t)){case jo.meters:e/=1e3;break;case jo.feet:e/=3280.8399;break;case jo.miles:e/=.62137119;break;case jo.yards:e/=1093.6133;break;case jo.nauticalMiles:e/=.5399568;break;case jo.kilometers:}switch(gL(n)){case jo.meters:e*=1e3;break;case jo.feet:e*=3280.8399;break;case jo.miles:e*=.62137119;break;case jo.yards:e*=1093.6133;break;case jo.nauticalMiles:e*=.5399568;break;case jo.kilometers:}return typeof r=="number"&&0<=r&&(t=Math.pow(10,r),e=Math.round(e*t)/t),e}function rIe(e,t,n,r){if(!e||e.length<=2)return f;typeof t!="number"&&(t=.5),(typeof n!="number"||n<=0)&&(n=15);var o,i,l,c=e.length,f=e.slice(0),p=(r?(Sl.areEqual(f[0],f[c-1])&&(f.pop(),c--),f.unshift(e[c-1]),f.push(e[0]),f.push(e[1]),c++):(f.unshift(e[0]),f.push(e[c-1])),[]);p.push([1,0,0,0]);for(var g=1;g<n-1;g++)p.push([2*(l=(o=g/n)*(i=o*o))-3*i+1,-2*l+3*i,l-2*i+o,l-i]);p.push([0,1,0,0]);for(var v,w,C,T,k,P,O=[],g=1;g<c;g++)for(v=t*(f[g+1][0]-f[g-1][0]),w=t*(f[g+1][1]-f[g-1][1]),C=t*(f[g+2][0]-f[g][0]),T=t*(f[g+2][1]-f[g][1]),o=0;o<n;o++)P=(k=p[o])[0]*f[g][0]+k[1]*f[g+1][0]+k[2]*v+k[3]*C,k=kz(k[0]*f[g][1]+k[1]*f[g+1][1]+k[2]*w+k[3]*T,-85,85),O.push([P,k]);return O}function Kx(c,f,i,l){l=l||"meters",c=Au(c);var l=Pz(l),o=Cl(c[1]),c=Cl(c[0]),f=Cl(f),i=i/l,l=Math.asin(Math.sin(o)*Math.cos(i)+Math.cos(o)*Math.sin(i)*Math.cos(f)),c=c+Math.atan2(Math.sin(f)*Math.sin(i)*Math.cos(o),Math.cos(i)-Math.sin(o)*Math.sin(l)),f=kz(rs(bS(l)),-85,85);return[za(bS(c)),f]}function lc(e,t,n){return e=f7(e=Au(e),t=Au(t)),n==="meters"?e:um(e,"meters",n||"meters")}function Pz(e){return e=gL(e),um(Ek,jo.meters,e)}function p7(e,t,n){for(var r=[],o=Cl(e[1]),i=Cl(e[0]),l=Cl(t[1]),c=Cl(t[0]),f=2*Math.asin(Math.sqrt(Math.pow(Math.sin((o-l)/2),2)+Math.cos(o)*Math.cos(l)*Math.pow(Math.sin((i-c)/2),2))),p=0;p<=n;p++){var w=p/n,C=Math.sin((1-w)*f)/Math.sin(f),w=Math.sin(w*f)/Math.sin(f),g=C*Math.cos(o)*Math.cos(i)+w*Math.cos(l)*Math.cos(c),v=C*Math.cos(o)*Math.sin(i)+w*Math.cos(l)*Math.sin(c),C=C*Math.sin(o)+w*Math.sin(l),w=Math.atan2(C,Math.sqrt(Math.pow(g,2)+Math.pow(v,2))),C=Math.atan2(v,g),w=kz(bS(w),-85,85),C=bS(C);r.push([C,w])}return r}function Az(e){return(Array.isArray(e)?e:e.coordinates).reduce(function(t,n){var r=0<t.length?t[t.length-1]:null;return r&&180<Math.abs(n[0]-r[0])?(r=r[0]<0?n[0]-360:n[0]+360,t.push([r,n[1]])):t.push(n),t},[])}function m7(e){for(var t,n,r,o,i,l=Array.isArray(e)?e:e.coordinates,c=[],f=[],p=0;p<l.length;p++)c.push(l[p]),p+1>=l.length||(t=(n=_S(l[p],2))[0],n=n[1],o=(i=_S(l[p+1],2))[0],i=i[1],180<Math.abs(o-t)&&(r=0<t?180:-180,o=Math.abs((0<t?o+360:o-360)-t),i=n+(i-n)*(Math.abs(r-t)/o),c.push([r,i]),f.push(c),c=[[-r,i]]));return f.push(c),f}function oIe(e,t){(!t||t<=0)&&(t=15),Array.isArray(e)?n=e:e.type&&e.type==="LineString"&&(n=e.coordinates);for(var n,r=n.length-1,o=[],i=0;i<r;i++)o=o.concat(p7(n[i],n[i+1],t));return Az(o)}function iIe(e,t){(!t||t<=0)&&(t=15),Array.isArray(e)?n=e:e.type&&e.type==="LineString"&&(n=e.coordinates);for(var n,r=n.length-1,o=[],i=[],l=0;l<r;l++)for(var c,f,p,g,v,w=p7(n[l],n[l+1],t),C=0;C<w.length;C++)o.push(w[C]),C+1>=w.length||(c=(f=_S(w[C],2))[0],f=f[1],g=(v=_S(w[C+1],2))[0],v=v[1],180<Math.abs(g-c)&&(p=0<c?180:-180,g=Math.abs((0<c?g+360:g-360)-c),v=f+(v-f)*(Math.abs(p-c)/g),o.push([p,v]),i.push(o),o=[[-p,v]]));return i.push(o),i}function qg(e,t){var n,r;return e=Au(e),t=Au(t),e&&2<=e.length&&t&&2<=t.length?(r=Cl(e[1]),n=Cl(t[1]),t=Cl(t[0]-e[0]),e=Math.sin(t)*Math.cos(n),r=Math.cos(r)*Math.sin(n)-Math.sin(r)*Math.cos(n)*Math.cos(t),(bS(Math.atan2(e,r))+360)%360):NaN}function Mz(e,t){var n,r=0;Array.isArray(e)?n=e:e.type&&e.type==="LineString"&&(n=e.coordinates);for(var o=0,i=n.length-1;o<i;o++)r+=f7(n[o],n[o+1]);return um(r,"meters",t||"meters")}function g7(e,t,n){n=n||"meters";var r,o=0;if(Array.isArray(e)?r=e:e.type&&e.type==="LineString"&&(r=e.coordinates),2<=r.length){for(var i,l,c=r.length,f=1;f<c;f++){if(t<=o+(l=lc(r[f-1],r[f],n)))return i=qg(r[f-1],r[f]),Kx(r[f-1],i,t-o,n);o+=l}return o<=t?r[c-1]:r[0]}return null}function y7(e,t,n,r,o){r=r||"meters",o=o||0,e=Au(e);for(var i=[],l=360/n,c=0;c<=n;c++)i.push(Kx(e,(c*l+o)%360,t,r));return i}function v7(e,t,n,r,o){return Az(y7(e,t,n,r,o))}function aIe(e,t,n,r,o){return m7(y7(e,t,n,r,o))}function yL(e,t,n){n=n===void 0?.5:n;var r=lc(e=Au(e),t=Au(t),"kilometers");return Kx(e,qg(e,t),r*n,"kilometers")}function rs(e){return 90<e?180<(e=(e+90)%360)?90-(e-180):e-90:e<-90?(e=(e-90)%360)<-180?-90-(e+180):e+90:e}function za(e){return 180<e?(e+180)%360-180:e<-180?(e-180)%360+180:e}function _7(e,t,n){if(n===0)return Object.assign({},e);t=Au(t);for(var r,o,i=[],l=0,c=e.length;l<c;l++)r=lc(t,e[l]),o=qg(t,e[l]),i.push(Kx(t,o+n,r));return i}function sIe(n,o){n=Au(n),o=Au(o);var n=_S(hE([n,o],21),2),o=n[0],n=n[1],r=n[0]-o[0],o=o[1]-n[1];return(2.5*Math.PI-Math.atan2(o,r))*h7%360}function Rz(e,t){for(var n,r,o=512*Math.pow(2,t),i=[],l=0,c=e.length;l<c;l++)n=e[l][0]/o-.5,r=.5-e[l][1]/o,i.push([360*n,90-360*Math.atan(Math.exp(2*-r*Math.PI))/Math.PI]);return i}function hE(e,t){for(var n,r,o=512*Math.pow(2,t),i=[],l=0,c=e.length;l<c;l++)r=Math.sin(e[l][1]*Math.PI/180),n=(e[l][0]+180)/360,r=.5-Math.log((1+r)/(1-r))/(4*Math.PI),i.push([Math.round(n*o),Math.round(r*o)]);return i}function UA(e,t,n,r){switch(c6(t)){case Uo.kilometersPerHourSecond:e/=3.6;break;case Uo.milesPerHourSecond:e/=2.236936292054;break;case Uo.knotsPerSecond:e/=1.943844492441;break;case Uo.standardGravity:e/=.1019716212978;break;case Uo.kilometersPerSecondSquared:e/=.001;break;case Uo.milesPerSecondSquared:e/=.000621371192;break;case Uo.feetPerSecondSquared:e/=3.280839895012;break;case Uo.yardsPerSecondSquared:e/=1.093613298338;break;case Uo.metersPerSecondSquared:}switch(c6(n)){case Uo.kilometersPerHourSecond:e*=3.6;break;case Uo.milesPerHourSecond:e*=2.236936292054;break;case Uo.knotsPerSecond:e*=1.943844492441;break;case Uo.standardGravity:e*=.1019716212978;break;case Uo.kilometersPerSecondSquared:e*=.001;break;case Uo.milesPerSecondSquared:e*=.000621371192;break;case Uo.feetPerSecondSquared:e*=3.280839895012;break;case Uo.yardsPerSecondSquared:e*=1.093613298338;break;case Uo.metersPerSecondSquared:}return Ju(e,r)}function b7(e,t,n,r){switch(d6(t)){case Ki.acres:e*=4046.8564224;break;case Ki.hectares:e*=1e4;break;case Ki.squareFeet:e*=.09290304;break;case Ki.squareKilometers:e*=1e6;break;case Ki.squareMiles:e*=259e4;break;case Ki.squareYards:e*=.83612736;break;case Ki.squareMeters:}switch(d6(n)){case Ki.acres:e/=4046.8564224;break;case Ki.hectares:e/=1e4;break;case Ki.squareFeet:e/=.09290304;break;case Ki.squareKilometers:e/=1e6;break;case Ki.squareMiles:e/=259e4;break;case Ki.squareYards:e/=.83612736;break;case Ki.squareMeters:}return Ju(e,r)}function m_(e,t,n,r){switch(h6(t)){case Mi.feetPerSecond:e*=1.09728;break;case Mi.milesPerHour:e*=1.6093;break;case Mi.knots:e*=1.852;break;case Mi.metersPerSecond:e*=3.6;break;case Mi.mach:e*=1234.8;break;case Mi.kilometersPerHour:}switch(h6(n)){case Mi.feetPerSecond:e/=1.09728;break;case Mi.milesPerHour:e/=1.6093;break;case Mi.knots:e/=1.852;break;case Mi.metersPerSecond:e/=3.6;break;case Mi.mach:e/=1234.8;break;case Mi.kilometersPerHour:}return Ju(e,r)}function Yx(e,t,n,r){switch(f6(t)){case Ri.ms:e/=1e3;break;case Ri.hours:e*=3600;break;case Ri.minutes:e*=60;break;case Ri.days:e*=86400;break;case Ri.seconds:}switch(f6(n)){case Ri.ms:e*=1e3;break;case Ri.hours:e/=3600;break;case Ri.minutes:e/=60;break;case Ri.days:e/=86400;break;case Ri.seconds:}return Ju(e,r)}function w7(e,t,n,r,o,i,l,c){return t=um(t,o,jo.meters),o=Yx(n,i,Ri.seconds),UA(2*(t-m_(e,r,Mi.metersPerSecond)*o)/(o*o),Uo.metersPerSecondSquared,l,c)}function x7(e,t,n,r,o,i,l){return e=m_(e,r,Mi.metersPerSecond),UA((m_(t,r,Mi.metersPerSecond)-e)/Yx(n,o,Ri.seconds),Uo.metersPerSecondSquared,i,l)}function lIe(e,t,n,r,o,i,l){if(typeof n=="string"&&e.type==="Feature"&&e.geometry.type==="Point"&&t.type==="Feature"&&t.geometry.type==="Point"&&(n=Oz(e.properties[n],t.properties[n],Ri.seconds),!isNaN(n))){var c=0;if(r&&typeof r=="string"){var f=e.properties[r],r=t.properties[r];if(typeof f=="number"&&(c=f,typeof r=="number"))return x7(f,r,n,o,Ri.seconds,i,l)}return w7(c,lc(e.geometry.coordinates,t.geometry.coordinates,jo.meters),n,o,jo.meters,Ri.seconds,i,l)}return NaN}function C7(e,t,n){if(e){var r=0;switch((e=e instanceof ia?e.toJson():e).type){case"Feature":var o=e;if(o.geometry)return C7(o.geometry,t,n);break;case"Polygon":o=e,o.coordinates&&(r=p6(o.coordinates));break;case"MultiPolygon":var i=e;if(i.coordinates)for(var l=0,c=i.coordinates.length;l<c;l++)r+=p6(i.coordinates[l])}return b7(r,Ki.squareMeters,t,n)}return 0}function uIe(e,t,n,r,o,i){return e=Au(e),t=Au(t),e&&t?(n=Yx(n,r,Ri.seconds),m_(lc(e,t,jo.meters)/n,Mi.metersPerSecond,o,i)):0}function cIe(e,t,n,r,o){return typeof n=="string"&&e.type==="Feature"&&e.geometry.type==="Point"&&t.type==="Feature"&&t.geometry.type==="Point"&&(n=Oz(e.properties[n],t.properties[n],Ri.seconds),!isNaN(n))?m_(lc(e.geometry.coordinates,t.geometry.coordinates,jo.meters)/n,Mi.metersPerSecond,r,o):NaN}function Oz(e,t,n,r){return e=vL(e),t=vL(t),e!=null&&t!=null?Yx(t.getTime()-e.getTime(),Ri.ms,n,r):NaN}function dIe(e,t,n,r,o,i,l,c){return t=Yx(t,o,Ri.seconds),o=(n=m_(n,i,Mi.metersPerSecond))*t,typeof r=="number"&&(o+=.5*UA(r,l,Uo.metersPerSecondSquared)*t*t),um(o,jo.meters,e,c)}function vL(e){if(Object.prototype.toString.call(e)==="[object Date]")return e;if(typeof e=="string"){var t=Date.parse(e);if(!isNaN(t))return new Date(t);if(0<=e.indexOf("Date("))return t=(t=0)<(e=e.replace("/Date(","").replace(")/","")).indexOf("+")?parseInt(e.substr(0,e.indexOf("+")),10):0<e.indexOf("-")?parseInt(e.substr(0,e.indexOf("-")),10):parseInt(e,10),new Date(t)}else if(typeof e=="number")return new Date(e);return null}function hIe(e){var t,n,r=Ev(e).map(function(g){return[za(g[0]),rs(g[1])]}),o=(r.sort(function(g,v){return g[0]===v[0]?g[1]-v[1]:g[0]-v[0]}),[]);try{for(var i=QTe(r),l=i.next();!l.done;l=i.next()){for(var c=l.value;2<=o.length&&g6(o[o.length-2],o[o.length-1],c)<=0;)o.pop();o.push(c)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}for(var f=[],p=r.length-1;0<=p;p--){for(;2<=f.length&&g6(f[f.length-2],f[f.length-1],r[p])<=0;)f.pop();f.push(r[p])}return new jA([o.concat(f)])}function Ev(e){var t=[],n=null,r=null;if(Array.isArray(e)&&0<e.length)if(Array.isArray(e[0])&&typeof e[0][0]=="number")t=e;else for(var o=e.length,i=0;i<o;i++)t=t.concat(Ev(e[i]));else if(e.type)switch(e.type){case"Point":t=[e.coordinates];break;case"LineString":t=e.coordinates;break;case"Polygon":n=e.coordinates;break;case"MultiPoint":t=e.coordinates;break;case"MultiLineString":n=e.coordinates;break;case"MultiPolygon":r=e.coordinates;break;case"Feature":var l=e,t=ia._isCircle(l)?ia._getCirclePositions(l):Ev(l.geometry);break;case"FeatureCollection":t=Ev(e.features);break;case"GeometryCollection":t=Ev(e.geometries)}else if(e instanceof ia)return Ev(e.toJson());if(n)for(o=n.length,i=0;i<o;i++)t=t.concat(n[i]);else if(r)for(var c=r.length,i=0;i<c;i++)for(var f=r[i].length,p=0;p<f;p++)t=t.concat(r[i][p]);return t}function Au(e){if(Array.isArray(e)&&typeof e[0]=="number")return e;if(e.type){if(e.type==="Point")return e.coordinates;if(e.type==="Feature"&&e.geometry.type==="Point")return e.geometry.coordinates}else if(e instanceof ia&&e.getType()==="Point")return e.getCoordinates();return null}function fIe(e,t){if(t<2)return[];for(var n=[],r=Mz(e,jo.meters)/(t-1),o=0;o<t;o++){var i=g7(e,r*o,jo.meters);i!=null&&n.push(i)}return n}function S7(e,t,n){n=n||"meters";var r,o=0;if(Array.isArray(e)?r=e:e.type&&e.type==="LineString"&&(r=e.coordinates),2<=r.length){for(var i,l,c,f=r.length,p=1;p<f;p++){if(t<=o+(c=lc(r[p-1],r[p],n)))return i=qg(r[p-1],r[p]),l=Kx(r[p-1],i,t-o,n),new Ih(new kh(l),{heading:i});o+=c}return o<=t?new Ih(new kh(r[f-1]),{heading:qg(r[f-2],r[f-1])}):new Ih(new kh(r[0]),{heading:qg(r[0],r[1])})}return null}function pIe(e,t){if(t<=0)return[];for(var n=[],r=Mz(e,jo.meters)/(t-1),o=0;o<t;o++){var i=S7(e,r*o,jo.meters);i!=null&&n.push(i)}return n}function Tk(e,t,n,r){var o=Au(e),i=hE([o],22)[0],l=null,c=1/0;switch((t=t instanceof ia?t.toJson():t).type){case"Feature":return Tk(e,t.geometry,n);case"Point":C=[[t.coordinates]];break;case"MultiPoint":for(var f,p=t.coordinates,g=0,v=p.length;g<v;g++)(f=lc(o,p[g]))<c&&(c=f,l=new Ih(new kh(p[g]),{distance:f}));break;case"LineString":C=[t.coordinates];break;case"Polygon":case"MultiLineString":C=t.coordinates;break;case"MultiPolygon":var w=t.coordinates;if(0<w.length)for(var C=w[0],g=1,v=w.length;g<v;g++)C=C.concat(w[g])}if(C)for(var T,g=0,v=C.length;g<v;g++)(T=eIe(o,i,C[g]))&&T.properties.distance<c&&(c=T.properties.distance,l=T);return l&&(l.properties.distance=um(l.properties.distance,"meters",n,r)),l}(function(e){e.squareMeters="squareMeters",e.acres="acres",e.hectares="hectares",e.squareFeet="squareFeet",e.squareKilometers="squareKilometers",e.squareMiles="squareMiles",e.squareYards="squareYards"})(Ki=Ki||{}),function(e){e.meters="meters",e.kilometers="kilometers",e.feet="feet",e.miles="miles",e.nauticalMiles="nauticalMiles",e.yards="yards"}(jo=jo||{}),function(e){e.seconds="seconds",e.hours="hours",e.ms="ms",e.minutes="minutes",e.days="days"}(Ri=Ri||{}),function(e){e.metersPerSecond="metersPerSecond",e.kilometersPerHour="kilometersPerHour",e.feetPerSecond="feetPerSecond",e.milesPerHour="milesPerHour",e.knots="knots",e.mach="mach"}(Mi=Mi||{}),function(e){e.milesPerSecondSquared="milesPerSecondSquared",e.kilometersPerSecondSquared="kilometersPerSecondSquared",e.knotsPerSecond="knotsPerSecond",e.standardGravity="standardGravity",e.feetPerSecondSquared="feetPerSecondSquared",e.yardsPerSecondSquared="yardsPerSecondSquared",e.milesPerHourSecond="milesPerHourSecond",e.kilometersPerHourSecond="kilometersPerHourSecond",e.metersPerSecondSquared="metersPerSecondSquared"}(Uo=Uo||{});var mIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sl=function(e){function t(n,r,o){return o?e.call(this,n,r,o)||this:e.call(this,n,r)||this}return mIe(t,e),t.fromPosition=function(n){return n.length===2?new t(n[0],n[1]):2<n.length?new t(n[0],n[1],n[2]):null},t.areEqual=function(n,r,o){var i,l;return o===void 0&&(o=6),!!(n&&2<=n.length&&r&&2<=r.length)&&(o=Math.pow(10,o),l=rs(n[1]),i=rs(r[1]),n=za(n[0]),r=za(r[0]),Math.round((l-i)*o)/o==0)&&((l=Math.round((n-r)*o)/o)==0||l==360)},t.fromLatLng=function(n,r,o){var i,l,c,f,p,g,v=[];return typeof n=="number"?(typeof r=="number"&&v.push(r),v.push(n),typeof o=="number"&&v.push(o)):Array.isArray(n)?2<=n.length&&typeof n[0]=="number"&&typeof n[1]=="number"&&(3<=n.length&&typeof n[2]=="number"?v.push(n[1],n[0],n[2]):v.push(n[1],n[0])):typeof n=="object"&&(i=["lat","latitude","y"],l=["lng","longitude","lon","x"],c=["elv","elevation","alt","altitude","z"],g=p=f=NaN,Object.keys(n).forEach(function(w,C,T){var k=w.toLowerCase();isNaN(f)&&0<=i.indexOf(k)&&typeof n[w]=="number"?f=n[w]:isNaN(p)&&0<=l.indexOf(k)&&typeof n[w]=="number"?p=n[w]:isNaN(g)&&0<=c.indexOf(k)&&typeof n[w]=="number"&&(g=n[w])}),isNaN(f)||isNaN(p)||(v.push(p,f),isNaN(g))||v.push(g)),2<=v.length?v:null},t.fromLatLngs=function(n){var r=[];if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++){var l=t.fromLatLng(n[o]);l&&r.push(l)}return r},t._getDimensions=function(n){for(var r=0;Array.isArray(n);)n=n[0],r++;return typeof n=="number"&&r--,r},t}(Array),jA=function(){function e(t,n){this.type="Polygon",this.type=e.TYPE,Sl._getDimensions(t)===1?this.coordinates=[t]:this.coordinates=t,this.bbox=n}return e.TYPE="Polygon",e}(),gIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),y6=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ia=function(e){function t(n,r,o){var i,l,c=e.call(this)||this;return n.type==="Feature"?(l=Ka((i=n).geometry),o=i.properties?Ka(i.properties):{},r=i.id==null||i.id===""?f_():i.id):(l=Ka(n),r=r==null||r===""?f_():r,o=o?Ka(o):{}),o[t._shapeIdPropName]=r,c.data=new Ih(l,o,r),c._handleCircle(),c}return gIe(t,e),t.prototype.addProperty=function(n,r){ku(this.data.properties[n],r)||(this.data.properties[n]=Ka(r),n!=="subType"&&n!=="radius"||this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.getBounds=function(){var n,r,o,i,l,c=this.getCoordinates(),f=this.getType();if(f==="Point")l=this.circlePolygon?(p=this.circlePolygon.geometry.coordinates,so.fromPositions(p[0])):new so(p=c,p);else if(f==="MultiPoint"||f==="LineString"){var p=c;l=so.fromPositions(p)}else if(f==="Polygon")p=c,l=so.fromPositions(p[0]);else if(f==="MultiLineString"){p=c;try{for(var g=y6(p),v=g.next();!v.done;v=g.next()){var w=v.value;l=so.merge(l,so.fromPositions(w))}}catch(P){n={error:P}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}else if(f==="MultiPolygon"){p=c;try{for(var C=y6(p),T=C.next();!T.done;T=C.next()){var k=T.value;l=so.merge(l,so.fromPositions(k[0]))}}catch(P){o={error:P}}finally{try{T&&!T.done&&(i=C.return)&&i.call(C)}finally{if(o)throw o.error}}}return l},t.prototype.getCoordinates=function(){return Ka(this.data.geometry.coordinates)},t.prototype.getCircleCoordinates=function(){return this.circlePolygon?Ka(this.circlePolygon.geometry.coordinates[0]):null},t.prototype.getId=function(){return this.data.id},t.prototype.getProperties=function(){return Ka(this.data.properties)},t.prototype.getType=function(){return this.data.geometry.type},t.prototype.isCircle=function(){return t._isCircle(this.data)},t.prototype.isRectangle=function(){return t._isRectangle(this.data)},t.prototype.setCoordinates=function(n){n=this.getType()==="Polygon"&&Sl._getDimensions(n)===1?[n]:n,ku(this.data.geometry.coordinates,n)||(this.data.geometry.coordinates=Ka(n),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.setProperties=function(n){n[t._shapeIdPropName]=this.data.id,ku(this.data.properties,n)||(this.data.properties=Ka(n),this._handleCircle(),this.dataSource&&this.dataSource._updateSource(),this._invokeEvent("shapechanged",this))},t.prototype.toJson=function(){return JSON.parse(JSON.stringify(this.data))},t.prototype._toJson=function(){return this.circlePolygon||this.data},t.prototype._setDataSource=function(n){n===void 0||n==null?delete this.dataSource:this.dataSource=n},t.prototype._handleCircle=function(){var n;this.isCircle()?(n=t._getCirclePositions(this.data),this.circlePolygon=new Ih(new jA([n]),this.data.properties,this.data.id),this.data.properties.subType="Circle"):delete this.circlePolygon},t._isCircle=function(n){return n&&n.geometry&&n.geometry.type==="Point"&&n.geometry.coordinates&&n.properties&&typeof n.properties.subType=="string"&&n.properties.subType.toLowerCase()==="circle"&&typeof n.properties.radius=="number"},t._isRectangle=function(n){if(n.geometry.type==="Polygon"&&n.geometry.coordinates&&typeof n.properties.subType=="string"&&n.properties.subType.toLowerCase()==="rectangle"&&(n=n.geometry.coordinates,n.length===1)){if(n=n[0],n.length===5)return n[0][0]===n[4][0]&&n[0][1]===n[4][1];if(n.length===4)return!0}return!1},t._getCirclePositions=function(n){return v7(n.geometry.coordinates,n.properties.radius,72,"meters")},t._shapeIdPropName="_azureMapsShapeId",t}(Cm),yIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vIe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},so=function(e){function t(n,r){var o,i=this;return n&&r?i=(o=n)[2]&&r[2]?e.call(this,o[0],o[1],o[2]||0,r[0],r[1],r[2]||0)||this:e.call(this,o[0],o[1],r[0],r[1])||this:n&&(o=n)&&(o.length===4?i=e.call(this,o[0],o[1],o[2],o[3])||this:6<=o.length&&(i=e.call(this,o[0],o[1],o[2],o[3],o[4],o[5])||this)),i}return yIe(t,e),t.fromBoundingBox=function(l){var r=t.getWest(l),o=t.getSouth(l),i=t.getEast(l),l=t.getNorth(l);return new t([r,o,i,l])},t.fromDimensions=function(c,r,f){var i=c[0],c=c[1],l=Math.min(Math.max(c+f/2,-85.5),85.5),c=Math.min(Math.max(c-f/2,-85.5),85.5),f=za(i+r/2);return new t([za(i-r/2),c,f,l])},t.fromEdges=function(n,r,o,i){return new t([n,r,o,i])},t.containsPosition=function(c,l){var i=t.getCenter(c),o=Math.abs(i[1]-l[1]),i=Math.abs(i[0]-l[0]),l=(180<i&&(i=360-i),t.getHeight(c)),c=t.getWidth(c);return o<=l/2+1e-8&&i<=c/2+1e-8},t.containsBoundingBox=function(n,r){var o=n&&n.length===4,i=r&&r.length===4;return!(!o||!i)&&t.getWest(n)<t.getWest(r)&&t.getWest(r)<t.getEast(n)&&t.getWest(n)<t.getEast(r)&&t.getEast(r)<t.getEast(n)&&t.getSouth(n)<t.getSouth(r)&&t.getSouth(r)<t.getNorth(n)&&t.getSouth(n)<t.getNorth(r)&&t.getNorth(r)<t.getNorth(n)},t.crossesAntimeridian=function(n){return za(t.getEast(n))-za(t.getWest(n))<0||t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(n)||t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(n)},t.getCenter=function(i){var o=za(t.getEast(i)),r=za(t.getWest(i)),r=(o<r&&(o+=360),za((r+o)/2)),o=rs(t.getSouth(i)),i=rs(t.getNorth(i));return[r,rs((o+i)/2)]},t.getHeight=function(n){return n=rs(t.getNorth(n))-rs(t.getSouth(n)),isNaN(n)?0:n},t.getWidth=function(n){return n=za(t.getEast(n))-za(t.getWest(n)),isNaN(n)?0:n<0?n+360:n},t.getSouthWest=function(o){var r=this.getSouth(o),o=this.getWest(o);return isNaN(r)||isNaN(o)?null:[o,r]},t.getNorthEast=function(o){var r=this.getNorth(o),o=this.getEast(o);return isNaN(r)||isNaN(o)?null:[o,r]},t.getNorthWest=function(o){var r=this.getNorth(o),o=this.getWest(o);return isNaN(r)||isNaN(o)?null:[o,r]},t.getSouthEast=function(o){var r=this.getSouth(o),o=this.getEast(o);return isNaN(r)||isNaN(o)?null:[o,r]},t.getSouth=function(n){return n&&4<=n.length?Number(n[1]):NaN},t.getWest=function(n){return n&&4<=n.length?Number(n[0]):NaN},t.getNorth=function(n){if(n){if(n.length===4)return Number(n[3]);if(n.length===6)return Number(n[4])}return NaN},t.getEast=function(n){if(n){if(n.length===4)return Number(n[2]);if(n.length===6)return Number(n[3])}return NaN},t.intersect=function(c,p){var i=t.getCenter(c),l=t.getCenter(p),o=Math.abs(i[1]-l[1]),i=Math.abs(i[0]-l[0]),l=(180<i&&(i=360-i),t.getHeight(c)),c=t.getWidth(c),f=t.getHeight(p),p=t.getWidth(p);return o<=l/2+f/2&&i<=c/2+p/2},t.merge=function(n,r){var o=n&&n.length===4,i=r&&r.length===4;if(o&&!i)return n;if(i&&!o)return r;if(!o&&!i)return null;for(var o=Math.max(rs(t.getNorth(n)),rs(t.getNorth(r))),i=Math.min(rs(t.getSouth(n)),rs(t.getSouth(r))),l=[n,r],c=[],f=0,f=0;f<l.length;f++){var p=l[f],g=za(t.getWest(p)),v=za(t.getEast(p));t.crossesAntimeridian(p)?(c.push([g,180]),c.push([-180,v])):c.push([g,v])}c.sort(function(D,N){return D[0]===N[0]?D[1]-N[1]:D[0]-N[0]});var w=[],C=c[0];for(f=1;f<c.length;){var T=c[f];C[1]>=T[0]?C[1]=Math.max(C[1],T[1]):(w.push(C),C=T),f++}w.push(C);var k=w.length,P=w[0][0]+360-w[k-1][1],O=[w[k-1][1],w[0][0]];for(f=1;f<k;f++){var L=w[f][0]-w[f-1][1];P<L&&(P=L,O=[w[f-1][1],w[f][0]])}return new t([O[1],i],[O[0],o])},t.fromPositions=function(n){for(var r,o,i=NaN,l=NaN,c=NaN,f=NaN,p=n.length,g=new Array(p),v=0;p--;)(o=n[p])&&2<=o.length&&(r=rs(o[1]),i=isNaN(i)?r:Math.max(i,r),l=isNaN(l)?r:Math.min(l,r),g[v++]=za(o[0]));if(v){g.length=v,g.sort(function(k,P){return k-P});for(var w=g[0]+360-g[v-1],C=0,p=1;p<v;p++){var T=g[p]-g[p-1];w<T&&(w=T,C=p)}c=g[C],f=g[(C||v)-1]}return isNaN(c)||isNaN(l)||isNaN(f)||isNaN(i)?null:new t([c,l,f,i])},t.fromLatLngs=function(n){return t.fromPositions(Sl.fromLatLngs(n))},t.fromData=function(n){var r,o,i=null;if(Array.isArray(n)&&0<n.length){try{for(var l=vIe(n),c=l.next();!c.done;c=l.next()){var f,p=c.value;(f=t.fromData(p))!=null&&(i=i===null?f:t.merge(i,f))}}catch(L){r={error:L}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return i}if(n instanceof ia)return n.getBounds();if(n&&n.type){var g=n;if(g.bbox&&g.bbox.length===4)return g.bbox;switch(g.type){case"FeatureCollection":return t.fromData(g.features);case"Feature":return ia._isCircle(g)?t.fromPositions(ia._getCirclePositions(g)):t.fromData(g.geometry);case"GeometryCollection":return t.fromData(g.geometries);case"Point":var v=g.coordinates;if(v&&2<=v.length)return[v[0],v[1],v[0],v[1]];break;case"LineString":case"MultiPoint":return t.fromPositions(g.coordinates);case"Polygon":case"MultiLineString":var w=g.coordinates;if(w&&0<w.length){for(var C=0,T=w.length;C<T;C++)(f=t.fromPositions(w[C]))!=null&&(i=i===null?f:t.merge(i,f));if(i!=null)return i}break;case"MultiPolygon":var k=g.coordinates;if(k&&0<k.length){for(C=0,T=k.length;C<T;C++)for(var P=0,O=k[C].length;P<O;P++)(f=t.fromPositions(k[C][P]))!=null&&(i=i===null?f:t.merge(i,f));return i}}}return null},t.splitOnAntimeridian=function(n){var r,o,i,l,c,f,p=[];return t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe(n)?[[-180,n[1],n[2],180,n[4],n[5]]]:t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe(n)?[[-180,n[1],180,n[3]]]:(t.crossesAntimeridian(n)?(f=r=void 0,o=za(t.getWest(n)),i=za(t.getEast(n)),l=rs(t.getNorth(n)),c=rs(t.getSouth(n)),f=6<=n.length?(r=[o,c,n[2],180,l,n[5]],[-180,c,n[2],i,l,n[5]]):(r=[o,c,180,l],[-180,c,i,l]),p.push(r,f)):p.push(n),p)},t.isBoundingBoxWithSixOrMoreElementsLargerThanGlobe=function(n){return 6<=n.length&&360<n[3]-n[0]},t.isBoundingBoxWithLessThanSixElementsLargerThanGlobe=function(n){return n.length<6&&360<n[2]-n[0]},t}(Array),Lv=function(){function e(t,n){this.type="FeatureCollection",this.type=e.TYPE,this.features=t,this.bbox=n}return e.TYPE="FeatureCollection",e}(),_Ie=function(){function e(t){this.type="GeometryCollection",this.type=e.TYPE,this.geometries=t}return e.TYPE="GeometryCollection",e}(),bIe=function(){function e(t,n){this.type="LineString",this.type=e.TYPE,this.coordinates=t,this.bbox=n}return e.TYPE="LineString",e}(),wIe=function(){function e(t,n){this.type="MultiLineString",this.type=e.TYPE,this.coordinates=t,this.bbox=n}return e.TYPE="MultiLineString",e}(),xIe=function(){function e(t,n){this.type="MultiPoint",this.type=e.TYPE,this.coordinates=t,this.bbox=n}return e.TYPE="MultiPoint",e}(),CIe=function(){function e(t,n){this.type="MultiPolygon",this.type=e.TYPE,this.coordinates=t,this.bbox=n}return e.TYPE="MultiPolygon",e}(),SIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EIe=function(e){function t(n,r,o){return e.call(this,n,r,o||0)||this}return SIe(t,e),t.fromPosition=function(n){return 2<=n.length?new t((180+n[0])/360,t._latToMercatorY(n[1]),3<=n.length?t._altitudeToMercatorZ(n[2],n[1]):0):[0,0,0]},t.fromPositions=function(n){for(var r=[],o=0,i=n.length;o<i;o++)r.push(this.fromPosition(n[o]));return r},t.toFloat32Array=function(n){for(var r=new Float32Array(3*n.length),o=0,i=n.length;o<i;o++){var l=3*o,c=n[o];r[l]=(180+c[0])/360,r[1+l]=t._latToMercatorY(c[1]),r[2+l]=3<=c.length?t._altitudeToMercatorZ(c[2],c[1]):0}return r},t.toPosition=function(n){var r;return 2<=n.length?(r=360/Math.PI*Math.atan(Math.exp((180-360*n[1])*Math.PI/180))-90,new Sl(360*n[0]-180,r,3<=n.length?t._mercatorZToAltitude(n[2],n[1]):0)):[0,0,0]},t.toPositions=function(n){for(var r=[],o=0,i=n.length;o<i;o++)r.push(this.toPosition(n[o]));return r},t.mercatorScale=function(n){return 1/Math.cos(n*Math.PI/180)},t.meterInMercatorUnits=function(n){return 1/t.earthCircumference*t.mercatorScale(t._latToMercatorY(n))},t._circumferenceAtLatitude=function(n){return t.earthCircumference*Math.cos(n*Math.PI/180)},t._altitudeToMercatorZ=function(n,r){return n/t._circumferenceAtLatitude(r)},t._mercatorZToAltitude=function(n,r){return n*t._circumferenceAtLatitude(t._latToMercatorY(r))},t._latToMercatorY=function(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360},t.earthCircumference=2*Math.PI*Pz(),t}(Array),u1=Object.freeze({__proto__:null,BoundingBox:so,Feature:Ih,FeatureCollection:Lv,GeometryCollection:_Ie,LineString:bIe,MercatorPoint:EIe,MultiLineString:wIe,MultiPoint:xIe,MultiPolygon:CIe,Point:kh,Polygon:jA,Position:Sl});function _L(e,t){return e*e+t*t}function TIe(e,t){return _L(e[0]-t[0],e[1]-t[1])}function IIe(e,i,n){var r,o=i[0],i=i[1],l=n[0]-o,c=n[1]-i;return l==0&&c==0||(1<(r=((e[0]-o)*l+(e[1]-i)*c)/_L(l,c))?(o=n[0],i=n[1]):0<r&&(o+=l*r,i+=c*r)),_L(e[0]-o,e[1]-i)}function kIe(e,t){for(var n,r=e[0],o=[r],i=1,l=e.length;i<l;i++)TIe(n=e[i],r)>t&&(o.push(n),r=n);return r!==n&&o.push(n),o}function bL(e,t,n,r,o){for(var i,l=r,c=t+1;c<n;c++){var f=IIe(e[c],e[t],e[n]);l<f&&(i=c,l=f)}r<l&&(1<i-t&&bL(e,t,i,r,o),o.push(e[i]),1<n-i)&&bL(e,i,n,r,o)}function PIe(e,t){var n=e.length-1,r=[e[0]];return bL(e,0,n,t,r),r.push(e[n]),r}function AIe(e,t,n){return t===void 0&&(t=1),n===void 0&&(n=!1),e.length<=2||(t=t*t,e=PIe(e=n?e:kIe(e,t),t)),e}var MIe=AIe;function RIe(e,t){return MIe(e,t,!0)}var OIe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},CI=function(){function e(t,n){this.M=e._calculateAffineTransform(t,n),this.inverseM=e._calculateAffineTransform(n,t)}return e.prototype.toTarget=function(t,n){return this.transformArray(t,this.M,n)},e.prototype.toSource=function(t,n){return this.transformArray(t,this.inverseM,n)},e.prototype.transformArray=function(t,n,r){var o,i;if(t&&Array.isArray(t)&&Array.isArray(t[0])){var l=[];try{for(var c=OIe(t),f=c.next();!f.done;f=c.next()){var p=f.value;l.push(this.transform(p,n,r))}}catch(g){o={error:g}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return l}return null},e.prototype.transform=function(i,n,r){var o=i[0]*n[0][3]+i[1]*n[1][3]+n[2][3],i=i[0]*n[0][4]+i[1]*n[1][4]+n[2][4];return typeof r=="number"&&0<=r?[Ju(o,r),Ju(i,r)]:[Ju(o,6),Ju(i,6)]},e._calculateAffineTransform=function(t,n){if(t.length!==n.length||t.length<1)throw new Error("Error: source and target arrays must have the same length.");var r=Math.min(t[0].length,n[0].length),o=r+1;if(t.length<r)throw new Error("Erorr: At least "+r+" reference points required.");for(var i=[],l=[],c=0;c<o;c++){l[c]=[];for(var f=0;f<o;f++){f<r&&(i[f]=0);for(var p=l[c][f]=0;p<t.length;p++)f<r&&(i[f]+=c<r?t[p][c]*n[p][f]:n[p][f]),l[c][f]+=r<=c&&r<=f?1:r<=c?t[p][f]:r<=f?t[p][c]:t[p][c]*t[p][f]}l[c]=l[c].concat(i)}if(this._gaussJordanElimination(l))return l;throw new Error("Error: Singular matrix. Points are likely coplanar.")},e._gaussJordanElimination=function(t){for(var n,r=t.length,o=2*r-1,i=0;i<r;i++){for(var l=i,c=i+1;c<r;c++)Math.abs(t[c][i])>Math.abs(t[l][i])&&(l=c);if(n=t[l],t[l]=t[i],t[i]=n,Math.abs(t[i][i])<=1e-12)return!1;for(var f=i+1;f<r;f++)for(var p=t[f][i]/t[i][i],g=i;g<o;g++)t[f][g]-=t[i][g]*p}for(i=r-1;-1<i;i--){for(p=t[i][i],c=0;c<i;c++)for(var v=o-1;i-1<v;v--)t[c][v]-=t[i][v]*t[c][i]/p;t[i][i]/=p;for(var w=r;w<o;w++)t[i][w]/=p}return!0},e}(),DIe=Object.freeze({__proto__:null,get AccelerationUnits(){return Uo},AffineTransform:CI,get AreaUnits(){return Ki},get DistanceUnits(){return jo},get SpeedUnits(){return Mi},get TimeUnits(){return Ri},WEBMERCATOR_MAXLAT:Iz,_precision:Ju,boundingBoxToPolygon:nIe,convertAcceleration:UA,convertArea:b7,convertDistance:um,convertSpeed:m_,convertTimespan:Yx,getAcceleration:w7,getAccelerationFromFeatures:lIe,getAccelerationFromSpeeds:x7,getArea:C7,getCardinalSpline:rIe,getClosestPointOnGeometry:Tk,getConvexHull:hIe,getDestination:Kx,getDistanceTo:lc,getEarthRadius:Pz,getGeodesicPath:oIe,getGeodesicPaths:iIe,getHeading:qg,getLengthOfPath:Mz,getPathDenormalizedAtAntimerian:Az,getPathSplitByAntimeridian:m7,getPixelHeading:sIe,getPointWithHeadingAlongPath:S7,getPointsWithHeadingsAlongPath:pIe,getPosition:Au,getPositionAlongPath:g7,getPositions:Ev,getPositionsAlongPath:fIe,getRegularPolygonPath:v7,getRegularPolygonPaths:aIe,getSpeed:uIe,getSpeedFromFeatures:cIe,getTimespan:Oz,getTravelDistance:dIe,interpolate:yL,mercatorPixelsToPositions:Rz,mercatorPositionsToPixels:hE,normalizeLatitude:rs,normalizeLongitude:za,parseTimestamp:vL,rotatePositions:_7,simplify:RIe}),LIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),NIe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.zoomDelta=1,n.style=Qs.light,n}return LIe(t,e),t}(Hi),FIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zIe=function(e){function t(n){var r=e.call(this)||this;return r.container=null,r.zoomInButton=null,r.zoomOutButton=null,r.zoomChanged=function(o){return r.updateZoomButtonsState()},r.minZoomChanged=function(o){return r.updateZoomButtonsState()},r.maxZoomChanged=function(o){return r.updateZoomButtonsState()},r.options=new NIe().merge(n),r}return FIe(t,e),t.prototype.onAdd=function(n){this.container=this.buildContainer(n,this.options.style,"Zoom Control"),this.container.style.flexDirection="column",this.zoomInButton=this.constructZoomInButton(n),this.zoomOutButton=this.constructZoomOutButton(n);var r=Js("Zoom In"),o=Js("Zoom Out");return this.container.appendChild(this.zoomInButton),this.container.appendChild(r),this.container.appendChild(this.zoomOutButton),this.container.appendChild(o),aa(r,this.zoomInButton),aa(o,this.zoomOutButton),n.events.add("zoom",this.zoomChanged),n.events.add("minzoomchanged",this.minZoomChanged),n.events.add("maxzoomchanged",this.maxZoomChanged),this.map=n,this.container},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),this.map&&(this.map.events.remove("zoom",this.zoomChanged),this.map.events.remove("minzoomchanged",this.minZoomChanged),this.map.events.remove("maxzoomchanged",this.maxZoomChanged),this.map=null),this.container&&(this.container.remove(),this.container=null,this.zoomInButton=null,this.zoomOutButton=null)},t.prototype.updateZoomButtonsState=function(){var n=this.map.getCamera().zoom>=this.map._getMap().getMaxZoom(),r=so.getSouth(this.map.getCamera().bounds)<=-85.0511&&so.getNorth(this.map.getCamera().bounds)>=Iz,r=this.map.getCamera().zoom<=this.map._getMap().getMinZoom()||r;this.zoomInButton&&this.zoomInButton.disabled!=n&&(this.zoomInButton.disabled=n,this.zoomInButton.setAttribute("aria-label",n?"Zoom In disabled":"Zoom In")),this.zoomOutButton&&this.zoomOutButton.disabled!=r&&(this.zoomOutButton.disabled=r,this.zoomOutButton.setAttribute("aria-label",n?"Zoom Out disabled":"Zoom Out"))},t.prototype.constructZoomInButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("zoom-in"),o.setAttribute("aria-label","Zoom In"),o.setAttribute("alt","Zoom In"),o.setAttribute("type","button"),o.addEventListener("click",function(){var i;n.setCamera({maxBounds:(i=n._getMap().getMaxBounds())==null?void 0:i.toArray().flat(),zoom:n.getCamera().zoom+r.options.zoomDelta,duration:t.ZOOM_DURATION_MS,type:"ease"},!0)}),o},t.prototype.constructZoomOutButton=function(n){var r=this,o=document.createElement("button");return o.classList.add("azure-maps-control-button"),o.classList.add("zoom-out"),o.setAttribute("aria-label","Zoom Out"),o.setAttribute("alt","Zoom Out"),o.setAttribute("type","button"),o.addEventListener("click",function(){var i;n.setCamera({maxBounds:(i=n._getMap().getMaxBounds())==null?void 0:i.toArray().flat(),zoom:n.getCamera().zoom-r.options.zoomDelta,duration:t.ZOOM_DURATION_MS,type:"ease"},!0)}),o},t.ZOOM_DURATION_MS=200,t}(Yc),BIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UIe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.style=Qs.light,n.hideIfUnsupported=!1,n.container=void 0,n}return BIe(t,e),t}(Hi),jIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$Ie=function(e){function t(n){var r=e.call(this)||this;return r.map=null,r.isFullscreenState=!1,r.options=new UIe().merge(n),r.control=new Pu.FullscreenControl({container:r.options.container}),r}return jIe(t,e),t.prototype.onAdd=function(n){var r,o,i=this,l=(this.map=n,(l=(l=this.map)==null?void 0:l._getMap())!=null&&l.addControl(this.control),this.buildContainer(n,this.options.style,"Fullscreen Control")),c=this.control._fullscreenButton;return c&&(r=c.querySelector("span"))&&(o=Js("Enter Fullscreen"),l.appendChild(c),c.classList.add("azure-maps-control-button","fullscreen"),r.classList.add("fullscreen-icon","fullscreen-end"),c.removeAttribute("title"),l.appendChild(o),aa(o,c),this.control.on("fullscreenstart",function(){c.removeAttribute("title"),r.classList.remove("fullscreen-end"),r.classList.add("fullscreen-start"),o.innerText="Exit Fullscreen",i.isFullscreenState=!0}),this.control.on("fullscreenend",function(){c.removeAttribute("title"),r.classList.remove("fullscreen-start"),r.classList.add("fullscreen-end"),o.innerText="Enter Fullscreen",i.isFullscreenState=!1})),this.options.hideIfUnsupported&&!t.isSupported()&&(l.style.display="none"),l},t.prototype.onRemove=function(){var n;e.prototype.onRemove.call(this),(n=(n=this.map)==null?void 0:n._getMap())!=null&&n.removeControl(this.control),this.map=null},t.prototype.isFullscreen=function(){return this.isFullscreenState},t.isSupported=function(){var n=document;return n.fullscreenEnabled||n.msFullscreenEnabled||n.mozFullScreenEnabled||n.webkitFullscreenEnabled},t}(Yc),HIe=Object.freeze({__proto__:null,CompassControl:kW,ControlBase:Yc,FullscreenControl:$Ie,PitchControl:r_e,ScaleControl:i_e,StyleControl:YEe,TrafficControl:u7,TrafficLegendControl:tTe,ZoomControl:zIe}),VIe=t7,qIe=1,GIe=4;function WIe(e,t){return VIe(e,qIe|GIe,t=typeof t=="function"?t:void 0)}var $o=fy(WIe),KIe=function(){function e(t){var n=this;this.attach=function(r){n.map!==r&&(n.map&&n.detachFromCurrentMap(),n.map=r,n.map.indicators._getCollectionDiv().appendChild(n.element),n.map.indicators.add(n))},this.remove=function(){n.detachFromCurrentMap(),n.element.remove()},this.getElement=function(){return n.element},this.detachFromCurrentMap=function(){n.map&&(n.map.indicators.remove(n),delete n.map)},this.element=document.createElement("div"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("role","option"),t!=null&&t.setSize&&this.element.setAttribute("aria-setsize",t.setSize.toString()),t!=null&&t.positionInSet&&this.element.setAttribute("aria-posinset",t.positionInSet.toString()),this.element.setAttribute("aria-label","data point"),this.element.classList.add(e.Css.hidden)}return e.Css={hidden:"hidden-accessible-element"},e}(),YIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),v6=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.buffer=128,n.maxZoom=18,n.cluster=!1,n.clusterRadius=50,n.clusterMaxZoom=void 0,n.clusterProperties=void 0,n.lineMetrics=!1,n.tolerance=.375,n.clusterMinPoints=2,n.generateId=!1,n.promoteId=void 0,n.filter=void 0,n}return YIe(t,e),t}(Hi),ZIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xi=function(e){function t(n){var r=e.call(this)||this;return r.id=n||f_(),r}return ZIe(t,e),t.prototype.getId=function(){return this.id},t.prototype._setMap=function(n,r){var o;r===void 0&&(r=!0),n==null||n===void 0?(o=this.map,delete this.map,r&&(this._invokeEvent("sourceremoved",this),o)&&o.events.invoke("sourceremoved",this)):(this.map=n,r&&(this._invokeEvent("sourceadded",this),this.map.events.invoke("sourceadded",this)))},t}(Cm),XIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TT=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zc=function(e){function t(n,r){return n=e.call(this,n)||this,n.requestId=void 0,n.options=new v6().merge(Ka(r)),n.shapes=[],n.shapesMap=new Hc,n}return XIe(t,e),t.prototype.add=function(n,r){this._addNoUpdate(n,r),this._updateSource()},t.prototype.clear=function(){this._clearNoUpdate(),this._updateSource()},t.prototype.dispose=function(){this.options=null,this.shapes=null,this.shapesMap=null,this.map=null},t.prototype.getClusterExpansionZoom=function(n){var r=this;return new Promise(function(o,i){var l;r.map?(l=r.map._getMap().getSource(r.getId()))&&l.type==="geojson"&&l.getClusterExpansionZoom(n).then(function(c){typeof c=="number"&&o(c)}).catch(function(c){c&&i(c)}):i("The DataSource hasn't been added to a map.")})},t.prototype.getClusterChildren=function(n){var r=this;return new Promise(function(o,i){var l;r.map?(l=r.map._getMap().getSource(r.getId()))&&l.type==="geojson"&&l.getClusterChildren(n).then(function(c){c&&o(r.map.sources._mapFeaturesToShapes(c,!1,r))}).catch(function(c){c&&i(c)}):i("The DataSource hasn't been added to a map.")})},t.prototype.getClusterLeaves=function(n,r,o){var i=this;return new Promise(function(l,c){var f;i.map?(f=i.map._getMap().getSource(i.getId()))&&f.type==="geojson"&&f.getClusterLeaves(n,r,o).then(function(p){p&&l(i.map.sources._mapFeaturesToShapes(p,!1,i))}).catch(function(p){p&&c(p)}):c("The DataSource hasn't been added to a map.")})},t.prototype.getOptions=function(){return Ka(this.options)},t.prototype.getShapes=function(){return Array.from(this.shapes)},t.prototype.importDataFromUrl=function(n){var r=this;return fetch(n,{method:"GET",mode:"cors"}).then(function(o){if(o.ok)return o.json();throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText))}).then(function(o){r.add(o)})},t.prototype.getShapeById=function(n){return this.shapes[this.shapesMap.get(n)]||null},t.prototype.remove=function(i){var r,o,i=Array.isArray(i)?i:[i];try{for(var l=TT(i),c=l.next();!c.done;c=l.next()){var f=c.value;typeof f=="number"?this._removeByIndex(f):this._removeById(f)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}this._updateSource()},t.prototype.removeById=function(i){var r,o,i=Array.isArray(i)?i:[i];try{for(var l=TT(i),c=l.next();!c.done;c=l.next()){var f=c.value;this._removeById(f)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}this._updateSource()},t.prototype.setOptions=function(n){n=new v6().merge(this.options,Ka(n)),ku(this.options,n)||(this._invokeEvent("datasourceupdated",this),this.options=n,this.map&&this.map._rebuildStyle())},t.prototype.setShapes=function(n){this._clearNoUpdate(),this.add(n)},t.prototype.toJson=function(){return new Lv(this.shapes.map(function(n){return n.toJson()}))},t.prototype._toJson=function(){return new Lv(this.shapes.map(function(n){return n._toJson()}))},t.prototype._buildSource=function(){var n={type:"geojson",data:this._toJson(),maxzoom:this.options.maxZoom,cluster:this.options.cluster,clusterRadius:this.options.clusterRadius,tolerance:this.options.tolerance,lineMetrics:this.options.lineMetrics,clusterProperties:this.options.clusterProperties,buffer:this.options.buffer,clusterMinPoints:this.options.clusterMinPoints,generateId:this.options.generateId,promoteId:this.options.promoteId,filter:this.options.filter};return typeof this.options.clusterMaxZoom=="number"&&(n.clusterMaxZoom=this.options.clusterMaxZoom),n},t.prototype._isDeepEqual=function(n){var r;return this.constructor===n.constructor&&(r=this._buildSource(),n=n._buildSource(),r.type===n.type)&&r.maxzoom===n.maxzoom&&r.cluster===n.cluster&&r.clusterRadius===n.clusterRadius&&r.tolerance===n.tolerance&&r.lineMetrics===n.lineMetrics&&JSON.stringify(r.clusterProperties)===JSON.stringify(n.clusterProperties)&&r.buffer===n.buffer&&r.clusterMinPoints===n.clusterMinPoints&&r.generateId===n.generateId&&r.promoteId===n.promoteId&&r.filter===n.filter},t.prototype._addNoUpdate=function(n,r){var o;n instanceof ia?(this._addToSources(n,r),o=[n]):Array.isArray(n)?(o=n.map(function(i){return i instanceof ia?i:new ia(i)}),this._addToSources(o,r)):n.type==="FeatureCollection"?(o=n.features.map(function(i){return new ia(i)}),this._addToSources(o,r)):n.type==="GeometryCollection"?(o=n.geometries.map(function(i){return new ia(i)}),this._addToSources(o,r)):(n=new ia(n),this._addToSources(n,r),o=[n]),this._invokeEvent("dataadded",o)},t.prototype._clearNoUpdate=function(){var n=this.shapes;this.shapes=[],this.shapesMap=new Hc,n&&0<n.length&&this._invokeEvent("dataremoved",n)},t.prototype._updateSource=function(){var n=this;this.requestId===void 0&&(this.requestId=requestAnimationFrame(function(){n._updateMboxSource(),n.requestId=void 0}))},t.prototype._addToSources=function(n,r){var o,i,l,c;if(n=Array.isArray(n)?n:[n],typeof r!="number")try{for(var f=TT(n),p=f.next();!p.done;p=f.next()){var g=p.value;this.shapes.push(g),this.shapesMap.set(g.getId(),this.shapes.length-1)}}catch(T){o={error:T}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}else for(var v=n.length-1;0<=v;v--)this.shapes.splice(r,0,n[v]),this._updateShapesMap(r);try{for(var w=TT(n),C=w.next();!C.done;C=w.next())(g=C.value)._setDataSource(this)}catch(T){l={error:T}}finally{try{C&&!C.done&&(c=w.return)&&c.call(w)}finally{if(l)throw l.error}}},t.prototype._removeById=function(r){var r=r instanceof ia?r.getId():typeof r=="string"||typeof r=="number"?r:r.id,o=this.shapes[this.shapesMap.get(r)];o&&(o._setDataSource(null),this.shapes.splice(this.shapesMap.get(r),1),this._updateShapesMap(this.shapesMap.get(r)),this.shapesMap.delete(r),this._invokeEvent("dataremoved",[o]))},t.prototype._removeByIndex=function(n){var r;if(n>=this.shapes.length)throw new Error("The specified remove index '".concat(n,"' ")+"is greater than the maximum possible index '".concat(this.shapes.length-1,"'"));r=this.shapes[n],this.shapesMap.delete(r.getId()),r._setDataSource(null),this.shapes.splice(n,1),this._updateShapesMap(n),this._invokeEvent("dataremoved",[r])},t.prototype._updateShapesMap=function(n){for(var r=n;r<this.shapes.length;r++)this.shapesMap.set(this.shapes[r].getId(),r)},t.prototype._updateMboxSource=function(){var n;this.map&&this.map._getMap()&&(n=this.map._getMap().getSource(this.getId()))&&n.type==="geojson"&&n.setData(this._toJson())},t}(Xi),QIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),E7=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.bounds=void 0,n.minZoom=0,n.maxZoom=22,n.isTMS=!1,n.tiles=void 0,n.url=void 0,n}return QIe(t,e),t}(Hi),JIe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),T7=function(e){function t(n,r){return n=e.call(this,n)||this,n.options=new E7().merge(Ka(r)),n}return JIe(t,e),t.prototype.getOptions=function(){return Ka(this.options)},t.prototype.getShape=function(n,r){return this.map._getMap().querySourceFeatures(this.getId(),{sourceLayer:n,filter:r})},t.prototype._buildSource=function(){var n={type:"vector"};return this.options.bounds&&(n.bounds=this.options.bounds),this.options.tiles?(n.tiles=this.options.tiles,n.minzoom=this.options.minZoom,n.maxzoom=this.options.maxZoom):this.options.url&&(n.url=this.options.url),this.options.isTMS&&(n.scheme="tms"),n},t.prototype._isDeepEqual=function(n){var r,o;return this.constructor===n.constructor&&(r=this._buildSource(),o=n._buildSource(),r.type===o.type)&&r.url===o.url&&(r.tiles===void 0&&o.tiles===void 0||r.tiles&&o.tiles&&r.tiles.length===o.tiles.length&&r.tiles.every(function(i,l){return i===o.tiles[l]}))&&r.minzoom===o.minzoom&&r.maxzoom===o.maxzoom&&r.bounds===o.bounds&&r.attribution===o.attribution&&r.promoteId===o.promoteId&&r.scheme===o.scheme},t}(Xi),eke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),I7=function(e){function t(n,r,o){return n=e.call(this,n)||this,n.source=r,n}return eke(t,e),t.prototype._isDeepEqual=function(n){var r;return this.constructor===n.constructor&&(r=this.source,n=n.source,r.type===n.type)&&r.canvas===n.canvas&&JSON.stringify(r.coordinates)===JSON.stringify(n.coordinates)&&r.animate===n.animate},t.prototype._buildSource=function(){return this.source},t}(Xi),tke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),k7=function(e){function t(n,r,o){return n=e.call(this,n)||this,n.source=r,n}return tke(t,e),t.prototype._isDeepEqual=function(n){var r;return this.constructor===n.constructor&&(r=this.source,n=n.source,r.type===n.type)},t.prototype._buildSource=function(){return this.source},t}(Xi),nke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dz=function(e){function t(n,r,o){return n=e.call(this,n)||this,n.source=r,n}return nke(t,e),t.prototype._isDeepEqual=function(n){var r;return this.constructor===n.constructor&&(r=this.source,n=n.source,r.type===n.type)&&JSON.stringify(r.coordinates)===JSON.stringify(n.coordinates)&&r.url===n.url},t.prototype._buildSource=function(){return this.source},t}(Xi),rke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),P7=function(e){function t(n,r,o){return n=e.call(this,n)||this,n.source=r,n}return rke(t,e),t.prototype._isDeepEqual=function(n){var r;return this.constructor===n.constructor&&(r=this.source,n=n.source,r.type===n.type)&&JSON.stringify(r.coordinates)===JSON.stringify(n.coordinates)&&r.urls===n.urls},t.prototype._buildSource=function(){return this.source},t}(Xi),oke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ike=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.tileSize=512,n}return oke(t,e),t}(E7),ake=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ske=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.encoding=void 0,n}return ake(t,e),t}(ike),lke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),A7=window&&window.__assign||function(){return(A7=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},uke=function(e){function t(n,r){return n=e.call(this,n)||this,n.options=new ske().merge(Ka(r)),n}return lke(t,e),t.prototype.getOptions=function(){return Ka(this.options)},t.prototype._buildSource=function(){return A7({type:"raster-dem",bounds:this.options.bounds,minzoom:this.options.minZoom,maxzoom:this.options.maxZoom,tileSize:this.options.tileSize,encoding:this.options.encoding},this.options.tiles?{tiles:this.options.tiles}:{url:this.options.url})},t.prototype._isDeepEqual=function(n){return this.constructor===n.constructor&&(n=n.getOptions(),this.options.url===n.url)&&this.options.tiles===n.tiles&&this.options.bounds===n.bounds&&this.options.minZoom===n.minZoom&&this.options.maxZoom===n.maxZoom&&this.options.tileSize===n.tileSize&&this.options.encoding===n.encoding},t}(Xi),M7=Object.freeze({__proto__:null,CanvasSource:I7,DataSource:zc,ElevationTileSource:uke,ImageSource:Dz,Source:Xi,UnknownSource:k7,VectorTileSource:T7,VideoSource:P7}),cke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oa=function(e){function t(n){var r=e.call(this)||this;return r.id=n||f_(),r}return cke(t,e),t.prototype.getId=function(){return this.id},t.prototype.getMap=function(){return this.map||null},t.prototype.onAdd=function(n){this.map=n,this._invokeEvent("layeradded",this),this.map.events.invoke("layeradded",this)},t.prototype.onRemove=function(){var n=this.map;delete this.map,this._invokeEvent("layerremoved",this),n&&n.events.invoke("layerremoved",this)},t._isMBoxEvent=function(n){return!this.LayerEvents.hasOwnProperty(n)},t.prototype._updateBaseProperties=function(n,r){this._updateFilter(n.filter,r.filter),this._updateZoomRange(n.minZoom,r.minZoom,n.maxZoom,r.maxZoom),this._updateLayoutProperty("visibility",n.visible,r.visible,n.visible?"visible":"none")},t.prototype._updateFilter=function(n,r){ku(n,r)||this.map._getMap().setFilter(this.id,n)},t.prototype._updatePaintProperty=function(n,r,o,i){ku(r,o)||this.map._getMap().setPaintProperty(this.id,n,i||r)},t.prototype._updateLayoutProperty=function(n,r,o,i){ku(r,o)||this.map._getMap().setLayoutProperty(this.id,n,i||r)},t.prototype._updateZoomRange=function(n,r,o,i){n===r&&i===o||this.map._getMap().setLayerZoomRange(this.id,n,o)},t.LayerEvents={layeradded:void 0,layerremoved:void 0,focusin:void 0,focusout:void 0},t}(Cm),dke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),my=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.filter=void 0,n.minZoom=0,n.maxZoom=24,n.visible=!0,n}return dke(t,e),t._cloneCustomizer=function(n){if(n instanceof Xi)return n},t}(Hi),hke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),gC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.color="#1A73AA",n.blur=0,n.opacity=1,n.strokeColor="#FFFFFF",n.strokeOpacity=1,n.strokeWidth=2,n.pitchAlignment="viewport",n.radius=8,n.createIndicators=!1,n.accessibilityIdKey=void 0,n}return hke(t,e),t}(my),fke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pke=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},mke=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},_6=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},b6=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},wL=function(e){function t(n,r,o){var i=e.call(this,r)||this;return i.accessibleIndicator=[],i._setAccessibleIndicator=function(){return pke(i,void 0,void 0,function(){var l,c,f,p,g,v,w=this;return mke(this,function(C){return this.accessibleIndicator.forEach(function(T){return T.remove()}),this.accessibleIndicator=[],l=this.map.layers.getRenderedShapes(this.map.getCamera().bounds,this),c=this.options.accessibilityIdKey||(this._getDataSource()?ia._shapeIdPropName:void 0),f=function(T,k){var P=T[k],O=P instanceof ia?P.toJson():P,L=new KIe({positionInSet:k+1,setSize:T.length}),D=L.getElement(),N=_6(w.map.positionsToPixels([w.getFirstCoordinate(O.geometry.coordinates)]),1)[0];return D.addEventListener("focusin",function(F){w.accessibleIndicator.filter(function(B){return B!==L}).forEach(function(B){return B.remove()}),0<=k-1&&p(L,f(T,k-1)),k+1<T.length&&v(f(T,k+1)),2<=k&&k==T.length-1&&g(f(T,0)),k==0&&2<=T.length&&v(f(T,T.length-1)),c!==void 0&&w.map._getMap().setPaintProperty(w.id,"circle-stroke-color",["case",["==",["get",c],O.properties[c]],"#000000",w.options.strokeColor]),F={target:D,type:"focusin",map:w.map,shape:P,originalEvent:F,pixel:N},w._invokeEvent("focusin",F)}),D.addEventListener("focusout",function(F){c!==void 0&&w.map._getMap().setPaintProperty(w.id,"circle-stroke-color",["case",["==",["get",c],O.properties[c]],w.options.strokeColor,w.options.strokeColor]),F={target:D,type:"focusout",map:w.map,shape:P,originalEvent:F,pixel:N},w._invokeEvent("focusout",F)}),w.accessibleIndicator.push(L),L},p=function(T,k){k.attach(w.map),k=k.getElement(),T=T.getElement(),T.parentElement.insertBefore(k,T)},g=function(k){k.attach(w.map);var k=k.getElement(),P=k.parentElement;P.insertBefore(k,P.firstElementChild)},v=function(T){T.attach(w.map)},0<l.length&&v(f(l,0)),1<l.length&&v(f(l,l.length-1)),[2]})})},i.options=new gC().merge($o(o,gC._cloneCustomizer)),i.options.source=n||i.options.source,i}return fke(t,e),t.prototype.getOptions=function(){return $o(this.options,gC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new gC().merge(this.options,$o(n,gC._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("circle-blur",n.blur,this.options.blur),this._updatePaintProperty("circle-color",n.color,this.options.color),this._updatePaintProperty("circle-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("circle-radius",n.radius,this.options.radius),this._updatePaintProperty("circle-stroke-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("circle-stroke-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("circle-stroke-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("circle-pitch-alignment",n.pitchAlignment,this.options.pitchAlignment)}this.options=n},t.prototype.onAdd=function(n){var r,o,i=this;e.prototype.onAdd.call(this,n),this.options.createIndicators&&(n.events.addOnce("idle",this._setAccessibleIndicator),n.events.add("moveend",this._setAccessibleIndicator),(r=this._getDataSource())?n.events.add("dataadded",r,function(){n.events.addOnce("idle",i._setAccessibleIndicator)}):(o=typeof this.options.source=="string"?this.options.source:this.options.source.getId(),n.events.add("sourcedata",function(l){((l=l.source)==null?void 0:l.getId())===o&&n._getMap().isSourceLoaded(o)&&(l=i._getSourceDataEventCacheKey())!==i.sourceDataEventCacheKey&&(i._setAccessibleIndicator(),i.sourceDataEventCacheKey=l)})))},t.prototype.onRemove=function(){var n;this.options.createIndicators&&(this.map.events.remove("idle",this._setAccessibleIndicator),this.map.events.remove("moveend",this._setAccessibleIndicator),(n=this._getDataSource())?this.map.events.remove("dataadded",n,this._setAccessibleIndicator):this.map.events.remove("sourcedata",this._setAccessibleIndicator)),e.prototype.onRemove.call(this)},t.prototype._getSourceDataEventCacheKey=function(){var n;if(this.map)return n=this.map.getServiceOptions().mapConfiguration,b6(b6([],_6(this.map.getCamera().bounds),!1),[this.map.getCamera().zoom,this.map.getCamera().pitch,this.map.getStyle().style,n instanceof Object?n.id:n],!1).join(",")},t.prototype._getDataSource=function(){var n=typeof this.options.source=="string"?this.map.sources.getById(this.options.source):this.options.source;if(n instanceof zc)return n},t.prototype._buildLayers=function(){var n={id:this.id,type:"circle",source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"circle-color":this.options.color,"circle-blur":this.options.blur,"circle-opacity":this.options.opacity,"circle-stroke-color":this.options.strokeColor,"circle-stroke-opacity":this.options.strokeOpacity,"circle-stroke-width":this.options.strokeWidth,"circle-pitch-alignment":this.options.pitchAlignment,"circle-radius":this.options.radius},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(n.filter=this.options.filter),this.options.sourceLayer&&(n["source-layer"]=this.options.sourceLayer),[n]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t.prototype.getFirstCoordinate=function(n){return Array.isArray(n[0])?this.getFirstCoordinate(n[0]):n},t}(oa),gke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.color=["interpolate",["linear"],["heatmap-density"],0,"rgba(0,0, 255,0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],n.intensity=1,n.opacity=1,n.radius=30,n.weight=1,n}return gke(t,e),t._cloneCustomizer=function(n){if(n instanceof Xi)return n},t}(my),yke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vke=function(e){function t(n,r,o){return r=e.call(this,r)||this,r.options=new yC().merge($o(o,yC._cloneCustomizer)),r.options.source=n||r.options.source,r}return yke(t,e),t.prototype.getOptions=function(){return $o(this.options,yC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new yC().merge(this.options,$o(n,yC._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("heatmap-color",n.color,this.options.color),this._updatePaintProperty("heatmap-intensity",n.intensity,this.options.intensity),this._updatePaintProperty("heatmap-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("heatmap-radius",n.radius,this.options.radius),this._updatePaintProperty("heatmap-weight",n.weight,this.options.weight)}this.options=n},t.prototype._buildLayers=function(){var n={id:this.id,type:"heatmap",source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"heatmap-color":this.options.color,"heatmap-intensity":this.options.intensity,"heatmap-opacity":this.options.opacity,"heatmap-radius":this.options.radius,"heatmap-weight":this.options.weight},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(n.filter=this.options.filter),this.options.sourceLayer&&(n["source-layer"]=this.options.sourceLayer),[n]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t}(oa),_ke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),R7=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.contrast=0,n.fadeDuration=300,n.hueRotation=0,n.maxBrightness=1,n.minBrightness=0,n.opacity=1,n.saturation=0,n}return _ke(t,e),t}(my),bke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.url=void 0,n.coordinates=void 0,n}return bke(t,e),t._cloneCustomizer=function(n){if(n instanceof Xi)return n},t}(R7),wke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),M1=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return wke(t,e),t.prototype._getSourceIds=function(){var n=new Set;return n.add(this._getSourceId()),n},t.prototype.onAdd=function(n){e.prototype.onAdd.call(this,n)},t}(oa),xke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cke=function(e){function t(n,r){return r=e.call(this,r)||this,r.isLoading=!1,r.options=new vC().merge($o(n,vC._cloneCustomizer)),r.img=new Image,r.reloadImage(),r}return xke(t,e),t.prototype.getOptions=function(){return $o(this.options,vC._cloneCustomizer)},t.prototype.setOptions=function(l){var r,o=new vC().merge(this.options,$o(l,vC._cloneCustomizer)),i=typeof l.url=="string"&&l.url!==this.getOptions().url,l=l.coordinates!==void 0&&l.coordinates!==this.getOptions().coordinates;this.map&&(this._updateBaseProperties(o,this.options),this._updatePaintProperty("raster-contrast",o.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",o.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",o.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",o.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",o.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",o.saturation,this.options.saturation),r=this.map._getMap().getSource(this._getSourceId()))&&r.updateImage(o),this.options=o,i?this.reloadImage():l&&this.updateTransform()},t.prototype.getPositions=function(n){return this.transform.then(function(r){return r.toTarget(n)})},t.prototype.getPixels=function(n){return this.transform.then(function(r){return r.toSource(n)})},t.getCoordinatesFromRefPoints=function(n,r,o,i){return new CI(o,i).toTarget([[0,0],[n,0],[n,r],[0,r]])},t.getCoordinatesFromEdges=function(n,r,o,i,l){return typeof l!="number"&&(l=0),r=[Math.min(i,o),r,Math.max(i,o),n],i=so.getCenter(r),_7([so.getNorthWest(r),so.getNorthEast(r),so.getSouthEast(r),so.getSouthWest(r)],i,l)},t.prototype._buildLayers=function(){var n={id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-opacity":this.options.opacity,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-min":this.options.minBrightness,"raster-brightness-max":this.options.maxBrightness,"raster-saturation":this.options.saturation,"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(n.filter=this.options.filter),[n]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._buildSource=function(){return{type:"image",url:this.options.url,coordinates:this.options.coordinates}},t.prototype._getSourceId=function(){return"".concat(this.getId(),"-ImageSource")},t.prototype.reloadImage=function(){var n=this;this.options.url&&(this.transform=new Promise(function(r,o){n.img.onload=function(){var i=[[0,0],[n.img.width,0],[n.img.width,n.img.height],[0,n.img.height]];r(new CI(i,n.options.coordinates)),n.isLoading=!1},n.img.onerror=n.img.onabort=function(){o("Failed to load image")},n.isLoading=!0,n.img.src=n.options.url}))},t.prototype.updateTransform=function(){var n;this.isLoading||(n=[[0,0],[this.img.width,0],[this.img.width,this.img.height],[0,this.img.height]],this.transform=Promise.resolve(new CI(n,this.options.coordinates)))},t.prototype._getSourceWrapper=function(){var n=this._getSourceId(),r=this._buildSource();return new Dz(n,r)},t}(M1),Ske=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_C=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.lineCap="round",n.lineJoin="round",n.blur=0,n.strokeColor="#1E90FF",n.strokeDashArray=void 0,n.strokeGradient=void 0,n.offset=0,n.strokeOpacity=1,n.translate=new Tl(0,0),n.translateAnchor="map",n.strokeWidth=2,n}return Ske(t,e),t}(my),Eke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bg=window&&window.__assign||function(){return(bg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xL=function(e){function t(n,r,o){return r=e.call(this,r)||this,r.options=new _C().merge($o(o,_C._cloneCustomizer)),r.options.source=n||r.options.source,r}return Eke(t,e),t.prototype.getOptions=function(){return $o(this.options,_C._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new _C().merge(this.options,$o(n,_C._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("line-blur",n.blur,this.options.blur),this._updateLayoutProperty("line-cap",n.lineCap,this.options.lineCap),this._updateLayoutProperty("line-join",n.lineJoin,this.options.lineJoin),this._updatePaintProperty("line-offset",n.offset,this.options.offset),this._updatePaintProperty("line-color",n.strokeColor,this.options.strokeColor),this._updatePaintProperty("line-dasharray",n.strokeDashArray,this.options.strokeDashArray),this._updatePaintProperty("line-gradient",n.strokeGradient,this.options.strokeGradient),this._updatePaintProperty("line-opacity",n.strokeOpacity,this.options.strokeOpacity),this._updatePaintProperty("line-width",n.strokeWidth,this.options.strokeWidth),this._updatePaintProperty("line-translate",n.translate,this.options.translate),this._updatePaintProperty("line-translate-anchor",n.translateAnchor,this.options.translateAnchor)}this.options=n},t.prototype._buildLayers=function(){return[bg(bg(bg(bg({id:this.id,type:"line"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none","line-cap":this.options.lineCap,"line-join":this.options.lineJoin},paint:bg(bg(bg({"line-blur":this.options.blur,"line-color":this.options.strokeColor},this.options.strokeDashArray?{"line-dasharray":this.options.strokeDashArray}:{}),this.options.strokeGradient?{"line-gradient":this.options.strokeGradient}:{}),{"line-offset":this.options.offset,"line-opacity":this.options.strokeOpacity,"line-translate":this.options.translate,"line-translate-anchor":this.options.translateAnchor,"line-width":this.options.strokeWidth})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t}(oa),Tke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.base=0,n.fillColor="#1E90FF",n.height=0,n.fillOpacity=1,n.fillPattern=void 0,n.translate=new Tl(0,0),n.translateAnchor="map",n.verticalGradient=!0,n}return Tke(t,e),t}(my),Ike=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vv=window&&window.__assign||function(){return(vv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},kke=function(e){function t(n,r,o){return r=e.call(this,r)||this,r.options=new bC().merge($o(o,bC._cloneCustomizer)),r.options.source=n||r.options.source,r}return Ike(t,e),t.prototype.getOptions=function(){return $o(this.options,bC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new bC().merge(this.options,$o(n,bC._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-extrusion-base",n.base,this.options.base),this._updatePaintProperty("fill-extrusion-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-extrusion-height",n.height,this.options.height),this._updatePaintProperty("fill-extrusion-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-extrusion-pattern",n.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-extrusion-translate",n.translate,this.options.translate),this._updatePaintProperty("fill-extrusion-translate-anchor",n.translateAnchor,this.options.translateAnchor),this._updatePaintProperty("fill-extrusion-vertical-gradient",n.verticalGradient,this.options.verticalGradient)}this.options=n},t.prototype._buildLayers=function(){return[vv(vv(vv(vv({id:this.id,type:"fill-extrusion"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:vv(vv({"fill-extrusion-base":this.options.base,"fill-extrusion-height":this.options.height,"fill-extrusion-opacity":this.options.fillOpacity},this.options.fillPattern?{"fill-extrusion-pattern":this.options.fillPattern}:{"fill-extrusion-color":this.options.fillColor}),{"fill-extrusion-translate":this.options.translate,"fill-extrusion-translate-anchor":this.options.translateAnchor,"fill-extrusion-vertical-gradient":this.options.verticalGradient})}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t}(oa),Pke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.fillColor="#1E90FF",n.fillOpacity=.5,n.fillPattern=void 0,n.fillAntialias=!0,n}return Pke(t,e),t}(my),Ake=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CL=function(e){function t(n,r,o){return r=e.call(this,r)||this,r.options=new wC().merge($o(o,wC._cloneCustomizer)),r.options.source=n||r.options.source,r}return Ake(t,e),t.prototype.getOptions=function(){return $o(this.options,wC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new wC().merge(this.options,$o(n,wC._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("fill-color",n.fillColor,this.options.fillColor),this._updatePaintProperty("fill-opacity",n.fillOpacity,this.options.fillOpacity),this._updatePaintProperty("fill-pattern",n.fillPattern,this.options.fillPattern),this._updatePaintProperty("fill-antialias",n.fillAntialias,this.options.fillAntialias)}this.options=n},t.prototype._buildLayers=function(){var n={id:this.id,type:"fill",source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:{visibility:this.options.visible?"visible":"none"},paint:{"fill-opacity":this.options.fillOpacity,"fill-antialias":this.options.fillAntialias},minzoom:this.options.minZoom,maxzoom:this.options.maxZoom};return this.options.filter&&(n.filter=this.options.filter),this.options.sourceLayer&&(n["source-layer"]=this.options.sourceLayer),this.options.fillPattern?n.paint["fill-pattern"]=this.options.fillPattern:n.paint["fill-color"]=this.options.fillColor,[n]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t}(oa),Mke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rke=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.allowOverlap=!1,n.anchor="bottom",n.ignorePlacement=!1,n.image="marker-blue",n.offset=new Tl(0,0),n.optional=!1,n.padding=2,n.pitchAlignment="auto",n.rotation=0,n.rotationAlignment="auto",n.size=1,n.opacity=1,n}return Mke(t,e),t}(Hi),Oke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dke=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.allowOverlap=!1,n.anchor="center",n.textField=void 0,n.font=["StandardFont-Regular"],n.ignorePlacement=!1,n.justify="center",n.offset=new Tl(0,0),n.optional=!1,n.padding=2,n.pitchAlignment="auto",n.radialOffset=void 0,n.rotation=0,n.rotationAlignment="auto",n.variableAnchor=void 0,n.size=16,n.color="#000000",n.haloBlur=0,n.haloColor="rgba(0,0,0,0)",n.haloWidth=0,n.opacity=1,n}return Oke(t,e),t}(Hi),Lke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.source=void 0,n.sourceLayer=void 0,n.iconOptions=new Rke,n.textOptions=new Dke,n.placement="point",n.sortKey=void 0,n.zOrder="auto",n.lineSpacing=250,n}return Lke(t,e),t}(my),Nke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_v=window&&window.__assign||function(){return(_v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Ik=function(e){function t(n,r,o){return r=e.call(this,r)||this,r.options=new xC().merge($o(o,xC._cloneCustomizer)),r.options.source=n||r.options.source,r}return Nke(t,e),t.prototype.getOptions=function(){return $o(this.options,xC._cloneCustomizer)},t.prototype.getSource=function(){return this.options.source},t.prototype.setOptions=function(n){if(n=new xC().merge(this.options,$o(n,xC._cloneCustomizer)),this.map){if(n.source!==this.options.source||n.sourceLayer!==this.options.sourceLayer)return this.options=n,void this.map.layers.add(this);var r=this.options,o=n.iconOptions,i=r.iconOptions,l=n.textOptions,c=r.textOptions;this._updateBaseProperties(n,r),this._updateLayoutProperty("symbol-spacing",n.lineSpacing,r.lineSpacing),this._updateLayoutProperty("symbol-placement",n.placement,r.placement),this._updateLayoutProperty("symbol-sort-key",n.sortKey,r.sortKey),this._updateLayoutProperty("symbol-z-order",n.zOrder,r.zOrder),this._updateLayoutProperty("icon-allow-overlap",o.allowOverlap,i.allowOverlap),this._updateLayoutProperty("icon-anchor",o.anchor,i.anchor),this._updateLayoutProperty("icon-ignore-placement",o.ignorePlacement,i.ignorePlacement),this._updateLayoutProperty("icon-image",o.image,i.image),this._updateLayoutProperty("icon-offset",o.offset,i.offset),this._updatePaintProperty("icon-opacity",o.opacity,i.opacity),this._updateLayoutProperty("icon-optional",o.optional,i.optional),this._updateLayoutProperty("icon-padding",o.padding,i.padding),this._updateLayoutProperty("icon-pitch-alignment",o.pitchAlignment,i.pitchAlignment),this._updateLayoutProperty("icon-rotate",o.rotation,i.rotation),this._updateLayoutProperty("icon-rotation-alignment",o.rotationAlignment,i.rotationAlignment),this._updateLayoutProperty("icon-size",o.size,i.size),this._updateLayoutProperty("text-allow-overlap",l.allowOverlap,c.allowOverlap),this._updateLayoutProperty("text-anchor",l.anchor,c.anchor),this._updatePaintProperty("text-color",l.color,c.color),this._updateLayoutProperty("text-font",l.font,c.font),this._updateLayoutProperty("text-ignore-placement",l.ignorePlacement,c.ignorePlacement),this._updateLayoutProperty("text-justify",l.justify,c.justify),this._updatePaintProperty("text-halo-blur",l.haloBlur,c.haloBlur),this._updatePaintProperty("text-halo-color",l.haloColor,c.haloColor),this._updatePaintProperty("text-halo-width",l.haloWidth,c.haloWidth),this._updateLayoutProperty("text-offset",l.offset,c.offset),this._updatePaintProperty("text-opacity",l.opacity,c.opacity),this._updateLayoutProperty("text-optional",l.optional,c.optional),this._updateLayoutProperty("text-padding",l.padding,c.padding),this._updateLayoutProperty("text-pitch-alignment",l.pitchAlignment,c.pitchAlignment),this._updateLayoutProperty("text-radial-offset",l.radialOffset,c.radialOffset),this._updateLayoutProperty("text-rotate",l.rotation,c.rotation),this._updateLayoutProperty("text-rotation-alignment",l.rotationAlignment,c.rotationAlignment),this._updateLayoutProperty("text-size",l.size,c.size),this._updateLayoutProperty("text-variable-anchor",l.variableAnchor,c.variableAnchor),this._updateLayoutProperty("text-field",l.textField,c.textField)}this.options=n},t.prototype._buildLayers=function(){var n=_v(_v(_v(_v({id:this.id,type:"symbol"},this.options.sourceLayer&&{"source-layer":this.options.sourceLayer}),{source:this.options.source instanceof Xi?this.options.source.getId():this.options.source,layout:_v(_v({visibility:this.options.visible?"visible":"none","symbol-placement":this.options.placement,"symbol-spacing":this.options.lineSpacing,"symbol-z-order":this.options.zOrder,"text-allow-overlap":this.options.textOptions.allowOverlap,"text-anchor":this.options.textOptions.anchor},this.options.textOptions.textField&&{"text-field":this.options.textOptions.textField}),{"text-font":this.options.textOptions.font,"text-ignore-placement":this.options.textOptions.ignorePlacement,"text-justify":this.options.textOptions.justify,"text-offset":this.options.textOptions.offset,"text-optional":this.options.textOptions.optional,"text-padding":this.options.textOptions.padding,"text-pitch-alignment":this.options.textOptions.pitchAlignment,"text-rotate":this.options.textOptions.rotation,"text-rotation-alignment":this.options.textOptions.rotationAlignment,"text-size":this.options.textOptions.size,"icon-allow-overlap":this.options.iconOptions.allowOverlap,"icon-anchor":this.options.iconOptions.anchor,"icon-ignore-placement":this.options.iconOptions.ignorePlacement,"icon-image":this.options.iconOptions.image,"icon-offset":this.options.iconOptions.offset,"icon-optional":this.options.iconOptions.optional,"icon-padding":this.options.iconOptions.padding,"icon-pitch-alignment":this.options.iconOptions.pitchAlignment,"icon-rotate":this.options.iconOptions.rotation,"icon-rotation-alignment":this.options.iconOptions.rotationAlignment,"icon-size":this.options.iconOptions.size}),paint:{"text-color":this.options.textOptions.color,"text-halo-blur":this.options.textOptions.haloBlur,"text-halo-color":this.options.textOptions.haloColor,"text-halo-width":this.options.textOptions.haloWidth,"text-opacity":this.options.textOptions.opacity,"icon-opacity":this.options.iconOptions.opacity}}),this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom});return this.options.sortKey!==void 0&&(n.layout["symbol-sort-key"]=this.options.sortKey),this.options.textOptions.radialOffset!==void 0&&(n.layout["text-radial-offset"]=this.options.textOptions.radialOffset),this.options.textOptions.variableAnchor!==void 0&&(n.layout["text-variable-anchor"]=this.options.textOptions.variableAnchor),[n]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){var n=new Set;return this.options.source instanceof Xi?n.add(this.options.source.getId()):n.add(this.options.source),n},t}(oa),Fke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),c1=window&&window.__assign||function(){return(c1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},O7=function(e){function t(n,r,o){return n=e.call(this,n)||this,n.source=n._modifySource(r,o),n}return Fke(t,e),t.prototype._buildSource=function(){return this.source},t.prototype._isDeepEqual=function(n){var r,o,i,l;return this.constructor===n.constructor&&(l=this.source,r=n.source,n=l.type===r.type&&l.url===r.url&&(l.tiles===void 0&&r.tiles===void 0||l.tiles&&r.tiles&&l.tiles.length===r.tiles.length&&l.tiles.every(function(c,f){return c===r.tiles[f]}))&&l.minzoom===r.minzoom&&l.maxzoom===r.maxzoom&&l.bounds===r.bounds&&l.attribution===r.attribution,o=l.type!=="raster"||l.type==="raster"&&l.type===r.type&&l.tileSize===r.tileSize&&l.scheme===r.scheme,i=l.type!=="raster-dem"||l.type==="raster-dem"&&l.type===r.type&&l.tileSize===r.tileSize&&l.encoding===r.encoding,l=l.type!=="vector"||l.type==="vector"&&l.type===r.type&&l.promoteId===r.promoteId&&l.scheme===r.scheme,n)&&o&&i&&l},t.prototype._modifySource=function(n,r){if(n.type!=="raster"&&n.type!=="raster-dem"&&n.type!=="vector"||!n.tiles){if(n.type!=="raster"&&n.type!=="raster-dem"&&n.type!=="vector"||!n.url)throw new Error("Source definition must define a TileJSON 'url' or a 'tiles' array.");n.url=typeof n.url=="string"?n.url:new Af({domain:Pr.domainPlaceHolder,path:n.url.path,queryParams:c1(c1({},r),n.url.queryParams)}).toString()}else{var o=n.tiles.map(function(i){return typeof i=="string"?i:new Af({domain:Pr.domainPlaceHolder,path:i.path,queryParams:c1(c1({},r),i.queryParams)}).toString()});n.tiles=o}return n},t}(Xi),zke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.bounds=[-180,-85.0511,180,85.0511],n.minSourceZoom=0,n.maxSourceZoom=22,n.tileSize=512,n.isTMS=!1,n.subdomains=void 0,n.tileUrl=void 0,n}return zke(t,e),t}(R7),Bke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SI=window&&window.__assign||function(){return(SI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Uke=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kk=function(e){function t(n,r){return r=e.call(this,r)||this,n&&r.setOptions(n),r}return Bke(t,e),t.prototype.getOptions=function(){return $o(this.options,CC._cloneCustomizer)},t.prototype.setOptions=function(n){if(n=new CC().merge(this.options,$o(n,CC._cloneCustomizer)),this.map){if(!ku(n.bounds,this.options.bounds)||n.isTMS!==this.options.isTMS||n.maxSourceZoom!==this.options.maxSourceZoom||n.minSourceZoom!==this.options.minSourceZoom||!ku(n.subdomains,this.options.subdomains)||n.tileSize!==this.options.tileSize||n.tileUrl!==this.options.tileUrl)return this.options=n,void this.map.layers.add(this);this._updateBaseProperties(n,this.options),this._updatePaintProperty("raster-contrast",n.contrast,this.options.contrast),this._updatePaintProperty("raster-fade-duration",n.fadeDuration,this.options.fadeDuration),this._updatePaintProperty("raster-hue-rotate",n.hueRotation,this.options.hueRotation),this._updatePaintProperty("raster-brightness-max",n.maxBrightness,this.options.maxBrightness),this._updatePaintProperty("raster-opacity",n.opacity,this.options.opacity),this._updatePaintProperty("raster-saturation",n.saturation,this.options.saturation)}this.options=n},t.prototype._setOptionsNoUpdate=function(n){this.options=new CC().merge(this.options,$o(n,CC._cloneCustomizer))},t.prototype._buildLayers=function(){return[SI(SI({id:this.id,type:"raster",source:this._getSourceId(),layout:{visibility:this.options.visible?"visible":"none"},paint:{"raster-contrast":this.options.contrast,"raster-fade-duration":this.options.fadeDuration,"raster-hue-rotate":this.options.hueRotation,"raster-brightness-max":this.options.maxBrightness,"raster-brightness-min":this.options.minBrightness,"raster-opacity":this.options.opacity,"raster-saturation":this.options.saturation}},this.options.filter&&{filter:this.options.filter}),{minzoom:this.options.minZoom,maxzoom:this.options.maxZoom})]},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._buildSource=function(){var n,r;if(this.options.tileUrl){if(this.options.tileUrl.indexOf("{")===-1)return{type:"raster",url:this.options.tileUrl};if(this.options.tileUrl.indexOf("{subdomain}")!==-1){if(!(this.options.subdomains&&0<this.options.subdomains.length))throw new Error("The {subdomain} placeholder was included in the tileUrl but no subdomains were specified");var o=[];try{for(var i=Uke(this.options.subdomains),l=i.next();!l.done;l=i.next()){var c=l.value;o.push(this.options.tileUrl.replace(/{subdomain}/g,c))}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}r=o}else r=[this.options.tileUrl]}return SI({type:"raster",bounds:this.options.bounds,maxzoom:this.options.maxSourceZoom,minzoom:this.options.minSourceZoom,scheme:this.options.isTMS?"tms":"xyz",tileSize:this.options.tileSize},r&&{tiles:r})},t.prototype._getSourceId=function(){return"".concat(this.getId(),"-RasterSource")},t.prototype._getSourceWrapper=function(){var n=this._getSourceId(),r=this._buildSource();return new O7(n,{name:n,tiles:r.tiles,type:r.type,url:r.url})},t}(M1),jke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.renderer=void 0,n}return jke(t,e),t}(my),$ke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),D7=function(e){function t(n,r){var o=e.call(this,n)||this;return o._onStyleChange=function(){var i,l;o.map._getMap().getLayer(o.id)||(i=o.map,l=(l=o.map.layers._getUserLayers().find(function(c){return c.layer.getId()==o.id}))==null?void 0:l.before,i.layers.remove(o),i.layers.add(o,l))},o.options=new SC().merge($o(r,SC._cloneCustomizer)),o.source=new zc,o}return $ke(t,e),t.prototype.getOptions=function(){return $o(this.options,SC._cloneCustomizer)},t.prototype.setOptions=function(n){n=new SC().merge(this.options,$o(n,SC._cloneCustomizer)),this.map&&this.map.triggerRepaint(),this.options=n},t.prototype.onAdd=function(n){var r,o;e.prototype.onAdd.call(this,n),this.map.events.add("stylechanged",this._onStyleChange),this.options.renderer&&this.glContext&&(o=(r=this.options.renderer).onAdd)!=null&&o.call(r,n,this.glContext)},t.prototype.onRemove=function(){var n,r;this.options.renderer&&this.glContext&&(r=(n=this.options.renderer).onRemove)!=null&&r.call(n,this.map,this.glContext),this.map.events.remove("stylechanged",this._onStyleChange),this.glContext=null,e.prototype.onRemove.call(this)},t.prototype._buildLayers=function(){var n=this;if(this.options.renderer)return[{id:this.id,type:"custom",renderingMode:this.options.renderer.renderingMode,onAdd:function(r,o){n.glContext=o},onRemove:function(r,o){},prerender:function(r,o){var i,l;n._shouldRender()&&(l=(i=n.options.renderer).prerender)!=null&&l.call(i,r,o)},render:function(r,o){n._shouldRender()&&n.options.renderer.render(r,o)}}];throw new Error("Cannot build the WebGL layer because renderer was not set.")},t.prototype._getLayerIds=function(){return[this.id]},t.prototype._getSourceIds=function(){return new Set().add(this.source.getId())},t.prototype._shouldRender=function(){var n;return!!this.map&&(n=this.map.getCamera().zoom,this.options.visible)&&this.options.minZoom<=n&&this.options.maxZoom>n},t}(oa),$A=Object.freeze({__proto__:null,BubbleLayer:wL,HeatMapLayer:vke,ImageLayer:Cke,Layer:oa,LineLayer:xL,PolygonExtrusionLayer:kke,PolygonLayer:CL,SymbolLayer:Ik,TileLayer:kk,WebGLLayer:D7}),HA=function(){function e(){}return e.convertHtmlString=function(t){var n;return typeof t=="string"?((n=document.createElement("div")).innerHTML=t,n):t},e.parseWithFilter=function(t,n,r,o){var i=this;if(n===void 0&&(n=function(f){return!0}),r===void 0&&(r=function(f){return f}),o===void 0&&(o=function(){return document.createElement("div")}),typeof t=="string"){var c=new DOMParser().parseFromString(t,"text/html").body;if(c.children.length==0)return r(c.innerHTML);var l,c=c.children.length==1&&c.childNodes.length==1?c.children[0]:(l=o(),Array.from(c.childNodes).map(function(f){return l.append(f)}),l)}else c=t;return Array.from(c.children).forEach(function(f){return i.parseWithFilter(f,n,r)}),n(c)?r(c):(c.parentNode&&c.parentNode.removeChild(c),null)},e}(),Hke=Sm,Vke=o7;function qke(e){return Hke(e)&&e.nodeType===1&&!Vke(e)}var L7=fy(qke),Gke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),EC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.anchor="none",n.draggable=!1,n.closeButton=!0,n.content=document.createElement("span"),n.fillColor="#FFFFFF",n.pixelOffset=new Tl(0,0),n.position=new Sl(0,0),n.showPointer=!0,n}return Gke(t,e),t._cloneCustomizer=function(n){if(L7(n))return n},t}(Hi),Wke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IT=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},VA=function(e){function t(n){var r=e.call(this)||this;return r.attach=function(o){r.map!==o&&(r.map&&r.remove(),r.map=o,r.marker=r._createMarker(r.options),r.marker.addTo(r.map._getMap()),r.map.popups._getCollectionDiv().appendChild(r.containerDiv),r.map.popups.add(r))},r.open=function(o){if(!o&&!r.map)throw new Error("Must specify a map to open on or attach to a map in advance");r.attach(o||r.map),r.containerDiv.classList.remove(t.Css.hidden),r.map.events.add("move",r._onMove),r._onMove(),r._invokeEvent("open",{target:r,type:"open"})},r.close=function(){r.map&&r.map.events.remove("move",r._onMove),r.containerDiv.classList.add(t.Css.hidden),r._invokeEvent("close",{target:r,type:"close"})},r.remove=function(){r.map&&(r.marker.remove(),r.containerDiv.classList.remove(r.autoAnchor||r.options.anchor),r.map.events.remove("move",r._onMove),r.map.popups.remove(r),delete r.map,delete r.marker,delete r.autoAnchor)},r.isOpen=function(){return r.map&&!r.containerDiv.classList.contains(t.Css.hidden)},r._onMove=function(){var o=r._getAutoAnchor(r.map,r.options);o!==r.autoAnchor&&(r._replaceMarker(r.map,r.options,o),r.map.events.add("move",r._onMove))},r._onDown=function(o){r.map.popups._addDraggedPopup(r);var i=IT(r.map.positionsToPixels([r.options.position]),1)[0];o.type==="mousedown"?r.dragOffset=[i[0]-o.clientX,i[1]-o.clientY]:o.type==="touchstart"&&(r.dragOffset=[i[0]-o.touches[0].clientX,i[1]-o.touches[0].clientY])},r._onDragStart=function(o){o.preventDefault()},r.options=new EC().merge($o(n,EC._cloneCustomizer)),r.containerDiv=r._createContainerDiv(r.options),r.contentDiv=r._createContentDiv(r.options),r.containerDiv.appendChild(r.contentDiv),r.options.showPointer&&(r.arrowDiv=r._createArrowDiv(),r.containerDiv.appendChild(r.arrowDiv)),r.options.closeButton&&(r.closeBtn=r._createCloseButton(),r.contentDiv.appendChild(r.closeBtn),n=Js("close"),r.contentDiv.appendChild(n),aa(n,r.closeBtn,!0)),r}return Wke(t,e),t.prototype.setPopupOptions=function(n){this.setOptions(n)},t.prototype.setOptions=function(o){var r,o=new EC().merge(this.options,$o(o,EC._cloneCustomizer));o.content!==this.options.content?(this.htmlContent.remove(),this.htmlContent=this._createHtmlContent(o),this.contentDiv.prepend(this.htmlContent)):o.draggable!==this.options.draggable&&this._setDraggable(this.htmlContent,o.draggable),o.closeButton&&!this.closeBtn?(this.closeBtn=this._createCloseButton(),this.contentDiv.appendChild(this.closeBtn),r=Js("close"),this.contentDiv.appendChild(r),aa(r,this.closeBtn,!0)):!o.closeButton&&this.closeBtn&&(this.contentDiv.removeChild(this.closeBtn),delete this.closeBtn),o.showPointer&&!this.arrowDiv?(this.arrowDiv=this._createArrowDiv(),this.containerDiv.appendChild(this.arrowDiv)):!o.showPointer&&this.arrowDiv&&(this.containerDiv.removeChild(this.arrowDiv),delete this.arrowDiv),o.fillColor!==this.options.fillColor&&(this.containerDiv.style.borderColor=o.fillColor,this.contentDiv.style.backgroundColor=o.fillColor),this.marker&&(o.anchor!==this.options.anchor?this.options.anchor==="none"?(this.autoAnchor!==o.anchor&&this._replaceMarker(this.map,o),this.map.events.remove("move",this._onMove),delete this.autoAnchor):(this._replaceMarker(this.map,o),o.anchor==="none"&&this.map.events.add("move",this._onMove)):(ku(o.position,this.options.position)||this.marker.setLngLat(o.position),ku(o.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(o.pixelOffset))),this.options=o},t.prototype.getPopupOptions=function(){return this.getOptions()},t.prototype.getOptions=function(){return $o(this.options,EC._cloneCustomizer)},t.prototype.getPopupContainer=function(){return this.containerDiv},t.prototype._dragToPixel=function(n){this.dragging||(this.dragging=!0,this.contentDiv.style.pointerEvents="none",this._invokeEvent("dragstart",{type:"dragstart",target:this})),n=[n[0]+this.dragOffset[0],n[1]+this.dragOffset[1]],n=IT(this.map.pixelsToPositions([n]),1)[0],this.options.position=n,this.marker.setLngLat(this.options.position),this._invokeEvent("drag",{type:"drag",target:this})},t.prototype._onUp=function(){this.dragging&&(this.contentDiv.style.pointerEvents="",this._invokeEvent("dragend",{type:"dragend",target:this}),this.options.anchor==="none")&&this._onMove(),delete this.dragOffset,delete this.dragging},t.prototype._createContainerDiv=function(n){var r=this,o=document.createElement("div"),i=(o.classList.add(t.Css.container),o.classList.add(t.Css.hidden),o.style.borderColor=n.fillColor,o.setAttribute("role","dialog"),o.setAttribute("aria-label","Map Information Window"),!1);return o.addEventListener("keydown",function(l){l.key!=="Tab"&&l.key!=="Escape"&&l.key!=="Esc"||(i=!0)}),o.addEventListener("keyup",function(l){l.key!=="Tab"&&l.key!=="Escape"&&l.key!=="Esc"||(i=!1)}),o.addEventListener("focusin",function(l){r.map&&!r.isOpen()&&(r.open(r.map),l.target instanceof HTMLElement)&&l.target.focus()}),o.addEventListener("focusout",function(l){i&&l.relatedTarget instanceof Node&&!o.contains(l.relatedTarget)&&(i=!1,r.isOpen())&&r.close()}),o},t.prototype._createContentDiv=function(n){var r=document.createElement("div");return r.classList.add(t.Css.content),r.style.backgroundColor=n.fillColor,r.setAttribute("tabindex","0"),this.htmlContent=this._createHtmlContent(n),r.appendChild(this.htmlContent),r},t.prototype._createArrowDiv=function(){var n=document.createElement("div");return n.classList.add(t.Css.arrow),n},t.prototype._createCloseButton=function(){var n=document.createElement("button");return n.addEventListener("click",this.close),n.classList.add(t.Css.close),n.setAttribute("aria-label","close"),n.setAttribute("tabindex","0"),n.innerHTML="&times;",n},t.prototype._createHtmlContent=function(n){var r=HA.convertHtmlString(n.content);return n.draggable&&this._setDraggable(r,n.draggable),r},t.prototype._createMarker=function(n,i){var o=this.marker?this.marker.getLngLat():n.position,i=(n.anchor==="none"?(this.autoAnchor=i||"bottom",this.containerDiv.classList.add(this.autoAnchor),new Pu.Marker({anchor:this.autoAnchor,element:this.containerDiv,offset:n.pixelOffset})):(this.containerDiv.classList.add(n.anchor),new Pu.Marker({anchor:n.anchor,element:this.containerDiv,offset:n.pixelOffset}))).setLngLat(o);return i},t.prototype._getAutoAnchor=function(n,r){var o,i,l=this.containerDiv.offsetWidth,c=this.containerDiv.offsetHeight,f=[];return(i=this.marker?(o=(i=n._getMap().project(this.marker.getLngLat())).x,i.y):(i=IT(n.positionsToPixels([r.position]),1),o=(r=IT(i[0],2))[0],r[1]))<c?f.push("top"):i>n.getCanvas().offsetHeight-c&&f.push("bottom"),o<l/2?f.push("left"):o>n.getCanvas().offsetWidth-l/2&&f.push("right"),0<f.length?f.join("-"):"bottom"},t.prototype._replaceMarker=function(n,r,o){var i=this.containerDiv.nextElementSibling;this.marker.remove(),this.containerDiv.classList.remove(this.autoAnchor||this.options.anchor),this.marker=this._createMarker(r,o),this.marker.addTo(n._getMap()),n.popups._getCollectionDiv().insertBefore(this.containerDiv,i||null)},t.prototype._setDraggable=function(n,r){r?(n.addEventListener("mousedown",this._onDown),n.addEventListener("touchstart",this._onDown),n.addEventListener("dragstart",this._onDragStart)):(n.removeEventListener("mousedown",this._onDown),n.removeEventListener("touchstart",this._onDown),n.removeEventListener("dragstart",this._onDragStart))},t.Css={arrow:"popup-arrow",close:"popup-close",container:"popup-container",content:"popup-content-container",hidden:"hidden-accessible-element"},t}(Cm),Kke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TC=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.anchor="bottom",n.color="#1A73AA",n.draggable=!1,n.htmlContent='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24.5 36.5" id="marker_'.concat(f_(),'" width="24.5" height="36.5" display="block"><path d="M12.25.25a12.2543,12.2543,0,0,0-12,12.4937c0,6.4436,6.4879,12.1093,11.059,22.5641.5493,1.2563,1.3327,1.2563,1.882,0C17.7621,24.8529,24.25,19.1857,24.25,12.7437A12.2543,12.2543,0,0,0,12.25.25Z"   fill="{color}" stroke="{secondaryColor}" stroke-width="0.5"/><text style="font-family: Arial, Helvetica, sans-serif; font-size: 14px; fill: white;" text-anchor="middle" x="12" y="18">{text}</text></svg>'),n.pixelOffset=new Tl(0,0),n.position=new Sl(0,0),n.popup=void 0,n.secondaryColor="white",n.text=void 0,n.visible=!0,n}return Kke(t,e),t._cloneCustomizer=function(n){if(n instanceof VA||L7(n))return n},t}(Hi),Yke=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lz=function(e){function t(n){var r=e.call(this)||this;return r._onDrag=function(){var o=r.marker.getLngLat().wrap();r.options.position=new Sl(o.lng,o.lat),r._invokeEvent("drag",{type:"drag",target:r})},r._onDragStart=function(){r._invokeEvent("dragstart",{type:"dragstart",target:r})},r._onDragEnd=function(){r._invokeEvent("dragend",{type:"dragend",target:r})},r._bubbleElementEvent=function(o){r._invokeEvent(o.type,{type:o.type,target:r})},r._onEleDragStart=function(o){o.preventDefault()},r.options=new TC().merge($o(n,TC._cloneCustomizer)),r._buildMarker(r.options),r}return Yke(t,e),t.prototype.getOptions=function(){return $o(this.options,TC._cloneCustomizer)},t.prototype.getElement=function(){return this.marker.getElement()},t.prototype.setOptions=function(n){n=new TC().merge(this.options,$o(n,TC._cloneCustomizer)),ku(n.htmlContent,this.options.htmlContent)&&n.anchor===this.options.anchor?(typeof n.htmlContent!="string"||n.color===this.options.color&&n.text===this.options.text&&n.secondaryColor===this.options.secondaryColor||(this.element.innerHTML=this._getSubbedHtmlString(n)||""),n.draggable!==this.options.draggable&&(this._setDraggable(n.draggable),this.marker.setDraggable(n.draggable)),ku(n.pixelOffset,this.options.pixelOffset)||this.marker.setOffset(n.pixelOffset),ku(n.position,this.options.position)||this.marker.setLngLat(n.position),n.visible!==this.options.visible&&(n.visible?this.element.classList.remove(t.hiddenClass):this.element.classList.add(t.hiddenClass))):(this.marker.remove(),this._buildMarker(n),this.map&&(this.marker.addTo(this.map._getMap()),this._getCollectionContainer().appendChild(this.element))),this.options=n},t.prototype.togglePopup=function(){if(this.options.popup)if(this.options.popup.isOpen())this.options.popup.close();else{if(!this.map)throw new Error("The marker must be added to a map before calling togglePopup().");this.options.popup.setOptions({position:this.options.position}),this.options.popup.open(this.map)}},t.prototype._addToMap=function(n,r){this.map&&this.map!==n&&this._removeFromMap(),r&&(this.options.position=Ka(r),this.marker.setLngLat(this.options.position)),this.map!==n&&(this.map=n,this.marker.addTo(n._getMap()),this._getCollectionContainer().appendChild(this.element))},t.prototype._removeFromMap=function(){this.map&&(this.marker.remove(),delete this.map)},t.prototype._getId=function(){if(this.element)return(typeof this.options.htmlContent=="string"?this.element.firstChild:this.element).id},t.prototype._buildMarker=function(n){var r;typeof n.htmlContent=="string"?(r=this._getSubbedHtmlString(n)||"",this.element=HA.convertHtmlString(r)):this.element=n.htmlContent,this.element.classList.add(t.containerClass),n.draggable&&this._setDraggable(!0),n.visible||this.element.classList.add(t.hiddenClass),this.marker=new Pu.Marker({element:this.element,offset:n.pixelOffset,draggable:n.draggable,anchor:n.anchor}).setLngLat(n.position),this.marker.on("drag",this._onDrag),this.marker.on("dragstart",this._onDragStart),this.marker.on("dragend",this._onDragEnd),this.element.addEventListener("click",this._bubbleElementEvent),this.element.addEventListener("dblclick",this._bubbleElementEvent),this.element.addEventListener("contextmenu",this._bubbleElementEvent),this.element.addEventListener("keydown",this._bubbleElementEvent),this.element.addEventListener("keypress",this._bubbleElementEvent),this.element.addEventListener("keyup",this._bubbleElementEvent),this.element.addEventListener("mousedown",this._bubbleElementEvent),this.element.addEventListener("mouseenter",this._bubbleElementEvent),this.element.addEventListener("mouseleave",this._bubbleElementEvent),this.element.addEventListener("mousemove",this._bubbleElementEvent),this.element.addEventListener("mouseout",this._bubbleElementEvent),this.element.addEventListener("mouseover",this._bubbleElementEvent),this.element.addEventListener("mouseup",this._bubbleElementEvent)},t.prototype._getSubbedHtmlString=function(n){return typeof n.htmlContent=="string"?n.htmlContent.replace(/{color}/gi,n.color||"").replace(/{secondaryColor}/gi,n.secondaryColor||"").replace(/{text}/gi,n.text||""):null},t.prototype._getCollectionContainer=function(){var n=this.map.getCanvasContainer().querySelector(".".concat(t.collectionContainerClass));return n||((n=document.createElement("div")).classList.add(t.collectionContainerClass),this.map.getCanvasContainer().appendChild(n)),n},t.prototype._setDraggable=function(n){n?this.element.addEventListener("dragstart",this._onEleDragStart):this.element.removeEventListener("dragstart",this._onEleDragStart)},t.collectionContainerClass="marker-collection-container",t.hiddenClass="hidden-accessible-element",t.containerClass="marker-container",t}(Cm),Zke=function(){function e(){}return e.getHighContrastMode=function(){return matchMedia("(-ms-high-contrast: white-on-black)").matches?"dark":matchMedia("(-ms-high-contrast: black-on-white)").matches?"light":matchMedia("(-ms-high-contrast: active)").matches?"dark":matchMedia("(inverted-colors: inverted)").matches?"invert":null},e}();function Em(e,t){return e||t}function dc(e,t){return e[t]}var TR,jc=void 0,ec=null,Nz="",qA="function",fE="object",Xp="prototype",SL="__proto__",Nv="undefined",Pk="constructor",Fz="Symbol",Xke="_polyfill",Kw="length",Ak="name",Il="call",GA="toString",Fh=Em(Object),zz=dc(Fh,Xp),N7=Em(String),P_=dc(N7,Xp),Qke=Em(Math),F7=Em(Array),WA=dc(F7,Xp),cm=dc(WA,"slice");function el(e,t){try{return{v:e.apply(this,t)}}catch(n){return{e:n}}}function Jke(e,t){return e=el(e),e.e?t:e.v}function KA(e){return function(t){return typeof t===e}}function z7(e){var t="[object "+e+"]";return function(n){return!(!n||ePe(n)!==t)}}function ePe(e){return zz[GA].call(e)}function va(e){return typeof e===Nv||e===Nv}function wn(e){return e===ec||va(e)}function tPe(e){return e===ec||!B7(e)}function B7(e){return!!e||e!==jc}function nPe(e){return TR=TR||["string","number","boolean",Nv,"symbol","bigint"],e!==fE&&TR.indexOf(e)!==-1}var Er=KA("string"),$r=KA(qA);function uc(e){return!(!e&&wn(e)||!e||typeof e!==fE)}var bo=dc(F7,"isArray"),rPe=z7("Date"),pE=KA("number"),U7=KA("boolean"),Bz=z7("Error");function Ex(e){return!!(e&&e.then&&$r(e.then))}function Mk(e){return!(!e||Jke(function(){return!(e&&0+e)},!e))}var Uz=dc(Fh,"getOwnPropertyDescriptor");function Fd(e,t){return!!e&&zz.hasOwnProperty[Il](e,t)}var Gg=Em(dc(Fh,"hasOwn"),oPe);function oPe(e,t){return Fd(e,t)||!!Uz(e,t)}function wo(e,t,n){if(e&&uc(e)){for(var r in e)if(Gg(e,r)&&t[Il](e,r,e[r])===-1)break}}var kT={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function iPe(e){var t,n={};return n[kT.c]=!0,n[kT.e]=!0,e.l&&(n.get=function(){return e.l.v},t=Uz(e.l,"v"))&&t.set&&(n.set=function(r){e.l.v=r}),wo(e,function(r,o){n[kT[r]]=va(o)?n[kT[r]]:o}),n}var dm=dc(Fh,"defineProperty");function Qo(e,t,n){return dm(e,t,iPe(n))}function j7(e,t,n,r,o){var i={};return wo(e,function(l,c){Rk(i,l,t?c:l),Rk(i,c,l)}),r?r(i):i}function Rk(e,t,n,r){dm(e,t,{value:n,enumerable:!0,writable:!1})}var tc=Em(N7),aPe="[object Error]";function Zn(e,t){var n=Nz,r=zz[GA][Il](e);r===aPe&&(e={stack:tc(e.stack),message:tc(e.message),name:tc(e.name)});try{n=(n=JSON.stringify(e,ec,t?typeof t=="number"?t:4:jc))&&n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: ")||tc(e)}catch(o){n=" - "+Zn(o,t)}return r+": "+n}function Fc(e){throw new Error(e)}function zh(e){throw new TypeError(e)}var $7=dc(Fh,"freeze");function sPe(e){return e}function lPe(e){return e[SL]||ec}var EL=dc(Fh,"assign"),Qp=dc(Fh,"keys");function Zx(e){return $7&&wo(e,function(t,n){(bo(n)||uc(n))&&Zx(n)}),hm(e)}var hm=Em($7,sPe),TL=Em(dc(Fh,"getPrototypeOf"),lPe);function uPe(e){return j7(e,1,0,hm)}function cPe(e){return j7(e,0,0,hm)}function dPe(e){var t={};return wo(e,function(n,r){Rk(t,n,r[1]),Rk(t,r[0],r[1])}),hm(t)}function hPe(e){return dPe(e)}var IR,H7=cPe({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),w6="__tsUtils$gblCfg";function V7(){var e;return e=(e=(e=(e=typeof globalThis!==Nv?globalThis:e)||typeof self===Nv?e:self)||typeof window===Nv?e:window)||typeof global===Nv?e:global}function q7(){var e;return IR||(e=el(V7).v||{},IR=e[w6]=e[w6]||{}),IR}function Yf(e,t,n){var r=t&&t[e];return function(o){var i,l=o&&o[e]||r;if(l||n)return i=arguments,(l||n).apply(o,l?cm[Il](i,1):i);zh('"'+tc(e)+'" not defined for '+Zn(o))}}function fPe(e){return function(t){return t[e]}}var pPe=dc(Qke,"max"),x6=Yf("slice",P_),Zf=Yf("substring",P_),Og=Yf("substr",P_,mPe);function mPe(e,t,n){return wn(e)&&zh("Invalid "+Zn(e)),n<0?Nz:((t=t||0)<0&&(t=pPe(t+e[Kw],0)),va(n)?x6(e,t):x6(e,t,t+n))}function jz(e,t){return Zf(e,0,t)}var kR,PT,ls,C6="_urid";function gPe(){var e;return kR||(e=q7(),kR=e.gblSym=e.gblSym||{k:{},s:{}}),kR}function $z(e){var t={description:tc(e),toString:function(){return Fz+"("+e+")"}};return t[Xke]=!0,t}function yPe(e){var t,n,r=gPe();return Gg(r.k,e)||(t=$z(e),n=Qp(r.s).length,t[C6]=function(){return n+"_"+t[GA]()},r.k[e]=t,r.s[t[C6]()]=tc(e)),r.k[e]}function vPe(n){PT=PT||{};var t,n=H7[n];return t=n?PT[n]=PT[n]||$z(Fz+"."+n):t}function gy(){ls=q7()}function _Pe(e){var t={};return ls||gy(),t.b=ls.lzy,dm(t,"v",{configurable:!0,get:function(){var n=e();return ls.lzy||dm(t,"v",{value:n}),t.b=ls.lzy,n}}),t}function Vd(e){return dm({toJSON:function(){return e}},"v",{value:e})}var R1,G7="window";function Xx(e,t){var n;return function(){return ls||gy(),(n=n&&!ls.lzy?n:Vd(el(e,t).v)).v}}function Od(e){return ls||gy(),(R1=R1&&e!==!1&&!ls.lzy?R1:Vd(el(V7).v||ec)).v}function Pa(e,t){return t=R1&&t!==!1?R1.v:Od(t),t&&t[e]?t[e]:e===G7?ic():ec}function W7(){return!!Yl()}var Yl=Xx(Pa,["document"]);function YA(){return!!ic()}var ic=Xx(Pa,[G7]);function bPe(){return!!Xf()}var Xf=Xx(Pa,["navigator"]);function wPe(){return!!K7()}var mE,S6,PR,K7=Xx(Pa,["history"]),xPe=Xx(function(){return!!el(function(){return process&&(process.versions||{}).node}).v}),Y7=Xx(function(){return!!el(function(){return self&&self instanceof WorkerGlobalScope}).v});function ZA(){return mE=Vd(el(Pa,[Fz]).v)}function CPe(e){var t=(ls.lzy?0:mE)||ZA();return t.v?t.v[e]:jc}function SPe(){return!!EPe()}function EPe(){return ls||gy(),((ls.lzy?0:mE)||ZA()).v}function Hz(e,t){var n=H7[e],r=(ls||gy(),(ls.lzy?0:mE)||ZA());return r.v?r.v[n||e]:vPe(e)}function IC(e,t){ls||gy();var n=(ls.lzy?0:mE)||ZA();return n.v?n.v(e):$z(e)}function Vz(e){return ls||gy(),((S6=(ls.lzy?0:S6)||Vd(el(CPe,["for"]).v)).v||yPe)(e)}function IL(e){return!!e&&$r(e.next)}function Z7(e){return!tPe(e)&&$r(e[Hz(3)])}function qz(e,t,n){if(e&&(IL(e)||(e=e[(PR=PR||Vd(Hz(3))).v]?e[PR.v]():null),IL(e))){var r=jc,o=jc;try{for(var i=0;!(o=e.next()).done&&t[Il](n||e,o.value,i,e)!==-1;)i++}catch(l){r={e:l},e.throw&&(o=ec,e.throw(r))}finally{try{o&&!o.done&&e.return&&e.return(o)}finally{if(r)throw r.e}}}}function Ew(e,t,n){return e.apply(t,n)}function Tw(e,t){return!va(t)&&e&&(bo(t)?Ew(e.push,e,t):IL(t)||Z7(t)?qz(t,function(n){e.push(n)}):e.push(t)),e}function Xn(e,t,n){if(e)for(var r=e[Kw]>>>0,o=0;o<r&&!(o in e&&t[Il](e,e[o],o,e)===-1);o++);}var Jl=Yf("indexOf",WA),O1=Yf("map",WA);function XA(e,t,n){return(e&&e.slice||cm).apply(e,cm[Il](arguments,1))}var E6,T6,TPe=Yf("reduce",WA),oy=Em(dc(Fh,"create"),IPe);function IPe(e){var t;return e?((t=typeof e)!==fE&&t!==qA&&zh("Prototype must be an Object or function: "+Zn(e)),n[Xp]=e,new n):{};function n(){}}function X7(e,t){return(Fh.setPrototypeOf||function(n,r){var o;(E6=E6||Vd(((o={})[SL]=[],o instanceof Array))).v?n[SL]=r:wo(r,function(i,l){return n[i]=l})})(e,t)}function kPe(e,t,n){function r(){this[Pk]=t,el(Qo,[this,Ak,{v:e,c:!0,e:!1}])}return el(Qo,[t,Ak,{v:e,c:!0,e:!1}]),(t=X7(t,n))[Xp]=n===ec?oy(n):(r[Xp]=n[Xp],new r),t}function I6(e,t){t&&(e[Ak]=t)}function Q7(e,t,n){var r=Error,o=r[Xp][Ak],i=Error.captureStackTrace;return kPe(e,function(){var l=arguments;try{el(I6,[r,e]);var c,f=Ew(r,this,cm[Il](l))||this;return f!==this&&(c=TL(this))!==TL(f)&&X7(f,c),i&&i(f,this[Pk]),t&&t(f,l),f}finally{el(I6,[r,o])}},r)}function PPe(e){throw new(T6=T6||Q7("UnsupportedError"))(e)}function jf(){return(Date.now||APe)()}function APe(){return new Date().getTime()}function MPe(e){return function(t){return wn(t)&&zh("strTrim called ["+Zn(t)+"]"),t=t&&t.replace?t.replace(e,Nz):t}}var AR,MR,k6,RPe=MPe(/^\s+|(?=\s)\s+$/g),us=Yf("trim",P_,RPe);function Eu(e){if(!e||typeof e!==fE)return!1;var t=!1;if(e!==(k6=k6||!YA()||ic())){MR||(AR=Function[Xp][GA],MR=AR[Il](Fh));try{var n=TL(e);t=(t=!n)||(n=Fd(n,Pk)?n[Pk]:n)&&typeof n===qA&&AR[Il](n)===MR}catch{}}return t}function OPe(e){return e.value&&eK(e),!0}var P6=[FPe,eK,BPe,zPe];function DPe(e,t,n,r){var o;return Xn(e,function(i){if(i.k===t)return o=i,-1}),o||(o={k:t,v:t},e.push(o),r(o)),o.v}function Gz(e,t,n,i){var o=n.handler,i=n.path?i?n.path.concat(i):n.path:[],l={handler:n.handler,src:n.src,path:i},c=typeof t,f=!1,p=!1,g=(t&&c===fE?f=Eu(t):p=t===ec||nPe(c),{type:c,isPrim:p,isPlain:f,value:t,result:t,path:i,origin:n.src,copy:function(v,w){return Gz(e,v,w?l:n,w)},copyTo:function(v,w){return J7(e,v,w,l)}});return g.isPrim?o&&o[Il](n,g)?g.result:t:DPe(e,t,i,function(v){Qo(g,"result",{g:function(){return v.v},s:function(T){v.v=T}});for(var w=0,C=o;!(C||(w<P6.length?P6[w++]:OPe))[Il](n,g);)C=ec})}function J7(e,t,n,r){if(!wn(n))for(var o in n)t[o]=Gz(e,n[o],r,o);return t}function LPe(e,t,n){return J7([],e,t,{handler:n,src:t,path:[]})}function NPe(e,t){return Gz([],e,{handler:t,src:e})}function FPe(e){var t,n=e.value;return!!bo(n)&&((t=e.result=[]).length=n.length,e.copyTo(t,n),!0)}function zPe(e){var t=e.value;return!!rPe(t)&&(e.result=new Date(t.getTime()),!0)}function BPe(e){return e.type===qA}function eK(e){var t,n=e.value;return!(!n||!e.isPlain||(t=e.result={},e.copyTo(t,n),0))}function tK(e,t){return Xn(t,function(n){LPe(e,n)}),e}function A6(e,t,n,r,o,i,l){return tK(NPe(e)||{},cm[Il](arguments))}function UPe(e,t,n,r,o,i,l){return tK(e,cm[Il](arguments))}var RR,jPe=fPe(Kw);function fm(){return ls||gy(),(RR=RR&&!ls.lzy?RR:Vd(el(Pa,["performance"]).v)).v}var nK=Yf("split",P_);function rK(e,t,n){var r;e&&t&&(r=(t=nK(t,".")).pop(),Xn(t,function(o){wn(e[o])&&(e[o]={}),e=e[o]}),e[r]=n)}var oK=Yf("endsWith",P_,$Pe);function $Pe(e,t,n){return Er(e)||zh("'"+Zn(e)+"' is not a string"),t=Er(t)?t:tc(t),n=!va(n)&&n<e[Kw]?n:e[Kw],Zf(e,n-t[Kw],n)===t}var nc=Yf("indexOf",P_),OR="ref",DR="unref",LR="hasRef",HPe="enabled";function VPe(e,t,n){var r,o=!0,i=e?t(ec):ec;function l(){return o=!1,i&&i[DR]&&i[DR](),r}function c(){i&&n(i),i=ec}function f(){return i=t(i),o||l(),r}return(r={cancel:c,refresh:f})[LR]=function(){return i&&i[LR]?i[LR]():o},r[OR]=function(){return o=!0,i&&i[OR]&&i[OR](),r},r[DR]=l,{h:r=dm(r,HPe,{get:function(){return!!i},set:function(p){!p&&i&&c(),p&&!i&&f()}}),dn:function(){i=ec}}}function iK(e,t,n){var r=bo(t),o=r?t.length:0,i=(0<o?t[0]:r?jc:t)||setTimeout,l=(1<o?t[1]:jc)||clearTimeout,c=n[0],f=(n[0]=function(){f.dn(),Ew(c,jc,cm[Il](arguments))},VPe(e,function(p){if(p){if(p.refresh)return p.refresh(),p;Ew(l,jc,[p])}return Ew(i,jc,n)},function(p){Ew(l,jc,[p])}));return f.h}function zd(e,t){return iK(!0,jc,cm[Il](arguments))}function qPe(e,t){return iK(!1,jc,cm[Il](arguments))}var NR,aK=uPe,GPe=hPe,Tg=aK({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),Tx="toLowerCase",Ok="blkVal",Fr="length",Dk="rdOnly",Lk="notify",Nk="warnToConsole",gE="throwInternal",Qx="setDf",Gv="watch",Wa="logger",g_="apply",ui="push",Jx="splice",sK="hdlr",Iw="cancel",yE="initialize",Dg="identifier",Fk="removeNotificationListener",zk="addNotificationListener",wf="isInitialized",M6="instrumentationKey",FR="INACTIVE",D1="value",AT="getNotifyMgr",wS="getPlugin",Jp="name",kC="iKey",Yw="time",Cu="processNext",lK="getProcessTelContext",R6="pollInternalLogs",kw="enabled",O6="stopPollingInternalLogs",iy="unload",MT="onComplete",Bk="version",uK="loggingLevelConsole",y_="createNew",qp="teardown",Uk="messageId",Wv="message",Ix="isAsync",Wg="diagLog",jk="_doTeardown",xS="update",Mf="getNext",CS="setNextPlugin",cK="protocol",kL="userAgent",kx="split",zR="nodeType",Kv="replace",dK="logInternalMessage",em="type",Wz="handler",d1="status",D6="getResponseHeader",L6="getAllResponseHeaders",PL="isChildEvt",fw="data",Zw="getCtx",df="setCtx",AL="complete",N6="itemsReceived",PC="urlString",F6="sendPOST",BR="headers",$b="timeout",z6="setRequestHeader",ML="traceId",RL="spanId",OL="traceFlags";function WPe(e,t){NR=NR||Q7("AggregationError",function(r,o){1<o[Fr]&&(r.errors=o[1])});var n=e;throw Xn(t,function(r,o){n+=`
`.concat(o," > ").concat(Zn(r))}),new NR(n,t||[])}var UR,hK="function",fK="object",Kz="undefined",Rf="prototype",Yz=Object,KPe=Yz[Rf],pK=((Od()||{}).Symbol,(Od()||{}).Reflect,"hasOwnProperty"),YPe=function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])KPe[pK].call(t,o)&&(e[o]=t[o]);return e},Tu=EL||YPe,mK=function(e,t){return(mK=Yz.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,r){n.__proto__=r}:function(n,r){for(var o in r)r[pK](o)&&(n[o]=r[o])}))(e,t)};function Tm(e,t){function n(){this.constructor=e}typeof t!==hK&&t!==null&&zh("Class extends value "+String(t)+" is not a constructor or null"),mK(e,t),e[Rf]=t===null?oy(t):(n[Rf]=t[Rf],new n)}function B6(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}var $k="constructor",pm="prototype",Hk="function",Vk="_dynInstFuncs",DL="_isDynProxy",Xw="_dynClass",ZPe="_dynCls$",LL="_dynInstChk",SS=LL,gK="_dfOpts",U6="_unknown_",Zz="__proto__",RT="_dyn"+Zz,j6="__dynProto$Gbl",jR="_dynInstProto",EI="useBaseInst",NL="setInstFuncs",Xz=Object,ES=Xz.getPrototypeOf,$6=Xz.getOwnPropertyNames,H6=Od(),FL=H6[j6]||(H6[j6]={o:((UR={})[NL]=!0,UR[EI]=!0,UR),n:1e3});function TI(e){return e&&(e===Xz[pm]||e===Array[pm])}function Qz(e){return TI(e)||e===Function[pm]}function v_(e){if(e){if(ES)return ES(e);var t=e[Zz]||e[pm]||(e[$k]?e[$k][pm]:null),n=e[RT]||t;Fd(e,RT)||(delete e[jR],n=e[RT]=e[jR]||e[RT],e[jR]=t)}return n}function qk(e,t){var n=[];if($6)n=$6(e);else for(var r in e)typeof r=="string"&&Fd(e,r)&&n.push(r);if(n&&0<n.length)for(var o=0;o<n.length;o++)t(n[o])}function Jz(e,t,n){return t!==$k&&typeof e[t]===Hk&&(n||Fd(e,t))&&t!==Zz&&t!==pm}function Gk(e){zh("DynamicProto: "+e)}function XPe(e){var t=oy(null);return qk(e,function(n){!t[n]&&Jz(e,n,!1)&&(t[n]=e[n])}),t}function eB(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return!0;return!1}function QPe(e,t,n,r){function o(f,p,g){var v,w=p[g];return w[DL]&&r&&(v=f[Vk]||{})[SS]!==!1&&(w=(v[p[Xw]]||{})[g]||w),function(){return w.apply(f,arguments)}}for(var i=oy(null),l=(qk(n,function(f){i[f]=o(t,n,f)}),v_(e)),c=[];l&&!Qz(l)&&!eB(c,l);)qk(l,function(f){!i[f]&&Jz(l,f,!ES)&&(i[f]=o(t,l,f))}),c.push(l),l=v_(l);return i}function JPe(e,t,n,r){var o=null;if(e&&Fd(n,Xw)){var i=e[Vk]||oy(null);if((o=(i[n[Xw]]||oy(null))[t])||Gk("Missing ["+t+"] "+Hk),!o[LL]&&i[SS]!==!1){for(var l=!Fd(e,t),c=v_(e),f=[];l&&c&&!Qz(c)&&!eB(f,c);){var p=c[t];if(p){l=p===r;break}f.push(c),c=v_(c)}try{l&&(e[t]=o),o[LL]=1}catch{i[SS]=!1}}}return o}function eAe(e,t,n){var r=t[e];return typeof(r=r===n?v_(t)[e]:r)!==Hk&&Gk("["+e+"] is not a "+Hk),r}function tAe(e,t,n,r,o){var i,l;TI(e)||TI(i=n[Vk]=n[Vk]||oy(null))||(l=i[t]=i[t]||oy(null),i[SS]!==!1&&(i[SS]=!!o),TI(l))||qk(n,function(c){function f(){return(JPe(this,g,p,f)||eAe(g,p,f)).apply(this,arguments)}var p,g;Jz(n,c,!1)&&n[c]!==r[c]&&(l[c]=n[c],delete n[c],Fd(e,c)&&(!e[c]||e[c][DL])||(e[c]=(p=e,g=c,f[DL]=1,f)))})}function nAe(e,t){if(ES){for(var n=[],r=v_(t);r&&!Qz(r)&&!eB(n,r);){if(r===e)return!0;n.push(r),r=v_(r)}return!1}return!0}function $R(e,t){return Fd(e,pm)?e.name||t||U6:((e||{})[$k]||{}).name||t||U6}function Qi(l,t,p,r){Fd(l,pm)||Gk("theClass is an invalid class definition.");var o=l[pm],i=(nAe(o,t)||Gk("["+$R(l)+"] not in hierarchy of ["+$R(t)+"]"),null),l=(Fd(o,Xw)?i=o[Xw]:(i=ZPe+$R(l,"_")+"$"+FL.n,FL.n++,o[Xw]=i),Qi[gK]),c=!!l[EI],f=(c&&r&&r[EI]!==void 0&&(c=!!r[EI]),XPe(t)),p=(p(t,QPe(o,t,f,c)),!!ES&&!!l[NL]);tAe(o,i,t,f,(p=p&&r?!!r[NL]:p)!==!1)}Qi[gK]=FL.o;var Wk="Promise",tB="rejected";function mm(e,t){return yK(e,function(n){return t?t({status:"fulfilled",rejected:!1,value:n}):n},function(n){return t?t({status:tB,rejected:!0,reason:n}):n})}function yK(e,t,n,r){var o=e;try{if(Ex(e))(t||n)&&(o=e.then(t,n));else try{t&&(o=t(e))}catch(i){if(!n)throw i;o=n(i)}}finally{}return o}var HR,vK=["pending","resolving","resolved",tB],V6="dispatchEvent";function rAe(e){var t;return!!(t=e&&e.createEvent?e.createEvent("Event"):t)&&t.initEvent}function oAe(e,t,n,r){var o=Yl(),o=(HR=HR||Vd(!!el(rAe,[o]).v)).v?o.createEvent("Event"):r?new Event(t):{};n&&n(o),HR.v&&o.initEvent(t,!1,!0),o&&e[V6]?e[V6](o):(r=e["on"+t])?r(o):(n=Pa("console"))&&(n.error||n.log)(t,Zn(o))}var VR,q6,G6,W6,_K="unhandledRejection",iAe=_K.toLowerCase(),aAe=10;function K6(e){return $r(e)?e.toString():Zn(e)}function sAe(e,t,n){var r,o,i=XA(arguments,3),l=0,c=!1,f=[],p=!1,g=null;function v(O,L){return p=!0,g&&g.cancel(),g=null,e(function(D,N){f.push(function(){try{var F=l===2?O:L,B=va(F)?r:$r(F)?F(r):F;Ex(B)?B.then(D,N):(!F&&l===3?N:D)(B)}catch(V){N(V)}}),c&&C()},i)}function w(){return vK[l]}function C(){var O;0<f.length&&(O=f.slice(),f=[],p=!0,g&&g.cancel(),g=null,t(O))}function T(O,L){return function(D){l===L&&(O===2&&Ex(D)?(l=1,D.then(T(2,1),T(3,1))):(l=O,c=!0,r=D,C(),p||O!==3||(g=g||zd(k,aAe))))}}function k(){var O;p||(p=!0,xPe()?process.emit(_K,r,o):(O=ic()||Od(),VR=VR||Vd(el(Pa,[Wk+"RejectionEvent"]).v),oAe(O,iAe,function(L){return Qo(L,"promise",{g:function(){return o}}),L.reason=r,L},!!VR.v)))}dm(o={then:v,catch:function(O){return v(void 0,O)},finally:function(O){var L=O,D=O;return $r(O)&&(L=function(N){return O&&O(),N},D=function(N){throw O&&O(),N}),v(L,D)}},"state",{get:w}),SPe()&&(o[Hz(11)]="IPromise"),o.toString=function(){return"IPromise "+w()+(c?" - "+K6(r):"")},$r(n)||zh(Wk+": executor is not a function - "+K6(n));var P=T(3,0);try{n.call(o,T(2,0),P)}catch(O){P(O)}return o}function lAe(e){return function(t){var n=XA(arguments,1);return e(function(r,o){try{var i=[],l=1;qz(t,function(c,f){c&&(l++,yK(c,function(p){i[f]=p,--l==0&&r(i)},o))}),--l===0&&r(i)}catch(c){o(c)}},n)}}function uAe(e){return Vd(function(t){var n=XA(arguments,1);return e(function(r,o){var i=[],l=1;function c(f,p){l++,mm(f,function(g){g.rejected?i[p]={status:tB,reason:g.reason}:i[p]={status:"fulfilled",value:g.value},--l==0&&r(i)})}try{bo(t)?Xn(t,c):Z7(t)?qz(t,c):zh("Input is not an iterable"),--l===0&&r(i)}catch(f){o(f)}},n)})}function cAe(e){Xn(e,function(t){try{t()}catch{}})}function dAe(e){var t=pE(e)?e:0;return function(n){zd(function(){cAe(n)},t)}}function L1(e,t){return sAe(L1,dAe(t),e,t)}function hAe(e,t){var n=(q6=q6||Vd(el(Pa,[Wk]).v||null)).v;if(!n)return L1(e);$r(e)||zh(Wk+": executor is not a function - "+Zn(e));var r=0;return n=new n(function(o,i){e(function(l){r=2,o(l)},function(l){r=3,i(l)})}),dm(n,"state",{get:function(){return vK[r]}}),n}function gm(e,t){return(G6=G6||Vd(hAe)).v.call(this,e,t)}var fAe=lAe(gm);function pAe(e,t){return(W6=W6||uAe(gm)).v(e,t)}var yf=void 0,Lo="",Tv="channels",Cs="core",zL="createPerfMgr",BL="disabled",Qw="extensionConfig",pw="extensions",$f="processTelemetry",Kk="priority",II="eventsSent",N1="eventsDiscarded",kI="eventsSendRequest",Fv="perfEvent",qR="offlineEventsStored",GR="offlineBatchSent",WR="offlineBatchDrop",Yk="getPerfMgr",UL="domain",KR="path",mAe="Not dynamic - ",gAe="getPrototypeOf",yAe=/-([a-z])/g,vAe=/([^\w\d_$])/g,_Ae=/^(\d+[\w\d_$])/,bAe=Object[gAe];function Yv(e){return!wn(e)}function Zk(e){return e=e&&Er(e)?(e=(e=e[Kv](yAe,function(t,n){return n.toUpperCase()}))[Kv](vAe,"_"))[Kv](_Ae,function(t,n){return"_"+n}):e}function Wl(e,t){return!(!e||!t)&&nc(e,t)!==-1}function Px(e){return e&&e.toISOString()||""}function ri(e){return Bz(e)?e[Jp]:Lo}function Ui(e,t,n,r,o){var i=n;return!e||(i=e[t])===n||o&&!o(i)||r&&!r(n)||(e[t]=i=n),i}function _u(e,t,n){var r;return e?!(r=e[t])&&wn(r)&&(r=va(n)?{}:n,e[t]=r):r=va(n)?{}:n,r}function bK(e,t){var n=null,r=null;return $r(e)?n=e:r=e,function(){var o=arguments;if(r=n?n():r)return r[t][g_](r,o)}}function wAe(e,t,n){if(e&&t&&uc(e)&&uc(t))for(var r in t)(function(o){var i;Er(o)&&(i=t[o],$r(i)?!n(o,!0,t,e)||(e[o]=bK(t,o)):!n(o,!1,t,e)||(Gg(e,o)&&delete e[o],Qo(e,o,{g:function(){return t[o]},s:function(l){t[o]=l}})))})(r);return e}function Xk(e,t,n,r,o){e&&t&&n&&(e[t]=bK(n,r))}function h1(e,t,n,r){return e&&t&&uc(e)&&bo(n)&&Xn(n,function(o){Er(o)&&Xk(e,o,t,o)}),e}function xAe(e){return function(){var t=this;wo(e,function(n,r){t[n]=r})}}function wK(e){return e=e&&EL?Yz(EL({},e)):e}function xK(e,t,n,r,o,i){var l=arguments,c=l[0]||{},f=l[Fr],p=!1,g=1;for(0<f&&U7(c)&&(p=c,c=l[g]||{},g++),uc(c)||(c={});g<f;g++){var v,w,C,T,k=l[g],P=bo(k),O=uc(k);for(v in k)(P&&v in k||O&&Gg(k,v))&&(w=k[v],C=void 0,p&&w&&((C=bo(w))||Eu(w))&&(T=c[v],C?bo(T)||(T=[]):Eu(T)||(T={}),w=xK(p,T,w)),w!==void 0)&&(c[v]=w)}return c}function YR(e,r){var n=!1,r=r&&r.featureOptIn&&r.featureOptIn[e];return n=e&&r?(e=r.mode)==3||e==1:n}function Qk(e){try{return e.responseText}catch{}return null}function CK(e,t){return e?"XDomainRequest,Response:"+Qk(e)||"":t}function Jk(e,t){return e?"XMLHttpRequest,Status:"+e[d1]+",Response:"+Qk(e)||e.response||"":t}function Y6(e,t){return t&&(pE(t)?e=[t].concat(e):bo(t)&&(e=t.concat(e))),e}var CAe="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Z6="withCredentials",SAe="timeout";function EAe(e,t,n,r,o,i){function l(f,p,g){try{f[p]=g}catch{}}o===void 0&&(o=!1);var c=new XMLHttpRequest;return l(c,CAe,r),n&&l(c,Z6,n),c.open(e,t,!o),n&&l(c,Z6,n),!o&&i&&l(c,SAe,i),c}function TAe(e){var t={};return Er(e)&&Xn(us(e)[kx](/[\r\n]+/),function(n){var r,o;n&&((o=n.indexOf(": "))!==-1?(r=us(n.substring(0,o))[Tx](),o=us(n.substring(o+1)),t[r]=o):t[us(n)]=1)}),t}function ZR(e,t,n){return!e[n]&&t&&t[D6]&&(t=t[D6](n))&&(e[n]=us(t)),e}var IAe="kill-duration",kAe="kill-duration-seconds",PAe="time-delta-millis";function XR(e,t){var n={};return e[L6]?n=TAe(e[L6]()):t&&(n=ZR(n,e,PAe),n=ZR(n,e,IAe),n=ZR(n,e,kAe)),n}var AAe="documentMode",MAe="location",RAe="console",SK="JSON",OAe="crypto",DAe="msCrypto",LAe="ReactNative",jL="msie",$L="trident/",EK="XMLHttpRequest",QR=null,X6=null,NAe=!1,AC=null,JR=null;function TK(e,t){var n,r=!1;if(e){try{(r=t in e)||(n=e[Rf])&&(r=t in n)}catch{}if(!r)try{r=!va(new e()[t])}catch{}}return r}function xf(e){return e&&NAe&&(e=Pa("__mockLocation"),e)?e:typeof location===fK&&location?location:Pa(MAe)}function FAe(){return typeof console!==Kz?console:Pa(RAe)}function vE(){return!!(typeof JSON===fK&&JSON||Pa(SK)!==null)}function Rh(){return vE()?JSON||Pa(SK):null}function zAe(){return Pa(OAe)}function BAe(){return Pa(DAe)}function UAe(){var e=Xf();return!(!e||!e.product)&&e.product===LAe}function HL(){var e=Xf();return!e||e[kL]===X6&&QR!==null||(e=((X6=e[kL])||Lo)[Tx](),QR=Wl(e,jL)||Wl(e,$L)),QR}function IK(e){var t=((e=(e=e===void 0?null:e)?e:(t=Xf()||{})?(t.userAgent||Lo)[Tx]():Lo)||Lo)[Tx]();return Wl(t,jL)?(e=Yl()||{},Math.max(parseInt(t[kx](jL)[1]),e[AAe]||0)):Wl(t,$L)&&(e=parseInt(t[kx]($L)[1]),e)?e+4:null}function f1(e){return JR=JR!==null&&e!==!1?JR:bPe()&&!!Xf().sendBeacon}function nB(e){var t=!1;try{var t=!!Pa("fetch"),n=Pa("Request");t&&e&&n&&(t=TK(n,"keepalive"))}catch{}return t}function jAe(){return AC=AC===null&&(AC=typeof XDomainRequest!==Kz)&&QA()?AC&&!TK(Pa(EK),"withCredentials"):AC}function QA(){var e=!1;try{e=!!Pa(EK)}catch{}return e}function $Ae(e,t){return!!(e&&e.dispatchEvent&&t)&&(e.dispatchEvent(t),!0)}function HAe(e,o){var n,r=null,o={detail:o||null};return $r(CustomEvent)?r=new CustomEvent(e,o):(n=Yl())&&n.createEvent&&(r=n.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,o),r}function VAe(e,t,n){var r=Od();if(r&&r.CustomEvent)try{return $Ae(r,HAe(e,{cfg:t||null,customDetails:n||null}))}catch{}return!1}var kK=4294967296,Kg=4294967295,PK=123456789,AK=987654321,MK=!1,PI=PK,AI=AK;function qAe(e){e<0&&(e>>>=0),PI=PK+e&Kg,AI=AK-e&Kg,MK=!0}function GAe(){try{var e=2147483647&jf();qAe((Math.random()*kK^e)+e)}catch{}}function WAe(e){return 0<e?Math.floor(TS()/Kg*(e+1))>>>0:0}function TS(e){var t=0,n=zAe()||BAe();return(t=n&&n.getRandomValues?n.getRandomValues(new Uint32Array(1))[0]&Kg:t)===0&&HL()&&(MK||GAe(),t=KAe()&Kg),t===0&&(t=Math.floor(kK*Math.random()|0)),t>>>=0,t}function KAe(e){var t=((AI=36969*(65535&AI)+(AI>>16)&Kg)<<16)+(65535&(PI=18e3*(65535&PI)+(PI>>16)&Kg))>>>0&Kg|0;return t>>>=0,t}function rB(e){e===void 0&&(e=22);for(var t=TS()>>>0,n=0,r=Lo;r[Fr]<e;)n++,r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&t),t>>>=6,n===5&&(t=(TS()<<2&4294967295|3&t)>>>0,n=0);return r}var RK="3.3.0",YAe="."+rB(6),ZAe=0;function OK(e){return e[zR]===1||e[zR]===9||!+e[zR]}function XAe(e,t){var n=t[e.id];if(!n){n={};try{OK(t)&&Qo(t,e.id,{e:!1,v:n})}catch{}}return n}function Bd(e,t){return Zk(e+ZAe+++((t=t===void 0?!1:t)?"."+RK:Lo)+YAe)}function DK(e){var t={id:Bd("_aiData-"+(e||Lo)+"."+RK),accept:function(n){return OK(n)},get:function(n,r,o,i){var l=n[t.id];return l?l[Zk(r)]:(i&&((l=XAe(t,n))[Zk(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return t}function MI(e){return e&&uc(e)&&(e.isVal||e.fb||Gg(e,"v")||Gg(e,"mrg")||Gg(e,"ref")||e.set)}function LK(e,t,n){var r,o=n.dfVal||B7;if(t&&n.fb){var i=n.fb;bo(i)||(i=[i]);for(var l=0;l<i[Fr];l++){var c=i[l],f=t[c];if(o(f)?r=f:e&&(o(f=e.cfg[c])&&(r=f),e.set(e.cfg,tc(c),f)),o(r))break}}return r=!o(r)&&o(n.v)?n.v:r}function VL(e,t,n){var r,o=n;return(o=n&&MI(n)?LK(e,t,n):o)&&(MI(o)&&(o=VL(e,t,o)),bo(o)?(r=[])[Fr]=o[Fr]:Eu(o)&&(r={}),r)&&(wo(o,function(i,l){l&&MI(l)&&(l=VL(e,t,l)),r[i]=l}),o=r),o}function oB(e,t,n,v){var o,i,l,c,f,p,g=v,g=MI(g)?(o=g.isVal,i=g.set,f=g[Dk],w=g[Ok],l=g.mrg,!(c=g.ref)&&va(c)&&(c=!!l),LK(e,t,g)):v,v=(w&&e[Ok](t,n),!0),w=t[n];!w&&wn(w)||(p=w,v=!1,o&&p!==g&&!o(p)&&(p=g,v=!0),i&&(v=(p=i(p,g,t))===g)),v?p=g&&VL(e,t,g):(Eu(p)||bo(g))&&l&&g&&(Eu(g)||bo(g))&&wo(g,function(C,T){oB(e,p,C,T)}),e.set(t,n,p),c&&e.ref(t,n),f&&e[Dk](t,n)}var ay=Vz("[[ai_dynCfg_1]]"),NK=Vz("[[ai_blkDynCfg_1]]"),QAe=Vz("[[ai_frcDynCfg_1]]");function FK(e){var t;return e&&(bo(e)?(t=[])[Fr]=e[Fr]:Eu(e)&&(t={}),t)?(wo(e,function(n,r){t[n]=FK(r)}),t):e}function JAe(e){if(e){var t=e[ay]||e;if(t.cfg&&(t.cfg===e||t.cfg[ay]===t))return t}return null}function eMe(e){if(e&&(Eu(e)||bo(e)))try{e[NK]=!0}catch{}return e}function eO(e,t,n){var r=!1;return r=!n||e[t.blkVal]||(r=n[QAe])||n[NK]?r:Eu(n)||bo(n)}function zK(e){zh("InvalidAccess:"+e)}var tMe=["push","pop","shift","unshift","splice"],IS=function(e,t,n,r){e&&e[gE](3,108,"".concat(n," [").concat(t,"] failed - ")+Zn(r))};function nMe(e,t,n){bo(t)&&Xn(tMe,function(r){var o=t[r];t[r]=function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var c=o[g_](this,i);return tP(e,t,n,"Patching"),c}})}function eP(e,t){return e=Uz(e,t),e&&e.get}function rMe(e,t,n,r){var o={n,h:[],trk:function(f){f&&f.fn&&(Jl(o.h,f)===-1&&o.h[ui](f),e.trk(f,o))},clr:function(f){f=Jl(o.h,f),f!==-1&&o.h[Jx](f,1)}},i=!0,l=!1;function c(){i&&(l=l||eO(c,e,r),r&&!r[ay]&&l&&(r=tP(e,r,n,"Converting")),i=!1);var f=e.act;return f&&o.trk(f),r}c[e.prop]={chng:function(){e.add(o)}},Qo(t,o.n,{g:c,s:function(f){if(r!==f){c[e.ro]&&!e.upd&&zK("["+n+"] is read-only:"+Zn(t)),i&&(l=l||eO(c,e,r),i=!1);var p,g=l&&c[e.rf];if(l)if(g){wo(r,function(v){r[v]=f?f[v]:yf});try{wo(f,function(v,w){JA(e,r,v,w)}),f=r}catch(v){IS((e.hdlr||{})[Wa],n,"Assigning",v),l=!1}}else r&&r[ay]&&wo(r,function(w){var w=eP(r,w);w&&(w=w[e.prop])&&w.chng()});f!==r&&(p=f&&eO(c,e,f),!g&&p&&(f=tP(e,f,n,"Converting")),r=f,l=p),e.add(o)}}})}function JA(e,t,n,r){var o;return t&&((o=eP(t,n))&&o[e.prop]?t[n]=r:rMe(e,t,n,r)),t}function tO(e,t,n,r){if(t){var o=eP(t,n),i=o&&!!o[e.prop],l=r&&r[0],c=r&&r[1],r=r&&r[2];if(!i){if(r)try{eMe(t)}catch(p){IS((e.hdlr||{})[Wa],n,"Blocking",p)}try{JA(e,t,n,t[n]),o=eP(t,n)}catch(p){IS((e.hdlr||{})[Wa],n,"State",p)}}l&&(o[e.rf]=l),c&&(o[e.ro]=c),r&&(o[e.blkVal]=!0)}return t}function tP(e,t,n,r){try{wo(t,function(o,i){JA(e,t,o,i)}),t[ay]||(dm(t,ay,{get:function(){return e[sK]}}),nMe(e,t,n))}catch(o){IS((e.hdlr||{})[Wa],n,r,o)}return t}var MC="[[ai_",RC="]]";function oMe(e){var t,n=IC(MC+"get"+e.uid+RC),r=IC(MC+"ro"+e.uid+RC),o=IC(MC+"rf"+e.uid+RC),i=IC(MC+"blkVal"+e.uid+RC),l=IC(MC+"dtl"+e.uid+RC),c=null,f=null;function p(v,w){var C=t.act;try{(t.act=v)&&v[l]&&(Xn(v[l],function(k){k.clr(v)}),v[l]=[]),w({cfg:e.cfg,set:e.set.bind(e),setDf:e[Qx].bind(e),ref:e.ref.bind(e),rdOnly:e[Dk].bind(e)})}catch(k){var T=e[Wa];throw T&&T[gE](1,107,Zn(k)),k}finally{t.act=C||null}}function g(){if(c){var v=c,w=(c=null,f&&f[Iw](),f=null,[]);if(Xn(v,function(C){if(C&&(C[l]&&(Xn(C[l],function(T){T.clr(C)}),C[l]=null),C.fn))try{p(C,C.fn)}catch(T){w[ui](T)}}),c)try{g()}catch(C){w[ui](C)}0<w[Fr]&&WPe("Watcher error(s): ",w)}}return(n={prop:n,ro:r,rf:o})[Ok]=i,n[sK]=e,n.add=function(v){if(v&&0<v.h[Fr]){c=c||[],f=f||zd(function(){f=null,g()},0);for(var w=0;w<v.h[Fr];w++){var C=v.h[w];C&&Jl(c,C)===-1&&c[ui](C)}}},n[Lk]=g,n.use=p,n.trk=function(v,w){v&&(v=v[l]=v[l]||[],Jl(v,w)===-1)&&v[ui](w)},t=n}function iMe(e,t){var n={fn:t,rm:function(){n.fn=null,t=e=null}};return Qo(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),e.use(n,t),n}function aMe(e,t,n){var r,o,i=JAe(t);return i||(i=Bd("dyncfg",!0),(t={uid:null,cfg:n=t&&n!==!1?t:FK(t)})[Wa]=e,t[Lk]=function(){r[Lk]()},t.set=function(l,c,f){try{l=JA(r,l,c,f)}catch(p){IS(e,c,"Setting value",p)}return l[c]},t[Qx]=function(l,c){return c&&wo(c,function(f,p){oB(o,l,f,p)}),l},t[Gv]=function(l){return iMe(r,l)},t.ref=function(l,c){return tO(r,l,c,((l={})[0]=!0,l))[c]},t[Dk]=function(l,c){return tO(r,l,c,((l={})[1]=!0,l))[c]},t[Ok]=function(l,c){return tO(r,l,c,((l={})[2]=!0,l))[c]},t._block=function(l,c){r.use(null,function(f){var p=r.upd;try{va(c)||(r.upd=c),l(f)}finally{r.upd=p}})},Qo(o=t,"uid",{c:!1,e:!1,w:!1,v:i}),tP(r=oMe(o),n,"config","Creating"),o)}function sMe(e,t){e?(e[Nk](t),e[gE](2,108,t)):zK(t)}function Ud(e,t,n,r){return n=aMe(n,e||{},r),t&&n[Qx](n.cfg,t),n}function Za(e,t,n){var r=e[ay]||e;return(!r.cfg||r.cfg!==e&&r.cfg[ay]!==r?(sMe(n,mAe+Zn(e)),Ud(e,null,n)):r)[Gv](t)}function Pw(e,t){if(e&&e[iy])return e[iy](t)}function BK(e,t,n){var r;return n||(r=gm(function(o){n=o})),e&&0<jPe(e)?mm(Pw(e[0],t),function(){BK(XA(e,1),t,n)}):n(),r}var lMe=500,Q6="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function uMe(e,t,n){return!e&&wn(e)?t:U7(e)?e:tc(e)[Tx]()==="true"}function ff(e){return{mrg:!0,v:e}}function J6(e,t){return{set:e,v:t}}function nP(e,t,n){return{fb:n,isVal:e,v:t}}function os(e,t){return{fb:t,set:uMe,v:!!e}}function cMe(e){return{isVal:Er,v:tc(Lo)}}var OT,OC,nO=[II,N1,kI,Fv],rP=null;function dMe(e,t){return function(){var n=arguments,r=UK(t);r&&(r=r.listener)&&r[e]&&r[e][g_](r,n)}}function hMe(){var e=Pa("Microsoft");return rP=e?e.ApplicationInsights:rP}function UK(e){var t=rP;return(t=t||e.disableDbgExt===!0?t:rP||hMe())?t.ChromeDbgExt:null}function fMe(e){if(!OT){OT={};for(var t=0;t<nO[Fr];t++)OT[nO[t]]=dMe(nO[t],e)}return OT}var jK="warnToConsole",pMe="AI (Internal): ",mMe="AI: ",gMe="AITR_",yMe={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},vMe=((OC={})[0]=null,OC[1]="errorToConsole",OC[2]=jK,OC[3]="debugToConsole",OC);function e4(e){return e?'"'+e[Kv](/\"/g,Lo)+'"':Lo}function rO(e,t){var n,r=FAe();r&&(n="log",r[e]&&(n=e),$r(r[n]))&&r[n](t)}var kS=function(){function e(t,n,r,o){r===void 0&&(r=!1),this[Uk]=t,this[Wv]=(r?mMe:pMe)+t,r=Lo,vE()&&(r=Rh().stringify(o)),t=(n?" message:"+e4(n):Lo)+(o?" props:"+e4(r):Lo),this[Wv]+=t}return e.dataType="MessageData",e}();function A_(e,t){return(e||{})[Wa]||new oP(t)}var t4,Hb,oP=function(){function e(t){this.identifier="DiagnosticLogger",this.queue=[];var n,r,o,i,l,c=0,f={};Qi(e,this,function(p){function g(w,C){var T,k;o<=c||(k=!0,T=gMe+C[Uk],f[T]?k=!1:f[T]=!0,k&&(w<=r&&(p.queue[ui](C),c++,v(w===1?"error":"warn",C)),c===o)&&(k=new kS(23,T="Internal events throttle limit per PageView reached for this app.",!1),p.queue[ui](k),w===1?p.errorToConsole(T):p[Nk](T)))}function v(w,C){var T=UK(t||{});T&&T[Wg]&&T[Wg](w,C)}l=Za(Ud(t||{},yMe,p).cfg,function(w){w=w.cfg,n=w[uK],r=w.loggingLevelTelemetry,o=w.maxMessageLimit,i=w.enableDebug}),p.consoleLoggingLevel=function(){return n},p[gE]=function(w,C,T,k,P){if(C=new kS(C,T,P=P===void 0?!1:P,k),i)throw Zn(C);T=vMe[w]||jK,va(C[Wv])?v("throw"+(w===1?"Critical":"Warning"),C):(P?(k=+C[Uk],!f[k]&&w<=n&&(p[T](C[Wv]),f[k]=!0)):w<=n&&p[T](C[Wv]),g(w,C))},p.debugToConsole=function(w){rO("debug",w),v("warning",w)},p[Nk]=function(w){rO("warn",w),v("warning",w)},p.errorToConsole=function(w){rO("error",w),v("error",w)},p.resetInternalMessageCount=function(){c=0,f={}},p[dK]=g,p[iy]=function(w){l&&l.rm(),l=null}})}return e.__ieDyn=1,e}();function iB(e){return e||new oP}function On(e,t,n,r,o,i){i===void 0&&(i=!1),iB(e)[gE](t,n,r,o,i)}function Zv(e,t){iB(e)[Nk](t)}function _Me(e,t,n){iB(e)[dK](t,n)}var Of,n4="toGMTString",r4="toUTCString",aB="cookie",oO="expires",o4="isCookieUseDisabled",qL="disableCookiesUsage",Aw="_ckMgr",DT=null,iO=null,i4=null,a4={},iP={},bMe=((t4={cookieCfg:ff(((Hb={})[UL]={fb:"cookieDomain",dfVal:Yv},Hb.path={fb:"cookiePath",dfVal:Yv},Hb.enabled=yf,Hb.ignoreCookies=yf,Hb.blockedCookies=yf,Hb)),cookieDomain:yf,cookiePath:yf})[qL]=yf,t4);function sB(){Of=Of||_Pe(function(){return Yl()})}function wMe(e,t){var n=RI[Aw]||iP[Aw];return n||(n=RI[Aw]=RI(e,t),iP[Aw]=n),n}function LT(e){return!e||e.isEnabled()}function $K(e,t){return!!(t&&e&&bo(e.ignoreCookies))&&Jl(e.ignoreCookies,t)!==-1}function xMe(e,t){return!!(t&&e&&bo(e.blockedCookies)&&Jl(e.blockedCookies,t)!==-1)||$K(e,t)}function s4(e,r){var n,r=r[kw];return wn(r)&&(n=void 0,va(e[o4])||(n=!e[o4]),r=n=va(e[qL])?n:!e[qL]),r}function lB(e,t){var n;return e&&(n=e.getCookieMgr()),n=n||wMe(t,(e||{})[Wa])}function RI(e,t){e=Ud(e||iP,null,t).cfg,l=Za(e,function(w){w[Qx](w.cfg,bMe),r=w.ref(w.cfg,"cookieCfg"),o=r[KR]||"/",i=r[UL],c=s4(e,r)!==!1,f=r.getCookie||CMe,p=r.setCookie||d4,g=r.delCookie||d4},t),(n={isEnabled:function(){var w=s4(e,r)!==!1&&c&&l4(t),C=iP[Aw];return w=w&&C&&v!==C?LT(C):w},setEnabled:function(w){c=w!==!1,r[kw]=w},set:function(w,C,T,k,P){var O,L,D,N=!1;return LT(v)&&!xMe(r,w)&&(O={},L=us(C||Lo),(D=nc(L,";"))!==-1&&(L=us(jz(C,D)),O=HK(Zf(C,D+1))),Ui(O,UL,k||i,Mk,va),wn(T)||(C=HL(),va(O[oO])&&0<(D=jf()+1e3*T)&&((k=new Date).setTime(D),Ui(O,oO,u4(k,C?n4:r4)||u4(k,C?n4:r4)||Lo,Mk)),C)||Ui(O,"max-age",Lo+T,null,va),(D=xf())&&D[cK]==="https:"&&(Ui(O,"secure",null,null,va),iO=iO===null?!SMe((Xf()||{})[kL]):iO)&&Ui(O,"SameSite","None",null,va),Ui(O,KR,P||o,null,va),p(w,c4(L,O)),N=!0),N},get:function(w){var C=Lo;return C=LT(v)&&!$K(r,w)?f(w):C},del:function(w,C){var T=!1;return T=LT(v)?v.purge(w,C):T},purge:function(w,C){var T,k=!1;return l4(t)&&((T={})[KR]=C||"/",T[oO]="Thu, 01 Jan 1970 00:00:01 GMT",C=T,HL()||(C["max-age"]="0"),g(w,c4(Lo,C)),k=!0),k}})[iy]=function(w){l&&l.rm(),l=null};var n,r,o,i,l,c,f,p,g,v=n;return v[Aw]=v}function l4(e){if(DT===null){DT=!1,Of||sB();try{var t=Of.v||{};DT=t[aB]!==void 0}catch(n){On(e,2,68,"Cannot access document.cookie - "+ri(n),{exception:Zn(n)})}}return DT}function HK(e){var t={};return e&&e[Fr]&&Xn(us(e)[kx](";"),function(n){var r;(n=us(n||Lo))&&((r=nc(n,"="))===-1?t[n]=null:t[us(jz(n,r))]=us(Zf(n,r+1)))}),t}function u4(e,t){return $r(e[t])?e[t]():null}function c4(e,t){var n=e||Lo;return wo(t,function(r,o){n+="; "+r+(wn(o)?Lo:"="+o)}),n}function CMe(e){var t,n=Lo;return Of||sB(),Of.v&&(t=Of.v[aB]||Lo,i4!==t&&(a4=HK(t),i4=t),n=us(a4[e]||Lo)),n}function d4(e,t){Of||sB(),Of.v&&(Of.v[aB]=e+"="+t)}function SMe(e){return!(!Er(e)||!Wl(e,"CPU iPhone OS 12")&&!Wl(e,"iPad; CPU OS 12")&&!(Wl(e,"Macintosh; Intel Mac OS X 10_14")&&Wl(e,"Version/")&&Wl(e,"Safari"))&&(!Wl(e,"Macintosh; Intel Mac OS X 10_14")||!oK(e,"AppleWebKit/605.1.15 (KHTML, like Gecko)"))&&!Wl(e,"Chrome/5")&&!Wl(e,"Chrome/6")&&(!Wl(e,"UnrealEngine")||Wl(e,"Chrome"))&&!Wl(e,"UCBrowser/12")&&!Wl(e,"UCBrowser/11"))}var EMe={perfEvtsSendAll:!1};function TMe(e){e.h=null;var t=e.cb;e.cb=[],Xn(t,function(n){el(n.fn,[n.arg])})}function cg(e,t,n,r){Xn(e,function(o){o&&o[t]&&(n?(n.cb[ui]({fn:r,arg:o}),n.h=n.h||zd(TMe,0,n)):el(r,[o]))})}var IMe=function(){function e(t){this.listeners=[];var n,r=[],o={h:null,cb:[]},i=Ud(t,EMe)[Gv](function(l){n=!!l.cfg.perfEvtsSendAll});Qi(e,this,function(l){Qo(l,"listeners",{g:function(){return r}}),l[zk]=function(c){r[ui](c)},l[Fk]=function(c){for(var f=Jl(r,c);-1<f;)r[Jx](f,1),f=Jl(r,c)},l[II]=function(c){cg(r,II,o,function(f){f[II](c)})},l[N1]=function(c,f){cg(r,N1,o,function(p){p[N1](c,f)})},l[kI]=function(c,f){cg(r,kI,f?o:null,function(p){p[kI](c,f)})},l[Fv]=function(c){!c||!n&&c[PL]()||cg(r,Fv,null,function(f){c[Ix]?zd(function(){return f[Fv](c)},0):f[Fv](c)})},l[qR]=function(c){c&&c[Fr]&&cg(r,qR,o,function(f){f[qR](c)})},l[GR]=function(c){c&&c[fw]&&cg(r,GR,o,function(f){f[GR](c)})},l[WR]=function(c,f){var p;0<c&&(p=f||0,cg(r,WR,o,function(g){g[WR](c,p)}))},l[iy]=function(c){function f(){i&&i.rm(),i=null,r=[],o.h&&o.h[Iw](),o.h=null,o.cb=[]}var p;if(cg(r,"unload",null,function(g){g=g[iy](c),g&&(p=p||[])[ui](g)}),p)return gm(function(g){return mm(fAe(p),function(){f(),g()})});f()}})}return e.__ieDyn=1,e}(),Jw="ctx",GL="ParentContextKey",F1="ChildrenContextKey",kMe=null,OI=function(){function e(t,n,r){var o,i=this;i.start=jf(),i[Jp]=t,i[Ix]=r,i[PL]=function(){return!1},$r(n)&&Qo(i,"payload",{g:function(){return!o&&$r(n)&&(o=n(),n=null),o}}),i[Zw]=function(l){return l?(l===e[GL]||l===e[F1]?i:i[Jw]||{})[l]:null},i[df]=function(l,c){l&&(l===e[GL]?(i[l]||(i[PL]=function(){return!0}),i[l]=c):l===e[F1]?i[l]=c:(i[Jw]=i[Jw]||{})[l]=c)},i[AL]=function(){var l=0,c=i[Zw](e[F1]);if(bo(c))for(var f=0;f<c[Fr];f++){var p=c[f];p&&(l+=p[Yw])}i[Yw]=jf()-i.start,i.exTime=i[Yw]-l,i[AL]=function(){}}}return e.ParentContextKey="parent",e.ChildrenContextKey="childEvts",e}(),PMe=function(){function e(t){this.ctx={},Qi(e,this,function(n){n.create=function(r,o,i){return new OI(r,o,i)},n.fire=function(r){r&&(r[AL](),t)&&$r(t[Fv])&&t[Fv](r)},n[df]=function(r,o){r&&((n[Jw]=n[Jw]||{})[r]=o)},n[Zw]=function(r){return(n[Jw]||{})[r]}})}return e.__ieDyn=1,e}(),aO="CoreUtils.doPerf";function aP(e,t,n,r,o){if(e&&(e=e[Yk]?e[Yk]():e)){var i,l=void 0,c=e[Zw](aO);try{if(l=e.create(t(),r,o))return c&&l[df]&&(l[df](OI[GL],c),c[Zw])&&c[df]&&((i=c[Zw](OI[F1]))||(i=[],c[df](OI[F1],i)),i[ui](l)),e[df](aO,l),n(l)}catch(f){l&&l[df]&&l[df]("exception",f)}finally{l&&e.fire(l),e[df](aO,c)}}return n()}function AMe(){return kMe}function $g(){for(var e,t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=Lo,r=0;r<4;r++)n+=t[15&(e=TS())]+t[e>>4&15]+t[e>>8&15]+t[e>>12&15]+t[e>>16&15]+t[e>>20&15]+t[e>>24&15]+t[e>>28&15];var o=t[8+(3&TS())|0];return Og(n,0,8)+Og(n,9,4)+"4"+Og(n,13,3)+o+Og(n,16,3)+Og(n,19,12)}var WL="00",MMe="ff",VK="00000000000000000000000000000000",qK="0000000000000000";function _E(e,t,n){return!(!e||e[Fr]!==t||e===n||!e.match(/^[\da-f]*$/i))}function h4(e,t,n){return _E(e,t)?e:n}function RMe(e){for(var t=(e=isNaN(e)||e<0||255<e?1:e).toString(16);t[Fr]<2;)t="0"+t;return t}function f4(e,t,n,r){var o={};return o[Bk]=_E(r,2,MMe)?r:WL,o[ML]=uB(e)?e:$g(),o[RL]=cB(t)?t:jz($g(),16),o.traceFlags=0<=n&&n<=255?n:1,o}function uB(e){return _E(e,32,VK)}function cB(e){return _E(e,16,qK)}function p4(e){var t,n;return e?(_E(t=RMe(e[OL]),2)||(t="01"),n=e[Bk]||WL,"".concat((n=n!=="00"&&n!=="ff"?WL:n).toLowerCase(),"-").concat(h4(e.traceId,32,VK).toLowerCase(),"-").concat(h4(e.spanId,16,qK).toLowerCase(),"-").concat(t.toLowerCase())):""}var OMe=DK("plugin");function Xv(e){return OMe.get(e,"state",{},!0)}function m4(e,t){for(var n=[],r=null,o=e[Mf]();o;){var i,l,c=o[wS]();c&&(r&&r[CS]&&c[$f]&&r[CS](c),l=!!(i=Xv(c))[wf],(l=c[wf]?c[wf]():l)||n[ui](c),r=c,o=o[Mf]())}Xn(n,function(f){var p=e[Cs]();f[yE](e.getCfg(),p,t,e[Mf]()),i=Xv(f),f[Cs]||i[Cs]||(i[Cs]=p),i[wf]=!0,delete i[qp]})}function sO(e){return e.sort(function(t,n){var r,o=0;return n?(r=n[$f],t[$f]?o=r?t[Kk]-n[Kk]:1:r&&(o=-1)):o=t?1:-1,o})}function DMe(e){var t={};return{getName:function(){return t[Jp]},setName:function(n){t[Jp]=n},getTraceId:function(){return t[ML]},setTraceId:function(n){uB(n)&&(t[ML]=n)},getSpanId:function(){return t[RL]},setSpanId:function(n){cB(n)&&(t[RL]=n)},getTraceFlags:function(){return t[OL]},setTraceFlags:function(n){t[OL]=n}}}var g4,LMe="TelemetryPluginChain",y4="_hasRun",v4="_getTelCtx",_4=0;function NMe(e,t,n){for(;e;){if(e[wS]()===n)return e;e=e[Mf]()}return __([n],t.config||{},t)}function dB(e,t,n,r){var o=null,i=[],l=(t=t||Ud({},null,n[Wa]),r!==null&&(o=r?NMe(e,n,r):e),{_next:function(){var f=o;{var p;o=f?f[Mf]():null,f||(p=i)&&0<p[Fr]&&(Xn(p,function(g){try{g.func.call(g.self,g.args)}catch(v){On(n[Wa],2,73,"Unexpected Exception during onComplete - "+Zn(v))}}),i=[])}return f},ctx:{core:function(){return n},diagLog:function(){return A_(n,t.cfg)},getCfg:function(){return t.cfg},getExtCfg:function(f,p){var g=c(f,!0);return p&&wo(p,function(v,w){var C;!wn(g[v])||!(C=t.cfg[v])&&wn(C)||(g[v]=C),oB(t,g,v,w)}),t[Qx](g,p)},getConfig:function(w,p,g){g===void 0&&(g=!1);var v,w=c(w,!1),C=t.cfg;return!w||!w[p]&&wn(w[p])?!C[p]&&wn(C[p])||(v=C[p]):v=w[p],v||!wn(v)?v:g},hasNext:function(){return!!o},getNext:function(){return o},setNext:function(f){o=f},iterate:function(f){for(;p=l._next();){var p=p[wS]();p&&f(p)}},onComplete:function(f,p){for(var g=[],v=2;v<arguments.length;v++)g[v-2]=arguments[v];f&&i[ui]({func:f,self:va(p)?l.ctx:p,args:g})}}});function c(f,p){var g,v=null,w=t.cfg;return w&&f&&(g=w[Qw],w[Qw]=g=!g&&p?{}:g,g=t.ref(w,Qw))&&(v=g[f],g[f]=v=!v&&p?{}:v,v=t.ref(g,f)),v}return l}function Oh(e,t,n,r){var o=Ud(t),i=dB(e,o,n,r),l=i.ctx;return l[Cu]=function(c){var f=i._next();return f&&f[$f](c,l),!f},l[y_]=function(c,f){return Oh((c=bo(c=c===void 0?null:c)?__(c,o.cfg,n,f):c)||l[Mf](),o.cfg,n,f)},l}function sP(e,t,n){var r=Ud(t.config),o=dB(e,r,t,n),i=o.ctx;return i[Cu]=function(l){var c=o._next();return c&&c[iy](i,l),!c},i[y_]=function(l,c){return sP((l=bo(l=l===void 0?null:l)?__(l,r.cfg,t,c):l)||i[Mf](),t,c)},i}function hB(e,t,n){var r=Ud(t.config),o=dB(e,r,t,n).ctx;return o[Cu]=function(i){return o.iterate(function(l){$r(l[xS])&&l[xS](o,i)})},o[y_]=function(i,l){return hB((i=bo(i=i===void 0?null:i)?__(i,r.cfg,t,l):i)||o[Mf](),t,l)},o}function __(e,t,n,r){var o,i=null,l=!r;return bo(e)&&0<e[Fr]&&(o=null,Xn(e,function(c){(l=l||r!==c?l:!0)&&c&&$r(c[$f])&&(c=FMe(c,t,n),i=i||c,o&&o._setNext(c),o=c)})),r&&!i?__([r],t,n):i}function FMe(e,t,n){var r=null,o=$r(e[$f]),i=$r(e[CS]),l=e?e[Dg]+"-"+e[Kk]+"-"+_4++:"Unknown-0-"+_4++,c={getPlugin:function(){return e},getNext:function(){return r},processTelemetry:function(p,g){f(g=g||function(){var v;return e&&$r(e[v4])&&(v=e[v4]()),v=v||Oh(c,t,n),v}(),function(v){var w;return!(!e||!o||(w=Xv(e))[qp]||w[BL]||(i&&e[CS](r),e[$f](p,v),0))},"processTelemetry",function(){return{item:p}},!p.sync)||g[Cu](p)},unload:function(p,g){f(p,function(){var v,w,C=!1;return e&&(v=Xv(e),w=e[Cs]||v[Cs],!e||w&&w!==p.core()||v[qp]||(v[Cs]=null,v[qp]=!0,v[wf]=!1,e[qp]&&e[qp](p,g)===!0&&(C=!0))),C},"unload",function(){},g[Ix])||p[Cu](g)},update:function(p,g){f(p,function(){var v,w,C=!1;return e&&(v=Xv(e),w=e[Cs]||v[Cs],!e||w&&w!==p.core()||v[qp]||e[xS]&&e[xS](p,g)===!0&&(C=!0)),C},"update",function(){},!1)||p[Cu](g)},_id:l,_setNext:function(p){r=p}};function f(p,g,v,w,C){var T=!1,k=e?e[Dg]:LMe,P=(P=p[y4])||(p[y4]={});return p.setNext(r),e&&aP(p[Cs](),function(){return k+":"+v},function(){P[l]=!0;try{var O=r?r._id:Lo;O&&(P[O]=!1),T=g(p)}catch(L){O=!r||P[r._id],O&&(T=!0),r&&O||On(p[Wg](),1,73,"Plugin ["+k+"] failed during "+v+" - "+Zn(L)+", run flags: "+Zn(P))}},w,C),T}return hm(c)}function GK(){var e=[];return{add:function(t){t&&e[ui](t)},run:function(t,n){Xn(e,function(r){try{r(t,n)}catch(o){On(t[Wg](),2,73,"Unexpected error calling unload handler - "+Zn(o))}}),e=[]}}}function WK(){var e=[];return{run:function(t){var n=e;e=[],Xn(n,function(r){try{(r.rm||r.remove).call(r)}catch(o){On(t,2,73,"Unloading:"+Zn(o))}})},add:function(t){t&&Tw(e,t)}}}var dg="getPlugin",zMe=((g4={})[Qw]={isVal:Yv,v:{}},g4),e0=function(){function e(){var t,n,r,o,i,l=this;function c(w){var v,w=w=w===void 0?null:w;return w||(v=n||Oh(null,{},l[Cs]),w=r&&r[dg]?v[y_](null,r[dg]):v[y_](null,r)),w}function f(g,v,w){Ud(g,zMe,A_(v)),!w&&v&&(w=v[lK]()[Mf]());var C=r;r&&r[dg]&&(C=r[dg]()),l[Cs]=v,n=Oh(w,g,v,C)}function p(){t=!1,l[Cs]=null,r=n=null,i=WK(),o=GK()}p(),Qi(e,l,function(g){g[yE]=function(v,w,C,T){f(v,w,T),t=!0},g[qp]=function(v,w){var C,T,k,P,O=g[Cs];if(O&&(!v||O===v[Cs]()))return T=!1,k=v||sP(null,O,r&&r[dg]?r[dg]():r),P=w||((v={reason:0})[Ix]=!1,v),g[jk]&&g[jk](k,P,L)===!0?C=!0:L(),C;function L(){T||(T=!0,o.run(k,w),i.run(k[Wg]()),C===!0&&k[Cu](P),p())}},g[xS]=function(v,w){var C,T,k,P=g[Cs];if(P&&(!v||P===v[Cs]()))return T=!1,k=v||hB(null,P,r&&r[dg]?r[dg]():r),g._doUpdate&&g._doUpdate(k,w||{reason:0},O)===!0?C=!0:O(),C;function O(){T||(T=!0,f(k.getCfg(),k.core(),k[Mf]()))}},Xk(g,"_addUnloadCb",function(){return o},"add"),Xk(g,"_addHook",function(){return i},"add"),Qo(g,"_unloadHooks",{g:function(){return i}})}),l[Wg]=function(g){return c(g)[Wg]()},l[wf]=function(){return t},l.setInitialized=function(g){t=g},l[CS]=function(g){r=g},l[Cu]=function(g,v){v?v[Cu](g):r&&$r(r[$f])&&r[$f](g,null)},l._getTelCtx=c}return e.__ieDyn=1,e}();function BMe(e,t,n){var r={id:t,fn:n};return Tw(e,r),{remove:function(){Xn(e,function(o,i){if(o.id===r.id)return e[Jx](i,1),-1})}}}function UMe(e,t,n){for(var r=!1,o=e[Fr],i=0;i<o;++i){var l=e[i];if(l)try{if(l.fn[g_](null,[t])===!1){r=!0;break}}catch(c){On(n,2,64,"Telemetry initializer failed: "+ri(c),{exception:Zn(c)},!0)}}return!r}var ov,jMe=function(e){function t(){var n,r,o=e.call(this)||this;function i(){n=0,r=[]}return o.identifier="TelemetryInitializerPlugin",o.priority=199,i(),Qi(t,o,function(l,c){l.addTelemetryInitializer=function(f){return BMe(r,n++,f)},l[$f]=function(f,p){UMe(r,f,(p||l)[Wg]())&&l[Cu](f,p)},l[jk]=function(){i()}}),o}return Tm(t,e),t.__ieDyn=1,t}(e0),KK="Plugins must provide initialize method",$Me="_notificationManager",b4="SDK is still unloading...",HMe="SDK is not initialized",VMe=100,qMe=5e4,lO=Zx(((ov={cookieCfg:{}})[pw]={rdOnly:!0,ref:!0,v:[]},ov[Tv]={rdOnly:!0,ref:!0,v:[]},ov[Qw]={ref:!0,v:{}},ov[zL]=yf,ov.loggingLevelConsole=0,ov.diagnosticLogInterval=yf,ov));function GMe(e,t){return new PMe(t)}function WMe(e,t,n){var r=[],o=[],i={};return Xn(n,function(l){(wn(l)||wn(l[yE]))&&Fc(KK);var c=l[Kk],f=l[Dg];l&&c&&(wn(i[c])?i[c]=f:Zv(e,"Two extensions have same priority #"+c+" - "+i[c]+", "+f)),(!c||c<t?r:o)[ui](l)}),(n={})[Cs]=r,n[Tv]=o,n}function w4(e,t){var n=!1;return Xn(t,function(r){if(r===e)return n=!0,-1}),n}function KL(e,t,n,r){n&&wo(n,function(o,i){r&&Eu(i)&&Eu(t[o])&&KL(e,t[o],i,r),r&&Eu(i)&&Eu(t[o])?KL(e,t[o],i,r):e.set(t,o,i)})}function x4(e,t){var n=null,r=-1;return Xn(e,function(o,i){if(o.w===t)return n=o,r=i,-1}),{i:r,l:n}}function KMe(e,t){var n=x4(e,t).l;return n||e[ui](n={w:t,rm:function(){var r=x4(e,t);r.i!==-1&&e[Jx](r.i,1)}}),n}function YMe(e,t,n){Xn(t,function(r){var o=Za(e,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function ZMe(e,t,n,r){return t.add(e[Gv](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[Fk](r),r=null),n&&!r&&i!==!0&&(r=fMe(o.cfg),n[zk](r))})),r}function XMe(e){return Qo({rm:function(){e.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(e)+">"}})}var QMe=function(){function e(){var t,n,r,o,i,l,c,f,p,g,v,w,C,T,k,P,O,L,D,N,F,B,V,G,q,z,$,K,te,re,oe,ue;Qi(e,this,function(Q){function ce(){te=!0,wn(F)?(z=Tg[FR],On(r,1,112,"ikey can't be resolved from promises")):z=Tg.ACTIVE,ae()}function ae(){n&&(Q.releaseQueue(),Q[R6]())}function fe(ee){return re&&re[kw]||ue||(ee||r&&0<r.queue[Fr])&&(oe||(oe=!0,ne(t[Gv](function(Ie){var Ie=Ie.cfg.diagnosticLogInterval,ge=(Ie&&0<Ie||(Ie=1e4),!1);re&&(ge=re[kw],re[Iw]()),(re=qPe(ut,Ie)).unref(),re[kw]=ge}))),re[kw]=!0),re}function le(){function ee(Ie){Ie&&Xn(Ie,function(ge){var $e;ge[Dg]&&ge[Bk]&&!ye[ge.identifier]&&($e=ge[Dg]+"="+ge[Bk],G[ui]($e),ye[ge.identifier]=ge)})}var ye={};G=[],ee(w),v&&Xn(v,function(Ie){ee(Ie)}),ee(g)}function pe(){n=!1,(t=Ud({},lO,Q[Wa])).cfg[uK]=1,Qo(Q,"config",{g:function(){return t.cfg},s:function(ye){Q.updateCfg(ye,!1)}}),Qo(Q,"pluginVersionStringArr",{g:function(){return G||le(),G}}),Qo(Q,"pluginVersionString",{g:function(){return q||(G||le(),q=G.join(";")),q||Lo}}),Qo(Q,"logger",{g:function(){return r||(r=new oP(t.cfg),t[Wa]=r),r},s:function(ye){t[Wa]=ye,r!==ye&&(Pw(r,!1),r=ye)}}),Q[Wa]=new oP(t.cfg),V=[];var ee=Q.config[pw]||[];ee.splice(0,ee[Fr]),Tw(ee,V),T=new jMe,Pw(i,!(o=[])),c=l=i=null,Pw(f,!1),C=!(g=[]),P=Bd("AIBaseCore",!(k=w=v=p=f=null)),O=GK(),F=N=null,L=WK(),z=0,K=$=re=G=q=null,te=oe=ue=!(B=[])}function Fe(){var ee=Oh(it(),t.cfg,Q);return ee[MT](fe),ee}function Be(ee){var ye=WMe(Q[Wa],lMe,g),ye=(G=q=p=null,w=sO(Tw(w=(v||[])[0]||[],ye[Tv])),Tw(sO(ye[Cs]),w)),Ie=(V=hm(ye),Q.config[pw]||[]),Ie=(Ie.splice(0,Ie[Fr]),Tw(Ie,V),Fe());w&&0<w[Fr]&&m4(Ie[y_](w),ye),m4(Ie,ye),ee&&ct(ee)}function Ze(ee){var ye=null,Ie=null,ge=[];return Xn(V,function($e){if($e[Dg]===ee&&$e!==T)return Ie=$e,-1;$e.getChannel&&ge[ui]($e)}),!Ie&&0<ge[Fr]&&Xn(ge,function($e){if(!(Ie=$e.getChannel(ee)))return-1}),ye=Ie?{plugin:Ie,setEnabled:function($e){Xv(Ie)[BL]=!$e},isEnabled:function(){var $e=Xv(Ie);return!$e[qp]&&!$e[BL]},remove:function($e,nt){var pt,wt=[Ie];(pt={reason:1})[Ix]=$e=$e===void 0?!0:$e,ot(wt,pt,function(mt){mt&&Be({reason:32,removed:wt}),nt&&nt(mt)})}}:ye}function it(){var ee;return p||(ee=(V||[]).slice(),Jl(ee,T)===-1&&ee[ui](T),p=__(sO(ee),t.cfg,Q)),p}function ot(ee,ye,Ie){var ge;ee&&0<ee[Fr]?((ge=sP(__(ee,t.cfg,Q),Q))[MT](function(){var $e=!1,nt=[],pt=(Xn(g,function(wt,mt){w4(wt,ee)?$e=!0:nt[ui](wt)}),g=nt,G=q=null,[]);v&&(Xn(v,function(wt,mt){var zt=[];Xn(wt,function(Pt){w4(Pt,ee)?$e=!0:zt[ui](Pt)}),pt[ui](zt)}),v=pt),Ie&&Ie($e),fe()}),ge[Cu](ye)):Ie(!1)}function ut(){var ee;r&&r.queue&&(ee=r.queue.slice(0),r.queue[Fr]=0,Xn(ee,function(ge){(Ie={})[Jp]=k||"InternalMessageId: "+ge[Uk],Ie[kC]=F,Ie[Yw]=Px(new Date),Ie.baseType=kS.dataType,Ie.baseData={message:ge[Wv]};var Ie,ge=Ie;Q.track(ge)}))}function st(ee,ye,Ie,ge){var $e=1,nt=!1,pt=null;function wt(){$e--,nt&&$e===0&&(pt&&pt[Iw](),pt=null,ye&&ye(nt),ye=null)}return ge=ge||5e3,w&&0<w[Fr]&&Fe()[y_](w).iterate(function(mt){var zt;mt.flush&&($e++,zt=!1,mt.flush(ee,function(){zt=!0,wt()},Ie)||zt||(ee&&pt==null?pt=zd(function(){pt=null,wt()},ge):wt()))}),nt=!0,wt(),!0}function ct(ee){var ye=hB(it(),Q);ye[MT](fe),Q._updateHook&&Q._updateHook(ye,ee)===!0||ye[Cu](ee)}function Ae(ee){var ye=Q[Wa];ye?(On(ye,2,73,ee),fe()):Fc(ee)}function Z(ee){var ye=Q[AT]();ye&&ye[N1]([ee],2)}function ne(ee){L.add(ee)}pe(),Q._getDbgPlgTargets=function(){return[V,o]},Q[wf]=function(){return n},Q.activeStatus=function(){return z},Q._setPendingStatus=function(){z=3},Q[yE]=function(ee,ye,Ie,nt){C&&Fc(b4),Q[wf]()&&Fc("Core cannot be initialized more than once"),t=Ud(ee,lO,Ie||Q[Wa],!1),ee=t.cfg,ne(t[Gv](function(pt){var wt,mt,zt,Pt,Zt=pt.cfg;z!==3&&(K=Zt.initInMemoMaxSize||VMe,mt=Zt[M6],zt=Zt.endpointUrl,wn(mt)?(F=null,z=Tg[FR],wt="Please provide instrumentation key",n?(On(r,1,100,wt),ae()):Fc(wt)):(wt=[],F=Ex(mt)?(wt[ui](mt),null):mt,$=Ex(zt)?(wt[ui](zt),null):zt,wt[Fr]?(te=!1,z=3,mt=Yv(Zt.initTimeOut)?Zt.initTimeOut:qMe,zt=pAe(wt),zd(function(){te||ce()},mt),mm(zt,function(We){try{var Ge,Rt,Dt;te||(We.rejected||((Ge=We[D1])&&Ge[Fr]&&(Rt=Ge[0],F=Rt&&Rt[D1],1<Ge[Fr])&&(Dt=Ge[1],$=Dt&&Dt[D1]),F&&(ee[M6]=F,ee.endpointUrl=$)),ce())}catch{te||ce()}})):ce(),wo(Pt=pt.ref(pt.cfg,Qw),function(We){pt.ref(Pt,We)})))})),D=ZMe(t,L,(i=nt)&&Q[AT](),D),ne(t[Gv](function(pt){var wt;pt.cfg.enablePerfMgr?(wt=pt.cfg[zL],$e!==wt&&(_u(pt.cfg,zL,wt=wt||GMe),$e=wt,c=null),l||c||!$r(wt)||(c=wt(Q,Q[AT]()))):$e=c=null})),Q[Wa]=Ie;var $e,nt=ee[pw];(g=[])[ui].apply(g,B6(B6([],ye,!1),nt)),v=ee[Tv],Be(null),w&&w[Fr]!==0||Fc("No "+Tv+" available"),v&&1<v[Fr]&&((Ie=Q[wS]("TeeChannelController"))&&Ie.plugin||On(r,1,28,"TeeChannel required")),YMe(ee,B,r),n=!(B=null),z===Tg.ACTIVE&&ae()},Q.getChannels=function(){var ee=[];return w&&Xn(w,function(ye){ee[ui](ye)}),hm(ee)},Q.track=function(ee){aP(Q[Yk](),function(){return"AppInsightsCore:track"},function(){ee===null&&(Z(ee),Fc("Invalid telemetry item")),!ee[Jp]&&wn(ee[Jp])&&(Z(ee),Fc("telemetry name required")),ee[kC]=ee[kC]||F,ee[Yw]=ee[Yw]||Px(new Date),ee.ver=ee.ver||"4.0",!C&&Q[wf]()&&z===Tg.ACTIVE?Fe()[Cu](ee):z!==Tg[FR]&&o[Fr]<=K&&o[ui](ee)},function(){return{item:ee}},!ee.sync)},Q[lK]=Fe,Q[AT]=function(){return i||(i=new IMe(t.cfg),Q[$Me]=i),i},Q[zk]=function(ee){Q.getNotifyMgr()[zk](ee)},Q[Fk]=function(ee){i&&i[Fk](ee)},Q.getCookieMgr=function(){return f=f||RI(t.cfg,Q[Wa])},Q.setCookieMgr=function(ee){f!==ee&&(Pw(f,!1),f=ee)},Q[Yk]=function(){return l||c||AMe()},Q.setPerfMgr=function(ee){l=ee},Q.eventCnt=function(){return o[Fr]},Q.releaseQueue=function(){var ee;n&&0<o[Fr]&&(ee=o,o=[],z===2?Xn(ee,function(ye){ye[kC]=ye[kC]||F,Fe()[Cu](ye)}):On(r,2,20,"core init status is not active"))},Q[R6]=function(ee){return k=ee||null,ue=!1,re&&re[Iw](),fe(!0)},Q[O6]=function(){ue=!0,re&&re[Iw](),ut()},h1(Q,function(){return T},["addTelemetryInitializer"]),Q[iy]=function(ee,ye,Ie){ee===void 0&&(ee=!0),n||Fc(HMe),C&&Fc(b4),(ge={reason:50})[Ix]=ee,ge.flushComplete=!1;var ge,$e,nt=ge,pt=(ee&&!ye&&($e=gm(function(wt){ye=wt})),sP(it(),Q));return pt[MT](function(){L.run(Q[Wa]),BK([f,i,r],ee,function(){pe(),ye&&ye(nt)})},Q),ut(),st(ee,function(wt){nt.flushComplete=wt,C=!0,O.run(pt,nt),Q[O6](),pt[Cu](nt)},6,Ie),$e},Q[wS]=Ze,Q.addPlugin=function(ee,ye,Ie,ge){var $e,nt,pt;function wt(){g[ui](ee),nt.added=[ee],Be(nt),ge&&ge(!0)}ee?($e=Ze(ee[Dg]))&&!ye?(ge&&ge(!1),Ae("Plugin ["+ee[Dg]+"] is already loaded!")):(nt={reason:16},$e?ot(pt=[$e.plugin],{reason:2,isAsync:!!Ie},function(mt){mt?(nt.removed=pt,nt.reason|=32,wt()):ge&&ge(!1)}):wt()):(ge&&ge(!1),Ae(KK))},Q.updateCfg=function(ee,ye){var Ie,ge;ye===void 0&&(ye=!0),Q[wf]()&&(Ie={reason:1,cfg:t.cfg,oldCfg:A6({},t.cfg),newConfig:A6({},ee),merge:ye},ee=Ie.newConfig,ge=t.cfg,ee[pw]=ge[pw],ee[Tv]=ge[Tv]),t._block(function($e){var nt=$e.cfg;KL($e,nt,ee,ye),ye||wo(nt,function(pt){Gg(ee,pt)||$e.set(nt,pt,yf)}),$e[Qx](nt,lO)},!0),t[Lk](),Ie&&ct(Ie)},Q.evtNamespace=function(){return P},Q.flush=st,Q.getTraceCtx=function(ee){return N=N||DMe()},Q.setTraceCtx=function(ee){N=ee||null},Q.addUnloadHook=ne,Xk(Q,"addUnloadCb",function(){return O},"add"),Q.onCfgChange=function(ee){return ee=n?Za(t.cfg,ee,Q[Wa]):KMe(B,ee),XMe(ee)},Q.getWParam=function(){return W7()||t.cfg.enableWParam?0:-1}})}return e.__ieDyn=1,e}();function uO(e,t){try{if(e&&e!==""){var n=Rh().parse(e);if(n&&n[N6]&&n[N6]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[Fr])return n}}catch(r){On(t,1,43,"Cannot parse the response. "+(r[Jp]||Zn(r)),{response:e})}return null}var uf="",JMe="NoResponseBody",C4="&"+JMe+"=true",cO="POST",eRe=function(){function e(){var t,n,r,o,i,l,c,f,p,g,v,w,C,T=0;Qi(e,this,function(k,P){var O=!0;function L($,K){On(r,2,26,"Failed to send telemetry.",{message:$}),N(K,400,{})}function D($){L("No endpoint url is provided for the batch",$)}function N($,K,te,re){try{$&&$(K,te,re)}catch{}}function F($,K){var te,re=Xf();return(te=$[PC])?(te=$[PC]+(w?C4:uf),$=$[fw],$=o?$:new Blob([$],{type:"text/plain;charset=UTF-8"}),re.sendBeacon(te,$)):(D(K),!0)}function B($,K,te){var re,oe=$[fw];try{oe&&(F($,K)?N(K,200,{},uf):(re=i&&i.beaconOnRetry)&&$r(re)?re($,K,F):(c&&c[F6]($,K,!0),On(r,2,40,". Failed to send telemetry with Beacon API, retried with normal sender.")))}catch(ue){o&&Zv(r,"Failed to send telemetry using sendBeacon API. Ex:"+Zn(ue)),N(K,o?0:400,{},uf)}}function V($,K,te){var re,oe,ue,Q,ce=$[BR]||{},ae=(!te&&t&&(re=gm(function(le,pe){oe=le,ue=pe})),o&&te&&$.disableXhrSync&&(te=!1),$[PC]);if(ae)return Q=EAe(cO,ae,O,!0,te,$[$b]),o||Q[z6]("Content-type","application/json"),Xn(Qp(ce),function(le){Q[z6](le,ce[le])}),Q.onreadystatechange=function(){o||(fe(Q),Q.readyState===4&&oe&&oe(!0))},Q.onload=function(){o&&fe(Q)},Q.onerror=function(le){N(K,o?Q[d1]:400,XR(Q,o),o?uf:Jk(Q)),ue&&ue(le)},Q.ontimeout=function(){N(K,o?Q[d1]:500,XR(Q,o),o?uf:Jk(Q)),oe&&oe(!1)},Q.send($[fw]),re;function fe(le){var pe=i&&i.xhrOnComplete;pe&&$r(pe)?pe(le,K,$):(pe=Qk(le),N(K,le[d1],XR(le,o),pe))}D(K),oe&&oe(!1)}function G($,K,te){var re,oe,ue,Q=$[PC],le=$[fw],ce=o?le:new Blob([le],{type:"application/json"}),ae=new Headers,fe=le[Fr],le=!1,pe=!1,Fe=$[BR]||{},Be=((ce={method:cO,body:ce})[Q6]=!0,$.headers&&0<Qp($.headers)[Fr]&&(Xn(Qp(Fe),function(ot){ae.append(ot,Fe[ot])}),ce[BR]=ae),O&&o&&(ce.credentials="include"),te&&(ce.keepalive=!0,T+=fe,o?$._sendReason===2&&(le=!0,w)&&(Q+=C4):le=!0),new Request(Q,ce));try{Be[Q6]=!0}catch{}if(!te&&t&&(re=gm(function(ot,ut){oe=ot,ue=ut})),Q){try{mm(fetch(o?Q:Be,o?ce:null),function(ot){if(te&&(T-=fe,fe=0),!pe)if(pe=!0,ot.rejected)Ze(ot.reason&&ot.reason[Wv]),ue&&ue(ot.reason);else{var ut=ot[D1];try{o||ut.ok?o&&!ut.body?(it(ut,null,uf),oe&&oe(!0)):mm(ut.text(),function(st){it(ut,$,st[D1]),oe&&oe(!0)}):(Ze(ut.statusText),oe&&oe(!1))}catch(st){Ze(Zn(st)),ue&&ue(st)}}})}catch(ot){pe||(Ze(Zn(ot)),ue&&ue(ot))}return le&&!pe&&(pe=!0,N(K,200,{}),oe)&&oe(!0),o&&!pe&&0<$[$b]&&C&&C.set(function(){pe||(pe=!0,N(K,500,{}),oe&&oe(!0))},$[$b]),re}function Ze(ot){N(K,o?0:400,{},o?uf:ot)}function it(ot,ut,st){var ct=ot[d1],Ae=i.fetchOnComplete;Ae&&$r(Ae)?Ae(ot,K,st||uf,ut):N(K,ct,{},st||uf)}D(K),oe&&oe(!1)}function q($,K,te){var ue=ic(),re=new XDomainRequest,oe=$[fw],ue=(re.onload=function(){var ce=Qk(re),ae=i&&i.xdrOnComplete;ae&&$r(ae)?ae(re,K,$):N(K,200,{},ce)},re.onerror=function(){N(K,400,{},o?uf:CK(re))},re.ontimeout=function(){N(K,500,{})},re.onprogress=function(){},ue&&ue.location&&ue.location[cK]||""),Q=$[PC];Q?o||Q.lastIndexOf(ue,0)===0?(ue=o?Q:Q[Kv](/^(https?:)/,""),re.open(cO,ue),$[$b]&&(re[$b]=$[$b]),re.send(oe),o&&te?C&&C.set(function(){re.send(oe)},0):re.send(oe)):(On(r,2,40,". "+(Q="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.")),L(Q,K)):D(K)}function z(){T=0,w=v=g=p=f=t=n=!1,C=c=l=i=o=r=null}z(),k[yE]=function($,K){r=K,n&&On(r,1,28,"Sender is already initialized"),k.SetConfig($),n=!0},k._getDbgPlgTargets=function(){return[n,o,l,t]},k.SetConfig=function($){try{var K;return i=$.senderOnCompleteCallBack||{},l=!!$.disableCredentials,o=!!$.isOneDs,t=!!$.enableSendPromise,f=!!$.disableXhr,p=!!$.disableBeacon,g=!!$.disableBeaconSync,C=$.timeWrapper,w=!!$.addNoResponse,v=!!$.disableFetchKeepAlive,c={sendPOST:V},o||(O=!1),l&&(K=xf())&&K.protocol&&K.protocol[Tx]()==="file:"&&(O=!1),!0}catch{}return!1},k.getSyncFetchPayload=function(){return T},k.getSenderInst=function($,K){if($&&$[Fr]){for(var te=$,re=K,oe=0,ue=null,Q=0;ue==null&&Q<te[Fr];)oe=te[Q],f||oe!==1?oe!==2||!nB(re)||re&&v?oe!==3||!f1()||(re?g:p)||(ue=B):ue=G:jAe()?ue=q:QA()&&(ue=V),Q++;return ue?(($={_transport:oe,_isSync:re})[F6]=ue,$):null}return null},k.getFallbackInst=function(){return c},k[jk]=function($,K){z()}})}return e.__ieDyn=1,e}(),YK="on",S4="attachEvent",E4="addEventListener",T4="detachEvent",I4="removeEventListener",YL="events",ZL="visibilitychange",eM="pagehide",ZK="unload",XK="beforeunload",QK=Bd("aiEvtPageHide"),tRe=(Bd("aiEvtPageShow"),/\.[\.]+/g),nRe=/[\.]+$/,rRe=1,lP=DK("events"),oRe=/^([^.]*)(?:\.(.+)|)/;function k4(e){return e&&e[Kv]?e[Kv](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Lo):e}function fB(o,r){r&&(n=Lo,bo(r)?(n=Lo,Xn(r,function(i){(i=k4(i))&&(i[0]!=="."&&(i="."+i),n+=i)})):n=k4(r),n)&&(n[0]!=="."&&(n="."+n),o=(o||Lo)+n);var n,r=oRe.exec(o||Lo)||[],o={};return o[em]=r[1],o.ns=(r[2]||Lo).replace(tRe,".").replace(nRe,Lo)[kx](".").sort().join("."),o}function JK(e,t,n){return e=lP.get(e,YL,{},n=n===void 0?!0:n),e[t]||(e[t]=[])}function eY(e,t,n,r){e&&t&&t[em]&&(e[I4]?e[I4](t[em],n,r):e[T4]&&e[T4](YK+t[em],n))}function iRe(e,t,n,r){var o=!1;return e&&t&&t[em]&&n&&(e[E4]?(e[E4](t[em],n,r),o=!0):e[S4]&&(e[S4](YK+t[em],n),o=!0)),o}function P4(e,t,n,r){for(var o=t[Fr];o--;){var i=t[o];!i||n.ns&&n.ns!==i.evtName.ns||!r(i)||(eY(e,i.evtName,i[Wz],i.capture),t[Jx](o,1))}}function aRe(e,t,n){var r;t[em]?P4(e,JK(e,t[em]),t,n):(wo(r=lP.get(e,YL,{}),function(o,i){P4(e,i,t,n)}),Qp(r)[Fr]===0&&lP.kill(e,YL))}function yy(e,t){var n=t?fB("xx",n=bo(t)?[e].concat(t):[e,t]).ns[kx]("."):e;return n}function tm(e,t,n,r,o){o===void 0&&(o=!1);var i,l=!1;if(e)try{var c,f=fB(t,r);(l=iRe(e,f,n,o))&&lP.accept(e)&&((i={guid:rRe++,evtName:f})[Wz]=n,i.capture=o,c=i,JK(e,f.type)[ui](c))}catch{}return l}function ex(e,t,n,r,o){if(o===void 0&&(o=!1),e)try{var i=fB(t,r),l=!1;aRe(e,i,function(c){return!((!i.ns||n)&&c[Wz]!==n)&&(l=!0)}),l||eY(e,i,n,o)}catch{}}function sRe(e,t,n){var r=!1,o=ic(),o=(o&&(r=tm(o,e,t,n),r=tm(o.body,e,t,n)||r),Yl());return r=o&&tm(o,e,t,n)||r}function lRe(e,t,n){var r=ic(),r=(r&&(ex(r,e,t,n),ex(r.body,e,t,n)),Yl());r&&ex(r,e,t,n)}function uP(e,t,n,r){var o=!1;return t&&e&&0<e[Fr]&&Xn(e,function(i){!i||n&&Jl(n,i)!==-1||(o=sRe(i,t,r)||o)}),o}function uRe(e,t,n,r){var o=!1;return o=t&&e&&bo(e)&&!(o=uP(e,t,n,r))&&n&&0<n[Fr]?uP(e,t,null,r):o}function XL(e,t,n){e&&bo(e)&&Xn(e,function(r){r&&lRe(r,t,n)})}function cRe(e,t,n){return uRe([XK,ZK,eM],e,t,n)}function dRe(e,t){XL([XK,ZK,eM],e,t)}function QL(e,t,n){var r=yy(QK,n),o=uP([eM],e,t,r);return o=!(o=t&&Jl(t,ZL)!==-1?o:uP([ZL],function(i){var l=Yl();e&&l&&l.visibilityState==="hidden"&&e(i)},t,r)||o)&&t?QL(e,null,n):o}function hRe(e,t){t=yy(QK,t),XL([eM],e,t),XL([ZL],null,t)}var A4="_aiHooks",M4=["req","rsp","hkErr","fnErr"];function pB(e,t){if(e)for(var n=0;n<e[Fr]&&!t(e[n],n);n++);}function dO(e,t,n,r,o){0<=o&&o<=2&&pB(e,function(c,l){var c=c.cbks,f=c[M4[o]];if(f){t.ctx=function(){return r[l]=r[l]||{}};try{f[g_](t.inst,n)}catch(g){f=t.err;try{var p=c[M4[2]];p&&(t.err=g,p[g_](t.inst,n))}catch{}finally{t.err=f}}}})}function fRe(e){return function(){var t=arguments,n=e.h,r=((o={})[Jp]=e.n,o.inst=this,o.ctx=null,o.set=function(f,p){(t=l([],t))[f]=p,i=l([r],t)},o),o=[],i=l([r],t);function l(f,p){return pB(p,function(g){f[ui](g)}),f}r.evt=Pa("event"),dO(n,r,i,o,0);var c=e.f;if(c)try{r.rslt=c[g_](this,t)}catch(f){throw r.err=f,dO(n,r,i,o,3),f}return dO(n,r,i,o,1),r.rslt}}function mB(e,t,n,r){var o=null;return e&&(Fd(e,t)?o=e:n&&(o=mB(bAe(e),t,r,!1))),o}function pRe(e,t,n){return e?JL(e[Rf],t,n,!1):null}function tY(i,t,n,r){var o=n&&n[A4],i=(o||((n=fRe(o={i:0,n:t,f:n,h:[]}))[A4]=o,i[t]=n),{id:o.i,cbks:r,rm:function(){var l=this.id;pB(o.h,function(c,f){if(c.id===l)return o.h[Jx](f,1),1})}});return o.i++,o.h[ui](i),i}function JL(e,t,n,r,o){return r===void 0&&(r=!0),e&&t&&n&&(e=mB(e,t,r,o),e&&(r=e[t],typeof r===hK))?tY(e,t,r,n):null}function NT(e,t,n,r,o){return e&&t&&n&&(r=mB(e,t,r,o)||e,r)?tY(r,t,r[t],n):null}var FT="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",nY="sampleRate",hO="ProcessLegacy",R4="http.method",gB="https://dc.services.visualstudio.com",tx="/v2/track",Hf="not_specified",fO="iKey",ki=GPe({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Ax="split",Qr="length",PS="toLowerCase",iv="ingestionendpoint",Mx="toString",tM="push",yB="removeItem",Dh="name",Hg="message",mw="count",pO="preTriggerDate",mO="disabled",gO="interval",O4="daysOfMonth",yO="date",vO="getUTCDate",cP="stringify",_O="pathname",D4="correlationHeaderExcludePatterns",Vb="exceptions",mh="parsedStack",Cf="properties",nm="measurements",nx="sizeInBytes",Up="typeName",p1="severityLevel",bO="problemGroup",wO="isManual",rY="CreateFromInterface",Mw="assembly",Iv="fileName",DI="hasFullStack",zT="level",qb="method",DC="line",dP="duration",L4="receivedResponse";function oY(e,t,n){var r=t[Qr],o=mRe(e,t);if(o[Qr]!==r){for(var i=0,l=o;n[l]!==void 0;)i++,l=Zf(o,0,147)+vRe(i);o=l}return o}function mRe(e,t){var n;return t&&150<(t=us(tc(t)))[Qr]&&(n=Zf(t,0,150),On(e,2,57,"name is too long.  It has been truncated to 150 characters.",{name:t},!0)),n||t}function cs(e,t,n){var r;return n===void 0&&(n=1024),t&&(n=n||1024,(t=us(tc(t)))[Qr]>n)&&(r=Zf(t,0,n),On(e,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:t},!0)),r||t}function nM(e,t){return aY(e,t,2048,66)}function iY(e,t){var n;return t&&32768<t[Qr]&&(n=Zf(t,0,32768),On(e,2,56,"message is too long, it has been truncated to 32768 characters.",{message:t},!0)),n||t}function gRe(e,t){var n,r;return t&&32768<(r=""+t)[Qr]&&(n=Zf(r,0,32768),On(e,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:t},!0)),n||t}function M_(e,t){var n;return t&&(n={},wo(t,function(r,o){if(uc(o)&&vE())try{o=Rh()[cP](o)}catch(i){On(e,2,49,"custom property is not valid",{exception:i},!0)}o=cs(e,o,8192),r=oY(e,r,n),n[r]=o}),t=n),t}function R_(e,t){var n;return t&&(n={},wo(t,function(r,o){r=oY(e,r,n),n[r]=o}),t=n),t}function yRe(e,t){return t&&aY(e,t,128,69)[Mx]()}function aY(e,t,n,r){var o;return t&&(t=us(tc(t)))[Qr]>n&&(o=Zf(t,0,n),On(e,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:t},!0)),o||t}function vRe(e){return e="00"+e,Og(e,e[Qr]-3)}var N4=Yl()||{},F4=0,_Re=[null,null,null,null,null];function vB(e){var t=F4,n=_Re,r=n[t];return N4.createElement?n[t]||(r=n[t]=N4.createElement("a")):r={host:xRe(e,!0)},r.href=e,++t>=n[Qr]&&(t=0),F4=t,r}function bRe(n){var t,n=vB(n);return t=n?n.href:t}function wRe(e,t){return e?e.toUpperCase()+" "+t:t}function xRe(e,t){return e=sY(e,t)||"",e&&(t=e.match(/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i),t!=null&&3<t[Qr]&&Er(t[2])&&0<t[2][Qr])?t[2]+(t[3]||""):e}function sY(e,t){var n=null;return e&&(e=e.match(/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i))!=null&&2<e[Qr]&&Er(e[2])&&0<e[2][Qr]&&(n=e[2]||"",t)&&2<e[Qr]&&(t=(e[1]||"")[PS](),e=e[3]||"",n+=e=t==="http"&&e===":80"||t==="https"&&e===":443"?"":e),n}var CRe=[gB+tx,"https://breeze.aimon.applicationinsights.io"+tx,"https://dc-int.services.visualstudio.com"+tx],SRe="cid-v1:";function eN(e){return Jl(CRe,e[PS]())!==-1}function z4(e,t,l){if(!t||e&&e.disableCorrelationHeaders)return!1;if(e&&e[D4]){for(var r=0;r<e.correlationHeaderExcludePatterns[Qr];r++)if(e[D4][r].test(t))return!1}var o=vB(t).host[PS]();if(!o||nc(o,":443")===-1&&nc(o,":80")===-1||(o=(sY(t,!0)||"")[PS]()),(!e||!e.enableCorsCorrelation)&&o&&o!==l)return!1;var i,l=e&&e.correlationHeaderDomains;if(l&&(Xn(l,function(f){f=new RegExp(f.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")),i=i||f.test(o)}),!i))return!1;var c=e&&e.correlationHeaderExcludedDomains;if(!c||c[Qr]===0)return!0;for(r=0;r<c[Qr];r++)if(new RegExp(c[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")).test(o))return!1;return o&&0<o[Qr]}function B4(e){if(e&&(e=ERe(e,ki[1]),e&&e!==SRe))return e}function ERe(e,t){if(e)for(var n=e[Ax](","),r=0;r<n[Qr];++r){var o=n[r][Ax]("=");if(o[Qr]===2&&o[0]===t)return o[1]}}function TRe(e,t,n,r){var o,i,l,c=r,f=r;return c=t&&0<t[Qr]?(l=(o=vB(t)).host,c||(o[_O]!=null?((i=o.pathname[Qr]===0?"/":o[_O]).charAt(0)!=="/"&&(i="/"+i),f=o[_O],cs(e,n?n+" "+i:i)):cs(e,t))):l=r,{target:l,name:c,data:f}}function BT(){var e=fm();return e&&e.now&&e.timing&&(e=e.now()+e.timing.navigationStart,0<e)?e:jf()}function Yu(e,t){var n=null;return n=e===0||t===0||wn(e)||wn(t)?n:t-e}function _B(e,t){var n=e||{};return{getName:function(){return n[Dh]},setName:function(r){t&&t.setName(r),n[Dh]=r},getTraceId:function(){return n.traceID},setTraceId:function(r){t&&t.setTraceId(r),uB(r)&&(n.traceID=r)},getSpanId:function(){return n.parentID},setSpanId:function(r){t&&t.setSpanId(r),cB(r)&&(n.parentID=r)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(r){t&&t.setTraceFlags(r),n.traceFlags=r}}}var bE=aK({LocalStorage:0,SessionStorage:1}),Yg=void 0,Zg=void 0,lY="";function bB(){return oM()?rM(bE.LocalStorage):null}function rM(e){try{if(wn(Od()))return null;var t=new Date()[Mx](),n=Pa(e===bE.LocalStorage?"localStorage":"sessionStorage"),r=lY+t,o=(n.setItem(r,t),n.getItem(r)!==t);if(n[yB](r),!o)return n}catch{}return null}function wB(){return AS()?rM(bE.SessionStorage):null}function IRe(){Zg=Yg=!1}function xB(e){lY=e||""}function kRe(){Yg=oM(!0),Zg=AS(!0)}function oM(e){return Yg=!e&&Yg!==void 0?Yg:!!rM(bE.LocalStorage)}function uY(e,t){var n=bB();if(n!==null)try{return n.getItem(t)}catch(r){Yg=!1,On(e,2,1,"Browser failed read of local storage. "+ri(r),{exception:Zn(r)})}return null}function cY(e,t,n){var r=bB();if(r!==null)try{return r.setItem(t,n),!0}catch(o){Yg=!1,On(e,2,3,"Browser failed write to local storage. "+ri(o),{exception:Zn(o)})}return!1}function PRe(e,t){var n=bB();if(n!==null)try{return n[yB](t),!0}catch(r){Yg=!1,On(e,2,5,"Browser failed removal of local storage item. "+ri(r),{exception:Zn(r)})}return!1}function AS(e){return Zg=!e&&Zg!==void 0?Zg:!!rM(bE.SessionStorage)}function tN(e,t){var n=wB();if(n!==null)try{return n.getItem(t)}catch(r){Zg=!1,On(e,2,2,"Browser failed read of session storage. "+ri(r),{exception:Zn(r)})}return null}function dY(e,t,n){var r=wB();if(r!==null)try{return r.setItem(t,n),!0}catch(o){Zg=!1,On(e,2,4,"Browser failed write to session storage. "+ri(o),{exception:Zn(o)})}return!1}function hY(e,t){var n=wB();if(n!==null)try{return n[yB](t),!0}catch(r){Zg=!1,On(e,2,6,"Browser failed removal of session storage item. "+ri(r),{exception:Zn(r)})}return!1}var ARe="appInsightsThrottle",MRe=function(e,t){var n,r,o,i,l,c,f,p=this,g=!1,v=!1;function w(V,G,q,z){if(g){if(!function(ae){try{var fe=C(ae);return WAe(1e6)<=fe.limit.samplingRate}catch{}return!1}(V))return;var $=C(V),K=N(V),te=k($,n,K),re=!1,oe=0,ue=F(V);try{te&&!ue?(oe=Math.min($.limit.maxSendNumber,K[mw]+1),re=!(K[mw]=0),l[V]=!0,K[pO]=new Date):(l[V]=te,K[mw]+=1);var Q=P(V);L(r,Q,K);for(var ce=0;ce<oe;ce++)On(r,q||1,V,G)}catch{}return{isThrottled:re,throttleNum:oe}}return z&&B(V)[tM]({msgID:V,message:G,severity:q}),null}function C(V){return o[V]||o[109]}function T(V,G){var q,z;try{var $=G||{},K={},te=(K[mO]=!!$[mO],$[gO]||{}),re=(v=(te===null?void 0:te.daysOfMonth)&&0<(te===null?void 0:te.daysOfMonth[Qr]),K[gO]=function(oe){var ue=(oe=oe||{})==null?void 0:oe.monthInterval,Q=oe==null?void 0:oe.dayInterval;return wn(ue)&&wn(Q)&&(oe.monthInterval=3,v||(oe[O4]=[28],v=!0)),oe={monthInterval:oe==null?void 0:oe.monthInterval,dayInterval:oe==null?void 0:oe.dayInterval,daysOfMonth:oe==null?void 0:oe.daysOfMonth}}(te),{samplingRate:((q=$.limit)==null?void 0:q.samplingRate)||100,maxSendNumber:((z=$.limit)==null?void 0:z.maxSendNumber)||1});K.limit=re,o[V]=K}catch{}}function k(V,G,q){var z,$;return!(!V||V[mO]||!G||!Yv(q))&&(G=O(),q=q[yO],z=1,(V=V[gO])!=null&&V.monthInterval&&($=12*(G.getUTCFullYear()-q.getUTCFullYear())+G.getUTCMonth()-q.getUTCMonth(),z=D(V.monthInterval,0,$)),$=1,v?$=Jl(V[O4],G[vO]()):V!=null&&V.dayInterval&&(G=Math.floor((G.getTime()-q.getTime())/864e5),$=D(V.dayInterval,0,G)),0<=z)&&0<=$}function P(V,G){return G=Yv(G)?G:"",V?ARe+G+"-"+V:null}function O(V){try{if(!V)return new Date;var G=new Date(V);if(!isNaN(G.getDate()))return G}catch{}return null}function L(V,G,q){try{return cY(V,G,us(JSON[cP](q)))}catch{}}function D(V,G,q){return V<=0?1:G<=q&&(q-G)%V==0?Math.floor((q-G)/V)+1:-1}function N(V){try{var G,q=i[V];return q||(G=P(V,c),q=function(z,$,K){try{var te,re={date:O(),count:0};return z?{date:O((te=JSON.parse(z))[yO])||re[yO],count:te[mw]||re[mw],preTriggerDate:te.preTriggerDate?O(te[pO]):void 0}:(L($,K,re),re)}catch{}return null}(uY(r,G),r,G),i[V]=q),i[V]}catch{}return null}function F(V){var G,q=l[V];return wn(q)&&(q=!1,(G=N(V))&&(q=function(z){try{var $;if(z)return $=new Date,z.getUTCFullYear()===$.getUTCFullYear()&&z.getUTCMonth()===$.getUTCMonth()&&z[vO]()===$[vO]()}catch{}return!1}(G[pO])),l[V]=q),l[V]}function B(V){return wn((f=f||{})[V])&&(f[V]=[]),f[V]}r=A_(e),l={},i={},f={},o={},T(109),c=Yv(t)?t:"",e.addUnloadHook(Za(e.config,function(V){V=V.cfg,n=oM(),wo(V.throttleMgrCfg||{},function(G,q){T(parseInt(G),q)})})),p._getDbgPlgTargets=function(){return[f]},p.getConfig=function(){return o},p.canThrottle=function(V){var G=N(V);return k(C(V),n,G)},p.isTriggered=F,p.isReady=function(){return g},p.flush=function(V){try{var G,q=B(V);if(q&&0<q[Qr])return G=q.slice(0),f[V]=[],Xn(G,function(z){w(z.msgID,z[Hg],z.severity,!1)}),!0}catch{}return!1},p.flushAll=function(){try{var V;if(f)return V=!0,wo(f,function(G){G=p.flush(parseInt(G)),V=V&&G}),V}catch{}return!1},p.onReadyState=function(V,G){return G===void 0&&(G=!0),(g=!!wn(V)||V)&&G?p.flushAll():null},p.sendMessage=function(V,G,q){return w(V,G,q,!0)}},RRe=";",ORe="=";function U4(e){var t;return e?(e=e[Ax](RRe),e=TPe(e,function(n,i){var o,i=i[Ax](ORe);return i[Qr]===2&&(o=i[0][PS](),i=i[1],n[o]=i),n},{}),0<Qp(e)[Qr]&&(e.endpointsuffix&&(t=e.location?e.location+".":"",e[iv]=e[iv]||"https://"+t+"dc."+e.endpointsuffix),e[iv]=e[iv]||gB,oK(e[iv],"/"))&&(e[iv]=e[iv].slice(0,-1)),e):{}}var DRe=function(e,t,n){var r=this;this.ver=1,this.sampleRate=100,this.tags={},this[Dh]=cs(e,n)||Hf,this.data=t,this.time=Px(new Date),this.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return r.sampleRate===100?4:1},tags:1,data:1}},Lg=function(){function e(t,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0},this.ver=2,this[Dh]=cs(t,n)||Hf,this[Cf]=M_(t,r),this[nm]=R_(t,o)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(),LRe="<no_method>",rx="error",Zu="stack",nN="stackDetails",j4="errorSrc",rN="message",fY="description";function oN(e,t){var n=e;return n&&!Er(n)&&(JSON&&JSON[cP]?(n=JSON[cP](e),!t||n&&n!=="{}"||(n=$r(e[Mx])?e[Mx]():""+e)):n=e+" - (Missing JSON.stringify)"),n||""}function pY(e,t){var n=e;return e&&((n=n&&!Er(n)&&(e[rN]||e[fY])||n)&&!Er(n)&&(n=oN(n,!0)),e.filename)&&(n=n+" @"+(e.filename||"")+":"+(e.lineno||"?")+":"+(e.colno||"?")),(n=t&&t!=="String"&&t!=="Object"&&t!=="Error"&&nc(n||"",t)===-1?t+": "+n:n)||""}function NRe(e){try{if(uc(e))return"hasFullStack"in e&&"typeName"in e}catch{}return!1}function FRe(e){try{if(uc(e))return"ver"in e&&"exceptions"in e&&"properties"in e}catch{}return!1}function $4(e){return e&&e.src&&Er(e.src)&&e.obj&&bo(e.obj)}function av(t){var t=t||"",n=(t=Er(t)?t:Er(t[Zu])?t[Zu]:""+t)[Ax](`
`);return{src:t,obj:n}}function zRe(e){for(var t=[],n=e[Ax](`
`),r=0;r<n[Qr];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),t[tM](o)}return{src:e,obj:t}}function mY(e){var t,n=null;if(e)try{e[Zu]?n=av(e[Zu]):e[rx]&&e[rx][Zu]?n=av(e[rx][Zu]):e.exception&&e.exception[Zu]?n=av(e.exception[Zu]):$4(e)?n=e:$4(e[nN])?n=e[nN]:ic()&&ic().opera&&e[rN]?n=zRe(e[Hg]):e.reason&&e.reason[Zu]?n=av(e.reason[Zu]):Er(e)?n=av(e):(t=e[rN]||e[fY]||"",Er(e[j4])&&(t&&(t+=`
`),t+=" from "+e[j4]),t&&(n=av(t)))}catch(r){n=av(r)}return n||{src:"",obj:null}}function BRe(e){var t="";return e&&(e.obj?Xn(e.obj,function(n){t+=n+`
`}):t=e.src||""),t}function URe(e){if(e=e.obj,e&&0<e[Qr]){var t=[],n=0,r=0;if(Xn(e,function(g){var g=g[Mx]();iN.regex.test(g)&&(g=new iN(g,n++),r+=g[nx],t[tM](g))}),32768<r)for(var o=0,i=t[Qr]-1,l=0,c=o,f=i;o<i;){if(32768<(l+=t[o][nx]+t[i][nx])){t.splice(c,f-c+1);break}c=o,f=i,o++,i--}}return t}function hP(e){var t="";if(e&&!(t=e.typeName||e[Dh]||""))try{var n=/function (.{1,200})\(/.exec(e.constructor[Mx]()),t=n&&1<n[Qr]?n[1]:""}catch{}return t}function xO(e){if(e)try{var t,n;if(!Er(e))return t=hP(e),(n=oN(e,!1))&&n!=="{}"||(e[rx]&&(t=hP(e=e[rx])),n=oN(e,!0)),nc(n,t)!==0&&t!=="String"?t+":"+n:n}catch{}return""+(e||"")}var xd=function(){function e(t,n,r,o,i,l){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var c=this;c.ver=2,FRe(n)?(c[Vb]=n[Vb]||[],c[Cf]=n[Cf],c[nm]=n[nm],n[p1]&&(c[p1]=n[p1]),n.id&&(c.id=n.id,n[Cf].id=n.id),n[bO]&&(c[bO]=n[bO]),wn(n[wO])||(c[wO]=n[wO])):(r=r||{},l&&(r.id=l),c[Vb]=[new H4(t,n,r)],c[Cf]=M_(t,r),c[nm]=R_(t,o),i&&(c[p1]=i),l&&(c.id=l))}return e.CreateAutoException=function(t,n,r,o,i,l,c,f){var p=hP(i||l||t),g={};return g[Hg]=pY(t,p),g.url=n,g.lineNumber=r,g.columnNumber=o,g.error=xO(i||l||t),g.evt=xO(l||t),g[Up]=p,g.stackDetails=mY(c||i||l),g.errorSrc=f,g},e.CreateFromInterface=function(t,n,r,o){var i=n[Vb]&&O1(n[Vb],function(l){return H4[rY](t,l)});return new e(t,Tu(Tu({},n),{exceptions:i}),r,o)},e.prototype.toInterface=function(){var c=this.exceptions,t=this.properties,n=this.measurements,r=this.severityLevel,o=this.problemGroup,i=this.id,l=this.isManual,c=c instanceof Array&&O1(c,function(p){return p.toInterface()})||void 0,f={ver:"4.0"};return f[Vb]=c,f.severityLevel=r,f.properties=t,f.measurements=n,f.problemGroup=o,f.id=i,f.isManual=l,f},e.CreateSimpleException=function(t,n,r,o,i,l){var c;return{exceptions:[((c={})[DI]=!0,c.message=t,c.stack=i,c.typeName=n,c)]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=xO,e}(),H4=function(){function e(t,n,r){this.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2};var o,i,l=this;NRe(n)?(l[Up]=n[Up],l[Hg]=n[Hg],l[Zu]=n[Zu],l[mh]=n[mh]||[],l[DI]=n[DI]):(i=(o=n)&&o.evt,Bz(o)||(o=o[rx]||i||o),l[Up]=cs(t,hP(o))||Hf,l[Hg]=iY(t,pY(n||o,l[Up]))||Hf,i=n[nN]||mY(n),l[mh]=URe(i),bo(l[mh])&&O1(l[mh],function(c){c[Mw]=cs(t,c[Mw]),c[Iv]=cs(t,c[Iv])}),l[Zu]=gRe(t,BRe(i)),l.hasFullStack=bo(l.parsedStack)&&0<l.parsedStack[Qr],r&&(r[Up]=r[Up]||l[Up]))}return e.prototype.toInterface=function(){var t,n=this[mh]instanceof Array&&O1(this[mh],function(r){return r.toInterface()});return(t={id:this.id,outerId:this.outerId,typeName:this[Up],message:this[Hg],hasFullStack:this[DI],stack:this[Zu]})[mh]=n||void 0,t},e.CreateFromInterface=function(t,n){var r=n[mh]instanceof Array&&O1(n[mh],function(o){return iN[rY](o)})||n[mh];return new e(t,Tu(Tu({},n),{parsedStack:r}))},e}(),iN=function(){function e(t,n){this.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0};var r,o=this;o[nx]=0,typeof t=="string"?(r=t,o[zT]=n,o[qb]=LRe,o[Mw]=us(r),o[Iv]="",o[DC]=0,(n=r.match(e.regex))&&5<=n[Qr]&&(o[qb]=us(n[2])||o[qb],o[Iv]=us(n[4]),o[DC]=parseInt(n[5])||0)):(o[zT]=t[zT],o[qb]=t[qb],o[Mw]=t[Mw],o[Iv]=t[Iv],o[DC]=t[DC],o[nx]=0),o.sizeInBytes+=o.method[Qr],o.sizeInBytes+=o.fileName[Qr],o.sizeInBytes+=o.assembly[Qr],o[nx]+=e.baseSize,o.sizeInBytes+=o.level.toString()[Qr],o.sizeInBytes+=o.line.toString()[Qr]}return e.CreateFromInterface=function(t){return new e(t,null)},e.prototype.toInterface=function(){return{level:this[zT],method:this[qb],assembly:this[Mw],fileName:this[Iv],line:this[DC]}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(),jRe=function(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0},Qv=function(){function e(t,n,r,o,i,l,c,f,p){this.aiDataContract={ver:1,metrics:1,properties:0},this.ver=2;var g=new jRe;g[mw]=0<o?o:void 0,g.max=isNaN(l)||l===null?void 0:l,g.min=isNaN(i)||i===null?void 0:i,g[Dh]=cs(t,n)||Hf,g.value=r,g.stdDev=isNaN(c)||c===null?void 0:c,this.metrics=[g],this[Cf]=M_(t,f),this[nm]=R_(t,p)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(),LC="";function Ng(i){(isNaN(i)||i<0)&&(i=0),i=Math.round(i);var t=LC+i%1e3,n=LC+Math.floor(i/1e3)%60,r=LC+Math.floor(i/6e4)%60,o=LC+Math.floor(i/36e5)%24,i=Math.floor(i/864e5);return(0<i?i+".":LC)+(o[Qr]<2?"0"+o:o)+":"+(r[Qr]<2?"0"+r:r)+":"+(n[Qr]<2?"0"+n:n)+"."+(t[Qr]===1?"00"+t:t[Qr]===2?"0"+t:t)}function $Re(e,t,n,r,o){return!o&&Er(e)&&(e==="Script error."||e==="Script error")}var Xg=function(){function e(t,n,r,o,i,l,c){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},this.ver=2,this.id=yRe(t,c),this.url=nM(t,r),this[Dh]=cs(t,n)||Hf,isNaN(o)||(this[dP]=Ng(o)),this[Cf]=M_(t,i),this[nm]=R_(t,l)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(),Jv=function(){function e(t,T,r,o,i,l,c,f,p,g,v,w){p===void 0&&(p="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var C=this,T=(C.ver=2,C.id=T,C[dP]=Ng(i),C.success=l,C.resultCode=c+"",C.type=cs(t,p),TRe(t,r,f,o));C.data=nM(t,o)||T.data,C.target=cs(t,T.target),g&&(C.target="".concat(C.target," | ").concat(g)),C[Dh]=cs(t,T[Dh]),C[Cf]=M_(t,v),C[nm]=R_(t,w)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(),ox=function(){function e(t,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},this.ver=2,this[Hg]=iY(t,n=n||Hf),this[Cf]=M_(t,o),this[nm]=R_(t,i),r&&(this[p1]=r)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(),ix=function(){function e(t,n,r,o,i,l,c){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var f=this;f.ver=2,f.url=nM(t,r),f[Dh]=cs(t,n)||Hf,f[Cf]=M_(t,i),f[nm]=R_(t,l),c&&(f.domProcessing=c.domProcessing,f[dP]=c[dP],f.networkConnect=c.networkConnect,f.perfTotal=c.perfTotal,f[L4]=c[L4],f.sentRequest=c.sentRequest)}return e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(),O_=function(e,t){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=t};function vy(e){var t="ai."+e+".";return function(n){return t+n}}var NC=vy("application"),ws=vy("device"),UT=vy("location"),Gb=vy("operation"),CO=vy("session"),hg=vy("user"),sv=vy("cloud"),FC=vy("internal"),gY=function(e){function t(){return e.call(this)||this}return Tm(t,e),t}(xAe({applicationVersion:NC("ver"),applicationBuild:NC("build"),applicationTypeId:NC("typeId"),applicationId:NC("applicationId"),applicationLayer:NC("layer"),deviceId:ws("id"),deviceIp:ws("ip"),deviceLanguage:ws("language"),deviceLocale:ws("locale"),deviceModel:ws("model"),deviceFriendlyName:ws("friendlyName"),deviceNetwork:ws("network"),deviceNetworkName:ws("networkName"),deviceOEMName:ws("oemName"),deviceOS:ws("os"),deviceOSVersion:ws("osVersion"),deviceRoleInstance:ws("roleInstance"),deviceRoleName:ws("roleName"),deviceScreenResolution:ws("screenResolution"),deviceType:ws("type"),deviceMachineName:ws("machineName"),deviceVMName:ws("vmName"),deviceBrowser:ws("browser"),deviceBrowserVersion:ws("browserVersion"),locationIp:UT("ip"),locationCountry:UT("country"),locationProvince:UT("province"),locationCity:UT("city"),operationId:Gb("id"),operationName:Gb("name"),operationParentId:Gb("parentId"),operationRootId:Gb("rootId"),operationSyntheticSource:Gb("syntheticSource"),operationCorrelationVector:Gb("correlationVector"),sessionId:CO("id"),sessionIsFirst:CO("isFirst"),sessionIsNew:CO("isNew"),userAccountAcquisitionDate:hg("accountAcquisitionDate"),userAccountId:hg("accountId"),userAgent:hg("userAgent"),userId:hg("id"),userStoreRegion:hg("storeRegion"),userAuthUserId:hg("authUserId"),userAnonymousUserAcquisitionDate:hg("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:hg("authUserAcquisitionDate"),cloudName:sv("name"),cloudRole:sv("role"),cloudRoleVer:sv("roleVer"),cloudRoleInstance:sv("roleInstance"),cloudEnvironment:sv("environment"),cloudLocation:sv("location"),cloudDeploymentUnit:sv("deploymentUnit"),internalNodeName:FC("nodeName"),internalSdkVersion:FC("sdkVersion"),internalAgentVersion:FC("agentVersion"),internalSnippet:FC("snippet"),internalSdkSrc:FC("sdkSrc")}));function wg(e,t,n,c,o,i){n=cs(c,n)||Hf,(wn(e)||wn(t)||wn(n))&&Fc("Input doesn't contain all required fields");var l,c="",f=(e[fO]&&(c=e[fO],delete e[fO]),(l={})[Dh]=n,l.time=Px(new Date),l.iKey=c,l.ext=i||{},l.tags=[],l.data={},l.baseType=t,l.baseData=e,l);return wn(o)||wo(o,function(p,g){f.data[p]=g}),f}var Lc={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},ji=new gY;function zC(e){var t,n=null;return $r(Event)?n=new Event(e):(t=Yl())&&t.createEvent&&(n=t.createEvent("Event")).initEvent(e,!0,!0),n}function V4(e,t){ex(e,null,null,t)}function HRe(e){var t,n=Yl(),r=Xf(),o=!1,i=[],l=1,c=(!r||wn(r.onLine)||r.onLine||(l=2),0),f=v(),p=yy(Bd("OfflineListener"),e);try{g(ic())&&(o=!0),n&&(t=n.body||n).ononline&&g(t)&&(o=!0)}catch{o=!1}function g(k){var P=!1;return k&&(P=tm(k,"online",C,p))&&tm(k,"offline",T,p),P}function v(){return c!==2&&l!==2}function w(){var k=v();f!==k&&(f=k,Xn(i,function(P){var O={isOnline:f,rState:l,uState:c};try{P(O)}catch{}}))}function C(){l=1,w()}function T(){l=2,w()}return{isOnline:function(){return f},isListening:function(){return o},unload:function(){var k=ic();k&&o&&(V4(k,p),n&&!va((k=n.body||n).ononline)&&V4(k,p),o=!1)},addListener:function(k){return i[tM](k),{rm:function(){var P=i.indexOf(k);if(-1<P)return i.splice(P,1)}}},setOnlineState:function(k){c=k,w()}}}var iM="AppInsightsPropertiesPlugin",yY="AppInsightsChannelPlugin",vY="ApplicationInsightsAnalytics",fP="toString",aN="isStorageUseDisabled",Wb="_addHook",pl="core",fg="dataType",lv="envelopeType",Oc="diagLog",uv="track",LI="trackPageView",sN="trackPreviousPageVisit",kv="sendPageViewInternal",Rx="startTime",lN="properties",pf="duration",uN="sendPageViewPerformanceInternal",CB="populatePageViewPerformanceEvent",m1="href",q4="sendExceptionInternal",SO="exception",BC="error",EO="_onerror",TO="errorSrc",IO="lineNumber",kO="columnNumber",G4="message",PO="CreateAutoException",jT="addTelemetryInitializer",VRe="overridePageViewDuration",_Y="autoTrackPageVisitTime",bY="isBrowserLinkTrackingEnabled",MS="length",wY="enableAutoRouteTracking",xY="enableUnhandledPromiseRejectionTracking",cN="autoUnhandledPromiseInstrumented",dN="getEntriesByType",CY="isPerformanceTimingSupported",SY="getPerformanceTiming",pP="navigationStart",hN="shouldCollectDuration",EY="isPerformanceTimingDataReady",g1="responseStart",qRe="requestStart",NI="loadEventEnd",fN="responseEnd",FI="connectEnd",TY="pageVisitStartTime",GRe=function(){function e(t,n,r,o){Qi(e,this,function(i){var l,c=null,f=[],p=!1,g=!1;function v(C){r&&r.flush(C,function(){})}function w(C){f.push(C),function T(){c=c||zd(function(){c=null;var k=f.slice(0),P=!1;f=[],Xn(k,function(O){O()?P=!0:f.push(O)}),0<f[MS]&&T(),P&&v(!0)},100)}()}r&&(l=r.logger),i[LI]=function(C,T){var k,P,O,L,D,N,F=C.name,B=(!wn(F)&&typeof F=="string"||(P=Yl(),F=C.name=P&&P.title||""),C.uri);!wn(B)&&typeof B=="string"||(P=xf(),B=C.uri=P&&P[m1]||""),g||((k=(P=fm())&&P[dN]&&P[dN]("navigation"))&&k[0]&&!va(P.timeOrigin)?(k=k[0].loadEventStart,C[Rx]=new Date(P.timeOrigin+k)):(P=(T||C[lN]||{})[pf]||0,C[Rx]=new Date(new Date().getTime()-P)),g=!0),o[CY]()?(O=!1,D=o[SY]()[pP],0<D&&(L=Yu(D,+new Date),o[hN](L)||(L=void 0)),wn(T)||wn(T[pf])||(N=T[pf]),!n&&isNaN(N)||(isNaN(N)&&((T=T||{})[pf]=L),t[kv](C,T),v(!0),O=!0),T=T||{},w(function(){var V,G=!1;try{o[EY]()?(G=!0,V={name:F,uri:B},o[CB](V),V.isValid||O?(O||(T[pf]=V.durationMs,t[kv](C,T)),p||(t[uN](V,T),p=!0)):(T[pf]=L,t[kv](C,T))):0<D&&6e4<Yu(D,+new Date)&&(G=!0,O||(T[pf]=6e4,t[kv](C,T)))}catch(q){On(l,1,38,"trackPageView failed on page load calculation: "+ri(q),{exception:Zn(q)})}return G})):(t[kv](C,T),v(!0),Y7()||On(l,2,25,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."))},i.teardown=function(C,T){var k;c&&(c.cancel(),c=null,k=f.slice(0),f=[],Xn(k,function(P){P()}))}})}return e.__ieDyn=1,e}(),WRe=36e5,W4=["googlebot","adsbot-google","apis-google","mediapartners-google"];function IY(){var e=fm();return e&&!!e.timing}function KRe(){var e=fm();return e&&e.getEntriesByType&&0<e.getEntriesByType("navigation")[MS]}function YRe(){var e=fm(),e=e?e.timing:0;return e&&0<e.domainLookupStart&&0<e[pP]&&0<e[g1]&&0<e[qRe]&&0<e[NI]&&0<e[fN]&&0<e[FI]&&0<e.domLoading}function K4(){return IY()?fm().timing:null}function ZRe(){return KRe()?fm()[dN]("navigation")[0]:null}function XRe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(Xf()||{}).userAgent,r=!1;if(n)for(var o=0;o<W4[MS];o++)r=r||nc(n.toLowerCase(),W4[o])!==-1;if(r)return!1;for(o=0;o<e[MS];o++)if(e[o]<0||WRe<=e[o])return!1;return!0}var Dc,QRe=function(){function e(t){var n=A_(t);Qi(e,this,function(r){r[CB]=function(o){o.isValid=!1;var i=ZRe(),l=K4(),c=0,f=0,p=0,g=0,v=0;(i||l)&&(v=i?(c=i[pf],f=i[Rx]===0?i[FI]:Yu(i[Rx],i[FI]),p=Yu(i.requestStart,i[g1]),g=Yu(i[g1],i[fN]),Yu(i.responseEnd,i[NI])):(c=Yu(l[pP],l[NI]),f=Yu(l[pP],l[FI]),p=Yu(l.requestStart,l[g1]),g=Yu(l[g1],l[fN]),Yu(l.responseEnd,l[NI])),c===0?On(n,2,10,"error calculating page view performance.",{total:c,network:f,request:p,response:g,dom:v}):r[hN](c,f,p,g,v)?c<Math.floor(f)+Math.floor(p)+Math.floor(g)+Math.floor(v)?On(n,2,8,"client performance math error.",{total:c,network:f,request:p,response:g,dom:v}):(o.durationMs=c,o.perfTotal=o[pf]=Ng(c),o.networkConnect=Ng(f),o.sentRequest=Ng(p),o.receivedResponse=Ng(g),o.domProcessing=Ng(v),o.isValid=!0):On(n,2,45,"Invalid page load duration value. Browser perf data won't be sent.",{total:c,network:f,request:p,response:g,dom:v}))},r[SY]=K4,r[CY]=IY,r[EY]=YRe,r[hN]=XRe})}return e.__ieDyn=1,e}(),JRe=function(){function e(t,n){var r="prevPageVisitData";Qi(e,this,function(o){o[sN]=function(i,l){try{var c=function(f,p){var g=null;try{var v;g=function(){var w=null;try{var C,T;AS()&&(C=jf(),T=tN(t,r))&&vE()&&((w=Rh().parse(T)).pageVisitTime=C-w[TY],hY(t,r))}catch(k){Zv(t,"Stop page visit timer failed: "+Zn(k)),w=null}return w}(),AS()&&(tN(t,r)!=null&&Fc("Cannot call startPageVisit consecutively without first calling stopPageVisit"),v=Rh().stringify(new eOe(f,p)),dY(t,r,v))}catch(w){Zv(t,"Call to restart failed: "+Zn(w)),g=null}return g}(i,l);c&&n(c.pageName,c.pageUrl,c.pageVisitTime)}catch(f){Zv(t,"Auto track page visit time failed, metric will not be collected: "+Zn(f))}},Qo(o,"_logger",{g:function(){return t}}),Qo(o,"pageVisitTimeTrackingHandler",{g:function(){return n}})})}return e.__ieDyn=1,e}(),eOe=function(e,t){this[TY]=jf(),this.pageName=e,this.pageUrl=t},Y4=function(e,t){var n=this,r={};n.start=function(o){r[o]!==void 0&&On(e,2,62,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),r[o]=+new Date},n.stop=function(o,i,l,c){var f=r[o];isNaN(f)?On(e,2,63,"stop was called without a corresponding start.",{name:o,key:o},!0):(f=Yu(f,+new Date),n.action(o,i,f,l,c)),delete r[o],r[o]=void 0}},tOe="event";function UC(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}function nOe(e){var t;return e&&e.reason?(t=e.reason,!Er(t)&&$r(t[fP])?t[fP]():Zn(t)):e||""}var Z4=6e4,rOe=Zx(((Dc={sessionRenewalMs:J6(X4,18e5),sessionExpirationMs:J6(X4,864e5),disableExceptionTracking:os()})[_Y]=os(),Dc[VRe]=os(),Dc[xY]=os(),Dc[cN]=!1,Dc.samplingPercentage=nP(oOe,100),Dc[aN]=os(),Dc[bY]=os(),Dc[wY]=os(),Dc.namePrefix=cMe(),Dc.enableDebug=os(),Dc.disableFlushOnBeforeUnload=os(),Dc.disableFlushOnUnload=os(!1,"disableFlushOnBeforeUnload"),Dc));function X4(e,t){return+(e=(e=e||t)<Z4?Z4:e)}function oOe(e){return!isNaN(e)&&0<e&&e<=100}function iOe(e){va(e[aN])||(e[aN]?IRe:kRe)()}var aOe=function(e){function t(){var n,r,o,i,l,c,f,p,g,v,w,C,T,k,P,O,L,D,N,F=e.call(this)||this;return F.identifier=vY,F.priority=180,F.autoRoutePVDelay=500,Qi(t,F,function(B,V){var G=V[Wb];function q($,K,te,re,oe){B[Oc]().throwInternal($,K,te,re,oe)}function z(){c=l=i=o=r=n=null;var $=xf(!(O=k=T=C=w=v=g=p=f=!1));L=$&&$[m1]||"",P=N=D=null,Qo(B,"config",{g:function(){return P}})}z(),B.getCookieMgr=function(){return lB(B[pl])},B.processTelemetry=function($,K){B.processNext($,K)},B.trackEvent=function($,K){try{var te=wg($,Lg[fg],Lg[lv],B[Oc](),K);B[pl][uv](te)}catch(re){q(2,39,"trackTrace failed, trace will not be collected: "+ri(re),{exception:Zn(re)})}},B.startTrackEvent=function($){try{n.start($)}catch(K){q(1,29,"startTrackEvent failed, event will not be collected: "+ri(K),{exception:Zn(K)})}},B.stopTrackEvent=function($,K,te){try{n.stop($,void 0,K,te)}catch(re){q(1,30,"stopTrackEvent failed, event will not be collected: "+ri(re),{exception:Zn(re)})}},B.trackTrace=function($,K){try{var te=wg($,ox[fg],ox[lv],B[Oc](),K);B[pl][uv](te)}catch(re){q(2,39,"trackTrace failed, trace will not be collected: "+ri(re),{exception:Zn(re)})}},B.trackMetric=function($,K){try{var te=wg($,Qv[fg],Qv[lv],B[Oc](),K);B[pl][uv](te)}catch(re){q(1,36,"trackMetric failed, metric will not be collected: "+ri(re),{exception:Zn(re)})}},B[LI]=function($,K){try{var te=$||{};o[LI](te,Tu(Tu(Tu({},te.properties),te.measurements),K)),O&&l[sN](te.name,te.uri)}catch(re){q(1,37,"trackPageView failed, page view will not be collected: "+ri(re),{exception:Zn(re)})}},B[kv]=function($,K,te){var re=Yl(),re=(re&&($.refUri=$.refUri===void 0?re.referrer:$.refUri),wn($[Rx])&&(re=(K||$[lN]||{})[pf]||0,$[Rx]=new Date(new Date().getTime()-re)),wg($,Xg[fg],Xg[lv],B[Oc](),K,te));B[pl][uv](re)},B[uN]=function($,K,te){$=wg($,ix[fg],ix[lv],B[Oc](),K,te),B[pl][uv]($)},B.trackPageViewPerformance=function($,K){$=$||{};try{i[CB]($),B[uN]($,K)}catch(te){q(1,37,"trackPageViewPerformance failed, page view will not be collected: "+ri(te),{exception:Zn(te)})}},B.startTrackPage=function($){try{var K;typeof $!="string"&&($=(K=Yl())&&K.title||""),r.start($)}catch(te){q(1,31,"startTrackPage failed, page view may not be collected: "+ri(te),{exception:Zn(te)})}},B.stopTrackPage=function($,K,te,re){try{var oe,ue;typeof $!="string"&&($=(oe=Yl())&&oe.title||""),typeof K!="string"&&(K=(ue=xf())&&ue[m1]||""),r.stop($,K,te,re),O&&l[sN]($,K)}catch(Q){q(1,32,"stopTrackPage failed, page view will not be collected: "+ri(Q),{exception:Zn(Q)})}},B[q4]=function($,K,te){var re=$&&($[SO]||$[BC])||Bz($)&&$||{name:$&&typeof $,message:$||Hf};$=$||{},re=wg(new xd(B[Oc](),re,$[lN]||K,$.measurements,$.severityLevel,$.id).toInterface(),xd[fg],xd[lv],B[Oc](),K,te),B[pl][uv](re)},B.trackException=function($,K){$&&!$[SO]&&$[BC]&&($[SO]=$[BC]);try{B[q4]($,K)}catch(te){q(1,35,"trackException failed, exception will not be collected: "+ri(te),{exception:Zn(te)})}},B[EO]=function($){var K=$&&$[BC],te=$&&$.evt;try{te||(ae=ic())&&(te=ae[tOe]);var re,oe,ue=$&&$.url||(Yl()||{}).URL,Q=$[TO]||"window.onerror@"+ue+":"+($[IO]||0)+":"+($[kO]||0),ce={errorSrc:Q,url:ue,lineNumber:$[IO]||0,columnNumber:$[kO]||0,message:$[G4]};$Re($.message,$.url,$.lineNumber,$.columnNumber,$[BC])?(re=xd[PO]("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",ue,$[IO]||0,$[kO]||0,K,te,null,Q),oe=ce,re=wg(re,xd[fg],xd[lv],B[Oc](),oe),B[pl][uv](re)):($[TO]||($[TO]=Q),B.trackException({exception:$,severityLevel:3},ce))}catch(fe){var ae=K?K.name+", "+K[G4]:"null";q(1,11,"_onError threw exception while logging error, error will not be collected: "+ri(fe),{exception:Zn(fe),errorString:ae})}},B[jT]=function($){if(B[pl])return B[pl][jT]($);(c=c||[]).push($)},B.initialize=function($,K,te,re){if(!B.isInitialized()){wn(K)&&Fc("Error initializing"),V.initialize($,K,te,re);try{var oe,ue;N=yy(Bd(B.identifier),K.evtNamespace&&K.evtNamespace()),c&&(Xn(c,function(Be){K[jT](Be)}),c=null),le=$,pe=B.identifier,Fe=B[pl],B[Wb](Za(le,function(){var Be,Ze=Oh(null,le,Fe);P=Ze.getExtCfg(pe,rOe),O=P[_Y],le.storagePrefix&&xB(le.storagePrefix),iOe(P),f=P[bY],!p&&f&&(Be=["/browserLinkSignalR/","/__browserLink/"],B[Wb](B[jT](function(it){if(f&&it.baseType===Jv[fg]){var ot=it.baseData;if(ot){for(var ut=0;ut<Be[MS];ut++)if(ot.target&&0<=nc(ot.target,Be[ut]))return!1}}return!0})),p=!0)})),i=new QRe(B[pl]),o=new GRe(B,P.overridePageViewDuration,B[pl],i),l=new JRe(B[Oc](),function(Be,Ze,it){var ot=Be;ot={PageName:Be,PageUrl:Ze},B.trackMetric({name:"PageVisitTime",average:it,max:it,min:it,sampleCount:1},ot)}),(n=new Y4(B[Oc](),"trackEvent")).action=function(Be,Ze,it,ot,ut){ut=ut||{},(ot=ot||{}).duration=it[fP](),B.trackEvent({name:Be,properties:ot,measurements:ut})},(r=new Y4(B[Oc](),"trackPageView")).action=function(Be,Ze,it,ot,ut){(ot=wn(ot)?{}:ot).duration=it[fP](),B[kv]({name:Be,uri:Ze,properties:ot,measurements:ut},ot)},YA()&&(ae=ic(),fe=xf(!0),B[Wb](Za(P,function(){(w=P.disableExceptionTracking)||C||P.autoExceptionInstrumented||(G(NT(ae,"onerror",{ns:N,rsp:function(Be,Ze,it,ot,ut,st){w||Be.rslt===!0||B[EO](xd[PO](Ze,it,ot,ut,st,Be.evt))}},!1)),C=!0)})),oe=ae,ue=fe,B[Wb](Za(P,function(){T=P[xY]===!0,C=C||P[cN],T&&!k&&(G(NT(oe,"onunhandledrejection",{ns:N,rsp:function(Be,Ze){T&&Be.rslt!==!0&&B[EO](xd[PO](nOe(Ze),ue?ue[m1]:"",0,0,Ze,Be.evt))}},!1)),P[cN]=k=!0)})),Q=ic(),ce=xf(!0),B[Wb](Za(P,function(){var Be,Ze,it,ot;g=P[wY]===!0,Q&&g&&!v&&wPe()&&(Ze=K7(),$r(Ze.pushState))&&$r(Ze.replaceState)&&typeof Event!==Kz&&(Be=Q,Ze=Ze,it=ce,v||(ot=P.namePrefix||"",G(NT(Ze,"pushState",{ns:N,rsp:function(){g&&(UC(Be,zC(ot+"pushState")),UC(Be,zC(ot+"locationchange")))}},!0)),G(NT(Ze,"replaceState",{ns:N,rsp:function(){g&&(UC(Be,zC(ot+"replaceState")),UC(Be,zC(ot+"locationchange")))}},!0)),tm(Be,ot+"popstate",function(){g&&UC(Be,zC(ot+"locationchange"))},N),tm(Be,ot+"locationchange",function(){D=(D&&(L=D),it&&it[m1]||"");{var ut,st;g&&((ut=function(){var ct=null;B[pl]&&B[pl].getTraceCtx&&(ct=B[pl].getTraceCtx(!1));{var Ae;ct||(Ae=B[pl].getPlugin(iM))&&(Ae=Ae.plugin.context)&&(ct=_B(Ae.telemetryTrace))}return ct}())&&(ut.setTraceId($g()),st="_unknown_",it&&it.pathname&&(st=it.pathname+(it.hash||"")),ut.setName(cs(B[Oc](),st))),zd((function(ct){B[LI]({refUri:ct,properties:{duration:0}})}).bind(B,L),B.autoRoutePVDelay))}},N),v=!0))})))}catch(Be){throw B.setInitialized(!1),Be}var Q,ce,ae,fe,le,pe,Fe}},B._doTeardown=function($,K){o&&o.teardown($,K),ex(window,null,null,N),z()},Qo(B,"_pageViewManager",{g:function(){return o}}),Qo(B,"_pageViewPerformanceManager",{g:function(){return i}}),Qo(B,"_pageVisitTimeManager",{g:function(){return l}}),Qo(B,"_evtNamespace",{g:function(){return"."+N}})}),F}return Tm(t,e),t.Version="3.3.0",t}(e0),zI="featureOptIn",kY="onCfgChangeReceive",PY="nonOverrideConfigs",AY="scheduleFetchTimeout";function MY(e,t,n,r){try{var o=r<n,i=(o&&(e=null),n==0?UPe({},e):e);return i&&t&&!o&&wo(i,function(l){var c=t[l];c&&(uc(i[l])&&uc(c)?i[l]=MY(i[l],c,++n,r):delete i[l])}),i}catch{}return e}var $T,ax="featureOptIn.",RY=".mode",OY=".onCfg",DY=".offCfg";function sOe(e,t,n){var r,o,i,l,c,f,p,g,v,w;return t&&t.enabled?(r=(t=(t[zI]||{})[e]||{mode:1}).mode,o=t.onCfg,t=t.offCfg,i=(n=(n||{})[e]||{mode:2}).mode,l=n.onCfg,c=n.offCfg,n=!!n.blockCdnCfg,f=ax+e+OY,p=ax+e+DY,g=i,v=l,w=c,n||(r===4||r===5?(g=r==4?3:2,v=o||l,w=t||c):r===2||i===2?(g=2,v=l||o,w=c||t):r===3?(g=3,v=l||o,w=c||t):r===1&&i===1&&(g=1)),(n={})[ax+e+RY]=g,n[f]=v,n[p]=w,n):null}function lOe(e,t){try{var n,r;return e&&e.enabled?e[zI]?(n=e[zI],r=e.config||{},wo(n,function(o){var i=sOe(o,e,t.config[zI]);wn(i)||(wo(i,function(l,c){rK(r,l,c)}),uOe(o,i,r))}),r):e.config:null}catch{}return null}function uOe(l,i,n){var r=i[ax+l+RY],o=i[ax+l+OY],i=i[ax+l+DY],l=r===2?i:r===3?o:null;l&&wo(l,function(c,f){rK(n,c,f)})}var cOe="ai_cfgsync",Q4="GET",dOe=18e5,Kb=void 0,hOe={instrumentationKey:!0,connectionString:!0,endpointUrl:!0},fOe=Zx((($T={syncMode:1,blkCdnCfg:Kb,customEvtName:Kb,cfgUrl:Kb,overrideSyncFn:Kb,overrideFetchFn:Kb})[kY]=Kb,$T[AY]=dOe,$T[PY]=hOe,$T)),pOe=function(e){function t(){var n,r,o,i,l,c,f,p,g,v,w,C,T,k,P,O,L=e.call(this)||this,D=(L.priority=198,!(L.identifier="AppInsightsCfgSyncPlugin"));return Qi(t,L,function(N,F){function B(){C=O=P=g=w=v=c=T=p=f=l=i=o=r=null}function V(ce,ae){if(ce){if(r=ce,ae&&!D)return q();if(f&&!D)return N.core.updateCfg(ce),!0}return!1}function G(){try{var ce=Od();ce&&ex(ce,null,null,i)}catch{}}function q(ce){try{return O&&$r(O)?O(r,ce):VAe(o,r,ce)}catch{}return!1}function z(ce){try{if(G(),ce&&(o=ce,f)){var ae=Od();if(ae)try{tm(ae,o,function(le){var le=le&&le.detail;C&&le?C(le):(le=(le=le&&le.cfg)&&Eu(le)&&oe(le))&&V(le)},i,!0)}catch{}}return!0}catch{}return!1}function $(ce,ae,fe){var le=Od(),le=le&&le.fetch||null;if(ce&&le&&$r(le))try{var pe=new Request(ce,{method:Q4});mm(fetch(pe),function(Fe){var Be=Fe.value;Fe.rejected?re(ae,400):Be.ok?mm(Be.text(),function(Ze){re(ae,Be.status,Ze.value,fe)}):re(ae,Be.status,null,fe)})}catch{}}function K(ce,ae,fe){try{var le=new XMLHttpRequest;le.open(Q4,ce),le.onreadystatechange=function(){le.readyState===XMLHttpRequest.DONE&&re(ae,le.status,le.responseText,fe)},le.onerror=function(){re(ae,400)},le.ontimeout=function(){re(ae,400)},le.send()}catch{}}function te(ce,ae,fe){try{var le,pe,Fe;200<=ce&&ce<400&&ae?(w=0,(le=Rh())&&(Fe=(pe=lOe(le.parse(ae),N.core))&&Eu(pe)&&oe(pe))&&V(Fe,fe)):w++,w<3&&ue()}catch{}}function re(ce,ae,fe,le){try{ce(ae,fe,le)}catch{}}function oe(ce){var ae=null;try{ce&&(ae=MY(ce,T,0,5))}catch{}return ae}function ue(){!c&&v&&(c=zd(function(){c=null,k(l,te,p)},v)).unref()}function Q(){c&&c.cancel(),c=null,w=0}B(),N.initialize=function(ce,ae,fe,le){var pe,Fe,Be;F.initialize(ce,ae,fe,le),i=yy(Bd(N.identifier),ae.evtNamespace&&ae.evtNamespace()),pe=ce,Fe=N.identifier,Be=N.core,N._addHook(Za(pe,function(){var Ze=Oh(null,pe,Be),Ze=(n=Ze.getExtCfg(Fe,fOe),g),Ze=(g=!!n.blkCdnCfg,wn(Ze)||Ze===g||(!g&&l?k&&k(l,te,p):Q()),wn(f)&&(f=n.syncMode===2),wn(p)&&(p=n.syncMode===1),n.customEvtName||cOe);o!==Ze&&(f?z(Ze):(G(),o=Ze)),(l=wn(l)?n.cfgUrl:l)||(r=pe,p&&q())})),O=n.overrideSyncFn,P=n.overrideFetchFn,C=n[kY],T=n[PY],v=n[AY],k=function(){var Ze=P;return wn(Ze)&&(nB()?Ze=$:QA()&&(Ze=K)),Ze}(),w=0,l&&!g&&k&&k(l,te,p)},N.getCfg=function(){return r},N.pause=function(){D=!0,Q()},N.resume=function(){D=!1,ue()},N.setCfg=function(ce){return V(ce)},N.sync=q,N.updateEventListenerName=z,N._doTeardown=function(ce,ae){G(),Q(),B()},N._getDbgPlgTargets=function(){return[p,f,o,g,T]},N.processTelemetry=function(ce,ae){N.processNext(ce,ae)}}),L}return Tm(t,e),t.__ieDyn=1,t}(e0),bv="duration",wl="tags",AO="deviceType",Su="data",ym="name",RS="traceID",vo="length",OS="stringify",D_="measurements",Df="dataType",L_="envelopeType",wv="toString",y1="_get",e_="enqueue",t_="count",LY="eventsLimitInMem",Qg="push",mP="item",pN="emitLineDelimitedJson",sx="clear",SB="createNew",gP="markAsSent",z1="clearSent",EB="bufferOverride",MO="BUFFER_KEY",pg="SENT_BUFFER_KEY",gw="concat",jC="MAX_BUFFER_SIZE",$C="triggerSend",Vl="diagLog",RO="initialize",HC="_sender",mN="customHeaders",NY="maxBatchSizeInBytes",gN="onunloadDisableBeacon",yN="isBeaconApiDisabled",FY="alwaysUseXhrOverride",vN="disableXhr",zY="enableSessionStorageBuffer",mg="_buffer",BY="onunloadDisableFetch",UY="disableSendBeaconSplit",jY="instrumentationKey",J4="enableSendPromise",HT="getSenderInst",eV="unloadTransports",$Y="convertUndefined",HY="maxBatchInterval",BI="serialize",Yb="_onError",OO="_onPartialSuccess",VT="_onSuccess",DO="itemsReceived",LO="itemsAccepted",NO="oriPayload",FO="baseType",yP="sampleRate",tV="eventsSendRequest",VY="getSamplingScore",mOe="getHashCodeScore",zO="baseType",_a="baseData",Zs="properties",nV="true";function Ga(e,t,n){return Ui(e,t,n,Mk)}function gOe(e,t,n){for(var r=n[wl]=n[wl]||{},o=t.ext=t.ext||{},i=t[wl]=t[wl]||[],l=o.user,l=(l&&(Ga(r,ji.userAuthUserId,l.authId),Ga(r,ji.userId,l.id||l.localId)),o.app),l=(l&&Ga(r,ji.sessionId,l.sesId),o.device),l=(l&&(Ga(r,ji.deviceId,l.id||l.localId),Ga(r,ji[AO],l.deviceClass),Ga(r,ji.deviceIp,l.ip),Ga(r,ji.deviceModel,l.model),Ga(r,ji[AO],l[AO])),t.ext.web),t=(l&&(Ga(r,ji.deviceLanguage,l.browserLang),Ga(r,ji.deviceBrowserVersion,l.browserVer),Ga(r,ji.deviceBrowser,l.browser),Ga(t=(t=(t=n[Su]=n[Su]||{})[_a]=t[_a]||{})[Zs]=t[Zs]||{},"domain",l.domain),Ga(t,"isManual",l.isManual?nV:null),Ga(t,"screenRes",l.screenRes),Ga(t,"userConsent",l.userConsent?nV:null)),o.os),l=(t&&(Ga(r,ji.deviceOS,t[ym]),Ga(r,ji.deviceOSVersion,t.osVer)),o.trace),c=(l&&(Ga(r,ji.operationParentId,l.parentID),Ga(r,ji.operationName,cs(e,l[ym])),Ga(r,ji.operationId,l[RS])),{}),f=i[vo]-1;0<=f;f--)wo(i[f],function(g,v){c[g]=v}),i.splice(f,1);wo(i,function(p,g){c[p]=g}),t=Tu(Tu({},r),c),t[ji.internalSdkVersion]||(t[ji.internalSdkVersion]=cs(e,"javascript:".concat(yOe.Version),64)),n[wl]=wK(t)}function sy(e,t,n){wn(e)||wo(e,function(r,o){pE(o)?n[r]=o:Er(o)?t[r]=o:vE()&&(t[r]=Rh()[OS](o))})}function N_(e,t){wn(e)||wo(e,function(n,r){e[n]=r||t})}function F_(e,t,n,r){return r=new DRe(e,r,t),Ga(r,"sampleRate",n[nY]),(n[_a]||{}).startTime&&(r.time=Px(n[_a].startTime)),r.iKey=n.iKey,t=n.iKey.replace(/-/g,""),r[ym]=r[ym].replace("{0}",t),gOe(e,n,r),n[wl]=n[wl]||[],wK(r)}function z_(e,t){wn(t[_a])&&On(e,1,46,"telemetryItem.baseData cannot be null.")}var yOe={Version:"3.3.0"};function vOe(e,t,l){z_(e,t);var r,o=t[_a][D_]||{},i=t[_a][Zs]||{},l=(sy(t[Su],i,o),wn(l)||N_(i,l),t[_a]);return wn(l)?(Zv(e,"Invalid input for dependency data"),null):(r=l[Zs]&&l[Zs][R4]?l[Zs][R4]:"GET",r=new Jv(e,l.id,l.target,l[ym],l[bv],l.success,l.responseCode,r,l.type,l.correlationContext,i,o),l=new O_(Jv[Df],r),F_(e,Jv[L_],t,l))}function qY(e,t,o){z_(e,t);var i={},r={},o=(t[zO]!==Lg[Df]&&(i.baseTypeSource=t[zO]),t[zO]===Lg[Df]?(i=t[_a][Zs]||{},r=t[_a][D_]||{}):t[_a]&&sy(t[_a],i,r),sy(t[Su],i,r),wn(o)||N_(i,o),t[_a][ym]),o=new Lg(e,o,i,r),i=new O_(Lg[Df],o);return F_(e,Lg[L_],t,i)}function _Oe(e,t,o){z_(e,t);var r=t[_a][D_]||{},i=t[_a][Zs]||{},o=(sy(t[Su],i,r),wn(o)||N_(i,o),t[_a]),o=xd.CreateFromInterface(e,o,i,r),i=new O_(xd[Df],o);return F_(e,xd[L_],t,i)}function bOe(e,t,i){z_(e,t);var l=t[_a],r=l[Zs]||{},o=l[D_]||{},i=(sy(t[Su],r,o),wn(i)||N_(r,i),new Qv(e,l[ym],l.average,l.sampleCount,l.min,l.max,l.stdDev,r,o)),l=new O_(Qv[Df],i);return F_(e,Qv[L_],t,l)}function wOe(e,t,g){z_(e,t);var r,p=t[_a],p=(wn(p)||wn(p[Zs])||wn(p[Zs][bv])?wn(t[Su])||wn(t[Su][bv])||(r=t[Su][bv],delete t[Su][bv]):(r=p[Zs][bv],delete p[Zs][bv]),t[_a]),o=(((t.ext||{}).trace||{})[RS]&&(o=t.ext.trace[RS]),p.id||o),i=p[ym],l=p.uri,c=p[Zs]||{},f=p[D_]||{},p=(wn(p.refUri)||(c.refUri=p.refUri),wn(p.pageType)||(c.pageType=p.pageType),wn(p.isLoggedIn)||(c.isLoggedIn=p.isLoggedIn[wv]()),wn(p[Zs])||wo(p[Zs],function(v,w){c[v]=w}),sy(t[Su],c,f),wn(g)||N_(c,g),new Xg(e,i,l,r,c,f,o)),g=new O_(Xg[Df],p);return F_(e,Xg[L_],t,g)}function xOe(e,t,c){z_(e,t);var r=t[_a],f=r[ym],o=r.uri||r.url,i=r[Zs]||{},l=r[D_]||{},c=(sy(t[Su],i,l),wn(c)||N_(i,c),new ix(e,f,o,void 0,i,l,r)),f=new O_(ix[Df],c);return F_(e,ix[L_],t,f)}function COe(e,t,l){z_(e,t);var c=t[_a].message,r=t[_a].severityLevel,o=t[_a][Zs]||{},i=t[_a][D_]||{},l=(sy(t[Su],o,i),wn(l)||N_(o,l),new ox(e,c,r,o,i)),c=new O_(ox[Df],l);return F_(e,ox[L_],t,c)}var ya,xg,GY=function(){function e(t,n){var r=[],o=!1,i=n.maxRetryCnt;this[y1]=function(){return r},this._set=function(l){return r=l},Qi(e,this,function(l){l[e_]=function(c){l[t_]()>=n[LY]?o||(On(t,2,105,"Maximum in-memory buffer size reached: "+l[t_](),!0),o=!0):(c.cnt=c.cnt||0,!wn(i)&&c.cnt>i||r[Qg](c))},l[t_]=function(){return r[vo]},l.size=function(){for(var c=r[vo],f=0;f<r[vo];f++)c+=r[f].item[vo];return n[pN]||(c+=2),c},l[sx]=function(){o=!(r=[])},l.getItems=function(){return r.slice(0)},l.batchPayloads=function(c){var f;return c&&0<c[vo]?(f=[],Xn(c,function(p){f[Qg](p[mP])}),n[pN]?f.join(`
`):"["+f.join(",")+"]"):null},l[SB]=function(c,f,p){var g=r.slice(0),v=new(p?WY:TB)(c=c||t,f=f||{});return Xn(g,function(w){v[e_](w)}),v}})}return e.__ieDyn=1,e}(),TB=function(e){function t(n,r){return n=e.call(this,n,r)||this,Qi(t,n,function(o,i){o[gP]=function(l){i[sx]()},o[z1]=function(l){}}),n}return Tm(t,e),t.__ieDyn=1,t}(GY),SOe=["AI_buffer","AI_sentBuffer"],WY=function(e){function t(r,o){var i=e.call(this,r,o)||this,l=!1,c=o==null?void 0:o.namePrefix,f=o[EB]||{getItem:tN,setItem:dY},p=f.getItem,g=f.setItem,v=o.maxRetryCnt;return Qi(t,i,function(w,C){var T=L(t[MO]),k=L(t[pg]),P=function(){var B=[];try{return Xn(SOe,function(V){var G=F(V);B=B[gw](G),c&&(G=F(c+"_"+V),B=B[gw](G))}),B}catch(V){On(r,2,41,"Transfer events from previous buffers: "+ri(V)+". previous Buffer items can not be removed",{exception:Zn(V)})}return[]}(),k=k[gw](P),P=w._set(T[gw](k));function O(B,V){var G=[],q=[];return Xn(B,function(z){q[Qg](z[mP])}),Xn(V,function(z){$r(z)||Jl(q,z[mP])!==-1||G[Qg](z)}),G}function L(B){return D(c?c+"_"+B:B)}function D(B){try{var V=p(r,B);if(V){var G=Rh().parse(V);if((G=Er(G)?Rh().parse(G):G)&&bo(G))return G}}catch(q){On(r,1,42," storage key: "+B+", "+ri(q),{exception:Zn(q)})}return[]}function N(B,V){try{var B=c?c+"_"+B:B,G=JSON[OS](V);g(r,B,G)}catch(q){g(r,B,JSON[OS]([])),On(r,2,41," storage key: "+B+", "+ri(q)+". Buffer cleared",{exception:Zn(q)})}}function F(B){try{var V=D(B),G=[];return Xn(V,function(q){G[Qg]({item:q,cnt:0})}),hY(r,B),G}catch{}return[]}P[vo]>t[jC]&&(P[vo]=t[jC]),N(t[pg],[]),N(t[MO],P),w[e_]=function(B){w[t_]()>=t[jC]?l||(On(r,2,67,"Maximum buffer size reached: "+w[t_](),!0),l=!0):(B.cnt=B.cnt||0,!wn(v)&&B.cnt>v||(C[e_](B),N(t.BUFFER_KEY,w[y1]())))},w[sx]=function(){C[sx](),N(t.BUFFER_KEY,w[y1]()),N(t[pg],[]),l=!1},w[gP]=function(B){N(t[MO],w._set(O(B,w[y1]())));var V=L(t[pg]);V instanceof Array&&B instanceof Array&&((V=V[gw](B))[vo]>t[jC]&&(On(r,1,67,"Sent buffer reached its maximum size: "+V[vo],!0),V[vo]=t[jC]),N(t[pg],V))},w[z1]=function(B){B=O(B,L(t[pg])),N(t[pg],B)},w[SB]=function(B,V,G){G=!!G;var q=w[y1]().slice(0),z=L(t[pg]).slice(0),$=(B=B||r,V=V||{},w[sx](),new(G?t:TB)(B,V));return Xn(q,function(K){$[e_](K)}),G&&$[gP](z),$}}),i}var n;return Tm(t,e),(n=t).VERSION="_1",t.BUFFER_KEY="AI_buffer"+n.VERSION,t.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,t.MAX_BUFFER_SIZE=2e3,t}(GY),EOe=function(){function e(t){Qi(e,this,function(n){function r(l,c){var f="__aiCircularRefCheck",p={};if(l)if(l[f])On(t,2,50,"Circular reference detected while serializing object",{name:c},!0);else if(l.aiDataContract)l[f]=!0,wo(l.aiDataContract,function(g,T){var w=$r(T)?1&T():1&T,C=$r(T)?4&T():4&T,T=2&T,k=l[g]!==void 0,P=uc(l[g])&&l[g]!==null;!w||k||T?C||(w=void 0)!==(w=P?(T?o:r)(l[g],g):l[g])&&(p[g]=w):On(t,1,24,"Missing required field specification. The field is required but not present on source",{field:g,name:c})}),delete l[f];else if(c==="measurements")p=i(l,"number",c);else if(c==="properties")p=i(l,"string",c);else if(c==="tags")p=i(l,"string",c);else if(bo(l))p=o(l,c);else{On(t,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:c},!0);try{Rh()[OS](l),p=l}catch(g){On(t,1,48,g&&$r(g[wv])?g[wv]():"Error serializing object",null,!0)}}else On(t,1,48,"cannot serialize object because it is null or undefined",{name:c},!0);return p}function o(l,c){if(l)if(bo(l))for(var f=[],p=0;p<l[vo];p++){var g=r(l[p],c+"["+p+"]");f[Qg](g)}else On(t,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:c},!0);return f}function i(l,c,f){var p;return l&&(p={},wo(l,function(g,v){c==="string"?v===void 0?p[g]="undefined":v===null?p[g]="null":v[wv]?p[g]=v[wv]():p[g]="invalid field: toString() is not defined.":c==="number"?v===void 0?p[g]="undefined":v===null?p[g]="null":(v=parseFloat(v),p[g]=v):(p[g]="invalid field: "+f+" is of unknown type.",On(t,1,p[g],null,!0))})),p}n[BI]=function(l){l=r(l,"root");try{return Rh()[OS](l)}catch(c){On(t,1,48,c&&$r(c[wv])?c[wv]():"Error serializing object",null,!0)}}})}return e.__ieDyn=1,e}(),TOe=8,IOe=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(t){if(t==="")return 0;for(;t[vo]<TOe;)t=t[gw](t);for(var n=5381,r=0;r<t[vo];++r)n=(n<<5)+n+t.charCodeAt(r),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e}(),kOe=function(){var e=new IOe,t=new gY;this[VY]=function(n){return n[wl]&&n[wl][t.userId]?e.getHashCodeScore(n[wl][t.userId]):n.ext&&n.ext.user&&n.ext.user.id?e[mOe](n.ext.user.id):n[wl]&&n[wl][t.operationId]?e.getHashCodeScore(n[wl][t.operationId]):n.ext&&n.ext.telemetryTrace&&n.ext.telemetryTrace[RS]?e.getHashCodeScore(n.ext.telemetryTrace[RS]):100*Math.random()}},POe=function(){function e(t,n){this.INT_MAX_VALUE=2147483647,n=n||A_(null),(100<t||t<0)&&(n.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t},!0),t=100),this[yP]=t,this.samplingScoreGenerator=new kOe}return e.prototype.isSampledIn=function(t){var n=this[yP];return n==null||100<=n||t.baseType===Qv[Df]||this.samplingScoreGenerator[VY](t)<n},e}(),Hp=void 0,rV="",AOe=65e3;function oV(e){try{return e.responseText}catch{}return null}function MOe(e){return e&&e.sendPOST}var iV=Zx(((ya={endpointUrl:nP(Mk,gB+tx)})[pN]=os(),ya[HY]=15e3,ya[NY]=102400,ya.disableTelemetry=os(),ya[zY]=os(!0),ya.isRetryDisabled=os(),ya[yN]=os(!0),ya[UY]=os(!0),ya[vN]=os(),ya[BY]=os(),ya[gN]=os(),ya[jY]=Hp,ya.namePrefix=Hp,ya.samplingPercentage=nP(ROe,100),ya[mN]=Hp,ya[$Y]=Hp,ya[LY]=1e4,ya[EB]=!1,ya.httpXHROverride={isVal:MOe,v:Hp},ya[FY]=os(),ya.transports=Hp,ya.retryCodes=Hp,ya.maxRetryCnt={isVal:pE,v:10},ya));function ROe(e){return!isNaN(e)&&0<e&&e<=100}(xg={})[Lg.dataType]=qY,xg[ox.dataType]=COe,xg[Xg.dataType]=wOe,xg[ix.dataType]=xOe,xg[xd.dataType]=_Oe,xg[Qv.dataType]=bOe,xg[Jv.dataType]=vOe;var OOe=xg,DOe=function(e){function t(){var n,r,o,i,l,c,f,p,g,v,w,C,T,k,P,O,L,D,N,F,B,V,G,q,z,$,K,te,re,oe,ue,Q,ce,ae,fe=e.call(this)||this,le=(fe.priority=1001,fe.identifier=yY,0);return Qi(t,fe,function(pe,Fe){function Be(We,Ge){var Rt=oV(We);!We||Rt+""!="200"&&Rt!==""?(Rt=uO(Rt))&&Rt[DO]&&Rt[DO]>Rt[LO]&&!B?pe[OO](Ge,Rt):pe[Yb](Ge,CK(We)):(n=0,pe[VT](Ge,0))}function Ze(We,Ge,Rt){We.readyState===4&&Ie(We.status,Ge,We.responseURL,Rt,Jk(We),oV(We)||We.response)}function it(We){try{var Ge;if(We)return(Ge=We[NO])&&Ge[vo]?Ge:null}catch{}return null}function ot(We,Ge){return!(D||(We?We.baseData&&!We[FO]?(Ge&&On(Ge,1,70,"Cannot send telemetry without baseData and baseType"),1):(We[FO]||(We[FO]="EventData"),pe[HC]?pe._sample.isSampledIn(We)?(We[nY]=pe._sample[yP],0):(Ge&&On(Ge,2,33,"Telemetry item was sampled out and not sent",{SampleRate:pe._sample[yP]}),1):(Ge&&On(Ge,1,28,"Sender was not initialized"),1)):(Ge&&On(Ge,1,7,"Cannot send empty telemetry"),1)))}function ut(We,Ge){var Rt=We.iKey||N,Dt=t.constructEnvelope(We,Rt,Ge,F);if(Dt){var qt=!1;if(We[wl]&&We[wl][hO]&&(Xn(We[wl][hO],function(Yt){try{Yt&&Yt(Dt)===!1&&(qt=!0,Zv(Ge,"Telemetry processor check returns false"))}catch(xt){On(Ge,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ri(xt),{exception:Zn(xt)},!0)}}),delete We[wl][hO]),!qt)return Dt}else On(Ge,1,47,"Unable to create an AppInsights envelope")}function st(We){var Ge=rV,Rt=pe[Vl]();try{var Dt=ot(We,Rt),qt=null;(qt=Dt?ut(We,Rt):qt)&&(Ge=l[BI](qt))}catch{}return Ge}function ct(We){var Ge=rV;return Ge=We&&We[vo]?"["+We.join(",")+"]":Ge}function Ae(We){var Ge=ee(),Rt={urlString:w};return Rt[Su]=We,Rt.headers=Ge,Rt}function Z(xt,Ge,Rt,Dt){Dt===void 0&&(Dt=!0);function qt(Et,St,kt){var cn;cn=Ge,kt=kt,Et===200&&cn?pe._onSuccess(cn,cn[vo]):kt&&pe[Yb](cn,kt)}var Yt=ne(Ge),xt=xt&&xt.sendPOST;return xt&&Yt?(Dt&&pe._buffer[gP](Ge),xt(Yt,qt,!Rt)):null}function ne(We){var Ge,Rt,Dt;return bo(We)&&0<We[vo]?(Rt=pe[mg].batchPayloads(We),Dt=ee(),(Ge={})[Su]=Rt,Ge.urlString=w,Ge.headers=Dt,Ge.disableXhrSync=te,Ge.disableFetchKeepAlive=!re,Ge[NO]=We,Ge):null}function ee(){try{var We=f||{};return eN(w)&&(We[ki[6]]=ki[7]),We}catch{}return null}function ye(We){We=We?We[vo]:0,pe[mg].size()+We>T&&(g&&!g.isOnline()||pe[$C](!0,null,10))}function Ie(We,Ge,Rt,Dt,qt,Yt){var xt=null;pe._appId||(xt=uO(Yt))&&xt.appId&&(pe._appId=xt.appId),(We<200||300<=We)&&We!==0?(We!==301&&We!==307&&We!==308||ge(Rt))&&!B&&Pt(We)?(wt(Ge),On(pe[Vl](),2,40,". Response code "+We+". Will retry to send "+Ge[vo]+" items.")):pe[Yb](Ge,qt):g&&!g.isOnline()?B||(wt(Ge,10),On(pe[Vl](),2,40,". Offline - Response Code: ".concat(We,". Offline status: ").concat(!g.isOnline(),". Will retry to send ").concat(Ge.length," items."))):(ge(Rt),We===206?(xt=xt||uO(Yt))&&!B?pe[OO](Ge,xt):pe[Yb](Ge,qt):(n=0,pe[VT](Ge,Dt)))}function ge(We){return!(10<=c||wn(We)||We===""||We===w)&&(w=We,++c,1)}function $e(We,Ge){if(!p)return Z(ce&&ce[HT]([3],!0),We,Ge);p(We,!1)}function nt(We){try{if(We&&We[vo])return Er(We[0])}catch{}}function pt(We,Ge){var Rt=null;if(bo(We)){for(var Dt=We[vo],qt=0;qt<We[vo];qt++)Dt+=We[qt].item[vo];return ce.getSyncFetchPayload()+Dt<=AOe?Rt=2:f1()?Rt=3:(Rt=1,On(pe[Vl](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender.")),Z(ce&&ce[HT]([Rt],!0),We,Ge)}return null}function wt(We,Ge){if(Ge===void 0&&(Ge=1),We&&We[vo]!==0){var Rt=pe[mg];Rt[z1](We),n++;for(var Dt,qt=0,Yt=We;qt<Yt.length;qt++){var xt=Yt[qt];xt.cnt=xt.cnt||0,xt.cnt++,Rt[e_](xt)}We=Ge,We=n<=1?10:(Dt=(Math.pow(2,n)-1)/2,Dt=Math.floor(Math.random()*Dt*10)+1,Dt*=We,Math.max(Math.min(Dt,3600),10)),Dt=jf()+1e3*We,r=Dt,mt()}}function mt(){var We;i||o||(We=r?Math.max(0,r-jf()):0,We=Math.max(V,We),i=zd(function(){i=null,pe[$C](!0,null,1)},We))}function zt(){i&&i.cancel(),r=i=null}function Pt(We){return wn(ae)?We===401||We===408||We===429||We===500||We===502||We===503||We===504:ae[vo]&&-1<ae.indexOf(We)}function Zt(){pe[HC]=null,pe[mg]=null,pe._appId=null,pe._sample=null,T=le=c=n=0,z=F=Hp,Q=re=te=B=D=k=o=!(f={}),ce=ue=oe=G=N=L=C=w=v=p=l=i=r=g=null,Qo(pe,"_senderConfig",{g:function(){return xK({},iV)}})}Zt(),pe.pause=function(){zt(),o=!0},pe.resume=function(){o&&(o=!1,r=null,ye(),mt())},pe.flush=function(We,Ge,Rt){if(We===void 0&&(We=!0),!o){zt();try{return pe[$C](We,null,Rt||1)}catch(Dt){On(pe[Vl](),1,22,"flush failed, telemetry will not be collected: "+ri(Dt),{exception:Zn(Dt)})}}},pe.onunloadFlush=function(){if(!o)if(k||K)try{return pe[$C](!0,$e,2)}catch(We){On(pe[Vl](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ri(We),{exception:Zn(We)})}else pe.flush(!1)},pe.addHeader=function(We,Ge){f[We]=Ge},pe[RO]=function(We,Ge,Rt,Dt){pe.isInitialized()&&On(pe[Vl](),1,28,"Sender is already initialized"),Fe[RO](We,Ge,Rt,Dt);var qt=pe.identifier,Yt=(l=new EOe(Ge.logger),n=0,r=null,pe[HC]=null,c=0,pe[Vl]());v=yy(Bd("Sender"),Ge.evtNamespace&&Ge.evtNamespace()),g=HRe(v),pe._addHook(Za(We,function(xt){xt=xt.cfg,xt.storagePrefix&&xB(xt.storagePrefix);var Et=Oh(null,xt,Ge).getExtCfg(qt,iV),lr=(Qo(pe,"_senderConfig",{g:function(){return Et}}),Ge.activeStatus()===Tg.PENDING?pe.pause():Ge.activeStatus()===Tg.ACTIVE&&pe.resume(),C!==Et.endpointUrl&&(w=C=Et.endpointUrl),L&&L!==Et[mN]&&Xn(L,function(Le){delete f[Le.header]}),T=Et[NY],k=(Et[gN]===!1||Et[yN]===!1)&&f1(),P=Et[gN]===!1&&f1(),O=Et[yN]===!1&&f1(),K=Et[FY],te=!!Et[vN],ae=Et.retryCodes,Et[EB]),an=!!Et[zY]&&(!!lr||AS()),cn=Et.namePrefix,kt=an!==G||an&&z!==cn||an&&q!==lr;if(pe[mg]){if(kt)try{pe._buffer=pe._buffer[SB](Yt,Et,an)}catch(Le){On(pe[Vl](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+ri(Le),{exception:Zn(Le)})}ye()}else pe[mg]=new(an?WY:TB)(Yt,Et);z=cn,G=an,q=lr,re=!Et[BY]&&nB(!0),Q=!!Et[UY],pe._sample=new POe(Et.samplingPercentage,Yt),function(Le,de){return de=de.disableInstrumentationKeyValidation,!wn(de)&&de?1:new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$").test(Le)}(N=Et[jY],xt)||On(Yt,1,100,"Invalid Instrumentation key "+N),L=Et[mN],Er(w)&&!eN(w)&&L&&0<L[vo]?Xn(L,function(Le){fe.addHeader(Le.header,Le.value)}):L=null,$=Et[J4];var St,kt=function(){var Le;try{var de={xdrOnComplete:function(xe,Ee,Ye){if(Ye=it(Ye),Ye)return Be(xe,Ye)},fetchOnComplete:function(xe,Ee,Ye,lt){if(lt=it(lt),lt)return Ie(xe.status,lt,xe.url,lt[vo],xe.statusText,Ye||"")},xhrOnComplete:function(xe,Ee,Ye){if(Ye=it(Ye),Ye)return Ze(xe,Ye,Ye[vo])},beaconOnRetry:function(xe,Ee,Ye){var lt=Ee,Ce=Ye,ke=xe&&xe[NO];if(Q)ue&&ue(ke,!0),On(pe[Vl](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var De=[],He=0;He<ke[vo];He++){var vt=ke[He],Ct=[vt],Nt=ne(Ct);Ce(Nt,lt)?pe._onSuccess(Ct,Ct[vo]):De[Qg](vt)}0<De[vo]&&(ue&&ue(De,!0),On(pe[Vl](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}};return(Le={})[J4]=$,Le.isOneDs=!1,Le.disableCredentials=!1,Le[vN]=te,Le.disableBeacon=!O,Le.disableBeaconSync=!P,Le.senderOnCompleteCallBack=de,Le}catch{}return null}(),cn=(ce?ce.SetConfig(kt):(ce=new eRe)[RO](kt,Yt),Et.httpXHROverride),an=Y6([3,1,2],Et.transports),Qn=ce&&ce[HT](an,!1),tr=ce&&ce.getFallbackInst(),lr=(oe=function(Le,de){return Z(tr,Le,de)},ue=function(Le,de){return Z(tr,Le,de,!1)},Qn=K?cn:Qn||cn||tr,pe[HC]=function(Le,de){return Z(Qn,Le,de)},re&&(p=pt),Y6([3,1],Et[eV]));re||(lr=lr.filter(function(Le){return Le!==2})),St=ce&&ce[HT](lr,!0),St=!K&&St||cn,p=(p=(K||Et[eV]||!p)&&St?function(Le,de){return Z(St,Le,de)}:p)||oe,D=Et.disableTelemetry,F=Et[$Y]||Hp,B=Et.isRetryDisabled,V=Et[HY]}))},pe.processTelemetry=function(We,Ge){var Rt,Dt=(Ge=pe._getTelCtx(Ge))[Vl]();try{if(!ot(We,Dt))return;var qt=ut(We,Dt);if(!qt)return;var Yt=l[BI](qt),xt=pe[mg],Et=(ye(Yt),(Rt={})[mP]=Yt,Rt.cnt=0,Rt);xt[e_](Et),mt()}catch(St){On(Dt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ri(St),{exception:Zn(St)})}pe.processNext(We,Ge)},pe.isCompletelyIdle=function(){return!o&&le===0&&pe._buffer[t_]()===0},pe._xhrReadyStateChange=function(We,Ge,Rt){if(!nt(Ge))return Ze(We,Ge,Rt)},pe[$C]=function(We,Ge,Rt){var Dt;if(We===void 0&&(We=!0),!o)try{var qt=pe[mg];if(D)qt[sx]();else if(0<qt[t_]()){var Yt=qt.getItems(),xt=Rt||0,Et=We,St=function(){var kt="getNotifyMgr";return pe.core[kt]?pe.core[kt]():pe.core._notificationManager}();if(St&&St[tV])try{St[tV](xt,Et)}catch(kt){On(pe[Vl](),1,74,"send request notification failed: "+ri(kt),{exception:Zn(kt)})}Dt=Ge?Ge.call(pe,Yt,We):pe[HC](Yt,We)}zt()}catch(kt){qt=IK(),(!qt||9<qt)&&On(pe[Vl](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+ri(kt),{exception:Zn(kt)})}return Dt},pe.getOfflineSupport=function(){var We={getUrl:function(){return w},createPayload:Ae};return We[BI]=st,We.batch=ct,We.shouldProcess=function(Ge){return!!ot(Ge)},We},pe._doTeardown=function(We,Ge){pe.onunloadFlush(),Pw(g,!1),Zt()},pe[Yb]=function(We,Ge,Rt){if(!nt(We))return We=We,Ge=Ge,On(pe[Vl](),2,26,"Failed to send telemetry.",{message:Ge}),void(pe._buffer&&pe._buffer[z1](We))},pe[OO]=function(We,Ge){if(!nt(We)){for(var Rt=We,We=Ge,Dt=[],qt=[],Ge=We.errors.reverse(),Yt=0,xt=Ge;Yt<xt.length;Yt++){var Et=xt[Yt],St=Rt.splice(Et.index,1)[0];(Pt(Et.statusCode)?qt:Dt)[Qg](St)}0<Rt[vo]&&pe[VT](Rt,We[LO]),0<Dt[vo]&&pe[Yb](Dt,Jk(null,["partial success",We[LO],"of",We.itemsReceived].join(" "))),0<qt[vo]&&(wt(qt),On(pe[Vl](),2,40,"Partial success. Delivered: "+Rt[vo]+", Failed: "+Dt[vo]+". Will retry to send "+qt[vo]+" our of "+We[DO]+" items"))}},pe[VT]=function(We,Ge){nt(We)||(We=We,pe._buffer&&pe._buffer[z1](We))},pe._xdrOnLoad=function(We,Ge){if(!nt(Ge))return Be(We,Ge)}}),fe}return Tm(t,e),t.constructEnvelope=function(n,r,o,i){return n=r===n.iKey||wn(r)?n:Tu(Tu({},n),{iKey:r}),(OOe[n.baseType]||qY)(o,n,i)},t}(e0),aV="duration",n_="properties",xh="requestUrl",v1="inst",zv="length",Gp="traceID",Vg="spanID",Td="traceFlags",B1="context",lx="aborted",UI="traceId",jI="spanId",qT="_addHook",gh="core",BO="includeCorrelationHeaders",_N="getAbsoluteUrl",cv="headers",vd="requestHeaders",UO="setRequestHeader",sV="trackDependencyDataInternal",Bv="startTime",Zb="toLowerCase",bN="enableRequestHeaderTracking",KY="enableAjaxErrorStatusText",YY="enableAjaxPerfTracking",ZY="maxAjaxCallsPerView",XY="excludeRequestFromAutoTrackingPatterns",QY="addRequestContext",wN="disableAjaxTracking",JY="ajaxPerfLookupDelay",eZ="disableFetchTracking",tZ="enableResponseHeaderTracking",bh="status",Pv="statusText",Rw="headerMap",xN="openDone",CN="sendDone",Uv="requestSentTime",SN="abortDone",EN="getTraceId",TN="getTraceFlags",Fg="method",IN="errorStatusText",nZ="stateChangeAttached",lV="responseText",_1="responseFinishedTime",kN="CreateTrackItem",rZ="response",uV="getAllResponseHeaders",PN="getPartAProps",vP="perfMark",yw="name",AN="perfTiming",U1="exception",cV="ajaxDiagnosticsMessage",MN="correlationContext",jO="ajaxTotalDuration",dV="eventTraceCtx";function oZ(i,o,n){var r=0,o=i[o],i=i[n];return r=o&&i?Yu(o,i):r}function dv(e,t,l,r,o){var i=0,l=oZ(l,r,o);return i=l?Cg(e,t,Ng(l)):i}function Cg(e,t,n){var r=0;return e&&t&&n&&((e.ajaxPerf=e.ajaxPerf||{})[t]=n,r=1),r}function LOe(e,t){var n,r=e[AN],o=t[n_]||{},i=0,v="Start",l="domainLookup",c="connect",f="request",p="response",g=c+"End",v=f+v,w=p+"End",C="transferSize",T="encodedBodySize",k="decodedBodySize",P="serverTiming";r?(i=(i=(i=(i=(i=(i=(i|=dv(o,"End",r,"redirectStart","End"))|dv(o,l,r,"domainLookupStart","domainLookupEnd"))|dv(o,c,r,"connectStart",g))|dv(o,f,r,v,"requestEnd"))|dv(o,p,r,"responseStart",w))|dv(o,"networkConnect",r,"startTime",g))|dv(o,"sentRequest",r,v,w),l=(l=r[aV])||oZ(r,"startTime",w)||0,i=(i|=Cg(o,aV,l))|Cg(o,"perfTotal",l),(c=r[P])&&(n={},Xn(c,function(O,D){var D=Zk(O.name||""+D),N=n[D]||{};wo(O,function(F,B){!(F!=="name"&&Er(B)||pE(B))||!(B=N[F]?N[F]+";"+B:B)&&Er(B)||(N[F]=B)}),n[D]=N}),i|=Cg(o,P,n)),i=(i=(i|=Cg(o,C,r[C]))|Cg(o,T,r[T]))|Cg(o,k,r[k])):e[vP]&&(i|=Cg(o,"missing",e.perfAttempts)),i&&(t[n_]=o)}var qa,NOe=function(){this[xN]=!1,this.setRequestHeaderDone=!1,this[CN]=!1,this[SN]=!1,this[nZ]=!1},hV=function(){function e(t,n,r,o){var i=this,l=r;i[vP]=null,i.completed=!1,i.requestHeadersSize=null,i[vd]=null,i.responseReceivingDuration=null,i.callbackDuration=null,i[jO]=null,i[lx]=0,i.pageUrl=null,i[xh]=null,i.requestSize=0,i[Fg]=null,i[bh]=null,i[Uv]=null,i.responseStartedTime=null,i[_1]=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new NOe,i.clientFailure=0,i[Gp]=t,i[Vg]=n,i[Td]=o==null?void 0:o.getTraceFlags(),i[dV]=o?((r={})[UI]=o[EN](),r[jI]=o.getSpanId(),r[Td]=o[TN](),r):null,Qi(e,i,function(c){c.getAbsoluteUrl=function(){return c[xh]?bRe(c[xh]):null},c.getPathName=function(){return c[xh]?nM(l,wRe(c[Fg],c[xh])):null},c[kN]=function(f,p,g){var v;return c.ajaxTotalDuration=Math.round(1e3*Yu(c.requestSentTime,c.responseFinishedTime))/1e3,c[jO]<0?null:((v={id:"|"+c[Gp]+"."+c[Vg],target:c[_N]()})[yw]=c.getPathName(),v.type=f,v[Bv]=null,v.duration=c[jO],v.success=200<=+c[bh]&&+c[bh]<400,v.responseCode=+c[bh],v[n_]={HttpMethod:c[Fg]},v=(f=v)[n_],c[lx]&&(v[lx]=!0),c[Uv]&&(f[Bv]=new Date,f[Bv].setTime(c[Uv])),LOe(c,f),p&&0<Qp(c.requestHeaders)[zv]&&(v[vd]=c[vd]),g&&(p=g())&&((g=p[MN])&&(f.correlationContext=g),p[Rw]&&0<Qp(p.headerMap)[zv]&&(v.responseHeaders=p[Rw]),c[IN])&&(400<=c[bh]?((g=p.type)!==""&&g!=="text"||(v.responseText=p.responseText?p[Pv]+" - "+p.responseText:p[Pv]),g==="json"&&(v.responseText=p.response?p[Pv]+" - "+JSON.stringify(p[rZ]):p[Pv])):c[bh]===0&&(v.responseText=p[Pv]||"")),f)},c[PN]=function(){var f,p=null,g=c[dV];return g&&(g[UI]||g[jI])&&(f=(p={})[Lc.TraceExt]=((f={})[Gp]=g[UI],f.parentID=g[jI],f),wn(g[Td])||(f[Td]=g[Td])),p}})}return e.__ieDyn=1,e}(),j1="diagLog",Jg="_ajaxData",Av="fetch",VC="Failed to monitor XMLHttpRequest",iZ=", monitoring data for this ajax call ",Xb=iZ+"may be incorrect.",fV=iZ+"won't be sent.",pV="Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",mV="Failed to add custom defined request context as configured call back may missing a null check.",gV="Failed to calculate the duration of the ",FOe=0;function zOe(){var e=Od();return!e||wn(e.Request)||wn(e.Request[Rf])||wn(e[Av])?null:e[Av]}function BOe(e,t){var n,r=!1,o=(QA()&&(r=!(wn(o=XMLHttpRequest[Rf])||wn(o.open)||wn(o.send)||wn(o.abort))),IK());if(r=o&&o<9?!1:r)try{var i=new XMLHttpRequest,l={xh:[],i:((n={})[t]={},n)},c=(i[Jg]=l,XMLHttpRequest[Rf].open);XMLHttpRequest[Rf].open=c}catch(f){r=!1,$1(e,15,"Failed to enable XMLHttpRequest monitoring, extension is not supported",((o={})[U1]=Zn(f),o))}return r}var vw=function(e,t){return e&&t&&e[Jg]?(e[Jg].i||{})[t]:null},UOe=function(e,t,n){e&&(e=(e[Jg]||{}).xh)&&e.push({n:t,v:n})},$O=function(e,t){var n=!1;return e&&(e=(e[Jg]||{}).xh)&&Xn(e,function(r){if(r.n===t)return n=!0,-1}),n};function $I(e,t){var n="";try{var r=vw(e,t);r&&r[xh]&&(n+="(url: '"+r[xh]+"')")}catch{}return n}function $1(e,t,n,r,o){On(e[j1](),1,t,n,r,o)}function Np(e,t,n,r,o){On(e[j1](),2,t,n,r,o)}function qC(e,t,n){return function(r){var o;$1(e,t,n,((o={ajaxDiagnosticsMessage:$I(r[v1],e._ajaxDataId)})[U1]=Zn(r.err),o))}}function Qb(e,t){return e&&t?nc(e,t):-1}function yV(e,t,n){var r={id:t,fn:n};return e.push(r),{remove:function(){Xn(e,function(o,i){if(o.id===r.id)return e.splice(i,1),-1})}}}function aZ(e,t,n,r){var o=!0;return Xn(t,function(i,l){try{i.fn.call(null,n)===!1&&(o=!1)}catch(c){On(e&&e.logger,1,64,"Dependency "+r+" [#"+l+"] failed: "+ri(c),{exception:Zn(c)},!0)}}),o}function jOe(e,t,n,r,o,i){var l;0<e[zv]&&((l={})[gh]=t,l.xhr=r,l.input=o,l.init=i,l.traceId=n[Gp],l.spanId=n[Vg],l.traceFlags=n[Td],l.context=n[B1]||{},l.aborted=!!n[lx],aZ(t,e,r=l,"listener"),n[Gp]=r[UI],n[Vg]=r[jI],n[Td]=r[Td],n[B1]=r[B1])}var GT="*.blob.core.",$Oe=hm([GT+"windows.net",GT+"chinacloudapi.cn",GT+"cloudapi.de",GT+"usgovcloudapi.net"]),HOe=[/https:\/\/[^\/]*(\.pipe\.aria|aria\.pipe|events\.data|collector\.azure)\.[^\/]+\/(OneCollector\/1|Collector\/3)\.0/i],VOe=hm(((qa={})[ZY]=500,qa[wN]=!1,qa[eZ]=!1,qa[XY]=void 0,qa.disableCorrelationHeaders=!1,qa.distributedTracingMode=1,qa.correlationHeaderExcludedDomains=$Oe,qa.correlationHeaderDomains=void 0,qa.correlationHeaderExcludePatterns=void 0,qa.appId=void 0,qa.enableCorsCorrelation=!1,qa[bN]=!1,qa[tZ]=!1,qa[KY]=!1,qa[YY]=!1,qa.maxAjaxPerfLookupAttempts=3,qa[JY]=25,qa.ignoreHeaders=["Authorization","X-API-Key","WWW-Authenticate"],qa[QY]=void 0,qa.addIntEndpoints=!0,qa)),qOe=function(e){function t(){var n,r,o,i,l,c,f,p,g,v,w,C,T,k,P,O,L,D,N,F,B,V,G,q,z,$,K,te,re,oe,ue=e.call(this)||this;return ue.identifier=t.identifier,ue.priority=120,Qi(t,ue,function(Q,ce){var ae=ce[qT];function fe(){var Ae=xf();oe=r=n=!1,o=Ae&&Ae.host&&Ae.host[Zb](),k=C=v=g=c=l=!1,L=O=!(P={}),F=N=D=w=p=i=null,V=T=f=0,G=[],q=[],B=Bd("ajaxData"),Q._ajaxDataId=B,te=K=$=1,re=z=null}function le(Ae){var Z=!0;return(Ae||z)&&Xn(z,function(ne){if(ne[Zb]()===Ae[Zb]())return Z=!1,-1}),Z}function pe(Ae,Z,ne){ae(pRe(Ae,Z,ne))}function Fe(Ae,Z,ne){var ee,ye,Ie=!1,ge=((Er(Z)?Z:(Z||{}).url||"")||"")[Zb]();return Xn(D,function($e){var nt=$e;Er($e)&&(nt=new RegExp($e)),Ie=Ie||nt.test(ge)}),Ie||(ee=Qb(ge,"?"),ye=Qb(ge,"#"),(ee=ee===-1||ye!==-1&&ye<ee?ye:ee)!==-1&&(ge=ge.substring(0,ee)),wn(Ae)?wn(Z)||(Ie=typeof Z=="object"&&Z[FT]===!0||!!ne&&ne[FT]===!0):Ie=Ae[FT]===!0||ge[FT]===!0,(Ie=!Ie&&ge&&eN(ge)?!0:Ie)?P[ge]||(P[ge]=1):P[ge]&&(Ie=!0)),Ie}function Be(Ae,Z,ne){var ee=!0,ye=r;return wn(Ae)||(ee=ne===!0||!wn(Z)),ye&&ee}function Ze(){var Ae=null;return Ae=!(Ae=Q[gh]&&Q[gh].getTraceCtx?Q[gh].getTraceCtx(!1):Ae)&&p&&p.telemetryTrace?_B(p.telemetryTrace):Ae}function it(Ae,Z){var ne;Z[xh]&&w&&C&&(ne=fm())&&$r(ne.mark)&&(Ae=w+Ae+"#"+ ++FOe,ne.mark(Ae),ne=ne.getEntriesByName(Ae))&&ne[zv]===1&&(Z[vP]=ne[0])}function ot(Ae,Z,ne,ee){var ye=Z[vP],Ie=fm(),ge=$,$e=K,nt=Z[xh],pt=0;(function wt(){try{if(Ie&&ye){pt++;for(var mt=null,zt=Ie.getEntries(),Pt=zt[zv]-1;0<=Pt;Pt--){var Zt=zt[Pt];if(Zt){if(Zt.entryType==="resource")Zt.initiatorType!==Ae||Qb(Zt[yw],nt)===-1&&Qb(nt,Zt[yw])===-1||(mt=Zt);else if(Zt.entryType==="mark"&&Zt[yw]===ye[yw]){Z[AN]=mt;break}if(Zt[Bv]<ye[Bv]-1e3)break}}}!ye||Z[AN]||ge<=pt||Z.async===!1?(ye&&$r(Ie.clearMarks)&&Ie.clearMarks(ye[yw]),Z.perfAttempts=pt,ne()):zd(wt,$e)}catch(We){ee(We)}})()}function ut(Ae){var Z="";try{wn(Ae)||(Z+="(url: '".concat(typeof Ae=="string"?Ae:Ae.url,"')"))}catch(ne){$1(Q,15,"Failed to grab failed fetch diagnostics message",{exception:Zn(ne)})}return Z}function st(Ae,Z,ne,ee,ye,Ie){function ge($e,nt,pt){pt=pt||{},pt.fetchDiagnosticsMessage=ut(ne),nt&&(pt.exception=Zn(nt)),Np(Q,$e,gV+"fetch call"+fV,pt)}ye&&(ye[_1]=BT(),ye[bh]=Z,ot(Av,ye,function(){var $e,nt=ye[kN]("Fetch",l,Ie);try{N&&($e=N({status:Z,request:ne,response:ee}))}catch{Np(Q,104,mV)}nt?($e!==void 0&&(nt[n_]=Tu(Tu({},nt.properties),$e)),$e=ye[PN](),ct(q,Q[gh],ye,nt,null,$e)):ge(14,null,{requestSentTime:ye[Uv],responseFinishedTime:ye[_1]})},function($e){ge(18,$e,null)}))}function ct(Ae,Z,ne,ee,ye,Ie){var ge,$e=!0;0<Ae[zv]&&((ge={item:ee})[n_]=ye,ge.sysProperties=Ie,ge.context=ne?ne[B1]:null,ge.aborted=!!ne&&!!ne[lx],$e=aZ(Z,Ae,ge,"initializer")),$e&&Q[sV](ee,ye,Ie)}fe(),Q.initialize=function(Ae,Z,ne,ee){var ye,Ie;!Q.isInitialized()&&(ce.initialize(Ae,Z,ne,ee),F=yy(Bd("ajax"),Z&&Z.evtNamespace&&Z.evtNamespace()),Q[qT](Za(Ae,function(ge){ge=Oh(null,ge.cfg,Q[gh]),i=ge.getExtCfg(t.identifier,VOe),te=i.distributedTracingMode,l=i[bN],c=i[KY],C=i[YY],T=i[ZY],D=[].concat(i[XY]||[],i.addIntEndpoints!==!1?HOe:[]),N=i[QY],v=te===0||te===1,g=te===1||te===2,C&&(w=B),O=!!i[wN],$=i.maxAjaxPerfLookupAttempts,K=i[JY],z=i.ignoreHeaders,re=i.appId})),BOe(Q,B)&&Q[qT](Za(i,function(){O=!!i[wN],l=i[bN],O||r||(pe(XMLHttpRequest,"open",{ns:F,req:function(ge,$e,nt,pt){var wt,mt,zt,Pt,Zt,We,Ge;O||(ge=ge[v1],wt=vw(ge,B),!Fe(ge,nt)&&Be(ge,wt,!0)&&(wt&&wt.xhrMonitoringState[xN]||(Pt=ge,$e=$e,nt=nt,pt=pt,Zt=Ze(),We=Zt&&Zt[EN]()||$g(),Ge=Og($g(),0,16),Pt=(Pt=Pt[Jg]=Pt[Jg]||{xh:[],i:{}}).i=Pt.i||{},(We=Pt[B]=Pt[B]||new hV(We,Ge,Q[j1](),(Pt=Q.core)==null?void 0:Pt.getTraceCtx()))[Td]=Zt&&Zt[TN](),We[Fg]=$e,We[xh]=nt,We.xhrMonitoringState[xN]=!0,We[vd]={},We.async=pt,We[IN]=c,wt=We),mt=ge,(zt=wt).xhrMonitoringState[nZ]=tm(mt,"readystatechange",function(){var Rt,Dt,qt;try{mt&&mt.readyState===4&&Be(mt,zt)&&((qt=vw(Dt=mt,B))[_1]=BT(),qt[bh]=Dt[bh],ot("xmlhttprequest",qt,function(){try{var Et,St=qt[kN]("Ajax",l,function(){(tr={statusText:Dt[Pv]})[Rw]=null,tr[MN]=function(lr){try{var Le=lr[uV]();if(Le!==null&&Qb(Le[Zb](),ki[8])!==-1)return B4(lr.getResponseHeader(ki[0]))}catch(de){Np(Q,18,pV,((Le={})[cV]=$I(lr,B),Le[U1]=Zn(de),Le))}}(Dt),tr.type=Dt.responseType,tr[lV]=function(lr){try{var Le=lr.responseType;if(Le===""||Le==="text")return lr[lV]}catch{}return null}(Dt),tr.response=Dt[rZ];var an,Qn,tr;return k&&(an=Dt[uV]())&&(an=us(an).split(/[\r\n]+/),Qn={},Xn(an,function(de){var de=de.split(": "),Le=de.shift(),de=de.join(": ");le(Le)&&(Qn[Le]=de)}),tr[Rw]=Qn),tr}),kt=void 0;try{N&&(kt=N({status:Dt[bh],xhr:Dt}))}catch{Np(Q,104,mV)}St?(kt!==void 0&&(St[n_]=Tu(Tu({},St.properties),kt)),Et=qt[PN](),ct(q,Q[gh],qt,St,null,Et)):xt(null,{requestSentTime:qt[Uv],responseFinishedTime:qt[_1]})}finally{try{var cn=(Dt[Jg]||{i:{}}).i||{};cn[B]&&(cn[B]=null)}catch{}}},function(Et){xt(Et,null)}))}catch(Et){var Yt=Zn(Et);Yt&&Qb(Yt[Zb](),"c00c023f")!==-1||$1(Q,16,VC+" 'readystatechange' event handler"+Xb,((Rt={})[cV]=$I(mt,B),Rt[U1]=Yt,Rt))}function xt(Et,St){St=St||{},St.ajaxDiagnosticsMessage=$I(Dt,B),Et&&(St.exception=Zn(Et)),Np(Q,14,gV+"ajax call"+fV,St)}},F)))},hkErr:qC(Q,15,VC+".open"+Xb)}),pe(XMLHttpRequest,"send",{ns:F,req:function(ge,$e){var nt;O||Be(ge=ge[v1],nt=vw(ge,B))&&!nt.xhrMonitoringState[CN]&&(it("xhr",nt),nt[Uv]=BT(),Q[BO](nt,void 0,void 0,ge),nt.xhrMonitoringState[CN]=!0)},hkErr:qC(Q,17,VC+Xb)}),pe(XMLHttpRequest,"abort",{ns:F,req:function(ge){O||Be(ge=ge[v1],ge=vw(ge,B))&&!ge.xhrMonitoringState[SN]&&(ge[lx]=1,ge.xhrMonitoringState[SN]=!0)},hkErr:qC(Q,13,VC+".abort"+Xb)}),pe(XMLHttpRequest,"setRequestHeader",{ns:F,req:function(ge,$e,nt){var pt;O||(ge=ge[v1],(pt=vw(ge,B))&&Be(ge,pt)&&(UOe(ge,$e,nt),l)&&le($e)&&pt&&(pt[vd][$e]=nt))},hkErr:qC(Q,71,VC+".setRequestHeader"+Xb)}),r=!0)})),(ne=zOe())&&(ye=Od(),Ie=ne.polyfill,Q[qT](Za(i,function(){L=!!i[eZ],k=i[tZ],L||n?Ie&&!oe&&(ae(JL(ye,Av,{ns:F,req:function(ge,$e,nt){Fe(null,$e,nt)}})),oe=!0):(ae(JL(ye,Av,{ns:F,req:function(ge,$e,nt){var pt,wt;L||!n||Fe(null,$e,nt)||Ie&&r||(pt=ge.ctx(),wt=function(mt,zt){var Pt=Ze(),Zt=Pt&&Pt[EN]()||$g(),We=Og($g(),0,16),We=new hV(Zt,We,Q[j1](),(Zt=Q.core)==null?void 0:Zt.getTraceCtx());We[Td]=Pt&&Pt[TN](),We[Uv]=BT(),We[IN]=c,Zt=mt instanceof Request?(mt||{}).url||"":mt,Zt===""&&(Pt=xf())&&Pt.href&&(Zt=nK(Pt.href,"#")[0]),We[xh]=Zt,Pt="GET",zt&&zt[Fg]?Pt=zt[Fg]:mt&&mt instanceof Request&&(Pt=mt[Fg]),We[Fg]=Pt;var Ge={};return l&&new Headers((zt?zt[cv]:0)||mt instanceof Request&&mt[cv]||{}).forEach(function(Rt,Dt){le(Dt)&&(Ge[Dt]=Rt)}),We[vd]=Ge,it(Av,We),We}($e,nt),($e=Q[BO](wt,$e,nt))!==nt&&ge.set(1,$e),pt.data=wt)},rsp:function(ge,$e){var nt;L||(nt=ge.ctx().data)&&(ge.rslt=ge.rslt.then(function(pt){return st(0,(pt||{})[bh],$e,pt,nt,function(){(mt={statusText:(pt||{})[Pv]})[Rw]=null,mt[MN]=function(zt){if(zt&&zt[cv])try{return B4(zt[cv].get(ki[0]))}catch(Pt){Np(Q,18,pV,((zt={fetchDiagnosticsMessage:ut(zt)})[U1]=Zn(Pt),zt))}}(pt);var wt,mt;return k&&pt&&(wt={},pt.headers.forEach(function(zt,Pt){le(Pt)&&(wt[Pt]=zt)}),mt[Rw]=wt),mt}),pt}).catch(function(pt){throw st(0,0,$e,null,nt,null,pt.message||Zn(pt)),pt}))},hkErr:qC(Q,15,"Failed to monitor Window.fetch"+Xb)},!0,Y7())),n=!0)})),Ie)&&(ye[Av].polyfill=Ie),ee=Q[gh].getPlugin(iM))&&(p=ee.plugin[B1])},Q._doTeardown=function(){fe()},Q.trackDependencyData=function(Ae,Z){ct(q,Q[gh],null,Ae,Z)},Q[BO]=function(Ae,Z,ne,ee){var ye,Ie,ge,$e,nt=Q._currentWindowHost||o;return jOe(G,Q[gh],Ae,ee,Z,ne),Z||Z===""?(z4(i,Ae[_N](),nt)&&(ne=ne||{},Z=new Headers(ne[cv]||Z instanceof Request&&Z[cv]||{}),v&&(ye="|"+Ae[Gp]+"."+Ae[Vg],Z.set(ki[3],ye),l)&&(Ae[vd][ki[3]]=ye),(Ie=re||p&&p.appId())&&(Z.set(ki[0],ki[2]+Ie),l)&&(Ae[vd][ki[0]]=ki[2]+Ie),g&&(wn(ge=Ae[Td])&&(ge=1),$e=p4(f4(Ae[Gp],Ae[Vg],ge)),Z.set(ki[4],$e),l)&&(Ae[vd][ki[4]]=$e),ne[cv]=Z),ne):ee?(z4(i,Ae[_N](),nt)&&(v&&($O(ee,ki[3])?Np(Q,71,"Unable to set ["+ki[3]+"] as it has already been set by another instance"):(ye="|"+Ae[Gp]+"."+Ae[Vg],ee[UO](ki[3],ye),l&&(Ae[vd][ki[3]]=ye))),(Ie=re||p&&p.appId())&&($O(ee,ki[0])?Np(Q,71,"Unable to set ["+ki[0]+"] as it has already been set by another instance"):(ee[UO](ki[0],ki[2]+Ie),l&&(Ae[vd][ki[0]]=ki[2]+Ie))),g)&&(wn(ge=Ae[Td])&&(ge=1),$O(ee,ki[4])?Np(Q,71,"Unable to set ["+ki[4]+"] as it has already been set by another instance"):($e=p4(f4(Ae[Gp],Ae[Vg],ge)),ee[UO](ki[4],$e),l&&(Ae[vd][ki[4]]=$e))),ee):void 0},Q[sV]=function(Ae,Z,ne){T===-1||f<T?(te!==2&&te!==1||typeof Ae.id!="string"||Ae.id[Ae.id[zv]-1]==="."||(Ae.id+="."),wn(Ae[Bv])&&(Ae[Bv]=new Date),Ae=wg(Ae,Jv.dataType,Jv.envelopeType,Q[j1](),Z,ne),Q[gh].track(Ae)):f===T&&$1(Q,55,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0),++f},Q.addDependencyListener=function(Ae){return yV(G,V++,Ae)},Q.addDependencyInitializer=function(Ae){return yV(q,V++,Ae)}}),ue}return Tm(t,e),t.prototype.processTelemetry=function(n,r){this.processNext(n,r)},t.prototype.addDependencyInitializer=function(n){return null},t.identifier="AjaxDependencyPlugin",t}(e0),GOe=function(){},WOe=function(){this.id="browser",this.deviceClass="Browser"},KOe="3.3.0",YOe=function(e,t){var n=this,r=Za(e,function(){var o=e.sdkExtension;n.sdkVersion=(o?o+"_":"")+"javascript:"+KOe});t&&t.add(r)},ZOe=function(){},_P="sessionManager",bP="update",HI="isUserCookieSet",wP="isNewUser",HO="getTraceCtx",RN="telemetryTrace",sZ="applySessionContext",lZ="applyApplicationContext",uZ="applyDeviceContext",cZ="applyOperationContext",dZ="applyUserContext",hZ="applyOperatingSystemContxt",fZ="applyLocationContext",pZ="applyInternalContext",Mv="accountId",VI="getSessionId",IB="namePrefix",XOe="sessionCookiePostfix",mZ="userCookiePostfix",xP="idLength",kB="getNewId",CP="length",_w="automaticSession",bw="authenticatedId",GC="acquisitionDate",WT="renewalDate",H1="join",WC="cookieSeparator",VO="authUserCookieName",QOe="ai_session",JOe=864e5,eDe=18e5,tDe=6e4,gZ=function(){},nDe=function(){function e(t,n,r){var o,i,l,c,f=A_(n),p=lB(n);Qi(e,this,function(g){var v=Za(t=t||{},function(T){l=t.sessionExpirationMs||JOe,c=t.sessionRenewalMs||eDe;var k=t.sessionCookiePostfix||t[IB]||"";o=QOe+k});function w(T,k){var P=!1,O=", session will be reset",L=k.split("|");if(2<=L[CP])try{var D=+L[1]||0,N=+L[2]||0;isNaN(D)||D<=0?On(f,2,27,"AI session acquisition date is 0"+O):isNaN(N)||N<=0?On(f,2,27,"AI session renewal date is 0"+O):L[0]&&(T.id=L[0],T[GC]=D,T[WT]=N,P=!0)}catch(F){On(f,1,9,"Error parsing ai_session value ["+(k||"")+"]"+O+" - "+ri(F),{exception:Zn(F)})}return P}function C(O,k){var L=O[GC],P=(O[WT]=k,c),D=L+l-k,O=[O.id,L,k],L=0,L=D<P?D/1e3:P/1e3,D=t.cookieDomain||null;p.set(o,O[H1]("|"),0<l?L:null,D),i=k}r&&r.add(v),g[_w]=new gZ,g[bP]=function(){var T,k,P=jf(),O=!1,L=g[_w];!(O=L.id?O:!function(D){var N=!1,F=p.get(o);return(F&&$r(F.split)||(F=uY(f,o)))&&(N=w(D,F)),N||D.id}(L))&&0<l&&(T=P-L[GC],k=P-L[WT],O=(O=(O=T<0||k<0)||l<T)||c<k),O?(T=P,k=t[kB]||rB,g.automaticSession.id=k(t[xP]||22),g[_w][GC]=T,C(g[_w],T),oM()||On(f,2,0,"Browser does not support local storage. Session durations will be inaccurate.")):(!i||tDe<P-i)&&C(L,P)},g.backup=function(){var T,k,P=g[_w];T=P.id,k=P[GC],P=P[WT],cY(f,o,[T,k,P][H1]("|"))}})}return e.__ieDyn=1,e}(),rDe=function(e,t,n,r){this.traceID=e||$g(),this.parentID=t,e=xf(),!n&&e&&e.pathname&&(n=e.pathname),this.name=cs(r,n)};function vV(e){return!(typeof e!="string"||!e||e.match(/,|;|=| |\|/))}var oDe=function(){function e(t,n,r){this.isNewUser=!1,this.isUserCookieSet=!1;var o,i=A_(n),l=lB(n);Qi(e,this,function(c){Qo(c,"config",{g:function(){return t}});var f=Za(t,function(){var w=t[mZ]||"",w=(o=e.userCookieName+w,l.get(o)),w=(w&&(c[wP]=!1,0<(w=w.split(e[WC]))[CP])&&(c.id=w[0],c[HI]=!!c.id),c.id||(c.id=p(),v(g(c.id)[H1](e[WC])),w=(t[IB]||"")+"ai_session",PRe(i,w)),c[Mv]=t[Mv]||void 0,l.get(e[VO]));w&&((w=(w=decodeURI(w)).split(e[WC]))[0]&&(c[bw]=w[0]),1<w[CP])&&w[1]&&(c[Mv]=w[1])});function p(){var w=t||{};return(w[kB]||rB)(w[xP]?t[xP]:22)}function g(w){var C=Px(new Date);return c.accountAcquisitionDate=C,c[wP]=!0,[w,C]}function v(w){c[HI]=l.set(o,w,31536e3)}r&&r.add(f),c.setAuthenticatedUserContext=function(w,C,T){T===void 0&&(T=!1),!vV(w)||C&&!vV(C)?On(i,2,60,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0):(c[bw]=w,w=c[bw],C&&(c[Mv]=C,w=[c[bw],c.accountId][H1](e[WC])),T&&l.set(e[VO],encodeURI(w)))},c.clearAuthenticatedUserContext=function(){c[bw]=null,c[Mv]=null,l.del(e[VO])},c[bP]=function(w){c.id===w&&c[HI]||v(g(w||p())[H1](e[WC]))}})}return e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),KT="ext",YT="tags";function Jb(e,t){e&&e[t]&&Qp(e[t])[CP]===0&&delete e[t]}function _V(){return null}var vu,qO,Fp,ZT,KC,bV,XT,iDe=function(){function e(t,n,r,o){var i=this,l=t.logger;Qi(e,this,function(c){var f,p,g;c.appId=_V,c[VI]=_V,c.application=new GOe,c.internal=new YOe(n,o),YA()&&(c[_P]=new nDe(n,t,o),c.device=new WOe,c.location=new ZOe,c.user=new oDe(n,t,o),p=f=void 0,r&&(f=r.getTraceId(),p=r.getSpanId(),g=r.getName()),c[RN]=new rDe(f,p,g,l),c.session=new gZ),c[VI]=function(){var v=c.session;return v&&Er(v.id)||(v=(c[_P]||{})[_w])&&Er(v.id)?v.id:null},c[sZ]=function(v,w){Ui(_u(v.ext,Lc.AppExt),"sesId",c[VI](),Er)},c[hZ]=function(v,w){Ui(v.ext,Lc.OSExt,c.os)},c[lZ]=function(v,w){var C=c.application;C&&(Ui(v=_u(v,YT),ji.applicationVersion,C.ver,Er),Ui(v,ji.applicationBuild,C.build,Er))},c[uZ]=function(v,w){var C=c.device;C&&(Ui(v=_u(_u(v,KT),Lc.DeviceExt),"localId",C.id,Er),Ui(v,"ip",C.ip,Er),Ui(v,"model",C.model,Er),Ui(v,"deviceClass",C.deviceClass,Er))},c[pZ]=function(v,w){var C,T=c.internal;T&&(Ui(C=_u(v,YT),ji.internalAgentVersion,T.agentVersion,Er),Ui(C,ji.internalSdkVersion,cs(l,T.sdkVersion,64),Er),v.baseType!==kS.dataType&&v.baseType!==Xg.dataType||(Ui(C,ji.internalSnippet,T.snippetVer,Er),Ui(C,ji.internalSdkSrc,T.sdkSrc,Er)))},c[fZ]=function(v,w){var C=i.location;C&&Ui(_u(v,YT,[]),ji.locationIp,C.ip,Er)},c[cZ]=function(v,w){var C=c[RN];C&&(Ui(v=_u(_u(v,KT),Lc.TraceExt,{traceID:void 0,parentID:void 0}),"traceID",C.traceID,Er,wn),Ui(v,"name",C.name,Er,wn),Ui(v,"parentID",C.parentID,Er,wn))},c.applyWebContext=function(v,w){var C=i.web;C&&Ui(_u(v,KT),Lc.WebExt,C)},c[dZ]=function(v,w){var C=c.user;C&&(Ui(_u(v,YT,[]),ji.userAccountId,C[Mv],Er),Ui(v=_u(_u(v,KT),Lc.UserExt),"id",C.id,Er),Ui(v,"authId",C[bw],Er))},c.cleanUp=function(v,w){v=v.ext,v&&(Jb(v,Lc.DeviceExt),Jb(v,Lc.UserExt),Jb(v,Lc.WebExt),Jb(v,Lc.OSExt),Jb(v,Lc.AppExt),Jb(v,Lc.TraceExt))}})}return e.__ieDyn=1,e}(),ew=null,aDe=Zx(((vu={})[Mv]=ew,vu.sessionRenewalMs=18e5,vu.samplingPercentage=100,vu.sessionExpirationMs=864e5,vu.cookieDomain=ew,vu.sdkExtension=ew,vu.isBrowserLinkTrackingEnabled=!1,vu.appId=ew,vu[VI]=ew,vu[IB]=qO,vu[XOe]=qO,vu[mZ]=qO,vu[xP]=22,vu[kB]=ew,vu)),sDe=function(e){function t(){var n,r,o,i,l,c=e.call(this)||this;return c.priority=110,c.identifier=iM,Qi(t,c,function(f,p){function g(){l=!(i=o=r=n=null)}g(),Qo(f,"context",{g:function(){return i}}),f.initialize=function(v,w,C,T){var k,P,O;p.initialize(v,w,C,T),k=v,P=f.identifier,O=f.core,f._addHook(Za(k,function(){var L=Oh(null,k,O);k.storagePrefix&&xB(k.storagePrefix),l=k.disableUserInitMessage!==!1,n=L.getExtCfg(P,aDe),f._extConfig=n})),o=O[HO](!1),i=new iDe(O,n,o,f._unloadHooks),r=_B(f.context[RN],o),O.setTraceCtx(r),f.context.appId=function(){var L=O.getPlugin(yY);return L?L.plugin._appId:null}},f.processTelemetry=function(v,w){var C,T,k,P;wn(v)||(w=f._getTelCtx(w),v.name===Xg.envelopeType&&w.diagLog().resetInternalMessageCount(),(k=i||{}).session&&typeof i.session.id!="string"&&k[_P]&&k[_P][bP](),(C=k.user)&&!C[HI]&&C[bP](k.user.id),k=w,_u(T=v,"tags",[]),_u(T,"ext",{}),(P=f.context)[sZ](T,k),P[lZ](T,k),P[uZ](T,k),P[cZ](T,k),P[dZ](T,k),P[hZ](T,k),P.applyWebContext(T,k),P[fZ](T,k),P[pZ](T,k),P.cleanUp(T,k),C&&C[wP]&&(C[wP]=!1,l||(P=new kS(72,(Xf()||{}).userAgent||""),_Me(w.diagLog(),1,P))),f.processNext(v,w))},f._doTeardown=function(v,w){v=(v||{}).core(),v&&v[HO]&&v[HO](!1)===r&&v.setTraceCtx(o),g()}}),c}return Tm(t,e),t.__ieDyn=1,t}(e0),lDe=sDe,yZ="AuthenticatedUserContext",t0="track",ON="snippet",uDe="getCookieMgr",cDe="startTrackPage",dDe="stopTrackPage",GO="flush",hDe="startTrackEvent",fDe="stopTrackEvent",pDe="addTelemetryInitializer",wV="pollInternalLogs",WO="getPlugin",KO="evtNamespace",mDe=t0+"Event",gDe=t0+"Trace",yDe=t0+"Metric",vDe=t0+"PageView",_De=t0+"Exception",bDe=t0+"DependencyData",wDe="set"+yZ,xDe="clear"+yZ,CDe="https://js.monitor.azure.com/scripts/b/ai.config.1.cfg.json",YO="version",hv="queue",qI="connectionString",b1="instrumentationKey",xV="instrumentationkey",GI="userOverrideEndpointUrl",WI="endpointUrl",CV="ingestionendpoint",YC="onunloadFlush",md="context",SV="addHousekeepingBeforeUnload",ZO="sendMessage",SDe="updateSnippetDefinitions",EV=[ON,"dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],vZ="iKeyUsage",_Z="CdnUsage",bZ="SdkLoaderVer",QT=void 0,EDe={samplingRate:100,maxSendNumber:1},TDe={monthInterval:3,daysOfMonth:[28]},JT={disabled:!0,limit:ff(EDe),interval:ff(TDe)},IDe=((Fp={})[qI]=QT,Fp[WI]=QT,Fp[b1]=QT,Fp[GI]=QT,Fp.diagnosticLogInterval=nP(kDe,1e4),Fp.featureOptIn=((ZT={})[vZ]={mode:3},ZT[_Z]={mode:2},ZT[bZ]={mode:2},ZT),Fp.throttleMgrCfg=ff(((KC={})[109]=ff(JT),KC[106]=ff(JT),KC[111]=ff(JT),KC[110]=ff(JT),KC)),Fp.extensionConfig=ff(((bV={}).AppInsightsCfgSyncPlugin=ff({cfgUrl:CDe,syncMode:2}),bV)),Fp);function kDe(e){return e&&0<e}var PDe=function(){function e(t){var n,r,o,i,l,c,f,p,g,v,w,C,T,k,P=this;Qi(e,this,function(O){D(),Qo(O,"config",{g:function(){return p}}),Xn(["pluginVersionStringArr","pluginVersionString"],function(B){Qo(O,B,{g:function(){return f?f[B]:null}})}),i=""+(t.sv||t[YO]||""),t[hv]=t[hv]||[],t[YO]=t[YO]||2;var L=Ud(t.config||{},IDe);function D(){l=Bd("AISKU"),w=i=o=r=n=c=null,k=T=C=!1,v=new pOe}function N(){c&&(dRe(null,c),hRe(null,c))}function F(B){f.addUnloadHook(B)}p=L.cfg,g=new aOe,Qo(O,"appInsights",{g:function(){return g}}),r=new lDe,n=new qOe,o=new DOe,f=new QMe,Qo(O,"core",{g:function(){return f}}),F(Za(L,function(){var B,V,G=p[qI];function q(){return L1(function(z,$){mm(G,function(K){var te=K&&K.value,re=null;!K.rejected&&te&&(re=U4(p[qI]=te)),z(re)})})}Ex(G)&&(B=L1(function(z,$){q().then(function(K){var te=p[b1],te=K&&K[xV]||te;z(te)}).catch(function(K){z(null)})}),wn(V=p[GI])&&(V=L1(function(z,$){q().then(function(re){var te=p[WI],re=re&&re[CV];z(re?re+tx:te)}).catch(function(K){z(null)})})),p[b1]=B,p[WI]=V),Er(G)&&(V=(B=U4(G))[CV],p.endpointUrl=p[GI]||V+tx,p[b1]=B[xV]||p[b1]),p.endpointUrl=p[GI]||p[WI]})),O[ON]=t,O[GO]=function(B,V){var G;return aP(f,function(){return"AISKU.flush"},function(){B&&!V&&(G=gm(function($){V=$}));function q(){--z===0&&V()}var z=1;Xn(f.getChannels(),function($){$&&(z++,$[GO](B,q))}),q()},null,B=B===void 0?!0:B),G},O[YC]=function(B){B===void 0&&(B=!0),Xn(f.getChannels(),function(V){V[YC]?V[YC]():V[GO](B)})},O.loadAppInsights=function(B,V,G){return(B=B===void 0?!1:B)&&PPe("Legacy Mode is no longer supported"),aP(O.core,function(){return"AISKU.loadAppInsights"},function(){f.initialize(p,[o,r,n,g,v],V,G),Qo(O,"context",{g:function(){return r[md]}}),w=w||new MRe(f);var q,z=ADe();z&&O[md]&&(O[md].internal.sdkSrc=z),(q=O[ON])&&(z="",wn(i)||(z+=i),O[md]&&O[md].internal&&(O[md].internal.snippetVer=z||"-"),wo(O,function($,K){Er($)&&!$r(K)&&$&&$[0]!=="_"&&Jl(EV,$)===-1&&q[$]!==K&&(q[$]=K)})),O.emptyQueue(),O[wV](),O[SV](O),F(Za(L,function(){var $=!1;p.throttleMgrCfg[109]&&($=!p.throttleMgrCfg[109].disabled),!w.isReady()&&p.extensionConfig&&p.extensionConfig[v.identifier]&&$&&w.onReadyState(!0),C||p[qI]||!YR(vZ,p)||(w[ZO](106,"See Instrumentation key support at aka.ms/IkeyMigrate"),C=!0),!T&&O[md].internal.sdkSrc&&O[md].internal.sdkSrc.indexOf("az416426")!=-1&&YR(_Z,p)&&(w[ZO](110,"See Cdn support notice at aka.ms/JsActiveCdn"),T=!0),!k&&parseInt(i)<6&&YR(bZ,p)&&(w[ZO](111,"An updated Sdk Loader is available, see aka.ms/SnippetVer"),k=!0)}))}),O},O[SDe]=function(B){wAe(B,O,function(V){return V&&Jl(EV,V)===-1})},O.emptyQueue=function(){try{if(bo(O.snippet[hv])){for(var B=O.snippet[hv].length,V=0;V<B;V++)(0,O.snippet[hv][V])();O.snippet[hv]=void 0,delete O.snippet[hv]}}catch(G){G&&$r(G.toString)&&G.toString()}},O[SV]=function(B){var V,G;(YA()||W7())&&(G=!(V=function(){var q;B[YC](!1),$r(O.core[WO])&&(q=P.core[WO](iM))&&(q=q.plugin)&&q[md]&&q[md]._sessionManager&&q[md]._sessionManager.backup()}),c=c||yy(l,f[KO]&&f[KO]()),F(Za(p,function($){var $=$.cfg,z=B.appInsights,z=Oh(null,$,z.core).getExtCfg(z.identifier||vY),$=(N(),$.disablePageUnloadEvents);z.disableFlushOnBeforeUnload||(cRe(V,$,c)&&(G=!0),G=!!QL(V,$,c)||G)||UAe()||On(f.logger,1,19,"Could not add handler for beforeunload and pagehide"),G||z.disableFlushOnUnload||QL(V,$,c)})))},O.getSender=function(){return o},O.unload=function(B,V,G){var q,z=!1;return B&&!V&&(q=gm(function($){V=$})),O[YC](B),N(),f.unload&&f.unload(B,function($){z||(z=!0,D(),V&&V($))},G),q},h1(O,g,[uDe,mDe,vDe,"trackPageViewPerformance",_De,"_onerror",gDe,yDe,cDe,dDe,hDe,fDe]),h1(O,function(){return n},[bDe,"addDependencyListener","addDependencyInitializer"]),h1(O,f,[pDe,wV,"stopPollingInternalLogs",WO,"addPlugin",KO,"addUnloadCb","getTraceCtx","updateCfg","onCfgChange"]),h1(O,function(){var B=r[md];return B?B.user:null},[wDe,xDe])})}return e.prototype.addDependencyInitializer=function(t){return null},e}();function ADe(){if(!XT){var e=null;try{var t=(document||{}).currentScript;t&&(e=t.src)}catch{}if(e){try{var n,r=e.toLowerCase();r&&(n="",Xn(["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"],function(o,i){if(nc(r,o)!==-1)return n="cdn"+(i+1),nc(r,"/scripts/")===-1&&(nc(r,"/next/")!==-1?n+="-next":nc(r,"/beta/")!==-1&&(n+="-beta")),XT=n+"",-1}))}catch{}XT=e}}return XT}var tw,MDe=function(){function e(t){this.options=t,!this.options.disableTelemetry&&Mh.appInsightsKey&&(this.appInsights=new PDe({config:{instrumentationKey:Mh.appInsightsKey,disableExceptionTracking:!0,disableAjaxTracking:!0,isCookieUseDisabled:!0,maxBatchInterval:5e3}}),this.appInsights.loadAppInsights(),this.appInsights.addTelemetryInitializer(function(n){n.tags[ji.applicationVersion]=MA.getFullVersion()}))}return e.prototype.trackEvent=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackEvent(t,n)},e.prototype.setAuthenticatedUserContext=function(t,n){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.setAuthenticatedUserContext(t,n)},e.prototype.trackException=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.trackException(t)},e.prototype.flush=function(t){!this.options.disableTelemetry&&this.appInsights&&this.appInsights.flush(t)},e}(),RDe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TV=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.copyrightMessage=void 0,n.copyrightContent=void 0,n.customAttribution=void 0,n.showFeedbackLink=!0,n.showLogo=!0,n}return RDe(t,e),t}(Hi),ODe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),DDe=function(e){function t(n){var r=e.call(this)||this;return r.textAttribution=function(o){return[r.options.copyrightMessage,r.options.customAttribution].filter(function(i){return i}).join("")},r.updateFeedbackLink=function(){var o,i;r.feedbackAnchor&&r.map&&(o=(i=r.map.getCamera()).center,i=i.zoom,r.feedbackAnchor.href="".concat(t.feedbackLink,"&cp=").concat(o[1],"~").concat(o[0],"&lvl=").concat(i+1))},r.options=new TV().merge(n),r}return ODe(t,e),t.prototype.onAdd=function(n){return this.map=n,this.container=this.buildContainer(n,Qs.auto),this.container.className="map-copyright without-bg",this.copyrightDiv=this.buildCopyrightDiv(),this.copyrightDiv.className="azure-map-copyright",this.container.appendChild(this.copyrightDiv),this.options.showFeedbackLink&&this.addRemoveFeedbackDiv(!0),this.container},t.prototype.onRemove=function(){e.prototype.onRemove.call(this),delete this.container},t.prototype.setOptions=function(i){var r,o=this,i=new TV().merge(this.options,i);i.copyrightMessage===this.options.copyrightMessage&&i.customAttribution===this.options.customAttribution||(this.copyrightDiv.innerText=this.textAttribution(i)),i.copyrightContent!==this.options.copyrightContent&&(this.options.copyrightContent&&(r=Array.from(this.copyrightDiv.children).find(function(l){return l===o.options.copyrightContent}),this.copyrightDiv.removeChild(r)),0<this.copyrightDiv.childNodes.length?this.copyrightDiv.insertBefore(i.copyrightContent,this.copyrightDiv.childNodes[0]):this.copyrightDiv.appendChild(i.copyrightContent),this.options.copyrightContent=i.copyrightContent),!i.showFeedbackLink&&this.feedbackAnchor?this.addRemoveFeedbackDiv(!1):i.showFeedbackLink&&!this.feedbackAnchor&&this.addRemoveFeedbackDiv(!0),this.options=i},t.prototype.getDefaultAttributions=function(){var n=new Date().getFullYear(),r=["©".concat(n," TomTom")];return this.options.showLogo||r.push("©".concat(n," Microsoft")),r},t.prototype.buildCopyrightDiv=function(){var n=document.createElement("div");return n.innerText=this.textAttribution(this.options)||"",n},t.prototype.buildFeedbackLink=function(){var n=document.createElement("a");return n.setAttribute("alt","Provide Map Data Feedback"),n.setAttribute("aria-label","Provide Map Data Feedback"),n.innerText="Feedback",n.href=t.feedbackLink,n.target="_blank",n.rel="noopener",n.className="azure-map-feedback-text",n},t.prototype.addRemoveFeedbackDiv=function(n){n?(this.feedbackAnchor=this.buildFeedbackLink(),this.feedbackTooltip=Js("Provide Map Data Feedback"),this.container.appendChild(this.feedbackAnchor),this.container.appendChild(this.feedbackTooltip),aa(this.feedbackTooltip,this.feedbackAnchor),(n=(n=this.map)==null?void 0:n.events)!=null&&n.add("moveend",this.updateFeedbackLink)):(this.feedbackAnchor.remove(),this.feedbackTooltip.remove(),delete this.feedbackTooltip,delete this.feedbackAnchor,(n=(n=this.map)==null?void 0:n.events)!=null&&n.remove("moveend",this.updateFeedbackLink))},t.feedbackLink="https://aka.ms/azuremaps-feedback?feedbackep=UrlAzureMapsWebSdk",t}(Yc),LDe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IV=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.showLogo=!0,n}return LDe(t,e),t}(Hi),NDe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FDe=function(e){function t(n){var r=e.call(this)||this;return r.map=null,r._onResize=function(){var o=((o=(o=r.map)==null?void 0:o.getMapContainer())==null?void 0:o.clientWidth)||0;r._setVisiblity(r.options.showLogo&&t.CONTAINER_MIN_WIDTH<=o)},r.options=new IV().merge(n),r}return NDe(t,e),t.prototype.onAdd=function(n){return this.map=n,this.container=this.buildContainer(n,Qs.auto),this.container.className="map-logo-control",(n=this.map)!=null&&n.events.add("resize",this._onResize),this._addRemoveLogo(this.options.showLogo),this.container},t.prototype.onRemove=function(){var n;e.prototype.onRemove.call(this),(n=this.map)!=null&&n.events.remove("resize",this._onResize),this.map=null,delete this.container},t.prototype.setOptions=function(n){n=new IV().merge(this.options,n),!n.showLogo&&this.logoAnchor?this._addRemoveLogo(!1):n.showLogo&&!this.logoAnchor&&this._addRemoveLogo(!0),this.options=n},t.prototype._addRemoveLogo=function(n){n?(this.logoAnchor=document.createElement("a"),this.logoAnchor.className="azure-map-logo",this.logoAnchor.href="https://aka.ms/azuremaps",this.logoAnchor.setAttribute("aria-label","Visit azure.microsoft.com"),this.logoAnchor.setAttribute("target","_blank"),this.container.appendChild(this.logoAnchor),this.logoTooltip=Js("Visit azure.microsoft.com"),this.container.appendChild(this.logoTooltip),aa(this.logoTooltip,this.logoAnchor),this._setVisiblity(!0)):((n=this.logoAnchor)!=null&&n.remove(),(n=this.logoTooltip)!=null&&n.remove(),delete this.logoAnchor,this._setVisiblity(!1))},t.prototype._setVisiblity=function(n){this.container&&(this.container.style.display=n?"flex":"none")},t.CONTAINER_MIN_WIDTH=480,t}(Yc),zDe=function(){function e(){}return e.throwOnError=function(i,n){function r(l){throw o.off("error",r),l.error}var o=i instanceof zZ?i._getMap():i,i=(o.on("error",r),n());return o.off("error",r),i},e.tryCatch=function(t,n,r,o){try{return this.throwOnError(t,n)}catch(i){return r(i)}finally{typeof o=="function"&&o()}},e.tryFinally=function(t,n,r){try{return this.throwOnError(t,n)}finally{r()}},e}(),wZ=window&&window.__assign||function(){return(wZ=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},BDe=function(){function e(t){this.map=t}return e.prototype.request=function(r){var n,r={domain:this.map.getServiceOptions().domain,path:"reverseGeocode",queryParams:wZ({"api-version":"2023-06-01",coordinates:"".concat(za(r.position[0]),",").concat(rs(r.position[1]))},r.style.view&&{view:r.style.view}),headers:{"Accept-Language":r.style.language}};return new Af(((n=this.map.authentication)==null?void 0:n.signRequest(r))||r).get()},e}(),UDe=function(){function e(){this._labelCache={},this._labelIdx={},this._preloadedCache=new Set}return e.prototype.cache=function(t,n,r,o){o="".concat(t,"_").concat(r[0],"_").concat(r[1],"_").concat(o),this._labelIdx[n.labelType]||(this._labelIdx[n.labelType]=[],this._labelCache[n.labelType]=[]),this._labelIdx[n.labelType].indexOf(o)===-1&&(this._labelCache[n.labelType].push({name:t,radius:n.radius,minZoom:n.minZoom,maxZoom:n.maxZoom||24,position:r}),this._labelIdx[n.labelType].push(o))},e.prototype.getNearestLabel=function(t,n,r){var o=null,i=this._labelCache[t];if(i)for(var l,c=1/0,f=0,p=i.length;f<p;f++)r>=i[f].minZoom&&r<=i[f].maxZoom&&(l=lc(i[f].position,n))<=i[f].radius&&l<=c&&(c=l,o=i[f]);return o},e.prototype._preloadCache=function(t){if(!this._preloadedCache.has(t)){this._preloadedCache.add(t);var n={source:[],labelType:"water",minZoom:0,radius:395e4,polygonSources:[]},r=t,o=r.indexOf("-");switch(r=o!==-1?r.substr(0,o):r){case"fr":this.cache("Océan Pacifique",n,[-170,32],t),this.cache("Océan Pacifique",n,[-138,-27],t),this.cache("Océan Atlantique",n,[-40,32],t),this.cache("Océan Atlantique",n,[-17,-29],t);break;case"es":this.cache("Océan Pacifique",n,[-170,32],t),this.cache("Océan Pacifique",n,[-138,-27],t),this.cache("Océano Atlántico",n,[-40,32],t),this.cache("Océano Atlántico",n,[-17,-29],t);break;case"pt":this.cache("Oceano Pacífico",n,[-170,32],t),this.cache("Oceano Pacífico",n,[-138,-27],t),this.cache("Oceano Atlântico",n,[-40,32],t),this.cache("Oceano Atlântico",n,[-17,-29],t);break;case"ja":this.cache("太平洋",n,[-170,32],t),this.cache("太平洋",n,[-138,-27],t);break;case"en":this.cache("Pacific Ocean",n,[-170,32],t),this.cache("Pacific Ocean",n,[-138,-27],t),this.cache("Atlantic Ocean",n,[-40,32],t),this.cache("Atlantic Ocean",n,[-17,-29],t),this.cache("Indian Ocean",n,[77,-26],t)}}},e}(),ZC=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},XC=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},kV=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},jDe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},$De=function(){function e(t,n){var r=this;this._disposed=!1,this._lastHeadingTime=0,this._actionQueue=[],this._pointerUpdateDelay=3e3,this._camUpdateDelay=1e3,this._headUpdateLimit=1e3,this._controlEventDelay=500,this._moveThreshold=25,this._headingThreshold=5,this._pitchThreshold=5,this._roadPixelRadius=120,this._minRoadDistance=25,this._minIntersectionPixelDistance=50,this._labelConfig=[{source:["Ocean label","Ocean name"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["Ocean","Ocean or sea"]},{source:["Sea label"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["Sea","Ocean or sea"]},{source:["Country name"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["State name","State name short"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["Capital city","Large city"],labelType:"city",minZoom:8,radius:4e4},{source:["Medium city"],labelType:"city",minZoom:8,radius:3e4},{source:["Small city"],labelType:"city",minZoom:8,radius:2e4},{source:["Island label"],labelType:"city",minZoom:8,radius:1e4},{source:["Town"],labelType:"city",minZoom:10,radius:1e4},{source:["Village"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["Amusement area label"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["Amusement park"]},{source:["Hospital label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Hospital"]},{source:["Shopping centre label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Shopping"]},{source:["Stadium label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Stadium"]},{source:["University/School label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["University"]},{source:["Zoo label"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["Zoo"]},{source:["Airport Label","Airport name","Airport POI"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["Airport","Runway"]},{source:["National park label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["National or state park","National park","Forest"]},{source:["Reservation label"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["Reservation"]}],this._labelCache=new Set(["city","state","country","water","majorPoi"]),this._roadLayers=new Set(["Connecting road","Connecting road tunnel","International road","International road tunnel","Local road","Local road tunnel","Major local road","Major local road tunnel","Major road","Major road tunnel","Minor local road","Minor local road tunnel","Motorway","Motorway tunnel","Secondary road","Secondary road tunnel","Toll connecting road","Toll connecting road tunnel","Toll international road","Toll international road tunnel","Toll local road","Toll local road tunnel","Toll major local road","Toll major local road tunnel","Toll major road","Toll major road tunnel","Toll minor local road","Toll minor local road tunnel","Toll motorway","Toll motorway tunnel","Toll secondary road","Toll secondary road tunnel"]),this._returnDetailedDescriptions=!1,this._shortcutListener=function(o){return ZC(r,void 0,void 0,function(){var i,l,c;return XC(this,function(f){switch(f.label){case 0:return o.altKey&&o.ctrlKey&&o.keyCode===68?(this._returnDetailedDescriptions=!this._returnDetailedDescriptions,c=this._map.getCamera(),l=this._map.getStyle(),i=l.language.toLowerCase(),l=l.style.toLowerCase(),[4,this._getLocDesc(c,i,l)]):[3,2];case 1:c=f.sent(),this._descCallback(c),f.label=2;case 2:return[2]}})})},this._onRotate=function(){r._rotateTimeout||(Date.now()-r._lastHeadingTime>=r._headUpdateLimit?r._rotateTimeout=setTimeout(r._updateHeading,kW.RotationDuration+25):r._rotateTimeout=setTimeout(r._updateHeading,r._headUpdateLimit-(Date.now()-r._lastHeadingTime)))},this._onMove=function(){r._moveTimeout&&(clearTimeout(r._moveTimeout),delete r._moveTimeout),r._controlTimeout&&(clearTimeout(r._controlTimeout),delete r._controlTimeout)},this._onMoveEnd=function(o){o.fromControl?r._controlTimeout=setTimeout(r._updateCam,r._controlEventDelay):r._updateCam()},this._onStyleData=function(){setTimeout(r._updateStyle)},this._onPointerDown=function(o){r._lastPointerPos=r._getEventPos(o),r._pointerTimeout=setTimeout(function(){return ZC(r,void 0,void 0,function(){var i,l,c;return XC(this,function(f){switch(f.label){case 0:return l=this._map.getStyle(),i=l.language.toLowerCase(),l=l.style.toLowerCase(),(c=this._map.getCamera()).center=this._map.pixelsToPositions([this._lastPointerPos])[0],[4,this._getLocDesc(c,i,l)];case 1:return c=f.sent(),this._descCallback(c),this._onPointerUp(),[2]}})})},r._pointerUpdateDelay),r._map.getCanvas().addEventListener("mousemove",r._onPointerMove),r._map.getCanvas().addEventListener("touchmove",r._onPointerMove),r._map.getCanvas().addEventListener("mouseup",r._onPointerUp),r._map.getCanvas().addEventListener("touchend",r._onPointerUp)},this._onPointerMove=function(l){var l=r._getEventPos(l),i=r._lastPointerPos[0]-l[0],l=r._lastPointerPos[1]-l[1];Math.sqrt(i*i+l*l)>r._moveThreshold&&r._onPointerUp()},this._onPointerUp=function(){clearTimeout(r._pointerTimeout),delete r._pointerTimeout,r._map.getCanvas().removeEventListener("mousemove",r._onPointerMove),r._map.getCanvas().removeEventListener("touchmove",r._onPointerMove),r._map.getCanvas().removeEventListener("mouseup",r._onPointerUp),r._map.getCanvas().removeEventListener("touchend",r._onPointerUp)},this._updateHeading=function(){var o,i=r._map.getCamera();r._lastHead&&!r._checkHeadingThreshold(i.bearing,r._lastHead)||(o=r._getHeadingDesc(i),r._lastHead=i.bearing,r._descCallback("<p>Map heading ".concat(o,".</p>")),r._lastHeadingTime=Date.now()),delete r._rotateTimeout},this._updateStyle=function(){return ZC(r,void 0,void 0,function(){var o,i,l,c;return XC(this,function(f){switch(f.label){case 0:return o=this._map.getCamera(),l=this._map.getStyle(),i=l.language.toLowerCase(),l=l.style.toLowerCase(),this._lastLang===i?[3,2]:(e._labelCache._preloadCache(i),[4,this._getLocDesc(o,i,l)]);case 1:return c=f.sent(),[3,4];case 2:return this._lastStyle===l||this._lastStyle!=="blank"?[3,4]:[4,this._getLocDesc(o,i,l)];case 3:c=f.sent(),f.label=4;case 4:return this._lastLang=i,this._lastStyle=l,c&&this._descCallback(c),[2]}})})},this._updateCam=function(o){o===void 0&&(o=!1);var i,l,c,f=r._map.getCamera();(!r._lastCam||0<r._actionQueue.length||r._checkThresholds(f,r._lastCam))&&(c=r._map.getStyle(),i=c.language.toLowerCase(),l=c.style.toLowerCase(),(c=r._getActionDesc(f))&&r._actionQueue.push(c),r._lastCam=f,r._moveTimeout&&(clearTimeout(r._moveTimeout),delete r._moveTimeout),r._moveTimeout=setTimeout(function(){return ZC(r,void 0,void 0,function(){var p;return XC(this,function(g){switch(g.label){case 0:return clearTimeout(this._rotateTimeout),delete this._rotateTimeout,[4,this._getLocDesc(f,i,l)];case 1:return p=g.sent(),0<this._actionQueue.length?(this._descCallback("<p>Map ".concat(this._actionQueue.join(", then "),".</p>").concat(p)),this._actionQueue=[]):this._descCallback(p),[2]}})})},o?0:r._camUpdateDelay))},this._map=t,this._restFallback=t.getServiceOptions().enableAccessibilityLocationFallback,this._descCallback=n,this._reverseSearch=new BDe(t),e._labelCache||(e._labelCache=new UDe),this._lastLang=this._map.getStyle().language.toLowerCase(),e._labelCache._preloadCache(this._lastLang),this._map.events.addOnce("idle",function(){var o;r._disposed||(r._updateCam(!0),r._baseVectorTileSourceId=e._baseVectorTileSourceIds.find(function(i){return r._map.sources.getById(i)}),r._baseVectorTileSourceId==="bing-mvt"&&(r._labelConfig=e._labelConfigBing,r._roadLayers=e._roadLayersBing),r._polygonStyleLayer=r._labelConfig.reduce(function(i,l){return l.polygonSources&&i.push.apply(i,jDe([],kV(l.polygonSources),!1)),i},[]),(o=r._map._getMap()).on("move",r._onMove),o.on("moveend",r._onMoveEnd),o.on("styledata",r._onStyleData),o.on("rotate",r._onRotate),(o=r._map.getCanvas()).addEventListener("mousedown",r._onPointerDown),o.addEventListener("touchstart",r._onPointerDown))}),this._map.getMapContainer().addEventListener("keydown",this._shortcutListener)}return e.prototype.dispose=function(){this._disposed=!0;var t=this._map._getMap(),t=(t.off("move",this._onMove),t.off("moveend",this._onMoveEnd),t.off("styledata",this._onStyleData),t.off("rotate",this._onRotate),this._map.getCanvas());t.removeEventListener("mousedown",this._onPointerDown),t.removeEventListener("touchstart",this._onPointerDown),this._map.getMapContainer().removeEventListener("keydown",this._shortcutListener)},e.prototype._getEventPos=function(t){var n,r;return"touches"in t?(n=t.touches[0],r=t.target.getBoundingClientRect(),[n.pageX-r.left,n.pageY-r.top]):[t.offsetX,t.offsetY]},e.prototype._checkThresholds=function(t,n){return this._checkZoomThreshold(t.zoom,n.zoom)||this._checkPitchThreshold(t.pitch,n.pitch)||this._checkLocThreshold(t.center,n.center)||this._checkHeadingThreshold(t.bearing,n.bearing)},e.prototype._checkZoomThreshold=function(t,n){return this._round(t)!==this._round(n)},e.prototype._checkPitchThreshold=function(t,n){return Math.abs(t-n)>=this._pitchThreshold},e.prototype._checkLocThreshold=function(t,n){return t=(n=kV(this._map.positionsToPixels([n,t]),2))[0],n=n[1],Tl.getDistance(t,n)>=this._moveThreshold},e.prototype._checkHeadingThreshold=function(t,n){return t<0&&(t+=360),n<0&&(n+=360),t=Math.abs(t-n),(t=180<t?360-t:t)>=this._headingThreshold},e.prototype._getLocDesc=function(t,n,r){return ZC(this,void 0,void 0,function(){var o,i,l,c,f,p,g,v,w,C=this;return XC(this,function(T){switch(T.label){case 0:return r==="blank"?[3,3]:this._map._getMap().loaded()?[3,2]:[4,new Promise(function(k){return C._map._getMap().once("idle",k)})];case 1:T.sent(),T.label=2;case 2:for(o={},i=this._map.positionsToPixels([t.center])[0],zDe.tryCatch(this._map,function(){var k=C._map._getMap();l=k.queryRenderedFeatures(i,{layers:C._polygonStyleLayer.filter(function(P){return k.getLayer(P)}),filter:["==",["geometry-type"],"Polygon"]})},function(){}),c=null,l&&0<l.length&&(c=l[0]),f=null,p=0,g=this._labelConfig.length;p<g;p++)v=this._labelConfig[p],t.zoom>=v.minZoom?v.polygonSources?c&&v.polygonSources.indexOf(c.layer["source-layer"])!==-1?(f=v.labelType,this._getClosestLabel(v,t,n,o,!1)):this._getClosestLabel(v,t,n,o,!0):this._getClosestLabel(v,t,n,o,!1):this._getClosestLabel(v,t,n,o,!0);return 8<=t.zoom&&this._processRoads(o,t,n),this._labelCache.forEach(function(k){!o[k]&&(w=null,w=k!=="water"&&k!=="majorPoi"||k===f?e._labelCache.getNearestLabel(k,t.center,t.zoom):w)&&(o[k]=w.name)}),[2,this._processLocInfo(t,f,o,!0,this._restFallback)];case 3:return[2,this._processLocInfo(t,null,null,!1,!1)]}})})},e.prototype._getHeadingDesc=function(t){var n=t.bearing;switch(n<0&&(n+=360),n=this._round(n,this._headingThreshold)){case 0:case 360:return"north";case 45:return"north east";case 90:return"east";case 135:return"south east";case 180:return"south";case 225:return"south west";case 270:return"west";case 315:return"north west";default:return"".concat(n," degrees")}},e.prototype._getClosestLabel=function(t,n,r,o,i){for(var l=t.radius,c=0,f=t.source.length;c<f;c++){var p={sourceLayer:t.source[c],filter:["has","name"]},g=this._map._getMap().querySourceFeatures(this._baseVectorTileSourceId,p),v=null,w=1/0,C=this._labelCache.has(t.labelType);if(!i||C)for(var T=0,k=g.length;T<k;T++){var P,O=g[T].geometry.type==="Point"?g[T]:Tk(n.center,g[T].geometry);i||(P=g[T].geometry.type==="Point"?lc(n.center,O.geometry.coordinates):O.properties.distance)<w&&(w=P,v=g[T]),C&&e._labelCache.cache(g[T].properties.name,t,O.geometry.coordinates,r)}i||(p=t.labelType+"Dis",v&&w<=l&&(typeof o[p]!="number"||w<=o[p])&&(o[t.labelType]=v.properties.name,o[p]=w))}},e.prototype._processRoads=function(t,n,r,o){var i=this._map._getMap().queryRenderedFeatures(o,{filter:["==",["geometry-type"],"LineString"]});if(i){for(var l,c=void 0,f=void 0,p=void 0,g=void 0,v=0,w=i.length;v<w;v++)this._roadLayers.has(i[v].layer["source-layer"])&&i[v].properties.name&&i[v].properties.name!==""&&(l=Tk(n.center,i[v]),!p||l.properties.distance<p.properties.distance)&&(c&&i[v].properties.name===c.properties.name?p=l:c&&i[v].properties.name===c.properties.name?(!g||l.properties.distance<g.properties.distance)&&(g=l,f=i[v]):(g=p,f=c,p=l,c=i[v]));c&&(!t.country&&c.properties.country_code&&(t.country=c.properties.country_code,t.countryDis=0,e._labelCache.cache(t.country,{source:[],labelType:"country",radius:5e3,minZoom:0},p.geometry.coordinates,r)),!t.state&&c.properties.country_subdivision&&(t.state=c.properties.country_subdivision,t.stateDis=0,e._labelCache.cache(t.state,{source:[],labelType:"state",radius:5e3,minZoom:4},p.geometry.coordinates,r)),15<=n.zoom)&&(o=this._map.positionsToPixels([n.center,p.geometry.coordinates]),(Tl.getDistance(o[0],o[1])<this._roadPixelRadius||p.properties.distance<this._minRoadDistance)&&(t.road=c.properties.name),f)&&(r=this._map.positionsToPixels([g.geometry.coordinates]),Tl.getDistance(o[0],r[0])<this._minIntersectionPixelDistance||g.properties.distance<this._minRoadDistance)&&(t.secondRoad=f.properties.name,t.secondRoadDis=g.properties.distance)}},e.prototype._getActionDesc=function(t){var n,r,o;return this._lastCam&&(n=[],this._checkLocThreshold(t.center,this._lastCam.center)&&(o=["panned"],(r=Math.round(qg(this._lastCam.center,t.center)))===0||r===360?o.push("north"):r<90?o.push("north east"):r===90?o.push("east"):r<180?o.push("south east"):r===180?o.push("south"):r<270?o.push("south west"):r===270?o.push("west"):r<360&&o.push("north west"),r=lc(this._lastCam.center,t.center,jo.meters),o.push(1e3<r?"".concat(Ju(r/1e3,2)," kilometers"):"".concat(Ju(r,2)," meters")),n.push(o.join(" "))),this._checkZoomThreshold(t.zoom,this._lastCam.zoom)&&((o=["zoomed"]).push(this._lastCam.zoom<t.zoom?"in":"out"),1<=(r=Math.abs(this._lastCam.zoom-t.zoom))&&(r=Math.ceil(r),o.push("".concat(r,1<r?" levels":" level"))),this._getCanonicalZoom(this._lastCam.zoom)!==this._getCanonicalZoom(t.zoom)&&o.push("to ".concat(this._getCanonicalZoom(t.zoom)," level")),t.zoom>=t.maxZoom&&o.push("Zoom In button disabled, maximum zoom level reached"),r=so.getSouth(t.bounds)<=-85.0511&&so.getNorth(t.bounds)>=Iz,(t.zoom<=t.minZoom||r)&&o.push("Zoom Out button disabled, minimum zoom level reached"),n.push(o.join(" "))),this._checkPitchThreshold(t.pitch,this._lastCam.pitch)&&(r=this._round(t.pitch,this._pitchThreshold),n.push("pitched to ".concat(r," degrees")),t.pitch!==60&&t.pitch!==0||(o=t.pitch===60?"maximum":"minimum",n.push("reached ".concat(o," of ").concat(t.pitch," degrees")))),this._checkHeadingThreshold(this._lastCam.bearing,t.bearing)&&n.push("rotated to ".concat(this._getHeadingDesc(t))),n.join(" and "))||null},e.prototype._getCanonicalZoom=function(t){return(t=this._round(t))<2?"world":t<5?"country":t<11?"state province":t<15?"city":"street"},e.prototype._processLocInfo=function(t,n,r,o,i){var l=this;return new Promise(function(c,f){var p=[];if(o){var g=[];if(r&&(n&&(n==="water"&&r.water?g.push(r.water):n==="majorPoi"&&r.majorPoi&&g.push(r.majorPoi)),g.length===0)&&(r.majorPoi&&8<=t.zoom?g.push(r.majorPoi):(r.poi&&14<=t.zoom?g.push(r.poi):r.road&&15<=t.zoom&&(r.secondRoad?g.push(r.road+" & "+r.secondRoad):g.push(r.road)),r.neighbourhood&&12<=t.zoom&&g.push(r.neighbourhood),r.city&&6<=t.zoom&&g.push(r.city)),r.state&&4<=t.zoom&&g.push(r.state),g.length===0?r.water?g.push(r.water):r.country&&g.push(r.country):g.length===1&&r.state&&4<=t.zoom&&r.country&&g.push(r.country)),0<g.length)p.push("<p>Location: ",g.join(", "),".</p>");else if(i&&n!=="water")return void l._reverseGeocodeDescription(t).then(function(v){c(v)},function(){f("<p>Location: unknown</p>")})}l._returnDetailedDescriptions&&(p.push("<p>Zoom: ",Ju(t.zoom,2),".</p>"),p.push("<p>Latitude: ",Ju(t.center[1],5),".</p>"),p.push("<p>Longitude: ",Ju(t.center[0],5),".</p>")),c(p.join(""))})},e.prototype._reverseGeocodeDescription=function(t){var n=this;return new Promise(function(r){var o=n._map.getStyle();n._reverseSearch.request({position:t.center,style:o}).then(function(i){var l,c={};i&&i.features&&0<i.features.length&&(l=(l=i.features[0])==null?void 0:l.properties)!=null&&l.address&&((l=i.features[0].properties.address).countryRegion&&(c.country=l.countryRegion.name,e._labelCache.cache(c.country,{source:[],labelType:"country",radius:5e3,minZoom:0},t.center,o.language)),l.adminDistricts&&(c.state=(i=l.adminDistricts[0])==null?void 0:i.shortName,e._labelCache.cache(c.state,{source:[],labelType:"state",radius:5e3,minZoom:4},t.center,o.language)),l.locality&&(c.city=l.locality,e._labelCache.cache(c.city,{source:[],labelType:"city",radius:1e3,minZoom:10},t.center,o.language)),l.addressLine)&&(c.road=l.addressLine),n._processLocInfo(t,null,c,!0,!1).then(function(f){r(f)})},function(i){n._processLocInfo(t,null,null,!0,!1).then(function(l){r(l)})}).catch(function(i){n._processLocInfo(t,null,null,!0,!1).then(function(l){r(l)})})})},e.prototype._round=function(t,n){return n===void 0&&(n=1),Math.round(t/n)*n},e._baseVectorTileSourceIds=["microsoft.base","vectorTiles","bing-mvt"],e._labelConfigBing=[{source:["water_feature"],labelType:"water",minZoom:0,radius:395e4,polygonSources:["generic_water_fill"]},{source:["water_feature"],labelType:"water",minZoom:3,radius:1e6,polygonSources:["generic_water_fill"]},{source:["country_region"],labelType:"country",minZoom:0,maxZoom:5,radius:3e5},{source:["admin_division1"],labelType:"state",minZoom:4,maxZoom:7,radius:3e5},{source:["populated_place"],labelType:"city",minZoom:8,radius:4e4},{source:["neighborhood"],labelType:"neighbourhood",minZoom:12,radius:6e3},{source:["amusement_park"],labelType:"poi",minZoom:14,radius:2e3,polygonSources:["amusement_park_fill"]},{source:["hospital"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["hospital_fill"]},{source:["shopping_center"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["shopping_center_fill"]},{source:["stadium"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["stadium_fill"]},{source:["higher_education_facility","school"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["higher_education_facility_fill","school_fill"]},{source:["zoo"],labelType:"poi",minZoom:14,radius:1e3,polygonSources:["zoo_fill"]},{source:["airport","airport_terminal"],labelType:"majorPoi",minZoom:11,radius:3e3,polygonSources:["airport_terminal_fill","airport_fill-merged7","airport_runway_fill"]},{source:["reserve"],labelType:"majorPoi",minZoom:7,radius:15e3,polygonSources:["generic_reserve_fill","land_cover_forest_fill"]}],e._roadLayersBing=new Set(["road"]),e}(),HDe=function(e){var t=this;this.addToMap=function(){t.mapViewDesc==null&&(t.initializeMapLiveStateInfo(),t.initializeMapStyleInfo(),t.createMapKeyBindingInfo(),t.map.getMapContainer().setAttribute("role","application"),t.map.getMapContainer().setAttribute("aria-label","Map Application"),t.map.getCanvasContainer().setAttribute("aria-live","polite"),t.map.getCanvasContainer().setAttribute("aria-describedby","atlas-map-state atlas-map-style"),t.map.getCanvas().setAttribute("aria-label","Interactive Map"),t.map.getCanvas().setAttribute("aria-describedby","atlas-map-shortcuts"),t.map.getCanvas().setAttribute("alt","Interactive Map"))},this.removeFromMap=function(){t.mapViewDesc!=null&&t.mapViewDesc.dispose(),delete t.mapViewDesc,t.atlasMapKeyBindings!=null&&t.map.getCanvasContainer().removeChild(t.atlasMapKeyBindings),delete t.atlasMapKeyBindings,t.atlasMapLiveStateInfo!=null&&t.map.getCanvasContainer().removeChild(t.atlasMapLiveStateInfo),delete t.atlasMapLiveStateInfo,t.atlasMapStyleInfo!=null&&t.map.getCanvasContainer().removeChild(t.atlasMapStyleInfo),delete t.atlasMapStyleInfo,t.map.getMapContainer().removeAttribute("role"),t.map.getMapContainer().removeAttribute("aria-label"),t.map.getCanvasContainer().removeAttribute("aria-live"),t.map.getCanvasContainer().removeAttribute("aria-describedby"),t.map.getCanvas().removeAttribute("aria-label"),t.map.getCanvas().removeAttribute("aria-describedby"),t.map.getCanvas().removeAttribute("alt"),t.map.events.remove("stylechanged",t.updateMapStyle)},this.createMapKeyBindingInfo=function(){t.atlasMapKeyBindings=document.createElement("div"),t.atlasMapKeyBindings.setAttribute("tabindex","-1"),t.atlasMapKeyBindings.setAttribute("aria-hidden","true"),t.atlasMapKeyBindings.id="atlas-map-shortcuts",t.atlasMapKeyBindings.classList.add("hidden-accessible-element"),t.atlasMapKeyBindings.innerHTML=["Map shortcuts:","Zoom out: hyphen.","Zoom in: plus.","Pan right 100 pixels: right arrow.","Pan left 100 pixels: left arrow.","Pan up 100 pixels: up arrow.","Pan down 100 pixels: down arrow.","Rotate 15 degrees clockwise: shift + right arrow.","Rotate 15 degrees counter clockwise: shift + left arrow.","Increase pitch 10 degrees: shift + up arrow.","Decrease pitch 10 degrees: shift + down arrow.","Jump focus to the map: Escape."].join(`
`),t.map.getCanvasContainer().appendChild(t.atlasMapKeyBindings);var n=[189,187,38,37,39,40],r=t.map._getMap()._canvas;r!=null&&r.addEventListener("keyup",function(o){n.find(function(i){return o.keyCode===i})&&(t.atlasMapKeyBindings.innerHTML="")})},this.initializeMapLiveStateInfo=function(){t.mapViewDesc=new $De(t.map,t.updateMapState),t.atlasMapLiveStateInfo=document.createElement("div"),t.atlasMapLiveStateInfo.setAttribute("tabindex","-1"),t.atlasMapLiveStateInfo.setAttribute("aria-hidden","true"),t.atlasMapLiveStateInfo.id="atlas-map-state",t.atlasMapLiveStateInfo.classList.add("hidden-accessible-element"),t.map.getCanvasContainer().appendChild(t.atlasMapLiveStateInfo)},this.initializeMapStyleInfo=function(){t.atlasMapStyleInfo=document.createElement("div"),t.atlasMapStyleInfo.setAttribute("tabindex","-1"),t.atlasMapStyleInfo.setAttribute("aria-hidden","true"),t.atlasMapStyleInfo.id="atlas-map-style",t.atlasMapStyleInfo.classList.add("hidden-accessible-element"),t.map.events.add("stylechanged",t.updateMapStyle),t.map.getCanvasContainer().appendChild(t.atlasMapStyleInfo)},this.updateMapStyle=function(){t.atlasMapStyleInfo.innerHTML="<p>Map style: ".concat(t.map.getStyle().style,".</p>")},this.updateMapState=function(n){t.atlasMapLiveStateInfo.innerHTML=n},this.map=e},VDe=function(e){var t=this;this.listenerEnabled=!1,this.lastFlowMode="none",this.addToMap=function(){if(!t.map._isReady())throw new Error("Traffic flow could not be added to the map because the map is not ready. Please use a ready event listener to guarantee the map is ready before enabling traffic flow.");t.listenerEnabled||(t.map.events.add("styledata",t.addToMap),t.listenerEnabled=!0);var n,r=t.map.getTraffic();r.flow!=="none"&&(n=t.map.layers.getLayerById("traffic_".concat(r.flow)))&&(t.lastFlowMode=r.flow,n._updateLayoutProperty("visibility","visible","none"))},this.removeFromMap=function(){var n;t.map.getTraffic(),t.lastFlowMode!="none"&&((n=t.map.layers.getLayerById("traffic_".concat(t.lastFlowMode)))&&n._updateLayoutProperty("visibility","none","visible"),t.lastFlowMode="none"),t.listenerEnabled&&(t.map.events.remove("styledata",t.addToMap),t.listenerEnabled=!1)},this.map=e},qDe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),PV=function(e){function t(n,r,o){var l=(l=(l=(l=(l=(l=(l=(l=(l=(l=(l=(l=(l=(l=n.icon_category_12)!=null?l:n.icon_category_11)!=null?l:n.icon_category_10)!=null?l:n.icon_category_9)!=null?l:n.icon_category_8)!=null?l:n.icon_category_7)!=null?l:n.icon_category_6)!=null?l:n.icon_category_5)!=null?l:n.icon_category_4)!=null?l:n.icon_category_3)!=null?l:n.icon_category_2)!=null?l:n.icon_category_1)!=null?l:n.icon_category_0)!=null?l:n.icon_category,i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=n.description_12)!=null?i:n.description_11)!=null?i:n.description_10)!=null?i:n.description_9)!=null?i:n.description_8)!=null?i:n.description_7)!=null?i:n.description_6)!=null?i:n.description_5)!=null?i:n.description_4)!=null?i:n.description_3)!=null?i:n.description_2)!=null?i:n.description_1)!=null?i:n.description_0)!=null?i:n.description,l={icon:"".concat(t.getSeverityColorName(n.magnitude),"-").concat(t.getIncidentTypeIconName(l)),incidentType:t.getIncidentTypeName(l,o),description:i,delay:n.delay,color:t.getSeverityColorHexCode(n.magnitude),id:n.id};return e.call(this,r,l)||this}return qDe(t,e),t.getIncidentTypeName=function(n,r){switch(n){case 0:return r.Unknown;case 1:return r.Accident;case 2:return r.Fog;case 3:return r.Danger;case 4:return r.Rain;case 5:return r.Ice;case 6:return r.Jam;case 7:return r.LaneClosed;case 8:return r.RoadClosed;case 9:return r.RoadWorks;case 10:return r.Wind;case 11:return r.Flood;case 12:return r.Detour;default:return r.Unknown}},t.getIncidentTypeIconName=function(n){switch(n){case 0:return"unknown";case 1:return"accident";case 2:return"fog";case 3:return"danger";case 4:return"rain";case 5:return"ice";case 6:return"jam";case 7:return"lane-closed";case 8:return"road-closed";case 9:return"road-work";case 10:return"wind";case 11:return"flood";case 12:return"detour";default:return"unknown"}},t.getSeverityColorName=function(n){switch(n){case 0:return"grey";case 1:return"yellow";case 2:return"orange";case 3:return"red";default:return"grey"}},t.getSeverityColorHexCode=function(n){switch(n){case 0:return"#B5B6B7";case 1:return"#F4C951";case 2:return"#F4873F";case 3:return"#F04F4E";default:return"#B5B6B7"}},t}(Ih),AV=(function(e){e.DELAY="delay",e.LENGTH="length",e.FROM="from",e.TO="to"}(tw=tw||{}),function(){function e(){}return e.build=function(t,n){n===void 0&&(n="en-US");var r,i=document.createElement("div"),l=(i.classList.add("incident-popup-title"),i.classList.add("font-segoeui-b"),i.innerText=t.properties.incidentType,i.setAttribute("aria-label","Incident Type ".concat(t.properties.incidentType)),document.createElement("div")),o=(l.classList.add("incident-popup-subtitle"),l.classList.add("font-segoeui-b"),l.setAttribute("aria-label","Incident Description ".concat(t.properties.description)),l.innerText=t.properties.description,document.createElement("div")),i=(o.classList.add("incident-popup-header"),o.style.backgroundColor=t.properties.color,o.appendChild(i),o.appendChild(l),document.createElement("div")),l=(i.classList.add("incident-popup-body"),t.properties.delay&&(l="".concat(Math.floor(t.properties.delay/60)," min"),l=this.createInfoSection(l,tw.DELAY),i.appendChild(l)),t.properties.length&&(l=new Intl.NumberFormat([n,"en-US"],{maximumFractionDigits:2}),r=void 0,r=n==="en-US"?(n=um(t.properties.length,"meters","miles"),"".concat(l.format(n)," miles")):(n=um(t.properties.length,"meters","kilometers"),"".concat(l.format(n)," km")),l=this.createInfoSection(r,tw.LENGTH),i.appendChild(l)),t.properties.from&&(n=this.createInfoSection(t.properties.from,tw.FROM),i.appendChild(n)),t.properties.to&&(r=this.createInfoSection(t.properties.to,tw.TO),i.appendChild(r)),document.createElement("div"));return l.classList.add("incident-popup-content"),l.appendChild(o),l.appendChild(i),new VA({content:l,position:t.geometry.coordinates})},e.createInfoSection=function(t,n){var r=document.createElement("div"),o=(r.classList.add("incident-popup-info"),document.createElement("div")),i=(o.classList.add("icon"),o.classList.add(n),document.createElement("span"));return i.classList.add("message"),i.classList.add("font-segoeui"),i.setAttribute("aria-label","Incident ".concat(n," ").concat(t)),i.innerText=t,r.appendChild(o),r.appendChild(i),r},e}()),GDe=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},WDe=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},KDe=function(){function e(r){var n=this,r=(this.incidentLayerName="incidents",this.incidentSourceName="mapcontrol_traffic_incident",this.addToMap=function(){n.map.sources.getById(n.incidentSourceName)||n.map.sources.add(n.vectorTileSource),n.map.layers.getLayerById(n.incidentLayerName)||n.map.layers.add(n.incidentLayer,"labels"),n.clickPopup=new VA({position:[0,0],pixelOffset:[0,-18]}),n.map.addEventListener("mouseover",n.incidentLayerName,n.cursorToPointer),n.map.addEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.addEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.events.addOnce("idle",n.setAccessiblePopups),n.map.events.add("moveend",n.setAccessiblePopups)},this.accessiblePopups=[],this.setAccessiblePopups=function(){return GDe(n,void 0,void 0,function(){var o,i,l,c,f,p,g=this;return WDe(this,function(v){switch(v.label){case 0:return this.accessiblePopups.forEach(function(w){return w.remove()}),this.accessiblePopups=[],o=this.map.layers.getRenderedShapes(this.map.getCamera().bounds,this.incidentLayer),[4,this.map._getLocalizedStrings()];case 1:return i=v.sent(),l=function(w,C){var T=w[C],P=T.geometry.coordinates,P=new kh(new Sl(P[0],P[1])),T=new PV(T.properties,P,i),k=AV.build(T,g.incidentLanguage),P=k.getPopupContainer();return P.addEventListener("focusin",function(O){g.clickPopup.remove(),g.accessiblePopups.filter(function(L){return L!==k}).forEach(function(L){return L.remove()}),0<=C-1&&c(k,l(w,C-1)),C+1<w.length&&p(l(w,C+1)),2<=C&&C==w.length-1&&f(l(w,0)),C==0&&2<=w.length&&p(l(w,w.length-1))}),C==w.length-1&&P.addEventListener("focusout",function(O){O.relatedTarget===null&&k.close()}),g.accessiblePopups.push(k),k},c=function(w,C){C.open(g.map),C.close(),C=C.getPopupContainer(),w=w.getPopupContainer(),w.parentElement.insertBefore(C,w)},f=function(C){C.open(g.map),C.close();var C=C.getPopupContainer(),T=C.parentElement;T.insertBefore(C,T.firstElementChild)},p=function(w){w.open(g.map),w.close()},0<o.length&&p(l(o,0)),1<o.length&&p(l(o,o.length-1)),[2]}})})},this.removeFromMap=function(){var o;n.map.removeEventListener("mouseover",n.incidentLayerName,n.cursorToPointer),n.map.removeEventListener("mouseleave",n.incidentLayerName,n.cursorToDefault),n.map.removeEventListener("click",n.incidentLayerName,n.openIncidentPopup),n.map.events.remove("idle",n.setAccessiblePopups),n.map.events.remove("moveend",n.setAccessiblePopups),n.accessiblePopups.forEach(function(i){return i.remove()}),n.accessiblePopups=[],(o=n.clickPopup)!=null&&o.remove(),n.map.layers.getLayerById(n.incidentLayerName)!=null&&n.map.layers.remove(n.incidentLayerName),n.map.sources.getById(n.incidentSourceName)!=null&&n.map.sources.remove(n.incidentSourceName)},this.cursorToPointer=function(o){n.map.getCanvas().style.cursor="pointer"},this.cursorToDefault=function(o){n.map.getCanvas().style.cursor=""},this.openIncidentPopup=function(o){n.clickPopup.remove(),n.accessiblePopups.forEach(function(c){return c.close()});var i=o.position,l=o.features[0];n.map._getLocalizedStrings().then(function(c){var f=new kh(new Sl(i[0],i[1])),f=new PV(l.properties,f,c);n.clickPopup=AV.build(f,n.incidentLanguage),n.clickPopup.open(n.map),n.clickPopup.getPopupContainer().addEventListener("focusout",function(p){p.relatedTarget===null&&n.clickPopup.close()})})},this.map=r,this.vectorTileSource=new T7(this.incidentSourceName,{maxZoom:22,tiles:["https://".concat(Pr.domainPlaceHolder,"/traffic/incident/tile/pbf?api-version=1.0&zoom={z}&x={x}&y={y}")]}),this.getIncidentIconImageExpression());this.incidentLayer=new Ik(this.incidentSourceName,this.incidentLayerName,{sourceLayer:"Traffic incident POI",iconOptions:{ignorePlacement:!0,allowOverlap:!0,image:r,size:.75}})}return e.prototype.getIncidentIconImageExpression=function(){return["concat",["let","magnitude",["get","magnitude"],["case",["==",["var","magnitude"],0],"grey",["==",["var","magnitude"],1],"yellow",["==",["var","magnitude"],2],"orange",["==",["var","magnitude"],3],"red",["==",["var","magnitude"],4],"grey","grey"]],"-",["let","category",["coalesce",["get","icon_category_12"],["get","icon_category_11"],["get","icon_category_10"],["get","icon_category_9"],["get","icon_category_8"],["get","icon_category_7"],["get","icon_category_6"],["get","icon_category_5"],["get","icon_category_4"],["get","icon_category_3"],["get","icon_category_2"],["get","icon_category_0"],["get","icon_category"],0],["case",["==",["var","category"],0],"unknown",["==",["var","category"],1],"accident",["==",["var","category"],2],"fog",["==",["var","category"],3],"danger",["==",["var","category"],4],"rain",["==",["var","category"],5],"ice",["==",["var","category"],6],"jam",["==",["var","category"],7],"lane-closed",["==",["var","category"],8],"road-closed",["==",["var","category"],9],"road-work",["==",["var","category"],10],"wind",["==",["var","category"],11],"flood",["==",["var","category"],12],"detour","unknown"]]]},e}(),YDe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MV=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.interactive=!0,n.scrollZoomInteraction=!0,n.boxZoomInteraction=!0,n.dragRotateInteraction=!0,n.dragPanInteraction=!0,n.keyboardInteraction=!0,n.dblClickZoomInteraction=!0,n.touchInteraction=!0,n.touchRotate=!0,n.wheelZoomRate=1/450,n}return YDe(t,e),t}(Hi),ZDe=function(){function e(t){var n=this;this._onKeyDown=function(r){r.keyCode===27&&n.map.getCanvas().focus()},this.map=t}return e.prototype.enable=function(){this.map.getMapContainer().addEventListener("keydown",this._onKeyDown)},e.prototype.disable=function(){this.map.getMapContainer().removeEventListener("keydown",this._onKeyDown)},e}(),XDe=function(){function e(t){var n=this;this._onGestureStart=function(r){n.hasTouch||(r.preventDefault(),n.initZoom=n.map.getCamera().zoom)},this._onGestureChange=function(r){n.hasTouch||(r.preventDefault(),n.map.setCamera({zoom:n.initZoom+r.scale-1}))},this._onTouchStart=function(r){n.hasTouch=!0},this._onTouchEnd=function(r){r.touches.length===0&&(n.hasTouch=!1)},this.map=t}return e.prototype.enable=function(){this.map.getCanvasContainer().addEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().addEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().addEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().addEventListener("touchend",this._onTouchEnd)},e.prototype.disable=function(){this.map.getCanvasContainer().removeEventListener("gesturestart",this._onGestureStart),this.map.getCanvasContainer().removeEventListener("gesturechange",this._onGestureChange),this.map.getCanvasContainer().removeEventListener("touchstart",this._onTouchStart),this.map.getCanvasContainer().removeEventListener("touchend",this._onTouchEnd)},e}(),QDe=function(){function e(t,n){this.added=!1,this.map=t,this.focusShortcut=new ZDe(t),this.pinchZoom=new XDe(t),this.options=new MV().merge(n)}return e.prototype.addToMap=function(){this.added||(this.added=!0,this._setInteractions(this.options))},e.prototype.removeFromMap=function(){this.added&&(this.added=!1,this._setInteractions({interactive:!1}))},e.prototype.setOptions=function(t){this.options=new MV().merge(this.options,t),this.added&&this._setInteractions(this.options)},e.prototype.getOptions=function(){return Object.assign({},this.options)},e.prototype._setInteractions=function(t){var n;t.interactive?(t.boxZoomInteraction?this.map._getMap().boxZoom.enable():this.map._getMap().boxZoom.disable(),t.dblClickZoomInteraction?this.map._getMap().doubleClickZoom.enable():this.map._getMap().doubleClickZoom.disable(),t.dragPanInteraction?this.map._getMap().dragPan.enable():this.map._getMap().dragPan.disable(),t.dragRotateInteraction?this.map._getMap().dragRotate.enable():this.map._getMap().dragRotate.disable(),t.keyboardInteraction?(this.map._getMap().keyboard.enable(),this.focusShortcut.enable()):(this.map._getMap().keyboard.disable(),this.focusShortcut.disable()),t.scrollZoomInteraction?(this.map._getMap().scrollZoom.enable(),this.map._getMap().scrollZoom.setWheelZoomRate(t.wheelZoomRate)):this.map._getMap().scrollZoom.disable(),n=this.map._getMap().touchZoomRotate,t.touchInteraction?(n.enable(),t.touchRotate?n.enableRotation():n.disableRotation()):n.disable(),this.pinchZoom.enable()):(this.map._getMap().boxZoom.disable(),this.map._getMap().doubleClickZoom.disable(),this.map._getMap().dragPan.disable(),this.map._getMap().dragRotate.disable(),this.map._getMap().keyboard.disable(),this.focusShortcut.disable(),this.map._getMap().scrollZoom.disable(),this.map._getMap().touchZoomRotate.disable(),this.pinchZoom.disable())},e}();function xZ(e,t,n){var r={type:"Feature"};return(n=n===void 0?{}:n).id!==0&&!n.id||(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function JDe(e,t,n){n===void 0&&(n={});for(var r=0,o=e;r<o.length;r++){var i=o[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<i[i.length-1].length;l++)if(i[i.length-1][l]!==i[0][l])throw new Error("First and last Position are not equivalent.")}return xZ({type:"Polygon",coordinates:e},t,n)}function eLe(e,t,n){return xZ({type:"MultiPolygon",coordinates:e},t,n=n===void 0?{}:n)}function RV(e){return e.type==="Feature"?e.geometry:e}var OV={exports:{}},tLe=(OV.exports=function(){function e(Ae,Z){if(!(Ae instanceof Z))throw new TypeError("Cannot call a class as a function")}function t(Ae,Z){for(var ne=0;ne<Z.length;ne++){var ee=Z[ne];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(Ae,ee.key,ee)}}function n(Ae,Z,ne){return Z&&t(Ae.prototype,Z),ne&&t(Ae,ne),Ae}var r=function(){function Ae(Z,ne){this.next=null,this.key=Z,this.data=ne,this.left=null,this.right=null}return Ae}();function o(Ae,Z){return Ae>Z?1:Ae<Z?-1:0}function i(Ae,Z,ne){for(var ee=new r(null,null),ye=ee,Ie=ee;;){var ge=ne(Ae,Z.key);if(ge<0){if(Z.left===null)break;if(ne(Ae,Z.left.key)<0){var $e=Z.left;if(Z.left=$e.right,$e.right=Z,Z=$e,Z.left===null)break}Ie.left=Z,Ie=Z,Z=Z.left}else if(ge>0){if(Z.right===null)break;if(ne(Ae,Z.right.key)>0){var $e=Z.right;if(Z.right=$e.left,$e.left=Z,Z=$e,Z.right===null)break}ye.right=Z,ye=Z,Z=Z.right}else break}return ye.right=Z.left,Ie.left=Z.right,Z.left=ee.right,Z.right=ee.left,Z}function l(Ae,Z,ne,ee){var ye=new r(Ae,Z);if(ne===null)return ye.left=ye.right=null,ye;ne=i(Ae,ne,ee);var Ie=ee(Ae,ne.key);return Ie<0?(ye.left=ne.left,ye.right=ne,ne.left=null):Ie>=0&&(ye.right=ne.right,ye.left=ne,ne.right=null),ye}function c(Ae,Z,ne){var ee=null,ye=null;if(Z){Z=i(Ae,Z,ne);var Ie=ne(Z.key,Ae);Ie===0?(ee=Z.left,ye=Z.right):Ie<0?(ye=Z.right,Z.right=null,ee=Z):(ee=Z.left,Z.left=null,ye=Z)}return{left:ee,right:ye}}function f(Ae,Z,ne){return Z===null?Ae:(Ae===null||(Z=i(Ae.key,Z,ne),Z.left=Ae),Z)}function p(Ae,Z,ne,ee,ye){if(Ae){ee(""+Z+(ne?"└── ":"├── ")+ye(Ae)+`
`);var Ie=Z+(ne?"    ":"│   ");Ae.left&&p(Ae.left,Ie,!1,ee,ye),Ae.right&&p(Ae.right,Ie,!0,ee,ye)}}var g=function(){function Ae(Z){Z===void 0&&(Z=o),this._root=null,this._size=0,this._comparator=Z}return Ae.prototype.insert=function(Z,ne){return this._size++,this._root=l(Z,ne,this._root,this._comparator)},Ae.prototype.add=function(Z,ne){var ee=new r(Z,ne);this._root===null&&(ee.left=ee.right=null,this._size++,this._root=ee);var ye=this._comparator,Ie=i(Z,this._root,ye),ge=ye(Z,Ie.key);return ge===0?this._root=Ie:(ge<0?(ee.left=Ie.left,ee.right=Ie,Ie.left=null):ge>0&&(ee.right=Ie.right,ee.left=Ie,Ie.right=null),this._size++,this._root=ee),this._root},Ae.prototype.remove=function(Z){this._root=this._remove(Z,this._root,this._comparator)},Ae.prototype._remove=function(Z,ne,ee){var ye;if(ne===null)return null;ne=i(Z,ne,ee);var Ie=ee(Z,ne.key);return Ie===0?(ne.left===null?ye=ne.right:(ye=i(Z,ne.left,ee),ye.right=ne.right),this._size--,ye):ne},Ae.prototype.pop=function(){var Z=this._root;if(Z){for(;Z.left;)Z=Z.left;return this._root=i(Z.key,this._root,this._comparator),this._root=this._remove(Z.key,this._root,this._comparator),{key:Z.key,data:Z.data}}return null},Ae.prototype.findStatic=function(Z){for(var ne=this._root,ee=this._comparator;ne;){var ye=ee(Z,ne.key);if(ye===0)return ne;ye<0?ne=ne.left:ne=ne.right}return null},Ae.prototype.find=function(Z){return this._root&&(this._root=i(Z,this._root,this._comparator),this._comparator(Z,this._root.key)!==0)?null:this._root},Ae.prototype.contains=function(Z){for(var ne=this._root,ee=this._comparator;ne;){var ye=ee(Z,ne.key);if(ye===0)return!0;ye<0?ne=ne.left:ne=ne.right}return!1},Ae.prototype.forEach=function(Z,ne){for(var ee=this._root,ye=[],Ie=!1;!Ie;)ee!==null?(ye.push(ee),ee=ee.left):ye.length!==0?(ee=ye.pop(),Z.call(ne,ee),ee=ee.right):Ie=!0;return this},Ae.prototype.range=function(Z,ne,ee,ye){for(var Ie=[],ge=this._comparator,$e=this._root,nt;Ie.length!==0||$e;)if($e)Ie.push($e),$e=$e.left;else{if($e=Ie.pop(),nt=ge($e.key,ne),nt>0)break;if(ge($e.key,Z)>=0&&ee.call(ye,$e))return this;$e=$e.right}return this},Ae.prototype.keys=function(){var Z=[];return this.forEach(function(ne){var ee=ne.key;return Z.push(ee)}),Z},Ae.prototype.values=function(){var Z=[];return this.forEach(function(ne){var ee=ne.data;return Z.push(ee)}),Z},Ae.prototype.min=function(){return this._root?this.minNode(this._root).key:null},Ae.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},Ae.prototype.minNode=function(Z){if(Z===void 0&&(Z=this._root),Z)for(;Z.left;)Z=Z.left;return Z},Ae.prototype.maxNode=function(Z){if(Z===void 0&&(Z=this._root),Z)for(;Z.right;)Z=Z.right;return Z},Ae.prototype.at=function(Z){for(var ne=this._root,ee=!1,ye=0,Ie=[];!ee;)if(ne)Ie.push(ne),ne=ne.left;else if(Ie.length>0){if(ne=Ie.pop(),ye===Z)return ne;ye++,ne=ne.right}else ee=!0;return null},Ae.prototype.next=function(Z){var ne=this._root,ee=null;if(Z.right){for(ee=Z.right;ee.left;)ee=ee.left;return ee}for(var ye=this._comparator;ne;){var Ie=ye(Z.key,ne.key);if(Ie===0)break;Ie<0?(ee=ne,ne=ne.left):ne=ne.right}return ee},Ae.prototype.prev=function(Z){var ne=this._root,ee=null;if(Z.left!==null){for(ee=Z.left;ee.right;)ee=ee.right;return ee}for(var ye=this._comparator;ne;){var Ie=ye(Z.key,ne.key);if(Ie===0)break;Ie<0?ne=ne.left:(ee=ne,ne=ne.right)}return ee},Ae.prototype.clear=function(){return this._root=null,this._size=0,this},Ae.prototype.toList=function(){return C(this._root)},Ae.prototype.load=function(Z,ne,ee){ne===void 0&&(ne=[]),ee===void 0&&(ee=!1);var ye=Z.length,Ie=this._comparator;if(ee&&P(Z,ne,0,ye-1,Ie),this._root===null)this._root=v(Z,ne,0,ye),this._size=ye;else{var ge=k(this.toList(),w(Z,ne),Ie);ye=this._size+ye,this._root=T({head:ge},0,ye)}return this},Ae.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(Ae.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(Ae.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Ae.prototype.toString=function(Z){Z===void 0&&(Z=function(ye){return String(ye.key)});var ne=[];return p(this._root,"",!0,function(ee){return ne.push(ee)},Z),ne.join("")},Ae.prototype.update=function(Z,ne,ee){var ye=this._comparator,Ie=c(Z,this._root,ye),ge=Ie.left,$e=Ie.right;ye(Z,ne)<0?$e=l(ne,ee,$e,ye):ge=l(ne,ee,ge,ye),this._root=f(ge,$e,ye)},Ae.prototype.split=function(Z){return c(Z,this._root,this._comparator)},Ae}();function v(Ae,Z,ne,ee){var ye=ee-ne;if(ye>0){var Ie=ne+Math.floor(ye/2),ge=Ae[Ie],$e=Z[Ie],nt=new r(ge,$e);return nt.left=v(Ae,Z,ne,Ie),nt.right=v(Ae,Z,Ie+1,ee),nt}return null}function w(Ae,Z){for(var ne=new r(null,null),ee=ne,ye=0;ye<Ae.length;ye++)ee=ee.next=new r(Ae[ye],Z[ye]);return ee.next=null,ne.next}function C(Ae){for(var Z=Ae,ne=[],ee=!1,ye=new r(null,null),Ie=ye;!ee;)Z?(ne.push(Z),Z=Z.left):ne.length>0?(Z=Ie=Ie.next=ne.pop(),Z=Z.right):ee=!0;return Ie.next=null,ye.next}function T(Ae,Z,ne){var ee=ne-Z;if(ee>0){var ye=Z+Math.floor(ee/2),Ie=T(Ae,Z,ye),ge=Ae.head;return ge.left=Ie,Ae.head=Ae.head.next,ge.right=T(Ae,ye+1,ne),ge}return null}function k(Ae,Z,ne){for(var ee=new r(null,null),ye=ee,Ie=Ae,ge=Z;Ie!==null&&ge!==null;)ne(Ie.key,ge.key)<0?(ye.next=Ie,Ie=Ie.next):(ye.next=ge,ge=ge.next),ye=ye.next;return Ie!==null?ye.next=Ie:ge!==null&&(ye.next=ge),ee.next}function P(Ae,Z,ne,ee,ye){if(!(ne>=ee)){for(var Ie=Ae[ne+ee>>1],ge=ne-1,$e=ee+1;;){do ge++;while(ye(Ae[ge],Ie)<0);do $e--;while(ye(Ae[$e],Ie)>0);if(ge>=$e)break;var nt=Ae[ge];Ae[ge]=Ae[$e],Ae[$e]=nt,nt=Z[ge],Z[ge]=Z[$e],Z[$e]=nt}P(Ae,Z,ne,$e,ye),P(Ae,Z,$e+1,ee,ye)}}var O=function(Z,ne){return Z.ll.x<=ne.x&&ne.x<=Z.ur.x&&Z.ll.y<=ne.y&&ne.y<=Z.ur.y},L=function(Z,ne){if(ne.ur.x<Z.ll.x||Z.ur.x<ne.ll.x||ne.ur.y<Z.ll.y||Z.ur.y<ne.ll.y)return null;var ee=Z.ll.x<ne.ll.x?ne.ll.x:Z.ll.x,ye=Z.ur.x<ne.ur.x?Z.ur.x:ne.ur.x,Ie=Z.ll.y<ne.ll.y?ne.ll.y:Z.ll.y,ge=Z.ur.y<ne.ur.y?Z.ur.y:ne.ur.y;return{ll:{x:ee,y:Ie},ur:{x:ye,y:ge}}},D=Number.EPSILON;D===void 0&&(D=Math.pow(2,-52));var N=D*D,F=function(Z,ne){if(-D<Z&&Z<D&&-D<ne&&ne<D)return 0;var ee=Z-ne;return ee*ee<N*Z*ne?0:Z<ne?-1:1},B=function(){function Ae(){e(this,Ae),this.reset()}return n(Ae,[{key:"reset",value:function(){this.xRounder=new V,this.yRounder=new V}},{key:"round",value:function(ne,ee){return{x:this.xRounder.round(ne),y:this.yRounder.round(ee)}}}]),Ae}(),V=function(){function Ae(){e(this,Ae),this.tree=new g,this.round(0)}return n(Ae,[{key:"round",value:function(ne){var ee=this.tree.add(ne),ye=this.tree.prev(ee);if(ye!==null&&F(ee.key,ye.key)===0)return this.tree.remove(ne),ye.key;var Ie=this.tree.next(ee);return Ie!==null&&F(ee.key,Ie.key)===0?(this.tree.remove(ne),Ie.key):ne}}]),Ae}(),G=new B,q=function(Z,ne){return Z.x*ne.y-Z.y*ne.x},z=function(Z,ne){return Z.x*ne.x+Z.y*ne.y},$=function(Z,ne,ee){var ye={x:ne.x-Z.x,y:ne.y-Z.y},Ie={x:ee.x-Z.x,y:ee.y-Z.y},ge=q(ye,Ie);return F(ge,0)},K=function(Z){return Math.sqrt(z(Z,Z))},te=function(Z,ne,ee){var ye={x:ne.x-Z.x,y:ne.y-Z.y},Ie={x:ee.x-Z.x,y:ee.y-Z.y};return q(Ie,ye)/K(Ie)/K(ye)},re=function(Z,ne,ee){var ye={x:ne.x-Z.x,y:ne.y-Z.y},Ie={x:ee.x-Z.x,y:ee.y-Z.y};return z(Ie,ye)/K(Ie)/K(ye)},oe=function(Z,ne,ee){return ne.y===0?null:{x:Z.x+ne.x/ne.y*(ee-Z.y),y:ee}},ue=function(Z,ne,ee){return ne.x===0?null:{x:ee,y:Z.y+ne.y/ne.x*(ee-Z.x)}},Q=function(Z,ne,ee,ye){if(ne.x===0)return ue(ee,ye,Z.x);if(ye.x===0)return ue(Z,ne,ee.x);if(ne.y===0)return oe(ee,ye,Z.y);if(ye.y===0)return oe(Z,ne,ee.y);var Ie=q(ne,ye);if(Ie==0)return null;var ge={x:ee.x-Z.x,y:ee.y-Z.y},$e=q(ge,ne)/Ie,nt=q(ge,ye)/Ie,pt=Z.x+nt*ne.x,wt=ee.x+$e*ye.x,mt=Z.y+nt*ne.y,zt=ee.y+$e*ye.y,Pt=(pt+wt)/2,Zt=(mt+zt)/2;return{x:Pt,y:Zt}},ce=function(){n(Ae,null,[{key:"compare",value:function(ne,ee){var ye=Ae.comparePoints(ne.point,ee.point);return ye!==0?ye:(ne.point!==ee.point&&ne.link(ee),ne.isLeft!==ee.isLeft?ne.isLeft?1:-1:fe.compare(ne.segment,ee.segment))}},{key:"comparePoints",value:function(ne,ee){return ne.x<ee.x?-1:ne.x>ee.x?1:ne.y<ee.y?-1:ne.y>ee.y?1:0}}]);function Ae(Z,ne){e(this,Ae),Z.events===void 0?Z.events=[this]:Z.events.push(this),this.point=Z,this.isLeft=ne}return n(Ae,[{key:"link",value:function(ne){if(ne.point===this.point)throw new Error("Tried to link already linked events");for(var ee=ne.point.events,ye=0,Ie=ee.length;ye<Ie;ye++){var ge=ee[ye];this.point.events.push(ge),ge.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var ne=this.point.events.length,ee=0;ee<ne;ee++){var ye=this.point.events[ee];if(ye.segment.consumedBy===void 0)for(var Ie=ee+1;Ie<ne;Ie++){var ge=this.point.events[Ie];ge.consumedBy===void 0&&ye.otherSE.point.events===ge.otherSE.point.events&&ye.segment.consume(ge.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var ne=[],ee=0,ye=this.point.events.length;ee<ye;ee++){var Ie=this.point.events[ee];Ie!==this&&!Ie.segment.ringOut&&Ie.segment.isInResult()&&ne.push(Ie)}return ne}},{key:"getLeftmostComparator",value:function(ne){var ee=this,ye=new Map,Ie=function($e){var nt=$e.otherSE;ye.set($e,{sine:te(ee.point,ne.point,nt.point),cosine:re(ee.point,ne.point,nt.point)})};return function(ge,$e){ye.has(ge)||Ie(ge),ye.has($e)||Ie($e);var nt=ye.get(ge),pt=nt.sine,wt=nt.cosine,mt=ye.get($e),zt=mt.sine,Pt=mt.cosine;return pt>=0&&zt>=0?wt<Pt?1:wt>Pt?-1:0:pt<0&&zt<0?wt<Pt?-1:wt>Pt?1:0:zt<pt?-1:zt>pt?1:0}}}]),Ae}(),ae=0,fe=function(){n(Ae,null,[{key:"compare",value:function(ne,ee){var ye=ne.leftSE.point.x,Ie=ee.leftSE.point.x,ge=ne.rightSE.point.x,$e=ee.rightSE.point.x;if($e<ye)return 1;if(ge<Ie)return-1;var nt=ne.leftSE.point.y,pt=ee.leftSE.point.y,wt=ne.rightSE.point.y,mt=ee.rightSE.point.y;if(ye<Ie){if(pt<nt&&pt<wt)return 1;if(pt>nt&&pt>wt)return-1;var zt=ne.comparePoint(ee.leftSE.point);if(zt<0)return 1;if(zt>0)return-1;var Pt=ee.comparePoint(ne.rightSE.point);return Pt!==0?Pt:-1}if(ye>Ie){if(nt<pt&&nt<mt)return-1;if(nt>pt&&nt>mt)return 1;var Zt=ee.comparePoint(ne.leftSE.point);if(Zt!==0)return Zt;var We=ne.comparePoint(ee.rightSE.point);return We<0?1:We>0?-1:1}if(nt<pt)return-1;if(nt>pt)return 1;if(ge<$e){var Ge=ee.comparePoint(ne.rightSE.point);if(Ge!==0)return Ge}if(ge>$e){var Rt=ne.comparePoint(ee.rightSE.point);if(Rt<0)return 1;if(Rt>0)return-1}if(ge!==$e){var Dt=wt-nt,qt=ge-ye,Yt=mt-pt,xt=$e-Ie;if(Dt>qt&&Yt<xt)return 1;if(Dt<qt&&Yt>xt)return-1}return ge>$e?1:ge<$e||wt<mt?-1:wt>mt?1:ne.id<ee.id?-1:ne.id>ee.id?1:0}}]);function Ae(Z,ne,ee,ye){e(this,Ae),this.id=++ae,this.leftSE=Z,Z.segment=this,Z.otherSE=ne,this.rightSE=ne,ne.segment=this,ne.otherSE=Z,this.rings=ee,this.windings=ye}return n(Ae,[{key:"replaceRightSE",value:function(ne){this.rightSE=ne,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var ne=this.leftSE.point.y,ee=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:ne<ee?ne:ee},ur:{x:this.rightSE.point.x,y:ne>ee?ne:ee}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(ne){return ne.x===this.leftSE.point.x&&ne.y===this.leftSE.point.y||ne.x===this.rightSE.point.x&&ne.y===this.rightSE.point.y}},{key:"comparePoint",value:function(ne){if(this.isAnEndpoint(ne))return 0;var ee=this.leftSE.point,ye=this.rightSE.point,Ie=this.vector();if(ee.x===ye.x)return ne.x===ee.x?0:ne.x<ee.x?1:-1;var ge=(ne.y-ee.y)/Ie.y,$e=ee.x+ge*Ie.x;if(ne.x===$e)return 0;var nt=(ne.x-ee.x)/Ie.x,pt=ee.y+nt*Ie.y;return ne.y===pt?0:ne.y<pt?-1:1}},{key:"getIntersection",value:function(ne){var ee=this.bbox(),ye=ne.bbox(),Ie=L(ee,ye);if(Ie===null)return null;var ge=this.leftSE.point,$e=this.rightSE.point,nt=ne.leftSE.point,pt=ne.rightSE.point,wt=O(ee,nt)&&this.comparePoint(nt)===0,mt=O(ye,ge)&&ne.comparePoint(ge)===0,zt=O(ee,pt)&&this.comparePoint(pt)===0,Pt=O(ye,$e)&&ne.comparePoint($e)===0;if(mt&&wt)return Pt&&!zt?$e:!Pt&&zt?pt:null;if(mt)return zt&&ge.x===pt.x&&ge.y===pt.y?null:ge;if(wt)return Pt&&$e.x===nt.x&&$e.y===nt.y?null:nt;if(Pt&&zt)return null;if(Pt)return $e;if(zt)return pt;var Zt=Q(ge,this.vector(),nt,ne.vector());return Zt===null||!O(Ie,Zt)?null:G.round(Zt.x,Zt.y)}},{key:"split",value:function(ne){var ee=[],ye=ne.events!==void 0,Ie=new ce(ne,!0),ge=new ce(ne,!1),$e=this.rightSE;this.replaceRightSE(ge),ee.push(ge),ee.push(Ie);var nt=new Ae(Ie,$e,this.rings.slice(),this.windings.slice());return ce.comparePoints(nt.leftSE.point,nt.rightSE.point)>0&&nt.swapEvents(),ce.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),ye&&(Ie.checkForConsuming(),ge.checkForConsuming()),ee}},{key:"swapEvents",value:function(){var ne=this.rightSE;this.rightSE=this.leftSE,this.leftSE=ne,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var ee=0,ye=this.windings.length;ee<ye;ee++)this.windings[ee]*=-1}},{key:"consume",value:function(ne){for(var ee=this,ye=ne;ee.consumedBy;)ee=ee.consumedBy;for(;ye.consumedBy;)ye=ye.consumedBy;var Ie=Ae.compare(ee,ye);if(Ie!==0){if(Ie>0){var ge=ee;ee=ye,ye=ge}if(ee.prev===ye){var $e=ee;ee=ye,ye=$e}for(var nt=0,pt=ye.rings.length;nt<pt;nt++){var wt=ye.rings[nt],mt=ye.windings[nt],zt=ee.rings.indexOf(wt);zt===-1?(ee.rings.push(wt),ee.windings.push(mt)):ee.windings[zt]+=mt}ye.rings=null,ye.windings=null,ye.consumedBy=ee,ye.leftSE.consumedBy=ee.leftSE,ye.rightSE.consumedBy=ee.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var ne=this.prev.consumedBy||this.prev;this._beforeState=ne.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var ne=this.beforeState();this._afterState={rings:ne.rings.slice(0),windings:ne.windings.slice(0),multiPolys:[]};for(var ee=this._afterState.rings,ye=this._afterState.windings,Ie=this._afterState.multiPolys,ge=0,$e=this.rings.length;ge<$e;ge++){var nt=this.rings[ge],pt=this.windings[ge],wt=ee.indexOf(nt);wt===-1?(ee.push(nt),ye.push(pt)):ye[wt]+=pt}for(var mt=[],zt=[],Pt=0,Zt=ee.length;Pt<Zt;Pt++)if(ye[Pt]!==0){var We=ee[Pt],Ge=We.poly;if(zt.indexOf(Ge)===-1)if(We.isExterior)mt.push(Ge);else{zt.indexOf(Ge)===-1&&zt.push(Ge);var Rt=mt.indexOf(We.poly);Rt!==-1&&mt.splice(Rt,1)}}for(var Dt=0,qt=mt.length;Dt<qt;Dt++){var Yt=mt[Dt].multiPoly;Ie.indexOf(Yt)===-1&&Ie.push(Yt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var ne=this.beforeState().multiPolys,ee=this.afterState().multiPolys;switch(ct.type){case"union":{var ye=ne.length===0,Ie=ee.length===0;this._isInResult=ye!==Ie;break}case"intersection":{var ge,$e;ne.length<ee.length?(ge=ne.length,$e=ee.length):(ge=ee.length,$e=ne.length),this._isInResult=$e===ct.numMultiPolys&&ge<$e;break}case"xor":{var nt=Math.abs(ne.length-ee.length);this._isInResult=nt%2===1;break}case"difference":{var pt=function(mt){return mt.length===1&&mt[0].isSubject};this._isInResult=pt(ne)!==pt(ee);break}default:throw new Error("Unrecognized operation type found ".concat(ct.type))}return this._isInResult}}],[{key:"fromRing",value:function(ne,ee,ye){var Ie,ge,$e,nt=ce.comparePoints(ne,ee);if(nt<0)Ie=ne,ge=ee,$e=1;else if(nt>0)Ie=ee,ge=ne,$e=-1;else throw new Error("Tried to create degenerate segment at [".concat(ne.x,", ").concat(ne.y,"]"));var pt=new ce(Ie,!0),wt=new ce(ge,!1);return new Ae(pt,wt,[ye],[$e])}}]),Ae}(),le=function(){function Ae(Z,ne,ee){if(e(this,Ae),!Array.isArray(Z)||Z.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=ne,this.isExterior=ee,this.segments=[],typeof Z[0][0]!="number"||typeof Z[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var ye=G.round(Z[0][0],Z[0][1]);this.bbox={ll:{x:ye.x,y:ye.y},ur:{x:ye.x,y:ye.y}};for(var Ie=ye,ge=1,$e=Z.length;ge<$e;ge++){if(typeof Z[ge][0]!="number"||typeof Z[ge][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var nt=G.round(Z[ge][0],Z[ge][1]);nt.x===Ie.x&&nt.y===Ie.y||(this.segments.push(fe.fromRing(Ie,nt,this)),nt.x<this.bbox.ll.x&&(this.bbox.ll.x=nt.x),nt.y<this.bbox.ll.y&&(this.bbox.ll.y=nt.y),nt.x>this.bbox.ur.x&&(this.bbox.ur.x=nt.x),nt.y>this.bbox.ur.y&&(this.bbox.ur.y=nt.y),Ie=nt)}(ye.x!==Ie.x||ye.y!==Ie.y)&&this.segments.push(fe.fromRing(Ie,ye,this))}return n(Ae,[{key:"getSweepEvents",value:function(){for(var ne=[],ee=0,ye=this.segments.length;ee<ye;ee++){var Ie=this.segments[ee];ne.push(Ie.leftSE),ne.push(Ie.rightSE)}return ne}}]),Ae}(),pe=function(){function Ae(Z,ne){if(e(this,Ae),!Array.isArray(Z))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new le(Z[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var ee=1,ye=Z.length;ee<ye;ee++){var Ie=new le(Z[ee],this,!1);Ie.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ie.bbox.ll.x),Ie.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ie.bbox.ll.y),Ie.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ie.bbox.ur.x),Ie.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ie.bbox.ur.y),this.interiorRings.push(Ie)}this.multiPoly=ne}return n(Ae,[{key:"getSweepEvents",value:function(){for(var ne=this.exteriorRing.getSweepEvents(),ee=0,ye=this.interiorRings.length;ee<ye;ee++)for(var Ie=this.interiorRings[ee].getSweepEvents(),ge=0,$e=Ie.length;ge<$e;ge++)ne.push(Ie[ge]);return ne}}]),Ae}(),Fe=function(){function Ae(Z,ne){if(e(this,Ae),!Array.isArray(Z))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof Z[0][0][0]=="number"&&(Z=[Z])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var ee=0,ye=Z.length;ee<ye;ee++){var Ie=new pe(Z[ee],this);Ie.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=Ie.bbox.ll.x),Ie.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=Ie.bbox.ll.y),Ie.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=Ie.bbox.ur.x),Ie.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=Ie.bbox.ur.y),this.polys.push(Ie)}this.isSubject=ne}return n(Ae,[{key:"getSweepEvents",value:function(){for(var ne=[],ee=0,ye=this.polys.length;ee<ye;ee++)for(var Ie=this.polys[ee].getSweepEvents(),ge=0,$e=Ie.length;ge<$e;ge++)ne.push(Ie[ge]);return ne}}]),Ae}(),Be=function(){n(Ae,null,[{key:"factory",value:function(ne){for(var ee=[],ye=0,Ie=ne.length;ye<Ie;ye++){var ge=ne[ye];if(!(!ge.isInResult()||ge.ringOut)){for(var $e=null,nt=ge.leftSE,pt=ge.rightSE,wt=[nt],mt=nt.point,zt=[];$e=nt,nt=pt,wt.push(nt),nt.point!==mt;)for(;;){var Pt=nt.getAvailableLinkedEvents();if(Pt.length===0){var Zt=wt[0].point,We=wt[wt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Zt.x,",")+" ".concat(Zt.y,"]. Last matching segment found ends at")+" [".concat(We.x,", ").concat(We.y,"]."))}if(Pt.length===1){pt=Pt[0].otherSE;break}for(var Ge=null,Rt=0,Dt=zt.length;Rt<Dt;Rt++)if(zt[Rt].point===nt.point){Ge=Rt;break}if(Ge!==null){var qt=zt.splice(Ge)[0],Yt=wt.splice(qt.index);Yt.unshift(Yt[0].otherSE),ee.push(new Ae(Yt.reverse()));continue}zt.push({index:wt.length,point:nt.point});var xt=nt.getLeftmostComparator($e);pt=Pt.sort(xt)[0].otherSE;break}ee.push(new Ae(wt))}}return ee}}]);function Ae(Z){e(this,Ae),this.events=Z;for(var ne=0,ee=Z.length;ne<ee;ne++)Z[ne].segment.ringOut=this;this.poly=null}return n(Ae,[{key:"getGeom",value:function(){for(var ne=this.events[0].point,ee=[ne],ye=1,Ie=this.events.length-1;ye<Ie;ye++){var ge=this.events[ye].point,$e=this.events[ye+1].point;$(ge,ne,$e)!==0&&(ee.push(ge),ne=ge)}if(ee.length===1)return null;var nt=ee[0],pt=ee[1];$(nt,ne,pt)===0&&ee.shift(),ee.push(ee[0]);for(var wt=this.isExteriorRing()?1:-1,mt=this.isExteriorRing()?0:ee.length-1,zt=this.isExteriorRing()?ee.length:-1,Pt=[],Zt=mt;Zt!=zt;Zt+=wt)Pt.push([ee[Zt].x,ee[Zt].y]);return Pt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var ne=this.enclosingRing();this._isExteriorRing=ne?!ne.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var ne=this.events[0],ee=1,ye=this.events.length;ee<ye;ee++){var Ie=this.events[ee];ce.compare(ne,Ie)>0&&(ne=Ie)}for(var ge=ne.segment.prevInResult(),$e=ge?ge.prevInResult():null;;){if(!ge)return null;if(!$e)return ge.ringOut;if($e.ringOut!==ge.ringOut)return $e.ringOut.enclosingRing()!==ge.ringOut?ge.ringOut:ge.ringOut.enclosingRing();ge=$e.prevInResult(),$e=ge?ge.prevInResult():null}}}]),Ae}(),Ze=function(){function Ae(Z){e(this,Ae),this.exteriorRing=Z,Z.poly=this,this.interiorRings=[]}return n(Ae,[{key:"addInterior",value:function(ne){this.interiorRings.push(ne),ne.poly=this}},{key:"getGeom",value:function(){var ne=[this.exteriorRing.getGeom()];if(ne[0]===null)return null;for(var ee=0,ye=this.interiorRings.length;ee<ye;ee++){var Ie=this.interiorRings[ee].getGeom();Ie!==null&&ne.push(Ie)}return ne}}]),Ae}(),it=function(){function Ae(Z){e(this,Ae),this.rings=Z,this.polys=this._composePolys(Z)}return n(Ae,[{key:"getGeom",value:function(){for(var ne=[],ee=0,ye=this.polys.length;ee<ye;ee++){var Ie=this.polys[ee].getGeom();Ie!==null&&ne.push(Ie)}return ne}},{key:"_composePolys",value:function(ne){for(var ee=[],ye=0,Ie=ne.length;ye<Ie;ye++){var ge=ne[ye];if(!ge.poly)if(ge.isExteriorRing())ee.push(new Ze(ge));else{var $e=ge.enclosingRing();$e.poly||ee.push(new Ze($e)),$e.poly.addInterior(ge)}}return ee}}]),Ae}(),ot=function(){function Ae(Z){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fe.compare;e(this,Ae),this.queue=Z,this.tree=new g(ne),this.segments=[]}return n(Ae,[{key:"process",value:function(ne){var ee=ne.segment,ye=[];if(ne.consumedBy)return ne.isLeft?this.queue.remove(ne.otherSE):this.tree.remove(ee),ye;var Ie=ne.isLeft?this.tree.insert(ee):this.tree.find(ee);if(!Ie)throw new Error("Unable to find segment #".concat(ee.id," ")+"[".concat(ee.leftSE.point.x,", ").concat(ee.leftSE.point.y,"] -> ")+"[".concat(ee.rightSE.point.x,", ").concat(ee.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var ge=Ie,$e=Ie,nt=void 0,pt=void 0;nt===void 0;)ge=this.tree.prev(ge),ge===null?nt=null:ge.key.consumedBy===void 0&&(nt=ge.key);for(;pt===void 0;)$e=this.tree.next($e),$e===null?pt=null:$e.key.consumedBy===void 0&&(pt=$e.key);if(ne.isLeft){var wt=null;if(nt){var mt=nt.getIntersection(ee);if(mt!==null&&(ee.isAnEndpoint(mt)||(wt=mt),!nt.isAnEndpoint(mt)))for(var zt=this._splitSafely(nt,mt),Pt=0,Zt=zt.length;Pt<Zt;Pt++)ye.push(zt[Pt])}var We=null;if(pt){var Ge=pt.getIntersection(ee);if(Ge!==null&&(ee.isAnEndpoint(Ge)||(We=Ge),!pt.isAnEndpoint(Ge)))for(var Rt=this._splitSafely(pt,Ge),Dt=0,qt=Rt.length;Dt<qt;Dt++)ye.push(Rt[Dt])}if(wt!==null||We!==null){var Yt=null;if(wt===null)Yt=We;else if(We===null)Yt=wt;else{var xt=ce.comparePoints(wt,We);Yt=xt<=0?wt:We}this.queue.remove(ee.rightSE),ye.push(ee.rightSE);for(var Et=ee.split(Yt),St=0,kt=Et.length;St<kt;St++)ye.push(Et[St])}ye.length>0?(this.tree.remove(ee),ye.push(ne)):(this.segments.push(ee),ee.prev=nt)}else{if(nt&&pt){var cn=nt.getIntersection(pt);if(cn!==null){if(!nt.isAnEndpoint(cn))for(var an=this._splitSafely(nt,cn),Qn=0,tr=an.length;Qn<tr;Qn++)ye.push(an[Qn]);if(!pt.isAnEndpoint(cn))for(var lr=this._splitSafely(pt,cn),Le=0,de=lr.length;Le<de;Le++)ye.push(lr[Le])}}this.tree.remove(ee)}return ye}},{key:"_splitSafely",value:function(ne,ee){this.tree.remove(ne);var ye=ne.rightSE;this.queue.remove(ye);var Ie=ne.split(ee);return Ie.push(ye),ne.consumedBy===void 0&&this.tree.insert(ne),Ie}}]),Ae}(),ut=typeof process<"u"&&wH.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,st=typeof process<"u"&&wH.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,ct=new(function(){function Ae(){e(this,Ae)}return n(Ae,[{key:"run",value:function(ne,ee,ye){ct.type=ne,G.reset();for(var Ie=[new Fe(ee,!0)],ge=0,$e=ye.length;ge<$e;ge++)Ie.push(new Fe(ye[ge],!1));if(ct.numMultiPolys=Ie.length,ct.type==="difference")for(var nt=Ie[0],pt=1;pt<Ie.length;)L(Ie[pt].bbox,nt.bbox)!==null?pt++:Ie.splice(pt,1);if(ct.type==="intersection"){for(var wt=0,mt=Ie.length;wt<mt;wt++)for(var zt=Ie[wt],Pt=wt+1,Zt=Ie.length;Pt<Zt;Pt++)if(L(zt.bbox,Ie[Pt].bbox)===null)return[]}for(var We=new g(ce.compare),Ge=0,Rt=Ie.length;Ge<Rt;Ge++)for(var Dt=Ie[Ge].getSweepEvents(),qt=0,Yt=Dt.length;qt<Yt;qt++)if(We.insert(Dt[qt]),We.size>ut)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var xt=new ot(We),Et=We.size,St=We.pop();St;){var kt=St.key;if(We.size===Et){var cn=kt.segment;throw new Error("Unable to pop() ".concat(kt.isLeft?"left":"right"," SweepEvent ")+"[".concat(kt.point.x,", ").concat(kt.point.y,"] from segment #").concat(cn.id," ")+"[".concat(cn.leftSE.point.x,", ").concat(cn.leftSE.point.y,"] -> ")+"[".concat(cn.rightSE.point.x,", ").concat(cn.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(We.size>ut)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(xt.segments.length>st)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var an=xt.process(kt),Qn=0,tr=an.length;Qn<tr;Qn++){var lr=an[Qn];lr.consumedBy===void 0&&We.insert(lr)}Et=We.size,St=We.pop()}G.reset();var Le=Be.factory(xt.segments),de=new it(Le);return de.getGeom()}}]),Ae}());return{union:function(Z){for(var ne=arguments.length,ee=new Array(ne>1?ne-1:0),ye=1;ye<ne;ye++)ee[ye-1]=arguments[ye];return ct.run("union",Z,ee)},intersection:function(Z){for(var ne=arguments.length,ee=new Array(ne>1?ne-1:0),ye=1;ye<ne;ye++)ee[ye-1]=arguments[ye];return ct.run("intersection",Z,ee)},xor:function(Z){for(var ne=arguments.length,ee=new Array(ne>1?ne-1:0),ye=1;ye<ne;ye++)ee[ye-1]=arguments[ye];return ct.run("xor",Z,ee)},difference:function(Z){for(var ne=arguments.length,ee=new Array(ne>1?ne-1:0),ye=1;ye<ne;ye++)ee[ye-1]=arguments[ye];return ct.run("difference",Z,ee)}}}(),OV.exports),nLe=fy(tLe);function rLe(e,t,n){return n===void 0&&(n={}),e=RV(e),t=RV(t),e=nLe.intersection(e.coordinates,t.coordinates),e.length===0?null:e.length===1?JDe(e[0],n.properties):eLe(e,n.properties)}var oLe=function(e){return function(t,n,r){var o=r.value,i=new Map;return r.value=function(){var l=this,c=arguments;!i.get(l)&&(o.apply(l,c),i.set(l,!0),setTimeout(function(){return i.delete(l)},e))},r}},iLe=window&&window.__decorate||function(e,t,n,r){var o,i=arguments.length,l=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;0<=c;c--)(o=e[c])&&(l=(i<3?o(l):3<i?o(t,n,l):o(t,n))||l);return 3<i&&l&&Object.defineProperty(t,n,l),l},DN=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},LN=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},aLe=["DIV","SPAN","A"],NN=["data-azure-maps-attribution-minzoom","data-azure-maps-attribution-maxzoom","data-azure-maps-attribution-geometry","data-azure-maps-attribution-tileset","data-azure-maps-attribution-order","data-azure-maps-attribution-dynamic"],sLe=LN(["href"],DN(NN),!1),DV=function(){function e(t,n){var r=this;this.lastFetchState={bounds:null,zoom:null},this.getElement=function(){return r.element},this.element=t,this.attributionChangeCallback=n}return e.prototype.equals=function(t){return this.stringRepresentation===t.stringRepresentation},Object.defineProperty(e.prototype,"stringRepresentation",{get:function(){return[this.minZoom!==void 0?"minzoom=".concat(this.minZoom):"",this.maxZoom!==void 0?"maxzoom=".concat(this.maxZoom):"",this.geometry!==void 0?this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry").value:"",this.tilesetId!==void 0?"tilesetId=".concat(this.tilesetId):"",this.dynamic?"dynamic":""].filter(function(t){return 0<t.length}).join(";")},enumerable:!1,configurable:!0}),e.applicable=function(t){return Array.from(t.attributes).map(function(n){return NN.includes(n.name)}).reduce(function(n,r){return n||r},!1)},Object.defineProperty(e.prototype,"minZoom",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-minzoom");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxZoom",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-maxzoom");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"geometry",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-geometry");if(t&&t.value)try{return JSON.parse(t.value)}catch{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilesetId",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-tileset");return t&&t.value?t.value:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){var t=this.element.attributes.getNamedItem("data-azure-maps-attribution-order");return t&&!isNaN(t.value)?parseInt(t.value):void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamic",{get:function(){return this.element.attributes.getNamedItem("data-azure-maps-attribution-dynamic")!==null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hidesElement",{get:function(){return this.element.style.display=="none"},enumerable:!1,configurable:!0}),e.prototype.forceHide=function(){this.element.style.display="none"},e.prototype.satisfied=function(t){var n=!this.minZoom||!t.zoom||t.zoom>=this.minZoom,r=!this.maxZoom||!t.zoom||t.zoom<=this.maxZoom,o=!0;return this.geometry&&t.bounds&&(o=rLe({type:"Feature",geometry:this.geometry,properties:{}},{type:"Feature",geometry:{type:"Polygon",coordinates:[[so.getNorthWest(t.bounds),so.getNorthEast(t.bounds),so.getSouthEast(t.bounds),so.getSouthWest(t.bounds),so.getNorthWest(t.bounds)]]},properties:{}})!==null),n&&r&&o},e.prototype.apply=function(t,c){var r=this,o=(c===void 0&&(c=null),this.satisfied(t.getCamera())),i=this.dynamic&&this.tilesetId,l=this.hidesElement,c=c&&["dragend","zoomend","pitchend"].includes(c.type);return o||l?o&&(l||i)&&(o&&l&&this.element.style.removeProperty("display"),i)&&(c?t.events.addOnce("idle",function(f){return r.fetchAndApplyDynamicAttribution(t)}):this.fetchAndApplyDynamicAttribution(t)):this.element.style.display="none",o===l},e.prototype.fetchAndApplyDynamicAttribution=function(t){var n,r,o,i=this,l=t.getCamera();this.lastFetchState&&so.containsBoundingBox(this.lastFetchState.bounds,l.bounds)&&Math.floor(this.lastFetchState.zoom)==Math.floor(l.zoom)||(n=yL(l.center,so.getSouthWest(l.bounds),e.viewportBufferExpansionRatio),o=((r=yL(l.center,so.getNorthEast(l.bounds),e.viewportBufferExpansionRatio))[0]<n[0]?[[n[0],n[1],180,r[1]],[-180,n[1],r[0],r[1]]]:[[n[0],n[1],r[0],r[1]]]).map(function(f){var f=new URLSearchParams({"api-version":"2.1",tilesetId:i.tilesetId,zoom:l.zoom!==void 0?"".concat(Math.floor(l.zoom)):void 0,bounds:f.join(",")}),g="".concat("https://{{azMapsDomain}}","/map/attribution"),p={url:g,headers:{}},g=(t._substituteDomainLanguageViewAndSignInRequest(g,p),"".concat(p.url).concat(p.url.includes("?")?"&":"?").concat(f.toString()));return t._sendRequest(g,"Attribution",p.headers).then(function(v){return v.json()})}),Promise.all(o).then(function(c){i.applyAttributionResponse(c),i.lastFetchState={bounds:new so([n[0],n[1],r[0],r[1]]),zoom:l.zoom}}).catch(function(c){return console.error(c)}))},e.prototype.applyAttributionResponse=function(l){var n,r,o,i=this,l=l.map(function(c){return c.copyrights||[]}).reduce(function(c,f){return LN(LN([],DN(c),!1),DN(f),!1)},[]);l.length!=0&&((l=HA.parseWithFilter(l.join(""),function(c){return!0},function(c){return c},function(){return i.element.innerHTML="",i.element}))===null?console.warn("Dynamic attribution is empty after filtering"):(n=typeof l=="string"?((n=document.createElement("span")).innerHTML=l,n):l,o=n===this.element?(r=document.createElement("span"),Array.from(this.element.childNodes).forEach(function(c){return r.appendChild(c)}),r):n,Array.from(this.element.attributes).filter(function(c){return NN.includes(c.name)}).forEach(function(c){return o.attributes.setNamedItem(c.cloneNode())}),o.style.display=this.element.style.display,l=this.element.parentElement,this.element.remove(),l.append(o),this.element=o,this.attributionChangeCallback(this)))},e.viewportBufferExpansionRatio=2,iLe([oLe(1e3)],e.prototype,"fetchAndApplyDynamicAttribution",null),e}(),gg=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},nw=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},lLe=[/all rights reserved/gi],uLe=function(){function e(t,n,r){var o,i=this;this.rules=[],this.virtualContext=((o=document.createElement("span")).className="azure-map-copyright-context",o),this.renderContext=this.virtualContext.cloneNode(!1),this.addAttributionFromSource=function(l){},this.removeAttributionFromSource=function(l){},this.getMapStyleVisibleSources=function(){var l=i.map._getMap(),c=l.getStyle();return Object.entries(c.sources).filter(function(f){var p=gg(f,1)[0];return c.layers.filter(function(g){return g&&g.source==p}).reduce(function(g,v){return!(v.layout&&v.layout.visibility==="none"||v.paint&&v.paint["icon-opacity"]===0&&v.paint["text-opacity"]===0)||g},!1)}).map(function(f){return f=gg(f,1)[0],l.getSource(f)})},this.loadAttributionOnceSourcesLoaded=function(){var l=i.getMapStyleVisibleSources();Promise.all(l.map(function(c){return new Promise(function(f,p){var g;"tiles"in c||(c==null?void 0:c.type)==="geojson"?f(c):((g=c).on("data",function v(w){w.sourceDataType=="metadata"&&(g.off("data",v),f(c))}),g.on("error",function v(w){g.off("error",v),p(w)}))}).then(function(f){return{status:"fulfilled",value:f}}).catch(function(f){return{status:"rejected",reason:f}})})).then(function(c){i.reloadAttribution()})},this.reloadAttribution=function(){var f=i.getMapStyleVisibleSources(),l=new Set,c={},f=f.filter(function(C){return"attribution"in C&&C.attribution&&"tiles"in C&&C.tiles instanceof Array&&0<C.tiles.length}).map(function(C){return HA.parseWithFilter((C=C.attribution)!=null?C:"",function(T){return aLe.includes(T.tagName)&&Array.from(T.attributes).map(function(k){return sLe.includes(k.name)}).reduce(function(k,P){return k&&P},!0)},function(T){var k,P=null;return T instanceof HTMLElement&&DV.applicable(T)&&(P=new DV(T,function(){return i.renderAttribution()}),l.add(P),P.order!==void 0)&&(T.style.order="".concat(P.order)),P&&T instanceof HTMLElement&&(!((k=P.stringRepresentation)in c)||P.order!==void 0&&c[k].order!==void 0&&P.order<c[k].order||P.order!==void 0&&c[k].order===void 0)&&(c[k]=P),T},function(){return document.createElement("span")})}),p=new Set(Object.values(c)),v=new Set(nw([],gg(l),!1).filter(function(C){return!p.has(C)})),g=new Set(nw([],gg(v),!1).map(function(C){return C.getElement()})),v=(nw([],gg(g),!1).filter(function(C){return C.parentElement!==null}).forEach(function(C){return C.parentElement.removeChild(C)}),i.rules=Object.values(c),f.filter(function(C){return typeof C=="string"||!g.has(C)}).map(function(C){return typeof C=="string"?new Text(C):C})),w=document.createElement("span");0<v.length?v.forEach(function(C){return w.appendChild(C)}):i.getDefaultAttribution().forEach(function(C){return w.appendChild(C)}),i.virtualContext=w,i.copyrightControl.setOptions({copyrightContent:i.renderContext}),i.applyRules(),i.renderAttribution()},this.applyRules=function(l){l===void 0&&(l=null),i.rules.reduce(function(c,f){return f=f.apply(i.map,l),c||f},!1)&&i.renderAttribution()},this.renderAttribution=function(){var l=function(p){return Array.from(p.style.display!="none"?p.children:[]).map(function(g){return l(g)}).reduce(function(g,v){return nw(nw([],gg(g),!1),gg(v),!1)},Array.from(p.style.display!="none"?p.childNodes:[]).filter(function(g){return g.nodeType==g.TEXT_NODE}))},c=i.virtualContext.cloneNode(!0),f=l(c);f.forEach(function(p){return p.textContent=nw([],gg(lLe),!1).reduce(function(g,v){return g.replace(v,"").trim()},p.textContent)}),f.reduce(function(p,g){return p.has(g.textContent)?(g.textContent="",g.parentElement&&g.parentElement.removeChild(g)):p.add(g.textContent),p},new Set),i.renderContext.innerHTML="",Array.from(c.childNodes).forEach(function(p){return i.renderContext.appendChild(p)})},this.map=t,this.copyrightControl=n,this.options=r}return e.prototype.addToMap=function(){this.map.events.add("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.add("dragend",this.applyRules),this.map.events.add("zoomend",this.applyRules),this.map.events.add("pitchend",this.applyRules)},e.prototype.removeFromMap=function(){this.map.events.remove("stylechanged",this.loadAttributionOnceSourcesLoaded),this.map.events.remove("dragend",this.applyRules),this.map.events.remove("zoomend",this.applyRules),this.map.events.remove("pitchend",this.applyRules)},e.prototype.getDefaultAttribution=function(){return this.copyrightControl.getDefaultAttributions().map(function(t){return t=t,(n=document.createElement("a")).textContent=t,n;var n})},e}(),CZ=function(e,t){return(CZ=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,r){n.__proto__=r}:function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}))(e,t)};function kl(e,t){function n(){this.constructor=e}CZ(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function LV(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function pn(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,[])).next())})}function mn(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}}function cLe(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l}function PB(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(cLe(arguments[t]));return e}var SZ=function(e,t){return(SZ=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(n,r){n.__proto__=r}:function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}))(e,t)};function hc(e,t){function n(){this.constructor=e}SZ(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var mi=function(){return(mi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function zr(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,[])).next())})}function Br(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}}function aM(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],l=0,c=i.length;l<c;l++,o++)r[o]=i[l];return r}var Gc,xs,r_,Gr,Ow,V1,SP,EP,Vp,Ss,Cr,Wp,yd,gi,TP,Dw,Ig,q1,zg,FN,Ws,DS,wu,yt={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",REGIONAL_AUTH_NON_MSI_QUERY_STRING:"allowestsrnonmsi=true",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},wE=[yt.OPENID_SCOPE,yt.PROFILE_SCOPE,yt.OFFLINE_ACCESS_SCOPE],NV=aM(wE,[yt.EMAIL_SCOPE]),Zl=(function(e){e.CONTENT_TYPE="Content-Type",e.RETRY_AFTER="Retry-After",e.CCS_HEADER="X-AnchorMailbox",e.WWWAuthenticate="WWW-Authenticate",e.AuthenticationInfo="Authentication-Info",e.X_MS_REQUEST_ID="x-ms-request-id",e.X_MS_HTTP_VERSION="x-ms-httpver"}(Gc=Gc||{}),function(e){e.ID_TOKEN="idtoken",e.CLIENT_INFO="client.info",e.ADAL_ID_TOKEN="adal.idtoken",e.ERROR="error",e.ERROR_DESC="error.description",e.ACTIVE_ACCOUNT="active-account",e.ACTIVE_ACCOUNT_FILTERS="active-account-filters"}(xs=xs||{}),function(e){e.COMMON="common",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers"}(r_=r_||{}),function(e){e.CLIENT_ID="client_id",e.REDIRECT_URI="redirect_uri",e.RESPONSE_TYPE="response_type",e.RESPONSE_MODE="response_mode",e.GRANT_TYPE="grant_type",e.CLAIMS="claims",e.SCOPE="scope",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.REFRESH_TOKEN="refresh_token",e.EXPIRES_IN="expires_in",e.STATE="state",e.NONCE="nonce",e.PROMPT="prompt",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info",e.CODE="code",e.CODE_CHALLENGE="code_challenge",e.CODE_CHALLENGE_METHOD="code_challenge_method",e.CODE_VERIFIER="code_verifier",e.CLIENT_REQUEST_ID="client-request-id",e.X_CLIENT_SKU="x-client-SKU",e.X_CLIENT_VER="x-client-VER",e.X_CLIENT_OS="x-client-OS",e.X_CLIENT_CPU="x-client-CPU",e.X_CLIENT_CURR_TELEM="x-client-current-telemetry",e.X_CLIENT_LAST_TELEM="x-client-last-telemetry",e.X_MS_LIB_CAPABILITY="x-ms-lib-capability",e.X_APP_NAME="x-app-name",e.X_APP_VER="x-app-ver",e.POST_LOGOUT_URI="post_logout_redirect_uri",e.ID_TOKEN_HINT="id_token_hint",e.DEVICE_CODE="device_code",e.CLIENT_SECRET="client_secret",e.CLIENT_ASSERTION="client_assertion",e.CLIENT_ASSERTION_TYPE="client_assertion_type",e.TOKEN_TYPE="token_type",e.REQ_CNF="req_cnf",e.OBO_ASSERTION="assertion",e.REQUESTED_TOKEN_USE="requested_token_use",e.ON_BEHALF_OF="on_behalf_of",e.FOCI="foci",e.CCS_HEADER="X-AnchorMailbox",e.RETURN_SPA_CODE="return_spa_code",e.NATIVE_BROKER="nativebroker",e.LOGOUT_HINT="logout_hint"}(Gr=Gr||{}),function(e){e.ACCESS_TOKEN="access_token",e.XMS_CC="xms_cc"}(Ow=Ow||{}),{LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"}),FV=(function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ID_TOKEN="id_token",e.DOMAIN_HINT="domain_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(V1=V1||{}),{PLAIN:"plain",S256:"S256"}),zN=(function(e){e.QUERY="query",e.FRAGMENT="fragment",e.FORM_POST="form_post"}(SP=SP||{}),function(e){e.IMPLICIT_GRANT="implicit",e.AUTHORIZATION_CODE_GRANT="authorization_code",e.CLIENT_CREDENTIALS_GRANT="client_credentials",e.RESOURCE_OWNER_PASSWORD_GRANT="password",e.REFRESH_TOKEN_GRANT="refresh_token",e.DEVICE_CODE_GRANT="device_code",e.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"}(EP=EP||{}),function(e){e.MSSTS_ACCOUNT_TYPE="MSSTS",e.ADFS_ACCOUNT_TYPE="ADFS",e.MSAV1_ACCOUNT_TYPE="MSA",e.GENERIC_ACCOUNT_TYPE="Generic"}(Vp=Vp||{}),function(e){e.CACHE_KEY_SEPARATOR="-",e.CLIENT_INFO_SEPARATOR="."}(Ss=Ss||{}),function(e){e.ID_TOKEN="IdToken",e.ACCESS_TOKEN="AccessToken",e.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",e.REFRESH_TOKEN="RefreshToken"}(Cr=Cr||{}),function(e){e[e.ADFS=1001]="ADFS",e[e.MSA=1002]="MSA",e[e.MSSTS=1003]="MSSTS",e[e.GENERIC=1004]="GENERIC",e[e.ACCESS_TOKEN=2001]="ACCESS_TOKEN",e[e.REFRESH_TOKEN=2002]="REFRESH_TOKEN",e[e.ID_TOKEN=2003]="ID_TOKEN",e[e.APP_METADATA=3001]="APP_METADATA",e[e.UNDEFINED=9999]="UNDEFINED"}(Wp=Wp||{}),"appmetadata"),dLe="client_info",G1="1",W1={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:86400},ml=(function(e){e.CONFIG="config",e.CACHE="cache",e.NETWORK="network",e.HARDCODED_VALUES="hardcoded_values"}(yd=yd||{}),{SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"}),K1=(function(e){e.BEARER="Bearer",e.POP="pop",e.SSH="ssh-cert"}(gi=gi||{}),{DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"}),zV={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},eI=(function(e){e.username="username",e.password="password"}(TP=TP||{}),function(e){e[e.httpSuccess=200]="httpSuccess",e[e.httpBadRequest=400]="httpBadRequest"}(Dw=Dw||{}),function(e){e.FAILED_AUTO_DETECTION="1",e.INTERNAL_CACHE="2",e.ENVIRONMENT_VARIABLE="3",e.IMDS="4"}(Ig=Ig||{}),function(e){e.CONFIGURED_MATCHES_DETECTED="1",e.CONFIGURED_NO_AUTO_DETECTION="2",e.CONFIGURED_NOT_DETECTED="3",e.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",e.AUTO_DETECTION_REQUESTED_FAILED="5"}(q1=q1||{}),function(e){e.NO_CACHE_HIT="0",e.FORCE_REFRESH="1",e.NO_CACHED_ACCESS_TOKEN="2",e.CACHED_ACCESS_TOKEN_EXPIRED="3",e.REFRESH_CACHED_ACCESS_TOKEN="4",e.CLAIMS_REQUESTED_CACHE_SKIPPED="5"}(zg=zg||{}),function(e){e.Jwt="JWT",e.Jwk="JWK",e.Pop="pop"}(FN=FN||{}),{unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."},postRequestFailed:{code:"post_request_failed",desc:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."}}),cr=function(e){function t(n,r,o){var i=this,i=e.call(this,r?n+": "+r:n)||this;return Object.setPrototypeOf(i,t.prototype),i.errorCode=n||yt.EMPTY_STRING,i.errorMessage=r||yt.EMPTY_STRING,i.subError=o||yt.EMPTY_STRING,i.name="AuthError",i}return hc(t,e),t.prototype.setCorrelationId=function(n){this.correlationId=n},t.createUnexpectedError=function(n){return new t(eI.unexpectedError.code,eI.unexpectedError.desc+": "+n)},t.createPostRequestFailed=function(n){return new t(eI.postRequestFailed.code,eI.postRequestFailed.desc+": "+n)},t}(Error),IP={createNewGuid:function(){throw cr.createUnexpectedError("Crypto interface - createNewGuid() has not been implemented")},base64Decode:function(){throw cr.createUnexpectedError("Crypto interface - base64Decode() has not been implemented")},base64Encode:function(){throw cr.createUnexpectedError("Crypto interface - base64Encode() has not been implemented")},generatePkceCodes:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - generatePkceCodes() has not been implemented")})})},getPublicKeyThumbprint:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - getPublicKeyThumbprint() has not been implemented")})})},removeTokenBindingKey:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - removeTokenBindingKey() has not been implemented")})})},clearKeystore:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - clearKeystore() has not been implemented")})})},signJwt:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - signJwt() has not been implemented")})})},hashString:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Crypto interface - hashString() has not been implemented")})})}},Tn={clientInfoDecodingError:{code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},clientInfoEmptyError:{code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},tokenParsingError:{code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},nullOrEmptyToken:{code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},endpointResolutionError:{code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},networkError:{code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},unableToGetOpenidConfigError:{code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},hashNotDeserialized:{code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},blankGuidGenerated:{code:"blank_guid_generated",desc:"The guid generated was blank. Please review the trace to determine the root cause."},invalidStateError:{code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},stateMismatchError:{code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},stateNotFoundError:{code:"state_not_found",desc:"State not found"},nonceMismatchError:{code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},nonceNotFoundError:{code:"nonce_not_found",desc:"nonce not found"},authTimeNotFoundError:{code:"auth_time_not_found",desc:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information."},maxAgeTranspiredError:{code:"max_age_transpired",desc:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication."},noTokensFoundError:{code:"no_tokens_found",desc:"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken()."},multipleMatchingTokens:{code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account."},multipleMatchingAccounts:{code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},multipleMatchingAppMetadata:{code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},tokenRequestCannotBeMade:{code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},appendEmptyScopeError:{code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},removeEmptyScopeError:{code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},appendScopeSetError:{code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},emptyInputScopeSetError:{code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},DeviceCodePollingCancelled:{code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},DeviceCodeExpired:{code:"device_code_expired",desc:"Device code is expired."},DeviceCodeUnknownError:{code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},NoAccountInSilentRequest:{code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},invalidCacheRecord:{code:"invalid_cache_record",desc:"Cache record object was null or undefined."},invalidCacheEnvironment:{code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},noAccountFound:{code:"no_account_found",desc:"No account found in cache for given key."},CachePluginError:{code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},noCryptoObj:{code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},unexpectedAccountType:{code:"unexpected_account_type",desc:"Unexpected account type."},unexpectedCredentialType:{code:"unexpected_credential_type",desc:"Unexpected credential type."},invalidAssertion:{code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},invalidClientCredential:{code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},tokenRefreshRequired:{code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},userTimeoutReached:{code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},tokenClaimsRequired:{code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},noAuthorizationCodeFromServer:{code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},noAzureRegionDetected:{code:"no_azure_region_detected",desc:"No azure region was detected and no fallback was made available"},accessTokenEntityNullError:{code:"access_token_entity_null",desc:"Access token entity is null, please check logs and cache to ensure a valid access token is present."},bindingKeyNotRemovedError:{code:"binding_key_not_removed",desc:"Could not remove the credential's binding key from storage."},logoutNotSupported:{code:"end_session_endpoint_not_supported",desc:"Provided authority does not support logout."},keyIdMissing:{code:"key_id_missing",desc:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key."},noNetworkConnectivity:{code:"no_network_connectivity",desc:"No network connectivity. Check your internet connection."},userCanceledError:{code:"user_canceled",desc:"User canceled the flow."}},Gn=function(e){function t(n,r){return n=e.call(this,n,r)||this,n.name="ClientAuthError",Object.setPrototypeOf(n,t.prototype),n}return hc(t,e),t.createClientInfoDecodingError=function(n){return new t(Tn.clientInfoDecodingError.code,Tn.clientInfoDecodingError.desc+" Failed with error: "+n)},t.createClientInfoEmptyError=function(){return new t(Tn.clientInfoEmptyError.code,""+Tn.clientInfoEmptyError.desc)},t.createTokenParsingError=function(n){return new t(Tn.tokenParsingError.code,Tn.tokenParsingError.desc+" Failed with error: "+n)},t.createTokenNullOrEmptyError=function(n){return new t(Tn.nullOrEmptyToken.code,Tn.nullOrEmptyToken.desc+" Raw Token Value: "+n)},t.createEndpointDiscoveryIncompleteError=function(n){return new t(Tn.endpointResolutionError.code,Tn.endpointResolutionError.desc+" Detail: "+n)},t.createNetworkError=function(n,r){return new t(Tn.networkError.code,Tn.networkError.desc+" | Fetch client threw: "+r+" | Attempted to reach: "+n.split("?")[0])},t.createUnableToGetOpenidConfigError=function(n){return new t(Tn.unableToGetOpenidConfigError.code,Tn.unableToGetOpenidConfigError.desc+" Attempted to retrieve endpoints from: "+n)},t.createHashNotDeserializedError=function(n){return new t(Tn.hashNotDeserialized.code,Tn.hashNotDeserialized.desc+" Given Object: "+n)},t.createInvalidStateError=function(n,r){return new t(Tn.invalidStateError.code,Tn.invalidStateError.desc+" Invalid State: "+n+", Root Err: "+r)},t.createStateMismatchError=function(){return new t(Tn.stateMismatchError.code,Tn.stateMismatchError.desc)},t.createStateNotFoundError=function(n){return new t(Tn.stateNotFoundError.code,Tn.stateNotFoundError.desc+":  "+n)},t.createNonceMismatchError=function(){return new t(Tn.nonceMismatchError.code,Tn.nonceMismatchError.desc)},t.createAuthTimeNotFoundError=function(){return new t(Tn.authTimeNotFoundError.code,Tn.authTimeNotFoundError.desc)},t.createMaxAgeTranspiredError=function(){return new t(Tn.maxAgeTranspiredError.code,Tn.maxAgeTranspiredError.desc)},t.createNonceNotFoundError=function(n){return new t(Tn.nonceNotFoundError.code,Tn.nonceNotFoundError.desc+":  "+n)},t.createMultipleMatchingTokensInCacheError=function(){return new t(Tn.multipleMatchingTokens.code,Tn.multipleMatchingTokens.desc+".")},t.createMultipleMatchingAccountsInCacheError=function(){return new t(Tn.multipleMatchingAccounts.code,Tn.multipleMatchingAccounts.desc)},t.createMultipleMatchingAppMetadataInCacheError=function(){return new t(Tn.multipleMatchingAppMetadata.code,Tn.multipleMatchingAppMetadata.desc)},t.createTokenRequestCannotBeMadeError=function(){return new t(Tn.tokenRequestCannotBeMade.code,Tn.tokenRequestCannotBeMade.desc)},t.createAppendEmptyScopeToSetError=function(n){return new t(Tn.appendEmptyScopeError.code,Tn.appendEmptyScopeError.desc+" Given Scope: "+n)},t.createRemoveEmptyScopeFromSetError=function(n){return new t(Tn.removeEmptyScopeError.code,Tn.removeEmptyScopeError.desc+" Given Scope: "+n)},t.createAppendScopeSetError=function(n){return new t(Tn.appendScopeSetError.code,Tn.appendScopeSetError.desc+" Detail Error: "+n)},t.createEmptyInputScopeSetError=function(){return new t(Tn.emptyInputScopeSetError.code,""+Tn.emptyInputScopeSetError.desc)},t.createDeviceCodeCancelledError=function(){return new t(Tn.DeviceCodePollingCancelled.code,""+Tn.DeviceCodePollingCancelled.desc)},t.createDeviceCodeExpiredError=function(){return new t(Tn.DeviceCodeExpired.code,""+Tn.DeviceCodeExpired.desc)},t.createDeviceCodeUnknownError=function(){return new t(Tn.DeviceCodeUnknownError.code,""+Tn.DeviceCodeUnknownError.desc)},t.createNoAccountInSilentRequestError=function(){return new t(Tn.NoAccountInSilentRequest.code,""+Tn.NoAccountInSilentRequest.desc)},t.createNullOrUndefinedCacheRecord=function(){return new t(Tn.invalidCacheRecord.code,Tn.invalidCacheRecord.desc)},t.createInvalidCacheEnvironmentError=function(){return new t(Tn.invalidCacheEnvironment.code,Tn.invalidCacheEnvironment.desc)},t.createNoAccountFoundError=function(){return new t(Tn.noAccountFound.code,Tn.noAccountFound.desc)},t.createCachePluginError=function(){return new t(Tn.CachePluginError.code,""+Tn.CachePluginError.desc)},t.createNoCryptoObjectError=function(n){return new t(Tn.noCryptoObj.code,""+Tn.noCryptoObj.desc+n)},t.createInvalidCacheTypeError=function(){return new t(Tn.invalidCacheType.code,""+Tn.invalidCacheType.desc)},t.createUnexpectedAccountTypeError=function(){return new t(Tn.unexpectedAccountType.code,""+Tn.unexpectedAccountType.desc)},t.createUnexpectedCredentialTypeError=function(){return new t(Tn.unexpectedCredentialType.code,""+Tn.unexpectedCredentialType.desc)},t.createInvalidAssertionError=function(){return new t(Tn.invalidAssertion.code,""+Tn.invalidAssertion.desc)},t.createInvalidCredentialError=function(){return new t(Tn.invalidClientCredential.code,""+Tn.invalidClientCredential.desc)},t.createRefreshRequiredError=function(){return new t(Tn.tokenRefreshRequired.code,Tn.tokenRefreshRequired.desc)},t.createUserTimeoutReachedError=function(){return new t(Tn.userTimeoutReached.code,Tn.userTimeoutReached.desc)},t.createTokenClaimsRequiredError=function(){return new t(Tn.tokenClaimsRequired.code,Tn.tokenClaimsRequired.desc)},t.createNoAuthCodeInServerResponseError=function(){return new t(Tn.noAuthorizationCodeFromServer.code,Tn.noAuthorizationCodeFromServer.desc)},t.createBindingKeyNotRemovedError=function(){return new t(Tn.bindingKeyNotRemovedError.code,Tn.bindingKeyNotRemovedError.desc)},t.createLogoutNotSupportedError=function(){return new t(Tn.logoutNotSupported.code,Tn.logoutNotSupported.desc)},t.createKeyIdMissingError=function(){return new t(Tn.keyIdMissing.code,Tn.keyIdMissing.desc)},t.createNoNetworkConnectivityError=function(){return new t(Tn.noNetworkConnectivity.code,Tn.noNetworkConnectivity.desc)},t.createUserCanceledError=function(){return new t(Tn.userCanceledError.code,Tn.userCanceledError.desc)},t}(cr),Vn=function(){function e(){}return e.decodeAuthToken=function(t){if(e.isEmpty(t))throw Gn.createTokenNullOrEmptyError(t);var n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Gn.createTokenParsingError("Given token is malformed: "+JSON.stringify(t));return{header:n[1],JWSPayload:n[2],JWSSig:n[3]}},e.isEmpty=function(t){return t===void 0||!t||t.length===0},e.isEmptyObj=function(t){if(t&&!e.isEmpty(t))try{var n=JSON.parse(t);return Object.keys(n).length===0}catch{}return!0},e.startsWith=function(t,n){return t.indexOf(n)===0},e.endsWith=function(t,n){return t.length>=n.length&&t.lastIndexOf(n)===t.length-n.length},e.queryStringToObject=function(o){function n(i){return decodeURIComponent(i.replace(/\+/g," "))}var r={},o=o.split("&");return o.forEach(function(i){var l;i.trim()&&(l=(i=i.split(/=(.+)/g,2))[0],i=i[1],l)&&i&&(r[n(l)]=n(i))}),r},e.trimArrayEntries=function(t){return t.map(function(n){return n.trim()})},e.removeEmptyStringsFromArray=function(t){return t.filter(function(n){return!e.isEmpty(n)})},e.jsonParseHelper=function(t){try{return JSON.parse(t)}catch{return null}},e.matchPattern=function(t,n){return new RegExp(t.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)},e}(),AB=(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Ws=Ws||{}),function(){function e(t,n,r){this.level=Ws.Info,t=t||e.createDefaultLoggerOptions(),this.localCallback=t.loggerCallback||function(){},this.piiLoggingEnabled=t.piiLoggingEnabled||!1,this.level=typeof t.logLevel=="number"?t.logLevel:Ws.Info,this.correlationId=t.correlationId||yt.EMPTY_STRING,this.packageName=n||yt.EMPTY_STRING,this.packageVersion=r||yt.EMPTY_STRING}return e.createDefaultLoggerOptions=function(){return{loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Ws.Info}},e.prototype.clone=function(t,n,r){return new e({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},t,n)},e.prototype.logMessage=function(t,n){var r;n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii||(r=new Date().toUTCString(),r=(Vn.isEmpty(n.correlationId)?Vn.isEmpty(this.correlationId)?"["+r+"]":"["+r+"] : ["+this.correlationId+"]":"["+r+"] : ["+n.correlationId+"]")+" : "+this.packageName+"@"+this.packageVersion+" : "+Ws[n.logLevel]+" - "+t,this.executeCallback(n.logLevel,r,n.containsPii||!1))},e.prototype.executeCallback=function(t,n,r){this.localCallback&&this.localCallback(t,n,r)},e.prototype.error=function(t,n){this.logMessage(t,{logLevel:Ws.Error,containsPii:!1,correlationId:n||yt.EMPTY_STRING})},e.prototype.errorPii=function(t,n){this.logMessage(t,{logLevel:Ws.Error,containsPii:!0,correlationId:n||yt.EMPTY_STRING})},e.prototype.warning=function(t,n){this.logMessage(t,{logLevel:Ws.Warning,containsPii:!1,correlationId:n||yt.EMPTY_STRING})},e.prototype.warningPii=function(t,n){this.logMessage(t,{logLevel:Ws.Warning,containsPii:!0,correlationId:n||yt.EMPTY_STRING})},e.prototype.info=function(t,n){this.logMessage(t,{logLevel:Ws.Info,containsPii:!1,correlationId:n||yt.EMPTY_STRING})},e.prototype.infoPii=function(t,n){this.logMessage(t,{logLevel:Ws.Info,containsPii:!0,correlationId:n||yt.EMPTY_STRING})},e.prototype.verbose=function(t,n){this.logMessage(t,{logLevel:Ws.Verbose,containsPii:!1,correlationId:n||yt.EMPTY_STRING})},e.prototype.verbosePii=function(t,n){this.logMessage(t,{logLevel:Ws.Verbose,containsPii:!0,correlationId:n||yt.EMPTY_STRING})},e.prototype.trace=function(t,n){this.logMessage(t,{logLevel:Ws.Trace,containsPii:!1,correlationId:n||yt.EMPTY_STRING})},e.prototype.tracePii=function(t,n){this.logMessage(t,{logLevel:Ws.Trace,containsPii:!0,correlationId:n||yt.EMPTY_STRING})},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},e}()),EZ="@azure/msal-common",MB="13.3.1",Nr=(function(e){e[e.None=0]="None",e.AzurePublic="https://login.microsoftonline.com",e.AzurePpe="https://login.windows-ppe.net",e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureUsGovernment="https://login.microsoftonline.us"}(DS=DS||{}),{redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create', 'none' and 'no_session'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."},invalidAzureCloudInstance:{code:"invalid_azure_cloud_instance",desc:"Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values"},missingSshJwk:{code:"missing_ssh_jwk",desc:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme."},missingSshKid:{code:"missing_ssh_kid",desc:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme."},missingNonceAuthenticationHeader:{code:"missing_nonce_authentication_header",desc:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce."},invalidAuthenticationHeader:{code:"invalid_authentication_header",desc:"Invalid authentication header provided"},authorityMismatch:{code:"authority_mismatch",desc:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."}}),Zi=function(e){function t(n,r){return n=e.call(this,n,r)||this,n.name="ClientConfigurationError",Object.setPrototypeOf(n,t.prototype),n}return hc(t,e),t.createRedirectUriEmptyError=function(){return new t(Nr.redirectUriNotSet.code,Nr.redirectUriNotSet.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(Nr.postLogoutUriNotSet.code,Nr.postLogoutUriNotSet.desc)},t.createClaimsRequestParsingError=function(n){return new t(Nr.claimsRequestParsingError.code,Nr.claimsRequestParsingError.desc+" Given value: "+n)},t.createInsecureAuthorityUriError=function(n){return new t(Nr.authorityUriInsecure.code,Nr.authorityUriInsecure.desc+" Given URI: "+n)},t.createUrlParseError=function(n){return new t(Nr.urlParseError.code,Nr.urlParseError.desc+" Given Error: "+n)},t.createUrlEmptyError=function(){return new t(Nr.urlEmptyError.code,Nr.urlEmptyError.desc)},t.createEmptyScopesArrayError=function(){return new t(Nr.emptyScopesError.code,""+Nr.emptyScopesError.desc)},t.createClientIdSingleScopeError=function(n){return new t(Nr.clientIdSingleScopeError.code,Nr.clientIdSingleScopeError.desc+" Given Scopes: "+n)},t.createInvalidPromptError=function(n){return new t(Nr.invalidPrompt.code,Nr.invalidPrompt.desc+" Given value: "+n)},t.createInvalidClaimsRequestError=function(){return new t(Nr.invalidClaimsRequest.code,Nr.invalidClaimsRequest.desc)},t.createEmptyLogoutRequestError=function(){return new t(Nr.logoutRequestEmptyError.code,Nr.logoutRequestEmptyError.desc)},t.createEmptyTokenRequestError=function(){return new t(Nr.tokenRequestEmptyError.code,Nr.tokenRequestEmptyError.desc)},t.createInvalidCodeChallengeMethodError=function(){return new t(Nr.invalidCodeChallengeMethod.code,Nr.invalidCodeChallengeMethod.desc)},t.createInvalidCodeChallengeParamsError=function(){return new t(Nr.invalidCodeChallengeParams.code,Nr.invalidCodeChallengeParams.desc)},t.createInvalidCloudDiscoveryMetadataError=function(){return new t(Nr.invalidCloudDiscoveryMetadata.code,Nr.invalidCloudDiscoveryMetadata.desc)},t.createInvalidAuthorityMetadataError=function(){return new t(Nr.invalidAuthorityMetadata.code,Nr.invalidAuthorityMetadata.desc)},t.createUntrustedAuthorityError=function(){return new t(Nr.untrustedAuthority.code,Nr.untrustedAuthority.desc)},t.createInvalidAzureCloudInstanceError=function(){return new t(Nr.invalidAzureCloudInstance.code,Nr.invalidAzureCloudInstance.desc)},t.createMissingSshJwkError=function(){return new t(Nr.missingSshJwk.code,Nr.missingSshJwk.desc)},t.createMissingSshKidError=function(){return new t(Nr.missingSshKid.code,Nr.missingSshKid.desc)},t.createMissingNonceAuthenticationHeadersError=function(){return new t(Nr.missingNonceAuthenticationHeader.code,Nr.missingNonceAuthenticationHeader.desc)},t.createInvalidAuthenticationHeaderError=function(n,r){return new t(Nr.invalidAuthenticationHeader.code,Nr.invalidAuthenticationHeader.desc+". Invalid header: "+n+". Details: "+r)},t.createAuthorityMismatchError=function(){return new t(Nr.authorityMismatch.code,Nr.authorityMismatch.desc)},t}(Gn),Kl=function(){function e(r){var n=this,r=r?Vn.trimArrayEntries(aM(r)):[],r=r?Vn.removeEmptyStringsFromArray(r):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(function(o){return n.scopes.add(o)})}return e.fromString=function(t){return new e((t||yt.EMPTY_STRING).split(" "))},e.createSearchScopes=function(t){return t=new e(t),t.containsOnlyOIDCScopes()?t.removeScope(yt.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t},e.prototype.validateInputScopes=function(t){if(!t||t.length<1)throw Zi.createEmptyScopesArrayError()},e.prototype.containsScope=function(t){var n=new e(this.printScopesLowerCase().split(" "));return!Vn.isEmpty(t)&&n.scopes.has(t.toLowerCase())},e.prototype.containsScopeSet=function(t){var n=this;return!(!t||t.scopes.size<=0)&&this.scopes.size>=t.scopes.size&&t.asArray().every(function(r){return n.containsScope(r)})},e.prototype.containsOnlyOIDCScopes=function(){var t=this,n=0;return NV.forEach(function(r){t.containsScope(r)&&(n+=1)}),this.scopes.size===n},e.prototype.appendScope=function(t){Vn.isEmpty(t)||this.scopes.add(t.trim())},e.prototype.appendScopes=function(t){var n=this;try{t.forEach(function(r){return n.appendScope(r)})}catch(r){throw Gn.createAppendScopeSetError(r)}},e.prototype.removeScope=function(t){if(Vn.isEmpty(t))throw Gn.createRemoveEmptyScopeFromSetError(t);this.scopes.delete(t.trim())},e.prototype.removeOIDCScopes=function(){var t=this;NV.forEach(function(n){t.scopes.delete(n)})},e.prototype.unionScopeSets=function(t){var n;if(t)return n=new Set,t.scopes.forEach(function(r){return n.add(r.toLowerCase())}),this.scopes.forEach(function(r){return n.add(r.toLowerCase())}),n;throw Gn.createEmptyInputScopeSetError()},e.prototype.intersectingScopeSets=function(r){if(!r)throw Gn.createEmptyInputScopeSetError();r.containsOnlyOIDCScopes()||r.removeOIDCScopes();var n=this.unionScopeSets(r),r=r.getScopeCount(),o=this.getScopeCount();return n.size<o+r},e.prototype.getScopeCount=function(){return this.scopes.size},e.prototype.asArray=function(){var t=[];return this.scopes.forEach(function(n){return t.push(n)}),t},e.prototype.printScopes=function(){return this.scopes?this.asArray().join(" "):yt.EMPTY_STRING},e.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},e}();function kP(e,t){if(Vn.isEmpty(e))throw Gn.createClientInfoEmptyError();try{var n=t.base64Decode(e);return JSON.parse(n)}catch(r){throw Gn.createClientInfoDecodingError(r.message)}}function Lw(e){if(Vn.isEmpty(e))throw Gn.createClientInfoDecodingError("Home account ID was empty.");return e=e.split(Ss.CLIENT_INFO_SEPARATOR,2),{uid:e[0],utid:e.length<2?yt.EMPTY_STRING:e[1]}}(function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs",e[e.Dsts=2]="Dsts",e[e.Ciam=3]="Ciam"})(wu=wu||{});var El=function(){function e(){}return e.prototype.generateAccountId=function(){return[this.homeAccountId,this.environment].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.prototype.generateAccountKey=function(){return e.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},e.prototype.generateType=function(){switch(this.authorityType){case Vp.ADFS_ACCOUNT_TYPE:return Wp.ADFS;case Vp.MSAV1_ACCOUNT_TYPE:return Wp.MSA;case Vp.MSSTS_ACCOUNT_TYPE:return Wp.MSSTS;case Vp.GENERIC_ACCOUNT_TYPE:return Wp.GENERIC;default:throw Gn.createUnexpectedAccountTypeError()}},e.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},e.generateAccountCacheKey=function(t){return[t.homeAccountId,t.environment||yt.EMPTY_STRING,t.tenantId||yt.EMPTY_STRING].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAccount=function(g,n,r,o,i,l,c,f){var p=new e,g=(p.authorityType=Vp.MSSTS_ACCOUNT_TYPE,p.clientInfo=g,p.homeAccountId=n,p.nativeAccountId=f,c||o&&o.getPreferredCache());if(g)return p.environment=g,p.realm=((n=r==null?void 0:r.claims)==null?void 0:n.tid)||yt.EMPTY_STRING,r&&(p.idTokenClaims=r.claims,p.localAccountId=((f=r==null?void 0:r.claims)==null?void 0:f.oid)||((c=r==null?void 0:r.claims)==null?void 0:c.sub)||yt.EMPTY_STRING,g=(o=r==null?void 0:r.claims)==null?void 0:o.preferred_username,f=(n=r==null?void 0:r.claims)!=null&&n.emails?r.claims.emails[0]:null,p.username=g||f||yt.EMPTY_STRING,p.name=(c=r==null?void 0:r.claims)==null?void 0:c.name),p.cloudGraphHostName=i,p.msGraphHost=l,p;throw Gn.createInvalidCacheEnvironmentError()},e.createGenericAccount=function(f,n,r,o,i,l){var c=new e,f=(c.authorityType=r&&r.authorityType===wu.Adfs?Vp.ADFS_ACCOUNT_TYPE:Vp.GENERIC_ACCOUNT_TYPE,c.homeAccountId=f,c.realm=yt.EMPTY_STRING,l||r&&r.getPreferredCache());if(f)return n&&(c.localAccountId=((l=n==null?void 0:n.claims)==null?void 0:l.oid)||((r=n==null?void 0:n.claims)==null?void 0:r.sub)||yt.EMPTY_STRING,c.username=((l=n==null?void 0:n.claims)==null?void 0:l.upn)||yt.EMPTY_STRING,c.name=((r=n==null?void 0:n.claims)==null?void 0:r.name)||yt.EMPTY_STRING,c.idTokenClaims=n==null?void 0:n.claims),c.environment=f,c.cloudGraphHostName=o,c.msGraphHost=i,c;throw Gn.createInvalidCacheEnvironmentError()},e.generateHomeAccountId=function(t,n,r,o,i){var l=(l=i==null?void 0:i.claims)!=null&&l.sub?i.claims.sub:yt.EMPTY_STRING;if(n!==wu.Adfs&&n!==wu.Dsts){if(t)try{var c=kP(t,o);if(!Vn.isEmpty(c.uid)&&!Vn.isEmpty(c.utid))return""+c.uid+Ss.CLIENT_INFO_SEPARATOR+c.utid}catch{}r.verbose("No client info in response")}return l},e.isAccountEntity=function(t){return!!t&&t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("localAccountId")&&t.hasOwnProperty("username")&&t.hasOwnProperty("authorityType")},e.accountInfoIsEqual=function(t,n,r){var o,i;return!(!t||!n)&&(i=!0,r&&(r=t.idTokenClaims||{},o=n.idTokenClaims||{},i=r.iat===o.iat&&r.nonce===o.nonce),t.homeAccountId===n.homeAccountId)&&t.localAccountId===n.localAccountId&&t.username===n.username&&t.tenantId===n.tenantId&&t.environment===n.environment&&t.nativeAccountId===n.nativeAccountId&&i},e}(),Vf=function(){function e(t,n){if(Vn.isEmpty(t))throw Gn.createTokenNullOrEmptyError(t);this.rawToken=t,this.claims=e.extractTokenClaims(t,n)}return e.extractTokenClaims=function(t,n){t=Vn.decodeAuthToken(t);try{var r=t.JWSPayload,o=n.base64Decode(r);return JSON.parse(o)}catch(i){throw Gn.createTokenParsingError(i)}},e.checkMaxAge=function(t,n){if(n===0||Date.now()-3e5>t+n)throw Gn.createMaxAgeTranspiredError()},e}(),Ku=function(){function e(t,n,r){this.clientId=t,this.cryptoImpl=n,this.commonLogger=r.clone(EZ,MB)}return e.prototype.getAllAccounts=function(){var t=this,n=this.getAccountKeys();return n.length<1||(n=n.reduce(function(r,o){return o=t.getAccount(o),o&&r.push(o),r},[])).length<1?[]:n.map(function(r){return t.getAccountInfoFromEntity(r)})},e.prototype.getAccountInfoFilteredBy=function(t){return t=this.getAccountsFilteredBy(t),0<t.length?this.getAccountInfoFromEntity(t[0]):null},e.prototype.getAccountInfoFromEntity=function(n){var n=n.getAccountInfo(),r=this.getIdToken(n);return r&&(n.idToken=r.secret,n.idTokenClaims=new Vf(r.secret,this.cryptoImpl).claims),n},e.prototype.saveCacheRecord=function(t){return zr(this,void 0,void 0,function(){return Br(this,function(n){switch(n.label){case 0:if(t)return t.account&&this.setAccount(t.account),t.idToken&&this.setIdTokenCredential(t.idToken),t.accessToken?[4,this.saveAccessToken(t.accessToken)]:[3,2];throw Gn.createNullOrUndefinedCacheRecord();case 1:n.sent(),n.label=2;case 2:return t.refreshToken&&this.setRefreshTokenCredential(t.refreshToken),t.appMetadata&&this.setAppMetadata(t.appMetadata),[2]}})})},e.prototype.saveAccessToken=function(t){return zr(this,void 0,void 0,function(){var n,r,o,i,l=this;return Br(this,function(c){switch(c.label){case 0:return n={clientId:t.clientId,credentialType:t.credentialType,environment:t.environment,homeAccountId:t.homeAccountId,realm:t.realm,tokenType:t.tokenType,requestedClaimsHash:t.requestedClaimsHash},r=this.getTokenKeys(),o=Kl.fromString(t.target),i=[],r.accessToken.forEach(function(f){var p;l.accessTokenKeyMatchesFilter(f,n,!1)&&(p=l.getAccessTokenCredential(f))&&l.credentialMatchesFilter(p,n)&&Kl.fromString(p.target).intersectingScopeSets(o)&&i.push(l.removeAccessToken(f))}),[4,Promise.all(i)];case 1:return c.sent(),this.setAccessTokenCredential(t),[2]}})})},e.prototype.getAccountsFilteredBy=function(t){var n=this,r=this.getAccountKeys(),o=[];return r.forEach(function(i){!n.isAccountKey(i,t.homeAccountId,t.realm)||!(i=n.getAccount(i))||t.homeAccountId&&!n.matchHomeAccountId(i,t.homeAccountId)||t.localAccountId&&!n.matchLocalAccountId(i,t.localAccountId)||t.username&&!n.matchUsername(i,t.username)||t.environment&&!n.matchEnvironment(i,t.environment)||t.realm&&!n.matchRealm(i,t.realm)||t.nativeAccountId&&!n.matchNativeAccountId(i,t.nativeAccountId)||o.push(i)}),o},e.prototype.isAccountKey=function(t,n,r){return!(t.split(Ss.CACHE_KEY_SEPARATOR).length<3||n&&!t.toLowerCase().includes(n.toLowerCase())||r&&!t.toLowerCase().includes(r.toLowerCase()))},e.prototype.isCredentialKey=function(t){if(t.split(Ss.CACHE_KEY_SEPARATOR).length<6||(t=t.toLowerCase(),t.indexOf(Cr.ID_TOKEN.toLowerCase())===-1&&t.indexOf(Cr.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(Cr.REFRESH_TOKEN.toLowerCase())===-1))return!1;if(-1<t.indexOf(Cr.REFRESH_TOKEN.toLowerCase())){var n=""+Cr.REFRESH_TOKEN+Ss.CACHE_KEY_SEPARATOR+this.clientId+Ss.CACHE_KEY_SEPARATOR,r=""+Cr.REFRESH_TOKEN+Ss.CACHE_KEY_SEPARATOR+G1+Ss.CACHE_KEY_SEPARATOR;if(t.indexOf(n.toLowerCase())===-1&&t.indexOf(r.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0},e.prototype.credentialMatchesFilter=function(t,n){return!(n.clientId&&!this.matchClientId(t,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(t,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(t,n.homeAccountId)||n.environment&&!this.matchEnvironment(t,n.environment)||n.realm&&!this.matchRealm(t,n.realm)||n.credentialType&&!this.matchCredentialType(t,n.credentialType)||n.familyId&&!this.matchFamilyId(t,n.familyId)||n.target&&!this.matchTarget(t,n.target)||(n.requestedClaimsHash||t.requestedClaimsHash)&&t.requestedClaimsHash!==n.requestedClaimsHash||t.credentialType===Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(t,n.tokenType)||n.tokenType===gi.SSH&&n.keyId&&!this.matchKeyId(t,n.keyId)))},e.prototype.getAppMetadataFilteredBy=function(t){return this.getAppMetadataFilteredByInternal(t.environment,t.clientId)},e.prototype.getAppMetadataFilteredByInternal=function(t,n){var r=this,o=this.getKeys(),i={};return o.forEach(function(l){var c;!r.isAppMetadata(l)||!(c=r.getAppMetadata(l))||t&&!r.matchEnvironment(c,t)||n&&!r.matchClientId(c,n)||(i[l]=c)}),i},e.prototype.getAuthorityMetadataByAlias=function(t){var n=this,r=this.getAuthorityMetadataKeys(),o=null;return r.forEach(function(i){n.isAuthorityMetadata(i)&&i.indexOf(n.clientId)!==-1&&(i=n.getAuthorityMetadata(i))&&i.aliases.indexOf(t)!==-1&&(o=i)}),o},e.prototype.removeAllAccounts=function(){return zr(this,void 0,void 0,function(){var t,n,r=this;return Br(this,function(o){switch(o.label){case 0:return t=this.getAccountKeys(),n=[],t.forEach(function(i){n.push(r.removeAccount(i))}),[4,Promise.all(n)];case 1:return o.sent(),[2]}})})},e.prototype.removeAccount=function(t){return zr(this,void 0,void 0,function(){var n;return Br(this,function(r){switch(r.label){case 0:if(n=this.getAccount(t))return[4,this.removeAccountContext(n)];throw Gn.createNoAccountFoundError();case 1:return r.sent(),this.removeItem(t),[2]}})})},e.prototype.removeAccountContext=function(t){return zr(this,void 0,void 0,function(){var n,r,o,i=this;return Br(this,function(l){switch(l.label){case 0:return n=this.getTokenKeys(),r=t.generateAccountId(),o=[],n.idToken.forEach(function(c){c.indexOf(r)===0&&i.removeIdToken(c)}),n.accessToken.forEach(function(c){c.indexOf(r)===0&&o.push(i.removeAccessToken(c))}),n.refreshToken.forEach(function(c){c.indexOf(r)===0&&i.removeRefreshToken(c)}),[4,Promise.all(o)];case 1:return l.sent(),[2]}})})},e.prototype.removeAccessToken=function(t){return zr(this,void 0,void 0,function(){var n;return Br(this,function(r){switch(r.label){case 0:if(!(n=this.getAccessTokenCredential(t)))return[2];if(n.credentialType.toLowerCase()!==Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(n.tokenType!==gi.POP)return[3,4];if(!(n=n.keyId))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(n)];case 2:return r.sent(),[3,4];case 3:throw r.sent(),Gn.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(t)]}})})},e.prototype.removeAppMetadata=function(){var t=this;return this.getKeys().forEach(function(n){t.isAppMetadata(n)&&t.removeItem(n)}),!0},e.prototype.readCacheRecord=function(c,l,r){var f=this.getTokenKeys(),o=this.readAccountFromCache(c),i=this.getIdToken(c,f),l=this.getAccessToken(c,l,f),c=this.getRefreshToken(c,!1,f),f=this.readAppMetadataFromCache(r);return o&&i&&(o.idTokenClaims=new Vf(i.secret,this.cryptoImpl).claims),{account:o,idToken:i,accessToken:l,refreshToken:c,appMetadata:f}},e.prototype.readAccountFromCache=function(t){return t=El.generateAccountCacheKey(t),this.getAccount(t)},e.prototype.getIdToken=function(o,i){var r=this,o=(this.commonLogger.trace("CacheManager - getIdToken called"),{homeAccountId:o.homeAccountId,environment:o.environment,credentialType:Cr.ID_TOKEN,clientId:this.clientId,realm:o.tenantId}),o=this.getIdTokensByFilter(o,i),i=o.length;return i<1?(this.commonLogger.info("CacheManager:getIdToken - No token found"),null):1<i?(this.commonLogger.info("CacheManager:getIdToken - Multiple id tokens found, clearing them"),o.forEach(function(l){r.removeIdToken(l.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getIdToken - Returning id token"),o[0])},e.prototype.getIdTokensByFilter=function(t,o){var r=this,o=o&&o.idToken||this.getTokenKeys().idToken,i=[];return o.forEach(function(l){r.idTokenKeyMatchesFilter(l,mi({clientId:r.clientId},t))&&(l=r.getIdTokenCredential(l))&&r.credentialMatchesFilter(l,t)&&i.push(l)}),i},e.prototype.idTokenKeyMatchesFilter=function(t,n){return t=t.toLowerCase(),!(n.clientId&&t.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&t.indexOf(n.homeAccountId.toLowerCase())===-1)},e.prototype.removeIdToken=function(t){this.removeItem(t)},e.prototype.removeRefreshToken=function(t){this.removeItem(t)},e.prototype.getAccessToken=function(g,n,r){var o=this,i=(this.commonLogger.trace("CacheManager - getAccessToken called"),Kl.createSearchScopes(n.scopes)),l=n.authenticationScheme||gi.BEARER,f=l&&l.toLowerCase()!==gi.BEARER.toLowerCase()?Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Cr.ACCESS_TOKEN,c={homeAccountId:g.homeAccountId,environment:g.environment,credentialType:f,clientId:this.clientId,realm:g.tenantId,target:i,tokenType:l,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},f=r&&r.accessToken||this.getTokenKeys().accessToken,p=[],g=(f.forEach(function(v){o.accessTokenKeyMatchesFilter(v,c,!0)&&(v=o.getAccessTokenCredential(v))&&o.credentialMatchesFilter(v,c)&&p.push(v)}),p.length);return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):1<g?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(function(v){o.removeAccessToken(v.generateCredentialKey())}),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])},e.prototype.accessTokenKeyMatchesFilter=function(t,n,r){var o=t.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&o.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target)for(var i=n.target.asArray(),l=0;l<i.length;l++){if(r&&!o.includes(i[l].toLowerCase()))return!1;if(!r&&o.includes(i[l].toLowerCase()))return!0}return!0},e.prototype.getAccessTokensByFilter=function(t){var n=this,r=this.getTokenKeys(),o=[];return r.accessToken.forEach(function(i){n.accessTokenKeyMatchesFilter(i,t,!0)&&(i=n.getAccessTokenCredential(i))&&n.credentialMatchesFilter(i,t)&&o.push(i)}),o},e.prototype.getRefreshToken=function(c,i,r){var o=this,i=(this.commonLogger.trace("CacheManager - getRefreshToken called"),i?G1:void 0),l={homeAccountId:c.homeAccountId,environment:c.environment,credentialType:Cr.REFRESH_TOKEN,clientId:this.clientId,familyId:i},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,f=[];return c.forEach(function(p){o.refreshTokenKeyMatchesFilter(p,l)&&(p=o.getRefreshTokenCredential(p))&&o.credentialMatchesFilter(p,l)&&f.push(p)}),f.length<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),f[0])},e.prototype.refreshTokenKeyMatchesFilter=function(t,n){return t=t.toLowerCase(),!(n.familyId&&t.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&t.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&t.indexOf(n.homeAccountId.toLowerCase())===-1)},e.prototype.readAppMetadataFromCache=function(r){var r={environment:r,clientId:this.clientId},n=this.getAppMetadataFilteredBy(r),r=Object.keys(n).map(function(i){return n[i]}),o=r.length;if(o<1)return null;if(1<o)throw Gn.createMultipleMatchingAppMetadataInCacheError();return r[0]},e.prototype.isAppMetadataFOCI=function(t){return t=this.readAppMetadataFromCache(t),!(!t||t.familyId!==G1)},e.prototype.matchHomeAccountId=function(t,n){return!(typeof t.homeAccountId!="string"||n!==t.homeAccountId)},e.prototype.matchLocalAccountId=function(t,n){return!(typeof t.localAccountId!="string"||n!==t.localAccountId)},e.prototype.matchUsername=function(t,n){return!(typeof t.username!="string"||n.toLowerCase()!==t.username.toLowerCase())},e.prototype.matchUserAssertionHash=function(t,n){return!(!t.userAssertionHash||n!==t.userAssertionHash)},e.prototype.matchEnvironment=function(t,n){return n=this.getAuthorityMetadataByAlias(n),!!(n&&-1<n.aliases.indexOf(t.environment))},e.prototype.matchCredentialType=function(t,n){return t.credentialType&&n.toLowerCase()===t.credentialType.toLowerCase()},e.prototype.matchClientId=function(t,n){return!(!t.clientId||n!==t.clientId)},e.prototype.matchFamilyId=function(t,n){return!(!t.familyId||n!==t.familyId)},e.prototype.matchRealm=function(t,n){return!(!t.realm||n!==t.realm)},e.prototype.matchNativeAccountId=function(t,n){return!(!t.nativeAccountId||n!==t.nativeAccountId)},e.prototype.matchTarget=function(t,n){return!(t.credentialType!==Cr.ACCESS_TOKEN&&t.credentialType!==Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!t.target)&&Kl.fromString(t.target).containsScopeSet(n)},e.prototype.matchTokenType=function(t,n){return!(!t.tokenType||t.tokenType!==n)},e.prototype.matchKeyId=function(t,n){return!(!t.keyId||t.keyId!==n)},e.prototype.isAppMetadata=function(t){return t.indexOf(zN)!==-1},e.prototype.isAuthorityMetadata=function(t){return t.indexOf(W1.CACHE_KEY)!==-1},e.prototype.generateAuthorityMetadataCacheKey=function(t){return W1.CACHE_KEY+"-"+this.clientId+"-"+t},e.toObject=function(t,n){for(var r in n)t[r]=n[r];return t},e}(),hLe=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return hc(t,e),t.prototype.setAccount=function(){throw cr.createUnexpectedError("Storage interface - setAccount() has not been implemented for the cacheStorage interface.")},t.prototype.getAccount=function(){throw cr.createUnexpectedError("Storage interface - getAccount() has not been implemented for the cacheStorage interface.")},t.prototype.setIdTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getIdTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAccessTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getAccessTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setRefreshTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.getRefreshTokenCredential=function(){throw cr.createUnexpectedError("Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.")},t.prototype.setAppMetadata=function(){throw cr.createUnexpectedError("Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAppMetadata=function(){throw cr.createUnexpectedError("Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.setServerTelemetry=function(){throw cr.createUnexpectedError("Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.getServerTelemetry=function(){throw cr.createUnexpectedError("Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.")},t.prototype.setAuthorityMetadata=function(){throw cr.createUnexpectedError("Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadata=function(){throw cr.createUnexpectedError("Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.")},t.prototype.getAuthorityMetadataKeys=function(){throw cr.createUnexpectedError("Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.")},t.prototype.setThrottlingCache=function(){throw cr.createUnexpectedError("Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.getThrottlingCache=function(){throw cr.createUnexpectedError("Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.")},t.prototype.removeItem=function(){throw cr.createUnexpectedError("Storage interface - removeItem() has not been implemented for the cacheStorage interface.")},t.prototype.containsKey=function(){throw cr.createUnexpectedError("Storage interface - containsKey() has not been implemented for the cacheStorage interface.")},t.prototype.getKeys=function(){throw cr.createUnexpectedError("Storage interface - getKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getAccountKeys=function(){throw cr.createUnexpectedError("Storage interface - getAccountKeys() has not been implemented for the cacheStorage interface.")},t.prototype.getTokenKeys=function(){throw cr.createUnexpectedError("Storage interface - getTokenKeys() has not been implemented for the cacheStorage interface.")},t.prototype.clear=function(){return zr(this,void 0,void 0,function(){return Br(this,function(n){throw cr.createUnexpectedError("Storage interface - clear() has not been implemented for the cacheStorage interface.")})})},t.prototype.updateCredentialCacheKey=function(){throw cr.createUnexpectedError("Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.")},t}(Ku),fLe=300,TZ={tokenRenewalOffsetSeconds:fLe,preventCorsPreflight:!1},pLe={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:Ws.Info,correlationId:yt.EMPTY_STRING},mLe={claimsBasedCachingEnabled:!0},gLe={sendGetRequestAsync:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented")})})},sendPostRequestAsync:function(){return zr(this,void 0,void 0,function(){return Br(this,function(e){throw cr.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented")})})}},yLe={sku:yt.SKU,version:MB,cpu:yt.EMPTY_STRING,os:yt.EMPTY_STRING},vLe={clientSecret:yt.EMPTY_STRING,clientAssertion:void 0},_Le={azureCloudInstance:DS.None,tenant:""+yt.DEFAULT_COMMON_TENANT},bLe={application:{appName:"",appVersion:""}};function wLe(w){var t=w.authOptions,n=w.systemOptions,C=w.loggerOptions,r=w.cacheOptions,o=w.storageInterface,i=w.networkInterface,l=w.cryptoInterface,c=w.clientCredentials,f=w.libraryInfo,p=w.telemetry,g=w.serverTelemetryManager,v=w.persistencePlugin,w=w.serializableCache,C=mi(mi({},pLe),C);return{authOptions:xLe(t),systemOptions:mi(mi({},TZ),n),loggerOptions:C,cacheOptions:mi(mi({},mLe),r),storageInterface:o||new hLe(t.clientId,IP,new AB(C)),networkInterface:i||gLe,cryptoInterface:l||IP,clientCredentials:c||vLe,libraryInfo:mi(mi({},yLe),f),telemetry:mi(mi({},bLe),p),serverTelemetryManager:g||null,persistencePlugin:v||null,serializableCache:w||null}}function xLe(e){return mi({clientCapabilities:[],azureCloudOptions:_Le,skipAuthorityMetadataCache:!1},e)}var Vc,Jt,PP,XO,b_=function(e){function t(n,r,o){return n=e.call(this,n,r,o)||this,n.name="ServerError",Object.setPrototypeOf(n,t.prototype),n}return hc(t,e),t}(cr),AP=function(){function e(){}return e.generateThrottlingStorageKey=function(t){return K1.THROTTLING_PREFIX+"."+JSON.stringify(t)},e.preProcess=function(t,o){var r,o=e.generateThrottlingStorageKey(o),i=t.getThrottlingCache(o);if(i){if(!(i.throttleTime<Date.now()))throw new b_(((r=i.errorCodes)==null?void 0:r.join(" "))||yt.EMPTY_STRING,i.errorMessage,i.subError);t.removeItem(o)}},e.postProcess=function(t,n,r){(e.checkResponseStatus(r)||e.checkResponseForRetryAfter(r))&&(r={throttleTime:e.calculateThrottleTime(parseInt(r.headers[Gc.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror},t.setThrottlingCache(e.generateThrottlingStorageKey(n),r))},e.checkResponseStatus=function(t){return t.status===429||500<=t.status&&t.status<600},e.checkResponseForRetryAfter=function(t){return!!t.headers&&t.headers.hasOwnProperty(Gc.RETRY_AFTER)&&(t.status<200||300<=t.status)},e.calculateThrottleTime=function(n){var n=n<=0?0:n,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(n||K1.DEFAULT_THROTTLE_TIME_SECONDS),r+K1.DEFAULT_MAX_THROTTLE_TIME_SECONDS))},e.removeThrottle=function(t,n,r,o){n={clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},o=this.generateThrottlingStorageKey(n),t.removeItem(o)},e}(),CLe=function(){function e(t,n){this.networkClient=t,this.cacheManager=n}return e.prototype.sendPostRequest=function(t,n,r){return zr(this,void 0,void 0,function(){var o,i;return Br(this,function(l){switch(l.label){case 0:AP.preProcess(this.cacheManager,t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(n,r)];case 2:return o=l.sent(),[3,4];case 3:throw(i=l.sent())instanceof cr?i:Gn.createNetworkError(n,i);case 4:return AP.postProcess(this.cacheManager,t,o),[2,o]}})})},e}(),xv=(function(e){e.HOME_ACCOUNT_ID="home_account_id",e.UPN="UPN"}(Vc=Vc||{}),function(){function e(){}return e.validateRedirectUri=function(t){if(Vn.isEmpty(t))throw Zi.createRedirectUriEmptyError()},e.validatePrompt=function(t){var n,r=[];for(n in Zl)r.push(Zl[n]);if(r.indexOf(t)<0)throw Zi.createInvalidPromptError(t)},e.validateClaims=function(t){try{JSON.parse(t)}catch{throw Zi.createInvalidClaimsRequestError()}},e.validateCodeChallengeParams=function(t,n){if(Vn.isEmpty(t)||Vn.isEmpty(n))throw Zi.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(n)},e.validateCodeChallengeMethod=function(t){if([FV.PLAIN,FV.S256].indexOf(t)<0)throw Zi.createInvalidCodeChallengeMethodError()},e.sanitizeEQParams=function(t,n){return t?(n.forEach(function(r,o){t[o]&&delete t[o]}),Object.fromEntries(Object.entries(t).filter(function(r){return r[1]!==""}))):{}},e}()),Y1=function(){function e(){this.parameters=new Map}return e.prototype.addResponseTypeCode=function(){this.parameters.set(Gr.RESPONSE_TYPE,encodeURIComponent(yt.CODE_RESPONSE_TYPE))},e.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(Gr.RESPONSE_TYPE,encodeURIComponent(yt.TOKEN_RESPONSE_TYPE+" "+yt.ID_TOKEN_RESPONSE_TYPE))},e.prototype.addResponseMode=function(t){this.parameters.set(Gr.RESPONSE_MODE,encodeURIComponent(t||SP.QUERY))},e.prototype.addNativeBroker=function(){this.parameters.set(Gr.NATIVE_BROKER,encodeURIComponent("1"))},e.prototype.addScopes=function(t,n){n=(n=n===void 0?!0:n)?aM(t||[],wE):t||[],t=new Kl(n),this.parameters.set(Gr.SCOPE,encodeURIComponent(t.printScopes()))},e.prototype.addClientId=function(t){this.parameters.set(Gr.CLIENT_ID,encodeURIComponent(t))},e.prototype.addRedirectUri=function(t){xv.validateRedirectUri(t),this.parameters.set(Gr.REDIRECT_URI,encodeURIComponent(t))},e.prototype.addPostLogoutRedirectUri=function(t){xv.validateRedirectUri(t),this.parameters.set(Gr.POST_LOGOUT_URI,encodeURIComponent(t))},e.prototype.addIdTokenHint=function(t){this.parameters.set(Gr.ID_TOKEN_HINT,encodeURIComponent(t))},e.prototype.addDomainHint=function(t){this.parameters.set(V1.DOMAIN_HINT,encodeURIComponent(t))},e.prototype.addLoginHint=function(t){this.parameters.set(V1.LOGIN_HINT,encodeURIComponent(t))},e.prototype.addCcsUpn=function(t){this.parameters.set(Gc.CCS_HEADER,encodeURIComponent("UPN:"+t))},e.prototype.addCcsOid=function(t){this.parameters.set(Gc.CCS_HEADER,encodeURIComponent("Oid:"+t.uid+"@"+t.utid))},e.prototype.addSid=function(t){this.parameters.set(V1.SID,encodeURIComponent(t))},e.prototype.addClaims=function(t,n){t=this.addClientCapabilitiesToClaims(t,n),xv.validateClaims(t),this.parameters.set(Gr.CLAIMS,encodeURIComponent(t))},e.prototype.addCorrelationId=function(t){this.parameters.set(Gr.CLIENT_REQUEST_ID,encodeURIComponent(t))},e.prototype.addLibraryInfo=function(t){this.parameters.set(Gr.X_CLIENT_SKU,t.sku),this.parameters.set(Gr.X_CLIENT_VER,t.version),t.os&&this.parameters.set(Gr.X_CLIENT_OS,t.os),t.cpu&&this.parameters.set(Gr.X_CLIENT_CPU,t.cpu)},e.prototype.addApplicationTelemetry=function(t){t!=null&&t.appName&&this.parameters.set(Gr.X_APP_NAME,t.appName),t!=null&&t.appVersion&&this.parameters.set(Gr.X_APP_VER,t.appVersion)},e.prototype.addPrompt=function(t){xv.validatePrompt(t),this.parameters.set(""+Gr.PROMPT,encodeURIComponent(t))},e.prototype.addState=function(t){Vn.isEmpty(t)||this.parameters.set(Gr.STATE,encodeURIComponent(t))},e.prototype.addNonce=function(t){this.parameters.set(Gr.NONCE,encodeURIComponent(t))},e.prototype.addCodeChallengeParams=function(t,n){if(xv.validateCodeChallengeParams(t,n),!t||!n)throw Zi.createInvalidCodeChallengeParamsError();this.parameters.set(Gr.CODE_CHALLENGE,encodeURIComponent(t)),this.parameters.set(Gr.CODE_CHALLENGE_METHOD,encodeURIComponent(n))},e.prototype.addAuthorizationCode=function(t){this.parameters.set(Gr.CODE,encodeURIComponent(t))},e.prototype.addDeviceCode=function(t){this.parameters.set(Gr.DEVICE_CODE,encodeURIComponent(t))},e.prototype.addRefreshToken=function(t){this.parameters.set(Gr.REFRESH_TOKEN,encodeURIComponent(t))},e.prototype.addCodeVerifier=function(t){this.parameters.set(Gr.CODE_VERIFIER,encodeURIComponent(t))},e.prototype.addClientSecret=function(t){this.parameters.set(Gr.CLIENT_SECRET,encodeURIComponent(t))},e.prototype.addClientAssertion=function(t){Vn.isEmpty(t)||this.parameters.set(Gr.CLIENT_ASSERTION,encodeURIComponent(t))},e.prototype.addClientAssertionType=function(t){Vn.isEmpty(t)||this.parameters.set(Gr.CLIENT_ASSERTION_TYPE,encodeURIComponent(t))},e.prototype.addOboAssertion=function(t){this.parameters.set(Gr.OBO_ASSERTION,encodeURIComponent(t))},e.prototype.addRequestTokenUse=function(t){this.parameters.set(Gr.REQUESTED_TOKEN_USE,encodeURIComponent(t))},e.prototype.addGrantType=function(t){this.parameters.set(Gr.GRANT_TYPE,encodeURIComponent(t))},e.prototype.addClientInfo=function(){this.parameters.set(dLe,"1")},e.prototype.addExtraQueryParameters=function(t){var n=this,r=xv.sanitizeEQParams(t,this.parameters);Object.keys(r).forEach(function(o){n.parameters.set(o,t[o])})},e.prototype.addClientCapabilitiesToClaims=function(t,n){var r;if(t)try{r=JSON.parse(t)}catch{throw Zi.createInvalidClaimsRequestError()}else r={};return n&&0<n.length&&(r.hasOwnProperty(Ow.ACCESS_TOKEN)||(r[Ow.ACCESS_TOKEN]={}),r[Ow.ACCESS_TOKEN][Ow.XMS_CC]={values:n}),JSON.stringify(r)},e.prototype.addUsername=function(t){this.parameters.set(TP.username,encodeURIComponent(t))},e.prototype.addPassword=function(t){this.parameters.set(TP.password,encodeURIComponent(t))},e.prototype.addPopToken=function(t){Vn.isEmpty(t)||(this.parameters.set(Gr.TOKEN_TYPE,gi.POP),this.parameters.set(Gr.REQ_CNF,encodeURIComponent(t)))},e.prototype.addSshJwk=function(t){Vn.isEmpty(t)||(this.parameters.set(Gr.TOKEN_TYPE,gi.SSH),this.parameters.set(Gr.REQ_CNF,encodeURIComponent(t)))},e.prototype.addServerTelemetry=function(t){this.parameters.set(Gr.X_CLIENT_CURR_TELEM,t.generateCurrentRequestHeaderValue()),this.parameters.set(Gr.X_CLIENT_LAST_TELEM,t.generateLastRequestHeaderValue())},e.prototype.addThrottling=function(){this.parameters.set(Gr.X_MS_LIB_CAPABILITY,K1.X_MS_LIB_CAPABILITY_VALUE)},e.prototype.addLogoutHint=function(t){this.parameters.set(Gr.LOGOUT_HINT,encodeURIComponent(t))},e.prototype.createQueryString=function(){var t=new Array;return this.parameters.forEach(function(n,r){t.push(r+"="+n)}),t.join("&")},e}(),RB=function(){function e(t,n){this.config=wLe(t),this.logger=new AB(this.config.loggerOptions,EZ,MB),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new CLe(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}return e.prototype.createTokenRequestHeaders=function(t){var n={};if(n[Gc.CONTENT_TYPE]=yt.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&t)switch(t.type){case Vc.HOME_ACCOUNT_ID:try{var r=Lw(t.credential);n[Gc.CCS_HEADER]="Oid:"+r.uid+"@"+r.utid}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case Vc.UPN:n[Gc.CCS_HEADER]="UPN: "+t.credential}return n},e.prototype.executePostToTokenEndpoint=function(t,n,r,o){return zr(this,void 0,void 0,function(){var i;return Br(this,function(l){switch(l.label){case 0:return[4,this.networkManager.sendPostRequest(o,t,{body:n,headers:r})];case 1:return i=l.sent(),this.config.serverTelemetryManager&&i.status<500&&i.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,i]}})})},e.prototype.updateAuthority=function(t){if(!t.discoveryComplete())throw Gn.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=t},e.prototype.createTokenQueryParameters=function(t){var n=new Y1;return t.tokenQueryParameters&&n.addExtraQueryParameters(t.tokenQueryParameters),n.createQueryString()},e}(),OB=function(){function e(){}return e.prototype.generateAccountId=function(){return e.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},e.prototype.generateCredentialId=function(){return e.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},e.prototype.generateTarget=function(){return e.generateTargetForCacheKey(this.target)},e.prototype.generateCredentialKey=function(){return e.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},e.prototype.generateType=function(){switch(this.credentialType){case Cr.ID_TOKEN:return Wp.ID_TOKEN;case Cr.ACCESS_TOKEN:case Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME:return Wp.ACCESS_TOKEN;case Cr.REFRESH_TOKEN:return Wp.REFRESH_TOKEN;default:throw Gn.createUnexpectedCredentialTypeError()}},e.generateCredentialCacheKey=function(t,n,r,o,i,l,c,f,p){return[this.generateAccountIdForCacheKey(t,n),this.generateCredentialIdForCacheKey(r,o,i,c),this.generateTargetForCacheKey(l),this.generateClaimsHashForCacheKey(p),this.generateSchemeForCacheKey(f)].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateAccountIdForCacheKey=function(t,n){return[t,n].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateCredentialIdForCacheKey=function(t,n,r,o){return[t,t===Cr.REFRESH_TOKEN&&o||n,r||yt.EMPTY_STRING].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.generateTargetForCacheKey=function(t){return(t||yt.EMPTY_STRING).toLowerCase()},e.generateClaimsHashForCacheKey=function(t){return(t||yt.EMPTY_STRING).toLowerCase()},e.generateSchemeForCacheKey=function(t){return t&&t.toLowerCase()!==gi.BEARER.toLowerCase()?t.toLowerCase():yt.EMPTY_STRING},e}(),jv=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return hc(t,e),t.createIdTokenEntity=function(n,r,o,i,l){var c=new t;return c.credentialType=Cr.ID_TOKEN,c.homeAccountId=n,c.environment=r,c.clientId=i,c.secret=o,c.realm=l,c},t.isIdTokenEntity=function(n){return!!n&&n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")&&n.credentialType===Cr.ID_TOKEN},t}(OB),Dd=function(){function e(){}return e.nowSeconds=function(){return Math.round(new Date().getTime()/1e3)},e.isTokenExpired=function(t,n){return(Number(t)||0)<e.nowSeconds()+n},e.wasClockTurnedBack=function(t){return Number(t)>e.nowSeconds()},e.delay=function(t,n){return new Promise(function(r){return setTimeout(function(){return r(n)},t)})},e}(),$v=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return hc(t,e),t.createAccessTokenEntity=function(D,r,o,i,l,c,f,p,g,v,w,C,T,k,P){var O,L=new t,D=(L.homeAccountId=D,L.credentialType=Cr.ACCESS_TOKEN,L.secret=o,Dd.nowSeconds());if(L.cachedAt=D.toString(),L.expiresOn=f.toString(),L.extendedExpiresOn=p.toString(),v&&(L.refreshOn=v.toString()),L.environment=r,L.clientId=i,L.realm=l,L.target=c,L.userAssertionHash=C,L.tokenType=Vn.isEmpty(w)?gi.BEARER:w,k&&(L.requestedClaims=k,L.requestedClaimsHash=P),((D=L.tokenType)==null?void 0:D.toLowerCase())!==gi.BEARER.toLowerCase())switch(L.credentialType=Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME,L.tokenType){case gi.POP:var N=Vf.extractTokenClaims(o,g);if((O=N==null?void 0:N.cnf)==null||!O.kid)throw Gn.createTokenClaimsRequiredError();L.keyId=N.cnf.kid;break;case gi.SSH:L.keyId=T}return L},t.isAccessTokenEntity=function(n){return!!n&&n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("realm")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")&&n.hasOwnProperty("target")&&(n.credentialType===Cr.ACCESS_TOKEN||n.credentialType===Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME)},t}(OB),Nw=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return hc(t,e),t.createRefreshTokenEntity=function(n,r,o,i,l,c){var f=new t;return f.clientId=i,f.credentialType=Cr.REFRESH_TOKEN,f.environment=r,f.homeAccountId=n,f.secret=o,f.userAssertionHash=c,l&&(f.familyId=l),f},t.isRefreshTokenEntity=function(n){return!!n&&n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")&&n.credentialType===Cr.REFRESH_TOKEN},t}(OB),BV=["interaction_required","consent_required","login_required"],SLe=["message_only","additional_action","basic_action","user_password_expired","consent_required"],Fw={noTokensFoundError:{code:"no_tokens_found",desc:"No refresh token found in the cache. Please sign-in."},native_account_unavailable:{code:"native_account_unavailable",desc:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API."}},Pd=function(e){function t(n,r,o,i,l,c,f){return n=e.call(this,n,r,o)||this,Object.setPrototypeOf(n,t.prototype),n.timestamp=i||yt.EMPTY_STRING,n.traceId=l||yt.EMPTY_STRING,n.correlationId=c||yt.EMPTY_STRING,n.claims=f||yt.EMPTY_STRING,n.name="InteractionRequiredAuthError",n}return hc(t,e),t.isInteractionRequiredError=function(i,r,l){var i=!!i&&-1<BV.indexOf(i),l=!!l&&-1<SLe.indexOf(l),c=!!r&&BV.some(function(f){return-1<r.indexOf(f)});return i||c||l},t.createNoTokensFoundError=function(){return new t(Fw.noTokensFoundError.code,Fw.noTokensFoundError.desc)},t.createNativeAccountUnavailableError=function(){return new t(Fw.native_account_unavailable.code,Fw.native_account_unavailable.desc)},t}(cr),MP=function(e,t,n,r,o){this.account=e||null,this.idToken=t||null,this.accessToken=n||null,this.refreshToken=r||null,this.appMetadata=o||null},rm=function(){function e(){}return e.setRequestState=function(t,n,r){return t=e.generateLibraryState(t,r),Vn.isEmpty(n)?t:""+t+yt.RESOURCE_DELIM+n},e.generateLibraryState=function(t,n){var r;if(t)return r={id:t.createNewGuid()},n&&(r.meta=n),n=JSON.stringify(r),t.base64Encode(n);throw Gn.createNoCryptoObjectError("generateLibraryState")},e.parseRequestState=function(t,n){if(!t)throw Gn.createNoCryptoObjectError("parseRequestState");if(Vn.isEmpty(n))throw Gn.createInvalidStateError(n,"Null, undefined or empty state");try{var r=n.split(yt.RESOURCE_DELIM),o=r[0],i=1<r.length?r.slice(1).join(yt.RESOURCE_DELIM):yt.EMPTY_STRING,l=t.base64Decode(o),c=JSON.parse(l);return{userRequestState:Vn.isEmpty(i)?yt.EMPTY_STRING:i,libraryState:c}}catch(f){throw Gn.createInvalidStateError(n,f)}},e}(),Do=function(){function e(t){if(this._urlString=t,Vn.isEmpty(this._urlString))throw Zi.createUrlEmptyError();Vn.isEmpty(this.getHash())&&(this._urlString=e.canonicalizeUri(t))}return Object.defineProperty(e.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),e.canonicalizeUri=function(t){var n;return t&&(n=t.toLowerCase(),Vn.endsWith(n,"?")?n=n.slice(0,-1):Vn.endsWith(n,"?/")&&(n=n.slice(0,-2)),Vn.endsWith(n,"/")||(n+="/"),n)},e.prototype.validateAsUri=function(){var t;try{t=this.getUrlComponents()}catch(n){throw Zi.createUrlParseError(n)}if(!t.HostNameAndPort||!t.PathSegments)throw Zi.createUrlParseError("Given url string: "+this.urlString);if(!t.Protocol||t.Protocol.toLowerCase()!=="https:")throw Zi.createInsecureAuthorityUriError(this.urlString)},e.appendQueryString=function(t,n){return Vn.isEmpty(n)?t:t.indexOf("?")<0?t+"?"+n:t+"&"+n},e.removeHashFromUrl=function(t){return e.canonicalizeUri(t.split("#")[0])},e.prototype.replaceTenantPath=function(t){var n=this.getUrlComponents(),r=n.PathSegments;return!t||r.length===0||r[0]!==r_.COMMON&&r[0]!==r_.ORGANIZATIONS||(r[0]=t),e.constructAuthorityUriFromObject(n)},e.prototype.getHash=function(){return e.parseHash(this.urlString)},e.prototype.getUrlComponents=function(){var t,n=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(n);if(n)return t=(t=(n={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]}).AbsolutePath.split("/")).filter(function(r){return r&&0<r.length}),n.PathSegments=t,!Vn.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n;throw Zi.createUrlParseError("Given url string: "+this.urlString)},e.getDomainFromUrl=function(t){var n=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=t.match(n);if(n)return n[2];throw Zi.createUrlParseError("Given url string: "+t)},e.getAbsoluteUrl=function(t,n){return t[0]===yt.FORWARD_SLASH?(n=new e(n).getUrlComponents()).Protocol+"//"+n.HostNameAndPort+t:t},e.parseHash=function(t){var n=t.indexOf("#"),r=t.indexOf("#/");return-1<r?t.substring(r+2):-1<n?t.substring(n+1):yt.EMPTY_STRING},e.parseQueryString=function(t){var n=t.indexOf("?"),r=t.indexOf("/?");return-1<r?t.substring(r+2):-1<n?t.substring(n+1):yt.EMPTY_STRING},e.constructAuthorityUriFromObject=function(t){return new e(t.Protocol+"//"+t.HostNameAndPort+"/"+t.PathSegments.join("/"))},e.getDeserializedHash=function(r){if(Vn.isEmpty(r))return{};var n=e.parseHash(r),r=Vn.queryStringToObject(Vn.isEmpty(n)?r:n);if(r)return r;throw Gn.createHashNotDeserializedError(JSON.stringify(r))},e.getDeserializedQueryString=function(r){if(Vn.isEmpty(r))return{};var n=e.parseQueryString(r),r=Vn.queryStringToObject(Vn.isEmpty(n)?r:n);if(r)return r;throw Gn.createHashNotDeserializedError(JSON.stringify(r))},e.hashContainsKnownProperties=function(t){return!(Vn.isEmpty(t)||t.indexOf("=")<0||!((t=e.getDeserializedHash(t)).code||t.error_description||t.error||t.state))},e}(),ELe=(function(e){e.AcquireTokenByCode="acquireTokenByCode",e.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",e.AcquireTokenSilent="acquireTokenSilent",e.AcquireTokenSilentAsync="acquireTokenSilentAsync",e.AcquireTokenPopup="acquireTokenPopup",e.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",e.CryptoOptsSignJwt="cryptoOptsSignJwt",e.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",e.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",e.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",e.SsoSilent="ssoSilent",e.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",e.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",e.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken",e.BaseClientCreateTokenRequestHeaders="baseClientCreateTokenRequestHeaders",e.BrokerHandhshake="brokerHandshake",e.AcquireTokenByRefreshTokenInBroker="acquireTokenByRefreshTokenInBroker",e.AcquireTokenByBroker="acquireTokenByBroker",e.RefreshTokenClientExecuteTokenRequest="refreshTokenClientExecuteTokenRequest",e.RefreshTokenClientAcquireToken="refreshTokenClientAcquireToken",e.RefreshTokenClientAcquireTokenWithCachedRefreshToken="refreshTokenClientAcquireTokenWithCachedRefreshToken",e.RefreshTokenClientAcquireTokenByRefreshToken="refreshTokenClientAcquireTokenByRefreshToken",e.RefreshTokenClientCreateTokenRequestBody="refreshTokenClientCreateTokenRequestBody",e.AcquireTokenFromCache="acquireTokenFromCache",e.AcquireTokenBySilentIframe="acquireTokenBySilentIframe",e.InitializeBaseRequest="initializeBaseRequest",e.InitializeSilentRequest="initializeSilentRequest",e.InitializeClientApplication="initializeClientApplication",e.SilentIframeClientTokenHelper="silentIframeClientTokenHelper",e.SilentHandlerInitiateAuthRequest="silentHandlerInitiateAuthRequest",e.SilentHandlerMonitorIframeForHash="silentHandlerMonitorIframeForHash",e.SilentHandlerLoadFrame="silentHandlerLoadFrame",e.StandardInteractionClientCreateAuthCodeClient="standardInteractionClientCreateAuthCodeClient",e.StandardInteractionClientGetClientConfiguration="standardInteractionClientGetClientConfiguration",e.StandardInteractionClientInitializeAuthorizationRequest="standardInteractionClientInitializeAuthorizationRequest",e.StandardInteractionClientInitializeAuthorizationCodeRequest="standardInteractionClientInitializeAuthorizationCodeRequest",e.GetAuthCodeUrl="getAuthCodeUrl",e.HandleCodeResponseFromServer="handleCodeResponseFromServer",e.HandleCodeResponseFromHash="handleCodeResponseFromHash",e.UpdateTokenEndpointAuthority="updateTokenEndpointAuthority",e.AuthClientAcquireToken="authClientAcquireToken",e.AuthClientExecuteTokenRequest="authClientExecuteTokenRequest",e.AuthClientCreateTokenRequestBody="authClientCreateTokenRequestBody",e.AuthClientCreateQueryString="authClientCreateQueryString",e.PopTokenGenerateCnf="popTokenGenerateCnf",e.PopTokenGenerateKid="popTokenGenerateKid",e.HandleServerTokenResponse="handleServerTokenResponse",e.AuthorityFactoryCreateDiscoveredInstance="authorityFactoryCreateDiscoveredInstance",e.AuthorityResolveEndpointsAsync="authorityResolveEndpointsAsync",e.AuthorityGetCloudDiscoveryMetadataFromNetwork="authorityGetCloudDiscoveryMetadataFromNetwork",e.AuthorityUpdateCloudDiscoveryMetadata="authorityUpdateCloudDiscoveryMetadata",e.AuthorityGetEndpointMetadataFromNetwork="authorityGetEndpointMetadataFromNetwork",e.AuthorityUpdateEndpointMetadata="authorityUpdateEndpointMetadata",e.AuthorityUpdateMetadataWithRegionalInformation="authorityUpdateMetadataWithRegionalInformation",e.RegionDiscoveryDetectRegion="regionDiscoveryDetectRegion",e.RegionDiscoveryGetRegionFromIMDS="regionDiscoveryGetRegionFromIMDS",e.RegionDiscoveryGetCurrentVersion="regionDiscoveryGetCurrentVersion",e.AcquireTokenByCodeAsync="acquireTokenByCodeAsync",e.GetEndpointMetadataFromNetwork="getEndpointMetadataFromNetwork",e.GetCloudDiscoveryMetadataFromNetworkMeasurement="getCloudDiscoveryMetadataFromNetworkMeasurement",e.HandleRedirectPromiseMeasurement="handleRedirectPromiseMeasurement",e.UpdateCloudDiscoveryMetadataMeasurement="updateCloudDiscoveryMetadataMeasurement",e.UsernamePasswordClientAcquireToken="usernamePasswordClientAcquireToken",e.NativeMessageHandlerHandshake="nativeMessageHandlerHandshake",e.ClearTokensAndKeysWithClaims="clearTokensAndKeysWithClaims"}(Jt=Jt||{}),function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed"}(PP=PP||{}),new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status"])),Ox=(function(e){e.SW="sw",e.UHW="uhw"}(XO=XO||{}),function(){function e(t,n){this.cryptoUtils=t,this.performanceClient=n}return e.prototype.generateCnf=function(t){var n;return zr(this,void 0,void 0,function(){var r,o;return Br(this,function(i){switch(i.label){case 0:return(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.PopTokenGenerateCnf,t.correlationId),(n=this.performanceClient)!=null&&n.setPreQueueTime(Jt.PopTokenGenerateKid,t.correlationId),[4,this.generateKid(t)];case 1:return o=i.sent(),r=this.cryptoUtils.base64Encode(JSON.stringify(o)),o={kid:o.kid,reqCnfString:r},[4,this.cryptoUtils.hashString(r)];case 2:return[2,(o.reqCnfHash=i.sent(),o)]}})})},e.prototype.generateKid=function(t){var n;return zr(this,void 0,void 0,function(){return Br(this,function(r){switch(r.label){case 0:return(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.PopTokenGenerateKid,t.correlationId),[4,this.cryptoUtils.getPublicKeyThumbprint(t)];case 1:return[2,{kid:r.sent(),xms_ksl:XO.SW}]}})})},e.prototype.signPopToken=function(t,n,r){return zr(this,void 0,void 0,function(){return Br(this,function(o){return[2,this.signPayload(t,n,r)]})})},e.prototype.signPayload=function(t,n,r,o){return zr(this,void 0,void 0,function(){var i,l,c,f;return Br(this,function(p){switch(p.label){case 0:return i=r.resourceRequestMethod,f=r.resourceRequestUri,l=r.shrClaims,c=r.shrNonce,f=f?new Do(f):void 0,f=f==null?void 0:f.getUrlComponents(),[4,this.cryptoUtils.signJwt(mi({at:t,ts:Dd.nowSeconds(),m:i==null?void 0:i.toUpperCase(),u:f==null?void 0:f.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f==null?void 0:f.AbsolutePath,q:f!=null&&f.QueryString?[[],f.QueryString]:void 0,client_claims:l||void 0},o),n,r.correlationId)];case 1:return[2,p.sent()]}})})},e}()),BN=function(){function e(){}return e.prototype.generateAppMetadataKey=function(){return e.generateAppMetadataCacheKey(this.environment,this.clientId)},e.generateAppMetadataCacheKey=function(t,n){return[zN,t,n].join(Ss.CACHE_KEY_SEPARATOR).toLowerCase()},e.createAppMetadataEntity=function(t,n,r){var o=new e;return o.clientId=t,o.environment=n,r&&(o.familyId=r),o},e.isAppMetadataEntity=function(t,n){return!!n&&t.indexOf(zN)===0&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("environment")},e}(),TLe=function(){function e(t,n){this.cache=t,this.hasChanged=n}return Object.defineProperty(e.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),e}(),RP=function(){function e(t,n,r,o,i,l,c){this.clientId=t,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=l,this.performanceClient=c}return e.prototype.validateServerAuthorizationCodeResponse=function(t,n,r){if(!t.state||!n)throw t.state?Gn.createStateNotFoundError("Cached State"):Gn.createStateNotFoundError("Server State");if(decodeURIComponent(t.state)!==decodeURIComponent(n))throw Gn.createStateMismatchError();if(t.error||t.error_description||t.suberror)throw Pd.isInteractionRequiredError(t.error,t.error_description,t.suberror)?new Pd(t.error||yt.EMPTY_STRING,t.error_description,t.suberror,t.timestamp||yt.EMPTY_STRING,t.trace_id||yt.EMPTY_STRING,t.correlation_id||yt.EMPTY_STRING,t.claims||yt.EMPTY_STRING):new b_(t.error||yt.EMPTY_STRING,t.error_description,t.suberror);t.client_info&&kP(t.client_info,r)},e.prototype.validateTokenResponse=function(t){if(t.error||t.error_description||t.suberror){if(Pd.isInteractionRequiredError(t.error,t.error_description,t.suberror))throw new Pd(t.error,t.error_description,t.suberror,t.timestamp||yt.EMPTY_STRING,t.trace_id||yt.EMPTY_STRING,t.correlation_id||yt.EMPTY_STRING,t.claims||yt.EMPTY_STRING);var n=t.error_codes+" - ["+t.timestamp+"]: "+t.error_description+" - Correlation ID: "+t.correlation_id+" - Trace ID: "+t.trace_id;throw new b_(t.error,n,t.suberror)}},e.prototype.handleServerTokenResponse=function(t,n,r,o,i,l,c,f,p){var g;return zr(this,void 0,void 0,function(){var v,w,C,T,k;return Br(this,function(P){switch(P.label){case 0:if((g=this.performanceClient)!=null&&g.addQueueMeasurement(Jt.HandleServerTokenResponse,t.correlation_id),t.id_token){if(v=new Vf(t.id_token||yt.EMPTY_STRING,this.cryptoObj),i&&!Vn.isEmpty(i.nonce)&&v.claims.nonce!==i.nonce)throw Gn.createNonceMismatchError();if(o.maxAge||o.maxAge===0){if(!(C=v.claims.auth_time))throw Gn.createAuthTimeNotFoundError();Vf.checkMaxAge(C,o.maxAge)}}this.homeAccountIdentifier=El.generateHomeAccountId(t.client_info||yt.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,v),i&&i.state&&(w=rm.parseRequestState(this.cryptoObj,i.state)),t.key_id=t.key_id||o.sshKid||void 0,C=this.generateCacheRecord(t,n,r,o,v,l,i),P.label=1;case 1:return P.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),T=new TLe(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(T)]):[3,3];case 2:P.sent(),P.label=3;case 3:return!c||f||!C.account||(k=C.account.generateAccountKey(),this.cacheStorage.getAccount(k))?[4,this.cacheStorage.saveCacheRecord(C)]:(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,e.generateAuthenticationResult(this.cryptoObj,n,C,!1,o,v,w,void 0,p)]);case 4:return P.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&T?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(T)]):[3,7];case 6:P.sent(),P.label=7;case 7:return[7];case 8:return[2,e.generateAuthenticationResult(this.cryptoObj,n,C,!1,o,v,w,t,p)]}})})},e.prototype.generateCacheRecord=function(t,n,r,o,P,l,T){var f,p,g=n.getPreferredCache();if(Vn.isEmpty(g))throw Gn.createInvalidCacheEnvironmentError();!Vn.isEmpty(t.id_token)&&P&&(f=jv.createIdTokenEntity(this.homeAccountIdentifier,g,t.id_token||yt.EMPTY_STRING,this.clientId,P.claims.tid||yt.EMPTY_STRING),p=this.generateAccountEntity(t,P,n,T));var v,w,C,T=null,k=(Vn.isEmpty(t.access_token)||(v=t.scope?Kl.fromString(t.scope):new Kl(o.scopes||[]),C=(w=r+((typeof t.expires_in=="string"?parseInt(t.expires_in,10):t.expires_in)||0))+((typeof t.ext_expires_in=="string"?parseInt(t.ext_expires_in,10):t.ext_expires_in)||0),r=(k=(typeof t.refresh_in=="string"?parseInt(t.refresh_in,10):t.refresh_in)||void 0)&&0<k?r+k:void 0,T=$v.createAccessTokenEntity(this.homeAccountIdentifier,g,t.access_token||yt.EMPTY_STRING,this.clientId,P?P.claims.tid||yt.EMPTY_STRING:n.tenant,v.printScopes(),w,C,this.cryptoObj,r,t.token_type,l,t.key_id,o.claims,o.requestedClaimsHash)),null),P=(Vn.isEmpty(t.refresh_token)||(k=Nw.createRefreshTokenEntity(this.homeAccountIdentifier,g,t.refresh_token||yt.EMPTY_STRING,this.clientId,t.foci,l)),null);return Vn.isEmpty(t.foci)||(P=BN.createAppMetadataEntity(this.clientId,g,t.foci)),new MP(p,f,T,k,P)},e.prototype.generateAccountEntity=function(t,n,r,c){var i=r.authorityType,l=c?c.cloud_graph_host_name:yt.EMPTY_STRING,c=c?c.msgraph_host:yt.EMPTY_STRING;if(i===wu.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),El.createGenericAccount(this.homeAccountIdentifier,n,r,l,c);if(Vn.isEmpty(t.client_info)&&r.protocolMode==="AAD")throw Gn.createClientInfoEmptyError();return t.client_info?El.createAccount(t.client_info,this.homeAccountIdentifier,n,r,l,c):El.createGenericAccount(this.homeAccountIdentifier,n,r,l,c)},e.generateAuthenticationResult=function(t,n,r,o,i,l,c,f,p){var g;return zr(this,void 0,void 0,function(){var v,w,C,T,k,P,O,L;return Br(this,function(D){switch(D.label){case 0:if(v=yt.EMPTY_STRING,w=[],C=null,k=yt.EMPTY_STRING,!r.accessToken)return[3,4];if(r.accessToken.tokenType!==gi.POP)return[3,2];if(O=new Ox(t),P=r.accessToken,L=P.secret,P=P.keyId)return[4,O.signPopToken(L,P,i)];throw Gn.createKeyIdMissingError();case 1:return v=D.sent(),[3,3];case 2:v=r.accessToken.secret,D.label=3;case 3:w=Kl.fromString(r.accessToken.target).asArray(),C=new Date(1e3*Number(r.accessToken.expiresOn)),T=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),D.label=4;case 4:return r.appMetadata&&(k=r.appMetadata.familyId===G1?G1:yt.EMPTY_STRING),O=(l==null?void 0:l.claims.oid)||(l==null?void 0:l.claims.sub)||yt.EMPTY_STRING,L=(l==null?void 0:l.claims.tid)||yt.EMPTY_STRING,f!=null&&f.spa_accountid&&r.account&&(r.account.nativeAccountId=f==null?void 0:f.spa_accountid),[2,{authority:n.canonicalAuthority,uniqueId:O,tenantId:L,scopes:w,account:r.account?r.account.getAccountInfo():null,idToken:l?l.rawToken:yt.EMPTY_STRING,idTokenClaims:l?l.claims:{},accessToken:v,fromCache:o,expiresOn:C,correlationId:i.correlationId,requestId:p||yt.EMPTY_STRING,extExpiresOn:T,familyId:k,tokenType:((g=r.accessToken)==null?void 0:g.tokenType)||yt.EMPTY_STRING,state:c?c.userRequestState:yt.EMPTY_STRING,cloudGraphHostName:((g=r.account)==null?void 0:g.cloudGraphHostName)||yt.EMPTY_STRING,msGraphHost:((g=r.account)==null?void 0:g.msGraphHost)||yt.EMPTY_STRING,code:f==null?void 0:f.spa_code,fromNativeBroker:!1}]}})})},e}(),IZ=function(e){function t(n,r){return n=e.call(this,n,r)||this,n.includeRedirectUri=!0,n}return hc(t,e),t.prototype.getAuthCodeUrl=function(n){var r;return zr(this,void 0,void 0,function(){var o;return Br(this,function(i){switch(i.label){case 0:return(r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.GetAuthCodeUrl,n.correlationId),(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.AuthClientCreateQueryString,n.correlationId),[4,this.createAuthCodeUrlQueryString(n)];case 1:return o=i.sent(),[2,Do.appendQueryString(this.authority.authorizationEndpoint,o)]}})})},t.prototype.acquireToken=function(n,r){var o,i;return zr(this,void 0,void 0,function(){var l,c,f,p,g,v=this;return Br(this,function(w){switch(w.label){case 0:if(n&&n.code)return(o=this.performanceClient)!=null&&o.addQueueMeasurement(Jt.AuthClientAcquireToken,n.correlationId),l=(o=this.performanceClient)==null?void 0:o.startMeasurement("AuthCodeClientAcquireToken",n.correlationId),this.logger.info("in acquireToken call in auth-code client"),c=Dd.nowSeconds(),(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.AuthClientExecuteTokenRequest,n.correlationId),[4,this.executeTokenRequest(this.authority,n)];throw Gn.createTokenRequestCannotBeMadeError();case 1:return f=w.sent(),p=(o=f.headers)==null?void 0:o[Gc.X_MS_REQUEST_ID],(g=(i=f.headers)==null?void 0:i[Gc.X_MS_HTTP_VERSION])&&l!=null&&l.addStaticFields({httpVerAuthority:g}),(g=new RP(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient)).validateTokenResponse(f.body),(i=this.performanceClient)!=null&&i.setPreQueueTime(Jt.HandleServerTokenResponse,n.correlationId),[2,g.handleServerTokenResponse(f.body,this.authority,c,n,r,void 0,void 0,void 0,p).then(function(C){return l!=null&&l.endMeasurement({success:!0}),C}).catch(function(C){throw v.logger.verbose("Error in fetching token in ACC",n.correlationId),l!=null&&l.endMeasurement({errorCode:C.errorCode,subErrorCode:C.subError,success:!1}),C})]}})})},t.prototype.handleFragmentResponse=function(i,r){var o=new RP(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),i=new Do(i),i=Do.getDeserializedHash(i.getHash());if(o.validateServerAuthorizationCodeResponse(i,r,this.cryptoUtils),i.code)return mi(mi({},i),{code:i.code});throw Gn.createNoAuthCodeInServerResponseError()},t.prototype.getLogoutUri=function(n){if(n)return n=this.createLogoutUrlQueryString(n),Do.appendQueryString(this.authority.endSessionEndpoint,n);throw Zi.createEmptyLogoutRequestError()},t.prototype.executeTokenRequest=function(n,r){var o;return zr(this,void 0,void 0,function(){var i,l,c,f,p;return Br(this,function(g){switch(g.label){case 0:return(o=this.performanceClient)!=null&&o.addQueueMeasurement(Jt.AuthClientExecuteTokenRequest,r.correlationId),(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.AuthClientCreateTokenRequestBody,r.correlationId),i=this.createTokenQueryParameters(r),i=Do.appendQueryString(n.tokenEndpoint,i),[4,this.createTokenRequestBody(r)];case 1:if(l=g.sent(),f=void 0,r.clientInfo)try{c=kP(r.clientInfo,this.cryptoUtils),f={credential:""+c.uid+Ss.CLIENT_INFO_SEPARATOR+c.utid,type:Vc.HOME_ACCOUNT_ID}}catch(v){this.logger.verbose("Could not parse client info for CCS Header: "+v)}return f=this.createTokenRequestHeaders(f||r.ccsCredential),p={clientId:this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:r.scopes,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},[2,this.executePostToTokenEndpoint(i,l,f,p)]}})})},t.prototype.createTokenRequestBody=function(n){var r;return zr(this,void 0,void 0,function(){var o,i,l,c,f,p;return Br(this,function(g){switch(g.label){case 0:return(r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.AuthClientCreateTokenRequestBody,n.correlationId),(o=new Y1).addClientId(this.config.authOptions.clientId),this.includeRedirectUri?o.addRedirectUri(n.redirectUri):xv.validateRedirectUri(n.redirectUri),o.addScopes(n.scopes),o.addAuthorizationCode(n.code),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addThrottling(),this.serverTelemetryManager&&o.addServerTelemetry(this.serverTelemetryManager),n.codeVerifier&&o.addCodeVerifier(n.codeVerifier),this.config.clientCredentials.clientSecret&&o.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(i=this.config.clientCredentials.clientAssertion,o.addClientAssertion(i.assertion),o.addClientAssertionType(i.assertionType)),o.addGrantType(EP.AUTHORIZATION_CODE_GRANT),o.addClientInfo(),n.authenticationScheme!==gi.POP?[3,2]:(i=new Ox(this.cryptoUtils,this.performanceClient),(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.PopTokenGenerateCnf,n.correlationId),[4,i.generateCnf(n)]);case 1:return l=g.sent(),o.addPopToken(l.reqCnfString),[3,3];case 2:if(n.authenticationScheme===gi.SSH){if(!n.sshJwk)throw Zi.createMissingSshJwkError();o.addSshJwk(n.sshJwk)}g.label=3;case 3:if(l=n.correlationId||this.config.cryptoInterface.createNewGuid(),o.addCorrelationId(l),(!Vn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&o.addClaims(n.claims,this.config.authOptions.clientCapabilities),c=void 0,n.clientInfo)try{f=kP(n.clientInfo,this.cryptoUtils),c={credential:""+f.uid+Ss.CLIENT_INFO_SEPARATOR+f.utid,type:Vc.HOME_ACCOUNT_ID}}catch(v){this.logger.verbose("Could not parse client info for CCS Header: "+v)}else c=n.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&c)switch(c.type){case Vc.HOME_ACCOUNT_ID:try{f=Lw(c.credential),o.addCcsOid(f)}catch(v){this.logger.verbose("Could not parse home account ID for CCS Header: "+v)}break;case Vc.UPN:o.addCcsUpn(c.credential)}return n.tokenBodyParameters&&o.addExtraQueryParameters(n.tokenBodyParameters),!n.enableSpaAuthorizationCode||n.tokenBodyParameters&&n.tokenBodyParameters[Gr.RETURN_SPA_CODE]||o.addExtraQueryParameters(((p={})[Gr.RETURN_SPA_CODE]="1",p)),[2,o.createQueryString()]}})})},t.prototype.createAuthCodeUrlQueryString=function(n){var r;return zr(this,void 0,void 0,function(){var o,i,l,c;return Br(this,function(f){switch(f.label){case 0:if((r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.AuthClientCreateQueryString,n.correlationId),(o=new Y1).addClientId(this.config.authOptions.clientId),i=aM(n.scopes||[],n.extraScopesToConsent||[]),o.addScopes(i),o.addRedirectUri(n.redirectUri),i=n.correlationId||this.config.cryptoInterface.createNewGuid(),o.addCorrelationId(i),o.addResponseMode(n.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),n.codeChallenge&&n.codeChallengeMethod&&o.addCodeChallengeParams(n.codeChallenge,n.codeChallengeMethod),n.prompt&&o.addPrompt(n.prompt),n.domainHint&&o.addDomainHint(n.domainHint),n.prompt!==Zl.SELECT_ACCOUNT)if(n.sid&&n.prompt===Zl.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(n.sid);else if(n.account){if(i=this.extractAccountSid(n.account),c=this.extractLoginHint(n.account)){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(c);try{l=Lw(n.account.homeAccountId),o.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(i&&n.prompt===Zl.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(i);try{l=Lw(n.account.homeAccountId),o.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(n.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(n.loginHint),o.addCcsUpn(n.loginHint);else if(n.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(n.account.username);try{l=Lw(n.account.homeAccountId),o.addCcsOid(l)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else n.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(n.loginHint),o.addCcsUpn(n.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return n.nonce&&o.addNonce(n.nonce),n.state&&o.addState(n.state),(!Vn.isEmpty(n.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&o.addClaims(n.claims,this.config.authOptions.clientCapabilities),n.extraQueryParameters&&o.addExtraQueryParameters(n.extraQueryParameters),n.nativeBroker?(o.addNativeBroker(),n.authenticationScheme!==gi.POP?[3,2]:[4,new Ox(this.cryptoUtils).generateCnf(n)]):[3,2];case 1:c=f.sent(),o.addPopToken(c.reqCnfString),f.label=2;case 2:return[2,o.createQueryString()]}})})},t.prototype.createLogoutUrlQueryString=function(n){var r=new Y1;return n.postLogoutRedirectUri&&r.addPostLogoutRedirectUri(n.postLogoutRedirectUri),n.correlationId&&r.addCorrelationId(n.correlationId),n.idTokenHint&&r.addIdTokenHint(n.idTokenHint),n.state&&r.addState(n.state),n.logoutHint&&r.addLogoutHint(n.logoutHint),n.extraQueryParameters&&r.addExtraQueryParameters(n.extraQueryParameters),r.createQueryString()},t.prototype.extractAccountSid=function(n){return((n=n.idTokenClaims)==null?void 0:n.sid)||null},t.prototype.extractLoginHint=function(n){return((n=n.idTokenClaims)==null?void 0:n.login_hint)||null},t}(RB),kZ=function(e){function t(n,r){return e.call(this,n,r)||this}return hc(t,e),t.prototype.acquireToken=function(n){var r,o,i;return zr(this,void 0,void 0,function(){var l,c,f,p,g,v=this;return Br(this,function(w){switch(w.label){case 0:return(r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.RefreshTokenClientAcquireToken,n.correlationId),l=(r=this.performanceClient)==null?void 0:r.startMeasurement(Jt.RefreshTokenClientAcquireToken,n.correlationId),this.logger.verbose("RefreshTokenClientAcquireToken called",n.correlationId),c=Dd.nowSeconds(),(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.RefreshTokenClientExecuteTokenRequest,n.correlationId),[4,this.executeTokenRequest(n,this.authority)];case 1:return f=w.sent(),p=(r=f.headers)==null?void 0:r[Gc.X_MS_HTTP_VERSION],l!=null&&l.addStaticFields({refreshTokenSize:((o=f.body.refresh_token)==null?void 0:o.length)||0}),p&&l!=null&&l.addStaticFields({httpVerToken:p}),p=(o=f.headers)==null?void 0:o[Gc.X_MS_REQUEST_ID],(g=new RP(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin)).validateTokenResponse(f.body),(i=this.performanceClient)!=null&&i.setPreQueueTime(Jt.HandleServerTokenResponse,n.correlationId),[2,g.handleServerTokenResponse(f.body,this.authority,c,n,void 0,void 0,!0,n.forceCache,p).then(function(C){return l!=null&&l.endMeasurement({success:!0}),C}).catch(function(C){throw v.logger.verbose("Error in fetching refresh token",n.correlationId),l!=null&&l.endMeasurement({errorCode:C.errorCode,subErrorCode:C.subError,success:!1}),C})]}})})},t.prototype.acquireTokenByRefreshToken=function(n){var r,o;return zr(this,void 0,void 0,function(){var i,l;return Br(this,function(c){if(!n)throw Zi.createEmptyTokenRequestError();if((o=this.performanceClient)!=null&&o.addQueueMeasurement(Jt.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),!n.account)throw Gn.createNoAccountInSilentRequestError();if(this.cacheManager.isAppMetadataFOCI(n.account.environment))try{return(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId),[2,this.acquireTokenWithCachedRefreshToken(n,!0)]}catch(f){if(i=f instanceof Pd&&f.errorCode===Fw.noTokensFoundError.code,l=f instanceof b_&&f.errorCode===zV.INVALID_GRANT_ERROR&&f.subError===zV.CLIENT_MISMATCH_ERROR,i||l)return(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId),[2,this.acquireTokenWithCachedRefreshToken(n,!1)];throw f}return(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId),[2,this.acquireTokenWithCachedRefreshToken(n,!1)]})})},t.prototype.acquireTokenWithCachedRefreshToken=function(n,r){var o;return zr(this,void 0,void 0,function(){var i,l;return Br(this,function(c){if((o=this.performanceClient)!=null&&o.addQueueMeasurement(Jt.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId),i=(o=this.performanceClient)==null?void 0:o.startMeasurement(Jt.RefreshTokenClientAcquireTokenWithCachedRefreshToken,n.correlationId),this.logger.verbose("RefreshTokenClientAcquireTokenWithCachedRefreshToken called",n.correlationId),l=this.cacheManager.getRefreshToken(n.account,r))return i!=null&&i.endMeasurement({success:!0}),l=mi(mi({},n),{refreshToken:l.secret,authenticationScheme:n.authenticationScheme||gi.BEARER,ccsCredential:{credential:n.account.homeAccountId,type:Vc.HOME_ACCOUNT_ID}}),(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RefreshTokenClientAcquireToken,n.correlationId),[2,this.acquireToken(l)];throw i!=null&&i.discardMeasurement(),Pd.createNoTokensFoundError()})})},t.prototype.executeTokenRequest=function(n,r){var o;return zr(this,void 0,void 0,function(){var i,l,c,f,p;return Br(this,function(g){switch(g.label){case 0:return(o=this.performanceClient)!=null&&o.addQueueMeasurement(Jt.RefreshTokenClientExecuteTokenRequest,n.correlationId),i=(o=this.performanceClient)==null?void 0:o.startMeasurement(Jt.RefreshTokenClientExecuteTokenRequest,n.correlationId),(o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RefreshTokenClientCreateTokenRequestBody,n.correlationId),l=this.createTokenQueryParameters(n),l=Do.appendQueryString(r.tokenEndpoint,l),[4,this.createTokenRequestBody(n)];case 1:return c=g.sent(),f=this.createTokenRequestHeaders(n.ccsCredential),p={clientId:this.config.authOptions.clientId,authority:r.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},[2,this.executePostToTokenEndpoint(l,c,f,p).then(function(v){return i!=null&&i.endMeasurement({success:!0}),v}).catch(function(v){throw i!=null&&i.endMeasurement({success:!1}),v})]}})})},t.prototype.createTokenRequestBody=function(n){var r;return zr(this,void 0,void 0,function(){var o,i,l,c;return Br(this,function(f){switch(f.label){case 0:return(r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.RefreshTokenClientCreateTokenRequestBody,n.correlationId),l=n.correlationId,o=(r=this.performanceClient)==null?void 0:r.startMeasurement(Jt.BaseClientCreateTokenRequestHeaders,l),(i=new Y1).addClientId(this.config.authOptions.clientId),i.addScopes(n.scopes),i.addGrantType(EP.REFRESH_TOKEN_GRANT),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&i.addServerTelemetry(this.serverTelemetryManager),i.addCorrelationId(l),i.addRefreshToken(n.refreshToken),this.config.clientCredentials.clientSecret&&i.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(l=this.config.clientCredentials.clientAssertion,i.addClientAssertion(l.assertion),i.addClientAssertionType(l.assertionType)),n.authenticationScheme!==gi.POP?[3,2]:(l=new Ox(this.cryptoUtils,this.performanceClient),(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.PopTokenGenerateCnf,n.correlationId),[4,l.generateCnf(n)]);case 1:return l=f.sent(),i.addPopToken(l.reqCnfString),[3,3];case 2:if(n.authenticationScheme===gi.SSH){if(!n.sshJwk)throw o!=null&&o.endMeasurement({success:!1}),Zi.createMissingSshJwkError();i.addSshJwk(n.sshJwk)}f.label=3;case 3:if((!Vn.isEmptyObj(n.claims)||this.config.authOptions.clientCapabilities&&0<this.config.authOptions.clientCapabilities.length)&&i.addClaims(n.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&n.ccsCredential)switch(n.ccsCredential.type){case Vc.HOME_ACCOUNT_ID:try{c=Lw(n.ccsCredential.credential),i.addCcsOid(c)}catch(p){this.logger.verbose("Could not parse home account ID for CCS Header: "+p)}break;case Vc.UPN:i.addCcsUpn(n.ccsCredential.credential)}return o!=null&&o.endMeasurement({success:!0}),[2,i.createQueryString()]}})})},t}(RB),ILe=function(e){function t(n,r){return e.call(this,n,r)||this}return hc(t,e),t.prototype.acquireToken=function(n){return zr(this,void 0,void 0,function(){var r;return Br(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.acquireCachedToken(n)];case 1:return[2,o.sent()];case 2:if((r=o.sent())instanceof Gn&&r.errorCode===Tn.tokenRefreshRequired.code)return[2,new kZ(this.config,this.performanceClient).acquireTokenByRefreshToken(n)];throw r;case 3:return[2]}})})},t.prototype.acquireCachedToken=function(n){var r,o,i;return zr(this,void 0,void 0,function(){var l;return Br(this,function(c){switch(c.label){case 0:if(!n)throw Zi.createEmptyTokenRequestError();if(n.forceRefresh)throw(r=this.serverTelemetryManager)!=null&&r.setCacheOutcome(zg.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),Gn.createRefreshRequiredError();if(!this.config.cacheOptions.claimsBasedCachingEnabled&&!Vn.isEmptyObj(n.claims))throw(r=this.serverTelemetryManager)!=null&&r.setCacheOutcome(zg.CLAIMS_REQUESTED_CACHE_SKIPPED),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because claims-based caching is disabled and claims were requested."),Gn.createRefreshRequiredError();if(!n.account)throw Gn.createNoAccountInSilentRequestError();if(l=n.authority||this.authority.getPreferredCache(),!(l=this.cacheManager.readCacheRecord(n.account,n,l)).accessToken)throw(o=this.serverTelemetryManager)!=null&&o.setCacheOutcome(zg.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),Gn.createRefreshRequiredError();if(Dd.wasClockTurnedBack(l.accessToken.cachedAt)||Dd.isTokenExpired(l.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw(o=this.serverTelemetryManager)!=null&&o.setCacheOutcome(zg.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),Gn.createRefreshRequiredError();if(l.accessToken.refreshOn&&Dd.isTokenExpired(l.accessToken.refreshOn,0))throw(i=this.serverTelemetryManager)!=null&&i.setCacheOutcome(zg.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),Gn.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(l,n)];case 1:return[2,c.sent()]}})})},t.prototype.generateResultFromCacheRecord=function(n,r){return zr(this,void 0,void 0,function(){var o,i;return Br(this,function(l){switch(l.label){case 0:if(n.idToken&&(o=new Vf(n.idToken.secret,this.config.cryptoInterface)),r.maxAge||r.maxAge===0){if(!(i=o==null?void 0:o.claims.auth_time))throw Gn.createAuthTimeNotFoundError();Vf.checkMaxAge(i,r.maxAge)}return[4,RP.generateAuthenticationResult(this.cryptoUtils,this.authority,n,!0,r,o)];case 1:return[2,l.sent()]}})})},t}(RB);function kLe(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}var LS,PZ={endpointMetadata:{"https://login.microsoftonline.com/common/":{token_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/common/":{token_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/common/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/common/":{token_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/common/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/common/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/common/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/consumers/":{token_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/consumers/":{token_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/consumers/":{token_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/consumers/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/9188040d-6c67-4c5b-b112-36a304b66dad/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/consumers/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/consumers/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"},"https://login.microsoftonline.com/organizations/":{token_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.com/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.com/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.com/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.com",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pas.windows.net"},"https://login.chinacloudapi.cn/organizations/":{token_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.chinacloudapi.cn/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://microsoftgraph.chinacloudapi.cn/oidc/userinfo",authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.chinacloudapi.cn/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.chinacloudapi.cn/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"partner.microsoftonline.cn",cloud_graph_host_name:"graph.chinacloudapi.cn",msgraph_host:"microsoftgraph.chinacloudapi.cn",rbac_url:"https://pas.chinacloudapi.cn"},"https://login.microsoftonline.us/organizations/":{token_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/token",token_endpoint_auth_methods_supported:["client_secret_post","private_key_jwt","client_secret_basic"],jwks_uri:"https://login.microsoftonline.us/organizations/discovery/v2.0/keys",response_modes_supported:["query","fragment","form_post"],subject_types_supported:["pairwise"],id_token_signing_alg_values_supported:["RS256"],response_types_supported:["code","id_token","code id_token","id_token token"],scopes_supported:["openid","profile","email","offline_access"],issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",request_uri_parameter_supported:!1,userinfo_endpoint:"https://graph.microsoft.com/oidc/userinfo",authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/authorize",device_authorization_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/devicecode",http_logout_supported:!0,frontchannel_logout_supported:!0,end_session_endpoint:"https://login.microsoftonline.us/organizations/oauth2/v2.0/logout",claims_supported:["sub","iss","cloud_instance_name","cloud_instance_host_name","cloud_graph_host_name","msgraph_host","aud","exp","iat","auth_time","acr","nonce","preferred_username","name","tid","ver","at_hash","c_hash","email"],kerberos_endpoint:"https://login.microsoftonline.us/organizations/kerberos",tenant_region_scope:null,cloud_instance_name:"microsoftonline.us",cloud_graph_host_name:"graph.windows.net",msgraph_host:"graph.microsoft.com",rbac_url:"https://pasff.usgovcloudapi.net"}},instanceDiscoveryMetadata:{"https://login.microsoftonline.com/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/common/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/common/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/common/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/consumers/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/consumers/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/consumers/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.com/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.chinacloudapi.cn/organizations/":{tenant_discovery_endpoint:"https://login.chinacloudapi.cn/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},"https://login.microsoftonline.us/organizations/":{tenant_discovery_endpoint:"https://login.microsoftonline.us/organizations/v2.0/.well-known/openid-configuration","api-version":"1.1",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}}},UV=PZ.endpointMetadata,jV=PZ.instanceDiscoveryMetadata,UN=(function(e){e.AAD="AAD",e.OIDC="OIDC"}(LS=LS||{}),function(){function e(){this.expiresAt=Dd.nowSeconds()+W1.REFRESH_TIME_SECONDS}return e.prototype.updateCloudDiscoveryMetadata=function(t,n){this.aliases=t.aliases,this.preferred_cache=t.preferred_cache,this.preferred_network=t.preferred_network,this.aliasesFromNetwork=n},e.prototype.updateEndpointMetadata=function(t,n){this.authorization_endpoint=t.authorization_endpoint,this.token_endpoint=t.token_endpoint,this.end_session_endpoint=t.end_session_endpoint,this.issuer=t.issuer,this.endpointsFromNetwork=n,this.jwks_uri=t.jwks_uri},e.prototype.updateCanonicalAuthority=function(t){this.canonical_authority=t},e.prototype.resetExpiresAt=function(){this.expiresAt=Dd.nowSeconds()+W1.REFRESH_TIME_SECONDS},e.prototype.isExpired=function(){return this.expiresAt<=Dd.nowSeconds()},e.isAuthorityMetadataEntity=function(t,n){return!!n&&t.indexOf(W1.CACHE_KEY)===0&&n.hasOwnProperty("aliases")&&n.hasOwnProperty("preferred_cache")&&n.hasOwnProperty("preferred_network")&&n.hasOwnProperty("canonical_authority")&&n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("aliasesFromNetwork")&&n.hasOwnProperty("endpointsFromNetwork")&&n.hasOwnProperty("expiresAt")&&n.hasOwnProperty("jwks_uri")},e}());function PLe(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}function ALe(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}var Kp,is,vf,Xo,hf,zw,Yi,rr,$V,HV,Xu,Mr,kg,MLe=function(){function e(t,n,r){this.networkInterface=t,this.performanceClient=n,this.correlationId=r}return e.prototype.detectRegion=function(t,n){var r,o;return zr(this,void 0,void 0,function(){var i,l,c,f;return Br(this,function(p){switch(p.label){case 0:if((r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.RegionDiscoveryDetectRegion,this.correlationId),i=t)return[3,8];l=e.IMDS_OPTIONS,p.label=1;case 1:return p.trys.push([1,6,,7]),(r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(yt.IMDS_VERSION,l)];case 2:return(c=p.sent()).status===Dw.httpSuccess&&(i=c.body,n.region_source=Ig.IMDS),c.status!==Dw.httpBadRequest?[3,5]:((o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RegionDiscoveryGetCurrentVersion,this.correlationId),[4,this.getCurrentVersion(l)]);case 3:return(c=p.sent())?((o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[4,this.getRegionFromIMDS(c,l)]):(n.region_source=Ig.FAILED_AUTO_DETECTION,[2,null]);case 4:(f=p.sent()).status===Dw.httpSuccess&&(i=f.body,n.region_source=Ig.IMDS),p.label=5;case 5:return[3,7];case 6:return p.sent(),n.region_source=Ig.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:n.region_source=Ig.ENVIRONMENT_VARIABLE,p.label=9;case 9:return i||(n.region_source=Ig.FAILED_AUTO_DETECTION),[2,i||null]}})})},e.prototype.getRegionFromIMDS=function(t,n){var r;return zr(this,void 0,void 0,function(){return Br(this,function(o){return(r=this.performanceClient)!=null&&r.addQueueMeasurement(Jt.RegionDiscoveryGetRegionFromIMDS,this.correlationId),[2,this.networkInterface.sendGetRequestAsync(yt.IMDS_ENDPOINT+"?api-version="+t+"&format=text",n,yt.IMDS_TIMEOUT)]})})},e.prototype.getCurrentVersion=function(t){var n;return zr(this,void 0,void 0,function(){var r;return Br(this,function(o){switch(o.label){case 0:(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.RegionDiscoveryGetCurrentVersion,this.correlationId),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(yt.IMDS_ENDPOINT+"?format=json",t)];case 2:return(r=o.sent()).status===Dw.httpBadRequest&&r.body&&r.body["newest-versions"]&&0<r.body["newest-versions"].length?[2,r.body["newest-versions"][0]]:[2,null];case 3:return o.sent(),[2,null];case 4:return[2]}})})},e.IMDS_OPTIONS={headers:{Metadata:"true"}},e}(),NS=function(){function e(t,n,r,o,i,l,c){this.canonicalAuthority=t,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=l,this.correlationId=c,this.regionDiscovery=new MLe(n,this.performanceClient,this.correlationId)}return e.prototype.getAuthorityType=function(t){if(t.HostNameAndPort.endsWith(yt.CIAM_AUTH_URL))return wu.Ciam;if(t=t.PathSegments,t.length)switch(t[0].toLowerCase()){case yt.ADFS:return wu.Adfs;case yt.DSTS:return wu.Dsts}return wu.Default},Object.defineProperty(e.prototype,"authorityType",{get:function(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(t){this._canonicalAuthority=new Do(t),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(this.metadata.end_session_endpoint)return this.replacePath(this.metadata.end_session_endpoint);throw Gn.createLogoutNotSupportedError()}throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"jwksUri",{get:function(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),e.prototype.canReplaceTenant=function(t){return t.PathSegments.length===1&&!e.reservedTenantDomains.has(t.PathSegments[0])&&this.getAuthorityType(t)===wu.Default&&this.protocolMode===LS.AAD},e.prototype.replaceTenant=function(t){return t.replace(/{tenant}|{tenantid}/g,this.tenant)},e.prototype.replacePath=function(t){var n=this,r=t,o=new Do(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(function(l,c){var f=i[c];c===0&&n.canReplaceTenant(o)&&f!==(c=new Do(n.metadata.authorization_endpoint).getUrlComponents().PathSegments[0])&&(n.logger.verbose("Replacing tenant domain name "+f+" with id "+c),f=c),l!==f&&(r=r.replace("/"+f+"/","/"+l+"/"))}),this.replaceTenant(r)},Object.defineProperty(e.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===wu.Adfs||this.authorityType===wu.Dsts||this.protocolMode===LS.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),e.prototype.discoveryComplete=function(){return!!this.metadata},e.prototype.resolveEndpointsAsync=function(){var t;return zr(this,void 0,void 0,function(){var n,r,o;return Br(this,function(i){switch(i.label){case 0:return(t=this.performanceClient)!=null&&t.addQueueMeasurement(Jt.AuthorityResolveEndpointsAsync,this.correlationId),(n=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort))||(n=new UN).updateCanonicalAuthority(this.canonicalAuthority),(t=this.performanceClient)!=null&&t.setPreQueueTime(Jt.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),[4,this.updateCloudDiscoveryMetadata(n)];case 1:return r=i.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network),(t=this.performanceClient)!=null&&t.setPreQueueTime(Jt.AuthorityUpdateEndpointMetadata,this.correlationId),[4,this.updateEndpointMetadata(n)];case 2:return o=i.sent(),r!==yd.CACHE&&o!==yd.CACHE&&(n.resetExpiresAt(),n.updateCanonicalAuthority(this.canonicalAuthority)),o=this.cacheManager.generateAuthorityMetadataCacheKey(n.preferred_cache),this.cacheManager.setAuthorityMetadata(o,n),this.metadata=n,[2]}})})},e.prototype.updateEndpointMetadata=function(t){var n,r,o;return zr(this,void 0,void 0,function(){var i,l;return Br(this,function(c){switch(c.label){case 0:return(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.AuthorityUpdateEndpointMetadata,this.correlationId),(i=this.getEndpointMetadataFromConfig())?(t.updateEndpointMetadata(i,!1),[2,yd.CONFIG]):this.isAuthoritySameType(t)&&t.endpointsFromNetwork&&!t.isExpired()?[2,yd.CACHE]:((n=this.performanceClient)!=null&&n.setPreQueueTime(Jt.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),[4,this.getEndpointMetadataFromNetwork()]);case 1:return(i=c.sent())?(n=this.authorityOptions.azureRegionConfiguration)!=null&&n.azureRegion?((r=this.performanceClient)!=null&&r.setPreQueueTime(Jt.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(i)]):[3,3]:[3,4];case 2:i=c.sent(),c.label=3;case 3:return t.updateEndpointMetadata(i,!0),[2,yd.NETWORK];case 4:return!(l=this.getEndpointMetadataFromHardcodedValues())||this.authorityOptions.skipAuthorityMetadataCache?[3,7]:(r=this.authorityOptions.azureRegionConfiguration)!=null&&r.azureRegion?((o=this.performanceClient)!=null&&o.setPreQueueTime(Jt.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),[4,this.updateMetadataWithRegionalInformation(l)]):[3,6];case 5:l=c.sent(),c.label=6;case 6:return t.updateEndpointMetadata(l,!1),[2,yd.HARDCODED_VALUES];case 7:throw Gn.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}})})},e.prototype.isAuthoritySameType=function(t){return new Do(t.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length},e.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Zi.createInvalidAuthorityMetadataError()}return null},e.prototype.getEndpointMetadataFromNetwork=function(){var t;return zr(this,void 0,void 0,function(){var n,r;return Br(this,function(o){switch(o.label){case 0:(t=this.performanceClient)!=null&&t.addQueueMeasurement(Jt.AuthorityGetEndpointMetadataFromNetwork,this.correlationId),n={},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,n)];case 2:return[2,kLe((r=o.sent()).body)?r.body:null];case 3:return o.sent(),[2,null];case 4:return[2]}})})},e.prototype.getEndpointMetadataFromHardcodedValues=function(){return this.canonicalAuthority in UV?UV[this.canonicalAuthority]:null},e.prototype.updateMetadataWithRegionalInformation=function(t){var n;return zr(this,void 0,void 0,function(){var r;return Br(this,function(o){switch(o.label){case 0:return(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId),(r=(n=this.authorityOptions.azureRegionConfiguration)==null?void 0:n.azureRegion)?r!==yt.AZURE_REGION_AUTO_DISCOVER_FLAG?(this.regionDiscoveryMetadata.region_outcome=q1.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=r,[2,e.replaceWithRegionalInformation(t,r)]):((n=this.performanceClient)!=null&&n.setPreQueueTime(Jt.RegionDiscoveryDetectRegion,this.correlationId),[4,this.regionDiscovery.detectRegion((n=this.authorityOptions.azureRegionConfiguration)==null?void 0:n.environmentRegion,this.regionDiscoveryMetadata)]):[3,2];case 1:if(r=o.sent())return this.regionDiscoveryMetadata.region_outcome=q1.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=r,[2,e.replaceWithRegionalInformation(t,r)];this.regionDiscoveryMetadata.region_outcome=q1.AUTO_DETECTION_REQUESTED_FAILED,o.label=2;case 2:return[2,t]}})})},e.prototype.updateCloudDiscoveryMetadata=function(t){var n;return zr(this,void 0,void 0,function(){var r,o;return Br(this,function(i){switch(i.label){case 0:return(n=this.performanceClient)!=null&&n.addQueueMeasurement(Jt.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId),this.logger.verbose("Attempting to get cloud discovery metadata in the config"),this.logger.verbosePii("Known Authorities: "+(this.authorityOptions.knownAuthorities||yt.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: "+(this.authorityOptions.authorityMetadata||yt.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: "+(t.canonical_authority||yt.NOT_APPLICABLE)),(r=this.getCloudDiscoveryMetadataFromConfig())?(this.logger.verbose("Found cloud discovery metadata in the config."),t.updateCloudDiscoveryMetadata(r,!1),[2,yd.CONFIG]):(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the cache."),o=t.isExpired(),this.isAuthoritySameType(t)&&t.aliasesFromNetwork&&!o?(this.logger.verbose("Found metadata in the cache."),[2,yd.CACHE]):(o&&this.logger.verbose("The metadata entity is expired."),this.logger.verbose("Did not find cloud discovery metadata in the cache... Attempting to get cloud discovery metadata from the network."),(n=this.performanceClient)!=null&&n.setPreQueueTime(Jt.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),[4,this.getCloudDiscoveryMetadataFromNetwork()]));case 1:if(r=i.sent())return this.logger.verbose("cloud discovery metadata was successfully returned from getCloudDiscoveryMetadataFromNetwork()"),t.updateCloudDiscoveryMetadata(r,!0),[2,yd.NETWORK];if(this.logger.verbose("Did not find cloud discovery metadata from the network... Attempting to get cloud discovery metadata from hardcoded values."),(o=this.getCloudDiscoveryMetadataFromHarcodedValues())&&!this.options.skipAuthorityMetadataCache)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),t.updateCloudDiscoveryMetadata(o,!1),[2,yd.HARDCODED_VALUES];throw this.logger.error("Did not find cloud discovery metadata from hardcoded values... Metadata could not be obtained from config, cache, network or hardcoded values. Throwing Untrusted Authority Error."),Zi.createUntrustedAuthorityError()}})})},e.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityType===wu.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");var t=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=e.getCloudDiscoveryMetadataFromNetworkResponse(t.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Zi.createInvalidCloudDiscoveryMetadataError()}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null},e.prototype.getCloudDiscoveryMetadataFromNetwork=function(){var t;return zr(this,void 0,void 0,function(){var n,r,o,i,l,c;return Br(this,function(f){switch(f.label){case 0:(t=this.performanceClient)!=null&&t.addQueueMeasurement(Jt.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId),n=""+yt.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",r={},o=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(n,r)];case 2:if(c=f.sent(),l=i=void 0,PLe(c.body))i=c.body,l=i.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: "+i.tenant_discovery_endpoint);else{if(!ALe(c.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),[2,null];if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: "+c.status),(i=c.body).error===yt.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),[2,null];this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is "+i.error),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is "+i.error_description),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),l=[]}return this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=e.getCloudDiscoveryMetadataFromNetworkResponse(l,this.hostnameAndPort),[3,4];case 3:return(c=f.sent())instanceof cr?this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: `+c.errorCode+`
Error Description: `+c.errorMessage):this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: `+c.name+`
Error Description: `+c.message),[2,null];case 4:return o||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),o=e.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,o]}})})},e.prototype.getCloudDiscoveryMetadataFromHarcodedValues=function(){return this.canonicalAuthority in jV?jV[this.canonicalAuthority]:null},e.prototype.isInKnownAuthorities=function(){var t=this;return 0<this.authorityOptions.knownAuthorities.filter(function(n){return Do.getDomainFromUrl(n).toLowerCase()===t.hostnameAndPort}).length},e.generateAuthority=function(t,n){var r;return n&&n.azureCloudInstance!==DS.None&&(r=n.tenant||yt.DEFAULT_COMMON_TENANT,r=n.azureCloudInstance+"/"+r+"/"),r||t},e.createCloudDiscoveryMetadataFromHost=function(t){return{preferred_network:t,preferred_cache:t,aliases:[t]}},e.getCloudDiscoveryMetadataFromNetworkResponse=function(t,n){for(var r=0;r<t.length;r++){var o=t[r];if(-1<o.aliases.indexOf(n))return o}return null},e.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw Gn.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},e.prototype.isAlias=function(t){return-1<this.metadata.aliases.indexOf(t)},e.isPublicCloudAuthority=function(t){return 0<=yt.KNOWN_PUBLIC_CLOUDS.indexOf(t)},e.buildRegionalAuthorityString=function(o,n,r){var o=new Do(o),l=(o.validateAsUri(),o.getUrlComponents()),i=n+"."+l.HostNameAndPort,l=(this.isPublicCloudAuthority(l.HostNameAndPort)&&(i=n+"."+yt.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX),Do.constructAuthorityUriFromObject(mi(mi({},o.getUrlComponents()),{HostNameAndPort:i})).urlString);return r?l+"?"+r:l},e.replaceWithRegionalInformation=function(t,n){return t.authorization_endpoint=e.buildRegionalAuthorityString(t.authorization_endpoint,n),t.token_endpoint=e.buildRegionalAuthorityString(t.token_endpoint,n,yt.REGIONAL_AUTH_NON_MSI_QUERY_STRING),t.end_session_endpoint&&(t.end_session_endpoint=e.buildRegionalAuthorityString(t.end_session_endpoint,n)),t},e.transformCIAMAuthority=function(r){var n=r.endsWith(yt.FORWARD_SLASH)?r:""+r+yt.FORWARD_SLASH,r=new Do(r).getUrlComponents();return n=r.PathSegments.length===0&&r.HostNameAndPort.endsWith(yt.CIAM_AUTH_URL)?""+n+r.HostNameAndPort.split(".")[0]+yt.AAD_TENANT_DOMAIN_SUFFIX:n},e.reservedTenantDomains=new Set(["{tenant}","{tenantid}",r_.COMMON,r_.CONSUMERS,r_.ORGANIZATIONS]),e}(),OP=function(){function e(){}return e.createDiscoveredInstance=function(t,n,r,o,i,l,c){return zr(this,void 0,void 0,function(){var f,p;return Br(this,function(g){switch(g.label){case 0:l!=null&&l.addQueueMeasurement(Jt.AuthorityFactoryCreateDiscoveredInstance,c),f=NS.transformCIAMAuthority(t),f=e.createInstance(f,n,r,o,i,l,c),g.label=1;case 1:return g.trys.push([1,3,,4]),l!=null&&l.setPreQueueTime(Jt.AuthorityResolveEndpointsAsync,c),[4,f.resolveEndpointsAsync()];case 2:return g.sent(),[2,f];case 3:throw p=g.sent(),Gn.createEndpointDiscoveryIncompleteError(p);case 4:return[2]}})})},e.createInstance=function(t,n,r,o,i,l,c){if(Vn.isEmpty(t))throw Zi.createUrlEmptyError();return new NS(t,n,r,o,i,l,c)},e}(),DP=function(){function e(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return e.isServerTelemetryEntity=function(r,n){var r=r.indexOf(ml.CACHE_KEY)===0,o=!0;return n&&(o=n.hasOwnProperty("failedRequests")&&n.hasOwnProperty("errors")&&n.hasOwnProperty("cacheHits")),r&&o},e}(),VV=function(){function e(){}return e.isThrottlingEntity=function(o,n){var r=!1,o=(o&&(r=o.indexOf(K1.THROTTLING_PREFIX)===0),!0);return n&&(o=n.hasOwnProperty("throttleTime")),r&&o},e}(),RLe={sendGetRequestAsync:function(){return Promise.reject(cr.createUnexpectedError("Network interface - sendGetRequestAsync() has not been implemented for the Network interface."))},sendPostRequestAsync:function(){return Promise.reject(cr.createUnexpectedError("Network interface - sendPostRequestAsync() has not been implemented for the Network interface."))}},tI={missingKidError:{code:"missing_kid_error",desc:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided."},missingAlgError:{code:"missing_alg_error",desc:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."}},qV=function(e){function t(n,r){return n=e.call(this,n,r)||this,n.name="JoseHeaderError",Object.setPrototypeOf(n,t.prototype),n}return hc(t,e),t.createMissingKidError=function(){return new t(tI.missingKidError.code,tI.missingKidError.desc)},t.createMissingAlgError=function(){return new t(tI.missingAlgError.code,tI.missingAlgError.desc)},t}(cr),OLe=function(){function e(t){this.typ=t.typ,this.alg=t.alg,this.kid=t.kid}return e.getShrHeaderString=function(t){if(!t.kid)throw qV.createMissingKidError();if(t.alg)return t=new e({typ:t.typ||FN.Pop,kid:t.kid,alg:t.alg}),JSON.stringify(t);throw qV.createMissingAlgError()},e}(),DLe=function(){function e(t,n){this.cacheOutcome=zg.NO_CACHE_HIT,this.cacheManager=n,this.apiId=t.apiId,this.correlationId=t.correlationId,this.wrapperSKU=t.wrapperSKU||yt.EMPTY_STRING,this.wrapperVer=t.wrapperVer||yt.EMPTY_STRING,this.telemetryCacheKey=ml.CACHE_KEY+Ss.CACHE_KEY_SEPARATOR+t.clientId}return e.prototype.generateCurrentRequestHeaderValue=function(){var n=""+this.apiId+ml.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(ml.VALUE_SEPARATOR),n=[n,this.getRegionDiscoveryFields()].join(ml.VALUE_SEPARATOR);return[ml.SCHEMA_VERSION,n,t].join(ml.CATEGORY_SEPARATOR)},e.prototype.generateLastRequestHeaderValue=function(){var t=this.getLastRequests(),i=e.maxErrorsToSend(t),n=t.failedRequests.slice(0,2*i).join(ml.VALUE_SEPARATOR),r=t.errors.slice(0,i).join(ml.VALUE_SEPARATOR),o=t.errors.length,i=[o,i<o?ml.OVERFLOW_TRUE:ml.OVERFLOW_FALSE].join(ml.VALUE_SEPARATOR);return[ml.SCHEMA_VERSION,t.cacheHits,n,r,i].join(ml.CATEGORY_SEPARATOR)},e.prototype.cacheFailedRequest=function(t){var n=this.getLastRequests();n.errors.length>=ml.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),Vn.isEmpty(t.subError)?Vn.isEmpty(t.errorCode)?t&&t.toString()?n.errors.push(t.toString()):n.errors.push(ml.UNKNOWN_ERROR):n.errors.push(t.errorCode):n.errors.push(t.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)},e.prototype.incrementCacheHits=function(){var t=this.getLastRequests();return t.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t),t.cacheHits},e.prototype.getLastRequests=function(){var t=new DP;return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||t},e.prototype.clearTelemetryCache=function(){var t,n=this.getLastRequests(),r=e.maxErrorsToSend(n);r===n.errors.length?this.cacheManager.removeItem(this.telemetryCacheKey):((t=new DP).failedRequests=n.failedRequests.slice(2*r),t.errors=n.errors.slice(r),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t))},e.maxErrorsToSend=function(t){for(var n=0,r=0,o=t.errors.length,i=0;i<o;i++){var l=t.failedRequests[2*i]||yt.EMPTY_STRING,c=t.failedRequests[2*i+1]||yt.EMPTY_STRING,f=t.errors[i]||yt.EMPTY_STRING;if(!((r+=l.toString().length+c.toString().length+f.length+3)<ml.MAX_LAST_HEADER_BYTES))break;n+=1}return n},e.prototype.getRegionDiscoveryFields=function(){var t=[];return t.push(this.regionUsed||yt.EMPTY_STRING),t.push(this.regionSource||yt.EMPTY_STRING),t.push(this.regionOutcome||yt.EMPTY_STRING),t.join(",")},e.prototype.updateRegionDiscoveryMetadata=function(t){this.regionUsed=t.region_used,this.regionSource=t.region_source,this.regionOutcome=t.region_outcome},e.prototype.setCacheOutcome=function(t){this.cacheOutcome=t},e}(),AZ=function(){function e(t,n,r,o,i,l){this.authority=n,this.libraryName=o,this.libraryVersion=i,this.applicationTelemetry=l,this.clientId=t,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map}return e.prototype.startPerformanceMeasurement=function(t,n){return{}},e.prototype.startPerformanceMeasuremeant=function(t,n){return{}},e.prototype.getIntFields=function(){return ELe},e.prototype.getPreQueueTime=function(t,n){var r=this.preQueueTimeByCorrelationId.get(n);if(r){if(r.name===t)return r.time;this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue time found for "+t+", unable to add queue measurement")}else this.logger.trace("PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: "+n+", unable to add queue measurement")},e.prototype.calculateQueuedTime=function(t,n){return t<1?(this.logger.trace("PerformanceClient: preQueueTime should be a positive integer and not "+t),0):n<1?(this.logger.trace("PerformanceClient: currentTime should be a positive integer and not "+n),0):n<t?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):n-t},e.prototype.addQueueMeasurement=function(t,n,r,o){if(n){if(r===0)this.logger.trace("PerformanceClient.addQueueMeasurement: queue time provided for "+t+" is "+r);else if(!r)return void this.logger.trace("PerformanceClient.addQueueMeasurement: no queue time provided for "+t);r={eventName:t,queueTime:r,manuallyCompleted:o},o=this.queueMeasurements.get(n),o?(o.push(r),this.queueMeasurements.set(n,o)):(this.logger.trace("PerformanceClient.addQueueMeasurement: adding correlationId "+n+" to queue measurements"),this.queueMeasurements.set(n,[r])),this.preQueueTimeByCorrelationId.delete(n)}else this.logger.trace("PerformanceClient.addQueueMeasurement: correlationId not provided for "+t+", cannot add queue measurement")},e.prototype.startMeasurement=function(t,n){var r=this,o=n||this.generateId(),i=(n||this.logger.info("PerformanceClient: No correlation id provided for "+t+", generating",o),this.logger.trace("PerformanceClient: Performance measurement started for "+t,o),this.startPerformanceMeasuremeant(t,o)),l=(i.startMeasurement(),{eventId:this.generateId(),status:PP.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:t,startTimeMs:Date.now(),correlationId:o,appName:(n=this.applicationTelemetry)==null?void 0:n.appName,appVersion:(t=this.applicationTelemetry)==null?void 0:t.appVersion});return this.cacheEventByCorrelationId(l),{endMeasurement:function(c){return r.endMeasurement(mi(mi({},l),c),i)},discardMeasurement:function(){return r.discardMeasurements(l.correlationId)},addStaticFields:function(c){return r.addStaticFields(c,l.correlationId)},increment:function(c){return r.increment(c,l.correlationId)},measurement:i,event:l}},e.prototype.endMeasurement=function(t,n){var r,o,i,l,c,f=this,p=this.eventsByCorrelationId.get(t.correlationId);return p?(o={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0},(r=t.eventId===p.eventId)?(o=this.getQueueInfo(t.correlationId),this.discardCache(p.correlationId)):(i=p.incompleteSubMeasurements)!=null&&i.delete(t.eventId),n!=null&&n.endMeasurement(),(i=n==null?void 0:n.flushMeasurement())?(this.logger.trace("PerformanceClient: Performance measurement ended for "+t.name+": "+i+" ms",t.correlationId),r?(l=mi(mi({},p),t),c=0,(n=l.incompleteSubMeasurements)!=null&&n.forEach(function(g){f.logger.trace("PerformanceClient: Incomplete submeasurement "+g.name+" found for "+t.name,l.correlationId),c++}),l.incompleteSubMeasurements=void 0,l=mi(mi({},l),{durationMs:Math.round(i),queuedTimeMs:o.totalQueueTime,queuedCount:o.totalQueueCount,queuedManuallyCompletedCount:o.manuallyCompletedCount,status:PP.Completed,incompleteSubsCount:c}),this.truncateIntegralFields(l,this.getIntFields()),this.emitEvents([l],t.correlationId),l):(p[t.name+"DurationMs"]=Math.floor(i),mi({},p))):(this.logger.trace("PerformanceClient: Performance measurement not taken",p.correlationId),null)):(this.logger.trace("PerformanceClient: Measurement not found for "+t.eventId,t.correlationId),null)},e.prototype.addStaticFields=function(t,n){this.logger.trace("PerformanceClient: Updating static fields");var r=this.eventsByCorrelationId.get(n);r?this.eventsByCorrelationId.set(n,mi(mi({},r),t)):this.logger.trace("PerformanceClient: Event not found for",n)},e.prototype.increment=function(t,n){this.logger.trace("PerformanceClient: Updating counters");var r=this.eventsByCorrelationId.get(n);if(r)for(var o in t)r.hasOwnProperty(o)||(r[o]=0),r[o]+=t[o];else this.logger.trace("PerformanceClient: Event not found for",n)},e.prototype.cacheEventByCorrelationId=function(t){var n=this.eventsByCorrelationId.get(t.correlationId);n?(this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" added/updated",t.correlationId),n.incompleteSubMeasurements=n.incompleteSubMeasurements||new Map,n.incompleteSubMeasurements.set(t.eventId,{name:t.name,startTimeMs:t.startTimeMs})):(this.logger.trace("PerformanceClient: Performance measurement for "+t.name+" started",t.correlationId),this.eventsByCorrelationId.set(t.correlationId,mi({},t)))},e.prototype.getQueueInfo=function(t){var n=this.queueMeasurements.get(t),r=(n||this.logger.trace("PerformanceClient: no queue measurements found for for correlationId: "+t),0),o=0,i=0;return n!=null&&n.forEach(function(l){r+=l.queueTime,o++,i+=l.manuallyCompleted?1:0}),{totalQueueTime:r,totalQueueCount:o,manuallyCompletedCount:i}},e.prototype.discardMeasurements=function(t){this.logger.trace("PerformanceClient: Performance measurements discarded",t),this.eventsByCorrelationId.delete(t)},e.prototype.discardCache=function(t){this.discardMeasurements(t),this.logger.trace("PerformanceClient: QueueMeasurements discarded",t),this.queueMeasurements.delete(t),this.logger.trace("PerformanceClient: Pre-queue times discarded",t),this.preQueueTimeByCorrelationId.delete(t)},e.prototype.addPerformanceCallback=function(t){var n=this.generateId();return this.callbacks.set(n,t),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+n),n},e.prototype.removePerformanceCallback=function(t){var n=this.callbacks.delete(t);return n?this.logger.verbose("PerformanceClient: Performance callback "+t+" removed."):this.logger.verbose("PerformanceClient: Performance callback "+t+" not removed."),n},e.prototype.emitEvents=function(t,n){var r=this;this.logger.verbose("PerformanceClient: Emitting performance events",n),this.callbacks.forEach(function(o,i){r.logger.trace("PerformanceClient: Emitting event to callback "+i,n),o.apply(null,[t])})},e.prototype.truncateIntegralFields=function(t,n){n.forEach(function(r){r in t&&typeof t[r]=="number"&&(t[r]=Math.floor(t[r]))})},e}(),GV=function(){function e(){}return e.prototype.startMeasurement=function(){},e.prototype.endMeasurement=function(){},e.prototype.flushMeasurement=function(){return null},e}(),LLe=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return hc(t,e),t.prototype.generateId=function(){return"callback-id"},t.prototype.startPerformanceMeasuremeant=function(){return new GV},t.prototype.startPerformanceMeasurement=function(){return new GV},t.prototype.calculateQueuedTime=function(n,r){return 0},t.prototype.addQueueMeasurement=function(n,r,o){},t.prototype.setPreQueueTime=function(n,r){},t}(AZ),En={pkceNotGenerated:{code:"pkce_not_created",desc:"The PKCE code challenge and verifier could not be generated."},cryptoDoesNotExist:{code:"crypto_nonexistent",desc:"The crypto object or function is not available."},httpMethodNotImplementedError:{code:"http_method_not_implemented",desc:"The HTTP method given has not been implemented in this library."},emptyNavigateUriError:{code:"empty_navigate_uri",desc:"Navigation URI is empty. Please check stack trace for more info."},hashEmptyError:{code:"hash_empty_error",desc:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. For more visit: aka.ms/msaljs/browser-errors."},hashDoesNotContainStateError:{code:"no_state_in_hash",desc:"Hash does not contain state. Please verify that the request originated from msal."},hashDoesNotContainKnownPropertiesError:{code:"hash_does_not_contain_known_properties",desc:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash. For more visit: aka.ms/msaljs/browser-errors."},unableToParseStateError:{code:"unable_to_parse_state",desc:"Unable to parse state. Please verify that the request originated from msal."},stateInteractionTypeMismatchError:{code:"state_interaction_type_mismatch",desc:"Hash contains state but the interaction type does not match the caller."},interactionInProgress:{code:"interaction_in_progress",desc:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.  For more visit: aka.ms/msaljs/browser-errors."},popupWindowError:{code:"popup_window_error",desc:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser."},emptyWindowError:{code:"empty_window_error",desc:"window.open returned null or undefined window object."},userCancelledError:{code:"user_cancelled",desc:"User cancelled the flow."},monitorPopupTimeoutError:{code:"monitor_window_timeout",desc:"Token acquisition in popup failed due to timeout. For more visit: aka.ms/msaljs/browser-errors."},monitorIframeTimeoutError:{code:"monitor_window_timeout",desc:"Token acquisition in iframe failed due to timeout. For more visit: aka.ms/msaljs/browser-errors."},redirectInIframeError:{code:"redirect_in_iframe",desc:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs."},blockTokenRequestsInHiddenIframeError:{code:"block_iframe_reload",desc:"Request was blocked inside an iframe because MSAL detected an authentication response. For more visit: aka.ms/msaljs/browser-errors"},blockAcquireTokenInPopupsError:{code:"block_nested_popups",desc:"Request was blocked inside a popup because MSAL detected it was running in a popup."},iframeClosedPrematurelyError:{code:"iframe_closed_prematurely",desc:"The iframe being monitored was closed prematurely."},silentLogoutUnsupportedError:{code:"silent_logout_unsupported",desc:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead."},noAccountError:{code:"no_account_error",desc:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request."},silentPromptValueError:{code:"silent_prompt_value_error",desc:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'."},noTokenRequestCacheError:{code:"no_token_request_cache_error",desc:"No token request found in cache."},unableToParseTokenRequestCacheError:{code:"unable_to_parse_token_request_cache_error",desc:"The cached token request could not be parsed."},noCachedAuthorityError:{code:"no_cached_authority_error",desc:"No cached authority found."},authRequestNotSet:{code:"auth_request_not_set_error",desc:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler"},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},notInBrowserEnvironment:{code:"non_browser_environment",desc:"Login and token requests are not supported in non-browser environments."},databaseNotOpen:{code:"database_not_open",desc:"Database is not open!"},noNetworkConnectivity:{code:"no_network_connectivity",desc:"No network connectivity. Check your internet connection."},postRequestFailed:{code:"post_request_failed",desc:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'"},getRequestFailed:{code:"get_request_failed",desc:"Network request failed. Please check the network trace to determine root cause."},failedToParseNetworkResponse:{code:"failed_to_parse_response",desc:"Failed to parse network response. Check network trace."},unableToLoadTokenError:{code:"unable_to_load_token",desc:"Error loading token to cache."},signingKeyNotFoundInStorage:{code:"crypto_key_not_found",desc:"Cryptographic Key or Keypair not found in browser storage."},authCodeRequired:{code:"auth_code_required",desc:"An authorization code must be provided (as the `code` property on the request) to this flow."},authCodeOrNativeAccountRequired:{code:"auth_code_or_nativeAccountId_required",desc:"An authorization code or nativeAccountId must be provided to this flow."},spaCodeAndNativeAccountPresent:{code:"spa_code_and_nativeAccountId_present",desc:"Request cannot contain both spa code and native account id."},databaseUnavailable:{code:"database_unavailable",desc:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts."},unableToAcquireTokenFromNativePlatform:{code:"unable_to_acquire_token_from_native_platform",desc:"Unable to acquire token from native platform. For a list of possible reasons visit aka.ms/msaljs/browser-errors."},nativeHandshakeTimeout:{code:"native_handshake_timeout",desc:"Timed out while attempting to establish connection to browser extension"},nativeExtensionNotInstalled:{code:"native_extension_not_installed",desc:"Native extension is not installed. If you think this is a mistake call the initialize function."},nativeConnectionNotEstablished:{code:"native_connection_not_established",desc:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize(). For more please visit aka.ms/msaljs/browser-errors."},nativeBrokerCalledBeforeInitialize:{code:"native_broker_called_before_initialize",desc:"You must call and await the initialize function before attempting to call any other MSAL API when native brokering is enabled. For more please visit aka.ms/msaljs/browser-errors."},nativePromptNotSupported:{code:"native_prompt_not_supported",desc:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow."}},Ln=function(e){function t(n,r){return n=e.call(this,n,r)||this,Object.setPrototypeOf(n,t.prototype),n.name="BrowserAuthError",n}return kl(t,e),t.createPkceNotGeneratedError=function(n){return new t(En.pkceNotGenerated.code,En.pkceNotGenerated.desc+" Detail:"+n)},t.createCryptoNotAvailableError=function(n){return new t(En.cryptoDoesNotExist.code,En.cryptoDoesNotExist.desc+" Detail:"+n)},t.createHttpMethodNotImplementedError=function(n){return new t(En.httpMethodNotImplementedError.code,En.httpMethodNotImplementedError.desc+" Given Method: "+n)},t.createEmptyNavigationUriError=function(){return new t(En.emptyNavigateUriError.code,En.emptyNavigateUriError.desc)},t.createEmptyHashError=function(n){return new t(En.hashEmptyError.code,En.hashEmptyError.desc+" Given Url: "+n)},t.createHashDoesNotContainStateError=function(){return new t(En.hashDoesNotContainStateError.code,En.hashDoesNotContainStateError.desc)},t.createHashDoesNotContainKnownPropertiesError=function(){return new t(En.hashDoesNotContainKnownPropertiesError.code,En.hashDoesNotContainKnownPropertiesError.desc)},t.createUnableToParseStateError=function(){return new t(En.unableToParseStateError.code,En.unableToParseStateError.desc)},t.createStateInteractionTypeMismatchError=function(){return new t(En.stateInteractionTypeMismatchError.code,En.stateInteractionTypeMismatchError.desc)},t.createInteractionInProgressError=function(){return new t(En.interactionInProgress.code,En.interactionInProgress.desc)},t.createPopupWindowError=function(n){var r=En.popupWindowError.desc,r=Vn.isEmpty(n)?r:r+" Details: "+n;return new t(En.popupWindowError.code,r)},t.createEmptyWindowCreatedError=function(){return new t(En.emptyWindowError.code,En.emptyWindowError.desc)},t.createUserCancelledError=function(){return new t(En.userCancelledError.code,En.userCancelledError.desc)},t.createMonitorPopupTimeoutError=function(){return new t(En.monitorPopupTimeoutError.code,En.monitorPopupTimeoutError.desc)},t.createMonitorIframeTimeoutError=function(){return new t(En.monitorIframeTimeoutError.code,En.monitorIframeTimeoutError.desc)},t.createRedirectInIframeError=function(n){return new t(En.redirectInIframeError.code,En.redirectInIframeError.desc+" (window.parent !== window) => "+n)},t.createBlockReloadInHiddenIframeError=function(){return new t(En.blockTokenRequestsInHiddenIframeError.code,En.blockTokenRequestsInHiddenIframeError.desc)},t.createBlockAcquireTokenInPopupsError=function(){return new t(En.blockAcquireTokenInPopupsError.code,En.blockAcquireTokenInPopupsError.desc)},t.createIframeClosedPrematurelyError=function(){return new t(En.iframeClosedPrematurelyError.code,En.iframeClosedPrematurelyError.desc)},t.createSilentLogoutUnsupportedError=function(){return new t(En.silentLogoutUnsupportedError.code,En.silentLogoutUnsupportedError.desc)},t.createNoAccountError=function(){return new t(En.noAccountError.code,En.noAccountError.desc)},t.createSilentPromptValueError=function(n){return new t(En.silentPromptValueError.code,En.silentPromptValueError.desc+" Given value: "+n)},t.createUnableToParseTokenRequestCacheError=function(){return new t(En.unableToParseTokenRequestCacheError.code,En.unableToParseTokenRequestCacheError.desc)},t.createNoTokenRequestCacheError=function(){return new t(En.noTokenRequestCacheError.code,En.noTokenRequestCacheError.desc)},t.createAuthRequestNotSetError=function(){return new t(En.authRequestNotSet.code,En.authRequestNotSet.desc)},t.createNoCachedAuthorityError=function(){return new t(En.noCachedAuthorityError.code,En.noCachedAuthorityError.desc)},t.createInvalidCacheTypeError=function(){return new t(En.invalidCacheType.code,""+En.invalidCacheType.desc)},t.createNonBrowserEnvironmentError=function(){return new t(En.notInBrowserEnvironment.code,En.notInBrowserEnvironment.desc)},t.createDatabaseNotOpenError=function(){return new t(En.databaseNotOpen.code,En.databaseNotOpen.desc)},t.createNoNetworkConnectivityError=function(){return new t(En.noNetworkConnectivity.code,En.noNetworkConnectivity.desc)},t.createPostRequestFailedError=function(n,r){return new t(En.postRequestFailed.code,En.postRequestFailed.desc+" | Network client threw: "+n+" | Attempted to reach: "+r.split("?")[0])},t.createGetRequestFailedError=function(n,r){return new t(En.getRequestFailed.code,En.getRequestFailed.desc+" | Network client threw: "+n+" | Attempted to reach: "+r.split("?")[0])},t.createFailedToParseNetworkResponseError=function(n){return new t(En.failedToParseNetworkResponse.code,En.failedToParseNetworkResponse.desc+" | Attempted to reach: "+n.split("?")[0])},t.createUnableToLoadTokenError=function(n){return new t(En.unableToLoadTokenError.code,En.unableToLoadTokenError.desc+" | "+n)},t.createSigningKeyNotFoundInStorageError=function(n){return new t(En.signingKeyNotFoundInStorage.code,En.signingKeyNotFoundInStorage.desc+" | No match found for KeyId: "+n)},t.createAuthCodeRequiredError=function(){return new t(En.authCodeRequired.code,En.authCodeRequired.desc)},t.createAuthCodeOrNativeAccountIdRequiredError=function(){return new t(En.authCodeOrNativeAccountRequired.code,En.authCodeOrNativeAccountRequired.desc)},t.createSpaCodeAndNativeAccountIdPresentError=function(){return new t(En.spaCodeAndNativeAccountPresent.code,En.spaCodeAndNativeAccountPresent.desc)},t.createDatabaseUnavailableError=function(){return new t(En.databaseUnavailable.code,En.databaseUnavailable.desc)},t.createUnableToAcquireTokenFromNativePlatformError=function(){return new t(En.unableToAcquireTokenFromNativePlatform.code,En.unableToAcquireTokenFromNativePlatform.desc)},t.createNativeHandshakeTimeoutError=function(){return new t(En.nativeHandshakeTimeout.code,En.nativeHandshakeTimeout.desc)},t.createNativeExtensionNotInstalledError=function(){return new t(En.nativeExtensionNotInstalled.code,En.nativeExtensionNotInstalled.desc)},t.createNativeConnectionNotEstablishedError=function(){return new t(En.nativeConnectionNotEstablished.code,En.nativeConnectionNotEstablished.desc)},t.createNativeBrokerCalledBeforeInitialize=function(){return new t(En.nativeBrokerCalledBeforeInitialize.code,En.nativeBrokerCalledBeforeInitialize.desc)},t.createNativePromptParameterNotSupportedError=function(){return new t(En.nativePromptNotSupported.code,En.nativePromptNotSupported.desc)},t}(cr),wh={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},w1={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},WV=(function(e){e.HandshakeRequest="Handshake",e.HandshakeResponse="HandshakeResponse",e.GetToken="GetToken",e.Response="Response"}(Kp=Kp||{}),function(e){e.LocalStorage="localStorage",e.SessionStorage="sessionStorage",e.MemoryStorage="memoryStorage"}(is=is||{}),function(e){e.GET="GET",e.POST="POST"}(vf=vf||{}),function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireToken.account",e.SESSION_STATE="session.state",e.REQUEST_STATE="request.state",e.NONCE_IDTOKEN="nonce.id_token",e.ORIGIN_URI="request.origin",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.REQUEST_PARAMS="request.params",e.SCOPES="scopes",e.INTERACTION_STATUS_KEY="interaction.status",e.CCS_CREDENTIAL="ccs.credential",e.CORRELATION_ID="request.correlationId",e.NATIVE_REQUEST="request.native",e.REDIRECT_CONTEXT="request.redirect.context"}(Xo=Xo||{}),function(e){e.ACCOUNT_KEYS="msal.account.keys",e.TOKEN_KEYS="msal.token.keys"}(hf=hf||{}),function(e){e.WRAPPER_SKU="wrapper.sku",e.WRAPPER_VER="wrapper.version"}(zw=zw||{}),function(e){e[e.acquireTokenRedirect=861]="acquireTokenRedirect",e[e.acquireTokenPopup=862]="acquireTokenPopup",e[e.ssoSilent=863]="ssoSilent",e[e.acquireTokenSilent_authCode=864]="acquireTokenSilent_authCode",e[e.handleRedirectPromise=865]="handleRedirectPromise",e[e.acquireTokenByCode=866]="acquireTokenByCode",e[e.acquireTokenSilent_silentFlow=61]="acquireTokenSilent_silentFlow",e[e.logout=961]="logout",e[e.logoutPopup=962]="logoutPopup"}(Yi=Yi||{}),function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(rr=rr||{}),function(e){e.Startup="startup",e.Login="login",e.Logout="logout",e.AcquireToken="acquireToken",e.SsoSilent="ssoSilent",e.HandleRedirect="handleRedirect",e.None="none"}($V=$V||{}),{scopes:wE}),Dx="jwk",jN=(function(e){e.React="@azure/msal-react",e.Angular="@azure/msal-angular"}(HV=HV||{}),"msal.db"),NLe=1,FLe=jN+".keys",Wu=(function(e){e[e.Default=0]="Default",e[e.AccessToken=1]="AccessToken",e[e.AccessTokenAndRefreshToken=2]="AccessTokenAndRefreshToken",e[e.RefreshToken=3]="RefreshToken",e[e.RefreshTokenAndNetwork=4]="RefreshTokenAndNetwork",e[e.Skip=5]="Skip"}(Xu=Xu||{}),{redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},storageNotSupportedError:{code:"storage_not_supported",desc:"Given storage configuration option was not supported."},noRedirectCallbacksSet:{code:"no_redirect_callbacks",desc:"No redirect callbacks have been set. Please call setRedirectCallbacks() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},invalidCallbackObject:{code:"invalid_callback_object",desc:"The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics."},stubPcaInstanceCalled:{code:"stubbed_public_client_application_called",desc:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors"},inMemRedirectUnavailable:{code:"in_mem_redirect_unavailable",desc:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},entropyNotProvided:{code:"entropy_not_provided",desc:"The available browser crypto interface requires entropy set via system.cryptoOptions.entropy configuration option."}}),LP=function(e){function t(n,r){return n=e.call(this,n,r)||this,n.name="BrowserConfigurationAuthError",Object.setPrototypeOf(n,t.prototype),n}return kl(t,e),t.createRedirectUriEmptyError=function(){return new t(Wu.redirectUriNotSet.code,Wu.redirectUriNotSet.desc)},t.createPostLogoutRedirectUriEmptyError=function(){return new t(Wu.postLogoutUriNotSet.code,Wu.postLogoutUriNotSet.desc)},t.createStorageNotSupportedError=function(n){return new t(Wu.storageNotSupportedError.code,Wu.storageNotSupportedError.desc+" Given Location: "+n)},t.createRedirectCallbacksNotSetError=function(){return new t(Wu.noRedirectCallbacksSet.code,Wu.noRedirectCallbacksSet.desc)},t.createStubPcaInstanceCalledError=function(){return new t(Wu.stubPcaInstanceCalled.code,Wu.stubPcaInstanceCalled.desc)},t.createInMemoryRedirectUnavailableError=function(){return new t(Wu.inMemRedirectUnavailable.code,Wu.inMemRedirectUnavailable.desc)},t.createEntropyNotProvided=function(){return new t(Wu.entropyNotProvided.code,Wu.entropyNotProvided.desc)},t}(cr),KV=function(){function e(t){this.validateWindowStorage(t),this.windowStorage=window[t]}return e.prototype.validateWindowStorage=function(t){if(t!==is.LocalStorage&&t!==is.SessionStorage||!window[t])throw LP.createStorageNotSupportedError(t)},e.prototype.getItem=function(t){return this.windowStorage.getItem(t)},e.prototype.setItem=function(t,n){this.windowStorage.setItem(t,n)},e.prototype.removeItem=function(t){this.windowStorage.removeItem(t)},e.prototype.getKeys=function(){return Object.keys(this.windowStorage)},e.prototype.containsKey=function(t){return this.windowStorage.hasOwnProperty(t)},e}(),$N=function(){function e(){this.cache=new Map}return e.prototype.getItem=function(t){return this.cache.get(t)||null},e.prototype.setItem=function(t,n){this.cache.set(t,n)},e.prototype.removeItem=function(t){this.cache.delete(t)},e.prototype.getKeys=function(){var t=[];return this.cache.forEach(function(n,r){t.push(r)}),t},e.prototype.containsKey=function(t){return this.cache.has(t)},e.prototype.clear=function(){this.cache.clear()},e}(),MZ=function(){function e(){}return e.extractBrowserRequestState=function(t,n){if(Vn.isEmpty(n))return null;try{return rm.parseRequestState(t,n).libraryState.meta}catch(r){throw Gn.createInvalidStateError(n,r)}},e.parseServerResponseFromHash=function(t){return t?(t=new Do(t),Do.getDeserializedHash(t.getHash())):{}},e}(),HN=function(e){function t(n,r,o,i){return n=e.call(this,n,o,i)||this,n.COOKIE_LIFE_MULTIPLIER=864e5,n.cacheConfig=r,n.logger=i,n.internalStorage=new $N,n.browserStorage=n.setupBrowserStorage(n.cacheConfig.cacheLocation),n.temporaryCacheStorage=n.setupTemporaryCacheStorage(n.cacheConfig.temporaryCacheLocation,n.cacheConfig.cacheLocation),r.cacheMigrationEnabled&&(n.migrateCacheEntries(),n.createKeyMaps()),n}return kl(t,e),t.prototype.setupBrowserStorage=function(n){switch(n){case is.LocalStorage:case is.SessionStorage:try{return new KV(n)}catch(r){this.logger.verbose(r);break}}return this.cacheConfig.cacheLocation=is.MemoryStorage,new $N},t.prototype.setupTemporaryCacheStorage=function(n,r){switch(r){case is.LocalStorage:case is.SessionStorage:try{return new KV(n||is.SessionStorage)}catch(o){return this.logger.verbose(o),this.internalStorage}case is.MemoryStorage:default:return this.internalStorage}},t.prototype.migrateCacheEntries=function(){var n=this,r=yt.CACHE_PREFIX+"."+xs.ID_TOKEN,o=yt.CACHE_PREFIX+"."+xs.CLIENT_INFO,i=yt.CACHE_PREFIX+"."+xs.ERROR,l=yt.CACHE_PREFIX+"."+xs.ERROR_DESC,c=[this.browserStorage.getItem(r),this.browserStorage.getItem(o),this.browserStorage.getItem(i),this.browserStorage.getItem(l)];[xs.ID_TOKEN,xs.CLIENT_INFO,xs.ERROR,xs.ERROR_DESC].forEach(function(f,p){return n.migrateCacheEntry(f,c[p])})},t.prototype.migrateCacheEntry=function(n,r){r&&this.setTemporaryCache(n,r,!0)},t.prototype.createKeyMaps=function(){var n=this,r=(this.logger.trace("BrowserCacheManager - createKeyMaps called."),this.getItem(hf.ACCOUNT_KEYS)),o=this.getItem(hf.TOKEN_KEYS+"."+this.clientId);r&&o?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(function(i){var l;if(n.isCredentialKey(i)&&(l=n.getItem(i))){var c,f,p=n.validateAndParseJson(l);if(p&&p.hasOwnProperty("credentialType"))switch(p.credentialType){case Cr.ID_TOKEN:if(jv.isIdTokenEntity(p))return n.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),n.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: "+i+" found, saving key to token key map"),f=Ku.toObject(new jv,p),f=n.updateCredentialCacheKey(i,f),void n.addTokenKey(f,Cr.ID_TOKEN);n.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),n.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: "+i);break;case Cr.ACCESS_TOKEN:case Cr.ACCESS_TOKEN_WITH_AUTH_SCHEME:if($v.isAccessTokenEntity(p))return n.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),n.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: "+i+" found, saving key to token key map"),c=Ku.toObject(new $v,p),f=n.updateCredentialCacheKey(i,c),void n.addTokenKey(f,Cr.ACCESS_TOKEN);n.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),n.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: "+i);break;case Cr.REFRESH_TOKEN:if(Nw.isRefreshTokenEntity(p))return n.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),n.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: "+i+" found, saving key to token key map"),c=Ku.toObject(new Nw,p),f=n.updateCredentialCacheKey(i,c),void n.addTokenKey(f,Cr.REFRESH_TOKEN);n.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),n.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: "+i)}}n.isAccountKey(i)&&(l=n.getItem(i))&&(l=n.validateAndParseJson(l))&&El.isAccountEntity(l)&&(n.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),n.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: "+i+" found, saving key to account key map"),n.addAccountKeyToMap(i))})},t.prototype.validateAndParseJson=function(n){try{var r=JSON.parse(n);return r&&typeof r=="object"?r:null}catch{return null}},t.prototype.getItem=function(n){return this.browserStorage.getItem(n)},t.prototype.setItem=function(n,r){this.browserStorage.setItem(n,r)},t.prototype.getAccount=function(n){this.logger.trace("BrowserCacheManager.getAccount called");var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&El.isAccountEntity(r)?Ku.toObject(new El,r):(this.removeAccountKeyFromMap(n),null)},t.prototype.setAccount=function(n){this.logger.trace("BrowserCacheManager.setAccount called");var r=n.generateAccountKey();this.setItem(r,JSON.stringify(n)),this.addAccountKeyToMap(r)},t.prototype.getAccountKeys=function(){this.logger.trace("BrowserCacheManager.getAccountKeys called");var n=this.getItem(hf.ACCOUNT_KEYS);return n?JSON.parse(n):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])},t.prototype.addAccountKeyToMap=function(n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: "+n);var r=this.getAccountKeys();r.indexOf(n)===-1?(r.push(n),this.setItem(hf.ACCOUNT_KEYS,JSON.stringify(r)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")},t.prototype.removeAccountKeyFromMap=function(o){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: "+o);var r=this.getAccountKeys(),o=r.indexOf(o);-1<o?(r.splice(o,1),this.setItem(hf.ACCOUNT_KEYS,JSON.stringify(r)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")},t.prototype.removeAccount=function(n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return e.prototype.removeAccount.call(this,n),this.removeAccountKeyFromMap(n),[2]})})},t.prototype.removeIdToken=function(n){e.prototype.removeIdToken.call(this,n),this.removeTokenKey(n,Cr.ID_TOKEN)},t.prototype.removeAccessToken=function(n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return e.prototype.removeAccessToken.call(this,n),this.removeTokenKey(n,Cr.ACCESS_TOKEN),[2]})})},t.prototype.removeRefreshToken=function(n){e.prototype.removeRefreshToken.call(this,n),this.removeTokenKey(n,Cr.REFRESH_TOKEN)},t.prototype.getTokenKeys=function(){this.logger.trace("BrowserCacheManager.getTokenKeys called");var n=this.getItem(hf.TOKEN_KEYS+"."+this.clientId);if(n){if(n=this.validateAndParseJson(n),n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}},t.prototype.addTokenKey=function(n,r){this.logger.trace("BrowserCacheManager addTokenKey called");var o=this.getTokenKeys();switch(r){case Cr.ID_TOKEN:o.idToken.indexOf(n)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(n));break;case Cr.ACCESS_TOKEN:o.accessToken.indexOf(n)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),o.accessToken.push(n));break;case Cr.REFRESH_TOKEN:o.refreshToken.indexOf(n)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(n));break;default:this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: "+r),Gn.createUnexpectedCredentialTypeError()}this.setItem(hf.TOKEN_KEYS+"."+this.clientId,JSON.stringify(o))},t.prototype.removeTokenKey=function(n,r){this.logger.trace("BrowserCacheManager removeTokenKey called");var o=this.getTokenKeys();switch(r){case Cr.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: "+n+" from map");var i=o.idToken.indexOf(n);-1<i?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Cr.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: "+n+" from map"),i=o.accessToken.indexOf(n),-1<i?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Cr.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: "+n+" from map"),i=o.refreshToken.indexOf(n),-1<i?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: "+r),Gn.createUnexpectedCredentialTypeError()}this.setItem(hf.TOKEN_KEYS+"."+this.clientId,JSON.stringify(o))},t.prototype.getIdTokenCredential=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&jv.isIdTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),Ku.toObject(new jv,r)):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(n,Cr.ID_TOKEN),null)},t.prototype.setIdTokenCredential=function(n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");var r=n.generateCredentialKey();this.setItem(r,JSON.stringify(n)),this.addTokenKey(r,Cr.ID_TOKEN)},t.prototype.getAccessTokenCredential=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&$v.isAccessTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),Ku.toObject(new $v,r)):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(n,Cr.ACCESS_TOKEN),null)},t.prototype.setAccessTokenCredential=function(n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");var r=n.generateCredentialKey();this.setItem(r,JSON.stringify(n)),this.addTokenKey(r,Cr.ACCESS_TOKEN)},t.prototype.getRefreshTokenCredential=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&Nw.isRefreshTokenEntity(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),Ku.toObject(new Nw,r)):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(n,Cr.REFRESH_TOKEN),null)},t.prototype.setRefreshTokenCredential=function(n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");var r=n.generateCredentialKey();this.setItem(r,JSON.stringify(n)),this.addTokenKey(r,Cr.REFRESH_TOKEN)},t.prototype.getAppMetadata=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&BN.isAppMetadataEntity(n,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),Ku.toObject(new BN,r)):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)},t.prototype.setAppMetadata=function(n){this.logger.trace("BrowserCacheManager.setAppMetadata called");var r=n.generateAppMetadataKey();this.setItem(r,JSON.stringify(n))},t.prototype.getServerTelemetry=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&DP.isServerTelemetryEntity(n,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),Ku.toObject(new DP,r)):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)},t.prototype.setServerTelemetry=function(n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(n,JSON.stringify(r))},t.prototype.getAuthorityMetadata=function(n){var r=this.internalStorage.getItem(n);return r?(r=this.validateAndParseJson(r))&&UN.isAuthorityMetadataEntity(n,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),Ku.toObject(new UN,r)):null:(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null)},t.prototype.getAuthorityMetadataKeys=function(){var n=this;return this.internalStorage.getKeys().filter(function(r){return n.isAuthorityMetadata(r)})},t.prototype.setWrapperMetadata=function(n,r){this.internalStorage.setItem(zw.WRAPPER_SKU,n),this.internalStorage.setItem(zw.WRAPPER_VER,r)},t.prototype.getWrapperMetadata=function(){return[this.internalStorage.getItem(zw.WRAPPER_SKU)||yt.EMPTY_STRING,this.internalStorage.getItem(zw.WRAPPER_VER)||yt.EMPTY_STRING]},t.prototype.setAuthorityMetadata=function(n,r){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(n,JSON.stringify(r))},t.prototype.getActiveAccount=function(){var n=this.generateCacheKey(xs.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(n);return n?(n=this.validateAndParseJson(n))?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoByFilter({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId})[0]||null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema"),n=this.generateCacheKey(xs.ACTIVE_ACCOUNT),(n=this.getItem(n))?(n=this.getAccountInfoByFilter({localAccountId:n})[0]||null)?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(n),n):null:(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null))},t.prototype.setActiveAccount=function(n){var r,o=this.generateCacheKey(xs.ACTIVE_ACCOUNT_FILTERS),i=this.generateCacheKey(xs.ACTIVE_ACCOUNT);n?(this.logger.verbose("setActiveAccount: Active account set"),r={homeAccountId:n.homeAccountId,localAccountId:n.localAccountId},this.browserStorage.setItem(o,JSON.stringify(r)),this.browserStorage.setItem(i,n.localAccountId)):(this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(o),this.browserStorage.removeItem(i))},t.prototype.getAccountInfoByFilter=function(n){var r=this.getAllAccounts();return this.logger.trace("BrowserCacheManager.getAccountInfoByFilter: total "+r.length+" accounts found"),r.filter(function(o){return!(n.username&&n.username.toLowerCase()!==o.username.toLowerCase()||n.homeAccountId&&n.homeAccountId!==o.homeAccountId||n.localAccountId&&n.localAccountId!==o.localAccountId||n.tenantId&&n.tenantId!==o.tenantId||n.environment&&n.environment!==o.environment)})},t.prototype.getAccountInfoByHints=function(n,r){var o=this.getAllAccounts().filter(function(i){var l;return r?(l=i.idTokenClaims&&i.idTokenClaims.sid,r===l):!!n&&n===i.username});if(o.length===1)return o[0];if(1<o.length)throw Gn.createMultipleMatchingAccountsInCacheError();return null},t.prototype.getThrottlingCache=function(n){var r=this.getItem(n);return(r=r&&this.validateAndParseJson(r))&&VV.isThrottlingEntity(n,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),Ku.toObject(new VV,r)):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)},t.prototype.setThrottlingCache=function(n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(n,JSON.stringify(r))},t.prototype.getTemporaryCache=function(n,r){return r=r?this.generateCacheKey(n):n,this.cacheConfig.storeAuthStateInCookie&&(n=this.getItemCookie(r),n)?(this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),n):(n=this.temporaryCacheStorage.getItem(r),n?(this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),n):this.cacheConfig.cacheLocation===is.LocalStorage&&(n=this.browserStorage.getItem(r),n)?(this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),n):(this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null))},t.prototype.setTemporaryCache=function(n,r,o){o=o?this.generateCacheKey(n):n,this.temporaryCacheStorage.setItem(o,r),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,r))},t.prototype.removeItem=function(n){this.browserStorage.removeItem(n),this.temporaryCacheStorage.removeItem(n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(n))},t.prototype.containsKey=function(n){return this.browserStorage.containsKey(n)||this.temporaryCacheStorage.containsKey(n)},t.prototype.getKeys=function(){return PB(this.browserStorage.getKeys(),this.temporaryCacheStorage.getKeys())},t.prototype.clear=function(){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,this.removeAllAccounts()];case 1:return r.sent(),this.removeAppMetadata(),this.getKeys().forEach(function(o){!n.browserStorage.containsKey(o)&&!n.temporaryCacheStorage.containsKey(o)||o.indexOf(yt.CACHE_PREFIX)===-1&&o.indexOf(n.clientId)===-1||n.removeItem(o)}),this.internalStorage.clear(),[2]}})})},t.prototype.clearTokensAndKeysWithClaims=function(){return pn(this,void 0,void 0,function(){var n,r,o=this;return mn(this,function(i){switch(i.label){case 0:return this.logger.trace("BrowserCacheManager.clearTokensAndKeysWithClaims called"),n=this.getTokenKeys(),r=[],n.accessToken.forEach(function(l){var c=o.getAccessTokenCredential(l);c!=null&&c.requestedClaimsHash&&l.includes(c.requestedClaimsHash.toLowerCase())&&r.push(o.removeAccessToken(l))}),[4,Promise.all(r)];case 1:return i.sent(),0<r.length&&this.logger.warning(r.length+" access tokens with claims in the cache keys have been removed from the cache."),[2]}})})},t.prototype.setItemCookie=function(n,r,o){n=encodeURIComponent(n)+"="+encodeURIComponent(r)+";path=/;SameSite=Lax;",o&&(n+="expires="+this.getCookieExpirationTime(o)+";"),this.cacheConfig.secureCookies&&(n+="Secure;"),document.cookie=n},t.prototype.getItemCookie=function(n){for(var r=encodeURIComponent(n)+"=",o=document.cookie.split(";"),i=0;i<o.length;i++){for(var l=o[i];l.charAt(0)===" ";)l=l.substring(1);if(l.indexOf(r)===0)return decodeURIComponent(l.substring(r.length,l.length))}return yt.EMPTY_STRING},t.prototype.clearMsalCookies=function(){var n=this,r=yt.CACHE_PREFIX+"."+this.clientId;document.cookie.split(";").forEach(function(o){for(;o.charAt(0)===" ";)o=o.substring(1);var i;o.indexOf(r)===0&&(i=o.split("=")[0],n.clearItemCookie(i))})},t.prototype.clearItemCookie=function(n){this.setItemCookie(n,yt.EMPTY_STRING,-1)},t.prototype.getCookieExpirationTime=function(n){var r=new Date;return new Date(r.getTime()+n*this.COOKIE_LIFE_MULTIPLIER).toUTCString()},t.prototype.getCache=function(){return this.browserStorage},t.prototype.setCache=function(){},t.prototype.generateCacheKey=function(n){return this.validateAndParseJson(n)?JSON.stringify(n):Vn.startsWith(n,yt.CACHE_PREFIX)||Vn.startsWith(n,xs.ADAL_ID_TOKEN)?n:yt.CACHE_PREFIX+"."+this.clientId+"."+n},t.prototype.generateAuthorityKey=function(n){return n=rm.parseRequestState(this.cryptoImpl,n).libraryState.id,this.generateCacheKey(Xo.AUTHORITY+"."+n)},t.prototype.generateNonceKey=function(n){return n=rm.parseRequestState(this.cryptoImpl,n).libraryState.id,this.generateCacheKey(Xo.NONCE_IDTOKEN+"."+n)},t.prototype.generateStateKey=function(n){return n=rm.parseRequestState(this.cryptoImpl,n).libraryState.id,this.generateCacheKey(Xo.REQUEST_STATE+"."+n)},t.prototype.getCachedAuthority=function(r){var r=this.generateStateKey(r),r=this.getTemporaryCache(r);return r?(r=this.generateAuthorityKey(r),this.getTemporaryCache(r)):null},t.prototype.updateCacheEntries=function(n,r,o,i,l){this.logger.trace("BrowserCacheManager.updateCacheEntries called");var c,f=this.generateStateKey(n),f=(this.setTemporaryCache(f,n,!1),this.generateNonceKey(n)),f=(this.setTemporaryCache(f,r,!1),this.generateAuthorityKey(n));this.setTemporaryCache(f,o,!1),l?(c={credential:l.homeAccountId,type:Vc.HOME_ACCOUNT_ID},this.setTemporaryCache(Xo.CCS_CREDENTIAL,JSON.stringify(c),!0)):Vn.isEmpty(i)||(c={credential:i,type:Vc.UPN},this.setTemporaryCache(Xo.CCS_CREDENTIAL,JSON.stringify(c),!0))},t.prototype.resetRequestCache=function(n){var r=this;this.logger.trace("BrowserCacheManager.resetRequestCache called"),Vn.isEmpty(n)||this.getKeys().forEach(function(o){o.indexOf(n)!==-1&&r.removeItem(o)}),n&&(this.removeItem(this.generateStateKey(n)),this.removeItem(this.generateNonceKey(n)),this.removeItem(this.generateAuthorityKey(n))),this.removeItem(this.generateCacheKey(Xo.REQUEST_PARAMS)),this.removeItem(this.generateCacheKey(Xo.ORIGIN_URI)),this.removeItem(this.generateCacheKey(Xo.URL_HASH)),this.removeItem(this.generateCacheKey(Xo.CORRELATION_ID)),this.removeItem(this.generateCacheKey(Xo.CCS_CREDENTIAL)),this.removeItem(this.generateCacheKey(Xo.NATIVE_REQUEST)),this.setInteractionInProgress(!1)},t.prototype.cleanRequestByState=function(n){this.logger.trace("BrowserCacheManager.cleanRequestByState called"),n&&(n=this.generateStateKey(n),n=this.temporaryCacheStorage.getItem(n),this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: "+n),this.resetRequestCache(n||yt.EMPTY_STRING)),this.clearMsalCookies()},t.prototype.cleanRequestByInteractionType=function(n){var r=this;this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.getKeys().forEach(function(o){var i;o.indexOf(Xo.REQUEST_STATE)!==-1&&(o=r.temporaryCacheStorage.getItem(o))&&(i=MZ.extractBrowserRequestState(r.cryptoImpl,o))&&i.interactionType===n&&(r.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: "+o),r.resetRequestCache(o))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)},t.prototype.cacheCodeRequest=function(n,r){this.logger.trace("BrowserCacheManager.cacheCodeRequest called"),r=r.base64Encode(JSON.stringify(n)),this.setTemporaryCache(Xo.REQUEST_PARAMS,r,!0)},t.prototype.getCachedRequest=function(n,r){this.logger.trace("BrowserCacheManager.getCachedRequest called");var o=this.getTemporaryCache(Xo.REQUEST_PARAMS,!0);if(!o)throw Ln.createNoTokenRequestCacheError();if(r=this.validateAndParseJson(r.base64Decode(o)),!r)throw Ln.createUnableToParseTokenRequestCacheError();if(this.removeItem(this.generateCacheKey(Xo.REQUEST_PARAMS)),Vn.isEmpty(r.authority)){if(o=this.generateAuthorityKey(n),n=this.getTemporaryCache(o),!n)throw Ln.createNoCachedAuthorityError();r.authority=n}return r},t.prototype.getCachedNativeRequest=function(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");var n=this.getTemporaryCache(Xo.NATIVE_REQUEST,!0);return n?this.validateAndParseJson(n)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)},t.prototype.isInteractionInProgress=function(n){var r=this.getInteractionInProgress();return n?r===this.clientId:!!r},t.prototype.getInteractionInProgress=function(){var n=yt.CACHE_PREFIX+"."+Xo.INTERACTION_STATUS_KEY;return this.getTemporaryCache(n,!1)},t.prototype.setInteractionInProgress=function(n){var r=yt.CACHE_PREFIX+"."+Xo.INTERACTION_STATUS_KEY;if(n){if(this.getInteractionInProgress())throw Ln.createInteractionInProgressError();this.setTemporaryCache(r,this.clientId,!1)}else this.getInteractionInProgress()===this.clientId&&this.removeItem(r)},t.prototype.getLegacyLoginHint=function(){var n=this.getTemporaryCache(xs.ADAL_ID_TOKEN),r=(n&&(this.browserStorage.removeItem(xs.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved.")),this.getTemporaryCache(xs.ID_TOKEN,!0)),r=(r&&(this.removeItem(this.generateCacheKey(xs.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved")),r||n);if(r){if(n=new Vf(r,this.cryptoImpl),n.claims&&n.claims.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),n.claims.preferred_username;if(n.claims&&n.claims.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),n.claims.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null},t.prototype.updateCredentialCacheKey=function(n,r){var o=r.generateCredentialKey();if(n!==o){var i=this.getItem(n);if(i)return this.removeItem(n),this.setItem(o,i),this.logger.verbose("Updated an outdated "+r.credentialType+" cache key"),o;this.logger.error("Attempted to update an outdated "+r.credentialType+" cache key but no item matching the outdated key was found in storage")}return n},t.prototype.getRedirectRequestContext=function(){return this.getTemporaryCache(Xo.REDIRECT_CONTEXT,!0)},t.prototype.setRedirectRequestContext=function(n){this.setTemporaryCache(Xo.REDIRECT_CONTEXT,n,!0)},t}(Ku),zLe=function(e,t){var n={cacheLocation:is.MemoryStorage,temporaryCacheLocation:is.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0};return new HN(e,n,IP,t)},QO="@azure/msal-browser",Z1="2.38.3",BLe=function(){function e(){}return e.prototype.sendGetRequestAsync=function(t,n){return pn(this,void 0,void 0,function(){var r,o,i;return mn(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,fetch(t,{method:vf.GET,headers:this.getFetchHeaders(n)})];case 1:return r=l.sent(),[3,3];case 2:throw o=l.sent(),window.navigator.onLine?Ln.createGetRequestFailedError(o,t):Ln.createNoNetworkConnectivityError();case 3:return l.trys.push([3,5,,6]),i={headers:this.getHeaderDict(r.headers)},[4,r.json()];case 4:return[2,(i.body=l.sent(),i.status=r.status,i)];case 5:throw l.sent(),Ln.createFailedToParseNetworkResponseError(t);case 6:return[2]}})})},e.prototype.sendPostRequestAsync=function(t,n){return pn(this,void 0,void 0,function(){var r,o,i,l;return mn(this,function(c){switch(c.label){case 0:r=n&&n.body||yt.EMPTY_STRING,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(t,{method:vf.POST,headers:this.getFetchHeaders(n),body:r})];case 2:return o=c.sent(),[3,4];case 3:throw i=c.sent(),window.navigator.onLine?Ln.createPostRequestFailedError(i,t):Ln.createNoNetworkConnectivityError();case 4:return c.trys.push([4,6,,7]),l={headers:this.getHeaderDict(o.headers)},[4,o.json()];case 5:return[2,(l.body=c.sent(),l.status=o.status,l)];case 6:throw c.sent(),Ln.createFailedToParseNetworkResponseError(t);case 7:return[2]}})})},e.prototype.getFetchHeaders=function(t){var n,r=new Headers;return t&&t.headers&&(n=t.headers,Object.keys(n).forEach(function(o){r.append(o,n[o])})),r},e.prototype.getHeaderDict=function(t){var n={};return t.forEach(function(r,o){n[o]=r}),n},e}(),ULe=function(){function e(){}return e.prototype.sendGetRequestAsync=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,this.sendRequestAsync(t,vf.GET,n)]})})},e.prototype.sendPostRequestAsync=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,this.sendRequestAsync(t,vf.POST,n)]})})},e.prototype.sendRequestAsync=function(t,n,r){var o=this;return new Promise(function(i,l){var c=new XMLHttpRequest;if(c.open(n,t,!0),o.setXhrHeaders(c,r),c.onload=function(){(c.status<200||300<=c.status)&&(n===vf.POST?l(Ln.createPostRequestFailedError("Failed with status "+c.status,t)):l(Ln.createGetRequestFailedError("Failed with status "+c.status,t)));try{var f=JSON.parse(c.responseText),p={headers:o.getHeaderDict(c),body:f,status:c.status};i(p)}catch{l(Ln.createFailedToParseNetworkResponseError(t))}},c.onerror=function(){window.navigator.onLine?n===vf.POST?l(Ln.createPostRequestFailedError("Failed with status "+c.status,t)):l(Ln.createGetRequestFailedError("Failed with status "+c.status,t)):l(Ln.createNoNetworkConnectivityError())},n===vf.POST&&r&&r.body)c.send(r.body);else{if(n!==vf.GET)throw Ln.createHttpMethodNotImplementedError(n);c.send()}})},e.prototype.setXhrHeaders=function(t,n){var r;n&&n.headers&&(r=n.headers,Object.keys(r).forEach(function(o){t.setRequestHeader(o,r[o])}))},e.prototype.getHeaderDict=function(n){var n=n.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return n.forEach(function(l){var l=l.split(": "),i=l.shift(),l=l.join(": ");i&&l&&(r[i]=l)}),r},e}(),Ba=function(){function e(){}return e.clearHash=function(t){t.location.hash=yt.EMPTY_STRING,typeof t.history.replaceState=="function"&&t.history.replaceState(null,yt.EMPTY_STRING,""+t.location.origin+t.location.pathname+t.location.search)},e.replaceHash=function(t){t=t.split("#"),t.shift(),window.location.hash=0<t.length?t.join("#"):yt.EMPTY_STRING},e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(wh.POPUP_NAME_PREFIX+".")===0},e.getCurrentUri=function(){return window.location.href.split("?")[0].split("#")[0]},e.getHomepage=function(){var t=new Do(window.location.href).getUrlComponents();return t.Protocol+"//"+t.HostNameAndPort+"/"},e.getBrowserNetworkClient=function(){return new(window.fetch&&window.Headers?BLe:ULe)},e.blockReloadInHiddenIframes=function(){if(Do.hashContainsKnownProperties(window.location.hash)&&e.isInIframe())throw Ln.createBlockReloadInHiddenIframeError()},e.blockRedirectInIframe=function(t,n){var r=e.isInIframe();if(t===rr.Redirect&&r&&!n)throw Ln.createRedirectInIframeError(r)},e.blockAcquireTokenInPopups=function(){if(e.isInPopup())throw Ln.createBlockAcquireTokenInPopupsError()},e.blockNonBrowserEnvironment=function(t){if(!t)throw Ln.createNonBrowserEnvironmentError()},e.blockNativeBrokerCalledBeforeInitialized=function(t,n){if(t&&!n)throw Ln.createNativeBrokerCalledBeforeInitialize()},e.detectIEOrEdge=function(){var r=window.navigator.userAgent,t=r.indexOf("MSIE "),n=r.indexOf("Trident/"),r=r.indexOf("Edge/");return 0<t||0<n||0<r},e}(),RZ=function(){function e(t,n,r,o,i,l,c,f,p){this.config=t,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=l,this.nativeMessageHandler=f,this.correlationId=p||this.browserCrypto.createNewGuid(),this.logger=o.clone(wh.MSAL_SKU,Z1,this.correlationId),this.performanceClient=c}return e.prototype.clearCacheOnLogout=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){switch(n.label){case 0:if(!t)return[3,5];El.accountInfoIsEqual(t,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null)),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.browserStorage.removeAccount(El.generateAccountCacheKey(t))];case 2:return n.sent(),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request."),[3,4];case 3:return n.sent(),this.logger.error("Account provided in logout request was not found. Local cache unchanged."),[3,4];case 4:return[3,9];case 5:return n.trys.push([5,8,,9]),this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),[4,this.browserStorage.clear()];case 6:return n.sent(),[4,this.browserCrypto.clearKeystore()];case 7:return n.sent(),[3,9];case 8:return n.sent(),this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged."),[3,9];case 9:return[2]}})})},e.prototype.initializeBaseRequest=function(t,n){return pn(this,void 0,void 0,function(){var r,o,i;return mn(this,function(l){switch(l.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.InitializeBaseRequest,t.correlationId),this.logger.verbose("Initializing BaseAuthRequest"),r=t.authority||this.config.auth.authority,n?[4,this.validateRequestAuthority(r,n)]:[3,2];case 1:l.sent(),l.label=2;case 2:if(o=PB(t&&t.scopes||[]),(o=ar(ar({},t),{correlationId:this.correlationId,authority:r,scopes:o})).authenticationScheme){if(o.authenticationScheme===gi.SSH){if(!t.sshJwk)throw Zi.createMissingSshJwkError();if(!t.sshKid)throw Zi.createMissingSshKidError()}this.logger.verbose('Authentication Scheme set to "'+o.authenticationScheme+'" as configured in Auth request')}else o.authenticationScheme=gi.BEARER,this.logger.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);return this.config.cache.claimsBasedCachingEnabled&&t.claims&&!Vn.isEmptyObj(t.claims)?(i=o,[4,this.browserCrypto.hashString(t.claims)]):[3,4];case 3:i.requestedClaimsHash=l.sent(),l.label=4;case 4:return[2,o]}})})},e.prototype.getRedirectUri=function(t){return this.logger.verbose("getRedirectUri called"),t=t||this.config.auth.redirectUri||Ba.getCurrentUri(),Do.getAbsoluteUrl(t,Ba.getCurrentUri())},e.prototype.validateRequestAuthority=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){switch(r.label){case 0:return[4,this.getDiscoveredAuthority(t)];case 1:if(r.sent().isAlias(n.environment))return[2];throw Zi.createAuthorityMismatchError()}})})},e.prototype.initializeServerTelemetryManager=function(t,n){return this.logger.verbose("initializeServerTelemetryManager called"),t={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:t,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]},new DLe(t,this.browserStorage)},e.prototype.getDiscoveredAuthority=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){switch(r.label){case 0:return this.logger.verbose("getDiscoveredAuthority called"),n={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata},t?(this.logger.verbose("Creating discovered authority with request authority"),[4,OP.createDiscoveredInstance(t,this.config.system.networkClient,this.browserStorage,n,this.logger)]):[3,2];case 1:return[2,r.sent()];case 2:return this.logger.verbose("Creating discovered authority with configured authority"),[4,OP.createDiscoveredInstance(this.config.auth.authority,this.config.system.networkClient,this.browserStorage,n,this.logger)];case 3:return[2,r.sent()]}})})},e}(),n0=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return kl(t,e),t.prototype.initializeAuthorizationCodeRequest=function(n){return pn(this,void 0,void 0,function(){var r,o;return mn(this,function(i){switch(i.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.StandardInteractionClientInitializeAuthorizationCodeRequest,n.correlationId),this.logger.verbose("initializeAuthorizationRequest called",n.correlationId),[4,this.browserCrypto.generatePkceCodes()];case 1:return r=i.sent(),o=ar(ar({},n),{redirectUri:n.redirectUri,code:yt.EMPTY_STRING,codeVerifier:r.verifier}),n.codeChallenge=r.challenge,n.codeChallengeMethod=yt.S256_CODE_CHALLENGE_METHOD,[2,o]}})})},t.prototype.initializeLogoutRequest=function(n){this.logger.verbose("initializeLogoutRequest called",n==null?void 0:n.correlationId);var r,o=ar({correlationId:this.correlationId||this.browserCrypto.createNewGuid()},n);return n?n.logoutHint?this.logger.verbose("logoutHint has already been set in logoutRequest"):n.account?(r=this.getLogoutHintFromIdTokenClaims(n.account))&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),o.logoutHint=r):this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set"):this.logger.verbose("logoutHint will not be set since no logout request was configured"),n&&n.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",o.correlationId):n&&n.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",o.correlationId),o.postLogoutRedirectUri=Do.getAbsoluteUrl(n.postLogoutRedirectUri,Ba.getCurrentUri())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",o.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",o.correlationId),o.postLogoutRedirectUri=Do.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ba.getCurrentUri())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",o.correlationId),o.postLogoutRedirectUri=Do.getAbsoluteUrl(Ba.getCurrentUri(),Ba.getCurrentUri())),o},t.prototype.getLogoutHintFromIdTokenClaims=function(n){if(n=n.idTokenClaims,n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null},t.prototype.createAuthCodeClient=function(n,r,o){return pn(this,void 0,void 0,function(){var i;return mn(this,function(l){switch(l.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.StandardInteractionClientCreateAuthCodeClient,this.correlationId),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(n,r,o)];case 1:return i=l.sent(),[2,new IZ(i,this.performanceClient)]}})})},t.prototype.getClientConfiguration=function(n,r,o){return pn(this,void 0,void 0,function(){var i,l;return mn(this,function(c){switch(c.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.StandardInteractionClientGetClientConfiguration,this.correlationId),this.logger.verbose("getClientConfiguration called",this.correlationId),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),[4,this.getDiscoveredAuthority(r,o)];case 1:return i=c.sent(),l=this.config.system.loggerOptions,[2,{authOptions:{clientId:this.config.auth.clientId,authority:i,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:wh.MSAL_SKU,version:Z1,cpu:yt.EMPTY_STRING,os:yt.EMPTY_STRING},telemetry:this.config.telemetry}]}})})},t.prototype.validateAndExtractStateFromHash=function(n,r,o){if(this.logger.verbose("validateAndExtractStateFromHash called",o),!n.state)throw Ln.createHashDoesNotContainStateError();var i=MZ.extractBrowserRequestState(this.browserCrypto,n.state);if(!i)throw Ln.createUnableToParseStateError();if(i.interactionType!==r)throw Ln.createStateInteractionTypeMismatchError();return this.logger.verbose("Returning state from hash",o),n.state},t.prototype.getDiscoveredAuthority=function(n,r){var o;return pn(this,void 0,void 0,function(){var i,l,c;return mn(this,function(f){switch(f.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),this.logger.verbose("getDiscoveredAuthority called",this.correlationId),i=(o=this.performanceClient)==null?void 0:o.startMeasurement(Jt.StandardInteractionClientGetDiscoveredAuthority,this.correlationId),l={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},c=n||this.config.auth.authority,c=NS.generateAuthority(c,r||this.config.auth.azureCloudOptions),this.logger.verbose("Creating discovered authority with configured authority",this.correlationId),this.performanceClient.setPreQueueTime(Jt.AuthorityFactoryCreateDiscoveredInstance,this.correlationId),[4,OP.createDiscoveredInstance(c,this.config.system.networkClient,this.browserStorage,l,this.logger,this.performanceClient,this.correlationId).then(function(p){return i.endMeasurement({success:!0}),p}).catch(function(p){throw i.endMeasurement({errorCode:p.errorCode,subErrorCode:p.subError,success:!1}),p})];case 1:return[2,f.sent()]}})})},t.prototype.initializeAuthorizationRequest=function(n,r){return pn(this,void 0,void 0,function(){var o,i,l,c,f;return mn(this,function(p){switch(p.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId),this.logger.verbose("initializeAuthorizationRequest called",this.correlationId),o=this.getRedirectUri(n.redirectUri),i={interactionType:r},i=rm.setRequestState(this.browserCrypto,n&&n.state||yt.EMPTY_STRING,i),this.performanceClient.setPreQueueTime(Jt.InitializeBaseRequest,this.correlationId),c=[{}],[4,this.initializeBaseRequest(n)];case 1:return l=ar.apply(void 0,[ar.apply(void 0,c.concat([p.sent()])),{redirectUri:o,state:i,nonce:n.nonce||this.browserCrypto.createNewGuid(),responseMode:SP.FRAGMENT}]),(f=n.account||this.browserStorage.getActiveAccount())&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: "+f.homeAccountId,this.correlationId),l.account=f),Vn.isEmpty(l.loginHint)&&!f&&(f=this.browserStorage.getLegacyLoginHint())&&(l.loginHint=f),[2,l]}})})},t}(RZ),DB=function(){function e(t,n,r,o,i){this.authModule=t,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}return e.prototype.handleCodeResponseFromHash=function(t,n,r,o){return pn(this,void 0,void 0,function(){var i,l;return mn(this,function(c){if(this.performanceClient.addQueueMeasurement(Jt.HandleCodeResponseFromHash,this.authCodeRequest.correlationId),this.logger.verbose("InteractionHandler.handleCodeResponse called"),Vn.isEmpty(t))throw Ln.createEmptyHashError(t);if(i=this.browserStorage.generateStateKey(n),!(i=this.browserStorage.getTemporaryCache(i)))throw Gn.createStateNotFoundError("Cached State");try{l=this.authModule.handleFragmentResponse(t,i)}catch(f){throw f instanceof b_&&f.subError===En.userCancelledError.code?Ln.createUserCancelledError():f}return this.performanceClient.setPreQueueTime(Jt.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),[2,this.handleCodeResponseFromServer(l,n,r,o)]})})},e.prototype.handleCodeResponseFromServer=function(t,n,r,o,i){return i===void 0&&(i=!0),pn(this,void 0,void 0,function(){var l,c,f;return mn(this,function(p){switch(p.label){case 0:if(this.performanceClient.addQueueMeasurement(Jt.HandleCodeResponseFromServer,this.authCodeRequest.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),l=this.browserStorage.generateStateKey(n),l=this.browserStorage.getTemporaryCache(l))return c=this.browserStorage.generateNonceKey(l),c=this.browserStorage.getTemporaryCache(c),this.authCodeRequest.code=t.code,t.cloud_instance_host_name?(this.performanceClient.setPreQueueTime(Jt.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),[4,this.updateTokenEndpointAuthority(t.cloud_instance_host_name,r,o)]):[3,2];throw Gn.createStateNotFoundError("Cached State");case 1:p.sent(),p.label=2;case 2:return i&&(t.nonce=c||void 0),t.state=l,t.client_info?this.authCodeRequest.clientInfo=t.client_info:(f=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=f),this.performanceClient.setPreQueueTime(Jt.AuthClientAcquireToken,this.authCodeRequest.correlationId),[4,this.authModule.acquireToken(this.authCodeRequest,t)];case 3:return f=p.sent(),this.browserStorage.cleanRequestByState(n),[2,f]}})})},e.prototype.updateTokenEndpointAuthority=function(t,n,r){return pn(this,void 0,void 0,function(){var o;return mn(this,function(i){switch(i.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.UpdateTokenEndpointAuthority,this.authCodeRequest.correlationId),o="https://"+t+"/"+n.tenant+"/",[4,OP.createDiscoveredInstance(o,r,this.browserStorage,n.options,this.logger,this.performanceClient,this.authCodeRequest.correlationId)];case 1:return o=i.sent(),this.authModule.updateAuthority(o),[2]}})})},e.prototype.checkCcsCredentials=function(){var t=this.browserStorage.getTemporaryCache(Xo.CCS_CREDENTIAL,!0);if(t)try{return JSON.parse(t)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: "+t)}return null},e}(),YV=function(e){function t(n,r,o,i,l,c){return n=e.call(this,n,r,o,i,c)||this,n.browserCrypto=l,n}return kl(t,e),t.prototype.initiateAuthRequest=function(n,r){return pn(this,void 0,void 0,function(){var o;return mn(this,function(i){switch(i.label){case 0:return this.logger.verbose("RedirectHandler.initiateAuthRequest called"),Vn.isEmpty(n)?[3,7]:(r.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Xo.ORIGIN_URI,r.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Xo.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest,this.browserCrypto),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: "+n),o={apiId:Yi.acquireTokenRedirect,timeout:r.redirectTimeout,noHistory:!1},typeof r.onRedirectNavigate!="function"?[3,4]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),r.onRedirectNavigate(n)===!1?[3,2]:(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),[4,r.navigationClient.navigateExternal(n,o)])));case 1:return i.sent(),[2];case 2:return this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation"),[2];case 3:return[3,6];case 4:return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),[4,r.navigationClient.navigateExternal(n,o)];case 5:return i.sent(),[2];case 6:return[3,8];case 7:throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ln.createEmptyNavigationUriError();case 8:return[2]}})})},t.prototype.handleCodeResponseFromHash=function(n,r,o,i){return pn(this,void 0,void 0,function(){var l,c,f,p;return mn(this,function(g){switch(g.label){case 0:if(this.logger.verbose("RedirectHandler.handleCodeResponse called"),Vn.isEmpty(n))throw Ln.createEmptyHashError(n);if(this.browserStorage.setInteractionInProgress(!1),l=this.browserStorage.generateStateKey(r),!(l=this.browserStorage.getTemporaryCache(l)))throw Gn.createStateNotFoundError("Cached State");try{c=this.authModule.handleFragmentResponse(n,l)}catch(v){throw v instanceof b_&&v.subError===En.userCancelledError.code?Ln.createUserCancelledError():v}return f=this.browserStorage.generateNonceKey(l),f=this.browserStorage.getTemporaryCache(f),this.authCodeRequest.code=c.code,c.cloud_instance_host_name?[4,this.updateTokenEndpointAuthority(c.cloud_instance_host_name,o,i)]:[3,2];case 1:g.sent(),g.label=2;case 2:return c.nonce=f||void 0,c.state=l,c.client_info?this.authCodeRequest.clientInfo=c.client_info:(p=this.checkCcsCredentials())&&(this.authCodeRequest.ccsCredential=p),[4,this.authModule.acquireToken(this.authCodeRequest,c)];case 3:return p=g.sent(),this.browserStorage.cleanRequestByState(r),[2,p]}})})},t}(DB),QC=(function(e){e.INITIALIZE_START="msal:initializeStart",e.INITIALIZE_END="msal:initializeEnd",e.ACCOUNT_ADDED="msal:accountAdded",e.ACCOUNT_REMOVED="msal:accountRemoved",e.LOGIN_START="msal:loginStart",e.LOGIN_SUCCESS="msal:loginSuccess",e.LOGIN_FAILURE="msal:loginFailure",e.ACQUIRE_TOKEN_START="msal:acquireTokenStart",e.ACQUIRE_TOKEN_SUCCESS="msal:acquireTokenSuccess",e.ACQUIRE_TOKEN_FAILURE="msal:acquireTokenFailure",e.ACQUIRE_TOKEN_NETWORK_START="msal:acquireTokenFromNetworkStart",e.SSO_SILENT_START="msal:ssoSilentStart",e.SSO_SILENT_SUCCESS="msal:ssoSilentSuccess",e.SSO_SILENT_FAILURE="msal:ssoSilentFailure",e.ACQUIRE_TOKEN_BY_CODE_START="msal:acquireTokenByCodeStart",e.ACQUIRE_TOKEN_BY_CODE_SUCCESS="msal:acquireTokenByCodeSuccess",e.ACQUIRE_TOKEN_BY_CODE_FAILURE="msal:acquireTokenByCodeFailure",e.HANDLE_REDIRECT_START="msal:handleRedirectStart",e.HANDLE_REDIRECT_END="msal:handleRedirectEnd",e.POPUP_OPENED="msal:popupOpened",e.LOGOUT_START="msal:logoutStart",e.LOGOUT_SUCCESS="msal:logoutSuccess",e.LOGOUT_FAILURE="msal:logoutFailure",e.LOGOUT_END="msal:logoutEnd",e.RESTORE_FROM_BFCACHE="msal:restoreFromBFCache"}(Mr=Mr||{}),function(e){e.USER_INTERACTION_REQUIRED="USER_INTERACTION_REQUIRED",e.USER_CANCEL="USER_CANCEL",e.NO_NETWORK="NO_NETWORK",e.TRANSIENT_ERROR="TRANSIENT_ERROR",e.PERSISTENT_ERROR="PERSISTENT_ERROR",e.DISABLED="DISABLED",e.ACCOUNT_UNAVAILABLE="ACCOUNT_UNAVAILABLE"}(kg=kg||{}),{extensionError:{code:"ContentError"},userSwitch:{code:"user_switch",desc:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},tokensNotFoundInCache:{code:"tokens_not_found_in_internal_memory_cache",desc:"Tokens not cached in MSAL JS internal memory, please make the WAM request"}}),Sf=function(e){function t(n,r,o){return n=e.call(this,n,r)||this,Object.setPrototypeOf(n,t.prototype),n.name="NativeAuthError",n.ext=o,n}return kl(t,e),t.prototype.isFatal=function(){return!(!this.ext||!this.ext.status||this.ext.status!==kg.PERSISTENT_ERROR&&this.ext.status!==kg.DISABLED)||this.errorCode===QC.extensionError.code},t.createError=function(n,r,o){if(o&&o.status)switch(o.status){case kg.ACCOUNT_UNAVAILABLE:return Pd.createNativeAccountUnavailableError();case kg.USER_INTERACTION_REQUIRED:return new Pd(n,r);case kg.USER_CANCEL:return Ln.createUserCancelledError();case kg.NO_NETWORK:return Ln.createNoNetworkConnectivityError()}return new t(n,r,o)},t.createUserSwitchError=function(){return new t(QC.userSwitch.code,QC.userSwitch.desc)},t.createTokensNotFoundInCacheError=function(){return new t(QC.tokensNotFoundInCache.code,QC.tokensNotFoundInCache.desc)},t}(cr),OZ=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l;return mn(this,function(c){switch(c.label){case 0:return r=this.performanceClient.startMeasurement(Jt.SilentCacheClientAcquireToken,n.correlationId),i=this.initializeServerTelemetryManager(Yi.acquireTokenSilent_silentFlow),[4,this.createSilentFlowClient(i,n.authority,n.azureCloudOptions)];case 1:o=c.sent(),this.logger.verbose("Silent auth client created"),c.label=2;case 2:return c.trys.push([2,4,,5]),[4,o.acquireCachedToken(n)];case 3:return i=c.sent(),r.endMeasurement({success:!0,fromCache:!0}),[2,i];case 4:throw(l=c.sent())instanceof Ln&&l.errorCode===En.signingKeyNotFoundInStorage.code&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),r.endMeasurement({errorCode:l instanceof cr&&l.errorCode||void 0,subErrorCode:l instanceof cr&&l.subError||void 0,success:!1}),l;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Ln.createSilentLogoutUnsupportedError())},t.prototype.createSilentFlowClient=function(n,r,o){return pn(this,void 0,void 0,function(){var i;return mn(this,function(l){switch(l.label){case 0:return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(n,r,o)];case 1:return i=l.sent(),[2,new ILe(i,this.performanceClient)]}})})},t.prototype.initializeSilentRequest=function(n,r){return pn(this,void 0,void 0,function(){var o;return mn(this,function(i){switch(i.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.InitializeSilentRequest,this.correlationId),this.performanceClient.setPreQueueTime(Jt.InitializeBaseRequest,this.correlationId),o=[ar({},n)],[4,this.initializeBaseRequest(n,r)];case 1:return[2,ar.apply(void 0,[ar.apply(void 0,o.concat([i.sent()])),{account:r,forceRefresh:n.forceRefresh||!1}])]}})})},t}(n0),ux=function(e){function t(n,r,o,i,l,c,f,p,g,v,w,C){return r=e.call(this,n,r,o,i,l,c,p,g,C)||this,r.apiId=f,r.accountId=v,r.nativeMessageHandler=g,r.nativeStorageManager=w,r.silentCacheClient=new OZ(n,r.nativeStorageManager,o,i,l,c,p,g,C),r}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c;return mn(this,function(f){switch(f.label){case 0:return this.logger.trace("NativeInteractionClient - acquireToken called."),r=this.performanceClient.startMeasurement(Jt.NativeInteractionClientAcquireToken,n.correlationId),o=Dd.nowSeconds(),[4,this.initializeNativeRequest(n)];case 1:i=f.sent(),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.acquireTokensFromCache(this.accountId,i)];case 3:return l=f.sent(),r.endMeasurement({success:!0,isNativeBroker:!1,fromCache:!0}),[2,l];case 4:return f.sent(),this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call"),[3,5];case 5:return l={method:Kp.GetToken,request:i},[4,this.nativeMessageHandler.sendMessage(l)];case 6:return c=f.sent(),c=this.validateNativeResponse(c),[2,this.handleNativeResponse(c,i,o).then(function(p){return r.endMeasurement({success:!0,isNativeBroker:!0,requestId:p.requestId}),p}).catch(function(p){throw r.endMeasurement({success:!1,errorCode:p.errorCode,subErrorCode:p.subError,isNativeBroker:!0}),p})]}})})},t.prototype.createSilentCacheRequest=function(n,r){return{authority:n.authority,correlationId:this.correlationId,scopes:Kl.fromString(n.scope).asArray(),account:r,forceRefresh:!1}},t.prototype.acquireTokensFromCache=function(n,r){return pn(this,void 0,void 0,function(){var o,i;return mn(this,function(l){switch(l.label){case 0:if(!n)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Gn.createNoAccountFoundError();if(!(o=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n})))throw Gn.createNoAccountFoundError();l.label=1;case 1:return l.trys.push([1,3,,4]),i=this.createSilentCacheRequest(r,o),[4,this.silentCacheClient.acquireToken(i)];case 2:return[2,l.sent()];case 3:throw l.sent();case 4:return[2]}})})},t.prototype.acquireTokenRedirect=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c;return mn(this,function(f){switch(f.label){case 0:return this.logger.trace("NativeInteractionClient - acquireTokenRedirect called."),[4,this.initializeNativeRequest(n)];case 1:r=f.sent(),o={method:Kp.GetToken,request:r},f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.nativeMessageHandler.sendMessage(o)];case 3:return i=f.sent(),this.validateNativeResponse(i),[3,5];case 4:if((i=f.sent())instanceof Sf&&i.isFatal())throw i;return[3,5];case 5:return this.browserStorage.setTemporaryCache(Xo.NATIVE_REQUEST,JSON.stringify(r),!0),l={apiId:Yi.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},c=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(n.redirectUri),[4,this.navigationClient.navigateExternal(c,l)];case 6:return f.sent(),[2]}})})},t.prototype.handleRedirectPromise=function(){return pn(this,void 0,void 0,function(){var n,r,o,i;return mn(this,function(l){switch(l.label){case 0:if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(n=this.browserStorage.getCachedNativeRequest()))return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),[2,null];r=n.prompt,n=LV(n,["prompt"]),r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Xo.NATIVE_REQUEST)),r={method:Kp.GetToken,request:n},o=Dd.nowSeconds(),l.label=1;case 1:return l.trys.push([1,3,,4]),this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker."),[4,this.nativeMessageHandler.sendMessage(r)];case 2:return i=l.sent(),this.validateNativeResponse(i),i=this.handleNativeResponse(i,n,o),this.browserStorage.setInteractionInProgress(!1),[2,i];case 3:throw i=l.sent(),this.browserStorage.setInteractionInProgress(!1),i;case 4:return[2]}})})},t.prototype.logout=function(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")},t.prototype.handleNativeResponse=function(n,r,o){return pn(this,void 0,void 0,function(){var i,l,c,f;return mn(this,function(p){switch(p.label){case 0:if(this.logger.trace("NativeInteractionClient - handleNativeResponse called."),n.account.id!==r.accountId)throw Sf.createUserSwitchError();return[4,this.getDiscoveredAuthority(r.authority)];case 1:return f=p.sent(),c=f.getPreferredCache(),i=this.createIdTokenObj(n),l=this.createHomeAccountIdentifier(n,i),c=this.createAccountEntity(n,l,i,c),[4,this.generateAuthenticationResult(n,r,i,c,f.canonicalAuthority,o)];case 2:return f=p.sent(),this.cacheAccount(c),this.cacheNativeTokens(n,r,l,c,i,f.accessToken,f.tenantId,o),[2,f]}})})},t.prototype.createIdTokenObj=function(n){return new Vf(n.id_token||yt.EMPTY_STRING,this.browserCrypto)},t.prototype.createHomeAccountIdentifier=function(n,r){return El.generateHomeAccountId(n.client_info||yt.EMPTY_STRING,wu.Default,this.logger,this.browserCrypto,r)},t.prototype.createAccountEntity=function(n,r,o,i){return El.createAccount(n.client_info,r,o,void 0,void 0,void 0,i,n.account.id)},t.prototype.generateScopes=function(n,r){return n.scope?Kl.fromString(n.scope):Kl.fromString(r.scope)},t.prototype.generatePopAccessToken=function(n,r){return pn(this,void 0,void 0,function(){var o,i;return mn(this,function(l){switch(l.label){case 0:if(r.tokenType!==gi.POP)return[3,2];if(n.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),[2,n.shr];if(o=new Ox(this.browserCrypto),i={resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,shrNonce:r.shrNonce},r.keyId)return[4,o.signPopToken(n.access_token,r.keyId,i)];throw Gn.createKeyIdMissingError();case 1:return[2,l.sent()];case 2:return[2,n.access_token]}})})},t.prototype.generateAuthenticationResult=function(n,r,o,i,l,c){return pn(this,void 0,void 0,function(){var f,p,g,v,w,C;return mn(this,function(T){switch(T.label){case 0:return f=this.addTelemetryFromNativeResponse(n),p=n.scope?Kl.fromString(n.scope):Kl.fromString(r.scope),v=n.account.properties||{},g=v.UID||o.claims.oid||o.claims.sub||yt.EMPTY_STRING,v=v.TenantId||o.claims.tid||yt.EMPTY_STRING,[4,this.generatePopAccessToken(n,r)];case 1:return w=T.sent(),C=r.tokenType===gi.POP?gi.POP:gi.BEARER,[2,{authority:l,uniqueId:g,tenantId:v,scopes:p.asArray(),account:i.getAccountInfo(),idToken:n.id_token,idTokenClaims:o.claims,accessToken:w,fromCache:!!f&&this.isResponseFromCache(f),expiresOn:new Date(1e3*Number(c+n.expires_in)),tokenType:C,correlationId:this.correlationId,state:n.state,fromNativeBroker:!0}]}})})},t.prototype.cacheAccount=function(n){var r=this;this.browserStorage.setAccount(n),this.browserStorage.removeAccountContext(n).catch(function(o){r.logger.error("Error occurred while removing account context from browser storage. "+o)})},t.prototype.cacheNativeTokens=function(w,r,C,i,l,T,f,v){var g=jv.createIdTokenEntity(C,r.authority,w.id_token||yt.EMPTY_STRING,r.clientId,l.claims.tid||yt.EMPTY_STRING),v=v+(r.tokenType===gi.POP?yt.SHR_NONCE_VALIDITY:(typeof w.expires_in=="string"?parseInt(w.expires_in,10):w.expires_in)||0),w=this.generateScopes(w,r),C=$v.createAccessTokenEntity(C,r.authority,T,r.clientId,l?l.claims.tid||yt.EMPTY_STRING:f,w.printScopes(),v,0,this.browserCrypto),T=new MP(i,g,C);this.nativeStorageManager.saveCacheRecord(T)},t.prototype.addTelemetryFromNativeResponse=function(n){return n=this.getMATSFromResponse(n),n?(this.performanceClient.addStaticFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null},t.prototype.validateNativeResponse=function(n){if(n.hasOwnProperty("access_token")&&n.hasOwnProperty("id_token")&&n.hasOwnProperty("client_info")&&n.hasOwnProperty("account")&&n.hasOwnProperty("scope")&&n.hasOwnProperty("expires_in"))return n;throw Sf.createUnexpectedError("Response missing expected properties.")},t.prototype.getMATSFromResponse=function(n){if(n.properties.MATS)try{return JSON.parse(n.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null},t.prototype.isResponseFromCache=function(n){return n.is_cached===void 0?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!n.is_cached},t.prototype.initializeNativeRequest=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c,f=this;return mn(this,function(p){switch(p.label){case 0:return this.logger.trace("NativeInteractionClient - initializeNativeRequest called"),r=n.authority||this.config.auth.authority,n.account?[4,this.validateRequestAuthority(r,n.account)]:[3,2];case 1:p.sent(),p.label=2;case 2:return(l=new Do(r)).validateAsUri(),c=n.scopes,i=LV(n,["scopes"]),(c=new Kl(c||[])).appendScopes(wE),o=function(){switch(f.apiId){case Yi.ssoSilent:case Yi.acquireTokenSilent_silentFlow:return f.logger.trace("initializeNativeRequest: silent request sets prompt to none"),Zl.NONE}if(n.prompt)switch(n.prompt){case Zl.NONE:case Zl.CONSENT:case Zl.LOGIN:return f.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),n.prompt;default:throw f.logger.trace("initializeNativeRequest: prompt = "+n.prompt+" is not compatible with native flow"),Ln.createNativePromptParameterNotSupportedError()}else f.logger.trace("initializeNativeRequest: prompt was not provided")},i=ar(ar({},i),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:l.urlString,scope:c.printScopes(),redirectUri:this.getRedirectUri(n.redirectUri),prompt:o(),correlationId:this.correlationId,tokenType:n.authenticationScheme,windowTitleSubstring:document.title,extraParameters:ar(ar(ar({},n.extraQueryParameters),n.tokenQueryParameters),{telemetry:w1.MATS_TELEMETRY}),extendedExpiryToken:!1}),n.authenticationScheme!==gi.POP?[3,4]:(l={resourceRequestUri:n.resourceRequestUri,resourceRequestMethod:n.resourceRequestMethod,shrClaims:n.shrClaims,shrNonce:n.shrNonce},[4,new Ox(this.browserCrypto).generateCnf(l)]);case 3:c=p.sent(),i.reqCnf=c.reqCnfString,i.keyId=c.kid,p.label=4;case 4:return[2,i]}})})},t}(RZ),o_=function(){function e(t,n,r,o){this.logger=t,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.responseId=0,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(Jt.NativeMessageHandlerHandshake)}return e.prototype.sendMessage=function(t){return pn(this,void 0,void 0,function(){var n,r=this;return mn(this,function(o){return this.logger.trace("NativeMessageHandler - sendMessage called."),n={channel:w1.CHANNEL_ID,extensionId:this.extensionId,responseId:this.responseId++,body:t},this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: "+JSON.stringify(n)),this.messageChannel.port1.postMessage(n),[2,new Promise(function(i,l){r.resolvers.set(n.responseId,{resolve:i,reject:l})})]})})},e.createProvider=function(t,n,r){return pn(this,void 0,void 0,function(){var o,i;return mn(this,function(l){switch(l.label){case 0:t.trace("NativeMessageHandler - createProvider called."),l.label=1;case 1:return l.trys.push([1,3,,5]),[4,(o=new e(t,n,r,w1.PREFERRED_EXTENSION_ID)).sendHandshakeRequest()];case 2:return l.sent(),[2,o];case 3:return l.sent(),[4,(i=new e(t,n,r)).sendHandshakeRequest()];case 4:return l.sent(),[2,i];case 5:return[2]}})})},e.prototype.sendHandshakeRequest=function(){return pn(this,void 0,void 0,function(){var t,n=this;return mn(this,function(r){return this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1),t={channel:w1.CHANNEL_ID,extensionId:this.extensionId,responseId:this.responseId++,body:{method:Kp.HandshakeRequest}},this.handshakeEvent.addStaticFields({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=function(o){n.onChannelMessage(o)},window.postMessage(t,window.origin,[this.messageChannel.port2]),[2,new Promise(function(o,i){n.handshakeResolvers.set(t.responseId,{resolve:o,reject:i}),n.timeoutId=window.setTimeout(function(){window.removeEventListener("message",n.windowListener,!1),n.messageChannel.port1.close(),n.messageChannel.port2.close(),n.handshakeEvent.endMeasurement({extensionHandshakeTimedOut:!0,success:!1}),i(Ln.createNativeHandshakeTimeoutError()),n.handshakeResolvers.delete(t.responseId)},n.handshakeTimeoutMs)})]})})},e.prototype.onWindowMessage=function(t){this.logger.trace("NativeMessageHandler - onWindowMessage called"),t.source!==window||!(t=t.data).channel||t.channel!==w1.CHANNEL_ID||t.extensionId&&t.extensionId!==this.extensionId||t.body.method===Kp.HandshakeRequest&&(this.logger.verbose(t.extensionId?"Extension with id: "+t.extensionId+" not installed":"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),t=this.handshakeResolvers.get(t.responseId))&&(this.handshakeEvent.endMeasurement({success:!1,extensionInstalled:!1}),t.reject(Ln.createNativeExtensionNotInstalledError()))},e.prototype.onChannelMessage=function(t){this.logger.trace("NativeMessageHandler - onChannelMessage called.");var n=t.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{var i=n.body.method;if(i===Kp.Response){if(r){var l=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: "+JSON.stringify(l)),l.status!=="Success")r.reject(Sf.createError(l.code,l.description,l.ext));else{if(!l.result)throw cr.createUnexpectedError("Event does not contain result.");l.result.code&&l.result.description?r.reject(Sf.createError(l.result.code,l.result.description,l.result.ext)):r.resolve(l.result)}this.resolvers.delete(n.responseId)}}else i===Kp.HandshakeResponse&&o&&(clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: "+this.extensionId),this.handshakeEvent.endMeasurement({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId))}catch(c){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: "+c.toString()),this.logger.errorPii("Unable to parse "+t),r?r.reject(c):o&&o.reject(c)}},e.prototype.getExtensionId=function(){return this.extensionId},e.prototype.getExtensionVersion=function(){return this.extensionVersion},e.isNativeAvailable=function(t,n,r,o){if(n.trace("isNativeAvailable called"),!t.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case gi.BEARER:case gi.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0},e}(),jLe=function(e){function t(n,r,o,i,l,c,f,p,g,v){return n=e.call(this,n,r,o,i,l,c,f,g,v)||this,n.nativeStorage=p,n}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c,f,p,g=this;return mn(this,function(v){switch(v.label){case 0:return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationRequest,n.correlationId),[4,this.initializeAuthorizationRequest(n,rr.Redirect)];case 1:r=v.sent(),this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||yt.EMPTY_STRING,r.account||null),o=this.initializeServerTelemetryManager(Yi.acquireTokenRedirect),i=function(w){w.persisted&&(g.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),g.browserStorage.cleanRequestByState(r.state),g.eventHandler.emitEvent(Mr.RESTORE_FROM_BFCACHE,rr.Redirect))},v.label=2;case 2:return v.trys.push([2,7,,8]),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationCodeRequest,n.correlationId),[4,this.initializeAuthorizationCodeRequest(r)];case 3:return l=v.sent(),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,n.correlationId),[4,this.createAuthCodeClient(o,r.authority,r.azureCloudOptions)];case 4:return f=v.sent(),this.logger.verbose("Auth code client created"),c=new YV(f,this.browserStorage,l,this.logger,this.browserCrypto,this.performanceClient),[4,f.getAuthCodeUrl(ar(ar({},r),{nativeBroker:o_.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme)}))];case 5:return f=v.sent(),p=this.getRedirectStartPage(n.redirectStartPage),this.logger.verbosePii("Redirect start page: "+p),window.addEventListener("pageshow",i),[4,c.initiateAuthRequest(f,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:p,onRedirectNavigate:n.onRedirectNavigate})];case 6:return[2,v.sent()];case 7:throw(p=v.sent())instanceof cr&&p.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",i),o.cacheFailedRequest(p),this.browserStorage.cleanRequestByState(r.state),p;case 8:return[2]}})})},t.prototype.handleRedirectPromise=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c,f,p,g,v,w;return mn(this,function(C){switch(C.label){case 0:r=this.initializeServerTelemetryManager(Yi.handleRedirectPromise),C.label=1;case 1:if(C.trys.push([1,10,,11]),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),[2,null];if(!(o=this.getRedirectResponseHash(n||window.location.hash)))return this.logger.info("handleRedirectPromise did not detect a response hash as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(rr.Redirect),[2,null];i=void 0;try{l=Do.getDeserializedHash(o),i=this.validateAndExtractStateFromHash(l,rr.Redirect),this.logger.verbose("State extracted from hash")}catch(T){return this.logger.info("handleRedirectPromise was unable to extract state due to: "+T),this.browserStorage.cleanRequestByInteractionType(rr.Redirect),[2,null]}return c=this.browserStorage.getTemporaryCache(Xo.ORIGIN_URI,!0)||yt.EMPTY_STRING,f=Do.removeHashFromUrl(c),v=Do.removeHashFromUrl(window.location.href),f===v&&this.config.auth.navigateToLoginRequestUrl?(this.logger.verbose("Current page is loginRequestUrl, handling hash"),[4,this.handleHash(o,i,r)]):[3,3];case 2:return f=C.sent(),-1<c.indexOf("#")&&Ba.replaceHash(c),[2,f];case 3:return this.config.auth.navigateToLoginRequestUrl?[3,4]:(this.logger.verbose("NavigateToLoginRequestUrl set to false, handling hash"),[2,this.handleHash(o,i,r)]);case 4:return Ba.isInIframe()&&!this.config.system.allowRedirectInIframe?[3,9]:(this.browserStorage.setTemporaryCache(Xo.URL_HASH,o,!0),p={apiId:Yi.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},g=!0,c&&c!=="null"?[3,6]:(v=Ba.getHomepage(),this.browserStorage.setTemporaryCache(Xo.ORIGIN_URI,v,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),[4,this.navigationClient.navigateInternal(v,p)]));case 5:return g=C.sent(),[3,8];case 6:return this.logger.verbose("Navigating to loginRequestUrl: "+c),[4,this.navigationClient.navigateInternal(c,p)];case 7:g=C.sent(),C.label=8;case 8:if(!g)return[2,this.handleHash(o,i,r)];C.label=9;case 9:return[2,null];case 10:throw(w=C.sent())instanceof cr&&w.setCorrelationId(this.correlationId),r.cacheFailedRequest(w),this.browserStorage.cleanRequestByInteractionType(rr.Redirect),w;case 11:return[2]}})})},t.prototype.getRedirectResponseHash=function(n){return this.logger.verbose("getRedirectResponseHash called"),Do.hashContainsKnownProperties(n)?(Ba.clearHash(window),this.logger.verbose("Hash contains known properties, returning response hash")):(n=this.browserStorage.getTemporaryCache(Xo.URL_HASH,!0),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Xo.URL_HASH)),this.logger.verbose("Hash does not contain known properties, returning cached hash")),n},t.prototype.handleHash=function(n,r,o){return pn(this,void 0,void 0,function(){var i,l,c,f=this;return mn(this,function(p){switch(p.label){case 0:if(i=this.browserStorage.getCachedRequest(r,this.browserCrypto),this.logger.verbose("handleHash called, retrieved cached request"),(l=Do.getDeserializedHash(n)).accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),this.nativeMessageHandler)return l=new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,l.accountId,this.nativeStorage,i.correlationId),c=rm.parseRequestState(this.browserCrypto,r).userRequestState,[2,l.acquireToken(ar(ar({},i),{state:c,prompt:void 0})).finally(function(){f.browserStorage.cleanRequestByState(r)})];throw Ln.createNativeConnectionNotEstablishedError()}if(l=this.browserStorage.getCachedAuthority(r))return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,i.correlationId),[4,this.createAuthCodeClient(o,l)];throw Ln.createNoCachedAuthorityError();case 1:return c=p.sent(),this.logger.verbose("Auth code client created"),AP.removeThrottle(this.browserStorage,this.config.auth.clientId,i),[4,new YV(c,this.browserStorage,i,this.logger,this.browserCrypto,this.performanceClient).handleCodeResponseFromHash(n,r,c.authority,this.networkClient)];case 2:return[2,p.sent()]}})})},t.prototype.logout=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c;return mn(this,function(f){switch(f.label){case 0:this.logger.verbose("logoutRedirect called"),r=this.initializeLogoutRequest(n),o=this.initializeServerTelemetryManager(Yi.logout),f.label=1;case 1:return f.trys.push([1,10,,11]),this.eventHandler.emitEvent(Mr.LOGOUT_START,rr.Redirect,n),[4,this.clearCacheOnLogout(r.account)];case 2:return f.sent(),i={apiId:Yi.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,r.correlationId),[4,this.createAuthCodeClient(o,n&&n.authority)];case 3:return l=f.sent(),this.logger.verbose("Auth code client created"),l=l.getLogoutUri(r),this.eventHandler.emitEvent(Mr.LOGOUT_SUCCESS,rr.Redirect,r),n&&typeof n.onRedirectNavigate=="function"?n.onRedirectNavigate(l)===!1?[3,5]:(this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(l,i)]):[3,7];case 4:return f.sent(),[2];case 5:this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation"),f.label=6;case 6:return[3,9];case 7:return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),[4,this.navigationClient.navigateExternal(l,i)];case 8:return f.sent(),[2];case 9:return[3,11];case 10:throw(c=f.sent())instanceof cr&&c.setCorrelationId(this.correlationId),o.cacheFailedRequest(c),this.eventHandler.emitEvent(Mr.LOGOUT_FAILURE,rr.Redirect,null,c),this.eventHandler.emitEvent(Mr.LOGOUT_END,rr.Redirect),c;case 11:return this.eventHandler.emitEvent(Mr.LOGOUT_END,rr.Redirect),[2]}})})},t.prototype.getRedirectStartPage=function(n){return n=n||window.location.href,Do.getAbsoluteUrl(n,Ba.getCurrentUri())},t}(n0),$Le=function(e){function t(n,r,o,i,l,c,f,p,g,v){return n=e.call(this,n,r,o,i,l,c,f,g,v)||this,n.unloadWindow=n.unloadWindow.bind(n),n.nativeStorage=p,n}return kl(t,e),t.prototype.acquireToken=function(n){try{var r,o=this.generatePopupName(n.scopes||wE,n.authority||this.config.auth.authority),i=n.popupWindowAttributes||{};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(n,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r=this.openSizedPopup("about:blank",o,i),this.acquireTokenPopupAsync(n,o,i,r))}catch(l){return Promise.reject(l)}},t.prototype.logout=function(n){try{this.logger.verbose("logoutPopup called");var r,o=this.initializeLogoutRequest(n),i=this.generateLogoutPopupName(o),l=n&&n.authority,c=n&&n.mainWindowRedirectUri,f=(n==null?void 0:n.popupWindowAttributes)||{};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(o,i,f,l,void 0,c)):(this.logger.verbose("asyncPopup set to false, opening popup"),r=this.openSizedPopup("about:blank",i,f),this.logoutPopupAsync(o,i,f,l,r,c))}catch(p){return Promise.reject(p)}},t.prototype.acquireTokenPopupAsync=function(n,r,o,i){return pn(this,void 0,void 0,function(){var l,c,f,p,g,v,w,C,T,k,P,O=this;return mn(this,function(L){switch(L.label){case 0:return this.logger.verbose("acquireTokenPopupAsync called"),l=this.initializeServerTelemetryManager(Yi.acquireTokenPopup),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationRequest,n.correlationId),[4,this.initializeAuthorizationRequest(n,rr.Popup)];case 1:c=L.sent(),this.browserStorage.updateCacheEntries(c.state,c.nonce,c.authority,c.loginHint||yt.EMPTY_STRING,c.account||null),L.label=2;case 2:return L.trys.push([2,8,,9]),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationCodeRequest,n.correlationId),[4,this.initializeAuthorizationCodeRequest(c)];case 3:return f=L.sent(),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,n.correlationId),[4,this.createAuthCodeClient(l,c.authority,c.azureCloudOptions)];case 4:return p=L.sent(),this.logger.verbose("Auth code client created"),v=o_.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme),g=void 0,v&&(g=this.performanceClient.startMeasurement(Jt.FetchAccountIdWithNativeBroker,n.correlationId)),[4,p.getAuthCodeUrl(ar(ar({},c),{nativeBroker:v}))];case 5:return v=L.sent(),w=new DB(p,this.browserStorage,f,this.logger,this.performanceClient),C={popup:i,popupName:r,popupWindowAttributes:o},C=this.initiateAuthRequest(v,C),this.eventHandler.emitEvent(Mr.POPUP_OPENED,rr.Popup,{popupWindow:C},null),[4,this.monitorPopupForHash(C)];case 6:if(C=L.sent(),P=Do.getDeserializedHash(C),T=this.validateAndExtractStateFromHash(P,rr.Popup,c.correlationId),AP.removeThrottle(this.browserStorage,this.config.auth.clientId,f),P.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),g&&g.endMeasurement({success:!0,isNativeBroker:!0}),this.nativeMessageHandler)return P=new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,P.accountId,this.nativeStorage,c.correlationId),k=rm.parseRequestState(this.browserCrypto,T).userRequestState,[2,P.acquireToken(ar(ar({},c),{state:k,prompt:void 0})).finally(function(){O.browserStorage.cleanRequestByState(T)})];throw Ln.createNativeConnectionNotEstablishedError()}return[4,w.handleCodeResponseFromHash(C,T,p.authority,this.networkClient)];case 7:return[2,L.sent()];case 8:throw P=L.sent(),i&&i.close(),P instanceof cr&&P.setCorrelationId(this.correlationId),l.cacheFailedRequest(P),this.browserStorage.cleanRequestByState(c.state),P;case 9:return[2]}})})},t.prototype.logoutPopupAsync=function(n,r,o,i,l,c){return pn(this,void 0,void 0,function(){var f,p,g;return mn(this,function(v){switch(v.label){case 0:this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Mr.LOGOUT_START,rr.Popup,n),f=this.initializeServerTelemetryManager(Yi.logoutPopup),v.label=1;case 1:return v.trys.push([1,5,,6]),[4,this.clearCacheOnLogout(n.account)];case 2:return v.sent(),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,n.correlationId),[4,this.createAuthCodeClient(f,i)];case 3:return p=v.sent(),this.logger.verbose("Auth code client created"),p=p.getLogoutUri(n),this.eventHandler.emitEvent(Mr.LOGOUT_SUCCESS,rr.Popup,n),p=this.openPopup(p,{popupName:r,popupWindowAttributes:o,popup:l}),this.eventHandler.emitEvent(Mr.POPUP_OPENED,rr.Popup,{popupWindow:p},null),[4,this.waitForLogoutPopup(p)];case 4:return v.sent(),c?(p={apiId:Yi.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},g=Do.getAbsoluteUrl(c,Ba.getCurrentUri()),this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: "+g),this.navigationClient.navigateInternal(g,p)):this.logger.verbose("No main window navigation requested"),[3,6];case 5:throw g=v.sent(),l&&l.close(),g instanceof cr&&g.setCorrelationId(this.correlationId),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Mr.LOGOUT_FAILURE,rr.Popup,null,g),this.eventHandler.emitEvent(Mr.LOGOUT_END,rr.Popup),f.cacheFailedRequest(g),g;case 6:return this.eventHandler.emitEvent(Mr.LOGOUT_END,rr.Popup),[2]}})})},t.prototype.initiateAuthRequest=function(n,r){if(Vn.isEmpty(n))throw this.logger.error("Navigate url is empty"),Ln.createEmptyNavigationUriError();return this.logger.infoPii("Navigate to: "+n),this.openPopup(n,r)},t.prototype.monitorPopupForHash=function(n){var r=this;return new Promise(function(o,i){var l=r.config.system.windowHashTimeout/r.config.system.pollIntervalMilliseconds,c=0,f=(r.logger.verbose("PopupHandler.monitorPopupForHash - polling started"),setInterval(function(){if(n.closed)r.logger.error("PopupHandler.monitorPopupForHash - window closed"),r.cleanPopup(),clearInterval(f),i(Ln.createUserCancelledError());else{var p=yt.EMPTY_STRING,g=yt.EMPTY_STRING;try{p=n.location.href,g=n.location.hash}catch{}Vn.isEmpty(p)||p==="about:blank"||(r.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),c++,g?(r.logger.verbose("PopupHandler.monitorPopupForHash - found hash in url"),clearInterval(f),r.cleanPopup(n),Do.hashContainsKnownProperties(g)?(r.logger.verbose("PopupHandler.monitorPopupForHash - hash contains known properties, returning."),o(g)):(r.logger.error("PopupHandler.monitorPopupForHash - found hash in url but it does not contain known properties. Check that your router is not changing the hash prematurely."),r.logger.errorPii("PopupHandler.monitorPopupForHash - hash found: "+g),i(Ln.createHashDoesNotContainKnownPropertiesError()))):l<c&&(r.logger.error("PopupHandler.monitorPopupForHash - unable to find hash in url, timing out"),clearInterval(f),i(Ln.createMonitorPopupTimeoutError())))}},r.config.system.pollIntervalMilliseconds))})},t.prototype.waitForLogoutPopup=function(n){var r=this;return new Promise(function(o){r.logger.verbose("PopupHandler.waitForLogoutPopup - polling started");var i=setInterval(function(){n.closed&&(r.logger.error("PopupHandler.waitForLogoutPopup - window closed"),r.cleanPopup(),clearInterval(i),o());var l=yt.EMPTY_STRING;try{l=n.location.href}catch{}Vn.isEmpty(l)||l==="about:blank"||(r.logger.verbose("PopupHandler.waitForLogoutPopup - popup window is on same origin as caller, closing."),clearInterval(i),r.cleanPopup(n),o())},r.config.system.pollIntervalMilliseconds)})},t.prototype.openPopup=function(n,r){try{var o=void 0;if(r.popup?(o=r.popup,this.logger.verbosePii("Navigating popup window to: "+n),o.location.assign(n)):r.popup===void 0&&(this.logger.verbosePii("Opening popup window to: "+n),o=this.openSizedPopup(n,r.popupName,r.popupWindowAttributes)),o)return o.focus&&o.focus(),this.currentWindow=o,window.addEventListener("beforeunload",this.unloadWindow),o;throw Ln.createEmptyWindowCreatedError()}catch(i){throw this.logger.error("error opening popup "+i.message),this.browserStorage.setInteractionInProgress(!1),Ln.createPopupWindowError(i.toString())}},t.prototype.openSizedPopup=function(n,r,w){var i=window.screenLeft||window.screenX,l=window.screenTop||window.screenY,c=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,p=(p=w.popupSize)==null?void 0:p.width,g=(g=w.popupSize)==null?void 0:g.height,v=(v=w.popupPosition)==null?void 0:v.top,w=(w=w.popupPosition)==null?void 0:w.left;return(!p||p<0||c<p)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=wh.POPUP_WIDTH),(!g||g<0||f<g)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),g=wh.POPUP_HEIGHT),(!v||v<0||f<v)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),v=Math.max(0,f/2-wh.POPUP_HEIGHT/2+l)),(!w||w<0||c<w)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),w=Math.max(0,c/2-wh.POPUP_WIDTH/2+i)),window.open(n,r,"width="+p+", height="+g+", top="+v+", left="+w+", scrollbars=yes")},t.prototype.unloadWindow=function(n){this.browserStorage.cleanRequestByInteractionType(rr.Popup),this.currentWindow&&this.currentWindow.close(),n.preventDefault()},t.prototype.cleanPopup=function(n){n&&n.close(),window.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)},t.prototype.generatePopupName=function(n,r){return wh.POPUP_NAME_PREFIX+"."+this.config.auth.clientId+"."+n.join("-")+"."+r+"."+this.correlationId},t.prototype.generateLogoutPopupName=function(n){return n=n.account&&n.account.homeAccountId,wh.POPUP_NAME_PREFIX+"."+this.config.auth.clientId+"."+n+"."+this.correlationId},t}(n0),HLe=function(){function e(){}return e.prototype.navigateInternal=function(t,n){return e.defaultNavigateWindow(t,n)},e.prototype.navigateExternal=function(t,n){return e.defaultNavigateWindow(t,n)},e.defaultNavigateWindow=function(t,n){return n.noHistory?window.location.replace(t):window.location.assign(t),new Promise(function(r){setTimeout(function(){r(!0)},n.timeout)})},e}(),VLe=6e4,VN=6e3,qLe=3e4,GLe=2e3;function WLe(o,c){var n=o.auth,r=o.cache,f=o.system,o=o.telemetry,i={clientId:yt.EMPTY_STRING,authority:""+yt.DEFAULT_AUTHORITY,knownAuthorities:[],cloudDiscoveryMetadata:yt.EMPTY_STRING,authorityMetadata:yt.EMPTY_STRING,redirectUri:yt.EMPTY_STRING,postLogoutRedirectUri:yt.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:LS.AAD,azureCloudOptions:{azureCloudInstance:DS.None,tenant:yt.EMPTY_STRING},skipAuthorityMetadataCache:!1},l={cacheLocation:is.SessionStorage,temporaryCacheLocation:is.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==is.LocalStorage),claimsBasedCachingEnabled:!0},p={loggerCallback:function(){},logLevel:Ws.Info,piiLoggingEnabled:!1},c=ar(ar({},TZ),{loggerOptions:p,networkClient:c?Ba.getBrowserNetworkClient():RLe,navigationClient:new HLe,loadFrameTimeout:0,windowHashTimeout:(f==null?void 0:f.loadFrameTimeout)||VLe,iframeHashTimeout:(f==null?void 0:f.loadFrameTimeout)||VN,navigateFrameWait:c&&Ba.detectIEOrEdge()?500:0,redirectNavigationTimeout:qLe,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(f==null?void 0:f.nativeBrokerHandshakeTimeout)||GLe,pollIntervalMilliseconds:wh.DEFAULT_POLL_INTERVAL_MS,cryptoOptions:{useMsrCrypto:!1,entropy:void 0}}),f=ar(ar({},f),{loggerOptions:(f==null?void 0:f.loggerOptions)||p}),p={application:{appName:yt.EMPTY_STRING,appVersion:yt.EMPTY_STRING}};return{auth:ar(ar({},i),n),cache:ar(ar({},l),r),system:ar(ar({},c),f),telemetry:ar(ar({},p),o)}}var nI,DZ=function(e){function t(n,r,o,i,l,c){return n=e.call(this,n,r,o,i,c)||this,n.navigateFrameWait=l.navigateFrameWait,n.pollIntervalMilliseconds=l.pollIntervalMilliseconds,n}return kl(t,e),t.prototype.initiateAuthRequest=function(n){return pn(this,void 0,void 0,function(){return mn(this,function(r){switch(r.label){case 0:if(this.performanceClient.addQueueMeasurement(Jt.SilentHandlerInitiateAuthRequest,this.authCodeRequest.correlationId),Vn.isEmpty(n))throw this.logger.info("Navigate url is empty"),Ln.createEmptyNavigationUriError();return this.navigateFrameWait?(this.performanceClient.setPreQueueTime(Jt.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),[4,this.loadFrame(n)]):[3,2];case 1:return[2,r.sent()];case 2:return[2,this.loadFrameSync(n)]}})})},t.prototype.monitorIframeForHash=function(n,r){var o=this;return this.performanceClient.addQueueMeasurement(Jt.SilentHandlerMonitorIframeForHash,this.authCodeRequest.correlationId),new Promise(function(i,l){r<VN&&o.logger.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower ("+r+"ms) than the default ("+VN+"ms). This may result in timeouts.");var c=window.performance.now()+r,f=setInterval(function(){if(window.performance.now()>c)o.removeHiddenIframe(n),clearInterval(f),l(Ln.createMonitorIframeTimeoutError());else{var p=yt.EMPTY_STRING,g=n.contentWindow;try{p=g?g.location.href:yt.EMPTY_STRING}catch{}Vn.isEmpty(p)||(p=g?g.location.hash:yt.EMPTY_STRING,Do.hashContainsKnownProperties(p)&&(o.removeHiddenIframe(n),clearInterval(f),i(p)))}},o.pollIntervalMilliseconds)})},t.prototype.loadFrame=function(n){var r=this;return this.performanceClient.addQueueMeasurement(Jt.SilentHandlerLoadFrame,this.authCodeRequest.correlationId),new Promise(function(o,i){var l=r.createHiddenIframe();setTimeout(function(){l?(l.src=n,o(l)):i("Unable to load iframe")},r.navigateFrameWait)})},t.prototype.loadFrameSync=function(n){var r=this.createHiddenIframe();return r.src=n,r},t.prototype.createHiddenIframe=function(){var n=document.createElement("iframe");return n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.getElementsByTagName("body")[0].appendChild(n),n},t.prototype.removeHiddenIframe=function(n){document.body===n.parentNode&&document.body.removeChild(n)},t}(DB),KLe=function(e){function t(n,r,o,i,l,c,f,p,g,v,w){return n=e.call(this,n,r,o,i,l,c,p,v,w)||this,n.apiId=f,n.nativeStorage=g,n}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l;return mn(this,function(c){switch(c.label){case 0:if(this.performanceClient.addQueueMeasurement(Jt.SilentIframeClientAcquireToken,n.correlationId),this.logger.verbose("acquireTokenByIframe called"),r=this.performanceClient.startMeasurement(Jt.SilentIframeClientAcquireToken,n.correlationId),Vn.isEmpty(n.loginHint)&&Vn.isEmpty(n.sid)&&(!n.account||Vn.isEmpty(n.account.username))&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request."),n.prompt&&n.prompt!==Zl.NONE&&n.prompt!==Zl.NO_SESSION)throw r.endMeasurement({success:!1}),Ln.createSilentPromptValueError(n.prompt);return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationRequest,n.correlationId),[4,this.initializeAuthorizationRequest(ar(ar({},n),{prompt:n.prompt||Zl.NONE}),rr.Silent)];case 1:o=c.sent(),this.browserStorage.updateCacheEntries(o.state,o.nonce,o.authority,o.loginHint||yt.EMPTY_STRING,o.account||null),i=this.initializeServerTelemetryManager(this.apiId),c.label=2;case 2:return c.trys.push([2,5,,6]),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientCreateAuthCodeClient,n.correlationId),[4,this.createAuthCodeClient(i,o.authority,o.azureCloudOptions)];case 3:return l=c.sent(),this.logger.verbose("Auth code client created"),this.performanceClient.setPreQueueTime(Jt.SilentIframeClientTokenHelper,n.correlationId),[4,this.silentTokenHelper(l,o).then(function(f){return r.endMeasurement({success:!0,fromCache:!1,requestId:f.requestId}),f})];case 4:return[2,c.sent()];case 5:throw(l=c.sent())instanceof cr&&l.setCorrelationId(this.correlationId),i.cacheFailedRequest(l),this.browserStorage.cleanRequestByState(o.state),r.endMeasurement({errorCode:l instanceof cr&&l.errorCode||void 0,subErrorCode:l instanceof cr&&l.subError||void 0,success:!1}),l;case 6:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Ln.createSilentLogoutUnsupportedError())},t.prototype.silentTokenHelper=function(n,r){return pn(this,void 0,void 0,function(){var o,i,l,c,f,p,g,v=this;return mn(this,function(w){switch(w.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.SilentIframeClientTokenHelper,r.correlationId),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationCodeRequest,r.correlationId),[4,this.initializeAuthorizationCodeRequest(r)];case 1:return o=w.sent(),this.performanceClient.setPreQueueTime(Jt.GetAuthCodeUrl,r.correlationId),[4,n.getAuthCodeUrl(ar(ar({},r),{nativeBroker:o_.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,r.authenticationScheme)}))];case 2:return l=w.sent(),i=new DZ(n,this.browserStorage,o,this.logger,this.config.system,this.performanceClient),this.performanceClient.setPreQueueTime(Jt.SilentHandlerInitiateAuthRequest,r.correlationId),[4,i.initiateAuthRequest(l)];case 3:return l=w.sent(),this.performanceClient.setPreQueueTime(Jt.SilentHandlerMonitorIframeForHash,r.correlationId),[4,i.monitorIframeForHash(l,this.config.system.iframeHashTimeout)];case 4:if(c=w.sent(),p=Do.getDeserializedHash(c),f=this.validateAndExtractStateFromHash(p,rr.Silent,o.correlationId),p.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),this.nativeMessageHandler)return p=new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,p.accountId,this.browserStorage,this.correlationId),g=rm.parseRequestState(this.browserCrypto,f).userRequestState,[2,p.acquireToken(ar(ar({},r),{state:g,prompt:r.prompt||Zl.NONE})).finally(function(){v.browserStorage.cleanRequestByState(f)})];throw Ln.createNativeConnectionNotEstablishedError()}return this.performanceClient.setPreQueueTime(Jt.HandleCodeResponseFromHash,r.correlationId),[2,i.handleCodeResponseFromHash(c,f,n.authority,this.networkClient)]}})})},t}(n0),YLe=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c,f=this;return mn(this,function(p){switch(p.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.SilentRefreshClientAcquireToken,n.correlationId),this.performanceClient.setPreQueueTime(Jt.InitializeBaseRequest,n.correlationId),o=[ar({},n)],[4,this.initializeBaseRequest(n,n.account)];case 1:return r=ar.apply(void 0,o.concat([p.sent()])),i=this.performanceClient.startMeasurement(Jt.SilentRefreshClientAcquireToken,r.correlationId),l=this.initializeServerTelemetryManager(Yi.acquireTokenSilent_silentFlow),[4,this.createRefreshTokenClient(l,r.authority,r.azureCloudOptions)];case 2:return c=p.sent(),this.logger.verbose("Refresh token client created"),this.performanceClient.setPreQueueTime(Jt.RefreshTokenClientAcquireTokenByRefreshToken,n.correlationId),[2,c.acquireTokenByRefreshToken(r).then(function(g){return i.endMeasurement({success:!0,fromCache:g.fromCache,requestId:g.requestId}),g}).catch(function(g){throw g instanceof cr&&g.setCorrelationId(f.correlationId),l.cacheFailedRequest(g),i.endMeasurement({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g})]}})})},t.prototype.logout=function(){return Promise.reject(Ln.createSilentLogoutUnsupportedError())},t.prototype.createRefreshTokenClient=function(n,r,o){return pn(this,void 0,void 0,function(){var i;return mn(this,function(l){switch(l.label){case 0:return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientGetClientConfiguration,this.correlationId),[4,this.getClientConfiguration(n,r,o)];case 1:return i=l.sent(),[2,new kZ(i,this.performanceClient)]}})})},t}(n0),ZLe=function(){function e(t,n){this.eventCallbacks=new Map,this.logger=t,this.browserCrypto=n,this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}return e.prototype.addEventCallback=function(t){var n;return typeof window<"u"?(n=this.browserCrypto.createNewGuid(),this.eventCallbacks.set(n,t),this.logger.verbose("Event callback registered with id: "+n),n):null},e.prototype.removeEventCallback=function(t){this.eventCallbacks.delete(t),this.logger.verbose("Event callback "+t+" removed.")},e.prototype.enableAccountStorageEvents=function(){typeof window<"u"&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))},e.prototype.disableAccountStorageEvents=function(){typeof window<"u"&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))},e.prototype.emitEvent=function(t,n,r,o){var i,l=this;typeof window<"u"&&(i={eventType:t,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()},this.logger.info("Emitting event: "+t),this.eventCallbacks.forEach(function(c,f){l.logger.verbose("Emitting event to callback "+f+": "+t),c.apply(null,[i])}))},e.prototype.handleAccountCacheChange=function(t){try{var n,r,o=t.newValue||t.oldValue;o&&typeof(n=JSON.parse(o))=="object"&&El.isAccountEntity(n)&&(r=Ku.toObject(new El,n).getAccountInfo(),!t.oldValue&&t.newValue?(this.logger.info("Account was added to cache in a different window"),this.emitEvent(Mr.ACCOUNT_ADDED,void 0,r)):!t.newValue&&t.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.emitEvent(Mr.ACCOUNT_REMOVED,void 0,r)))}catch{}},e}(),ql=function(){function e(){}return e.decimalToHex=function(t){for(var n=t.toString(16);n.length<2;)n="0"+n;return n},e}(),LZ=function(){function e(t){this.cryptoObj=t}return e.prototype.generateGuid=function(){try{var t=new Uint8Array(16);return this.cryptoObj.getRandomValues(t),t[6]|=64,t[6]&=79,t[8]|=128,t[8]&=191,ql.decimalToHex(t[0])+ql.decimalToHex(t[1])+ql.decimalToHex(t[2])+ql.decimalToHex(t[3])+"-"+ql.decimalToHex(t[4])+ql.decimalToHex(t[5])+"-"+ql.decimalToHex(t[6])+ql.decimalToHex(t[7])+"-"+ql.decimalToHex(t[8])+ql.decimalToHex(t[9])+"-"+ql.decimalToHex(t[10])+ql.decimalToHex(t[11])+ql.decimalToHex(t[12])+ql.decimalToHex(t[13])+ql.decimalToHex(t[14])+ql.decimalToHex(t[15])}catch{for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="0123456789abcdef",o=0,i=yt.EMPTY_STRING,l=0;l<36;l++)n[l]!=="-"&&n[l]!=="4"&&(o=16*Math.random()|0),i+=n[l]==="x"?r[o]:n[l]==="y"?r[o=o&3|8]:n[l];return i}},e.prototype.isGuid=function(t){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},e}(),om=function(){function e(){}return e.stringToUtf8Arr=function(t){for(var n,r=0,o=t.length,i=0;i<o;i++)r+=(n=t.charCodeAt(i))<128?1:n<2048?2:n<65536?3:n<2097152?4:n<67108864?5:6;for(var l=new Uint8Array(r),c=0,f=0;c<r;f++)(n=t.charCodeAt(f))<128?l[c++]=n:(n<2048?l[c++]=192+(n>>>6):(n<65536?l[c++]=224+(n>>>12):(n<2097152?l[c++]=240+(n>>>18):(n<67108864?l[c++]=248+(n>>>24):(l[c++]=252+(n>>>30),l[c++]=128+(n>>>24&63)),l[c++]=128+(n>>>18&63)),l[c++]=128+(n>>>12&63)),l[c++]=128+(n>>>6&63)),l[c++]=128+(63&n));return l},e.stringToArrayBuffer=function(t){for(var n=new ArrayBuffer(t.length),r=new Uint8Array(n),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return n},e.utf8ArrToString=function(t){for(var n,r=yt.EMPTY_STRING,o=t.length,i=0;i<o;i++)n=t[i],r+=String.fromCharCode(251<n&&n<254&&i+5<o?1073741824*(n-252)+(t[++i]-128<<24)+(t[++i]-128<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:247<n&&n<252&&i+4<o?(n-248<<24)+(t[++i]-128<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:239<n&&n<248&&i+3<o?(n-240<<18)+(t[++i]-128<<12)+(t[++i]-128<<6)+t[++i]-128:223<n&&n<240&&i+2<o?(n-224<<12)+(t[++i]-128<<6)+t[++i]-128:191<n&&n<224&&i+1<o?(n-192<<6)+t[++i]-128:n);return r},e.getSortedObjectString=function(t){return JSON.stringify(t,Object.keys(t).sort())},e}(),NZ=function(){function e(){}return e.prototype.urlEncode=function(t){return encodeURIComponent(this.encode(t).replace(/=/g,yt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_"))},e.prototype.urlEncodeArr=function(t){return this.base64EncArr(t).replace(/=/g,yt.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")},e.prototype.encode=function(t){return t=om.stringToUtf8Arr(t),this.base64EncArr(t)},e.prototype.base64EncArr=function(t){for(var n,r=(3-t.length%3)%3,o=yt.EMPTY_STRING,i=t.length,l=0,c=0;c<i;c++)l|=t[c]<<(16>>>(n=c%3)&24),n!=2&&t.length-c!=1||(o+=String.fromCharCode(this.uint6ToB64(l>>>18&63),this.uint6ToB64(l>>>12&63),this.uint6ToB64(l>>>6&63),this.uint6ToB64(63&l)),l=0);return r==0?o:o.substring(0,o.length-r)+(r==1?"=":"==")},e.prototype.uint6ToB64=function(t){return t<26?t+65:t<52?t+71:t<62?t-4:t===62?43:t===63?47:65},e}(),XLe=function(){function e(){}return e.prototype.decode=function(t){var n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("Invalid base64 string")}return t=this.base64DecToArr(n),om.utf8ArrToString(t)},e.prototype.base64DecToArr=function(t,n){for(var r,o=t.replace(/[^A-Za-z0-9\+\/]/g,yt.EMPTY_STRING),i=o.length,l=n?Math.ceil((3*i+1>>>2)/n)*n:3*i+1>>>2,c=new Uint8Array(l),f=void 0,p=0,g=0,v=0;v<i;v++)if(r=3&v,p|=this.b64ToUint6(o.charCodeAt(v))<<18-6*r,r==3||i-v==1){for(f=0;f<3&&g<l;f++,g++)c[g]=p>>>(16>>>f&24)&255;p=0}return c},e.prototype.b64ToUint6=function(t){return 64<t&&t<91?t-65:96<t&&t<123?t-71:47<t&&t<58?t+4:t===43?62:t===47?63:0},e}(),QLe=32,JLe=function(){function e(t){this.base64Encode=new NZ,this.cryptoObj=t}return e.prototype.generateCodes=function(){return pn(this,void 0,void 0,function(){var t,n;return mn(this,function(r){switch(r.label){case 0:return t=this.generateCodeVerifier(),[4,this.generateCodeChallengeFromVerifier(t)];case 1:return n=r.sent(),[2,{verifier:t,challenge:n}]}})})},e.prototype.generateCodeVerifier=function(){try{var t=new Uint8Array(QLe);return this.cryptoObj.getRandomValues(t),this.base64Encode.urlEncodeArr(t)}catch(n){throw Ln.createPkceNotGeneratedError(n)}},e.prototype.generateCodeChallengeFromVerifier=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.cryptoObj.sha256Digest(t)];case 1:return n=r.sent(),[2,this.base64Encode.urlEncodeArr(new Uint8Array(n))];case 2:throw n=r.sent(),Ln.createPkceNotGeneratedError(n);case 3:return[2]}})})},e}(),eNe=function(){function e(){}return e.prototype.getRandomValues=function(t){return window.crypto.getRandomValues(t)},e.prototype.generateKey=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,window.crypto.subtle.generateKey(t,n,r)]})})},e.prototype.exportKey=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,window.crypto.subtle.exportKey(Dx,t)]})})},e.prototype.importKey=function(t,n,r,o){return pn(this,void 0,void 0,function(){return mn(this,function(i){return[2,window.crypto.subtle.importKey(Dx,t,n,r,o)]})})},e.prototype.sign=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,window.crypto.subtle.sign(t,n,r)]})})},e.prototype.digest=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,window.crypto.subtle.digest(t,n)]})})},e}(),tNe=function(){function e(){}return e.prototype.initPrng=function(t){return window.msrCrypto.initPrng(PB(t))},e.prototype.getRandomValues=function(t){return window.msrCrypto.getRandomValues(t)},e.prototype.generateKey=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,window.msrCrypto.subtle.generateKey(t,n,r)]})})},e.prototype.exportKey=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,window.msrCrypto.subtle.exportKey(Dx,t)]})})},e.prototype.importKey=function(t,n,r,o){return pn(this,void 0,void 0,function(){return mn(this,function(i){return[2,window.msrCrypto.subtle.importKey(Dx,t,n,r,o)]})})},e.prototype.sign=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,window.msrCrypto.subtle.sign(t,n,r)]})})},e.prototype.digest=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,window.msrCrypto.subtle.digest(t,n)]})})},e}(),nNe=function(){function e(){}return e.prototype.getRandomValues=function(t){return window.msCrypto.getRandomValues(t)},e.prototype.generateKey=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,new Promise(function(i,l){var c=window.msCrypto.subtle.generateKey(t,n,r);c.addEventListener("complete",function(f){i(f.target.result)}),c.addEventListener("error",function(f){l(f)})})]})})},e.prototype.exportKey=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,new Promise(function(r,o){var i=window.msCrypto.subtle.exportKey(Dx,t);i.addEventListener("complete",function(l){var c=l.target.result,c=om.utf8ArrToString(new Uint8Array(c)).replace(/\r/g,yt.EMPTY_STRING).replace(/\n/g,yt.EMPTY_STRING).replace(/\t/g,yt.EMPTY_STRING).split(" ").join(yt.EMPTY_STRING).replace("\0",yt.EMPTY_STRING);try{r(JSON.parse(c))}catch(f){o(f)}}),i.addEventListener("error",function(l){o(l)})})]})})},e.prototype.importKey=function(t,n,r,o){return pn(this,void 0,void 0,function(){var i,l;return mn(this,function(c){return i=om.getSortedObjectString(t),l=om.stringToArrayBuffer(i),[2,new Promise(function(f,p){var g=window.msCrypto.subtle.importKey(Dx,l,n,r,o);g.addEventListener("complete",function(v){f(v.target.result)}),g.addEventListener("error",function(v){p(v)})})]})})},e.prototype.sign=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,new Promise(function(i,l){var c=window.msCrypto.subtle.sign(t,n,r);c.addEventListener("complete",function(f){i(f.target.result)}),c.addEventListener("error",function(f){l(f)})})]})})},e.prototype.digest=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,new Promise(function(o,i){var l=window.msCrypto.subtle.digest(t,n.buffer);l.addEventListener("complete",function(c){o(c.target.result)}),l.addEventListener("error",function(c){i(c)})})]})})},e}(),rNe="RSASSA-PKCS1-v1_5",ZV="SHA-256",oNe=2048,iNe=new Uint8Array([1,0,1]),FZ=function(){function e(t,n){if(this.logger=t,this.cryptoOptions=n,this.hasBrowserCrypto())this.logger.verbose("BrowserCrypto: modern crypto interface available"),this.subtleCrypto=new eNe;else if(this.hasIECrypto())this.logger.verbose("BrowserCrypto: MS crypto interface available"),this.subtleCrypto=new nNe;else{if(!this.hasMsrCrypto()||(t=this.cryptoOptions)==null||!t.useMsrCrypto)throw this.hasMsrCrypto()&&this.logger.info("BrowserCrypto: MSR Crypto interface available but system.cryptoOptions.useMsrCrypto not enabled"),this.logger.error("BrowserCrypto: No crypto interfaces available."),Ln.createCryptoNotAvailableError("Browser crypto, msCrypto, or msrCrypto interfaces not available.");this.logger.verbose("BrowserCrypto: MSR crypto interface available"),this.subtleCrypto=new tNe}if(this.subtleCrypto.initPrng){if(this.logger.verbose("BrowserCrypto: Interface requires entropy"),(n=this.cryptoOptions)==null||!n.entropy)throw this.logger.error("BrowserCrypto: Interface requires entropy but none provided."),LP.createEntropyNotProvided();this.logger.verbose("BrowserCrypto: Entropy provided"),this.subtleCrypto.initPrng(this.cryptoOptions.entropy)}this.keygenAlgorithmOptions={name:rNe,hash:ZV,modulusLength:oNe,publicExponent:iNe}}return e.prototype.hasIECrypto=function(){return"msCrypto"in window},e.prototype.hasBrowserCrypto=function(){return"crypto"in window},e.prototype.hasMsrCrypto=function(){return"msrCrypto"in window},e.prototype.sha256Digest=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return n=om.stringToUtf8Arr(t),[2,this.subtleCrypto.digest({name:ZV},n)]})})},e.prototype.getRandomValues=function(t){return this.subtleCrypto.getRandomValues(t)},e.prototype.generateKeyPair=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,this.subtleCrypto.generateKey(this.keygenAlgorithmOptions,t,n)]})})},e.prototype.exportJwk=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){return[2,this.subtleCrypto.exportKey(t)]})})},e.prototype.importJwk=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){return[2,this.subtleCrypto.importKey(t,this.keygenAlgorithmOptions,n,r)]})})},e.prototype.sign=function(t,n){return pn(this,void 0,void 0,function(){return mn(this,function(r){return[2,this.subtleCrypto.sign(this.keygenAlgorithmOptions,t,n)]})})},e}(),aNe=function(){function e(){this.dbName=jN,this.version=NLe,this.tableName=FLe,this.dbOpen=!1}return e.prototype.open=function(){return pn(this,void 0,void 0,function(){var t=this;return mn(this,function(n){return[2,new Promise(function(r,o){var i=window.indexedDB.open(t.dbName,t.version);i.addEventListener("upgradeneeded",function(l){l.target.result.createObjectStore(t.tableName)}),i.addEventListener("success",function(l){t.db=l.target.result,t.dbOpen=!0,r()}),i.addEventListener("error",function(){return o(Ln.createDatabaseUnavailableError())})})]})})},e.prototype.closeConnection=function(){var t=this.db;t&&this.dbOpen&&(t.close(),this.dbOpen=!1)},e.prototype.validateDbIsOpen=function(){return pn(this,void 0,void 0,function(){return mn(this,function(t){switch(t.label){case 0:return this.dbOpen?[3,2]:[4,this.open()];case 1:return[2,t.sent()];case 2:return[2]}})})},e.prototype.getItem=function(t){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(o,i){if(!n.db)return i(Ln.createDatabaseNotOpenError());var l=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).get(t);l.addEventListener("success",function(c){n.closeConnection(),o(c.target.result)}),l.addEventListener("error",function(c){n.closeConnection(),i(c)})})]}})})},e.prototype.setItem=function(t,n){return pn(this,void 0,void 0,function(){var r=this;return mn(this,function(o){switch(o.label){case 0:return[4,this.validateDbIsOpen()];case 1:return o.sent(),[2,new Promise(function(i,l){if(!r.db)return l(Ln.createDatabaseNotOpenError());var c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(n,t);c.addEventListener("success",function(){r.closeConnection(),i()}),c.addEventListener("error",function(f){r.closeConnection(),l(f)})})]}})})},e.prototype.removeItem=function(t){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(o,i){if(!n.db)return i(Ln.createDatabaseNotOpenError());var l=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).delete(t);l.addEventListener("success",function(){n.closeConnection(),o()}),l.addEventListener("error",function(c){n.closeConnection(),i(c)})})]}})})},e.prototype.getKeys=function(){return pn(this,void 0,void 0,function(){var t=this;return mn(this,function(n){switch(n.label){case 0:return[4,this.validateDbIsOpen()];case 1:return n.sent(),[2,new Promise(function(r,o){if(!t.db)return o(Ln.createDatabaseNotOpenError());var i=t.db.transaction([t.tableName],"readonly").objectStore(t.tableName).getAllKeys();i.addEventListener("success",function(l){t.closeConnection(),r(l.target.result)}),i.addEventListener("error",function(l){t.closeConnection(),o(l)})})]}})})},e.prototype.containsKey=function(t){return pn(this,void 0,void 0,function(){var n=this;return mn(this,function(r){switch(r.label){case 0:return[4,this.validateDbIsOpen()];case 1:return r.sent(),[2,new Promise(function(o,i){if(!n.db)return i(Ln.createDatabaseNotOpenError());var l=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).count(t);l.addEventListener("success",function(c){n.closeConnection(),o(c.target.result===1)}),l.addEventListener("error",function(c){n.closeConnection(),i(c)})})]}})})},e.prototype.deleteDatabase=function(){return pn(this,void 0,void 0,function(){return mn(this,function(t){return this.db&&this.dbOpen&&this.closeConnection(),[2,new Promise(function(n,r){var o=window.indexedDB.deleteDatabase(jN);o.addEventListener("success",function(){return n(!0)}),o.addEventListener("blocked",function(){return n(!0)}),o.addEventListener("error",function(){return r(!1)})})]})})},e}(),XV=function(){function e(t,n){this.inMemoryCache=new $N,this.indexedDBCache=new aNe,this.logger=t,this.storeName=n}return e.prototype.handleDatabaseAccessError=function(t){if(!(t instanceof Ln&&t.errorCode===En.databaseUnavailable.code))throw t;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")},e.prototype.getItem=function(t){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){switch(o.label){case 0:if(n=this.inMemoryCache.getItem(t))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.getItem(t)];case 2:return[2,o.sent()];case 3:return r=o.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,n]}})})},e.prototype.setItem=function(t,n){return pn(this,void 0,void 0,function(){var r;return mn(this,function(o){switch(o.label){case 0:this.inMemoryCache.setItem(t,n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.indexedDBCache.setItem(t,n)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2]}})})},e.prototype.removeItem=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){switch(r.label){case 0:this.inMemoryCache.removeItem(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.indexedDBCache.removeItem(t)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),this.handleDatabaseAccessError(n),[3,4];case 4:return[2]}})})},e.prototype.getKeys=function(){return pn(this,void 0,void 0,function(){var t,n;return mn(this,function(r){switch(r.label){case 0:if((t=this.inMemoryCache.getKeys()).length!==0)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),this.logger.verbose("In-memory cache is empty, now querying persistent storage."),[4,this.indexedDBCache.getKeys()];case 2:return[2,r.sent()];case 3:return n=r.sent(),this.handleDatabaseAccessError(n),[3,4];case 4:return[2,t]}})})},e.prototype.containsKey=function(t){return pn(this,void 0,void 0,function(){var n,r;return mn(this,function(o){switch(o.label){case 0:if(n=this.inMemoryCache.containsKey(t))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),[4,this.indexedDBCache.containsKey(t)];case 2:return[2,o.sent()];case 3:return r=o.sent(),this.handleDatabaseAccessError(r),[3,4];case 4:return[2,n]}})})},e.prototype.clearInMemory=function(){this.logger.verbose("Deleting in-memory keystore "+this.storeName),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore "+this.storeName+" deleted")},e.prototype.clearPersistent=function(){return pn(this,void 0,void 0,function(){var t;return mn(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.logger.verbose("Deleting persistent keystore"),[4,this.indexedDBCache.deleteDatabase()];case 1:return(t=n.sent())&&this.logger.verbose("Persistent keystore deleted"),[2,t];case 2:return t=n.sent(),this.handleDatabaseAccessError(t),[2,!1];case 3:return[2]}})})},e}(),sNe=(function(e){e.asymmetricKeys="asymmetricKeys",e.symmetricKeys="symmetricKeys"}(nI=nI||{}),function(){function e(t){this.logger=t,this.asymmetricKeys=new XV(this.logger,nI.asymmetricKeys),this.symmetricKeys=new XV(this.logger,nI.symmetricKeys)}return e.prototype.clear=function(){return pn(this,void 0,void 0,function(){var t;return mn(this,function(n){switch(n.label){case 0:this.asymmetricKeys.clearInMemory(),this.symmetricKeys.clearInMemory(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.asymmetricKeys.clearPersistent()];case 2:return n.sent(),[2,!0];case 3:return(t=n.sent())instanceof Error?this.logger.error("Clearing keystore failed with error: "+t.message):this.logger.error("Clearing keystore failed with unknown error"),[2,!1];case 4:return[2]}})})},e}()),lNe=function(){function e(t,n,r){this.logger=t,this.browserCrypto=new FZ(this.logger,r),this.b64Encode=new NZ,this.b64Decode=new XLe,this.guidGenerator=new LZ(this.browserCrypto),this.pkceGenerator=new JLe(this.browserCrypto),this.cache=new sNe(this.logger),this.performanceClient=n}return e.prototype.createNewGuid=function(){return this.guidGenerator.generateGuid()},e.prototype.base64Encode=function(t){return this.b64Encode.encode(t)},e.prototype.base64Decode=function(t){return this.b64Decode.decode(t)},e.prototype.generatePkceCodes=function(){return pn(this,void 0,void 0,function(){return mn(this,function(t){return[2,this.pkceGenerator.generateCodes()]})})},e.prototype.getPublicKeyThumbprint=function(t){var n;return pn(this,void 0,void 0,function(){var r,o,i,l,c;return mn(this,function(f){switch(f.label){case 0:return r=(n=this.performanceClient)==null?void 0:n.startMeasurement(Jt.CryptoOptsGetPublicKeyThumbprint,t.correlationId),[4,this.browserCrypto.generateKeyPair(e.EXTRACTABLE,e.POP_KEY_USAGES)];case 1:return o=f.sent(),[4,this.browserCrypto.exportJwk(o.publicKey)];case 2:return l=f.sent(),l={e:l.e,kty:l.kty,n:l.n},l=om.getSortedObjectString(l),[4,this.hashString(l)];case 3:return i=f.sent(),[4,this.browserCrypto.exportJwk(o.privateKey)];case 4:return l=f.sent(),[4,this.browserCrypto.importJwk(l,!1,["sign"])];case 5:return c=f.sent(),[4,this.cache.asymmetricKeys.setItem(i,{privateKey:c,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri})];case 6:return f.sent(),r&&r.endMeasurement({success:!0}),[2,i]}})})},e.prototype.removeTokenBindingKey=function(t){return pn(this,void 0,void 0,function(){return mn(this,function(n){switch(n.label){case 0:return[4,this.cache.asymmetricKeys.removeItem(t)];case 1:return n.sent(),[4,this.cache.asymmetricKeys.containsKey(t)];case 2:return[2,!n.sent()]}})})},e.prototype.clearKeystore=function(){return pn(this,void 0,void 0,function(){return mn(this,function(t){switch(t.label){case 0:return[4,this.cache.clear()];case 1:return[2,t.sent()]}})})},e.prototype.signJwt=function(t,n,r){var o;return pn(this,void 0,void 0,function(){var i,l,c,f,p,g;return mn(this,function(v){switch(v.label){case 0:return i=(o=this.performanceClient)==null?void 0:o.startMeasurement(Jt.CryptoOptsSignJwt,r),[4,this.cache.asymmetricKeys.getItem(n)];case 1:if(l=v.sent())return[4,this.browserCrypto.exportJwk(l.publicKey)];throw Ln.createSigningKeyNotFoundInStorageError(n);case 2:return p=v.sent(),c=om.getSortedObjectString(p),f=this.b64Encode.urlEncode(JSON.stringify({kid:n})),f=OLe.getShrHeaderString({kid:f,alg:p.alg}),p=this.b64Encode.urlEncode(f),t.cnf={jwk:JSON.parse(c)},f=this.b64Encode.urlEncode(JSON.stringify(t)),c=p+"."+f,p=om.stringToArrayBuffer(c),[4,this.browserCrypto.sign(l.privateKey,p)];case 3:return f=v.sent(),p=this.b64Encode.urlEncodeArr(new Uint8Array(f)),g=c+"."+p,i&&i.endMeasurement({success:!0}),[2,g]}})})},e.prototype.hashString=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){switch(r.label){case 0:return[4,this.browserCrypto.sha256Digest(t)];case 1:return n=r.sent(),n=new Uint8Array(n),[2,this.b64Encode.urlEncodeArr(n)]}})})},e.POP_KEY_USAGES=["sign","verify"],e.EXTRACTABLE=!0,e}(),QV=function(){function e(t,n){this.correlationId=n,this.measureName=e.makeMeasureName(t,n),this.startMark=e.makeStartMark(t,n),this.endMark=e.makeEndMark(t,n)}return e.makeMeasureName=function(t,n){return"msal.measure."+t+"."+n},e.makeStartMark=function(t,n){return"msal.start."+t+"."+n},e.makeEndMark=function(t,n){return"msal.end."+t+"."+n},e.supportsBrowserPerformance=function(){return typeof window<"u"&&window.performance!==void 0&&typeof window.performance.mark=="function"&&typeof window.performance.measure=="function"&&typeof window.performance.clearMarks=="function"&&typeof window.performance.clearMeasures=="function"&&typeof window.performance.getEntriesByName=="function"},e.flushMeasurements=function(t,n){if(e.supportsBrowserPerformance())try{n.forEach(function(r){r=e.makeMeasureName(r.name,t),0<window.performance.getEntriesByName(r,"measure").length&&(window.performance.clearMeasures(r),window.performance.clearMarks(e.makeStartMark(r,t)),window.performance.clearMarks(e.makeEndMark(r,t)))})}catch{}},e.prototype.startMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.startMark)}catch{}},e.prototype.endMeasurement=function(){if(e.supportsBrowserPerformance())try{window.performance.mark(this.endMark),window.performance.measure(this.measureName,this.startMark,this.endMark)}catch{}},e.prototype.flushMeasurement=function(){if(e.supportsBrowserPerformance())try{var t,n=window.performance.getEntriesByName(this.measureName,"measure");if(0<n.length)return t=n[0].duration,window.performance.clearMeasures(this.measureName),window.performance.clearMarks(this.startMark),window.performance.clearMarks(this.endMark),t}catch{}return null},e}(),uNe=function(e){function t(n,r,o,i,l,c,f){return n=e.call(this,n,r,o,i,l,c)||this,n.browserCrypto=new FZ(n.logger,f),n.guidGenerator=new LZ(n.browserCrypto),n}return kl(t,e),t.prototype.startPerformanceMeasuremeant=function(n,r){return new QV(n,r)},t.prototype.generateId=function(){return this.guidGenerator.generateGuid()},t.prototype.getPageVisibility=function(){var n;return((n=document.visibilityState)==null?void 0:n.toString())||null},t.prototype.deleteIncompleteSubMeasurements=function(n){var r=this.eventsByCorrelationId.get(n.event.correlationId),o=r&&r.eventId===n.event.eventId,i=[];o&&r!=null&&r.incompleteSubMeasurements&&r.incompleteSubMeasurements.forEach(function(l){i.push(ar({},l))}),0<i.length&&QV.flushMeasurements(n.event.correlationId,i)},t.prototype.supportsBrowserPerformanceNow=function(){return typeof window<"u"&&window.performance!==void 0&&typeof window.performance.now=="function"},t.prototype.startMeasurement=function(n,r){var o=this,i=this.getPageVisibility(),l=e.prototype.startMeasurement.call(this,n,r);return ar(ar({},l),{endMeasurement:function(c){return c=l.endMeasurement(ar({startPageVisibility:i,endPageVisibility:o.getPageVisibility()},c)),o.deleteIncompleteSubMeasurements(l),c},discardMeasurement:function(){l.discardMeasurement(),o.deleteIncompleteSubMeasurements(l),l.measurement.flushMeasurement()}})},t.prototype.setPreQueueTime=function(n,r){var o;this.supportsBrowserPerformanceNow()?r?((o=this.preQueueTimeByCorrelationId.get(r))&&(this.logger.trace("BrowserPerformanceClient: Incomplete pre-queue "+o.name+" found",r),this.addQueueMeasurement(o.name,r,void 0,!0)),this.preQueueTimeByCorrelationId.set(r,{name:n,time:window.performance.now()})):this.logger.trace("BrowserPerformanceClient: correlationId for "+n+" not provided, unable to set telemetry queue time"):this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for "+n)},t.prototype.addQueueMeasurement=function(n,r,o,i){if(this.supportsBrowserPerformanceNow())if(r){var l,c=e.prototype.getPreQueueTime.call(this,n,r);if(c)return l=window.performance.now(),o=o||e.prototype.calculateQueuedTime.call(this,c,l),e.prototype.addQueueMeasurement.call(this,n,r,o,i)}else this.logger.trace("BrowserPerformanceClient: correlationId for "+n+" not provided, unable to add queue measurement");else this.logger.trace("BrowserPerformanceClient: window performance API not available, unable to add queue measurement for "+n)},t}(AZ),cNe=function(){function e(t,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=t,this.storage=n,this.logger=r,this.cryptoObj=o}return e.prototype.loadExternalTokens=function(t,n,r){if(this.logger.info("TokenCache - loadExternalTokens called"),!n.id_token)throw Ln.createUnableToLoadTokenError("Please ensure server response includes id token.");var o=new Vf(n.id_token,this.cryptoObj);if(t.account)var i=this.loadAccount(o,t.account.environment,void 0,void 0,t.account.homeAccountId),l=new MP(i,this.loadIdToken(o,i.homeAccountId,t.account.environment,t.account.tenantId),this.loadAccessToken(t,n,i.homeAccountId,t.account.environment,t.account.tenantId,r),this.loadRefreshToken(t,n,i.homeAccountId,t.account.environment));else{if(!t.authority)throw Ln.createUnableToLoadTokenError("Please provide a request with an account or a request with authority.");var f=NS.generateAuthority(t.authority,t.azureCloudOptions),c={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},f=new NS(f,this.config.system.networkClient,this.storage,c,this.logger);if(r.clientInfo)this.logger.trace("TokenCache - homeAccountId from options"),i=this.loadAccount(o,f.hostnameAndPort,r.clientInfo,f.authorityType);else{if(!n.client_info)throw Ln.createUnableToLoadTokenError("Please provide clientInfo in the response or options.");this.logger.trace("TokenCache - homeAccountId from response"),i=this.loadAccount(o,f.hostnameAndPort,n.client_info,f.authorityType)}l=new MP(i,this.loadIdToken(o,i.homeAccountId,f.hostnameAndPort,f.tenant),this.loadAccessToken(t,n,i.homeAccountId,f.hostnameAndPort,f.tenant,r),this.loadRefreshToken(t,n,i.homeAccountId,f.hostnameAndPort))}return this.generateAuthenticationResult(t,o,l,f)},e.prototype.loadAccount=function(t,n,r,o,i){var l;if(i?l=i:o!==void 0&&r&&(l=El.generateHomeAccountId(r,o,this.logger,this.cryptoObj,t)),!l)throw Ln.createUnableToLoadTokenError("Unexpected missing homeAccountId");if(i=r?El.createAccount(r,l,t,void 0,void 0,void 0,n):El.createGenericAccount(l,t,void 0,void 0,void 0,n),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading account"),this.storage.setAccount(i),i;throw Ln.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadIdToken=function(t,n,r,o){if(n=jv.createIdTokenEntity(n,r,t.rawToken,this.config.auth.clientId,o),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading id token"),this.storage.setIdTokenCredential(n),n;throw Ln.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadAccessToken=function(c,n,g,o,i,p){if(!n.access_token)return this.logger.verbose("TokenCache - No access token provided for caching"),null;if(!n.expires_in)throw Ln.createUnableToLoadTokenError("Please ensure server response includes expires_in value.");if(!p.extendedExpiresOn)throw Ln.createUnableToLoadTokenError("Please provide an extendedExpiresOn value in the options.");var c=new Kl(c.scopes).printScopes(),f=p.expiresOn||n.expires_in+new Date().getTime()/1e3,p=p.extendedExpiresOn,g=$v.createAccessTokenEntity(g,o,n.access_token,this.config.auth.clientId,i,c,f,p,this.cryptoObj);if(this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading access token"),this.storage.setAccessTokenCredential(g),g;throw Ln.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.loadRefreshToken=function(t,n,r,o){if(!n.refresh_token)return this.logger.verbose("TokenCache - No refresh token provided for caching"),null;if(r=Nw.createRefreshTokenEntity(r,o,n.refresh_token,this.config.auth.clientId),this.isBrowserEnvironment)return this.logger.verbose("TokenCache - loading refresh token"),this.storage.setRefreshTokenCredential(r),r;throw Ln.createUnableToLoadTokenError("loadExternalTokens is designed to work in browser environments only.")},e.prototype.generateAuthenticationResult=function(t,n,r,o){var i,l=yt.EMPTY_STRING,c=[],f=null,p=(r!=null&&r.accessToken&&(l=r.accessToken.secret,c=Kl.fromString(r.accessToken.target).asArray(),f=new Date(1e3*Number(r.accessToken.expiresOn)),i=new Date(1e3*Number(r.accessToken.extendedExpiresOn))),(n==null?void 0:n.claims.oid)||(n==null?void 0:n.claims.sub)||yt.EMPTY_STRING),g=(n==null?void 0:n.claims.tid)||yt.EMPTY_STRING;return{authority:o?o.canonicalAuthority:yt.EMPTY_STRING,uniqueId:p,tenantId:g,scopes:c,account:r!=null&&r.account?r.account.getAccountInfo():null,idToken:n?n.rawToken:yt.EMPTY_STRING,idTokenClaims:n?n.claims:{},accessToken:l,fromCache:!0,expiresOn:f,correlationId:t.correlationId||yt.EMPTY_STRING,requestId:yt.EMPTY_STRING,extExpiresOn:i,familyId:yt.EMPTY_STRING,tokenType:((o=r==null?void 0:r.accessToken)==null?void 0:o.tokenType)||yt.EMPTY_STRING,state:yt.EMPTY_STRING,cloudGraphHostName:((p=r==null?void 0:r.account)==null?void 0:p.cloudGraphHostName)||yt.EMPTY_STRING,msGraphHost:((g=r==null?void 0:r.account)==null?void 0:g.msGraphHost)||yt.EMPTY_STRING,code:void 0,fromNativeBroker:!1}},e}(),dNe=function(e){function t(n){return n=e.call(this,n)||this,n.includeRedirectUri=!1,n}return kl(t,e),t}(IZ),hNe=function(e){function t(n,r,o,i,l,c,f,p,g,v){return n=e.call(this,n,r,o,i,l,c,p,g,v)||this,n.apiId=f,n}return kl(t,e),t.prototype.acquireToken=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l;return mn(this,function(c){switch(c.label){case 0:if(this.logger.trace("SilentAuthCodeClient.acquireToken called"),n.code)return this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientInitializeAuthorizationRequest,n.correlationId),[4,this.initializeAuthorizationRequest(n,rr.Silent)];throw Ln.createAuthCodeRequiredError();case 1:r=c.sent(),this.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||yt.EMPTY_STRING,r.account||null),o=this.initializeServerTelemetryManager(this.apiId),c.label=2;case 2:return c.trys.push([2,4,,5]),i=ar(ar({},r),{code:n.code}),this.performanceClient.setPreQueueTime(Jt.StandardInteractionClientGetClientConfiguration,n.correlationId),[4,this.getClientConfiguration(o,r.authority)];case 3:return l=c.sent(),l=new dNe(l),this.logger.verbose("Auth code client created"),[2,new DZ(l,this.browserStorage,i,this.logger,this.config.system,this.performanceClient).handleCodeResponseFromServer({code:n.code,msgraph_host:n.msGraphHost,cloud_graph_host_name:n.cloudGraphHostName,cloud_instance_host_name:n.cloudInstanceHostName},r.state,l.authority,this.networkClient,!1)];case 4:throw(l=c.sent())instanceof cr&&l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l),this.browserStorage.cleanRequestByState(r.state),l;case 5:return[2]}})})},t.prototype.logout=function(){return Promise.reject(Ln.createSilentLogoutUnsupportedError())},t}(n0),fNe=function(){function e(t){this.isBrowserEnvironment=typeof window<"u",this.config=WLe(t,this.isBrowserEnvironment),this.initialized=!1,this.logger=new AB(this.config.system.loggerOptions,QO,Z1),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.isBrowserEnvironment?new uNe(this.config.auth.clientId,this.config.auth.authority,this.logger,QO,Z1,this.config.telemetry.application,this.config.system.cryptoOptions):new LLe(this.config.auth.clientId,this.config.auth.authority,this.logger,QO,Z1,this.config.telemetry.application),this.browserCrypto=this.isBrowserEnvironment?new lNe(this.logger,this.performanceClient,this.config.system.cryptoOptions):IP,this.eventHandler=new ZLe(this.logger,this.browserCrypto),this.browserStorage=this.isBrowserEnvironment?new HN(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger):zLe(this.config.auth.clientId,this.logger),t={cacheLocation:is.MemoryStorage,temporaryCacheLocation:is.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!0},this.nativeInternalStorage=new HN(this.config.auth.clientId,t,this.browserCrypto,this.logger),this.tokenCache=new cNe(this.config,this.browserStorage,this.logger,this.browserCrypto),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}return e.prototype.initialize=function(){return pn(this,void 0,void 0,function(){var t,n,r,o,i;return mn(this,function(l){switch(l.label){case 0:if(this.logger.trace("initialize called"),this.initialized)return this.logger.info("initialize has already been called, exiting early."),[2];if(t=this.config.system.allowNativeBroker,n=this.performanceClient.startMeasurement(Jt.InitializeClientApplication),this.eventHandler.emitEvent(Mr.INITIALIZE_START),!t)return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),r=this,[4,o_.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)];case 2:return r.nativeExtensionProvider=l.sent(),[3,4];case 3:return o=l.sent(),this.logger.verbose(o),[3,4];case 4:return this.config.cache.claimsBasedCachingEnabled?[3,6]:(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),i=this.performanceClient.startMeasurement(Jt.ClearTokensAndKeysWithClaims),[4,this.browserStorage.clearTokensAndKeysWithClaims()]);case 5:l.sent(),i.endMeasurement({success:!0}),l.label=6;case 6:return this.initialized=!0,this.eventHandler.emitEvent(Mr.INITIALIZE_END),n.endMeasurement({allowNativeBroker:t,success:!0}),[2]}})})},e.prototype.handleRedirectPromise=function(t){return pn(this,void 0,void 0,function(){var n,r,o,i,l,c=this;return mn(this,function(f){return this.logger.verbose("handleRedirectPromise called"),Ba.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),n=this.getAllAccounts(),this.isBrowserEnvironment?(r=t||yt.EMPTY_STRING,(o=this.redirectResponse.get(r))===void 0?(this.eventHandler.emitEvent(Mr.HANDLE_REDIRECT_START,rr.Redirect),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise"),l=this.browserStorage.getCachedNativeRequest(),i=void 0,i=l&&o_.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!t?(this.logger.trace("handleRedirectPromise - acquiring token from native platform"),new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,l.accountId,this.nativeInternalStorage,l.correlationId).handleRedirectPromise()):(this.logger.trace("handleRedirectPromise - acquiring token from web flow"),l=this.browserStorage.getTemporaryCache(Xo.CORRELATION_ID,!0)||yt.EMPTY_STRING,this.createRedirectClient(l).handleRedirectPromise(t)),o=i.then(function(p){return p&&(n.length<c.getAllAccounts().length?(c.eventHandler.emitEvent(Mr.LOGIN_SUCCESS,rr.Redirect,p),c.logger.verbose("handleRedirectResponse returned result, login success")):(c.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_SUCCESS,rr.Redirect,p),c.logger.verbose("handleRedirectResponse returned result, acquire token success"))),c.eventHandler.emitEvent(Mr.HANDLE_REDIRECT_END,rr.Redirect),p}).catch(function(p){throw 0<n.length?c.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_FAILURE,rr.Redirect,null,p):c.eventHandler.emitEvent(Mr.LOGIN_FAILURE,rr.Redirect,null,p),c.eventHandler.emitEvent(Mr.HANDLE_REDIRECT_END,rr.Redirect),p}),this.redirectResponse.set(r,o)):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),[2,o]):(this.logger.verbose("handleRedirectPromise returns null, not browser environment"),[2,null])})})},e.prototype.acquireTokenRedirect=function(t){return pn(this,void 0,void 0,function(){var n,r,o=this;return mn(this,function(i){return n=this.getRequestCorrelationId(t),this.logger.verbose("acquireTokenRedirect called",n),this.preflightBrowserEnvironmentCheck(rr.Redirect),(r=0<this.getAllAccounts().length)?this.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_START,rr.Redirect,t):this.eventHandler.emitEvent(Mr.LOGIN_START,rr.Redirect,t),[2,(this.nativeExtensionProvider&&this.canUseNative(t)?new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireTokenRedirect(t).catch(function(l){if(l instanceof Sf&&l.isFatal())return o.nativeExtensionProvider=void 0,o.createRedirectClient(t.correlationId).acquireToken(t);if(l instanceof Pd)return o.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),o.createRedirectClient(t.correlationId).acquireToken(t);throw o.browserStorage.setInteractionInProgress(!1),l}):this.createRedirectClient(t.correlationId).acquireToken(t)).catch(function(l){throw r?o.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_FAILURE,rr.Redirect,null,l):o.eventHandler.emitEvent(Mr.LOGIN_FAILURE,rr.Redirect,null,l),l})]})})},e.prototype.acquireTokenPopup=function(t){var n=this,r=this.getRequestCorrelationId(t),o=this.performanceClient.startMeasurement(Jt.AcquireTokenPopup,r);try{this.logger.verbose("acquireTokenPopup called",r),this.preflightBrowserEnvironmentCheck(rr.Popup)}catch(l){return Promise.reject(l)}var i=this.getAllAccounts();return 0<i.length?this.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_START,rr.Popup,t):this.eventHandler.emitEvent(Mr.LOGIN_START,rr.Popup,t),(this.canUseNative(t)?this.acquireTokenNative(t,Yi.acquireTokenPopup).then(function(l){return n.browserStorage.setInteractionInProgress(!1),o.endMeasurement({success:!0,isNativeBroker:!0,requestId:l.requestId}),l}).catch(function(l){if(l instanceof Sf&&l.isFatal())return n.nativeExtensionProvider=void 0,n.createPopupClient(t.correlationId).acquireToken(t);if(l instanceof Pd)return n.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),n.createPopupClient(t.correlationId).acquireToken(t);throw n.browserStorage.setInteractionInProgress(!1),l}):this.createPopupClient(t.correlationId).acquireToken(t)).then(function(l){return i.length<n.getAllAccounts().length?n.eventHandler.emitEvent(Mr.LOGIN_SUCCESS,rr.Popup,l):n.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_SUCCESS,rr.Popup,l),o.addStaticFields({accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),o.endMeasurement({success:!0,requestId:l.requestId}),l}).catch(function(l){return 0<i.length?n.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_FAILURE,rr.Popup,null,l):n.eventHandler.emitEvent(Mr.LOGIN_FAILURE,rr.Popup,null,l),o.endMeasurement({errorCode:l.errorCode,subErrorCode:l.subError,success:!1}),Promise.reject(l)})},e.prototype.trackPageVisibilityWithMeasurement=function(){var t=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;t&&(this.logger.info("Perf: Visibility change detected in ",t.event.name),t.increment({visibilityChangeCount:1}))},e.prototype.ssoSilent=function(t){var n;return pn(this,void 0,void 0,function(){var r,o,i=this;return mn(this,function(l){return r=this.getRequestCorrelationId(t),o=ar(ar({},t),{prompt:t.prompt,correlationId:r}),this.preflightBrowserEnvironmentCheck(rr.Silent),this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Jt.SsoSilent,r),(n=this.ssoSilentMeasurement)!=null&&n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Mr.SSO_SILENT_START,rr.Silent,o),[2,(this.canUseNative(o)?this.acquireTokenNative(o,Yi.ssoSilent).catch(function(c){if(c instanceof Sf&&c.isFatal())return i.nativeExtensionProvider=void 0,i.createSilentIframeClient(o.correlationId).acquireToken(o);throw c}):this.createSilentIframeClient(o.correlationId).acquireToken(o)).then(function(c){var f;return i.eventHandler.emitEvent(Mr.SSO_SILENT_SUCCESS,rr.Silent,c),(f=i.ssoSilentMeasurement)!=null&&f.addStaticFields({accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),(f=i.ssoSilentMeasurement)!=null&&f.endMeasurement({success:!0,isNativeBroker:c.fromNativeBroker,requestId:c.requestId}),c}).catch(function(c){var f;throw i.eventHandler.emitEvent(Mr.SSO_SILENT_FAILURE,rr.Silent,null,c),(f=i.ssoSilentMeasurement)!=null&&f.endMeasurement({errorCode:c.errorCode,subErrorCode:c.subError,success:!1}),c}).finally(function(){document.removeEventListener("visibilitychange",i.trackPageVisibilityWithMeasurement)})]})})},e.prototype.acquireTokenByCode=function(t){return pn(this,void 0,void 0,function(){var n,r,o,i,l=this;return mn(this,function(c){n=this.getRequestCorrelationId(t),this.preflightBrowserEnvironmentCheck(rr.Silent),this.logger.trace("acquireTokenByCode called",n),this.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_BY_CODE_START,rr.Silent,t),r=this.performanceClient.startMeasurement(Jt.AcquireTokenByCode,t.correlationId);try{if(t.code&&t.nativeAccountId)throw Ln.createSpaCodeAndNativeAccountIdPresentError();if(t.code)return o=t.code,(i=this.hybridAuthCodeResponses.get(o))?(this.logger.verbose("Existing acquireTokenByCode request found",t.correlationId),r.discardMeasurement()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync(ar(ar({},t),{correlationId:n})).then(function(f){return l.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_BY_CODE_SUCCESS,rr.Silent,f),l.hybridAuthCodeResponses.delete(o),r.addStaticFields({accessTokenSize:f.accessToken.length,idTokenSize:f.idToken.length}),r.endMeasurement({success:!0,isNativeBroker:f.fromNativeBroker,requestId:f.requestId}),f}).catch(function(f){throw l.hybridAuthCodeResponses.delete(o),l.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_BY_CODE_FAILURE,rr.Silent,null,f),r.endMeasurement({errorCode:f.errorCode,subErrorCode:f.subError,success:!1}),f}),this.hybridAuthCodeResponses.set(o,i)),[2,i];if(t.nativeAccountId){if(this.canUseNative(t,t.nativeAccountId))return[2,this.acquireTokenNative(t,Yi.acquireTokenByCode,t.nativeAccountId).catch(function(f){throw f instanceof Sf&&f.isFatal()&&(l.nativeExtensionProvider=void 0),f})];throw Ln.createUnableToAcquireTokenFromNativePlatformError()}throw Ln.createAuthCodeOrNativeAccountIdRequiredError()}catch(f){throw this.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_BY_CODE_FAILURE,rr.Silent,null,f),r.endMeasurement({errorCode:f instanceof cr&&f.errorCode||void 0,subErrorCode:f instanceof cr&&f.subError||void 0,success:!1}),f}return[2]})})},e.prototype.acquireTokenByCodeAsync=function(t){var n;return pn(this,void 0,void 0,function(){var r=this;return mn(this,function(o){switch(o.label){case 0:return this.logger.trace("acquireTokenByCodeAsync called",t.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(Jt.AcquireTokenByCodeAsync,t.correlationId),(n=this.acquireTokenByCodeAsyncMeasurement)!=null&&n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),[4,this.createSilentAuthCodeClient(t.correlationId).acquireToken(t).then(function(i){var l;return(l=r.acquireTokenByCodeAsyncMeasurement)!=null&&l.endMeasurement({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(function(i){var l;throw(l=r.acquireTokenByCodeAsyncMeasurement)!=null&&l.endMeasurement({errorCode:i.errorCode,subErrorCode:i.subError,success:!1}),i}).finally(function(){document.removeEventListener("visibilitychange",r.trackPageVisibilityWithMeasurement)})];case 1:return[2,o.sent()]}})})},e.prototype.acquireTokenFromCache=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){switch(this.performanceClient.addQueueMeasurement(Jt.AcquireTokenFromCache,n.correlationId),r.cacheLookupPolicy){case Xu.Default:case Xu.AccessToken:case Xu.AccessTokenAndRefreshToken:return[2,t.acquireToken(n)];default:throw Gn.createRefreshRequiredError()}return[2]})})},e.prototype.acquireTokenByRefreshToken=function(t,n){return pn(this,void 0,void 0,function(){var r;return mn(this,function(o){switch(this.performanceClient.addQueueMeasurement(Jt.AcquireTokenByRefreshToken,t.correlationId),n.cacheLookupPolicy){case Xu.Default:case Xu.AccessTokenAndRefreshToken:case Xu.RefreshToken:case Xu.RefreshTokenAndNetwork:return r=this.createSilentRefreshClient(t.correlationId),this.performanceClient.setPreQueueTime(Jt.SilentRefreshClientAcquireToken,t.correlationId),[2,r.acquireToken(t)];default:throw Gn.createRefreshRequiredError()}return[2]})})},e.prototype.acquireTokenBySilentIframe=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return this.performanceClient.addQueueMeasurement(Jt.AcquireTokenBySilentIframe,t.correlationId),n=this.createSilentIframeClient(t.correlationId),this.performanceClient.setPreQueueTime(Jt.SilentIframeClientAcquireToken,t.correlationId),[2,n.acquireToken(t)]})})},e.prototype.logout=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return n=this.getRequestCorrelationId(t),this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),[2,this.logoutRedirect(ar({correlationId:n},t))]})})},e.prototype.logoutRedirect=function(t){return pn(this,void 0,void 0,function(){var n;return mn(this,function(r){return n=this.getRequestCorrelationId(t),this.preflightBrowserEnvironmentCheck(rr.Redirect),[2,this.createRedirectClient(n).logout(t)]})})},e.prototype.logoutPopup=function(t){try{var n=this.getRequestCorrelationId(t);return this.preflightBrowserEnvironmentCheck(rr.Popup),this.createPopupClient(n).logout(t)}catch(r){return Promise.reject(r)}},e.prototype.getAllAccounts=function(){return this.logger.verbose("getAllAccounts called"),this.isBrowserEnvironment?this.browserStorage.getAllAccounts():[]},e.prototype.getAccountByUsername=function(t){var n;return this.logger.trace("getAccountByUsername called"),t?(n=this.browserStorage.getAccountInfoFilteredBy({username:t}))?(this.logger.verbose("getAccountByUsername: Account matching username found, returning"),this.logger.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: "+t),n):(this.logger.verbose("getAccountByUsername: No matching account found, returning null"),null):(this.logger.warning("getAccountByUsername: No username provided"),null)},e.prototype.getAccountByHomeId=function(t){var n;return this.logger.trace("getAccountByHomeId called"),t?(n=this.browserStorage.getAccountInfoFilteredBy({homeAccountId:t}))?(this.logger.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),this.logger.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: "+t),n):(this.logger.verbose("getAccountByHomeId: No matching account found, returning null"),null):(this.logger.warning("getAccountByHomeId: No homeAccountId provided"),null)},e.prototype.getAccountByLocalId=function(t){var n;return this.logger.trace("getAccountByLocalId called"),t?(n=this.browserStorage.getAccountInfoFilteredBy({localAccountId:t}))?(this.logger.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),this.logger.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: "+t),n):(this.logger.verbose("getAccountByLocalId: No matching account found, returning null"),null):(this.logger.warning("getAccountByLocalId: No localAccountId provided"),null)},e.prototype.setActiveAccount=function(t){this.browserStorage.setActiveAccount(t)},e.prototype.getActiveAccount=function(){return this.browserStorage.getActiveAccount()},e.prototype.preflightBrowserEnvironmentCheck=function(t,n){if(n===void 0&&(n=!0),this.logger.verbose("preflightBrowserEnvironmentCheck started"),Ba.blockNonBrowserEnvironment(this.isBrowserEnvironment),Ba.blockRedirectInIframe(t,this.config.system.allowRedirectInIframe),Ba.blockReloadInHiddenIframes(),Ba.blockAcquireTokenInPopups(),Ba.blockNativeBrokerCalledBeforeInitialized(this.config.system.allowNativeBroker,this.initialized),t===rr.Redirect&&this.config.cache.cacheLocation===is.MemoryStorage&&!this.config.cache.storeAuthStateInCookie)throw LP.createInMemoryRedirectUnavailableError();t!==rr.Redirect&&t!==rr.Popup||this.preflightInteractiveRequest(n)},e.prototype.preflightInteractiveRequest=function(t){this.logger.verbose("preflightInteractiveRequest called, validating app environment"),Ba.blockReloadInHiddenIframes(),t&&this.browserStorage.setInteractionInProgress(!0)},e.prototype.acquireTokenNative=function(t,n,r){return pn(this,void 0,void 0,function(){return mn(this,function(o){if(this.logger.trace("acquireTokenNative called"),this.nativeExtensionProvider)return[2,new ux(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(t),this.nativeInternalStorage,t.correlationId).acquireToken(t)];throw Ln.createNativeConnectionNotEstablishedError()})})},e.prototype.canUseNative=function(t,n){if(this.logger.trace("canUseNative called"),!o_.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,t.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(t.prompt)switch(t.prompt){case Zl.NONE:case Zl.CONSENT:case Zl.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = "+t.prompt+" is not compatible with native flow, returning false"),!1}return!(!n&&!this.getNativeAccountId(t)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))},e.prototype.getNativeAccountId=function(t){return t=t.account||this.browserStorage.getAccountInfoByHints(t.loginHint,t.sid)||this.getActiveAccount(),t&&t.nativeAccountId||""},e.prototype.createPopupClient=function(t){return new $Le(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},e.prototype.createRedirectClient=function(t){return new jLe(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},e.prototype.createSilentIframeClient=function(t){return new KLe(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,t)},e.prototype.createSilentCacheClient=function(t){return new OZ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)},e.prototype.createSilentRefreshClient=function(t){return new YLe(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,t)},e.prototype.createSilentAuthCodeClient=function(t){return new hNe(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yi.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,t)},e.prototype.addEventCallback=function(t){return this.eventHandler.addEventCallback(t)},e.prototype.removeEventCallback=function(t){this.eventHandler.removeEventCallback(t)},e.prototype.addPerformanceCallback=function(t){return this.performanceClient.addPerformanceCallback(t)},e.prototype.removePerformanceCallback=function(t){return this.performanceClient.removePerformanceCallback(t)},e.prototype.enableAccountStorageEvents=function(){this.eventHandler.enableAccountStorageEvents()},e.prototype.disableAccountStorageEvents=function(){this.eventHandler.disableAccountStorageEvents()},e.prototype.getTokenCache=function(){return this.tokenCache},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(t){this.logger=t},e.prototype.initializeWrapperLibrary=function(t,n){this.browserStorage.setWrapperMetadata(t,n)},e.prototype.setNavigationClient=function(t){this.navigationClient=t},e.prototype.getConfiguration=function(){return this.config},e.prototype.getRequestCorrelationId=function(t){return t!=null&&t.correlationId?t.correlationId:this.isBrowserEnvironment?this.browserCrypto.createNewGuid():yt.EMPTY_STRING},e}(),pNe=function(e){function t(n){return n=e.call(this,n)||this,n.astsAsyncMeasurement=void 0,n.activeSilentTokenRequests=new Map,n.trackPageVisibility=n.trackPageVisibility.bind(n),n}return kl(t,e),t.prototype.loginRedirect=function(n){return pn(this,void 0,void 0,function(){var r;return mn(this,function(o){return r=this.getRequestCorrelationId(n),this.logger.verbose("loginRedirect called",r),[2,this.acquireTokenRedirect(ar({correlationId:r},n||WV))]})})},t.prototype.loginPopup=function(n){var r=this.getRequestCorrelationId(n);return this.logger.verbose("loginPopup called",r),this.acquireTokenPopup(ar({correlationId:r},n||WV))},t.prototype.acquireTokenSilent=function(n){return pn(this,void 0,void 0,function(){var r,o,i,l,c,f=this;return mn(this,function(p){if(r=this.getRequestCorrelationId(n),(o=this.performanceClient.startMeasurement(Jt.AcquireTokenSilent,r)).addStaticFields({cacheLookupPolicy:n.cacheLookupPolicy}),this.preflightBrowserEnvironmentCheck(rr.Silent),this.logger.verbose("acquireTokenSilent called",r),c=n.account||this.getActiveAccount())return l={clientId:this.config.auth.clientId,authority:n.authority||yt.EMPTY_STRING,scopes:n.scopes,homeAccountIdentifier:c.homeAccountId,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=JSON.stringify(l),(l=this.activeSilentTokenRequests.get(i))===void 0?(this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.setPreQueueTime(Jt.AcquireTokenSilentAsync,r),c=this.acquireTokenSilentAsync(ar(ar({},n),{correlationId:r}),c).then(function(g){return f.activeSilentTokenRequests.delete(i),o.addStaticFields({accessTokenSize:g.accessToken.length,idTokenSize:g.idToken.length}),o.endMeasurement({success:!0,fromCache:g.fromCache,isNativeBroker:g.fromNativeBroker,cacheLookupPolicy:n.cacheLookupPolicy,requestId:g.requestId}),g}).catch(function(g){throw f.activeSilentTokenRequests.delete(i),o.endMeasurement({errorCode:g.errorCode,subErrorCode:g.subError,success:!1}),g}),this.activeSilentTokenRequests.set(i,c),[2,c]):(this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discardMeasurement(),[2,l]);throw Ln.createNoAccountError()})})},t.prototype.trackPageVisibility=function(){this.astsAsyncMeasurement&&(this.logger.info("Perf: Visibility change detected"),this.astsAsyncMeasurement.increment({visibilityChangeCount:1}))},t.prototype.acquireTokenSilentAsync=function(n,r){var o;return pn(this,void 0,void 0,function(){var i,l,c,f,p=this;return mn(this,function(g){switch(g.label){case 0:return this.performanceClient.addQueueMeasurement(Jt.AcquireTokenSilentAsync,n.correlationId),this.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_START,rr.Silent,n),this.astsAsyncMeasurement=this.performanceClient.startMeasurement(Jt.AcquireTokenSilentAsync,n.correlationId),(o=this.astsAsyncMeasurement)!=null&&o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibility),o_.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,n.authenticationScheme)&&r.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),i=ar(ar({},n),{account:r}),i=this.acquireTokenNative(i,Yi.acquireTokenSilent_silentFlow).catch(function(v){return pn(p,void 0,void 0,function(){return mn(this,function(w){if(v instanceof Sf&&v.isFatal())return this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,[2,this.createSilentIframeClient(n.correlationId).acquireToken(n)];throw v})})}),[3,3]):[3,1];case 1:return this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),l=this.createSilentCacheClient(n.correlationId),this.performanceClient.setPreQueueTime(Jt.InitializeSilentRequest,n.correlationId),[4,l.initializeSilentRequest(n,r)];case 2:c=g.sent(),f=ar(ar({},n),{cacheLookupPolicy:n.cacheLookupPolicy||Xu.Default}),this.performanceClient.setPreQueueTime(Jt.AcquireTokenFromCache,c.correlationId),i=this.acquireTokenFromCache(l,c,f).catch(function(v){if(f.cacheLookupPolicy===Xu.AccessToken)throw v;return Ba.blockReloadInHiddenIframes(),p.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_NETWORK_START,rr.Silent,c),p.performanceClient.setPreQueueTime(Jt.AcquireTokenByRefreshToken,c.correlationId),p.acquireTokenByRefreshToken(c,f).catch(function(w){var C=w instanceof b_,T=w instanceof Pd,k=w.errorCode===Fw.noTokensFoundError.code,P=w.errorCode===wh.INVALID_GRANT_ERROR;if(C&&P&&!T&&f.cacheLookupPolicy!==Xu.AccessTokenAndRefreshToken&&f.cacheLookupPolicy!==Xu.RefreshToken||f.cacheLookupPolicy===Xu.Skip||k)return p.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",n.correlationId),p.performanceClient.setPreQueueTime(Jt.AcquireTokenBySilentIframe,c.correlationId),p.acquireTokenBySilentIframe(c);throw w})}),g.label=3;case 3:return[2,i.then(function(v){var w;return p.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_SUCCESS,rr.Silent,v),(w=p.astsAsyncMeasurement)!=null&&w.endMeasurement({success:!0,fromCache:v.fromCache,isNativeBroker:v.fromNativeBroker,requestId:v.requestId}),v}).catch(function(v){var w;throw p.eventHandler.emitEvent(Mr.ACQUIRE_TOKEN_FAILURE,rr.Silent,null,v),(w=p.astsAsyncMeasurement)!=null&&w.endMeasurement({errorCode:v.errorCode,subErrorCode:v.subError,success:!1}),v}).finally(function(){document.removeEventListener("visibilitychange",p.trackPageVisibility)})]}})})},t}(fNe);function qN(e){this.message=e}qN.prototype=new Error,qN.prototype.name="InvalidCharacterError";var JV=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new qN("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,l="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)&&(l+=String.fromCharCode(255&n>>(-2*o&6))))r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return l};function mNe(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(JV(t).replace(/(.)/g,function(n,r){return r=r.charCodeAt(0).toString(16).toUpperCase(),"%"+(r=r.length<2?"0"+r:r)}))}catch{return JV(t)}}function NP(e){this.message=e}function gNe(e,t){if(typeof e!="string")throw new NP("Invalid token specified");t=(t=t||{}).header===!0?0:1;try{return JSON.parse(mNe(e.split(".")[t]))}catch(n){throw new NP("Invalid token specified: "+n.message)}}NP.prototype=new Error,NP.prototype.name="InvalidTokenError";var yNe=function(){function e(t){var n=this,r=(this.fallbackStorage={},this._triggerTokenFetch=function(o){return o===void 0&&(o=!1),new Promise(function(i,l){typeof n.options.getToken!="function"?l(new Error("Token cannot be ".concat(o?"fetched":"renewed"," because getToken was not set or is not a function."))):n.options.getToken(function(c){try{var f=n._getTokenExpiry(c)-e.constants.tokenRefreshClockSkew;n._storeToken(c),n._setTimeoutTokenFetch(f),i()}catch{l(new Error("Invalid token returned by getToken function"))}},function(c){l(c)},n.map)})},this._setTimeoutTokenFetch=function(o){clearTimeout(n.tokenTimeOutHandle),n.tokenTimeOutHandle=setTimeout(n._triggerTokenFetch,Math.min(1e3*o,2147483647))},t.getServiceOptions());this.options=r.authOptions,this.sessionId=r.sessionId,this.map=t}return e.prototype.initialize=function(){var t=this;return this.initPromise||(this.initPromise=new Promise(function(n,r){if(t.options.authType===Ai.subscriptionKey)n();else if(t.options.authType===Ai.aad)t.options.authContext=t.options.authContext||e.getDefaultAuthContext(t.options),t.options.authContext.handleRedirectPromise().then(function(){setTimeout(function(){return t._loginAndAcquireTokenForAAD(n,r)})}).catch(function(i){r(new Error("Error logging in the AAD users: "+i))});else if(t.options.authType===Ai.anonymous)n(t._triggerTokenFetch(!0));else if(t.options.authType===Ai.sas){if(t.options.sasToken){var o=-1;try{o=t._getTokenExpiry(t.options.sasToken)}catch{return void r(new Error("An invalid sasToken was provided."))}if(o>e.constants.tokenRefreshClockSkew)return t._storeToken(t.options.sasToken),t._setTimeoutTokenFetch(o-e.constants.tokenRefreshClockSkew),void n()}n(t._triggerTokenFetch())}else r(new Error("An invalid authentication type was specified."))})),this.initPromise},e.prototype.dispose=function(){this.tokenTimeOutHandle&&(clearTimeout(this.tokenTimeOutHandle),this.tokenTimeOutHandle=null)},e.getDefaultAuthContext=function(t){if(!t.aadAppId)throw new Error("No AAD app ID was specified.");if(t.aadTenant)return this.defaultAuthContext||(this.defaultAuthContext=new pNe({auth:{authority:"".concat(t.aadInstance||Mh.aadInstance).concat(t.aadTenant),clientId:t.aadAppId},cache:{cacheLocation:this.constants.preferredCacheLocation}})),this.defaultAuthContext;throw new Error("No AAD tenant was specified.")},e.prototype._loginAndAcquireTokenForAAD=function(t,n){var r=((r=this.options.authContext)==null?void 0:r.getAllAccounts())||[];r.length===0?(this.options.authContext.loginRedirect(),t()):(this.options.authContext.setActiveAccount(r[0]),this._acquireTokenForAAD(t,n))},e.prototype._acquireTokenForAAD=function(t,n){var r=this,o={scopes:[Pr.aadResourceId]};this.options.authContext.acquireTokenSilent(o).then(function(i){r._saveItem(e.constants.storage.tokenKey,i.accessToken);var l={map:r.map,type:e.constants.events.tokenAcquired},l=(r.map.events.invoke(e.constants.events.tokenAcquired,l),clearTimeout(r.tokenTimeOutHandle),new Date(i.expiresOn).getTime()-Date.now());r.tokenTimeOutHandle=setTimeout(function(){return r._acquireTokenForAAD()},l),t!=null&&t()}).catch(function(i){if(i instanceof Pd)return r.options.authContext.acquireTokenRedirect(o),t==null?void 0:t();n!=null&&n(i)})},e.prototype.getAuthType=function(){return this.options.authType},e.prototype.getClientId=function(){return this.options.clientId},e.prototype.getToken=function(){if(this.options.authType===Ai.aad)return this._getItem(e.constants.storage.tokenKey);if(this.options.authType!==Ai.anonymous&&this.options.authType!==Ai.sas)return this.options.authType===Ai.subscriptionKey?this.options.subscriptionKey:void 0;var t=this._getItem(e.constants.storage.tokenKey);if(t){var n=this._getTokenExpiry(t);if(n<300&&0<n)this._triggerTokenFetch();else if(n<=0)throw this._saveItem(e.constants.storage.tokenKey,""),new Error(e.constants.errors.tokenExpired)}else this._triggerTokenFetch();return t},e.prototype._getTokenExpiry=function(n){var n=gNe(n).exp,r=this._getCurrentTime();return 0<n-r?n-r:-1},e.prototype._storeToken=function(t){this._saveItem(e.constants.storage.tokenKey,t),t={map:this.map,type:e.constants.events.tokenAcquired},this.map.events.invoke(e.constants.events.tokenAcquired,t)},e.prototype._saveItem=function(t,n){return this._supportsLocalStorage()?localStorage.setItem(t,n):this._supportsSessionStorage()?sessionStorage.setItem(t,n):this.fallbackStorage[t]=n,!0},e.prototype._getItem=function(t){return this._supportsLocalStorage()?localStorage.getItem(t):this._supportsSessionStorage()?sessionStorage.getItem(t):t in this.fallbackStorage?this.fallbackStorage[t]:null},e.prototype._supportsLocalStorage=function(){try{return window.localStorage?(window.localStorage.setItem(e.constants.storage.testStorageKey,"A"),window.localStorage.getItem(e.constants.storage.testStorageKey)==="A"&&(window.localStorage.removeItem(e.constants.storage.testStorageKey),!window.localStorage.getItem(e.constants.storage.testStorageKey))):!1}catch{return!1}},e.prototype._supportsSessionStorage=function(){try{return window.sessionStorage?(window.sessionStorage.setItem(e.constants.storage.testStorageKey,"A"),window.sessionStorage.getItem(e.constants.storage.testStorageKey)==="A"&&(window.sessionStorage.removeItem(e.constants.storage.testStorageKey),!window.sessionStorage.getItem(e.constants.storage.testStorageKey))):!1}catch{return!1}},e.prototype._getCurrentTime=function(){return Math.round(new Date().getTime()/1e3)},e.prototype.signRequest=function(t){t.headers=t.headers||{},t.headers[Pr.sessionIdHeaderName]=this.sessionId,t.headers[Pr.msOriginHeaderName]=Pr.msOriginHeaderValue,t.headers[Pr.mapAgentHeaderName]="MapControl/".concat(Rg," (Web)");var n=this.getToken();switch(this.options.authType){case Ai.aad:case Ai.anonymous:t.headers[Pr.msClientIdHeaderName]=this.options.clientId,t.headers[Pr.authorizationHeaderName]=Pr.authorizationTokenPrefix+n;break;case Ai.sas:t.headers[Pr.authorizationHeaderName]=Pr.jwtSasPrefix+n;break;case Ai.subscriptionKey:t.headers["subscription-key"]=n;break;default:throw new Error("An invalid authentication type was specified")}return t},e.constants={preferredCacheLocation:"localStorage",storage:{tokenKey:"access.token.key",testStorageKey:"testStorage"},events:{tokenAcquired:"tokenacquired"},tokenExpiresIn:3599,tokenRefreshClockSkew:300,errors:{tokenExpired:"Token Expired, Try again"}},e}(),eq=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vNe=function(){function e(t){for(var n in this.map=t,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("atlas-control-container"),Iu){var r;Iu.hasOwnProperty(n)&&((r=document.createElement("div")).classList.add(Iu[n]),r.classList.add("subcontrol-container"),this.controlContainer.appendChild(r))}this.map.getMapContainer().appendChild(this.controlContainer),this.controls=new Set}return e.prototype.add=function(t,n){var r,o;if(Array.isArray(t))try{for(var i=eq(t),l=i.next();!l.done;l=i.next()){var c=l.value;this._add(c,n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}else this._add(t,n)},e.prototype.getControls=function(){return Array.from(this.controls)},e.prototype.remove=function(t){var n,r;if(Array.isArray(t))try{for(var o=eq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this._remove(l)}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else this._remove(t)},e.prototype._add=function(o,i){this.controls.add(o);var r=new Wve().merge(i),o=o.onAdd(this.map,i),i=this.controlContainer.getElementsByClassName(r.position);if(!(0<i.length))throw new Error("Control position ".concat(r.position," does not exist."));i.item(0).appendChild(o)},e.prototype._remove=function(t){t.onRemove(),this.controls.delete(t)},e}(),ww=window&&window.__assign||function(){return(ww=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},_Ne=function(){function e(t){this.callbacks=new Hc,this.map=t}return e.prototype.addCallback=function(t,n,r,o,i){var l,c,f=this;if(o)l=function(C){var g=C.lngLat?new Sl(C.lngLat.lng,C.lngLat.lat):void 0,v=C.point?[C.point.x,C.point.y]:void 0,w=C.features?C.features.map(function(T){return new Ih(T.geometry,T.properties,T.id)}):[],C={type:C.type,originalEvent:C.originalEvent,position:g,coordinate:v,features:w};r(C)};else switch(t){case"data":case"sourcedata":case"styledata":l=function(p){p=ww(ww({dataType:p.dataType},p.dataType==="source"&&ww(ww(ww({isSourceLoaded:p.isSourceLoaded},p.sourceDataType&&{sourceDataType:p.sourceDataType}),{source:f.map.sources.getById(p.sourceId)}),p.tile&&{tile:{id:{x:p.tile.tileID.canonical.x,y:p.tile.tileID.canonical.y,z:p.tile.tileID.canonical.z},size:p.tile.tileSize,state:p.tile.state}})),{map:f.map,type:p.type}),i&&f.map.events._removeListener(t,n,r),r(p)};break;case"error":l=function(p){p={error:p.error,map:f.map,type:p.type},i&&f.map.events._removeListener(t,n,r),r(p)};break;case"touchstart":case"touchend":case"touchmove":case"touchcancel":l=function(p){if(p.originalEvent){if(p.originalEvent===c)return;c=p.originalEvent}var T=p.point?new Tl(p.point.x,p.point.y):void 0,g=p.points?p.points.map(function(k){return new Tl(k.x,k.y)}):[],v=p.lngLat?new Sl(p.lngLat.lng,p.lngLat.lat):void 0,w=p.lngLats?p.lngLats.map(function(k){return new Sl(k.lng,k.lat)}):[],C=v?f.map.layers.getRenderedShapes(new kh(v),n?[n]:void 0):[],T={map:f.map,originalEvent:p.originalEvent,pixel:T,pixels:g,position:v,positions:w,shapes:C,layerId:n||void 0,preventDefault:function(){return p.preventDefault()},type:p.type};i&&f.map.events._removeListener(t,n,r),r(T)};break;case"mousedown":case"mouseup":case"mouseover":case"mousemove":case"click":case"dblclick":case"mouseout":case"mouseenter":case"mouseleave":case"contextmenu":l=function(p){if(p.originalEvent){if(p.originalEvent===c)return;c=p.originalEvent}var w=p.lngLat?new Sl(p.lngLat.lng,p.lngLat.lat):void 0,g=p.point?new Tl(p.point.x,p.point.y):void 0,v=w?f.map.layers.getRenderedShapes(new kh(w),n?[n]:void 0):[],w={map:f.map,originalEvent:p.originalEvent,position:w,pixel:g,preventDefault:function(){return p.preventDefault()},shapes:v,layerId:n||void 0,type:p.type};i&&f.map.events._removeListener(t,n,r),r(w)};break;case"styleimagemissing":l=function(p){i&&f.map.events._removeListener(t,n,r),r(p.id)};break;case"wheel":l=function(p){if(p.originalEvent){if(p.originalEvent===c)return;c=p.originalEvent}var g={map:f.map,originalEvent:p.originalEvent,preventDefault:function(){return p.preventDefault()},type:p.type};i&&f.map.events._removeListener(t,n,r),r(g)};break;case"resize":l=function(p){var g,v={map:f.map,type:p.type};for(g in p)g!=="type"&&g!=="target"&&(v[g]=p[g]);i&&f.map.events._removeListener(t,n,r),r(v)};break;default:l=function(p){var g={map:f.map,type:p.type};p.originalEvent&&(g.originalEvent=p.originalEvent),i&&f.map.events._removeListener(t,n,r),r(g)}}this.callbacks.has(n)||this.callbacks.set(n,new Hc),this.callbacks.get(n).has(t)||this.callbacks.get(n).set(t,new Map),this.callbacks.get(n).get(t).set(r,[l,i])},e.prototype.removeCallback=function(t,n,r){this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(r)&&this.callbacks.get(n).get(t).delete(r)},e.prototype.getModifiedCallback=function(t,n,r){if(this.callbacks.has(n)&&this.callbacks.get(n).has(t)&&this.callbacks.get(n).get(t).has(r))return this.callbacks.get(n).get(t).get(r)[0]},e.prototype.getLayerCallbacks=function(t){if(this.callbacks.has(t))return this.callbacks.get(t)},e.prototype.getEventCallbacks=function(t,n){if(this.callbacks.has(n)&&(n=this.callbacks.get(n),n.has(t)))return n.get(t)},e}(),fv=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JO=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},tq=["maxzoomchanged","minzoomchanged","mapconfigurationchanged"],bNe=function(){function e(t){this.map=t,this.mapCallbackHandler=new _Ne(this.map)}return e.prototype.add=function(t,n,r){var o,i;if(typeof n=="function")this._addGlobalListener(t,n,!1,!1);else{n=Array.isArray(n)?n:[n];try{for(var l=fv(n),c=l.next();!c.done;c=l.next()){var f=c.value;f instanceof oa&&oa._isMBoxEvent(t)?this._addLayerListener(t,f,r,!1,!1):f._addEventListener(t,r,!1)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}},e.prototype.addOnce=function(t,n,r){typeof n=="function"?this._addGlobalListener(t,n,!1,!0):n instanceof oa&&oa._isMBoxEvent(t)?this._addLayerListener(t,n,r,!1,!0):n._addEventListener(t,r,!0)},e.prototype._addLegacy=function(t,n,r){typeof n=="function"?this._addGlobalListener(t,n,!0,!1):this._addLayerListener(t,n,r,!0,!1)},e.prototype._addLayerListener=function(t,g,r,o,i){var l,c,f,p,g=g instanceof oa?g.getId():g,v=this.map.layers.getLayerById(g),w=this.mapCallbackHandler.getModifiedCallback(t,g,r);if(w&&v)try{for(var C=fv(v._getLayerIds()),T=C.next();!T.done;T=C.next()){var k=T.value;this.map._getMap().off(t,k,w)}}catch(L){l={error:L}}finally{try{T&&!T.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}if(this.mapCallbackHandler.addCallback(t,g,r,o,i),v){w=this.mapCallbackHandler.getModifiedCallback(t,g,r);try{for(var P=fv(v._getLayerIds()),O=P.next();!O.done;O=P.next())k=O.value,this.map._getMap().on(t,k,w)}catch(L){f={error:L}}finally{try{O&&!O.done&&(p=P.return)&&p.call(P)}finally{if(f)throw f.error}}}},e.prototype._addGlobalListener=function(t,n,r,o){var i,l,c,f;tq.includes(t)?this.map._addEventListener(t,n,o):(i=this.mapCallbackHandler.getModifiedCallback(t,"",n),this.mapCallbackHandler.addCallback(t,"",n,r,o),l=this.mapCallbackHandler.getModifiedCallback(t,"",n),t==="load"&&this.map._isLoaded()?(c={type:"load",map:this.map},setTimeout(function(){return l(c)})):t==="ready"?this.map._isReady()&&(f={type:"ready",map:this.map},setTimeout(function(){return l(f)})):(i&&this.map._getMap().off(t,i),this.map._getMap().on(t,l)))},e.prototype.invoke=function(t,n,r){if(r===void 0)this._invokeListeners(t,"",n);else if(n instanceof oa&&oa._isMBoxEvent(t))this._invokeListeners(t,n.getId(),r);else{if(!(n instanceof Cm))throw new Error("The invoke target is invalid.");n._invokeEvent(t,r)}},e.prototype._invokeListeners=function(t,n,r){var o=this,i=new Hc(this.mapCallbackHandler.getEventCallbacks(t,n));i?i.forEach(function(l,c){l=JO(l,2),l[0],l[1]&&o._removeListener(t,n,c),c(r)}):t==="error"&&console.error("error"in r?r.error:r)},e.prototype.remove=function(t,n,r){var o,i;if(typeof n=="function")this._removeListener(t,"",n);else{n=Array.isArray(n)?n:[n];try{for(var l=fv(n),c=l.next();!c.done;c=l.next()){var f=c.value;f instanceof oa&&oa._isMBoxEvent(t)?this._removeListener(t,f,r):f!=null&&f._removeEventListener(t,r)}}catch(p){o={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}},e.prototype._removeLegacy=function(t,n,r){typeof n=="function"?this._removeListener(t,"",n):this._removeListener(t,n,r)},e.prototype._removeListener=function(t,n,r){var o,i;if(tq.includes(t))this.map._removeEventListener(t,r);else{var n=n instanceof oa?n.getId():n,l=this.mapCallbackHandler.getModifiedCallback(t,n,r);if(l)if(n){var c=this.map.layers.getLayerById(n);if(c)try{for(var f=fv(c._getLayerIds()),p=f.next();!p.done;p=f.next()){var g=p.value;this.map._getMap().off(t,g,l)}}catch(w){o={error:w}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}else this.map._getMap().off(t,l);this.mapCallbackHandler.removeCallback(t,n,r)}},e.prototype._enableLayerEvents=function(t){var n=this,r=this.mapCallbackHandler.getLayerCallbacks(t.getId());r&&r.forEach(function(o,i){o.forEach(function(l){var c,f,p=JO(l,1)[0];try{for(var g=fv(t._getLayerIds()),v=g.next();!v.done;v=g.next()){var w=v.value;n.map._getMap().on(i,w,p)}}catch(C){c={error:C}}finally{try{v&&!v.done&&(f=g.return)&&f.call(g)}finally{if(c)throw c.error}}})})},e.prototype._disableLayerEvents=function(t){var n=this,r=this.mapCallbackHandler.getLayerCallbacks(t.getId());r&&r.forEach(function(o,i){o.forEach(function(l){var c,f,p=JO(l,1)[0];try{for(var g=fv(t._getLayerIds()),v=g.next();!v.done;v=g.next()){var w=v.value;n.map._getMap().off(i,w,p)}}catch(C){c={error:C}}finally{try{v&&!v.done&&(f=g.return)&&f.call(g)}finally{if(c)throw c.error}}})})},e}(),nq=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},wNe=function(){function e(t){this.markers=new Set,this.map=t}return e.prototype.add=function(t,n){var r,o;if(Array.isArray(t))try{for(var i=nq(t),l=i.next();!l.done;l=i.next()){var c=l.value;this._addMarker(c,n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}else this._addMarker(t,n)},e.prototype._addMarker=function(t,n){t._addToMap(this.map,n),this.markers.add(t)},e.prototype.getMarkers=function(){return Array.from(this.markers)},e.prototype.remove=function(t){var n,r;if(Array.isArray(t))try{for(var o=nq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this._removeMarker(l)}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else this._removeMarker(t)},e.prototype._removeMarker=function(t){var n=this;t instanceof Lz?(t._removeFromMap(),this.markers.delete(t)):this.markers.forEach(function(r){r._getId()===t&&(r._removeFromMap(),n.markers.delete(r))})},e.prototype.clear=function(){var t=this;this.markers.forEach(function(n){n._removeFromMap(),t.markers.delete(n)})},e}(),xNe=function(){function e(t){this.userImages=new Hc,this.imageLoadTimeout=5e3,this.map=t}return e.prototype.add=function(t,n,r){var o=this;return new Promise(function(i,l){var c,f,p;o.userImages.has(t)?i():n instanceof HTMLImageElement||n instanceof ImageData?(o.map._getMap().addImage(t,n,r),o.userImages.set(t,{image:n,meta:r}),i()):typeof n=="string"&&(f=void 0,f=/<svg/i.test(n)&&!/^data:/i.test(n)?"data:image/svg+xml;base64,"+window.btoa(n):n,p=!1,o.map._sendRequest(f,"Image").then(function(g){return p?void 0:g.blob()}).then(function(g){var v;!p&&g&&(clearTimeout(c),(v=new Image).onload=function(){o.map._getMap().addImage(t,v,r),o.userImages.set(t,{image:v,meta:r}),i()},v.onerror=v.onabort=function(){l("Failed to load image into HTML element.")},v.src=URL.createObjectURL(g))}).catch(function(){p||(clearTimeout(c),l("Failed to load image into HTML element."))}),c=setTimeout(function(){p=!0,l("Failed to load image within specified timeout: ".concat(o.imageLoadTimeout," ms."))},o.imageLoadTimeout))})},e.prototype.clear=function(){var t=this;this.userImages.forEach(function(n,r){t.map._getMap().removeImage(r)}),this.userImages.clear()},e.prototype.getImageIds=function(){var t=[];return this.userImages.forEach(function(n,r){t.push(r)}),t},e.prototype.createFromTemplate=function(t,n,r,o,i){return r=r||"#1A73AA",o=o||"#fff",n=(n=bW(n,i)).replace(/{color}/g,r).replace(/{secondaryColor}/g,o).replace(/{text}/g,""),this.add(t,n)},e.prototype.hasImage=function(t){return this.userImages.has(t)},e.prototype.remove=function(t){this.map._getMap().removeImage(t),this.userImages.delete(t)},e.prototype._restoreImages=function(){var t=this;this.userImages.forEach(function(n,r){t.map._getMap().hasImage(r)||t.map._getMap().addImage(r,n.image,n.meta)})},e}(),CNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SNe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sg=function(e){function t(n,r){return r=e.call(this,r)||this,r.layers=n,r}return CNe(t,e),t.prototype.getOptions=function(){return{}},t.prototype.setOptions=function(n){},t.prototype._buildLayers=function(){return this.layers},t.prototype._getLayerIds=function(){return this.layers.map(function(n){return n.id})},t.prototype._getSourceIds=function(){var n,r,o=new Set;try{for(var i=SNe(this.layers),l=i.next();!l.done;l=i.next()){var c=l.value;"source"in c&&typeof c.source=="string"?o.add(c.source):"source"in c&&c.source&&o.add(c.id)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.prototype._updateLayoutProperty=function(n,r,o,i){var l;ku(r,o)||(l=this.map._getMap(),this.layers.forEach(function(c){l.getLayer(c.id)?l.setLayoutProperty(c.id,n,i||r):console.warn("Could not update layout property ".concat(n," for layer ").concat(c.id," to ").concat(i||r))}))},t}(oa),zp=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ENe=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},TNe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},INe=function(){function e(t){this.layerIndex=[],this.userLayers=[],this.map=t}return e.prototype.add=function(t,n){var r,o,i=n instanceof oa?n.getId():n;if(Array.isArray(t))try{for(var l=zp(t),c=l.next();!c.done;c=l.next()){var f=c.value;this._addLayer(f,i)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}else this._addLayer(t,i)},e.prototype._addLayer=function(t,n){if(!(this.map._isReady()||t instanceof Sg))throw new Error("The layer '".concat(t.getId(),"' could not be added to the map because ")+"the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a layer to it.");var r,o,i,l;n!==t.getId()&&this.layerIndex.find(function(c){return n===c.getId()})?this._getMapboxLayerExists(t)?(o=this.layerIndex.findIndex(function(c){return c.getId()===t.getId()}),i=this.userLayers.findIndex(function(c){return c.layer.getId()===t.getId()}),this._removeMapboxLayers(t),this._addMapboxLayers(t,n),(l=this.layerIndex[o])&&this.map.events._disableLayerEvents(l),this.map.events._enableLayerEvents(t),this.layerIndex.splice(o,1),r=this.layerIndex.findIndex(function(c){return c.getId()===n}),this.layerIndex.splice(r,0,t),t instanceof Sg||(this.userLayers[i]={layer:t,before:n}),l&&l.onRemove()):(this._addMapboxLayers(t,n),this.map.events._enableLayerEvents(t),r=this.layerIndex.findIndex(function(c){return c.getId()===n}),this.layerIndex.splice(r,0,t),t instanceof Sg||this.userLayers.push({layer:t,before:n})):(o=this.layerIndex.findIndex(function(c){return c.getId()===t.getId()}),i=this.userLayers.findIndex(function(c){return c.layer.getId()===t.getId()}),0<=o&&0<=i?(l=this.layerIndex[o],this._removeMapboxLayers(l),this._addMapboxLayers(t,o+1),this.map.events._disableLayerEvents(l),this.map.events._enableLayerEvents(t),(this.layerIndex[o]=t)instanceof Sg||(this.userLayers[i]={layer:t,before:void 0}),l.onRemove()):(this._addMapboxLayers(t),this.map.events._enableLayerEvents(t),this.layerIndex.push(t),t instanceof Sg||this.userLayers.push({layer:t,before:n}))),t.onAdd(this.map)},e.prototype._addMapboxLayers=function(t,n){var r,o;if(!(t instanceof kk)||t.getOptions().tileUrl){if(!(t instanceof Sg)){t instanceof M1&&(this.map._getMap().addSource(t._getSourceId(),t._buildSource()),this.map.sources.setSourceState(t._getSourceWrapper()));var i=this._getMapboxBefore(n);try{for(var l=zp(t._buildLayers()),c=l.next();!c.done;c=l.next()){var f=c.value;this.map._getMap().addLayer(f,i)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}}this.map.events._enableLayerEvents(t)}},e.prototype._removeMapboxLayers=function(t,n){var r,o;if(t instanceof Sg&&!n)this.map.events._disableLayerEvents(t);else{try{for(var i=zp(t._getLayerIds()),l=i.next();!l.done;l=i.next()){var c=l.value;this.map._getMap().getLayer(c)&&this.map._getMap().removeLayer(c)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}this.map.events._disableLayerEvents(t),t instanceof M1&&this.map._getMap().getSource(t._getSourceId())&&this.map._getMap().removeSource(t._getSourceId())}},e.prototype._getMapboxLayerExists=function(t){var n=this,r=!1;return typeof t=="string"?!!(t=this.layerIndex.find(function(o){return o.getId()===t})):(t._getLayerIds().forEach(function(o){n.map._getMap().getLayer(o)&&(r=!0)}),r)},e.prototype._getMapboxBefore=function(t){var n,r,o,i;if(typeof t=="string"){var l=this.layerIndex.find(function(C){return C.getId()===t});if(!l)return;try{for(var c=zp(l._getLayerIds()),f=c.next();!f.done;f=c.next()){var p=f.value;if(this.map._getMap().getLayer(p))return p}}catch(C){n={error:C}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}t=this.layerIndex.findIndex(function(C){return C.getId()===t})+1}for(var g=t;g<this.layerIndex.length;g++)try{o=void 0;for(var v=zp(this.layerIndex[g]._getLayerIds()),w=v.next();!w.done;w=v.next())if(p=w.value,this.map._getMap().getLayer(p))return p}catch(C){o={error:C}}finally{try{w&&!w.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}},e.prototype.clear=function(){for(var t=this.layerIndex.length-1;0<=t;t--){var n=this.layerIndex[t];n&&(this._removeMapboxLayers(n,!0),this.layerIndex.splice(t,1),n.onRemove())}this.userLayers=[]},e.prototype.getLayerById=function(t){var n=this.layerIndex.find(function(r){return r.getId()===t});if(n)return n},e.prototype.getLayers=function(){return this.layerIndex.slice(0)},e.prototype._getSourceIds=function(){var t,n,r=new Set;try{for(var o=zp(this.layerIndex),i=o.next();!i.done;i=o.next())i.value._getSourceIds().forEach(function(l){return r.add(l)})}catch(l){t={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},e.prototype._getUserLayers=function(){return Array.from(this.userLayers)},e.prototype.move=function(t,n){var r=t instanceof oa?t.getId():t,o=n instanceof oa?n.getId():n;if(!this.layerIndex.find(function(i){return i.getId()===r}))throw new Error("The layer '".concat(r,"' has not been added to the map and cannot be moved."));n=this.layerIndex.findIndex(function(i){return i.getId()===r}),this._moveMapboxLayers(this.layerIndex[n],o),t=this.layerIndex[n],this.layerIndex.splice(n,1),n=this.layerIndex.findIndex(function(i){return i.getId()===o}),-1<n?this.layerIndex.splice(n,0,t):this.layerIndex.push(t),n=this.userLayers.find(function(i){return i.layer.getId()===r}),n&&(n.before=o)},e.prototype._moveMapboxLayers=function(t,n){var r,o,i=this._getMapboxBefore(n);try{for(var l=zp(t._getLayerIds()),c=l.next();!c.done;c=l.next()){var f=c.value;this.map._getMap().moveLayer(f,i)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}},e.prototype.getRenderedShapes=function(t,n,r){var o,i,l,c=this;if(t=t||[-180,-85.0511,180,85.0511],Array.isArray(t)?t.length===4||t.length===6?l=this.map.positionsToPixels([so.getSouthWest(t),so.getNorthEast(t)]):t.length!==2&&t.length!==3||(l=this.map.positionsToPixels([t])[0]):l=this.map.positionsToPixels([t.coordinates])[0],n){n=Array.isArray(n)?n:[n];var f=[],p=this;try{for(var g=zp(n),v=g.next();!v.done;v=g.next())(function(T){var C=T instanceof oa?T.getId():T,T=p.layerIndex.findIndex(function(k){return k.getId()===C});if(!(-1<T))throw new Error("The layer '".concat(C,"' has not been added to the map ")+"and its rendered features cannot be retrieved.");f.push.apply(f,TNe([],ENe(p.layerIndex[T]._getLayerIds().filter(function(k){return!!c.map._getMap().getLayer(k)})),!1))})(v.value)}catch(w){o={error:w}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}}return t=this.map._getMap().queryRenderedFeatures(l,{layers:f,filter:r}),this.map.sources._mapFeaturesToShapes(t)},e.prototype.remove=function(t){var n,r;if(Array.isArray(t))try{for(var o=zp(t),i=o.next();!i.done;i=o.next()){var l=i.value;this._removeLayer(l)}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}else this._removeLayer(t)},e.prototype._removeLayer=function(t){var n=t instanceof oa?t.getId():t,o=this.layerIndex.findIndex(function(i){return i.getId()===n});if(o==-1)throw new Error("The layer '".concat(n,"' has not been added to the map and cannot be removed."));var r=this.layerIndex[o],o=(this._removeMapboxLayers(r),this.layerIndex.splice(o,1),this.userLayers.findIndex(function(i){return i.layer.getId()===n}));o!=-1&&this.userLayers.splice(o,1),t instanceof M1&&this.map.sources.unsetSourceState(t._getSourceId()),r.onRemove()},e}(),rq=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},kNe=function(){function e(t){var n=this;this._onDrag=function(r){var o,i;r.type==="mousemove"?(o=r.clientX,i=r.clientY):r.type==="touchmove"&&(o=r.touches[0].clientX,i=r.touches[0].clientY),n.draggedPopups.forEach(function(l){l._dragToPixel([o,i])})},this._onUp=function(){n.map.getMapContainer().removeEventListener("mousemove",n._onDrag),n.map.getMapContainer().removeEventListener("touchmove",n._onDrag),n.map.getMapContainer().removeEventListener("mouseup",n._onUp),n.map.getMapContainer().removeEventListener("touchend",n._onUp),n.draggedPopups.forEach(function(r){n.draggedPopups.delete(r),r._onUp()})},this.map=t,this.popups=new Set,this.draggedPopups=new Set}return e.prototype.add=function(t){var n,r;t=Array.isArray(t)?t:[t];try{for(var o=rq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this.popups.has(l)||(this.popups.add(l),l.attach(this.map))}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.clear=function(){var t=this;this.popups.forEach(function(n){t.popups.delete(n),n.remove()})},e.prototype.remove=function(t){var n,r;t=Array.isArray(t)?t:[t];try{for(var o=rq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this.popups.has(l)&&(this.popups.delete(l),l.remove())}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getPopups=function(){return Array.from(this.popups)},e.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector(".".concat(e.Css.collection));return t||((t=document.createElement("div")).classList.add(e.Css.collection),t.setAttribute("aria-label","Map Information"),this.map.getMapContainer().appendChild(t)),t},e.prototype._addDraggedPopup=function(t){this.draggedPopups.size===0&&(this.map.getMapContainer().addEventListener("mousemove",this._onDrag),this.map.getMapContainer().addEventListener("touchmove",this._onDrag),this.map.getMapContainer().addEventListener("mouseup",this._onUp),this.map.getMapContainer().addEventListener("touchend",this._onUp)),this.draggedPopups.add(t)},e.Css={collection:"popup-collection-container"},e}(),eD=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},PNe=function(){function e(t){this.map=t,this.sources=new Hc}return e.prototype.add=function(t,n){var r,o;if(n===void 0&&(n=!0),Array.isArray(t))try{for(var i=eD(t),l=i.next();!l.done;l=i.next()){var c=l.value;this._addSource(c,n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}else this._addSource(t,n)},e.prototype.getRenderedShapes=function(t,n,r){return t=typeof t=="string"?t:t.getId(),r=this.map._getMap().querySourceFeatures(t,{sourceLayer:r,filter:n}),this.map.sources._mapFeaturesToShapes(r,!0,this.sources.get(t))},e.prototype.getFeatureState=function(t,n,r){return t=typeof t=="string"?t:t instanceof ia?t.getId():t.id,n=typeof n=="string"?n:n.getId(),this.map._getMap().getFeatureState({id:t,source:n,sourceLayer:r})},e.prototype.removeFeatureState=function(t,n,r,o){t=typeof t=="string"?t:t instanceof ia?t.getId():t.id,n=typeof n=="string"?n:n.getId(),this.map._getMap().removeFeatureState({id:t,source:n,sourceLayer:r},o)},e.prototype.setFeatureState=function(t,n,r,o){t=typeof t=="string"?t:t instanceof ia?t.getId():t.id,n=typeof n=="string"?n:n.getId(),this.map._getMap().setFeatureState({id:t,source:n,sourceLayer:o},r)},e.prototype._buildSources=function(){var t={};return this.sources.forEach(function(n){t[n.getId()]=n._buildSource()}),t},e.prototype.clear=function(){var t=this;this.sources.forEach(function(n){t.remove(n)})},e.prototype.getById=function(t){return this.sources.get(t)},e.prototype.getSources=function(){return Array.from(this.sources.values())},e.prototype.isSourceLoaded=function(t){return t=t instanceof Xi?t.getId():t,this.map._getMap().isSourceLoaded(t)},e.prototype.remove=function(t,n){var r,o;if(n===void 0&&(n=!0),Array.isArray(t))try{for(var i=eD(t),l=i.next();!l.done;l=i.next()){var c=l.value;this._removeSource(c,n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}else this._removeSource(t,n)},e.prototype.setSourceState=function(t,n){n===void 0&&(n=!0),this.sources.set(t.getId(),t),t._setMap(this.map,n)},e.prototype.unsetSourceState=function(t){this.sources.has(t)&&(this.sources.get(t)._setMap(null),this.sources.delete(t))},e.prototype._removeSource=function(t,n){if(t=t instanceof Xi?t.getId():t,!this.sources.has(t))throw new Error("'".concat(t,"' is not added to the map"));if(this.map._getMap().getSource(t)&&n&&this.map._getMap().removeSource(t),this.map._getMap().getSource(t)&&n)throw new Error("One or more layers have a dependency on the source '".concat(t,"'"));this.unsetSourceState(t)},e.prototype._addSource=function(t,n){if(this.sources.has(t.getId())){if(n)throw new Error("'".concat(t.getId(),"' is already added to the map"));this.unsetSourceState(t.getId())}if(n){if(!this.map._isReady())throw new Error("The source '".concat(t.getId(),"' could not be added to the map because ")+"the map is not ready. Please use a ready event listener to guarantee the map is ready before adding a source to it.");this.map._getMap().addSource(t.getId(),t._buildSource())}this.setSourceState(t)},e.prototype._mapFeaturesToShapes=function(t,n,r){var o,i,l=[];try{for(var c=eD(t),f=c.next();!f.done;f=c.next()){var p=f.value;if((r||typeof p.source=="string")&&typeof p.properties[ia._shapeIdPropName]=="string"){var g=r||this.sources.get(p.source);if(g instanceof zc){var v=g.getShapeById(p.properties[ia._shapeIdPropName]);if(v instanceof ia){l.push(v);continue}}}n||l.push(p)}}catch(w){o={error:w}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return l},e.prototype._syncSources=function(t){var n=this;t?(Object.keys(t).map(function(r){var o,i=t[r];switch(i.type){case"vector":case"raster":case"raster-dem":o=new O7(r,{name:r,tiles:i.tiles,type:i.type,url:i.url,tileSize:"tileSize"in i?i.tileSize:void 0});break;case"canvas":o=new I7(r,i);break;case"geojson":var l=new zc(r,{maxZoom:i.maxzoom,cluster:i.cluster,clusterRadius:i.clusterRadius,tolerance:i.tolerance,lineMetrics:i.lineMetrics,clusterProperties:i.clusterProperties,buffer:i.buffer,clusterMinPoints:i.clusterMinPoints,generateId:i.generateId,promoteId:i.promoteId,filter:i.filter});typeof i.data!="string"&&i.data!==void 0&&l._addNoUpdate(i.data),o=l;break;case"image":o=new Dz(r,i);break;case"video":o=new P7(r,i);break;default:o=new k7(r,i)}return o}).forEach(function(r){var o=n.sources.get(r.getId()),i=o&&r._isDeepEqual(o);!i&&o&&n.unsetSourceState(o.getId()),n.setSourceState(r,!i)}),Array.from(this.sources.keys()).filter(function(r){return!(r in t)}).forEach(function(r){return n.unsetSourceState(r)})):console.warn("syncSources called with no style sources which is unexpected.")},e}(),ANe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.duration=1e3,n.type="jump",n}return ANe(t,e),t}(Hi),RNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ONe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.bottom=0,n.left=0,n.right=0,n.top=0,n}return RNe(t,e),t}(Hi),DNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LNe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},NNe=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},FNe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},zNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.bounds=[-180,-89,180,90],n.maxBounds=void 0,n.maxZoom=20,n.offset=new Tl(0,0),n.padding=new ONe,n}return DNe(t,e),t.prototype.merge=function(){for(var n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];try{for(var l=LNe(o),c=l.next();!c.done;c=l.next()){var f=c.value;f&&typeof f.padding=="number"&&(f.padding={top:f.padding,bottom:f.padding,left:f.padding,right:f.padding})}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return e.prototype.merge.apply(this,FNe([],NNe(o),!1))},t}(Hi),BNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),UNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.zoom=1,n.center=new Sl(0,0),n.centerOffset=new Tl(0,0),n.bearing=0,n.pitch=0,n.minZoom=1,n.maxZoom=20,n.minPitch=0,n.maxPitch=60,n.maxBounds=void 0,n}return BNe(t,e),t}(Hi),jNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xE=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.name=void 0,n.before=void 0,n.minZoom=1,n.maxZoom=20,n.overwrite=!1,n.opacity=1,n}return jNe(t,e),t}(Hi),$Ne=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),HNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.color="rgba(0,0,0,.5)",n.outlineColor="#000",n.radius=1,n.outlineWidth=5,n.name="default-circles",n}return $Ne(t,e),t}(xE),VNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.cap="butt",n.join="miter",n.name="default-linestrings",n.color="#000",n.width=1,n}return VNe(t,e),t}(xE),GNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),WNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.iconSize=1,n.fontSize=14,n.fontColor="#000",n.textFont="SegoeUi-Regular",n.cluster=!0,n.clusterIcon=void 0,n.textOffset=[0,0],n.name="default-pins",n.icon="pin-darkblue",n.title="",n}return GNe(t,e),t}(xE),KNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.color="rgba(0,0,0,.5)",n.outlineColor="#000",n.name="default-polygons",n}return KNe(t,e),t}(xE),ZNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.name="default-raster",n}return ZNe(t,e),t}(xE),QNe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),JNe=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.anchor="map",n.color="#FFFFFF",n.intensity=.5,n.position=[1.15,210,30],n}return QNe(t,e),t}(Hi),eFe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tFe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nFe=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},rFe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},oq=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.antialias=void 0,n.autoResize=!0,n.language=sW(),n.light=new JNe,n.preserveDrawingBuffer=!1,n.progressiveLoading=!1,n.progressiveLoadingInitialLayerGroups=["base"],n.renderWorldCopies=!0,n.showBuildingModels=!1,n.showFeedbackLink=!0,n.showLogo=!0,n.showLabels=!0,n.customAttribution=void 0,n.showTileBoundaries=!1,n.style=void 0,n.view=cW(),n.userRegion=n.view,n.customStyleTransform=void 0,n}return eFe(t,e),t.prototype.merge=function(){for(var n,r,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];try{for(var l=tFe(o),c=l.next();!c.done;c=l.next()){var f=c.value;f&&(f.hasOwnProperty("view")?f.userRegion=f.view:f.hasOwnProperty("userRegion")&&(f.view=f.userRegion),typeof f.language=="string")&&(f.language=xk.getCode(f.language))}}catch(p){n={error:p}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return e.prototype.merge.apply(this,rFe([],nFe(o),!1))},t}(Hi),oFe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FS=window&&window.__assign||function(){return(FS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},iFe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JC=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},e1=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},tD=function(e){return e.length==0?void 0:e.slice(1).reduce(function(t,n){return function(r,o){return r=t(r,o),FS(FS({},r),n(r.url,o))}},e[0])},nD=function(e){function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.authOptions=eW(),n.disableTelemetry=Ck()==="atlas.azure.us",n["disable-telemetry"]=n.disableTelemetry,n.domain=Ck(),n.staticAssetsDomain=tW(),n.styleDefinitionsPath=nW(),n.styleDefinitionsVersion=rW(),n.styleAPIVersion=oW(),n.mapConfiguration=void 0,n.styleSet=void 0,n.enableAccessibility=!0,n["enable-accessibility"]=n.enableAccessibility,n.enableAccessibilityLocationFallback=!0,n.maxParallelImageRequests=aW(),n.refreshExpiredTiles=!0,n.subscriptionKey=uW(),n["subscription-key"]=n.subscriptionKey,n.sessionId=lW(),n["session-id"]=n.sessionId,n._transformers=[],n.transformRequest=void 0,n.workerCount=iW(),n.fadeDuration=300,n.localIdeographFontFamily="sans-serif",n.validateStyle=!1,n}return oFe(t,e),t.prototype.merge=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this.styleDefinitionsVersion;try{for(var i=iFe(n),l=i.next();!l.done;l=i.next()){var c=l.value;c&&(c.authOptions?typeof c.authOptions.subscriptionKey=="string"&&(c.subscriptionKey=c["subscription-key"]=c.authOptions.subscriptionKey):typeof c.subscriptionKey=="string"?(c["subscription-key"]=c.subscriptionKey,c.authOptions={authType:Ai.subscriptionKey,subscriptionKey:c.subscriptionKey}):typeof c["subscription-key"]=="string"&&(c.subscriptionKey=c["subscription-key"],c.authOptions={authType:Ai.subscriptionKey,subscriptionKey:c["subscription-key"]}),typeof c.sessionId=="string"?c["session-id"]=c.sessionId:typeof c["session-id"]=="string"&&(c.sessionId=c["session-id"]),typeof c.disableTelemetry=="boolean"?c["disable-telemetry"]=c.disableTelemetry:typeof c["disable-telemetry"]=="boolean"&&(c.disableTelemetry=c["disable-telemetry"]),typeof c.enableAccessibility=="boolean"?c["enable-accessibility"]=c.enableAccessibility:typeof c["enable-accessibility"]=="boolean"&&(c.enableAccessibility=c["enable-accessibility"]))}}catch(w){p={error:w}}finally{try{l&&!l.done&&(g=i.return)&&g.call(i)}finally{if(p)throw p.error}}var f=this._transformers,g=n?n.filter(function(w){return w!==void 0}).reduce(function(w,C){return e1(e1([],JC(w),!1),JC(C._transformers||[]),!1)},[]):[],p=e.prototype.merge.apply(this,e1([],JC(n),!1)),g=(p.authOptions.authType!==Ai.subscriptionKey&&(p["subscription-key"]=p.subscriptionKey=void 0),p.styleSet!==void 0&&p.mapConfiguration===void 0&&(p.mapConfiguration=p.styleSet),p.mapConfiguration&&typeof p.mapConfiguration!="string"&&(p.mapConfiguration=FS(FS({},p.mapConfiguration),{defaultConfiguration:p.mapConfiguration.defaultConfiguration||p.mapConfiguration.defaultStyle,configurations:p.mapConfiguration.configurations||p.mapConfiguration.styles})),this._transformers=e1(e1([],JC(f||[]),!1),JC(g.filter(function(w){return!f.includes(w)})),!1),this.transformRequest&&!this._transformers.includes(this.transformRequest)&&this._transformers.push(this.transformRequest),new Date(Date.UTC(2023,0))),v=new Date(this.styleDefinitionsVersion);return(isNaN(v.getTime())||v.getTime()<g.getTime())&&(console.warn("Style definition version ".concat(this.styleDefinitionsVersion," is invalid or deprecated, style definition version is unchanged (").concat(o,")")),this.styleDefinitionsVersion=o),this.transformRequest=tD(this._transformers),p},t.prototype.addTransformer=function(n){this._transformers||(this._transformers=[]),this._transformers.push(n),this.transformRequest=tD(this._transformers)},t.prototype.removeTransformer=function(n){this._transformers&&(this._transformers=this._transformers.filter(function(r){return n!==r}),this.transformRequest=tD(this._transformers))},t._cloneCustomizer=function(n){if(typeof n=="object")return Object.assign({},n)},t}(Hi),aFe=function(){function e(){}return e.getLayerGroup=function(t){return typeof t!="string"&&t.metadata&&t.metadata["microsoft.maps:layerGroup"]?t.metadata["microsoft.maps:layerGroup"]:(t=typeof t!="string"?t.id:t).startsWith("microsoft.")&&4<=(t=t.split(".")).length?t[3]:void 0},e}(),rI=function(){function e(t){var n=this;this.isHijacked=function(){return n._hijackedToResolve!==void 0||n._hijackedToReject!==void 0},this.isResolved=function(){return n._hijackedToResolve!==void 0||n._toResolve!==void 0},this.isRejected=function(){return n._hijackedToReject!==void 0||n._toReject!==void 0},this.resultIfResolved=function(){return n._hijackedToResolve||n._toResolve},this.errorIfRejected=function(){return n._hijackedToReject||n._toReject},this._thenResolver=function(r,o){var i;n._hijackedToResolve?r(n._hijackedToResolve):n._hijackedToReject?o(n._hijackedToReject):(i=n.origin,n.origin.then(function(l){n.isHijacked()||(i!==n.origin?n._thenResolver(r,o):(n._toResolve=l,r(l)))}).catch(function(l){n.isHijacked()||(i!==n.origin?n._thenResolver(r,o):(n._toReject=l,o(l)))}))},this.origin=t,this[Symbol.toStringTag]=this.origin[Symbol.toStringTag]}return e.resolve=function(t){return new e(Promise.resolve(t))},e.reject=function(t){return new e(Promise.reject(t))},e.prototype.then=function(t,n){var r=this;return new Promise(function(o,i){r._resolve=o,r._reject=i,r._thenResolver(o,i)}).then(t,n)},e.prototype.catch=function(t){var n=this;return new Promise(function(r,o){n._resolve=r,n._reject=o,n._thenResolver(r,o)}).catch(t)},e.prototype.finally=function(t){var n=this;return new Promise(function(r,o){n._resolve=r,n._reject=o,n._thenResolver(r,o)}).finally(t)},e.prototype.hijackAndResolve=function(t){this._hijackedToResolve=t,this._resolve&&this._resolve(t)},e.prototype.hijackAndReject=function(t){this._hijackedToReject=t,this._reject&&this._reject(t)},e.prototype.switchWith=function(t){this.origin=t,this._toResolve=void 0,this._toReject=void 0},e}(),iq={road:"Road",satellite:"Satellite",satellite_road_labels:"Hybrid",grayscale_dark:"Grayscale (Dark)",grayscale_light:"Grayscale (Light)",night:"Night",road_shaded_relief:"Terra",blank:"Blank",blank_accessible:"Blank (Accessible)",high_contrast_dark:"High contrast (Dark)",high_contrast_light:"High contrast (Light)"},yh=window&&window.__assign||function(){return(yh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},rD=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},oD=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},rw=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},iD=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},sFe=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},lFe=function(){function e(t,n){var r=this;this.definitions=function(){var o=r.initPromise||r.initStyleset();return o},this.indoorState=void 0,this.preservedPreindoorMapConfiguration=void 0,this._progressiveLoadingState={mapStyle:void 0,pendingVisibilityChange:void 0},this._deferLayerGroupVisibilities=function(o,i){var l,c,f,p,g=i.filter(function(v){return v in o});g.length!==0&&(l=r.map._getMap(),c=l.getZoom(),f=r.map.getStyle().style,r._progressiveLoadingState.pendingVisibilityChange&&(r.map.events.remove("load",r._progressiveLoadingState.pendingVisibilityChange),r._progressiveLoadingState.pendingVisibilityChange=null),r._progressiveLoadingState.mapStyle=f,(p=Object.entries(o).reduce(function(v,T){var T=rw(T,2),C=T[0],T=T[1],k=g.includes(C);return iD(iD([],rw(v),!1),rw(T.filter(function(P){if(P.type==="custom")return!1;if(k){if(typeof P.maxzoom=="number"&&typeof P.minzoom=="number"){if(c<=P.maxzoom&&c>=P.minzoom)return!1}else if(typeof P.minzoom=="number"){if(c>=P.minzoom)return!1}else if(typeof P.maxzoom!="number"||c<=P.maxzoom)return!1}return((P=P.layout)==null?void 0:P.visibility)!=="none"})),!1)},[])).forEach(function(v){v.layout=v.layout||{},v.layout.visibility="none"}),r._progressiveLoadingState.pendingVisibilityChange=function(){r._progressiveLoadingState.pendingVisibilityChange=null;var v=r.map.getStyle().style;f===v&&(p.forEach(function(w){w.layout.visibility="visible",l.setLayoutProperty(w.id,"visibility","visible")}),(v=r.map.copyrightDelegate)!=null)&&v.reloadAttribution()},r.map.events.addOnce("load",r._progressiveLoadingState.pendingVisibilityChange))},this._onStyleData=function(o){r.map.events.invoke("stylechanged",{style:o.name,map:r.map,type:"stylechanged"})},this._lookUp=function(o){var i,l,p=r.definitions(),c=p.errorIfRejected(),f=p.resultIfResolved();if(c||!f)return null;var p=f.configurations,g=void 0;try{for(var v=sFe(p),w=v.next();!w.done;w=v.next()){var C=w.value;if(C.name===o.style)return C;C.name===f.defaultConfiguration&&(g=g||C)}}catch(T){i={error:T}}finally{try{w&&!w.done&&(l=v.return)&&l.call(v)}finally{if(i)throw i.error}}return g=g||p[0]},this._lookUpAsync=function(o){return rD(r,void 0,void 0,function(){var i;return oD(this,function(l){switch(l.label){case 0:return[4,this.definitions()];case 1:return i=l.sent(),[2,i.configurations.find(function(c){return c.name===(o.style||i.defaultConfiguration)})||i.configurations.find(function(c){return c.name===i.defaultConfiguration})||i.configurations[0]]}})})},this.map=t,this.serviceOptions=n}return e.prototype.updateIndoorState=function(t,n){var r,o,i=this,l=this.map.styles.getMapConfiguration();l?(this.preservedPreindoorMapConfiguration=l,r=this.map.getStyle().style?"".concat(this.map.getStyle().style,"_indoor").concat(t==="dark"?"_dark":"","_tileset_").concat(n):void 0,this.map.styles.setMapConfiguration("defaultIndoor_".concat(n),l==="microsoft-maps:default"?r:void 0)):(o=((l=this.indoorState)==null?void 0:l.tilesetId)!==n,this.indoorState={tilesetId:n,theme:t},this.initStyleset(),this.definitions().then(function(c){var p=(i.map.getStyle().style||c.defaultConfiguration).replace("_indoor_dark","").replace("_indoor",""),f="".concat(p,"_indoor"),p=c.configurations.find(function(g){return g.name.startsWith(f)});p&&i.map.setStyle({style:p.name},!o)}))},e.prototype.unsetIndoorState=function(){var t=this,n=this.preservedPreindoorMapConfiguration;n?this.map.styles.setMapConfiguration(n):(this.indoorState=void 0,this.initStyleset(),this.definitions().then(function(r){var o=t.map.getStyle().style;o.includes("_indoor")&&o.split("_indoor")[0]?t.map.setStyle({style:o.split("_indoor")[0]}):t.map.setStyle({style:void 0})}))},e.prototype.initStyleset=function(){var t,n=this;return t=this.serviceOptions.mapConfiguration?typeof this.serviceOptions.mapConfiguration=="string"?(t=this.map.authentication?this.map.authentication.initialize():Promise.resolve(),new rI(t.then(function(){return n._request(n.serviceOptions.domain,"".concat(Pr.styleResourcePath,"/mapconfigurations/metadata/").concat(n.serviceOptions.mapConfiguration),"StyleDefinitions").then(function(r){return yh(yh({},r),{defaultConfiguration:r.defaultConfiguration||r.defaultStyle,configurations:r.configurations||r.styles})})}))):rI.resolve(this.serviceOptions.mapConfiguration):(t=this.map.authentication?this.map.authentication.initialize():Promise.resolve(),new rI(t.then(function(){return n._request(n.serviceOptions.staticAssetsDomain,"".concat(Pr.stylePath,"/").concat(Pr.styleResourcePath),"StyleDefinitions",{version:n.serviceOptions.styleDefinitionsVersion,mcv:Rg.replace(/\./g,"")}).then(function(r){return{version:isNaN(r.version)?0:parseFloat(r.version),defaultConfiguration:r.defaultStyle,configurations:r.styles.filter(function(o){return n.indoorState?n.indoorState.theme==="auto"?o.name.endsWith(o.theme==="dark"?"_indoor_dark":"_indoor"):o.name.endsWith(n.indoorState.theme==="dark"?"_indoor_dark":"_indoor"):!o.name.includes("indoor")}).map(function(o){return{copyright:o.copyright.join(" "),name:o.name,displayName:function(i){return i=n.indoorState&&i.includes("_indoor")?i.split("_indoor")[0]:i,i in iq?iq[i]:i}(o.name),theme:o.theme,thumbnail:new Af({domain:n.serviceOptions.staticAssetsDomain,path:o.thumbnail,protocol:"https"}).toString(),url:new Af({domain:n.serviceOptions.staticAssetsDomain,path:"".concat(Pr.stylePath,"/").concat(Pr.styleResourcePath,"/").concat(o.name),queryParams:{styleVersion:r.version!==void 0&&r.version!==null?r.version:n.serviceOptions.styleDefinitionsVersion,mcv:Rg.replace(/\./g,"")},protocol:"https"}).toString()}})}})}))),this.initPromise&&this.initPromise.switchWith(t),this.initPromise=t,this.initPromise.then(function(r){return n.map._invokeEvent("mapconfigurationchanged",r)}),this.initPromise},e.prototype.getStyle=function(t){if(t=this._lookUp(t),!t)throw Error("Style definition is not available.");if(t.url)return t.url;if(t.style)return t.style;throw Error("Style definition neither contains URL nor style object.")},e.prototype.deriveNewStyleAndLayerGroups=function(t,n){for(var r,o,i=this.map.getStyle(),l=this.map.getTraffic(),c={},f=0;f<n.layers.length;f++){var p=n.layers[f],g=aFe.getLayerGroup(p);g?(c[g]||(c[g]=[]),c[g].push(p),i.showBuildingModels||p.type!=="fill-extrusion"?p.type==="fill-extrusion"&&(p.layout=(r=p.layout)!=null?r:{},p.layout.visibility="visible"):(p.layout=(r=p.layout)!=null?r:{},p.layout.visibility="none"),l.flow!=="none"&&g&&g==="traffic_".concat(l.flow)&&p.type=="line"&&(p.layout=(o=p.layout)!=null?o:{},p.layout.visibility="visible"),g!=="labels"&&g!=="labels_places"&&g!=="labels_indoor"||p.type!=="symbol"||(i.showLabels&&((o=p.layout)==null?void 0:o.visibility)!=="none"?(p.layout=(g=p.layout)!=null?g:{},p.layout.visibility="visible"):(p.layout=(g=p.layout)!=null?g:{},p.layout.visibility="none"))):c[p.id]=[p]}return[n,c]},e.prototype.injectUserLayersIntoStyle=function(t,n,r){return t?this.map.layers._getUserLayers().reduce(function(o,i){var l,c,f,p;return i.layer instanceof D7||(l=((c=(c=r==null?void 0:r[i.before])==null?void 0:c[0])==null?void 0:c.id)||i.before,c=t.layers.find(function(g){return g.id===i.layer.getId()}),-1<(f=n.layers.findIndex(function(g){return g.id===i.layer.getId()}))&&n.layers.splice(f,1),c&&(f=new Set(Array.from(i.layer._getSourceIds()).map(function(g){var v;return!o.sources[g]&&(v=t.sources[g])?{source:v,id:g}:void 0}).filter(function(g){return g!==void 0})),-1<(p=l?o.layers.findIndex(function(g){return g.id===l}):-1)?o.layers.splice(p,0,c):o.layers.push(c),f.forEach(function(w){var v=w.source,w=w.id;o.sources[w]=v}))),o},yh({},n)):n},e.prototype.setStyle=function(t,n){var r=this,o=(n===void 0&&(n=!0),this._lookUp(t));if(!o)throw Error("Style definition ".concat(t.style," is not available."));if(!o.url&&!o.style)throw Error("Style definition neither contains URL nor style object.");var i=function(){return r._onStyleData(o)},l=function(){r.map.events.remove("styledata",i),r.map.events.addOnce("styledata",i)},c=t&&t.customStyleTransform?function(f,p){return f=t.customStyleTransform(f,p),l(),f}:function(w,g){var C=yh(yh({},g),{layers:iD([],rw(g.layers),!1),sources:yh({},g.sources)}),v=t.progressiveLoading&&!r.map._isLoaded(),g=(v&&Array.isArray(g==null?void 0:g.layers)&&((C=yh({},g)).layers=C.layers.map(function(T){var k=yh({},T);return T.layout&&(k.layout=yh({},T.layout)),k})),rw(r.deriveNewStyleAndLayerGroups(w,C),2)),C=g[0],g=g[1],v=(v&&(v=t.progressiveLoadingInitialLayerGroups,Array.isArray(v))&&0<v.length&&r._deferLayerGroupVisibilities(g,v),r.injectUserLayersIntoStyle(w,C,g)),w=Object.entries(g).map(function(P){var P=rw(P,2),k=P[0],P=P[1];return r._buildFundamentalLayerFrom(P,k)}),C=r.map.layers._getUserLayers().reduce(function(T,k){var P=k.before?T.findIndex(function(O){return O.getId()===k.before}):-1;return-1<P?T.splice(P,0,k.layer):T.push(k.layer),T},w);return r.map.layers.layerIndex=C,r.map.sources._syncSources(v.sources),l(),v};this.map._getMap().setStyle(o.url||o.style,{diff:n,validate:this.serviceOptions.validateStyle,transformStyle:c})},e.prototype.getTheme=function(t){if(t=this._lookUp(t),t)return t.theme.toLowerCase()},e.prototype.getThemeAsync=function(t){return rD(this,void 0,void 0,function(){return oD(this,function(n){switch(n.label){case 0:return[4,this._lookUpAsync(t)];case 1:return[2,n.sent().theme]}})})},e.prototype.setMapConfiguration=function(t,n){var r=this;typeof(this.serviceOptions.mapConfiguration=t)=="string"?this.initStyleset():this.initPromise?this.initPromise.hijackAndResolve(t):this.initPromise=rI.resolve(t),this.definitions().then(function(o){var i=o.defaultConfiguration;o.configurations.find(function(l){return l.name===n})&&(i=n),r.map.setStyle({style:i})})},e.prototype.getMapConfiguration=function(){return this.serviceOptions.mapConfiguration},e.prototype.setStyleSet=function(t){this.updateIndoorState(t==="indoor_dark"?"dark":"light",null)},e.prototype.getStyleSet=function(){return this.indoorState!==void 0?this.indoorState.theme==="dark"?"indoor_dark":"indoor":"base"},e.prototype.clearStyleSet=function(){this.unsetIndoorState()},e.prototype._buildFundamentalLayerFrom=function(t,n){if(t&&0<t.length)return(t=new Sg(t,n)).onAdd(this.map),t;throw new Error("Unable to construct fundamental map layer for ID: ".concat(n,"."))},e.prototype._transformStyleRequest=function(t,n){t.includes(Pr.domainPlaceHolder)&&(n.url=n.url.replace(Pr.domainPlaceHolder,this.serviceOptions.domain)),t.includes(Pr.stylePathHolder)&&(n.url=n.url.replace(Pr.stylePathHolder,Pr.stylePath)),t.includes(Pr.styleResourcePlaceholder)&&(n.url=n.url.replace(Pr.styleResourcePlaceholder,Pr.styleResourcePath)),(n.url.toLocaleLowerCase().includes(this.serviceOptions.domain.toLocaleLowerCase())||n.url.toLocaleLowerCase().includes(this.serviceOptions.staticAssetsDomain.toLocaleLowerCase()))&&((t=new URL(n.url)).searchParams.get(Pr.apiVersionQueryParameter)||(t.searchParams.set(Pr.apiVersionQueryParameter,this.serviceOptions.styleAPIVersion),n.url=t.href),(t=this.map.authentication)!=null&&t.signRequest(n),this._deleteAuthTokenForStaticAssets(n))},e.prototype._request=function(t,n,r,o){var i;return o===void 0&&(o={}),rD(this,void 0,void 0,function(){var l,c;return oD(this,function(f){switch(f.label){case 0:return c={url:new Af({protocol:"https",domain:t,path:n,queryParams:yh(((c={})[Pr.apiVersionQueryParameter]=this.serviceOptions.styleAPIVersion,c),o)}).toString()},typeof this.serviceOptions.transformRequest=="function"&&r&&(c=this.serviceOptions.transformRequest(c.url,r)),(i=this.map.authentication)!=null&&i.signRequest(c),this._deleteAuthTokenForStaticAssets(c),l={method:"GET",mode:"cors"},c.credentials&&(l.credentials=c.credentials),c.headers&&(l.headers=c.headers),[4,fetch(c.url,l).then(function(p){if(p.ok)return p.json();throw new Error("HTTP ".concat(p.status,": ").concat(p.statusText," "))})];case 1:return[2,f.sent()]}})})},e.prototype._deleteAuthTokenForStaticAssets=function(t){t.url.startsWith("https://".concat(this.serviceOptions.staticAssetsDomain,"/").concat(Pr.stylePath))&&(delete t.headers[Pr.msClientIdHeaderName],delete t.headers[Pr.authorizationHeaderName])},e}(),uFe=function(){return"ENVIRONMENT"in window&&!!window.ENVIRONMENT.hmr},aq=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cFe=function(){function e(t){this.map=t,this.indicators=new Set}return e.prototype.add=function(t){var n,r;t=Array.isArray(t)?t:[t];try{for(var o=aq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this.indicators.has(l)||(this.indicators.add(l),l.attach(this.map))}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.clear=function(){var t=this;this.indicators.forEach(function(n){t.indicators.delete(n),n.remove()})},e.prototype.remove=function(t){var n,r;t=Array.isArray(t)?t:[t];try{for(var o=aq(t),i=o.next();!i.done;i=o.next()){var l=i.value;this.indicators.has(l)&&(this.indicators.delete(l),l.remove())}}catch(c){n={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getIndicators=function(){return Array.from(this.indicators)},e.prototype._getCollectionDiv=function(){var t=this.map.getMapContainer().querySelector(".".concat(e.Css.collection));return t||((t=document.createElement("div")).setAttribute("aria-label","map data"),t.setAttribute("role","listbox"),t.classList.add(e.Css.collection),this.map.getMapContainer().appendChild(t)),t},e.Css={collection:"accessible-indicator-collection-container"},e}(),dFe=window&&window.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(r,o){r.__proto__=o}:function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}))(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jp=window&&window.__assign||function(){return(jp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},hFe=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)(function(o,i){function l(p){try{f(r.next(p))}catch(g){i(g)}}function c(p){try{f(r.throw(p))}catch(g){i(g)}}function f(p){var g;p.done?o(p.value):((g=p.value)instanceof n?g:new n(function(v){v(g)})).then(l,c)}f((r=r.apply(e,t||[])).next())})},fFe=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:c(0),throw:c(1),return:c(2)};return typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){var g=[f,p];if(n)throw new TypeError("Generator is already executing.");for(;i=l&&g[l=0]?0:i;)try{if(n=1,r&&(o=2&g[0]?r.return:g[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,g[1])).done)return o;switch(r=0,(g=o?[2&g[0],o.value]:g)[0]){case 0:case 1:o=g;break;case 4:return i.label++,{value:g[1],done:!1};case 5:i.label++,r=g[1],g=[0];continue;case 7:g=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(g[0]===6||g[0]===2)){i=0;continue}if(g[0]===3&&(!o||g[1]>o[0]&&g[1]<o[3]))i.label=g[1];else if(g[0]===6&&i.label<o[1])i.label=o[1],o=g;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(g)}}g=t.call(e,i)}catch(v){g=[6,v],r=0}finally{n=o=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}},pFe=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},mFe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},oI=window&&window.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},zZ=function(e){function t(n,r){var o,i,l=e.call(this)||this,c=(l.removed=!1,l.loaded=!1,l.ready=!1,l._resizeCallback=function(){return l.resize()},!0);l._updateGlobalDefaults(r),l.serviceOptions=new nD().merge(r),l.styleOptions=new oq().merge(r),l.trafficOptions=new Sk,l.styles=new lFe(l,l.serviceOptions),l.insights=new MDe(l.serviceOptions),l.serviceOptions.authOptions.subscriptionKey&&(l.serviceOptions.authOptions.subscriptionKey=encodeURIComponent(l.serviceOptions.authOptions.subscriptionKey)),o=l.serviceOptions.authOptions.clientId||(l.serviceOptions.authOptions.subscriptionKey?l.serviceOptions.authOptions.subscriptionKey.replace(/.(?=.{3,}$)/g,"*"):"invalid-setting"),l.insights&&l.insights.setAuthenticatedUserContext(l.serviceOptions.sessionId,o),arguments[2]&&uFe()?(i=arguments[2],l.ready=!0,l.loaded=!0):(o={antialias:l.styleOptions.antialias,attributionControl:!1,container:n,fadeDuration:l.serviceOptions.fadeDuration,localIdeographFontFamily:l.serviceOptions.localIdeographFontFamily,preserveDrawingBuffer:l.styleOptions.preserveDrawingBuffer,refreshExpiredTiles:l.serviceOptions.refreshExpiredTiles,renderWorldCopies:l.styleOptions.renderWorldCopies,trackResize:!1,transformRequest:function(v,w){var C={url:v};return w==="Tile"||w==="Source"?(v.includes(Pr.legacyDomainPlaceHolder)&&l.insights&&l.insights.trackEvent({name:"TileLoad"}),l._substituteDomainLanguageViewAndSignInRequest(v,C)):w!=="Style"&&w!=="SpriteJSON"&&w!=="SpriteImage"&&w!=="Glyphs"||l.styles._transformStyleRequest(v,C),l.serviceOptions.transformRequest&&l7(C,l.serviceOptions.transformRequest(C.url,w)),C}},i=new Pu.Map(o));try{l.map=i,l.authentication=new yNe(l),l.controls=new vNe(l),l.events=new bNe(l),l.imageSprite=new xNe(l),l.layers=new INe(l),l.markers=new wNe(l),l.sources=new PNe(l),l.popups=new kNe(l),l.indicators=new cFe(l),l.map.getContainer().classList.add(t.Css.container),l.map.getCanvasContainer().classList.add(t.Css.canvasContainer),l.map.getCanvas().classList.add(t.Css.canvas),l._detectHighContrast(),l.copyrightControl=new DDe({showFeedbackLink:l.styleOptions.showFeedbackLink,showLogo:l.styleOptions.showLogo,customAttribution:l.styleOptions.customAttribution}),l.controls.add(l.copyrightControl,{position:Iu.NonFixed}),l.logoControl=new FDe({showLogo:l.styleOptions.showLogo}),l.controls.add(l.logoControl,{position:Iu.BottomLeft});var f=l.authentication?l.authentication.initialize():Promise.resolve();if(l.removed)return l;var p=function(){l.loaded=!0,l.map.off("load",p)},g=(l.map.on("load",p),function(){l.ready=!0,l.map.off("styledata",g),l.events.invoke("ready",{map:l,type:"ready"})});l.map.on("styledata",g),l._setAutoResize(l.styleOptions.autoResize),l.map.showTileBoundaries=l.styleOptions.showTileBoundaries,l.localizedStringsPromise=xk.getStrings(l.styleOptions.language),f.then(function(){return l.styles.definitions()}).then(function(v){if(!l.removed){if(l.authentication&&!l.authentication.getToken())throw new Error("AuthenticationManager finished initializing, but no token is available");l.serviceOptions["enable-accessibility"]&&l.accessibleMapDelegate.addToMap(),l._setStyleComponents(l.styleOptions),l.copyrightDelegate&&l.copyrightDelegate.addToMap()}}).catch(function(v){v=v instanceof Error?v:new Error(v),l.insights.trackException({error:v}),v={map:l,type:"error",error:v},l.events.invoke("error",v)}),l.setCamera(jp(jp({minZoom:1},r),{type:"jump",duration:0})),l.incidentDelegate=new KDe(l),l.flowDelegate=new VDe(l),l.accessibleMapDelegate=new HDe(l),l.userInteractionDelegate=new QDe(l,r),l.userInteractionDelegate.addToMap(),l.copyrightDelegate=new uLe(l,l.copyrightControl,l.styleOptions)}catch(v){throw c=!1,l.insights.trackException({error:v instanceof Error?v:new Error(v)}),v}finally{l.insights.trackEvent({name:"MapLoad"},{success:c,supported:uL(),supportedWithPerformance:uL({failIfMajorPerformanceCaveat:!0})}),l.insights.flush()}return l}return dFe(t,e),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.removed},enumerable:!1,configurable:!0}),t.prototype.getCanvas=function(){return this.map.getCanvas()},t.prototype.getCanvasContainer=function(){return this.map.getCanvasContainer()},t.prototype.getMapContainer=function(){return this.map.getContainer()},t.prototype.getServiceOptions=function(){return $o(this.serviceOptions,nD._cloneCustomizer)},t.prototype.setServiceOptions=function(n){this.serviceOptions=new nD().merge(this.serviceOptions,n),this.serviceOptions["enable-accessibility"]?this.accessibleMapDelegate.addToMap():this.accessibleMapDelegate.removeFromMap(),n=this.styles.serviceOptions.mapConfiguration!==this.serviceOptions.mapConfiguration||this.styles.serviceOptions.staticAssetsDomain!==this.serviceOptions.staticAssetsDomain||this.styles.serviceOptions.styleDefinitionsVersion!==this.serviceOptions.styleDefinitionsVersion||this.styles.serviceOptions.domain!==this.serviceOptions.domain||this.styles.serviceOptions.styleAPIVersion!==this.serviceOptions.styleAPIVersion,this.styles.serviceOptions=this.serviceOptions,n&&(this.styles.initPromise=null,this.setStyle({}))},t.prototype.addRequestTransformer=function(n){this.serviceOptions.addTransformer(n)},t.prototype.removeRequestTransformer=function(n){this.serviceOptions.removeTransformer(n)},t.prototype.setCamera=function(n,r){if(r===void 0&&(r=!1),"padding"in n||"offset"in n||"bounds"in n){var o,c=new zNe().merge({maxZoom:this.getCamera().maxZoom},n),i=this._generateSafeBounds(c.bounds),f={padding:c.padding,offset:c.offset,maxZoom:c.maxZoom};if(!(o=this.map.cameraForBounds(i,f)))throw l={message:"The map cannot be fit to the current canvas with the given CameraBoundsOptions.",containerWidth:(l=(l=this.map)==null?void 0:l.getContainer())==null?void 0:l.clientWidth,containerHeight:l==null?void 0:l.clientHeight,safeBounds:i,cameraForBoundsOptions:f},new Error(JSON.stringify(l));"pitch"in n&&(o.pitch=n.pitch),"bearing"in n&&(o.bearing=n.bearing),"minPitch"in n&&this.map.setMinPitch(n.minPitch),"maxPitch"in n&&this.map.setMaxPitch(n.maxPitch),"minZoom"in n&&this.map.setMinZoom(n.minZoom),i=this._generateSafeBounds(c.maxBounds)}else f=new UNe().merge(this.getCamera(),n),f.centerOffset&&2<=f.centerOffset.length&&(l=f.centerOffset,(c=hE([f.center],f.zoom))[0][0]+=l[0],c[0][1]+=l[1],f.center=Rz(c,f.zoom)[0]),o={center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,around:void 0},f.minZoom<1&&console.warn("Setting minZoom below 1 may result in an empty map when the zoom level is less than 1."),this.map.setMinZoom(f.minZoom),this.map.setMaxZoom(f.maxZoom),f.minPitch&&this.map.setMinPitch(f.minPitch),f.maxPitch&&this.map.setMaxPitch(f.maxPitch),this._invokeEvent("minzoomchanged",this.map.getMinZoom()),this._invokeEvent("maxzoomchanged",this.map.getMaxZoom()),i=this._generateSafeBounds(f.maxBounds);i?this.map.setMaxBounds(i):this.map.setMaxBounds(null);var l=new MNe().merge(n),c={duration:l.duration,easing:function(p){return p},offset:[0,0],animate:!0},f={fromControl:r};l.type==="jump"?this.map.jumpTo(o,f):l.type==="ease"?this.map.easeTo(jp(jp({},o),c),f):l.type==="fly"&&this.map.flyTo(jp(jp({},o),c),f)},t.prototype.setCameraBounds=function(n){this.setCamera(n)},t.prototype.getCamera=function(){var n=this.map.getBounds().getSouthWest().toArray(),r=this.map.getBounds().getNorthEast().toArray();return{zoom:this.map.getZoom(),center:this.map.getCenter().toArray(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),bounds:new so(n,r),minZoom:this.map.getMinZoom(),maxZoom:this.map.getMaxZoom()}},t.prototype.setStyle=function(n,r){r===void 0&&(r=!0),delete n.preserveDrawingBuffer,n=new oq().merge(this.styleOptions,n),n.autoResize!==this.styleOptions.autoResize&&this._setAutoResize(n.autoResize),n.language!==this.styleOptions.language&&(this.localizedStringsPromise=xk.getStrings(n.language)),n.renderWorldCopies!==this.styleOptions.renderWorldCopies&&this.map.setRenderWorldCopies(n.renderWorldCopies),n.showFeedbackLink!==this.styleOptions.showFeedbackLink&&this.copyrightControl.setOptions({showFeedbackLink:n.showFeedbackLink}),n.customAttribution!==this.styleOptions.customAttribution&&this.copyrightControl.setOptions({customAttribution:n.customAttribution}),n.showLogo!==this.styleOptions.showLogo&&(this.copyrightControl.setOptions({showLogo:n.showLogo}),this.logoControl.setOptions({showLogo:n.showLogo})),n.showTileBoundaries!==this.styleOptions.showTileBoundaries&&(this.map.showTileBoundaries=n.showTileBoundaries),n.showBuildingModels&&console.warn("showBuildingModels is deprecated."),r=r&&this.styleOptions.language===n.language&&this.styleOptions.view===n.view,this.styleOptions=n,this._setStyleComponents(n,r)},t.prototype.getStyle=function(){return Ka(this.styleOptions)},t.prototype.addIcon=function(n,r){this.imageSprite.add(n,r)},t.prototype.addPins=function(n,o){var o=new WNe().merge(o),i=this.layers.getLayerById(o.name),l=!1;if(i||(l=!0,i=new Ik("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,iconOptions:{anchor:"center",size:o.iconSize,image:["case",["has","icon"],["get","icon"],o.icon],ignorePlacement:!o.cluster,opacity:o.opacity},textOptions:{anchor:"center",textField:["case",["has","point_count"],["to-string",["get","point_count"]],["has","title"],["to-string",["get","title"]],o.title],font:["case",["has","point_count"],["literal",["StandardFontCondensed-Bold"]],["literal",[o.textFont]]],size:["case",["has","point_count"],20,o.fontSize],ignorePlacement:!o.cluster,opacity:o.opacity,offset:["case",["has","point_count"],["literal",[.5,-.45]],["literal",[o.textOffset[0]/16,o.textOffset[1]/16]]],color:o.fontColor}})),!(i instanceof Ik))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a SymbolLayer.")+"A SymbolLayer should be used for rendering pins.");var c=i.getSource(),f=(typeof c=="string"?(p=c,c=this.sources.getById(p)):p=c.getId(),!1);if(c||(f=!0,c=new zc(p,{cluster:o.cluster})),!(c instanceof zc))throw new Error("The source with name '".concat(p,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");f&&this.sources.add(c),l&&this.layers.add(i,o.before);var p=new Lv(n);o.overwrite?c.setShapes(p):c.add(p)},t.prototype.addCircles=function(n,o){var o=new HNe().merge(o),i=this.layers.getLayerById(o.name),l=!1;if(i||(l=!0,i=new wL("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,opacity:o.opacity,radius:["case",["has","radius"],["get","radius"],o.radius],color:["case",["has","color"],["get","color"],o.color],strokeColor:["case",["has","outlineColor"],["get","outlineColor"],o.outlineColor],strokeWidth:["case",["has","outlineWidth"],["get","outlineWidth"],o.outlineWidth]})),!(i instanceof wL))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a BubbleLayer.")+"A BubbleLayer should be used for rendering circles.");var c=i.getSource(),f=(typeof c=="string"?(p=c,c=this.sources.getById(p)):p=c.getId(),!1);if(c||(f=!0,c=new zc(p)),!(c instanceof zc))throw new Error("The source with name '".concat(p,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");f&&this.sources.add(c),l&&this.layers.add(i,o.before);var p=new Lv(n);o.overwrite?c.setShapes(p):c.add(p)},t.prototype.addLinestrings=function(n,o){var o=new qNe().merge(o),i=this.layers.getLayerById(o.name),l=!1;if(i||(l=!0,i=new xL("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,lineCap:o.cap,lineJoin:o.join,strokeOpacity:o.opacity,strokeColor:["case",["has","color"],["get","color"],o.color],strokeWidth:["case",["has","width"],["get","width"],o.width]})),!(i instanceof xL))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a LineLayer.")+"A LineLayer should be used for rendering linestrings.");var c=i.getSource(),f=(typeof c=="string"?(p=c,c=this.sources.getById(p)):p=c.getId(),!1);if(c||(f=!0,c=new zc(p)),!(c instanceof zc))throw new Error("The source with name '".concat(p,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");f&&this.sources.add(c),l&&this.layers.add(i,o.before);var p=new Lv(n);o.overwrite?c.setShapes(p):c.add(p)},t.prototype.addPolygons=function(n,o){var o=new YNe().merge(o),i=this.layers.getLayerById(o.name),l=!1;if(i||(l=!0,i=new CL("".concat(o.name,"-source"),o.name,{source:"".concat(o.name,"-source"),minZoom:o.minZoom,maxZoom:o.maxZoom,fillOpacity:o.opacity,fillColor:["case",["has","color"],["get","color"],o.color]})),!(i instanceof CL))throw new Error("A layer with name '".concat(o.name,"' already exists but it is not a PolygonLayer.")+"A PolygonLayer should be used for rendering linestrings.");var c=i.getSource(),f=(typeof c=="string"?(p=c,c=this.sources.getById(p)):p=c.getId(),!1);if(c||(f=!0,c=new zc(p)),!(c instanceof zc))throw new Error("The source with name '".concat(p,"' already exists but it is not a DataSource.")+"New data can only be added to a DataSource.");f&&this.sources.add(c),l&&this.layers.add(i,o.before);var p=new Lv(n);o.overwrite?c.setShapes(p):c.add(p)},t.prototype.addRaster=function(n,i){var o,i=new XNe().merge(i),l=this.layers.getLayerById(i.name);if(!((l=l||new kk({maxZoom:i.maxZoom,minZoom:i.minZoom,opacity:i.opacity,tileSize:256,tileUrl:"{subdomain}"},i.name))instanceof kk))throw new Error("A layer with name '".concat(i.name,"' already exists but it is not a TileLayer.")+"A TileLayer should be used for rendering raster images.");if(l.getOptions().tileUrl!=="{subdomain}")throw new Error("A TileLayer with name '".concat(i.name,"' already exists but was configured ")+"for a single tile url [default for new TileLayer(...)].");(o=!i.overwrite&&l.getOptions().subdomains||[]).push.apply(o,mFe([],pFe(n),!1)),l._setOptionsNoUpdate({subdomains:o}),this.layers.add(l,i.before)},t.prototype.getLayers=function(){return this.layers.getLayers().map(function(n){return n.getId()})},t.prototype.removeLayers=function(n){var r,o;try{for(var i=oI(n),l=i.next();!l.done;l=i.next()){var c,f=l.value;this.layers.getLayerById(f)&&(this.layers.remove(f),c="".concat(f,"-source"),this.sources.getById(c))&&this.sources.remove(c)}}catch(p){r={error:p}}finally{try{l&&!l.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},t.prototype.addHtml=function(n,r){n.id||(n.id="marker_".concat(f_()));var o=new Lz({htmlContent:n});return this.markers.add(o,r),n.id},t.prototype.removeHtml=function(n){this.markers.remove(n)},t.prototype.addEventListener=function(n,r,o){this.events._addLegacy(n,r,o)},t.prototype.removeEventListener=function(n,r,o){this.events._removeLegacy(n,r,o)},t.prototype.setUserInteraction=function(n){this.userInteractionDelegate.setOptions(n)},t.prototype.getUserInteraction=function(){return this.userInteractionDelegate.getOptions()},t.prototype.addControl=function(n,r){this.controls.add(n,r)},t.prototype.removeControl=function(n){this.controls.remove(n)},t.prototype.setTraffic=function(n){var r=this.trafficOptions.incidents,o=this.trafficOptions.flow;if(this.trafficOptions=new Sk().merge(this.trafficOptions,n),this.controls.getControls().filter(function(i){return i instanceof u7}).forEach(function(i){return i.updateButtonState()}),this.incidentDelegate&&(this.trafficOptions.incidents?r||this.incidentDelegate.addToMap():this.incidentDelegate.removeFromMap()),this.trafficOptions.flow&&this.trafficOptions.flow!=="none"){["absolute","relative-delay"].includes(this.trafficOptions.flow)&&console.warn("The 'absolute' and 'relative-delay' flow options are deprecated. Please use 'relative' instead.");try{this.trafficOptions.flow!==o&&this.flowDelegate.addToMap()}catch(i){throw this.trafficOptions.flow=o,i}}else this.flowDelegate.removeFromMap()},t.prototype.getTraffic=function(){return Ka(this.trafficOptions)},t.prototype.remove=function(){this.dispose()},t.prototype.clear=function(){this.popups.clear(),this.layers.clear(),this.sources.clear(),this.markers.clear(),this.indicators.clear()},t.prototype.dispose=function(){var n;for(this.clear(),this.map.remove(),(n=this.authentication)!=null&&n.dispose(),this.removed=!0,(n=this.resizeObserver)!=null&&n.disconnect(),this.resizeObserver=null;this.getMapContainer().firstChild;){var r=this.getMapContainer().firstChild;this.getMapContainer().removeChild(r)}},t.prototype.resize=function(n,r,o){typeof n!="number"&&typeof n!="string"||typeof r!="number"&&typeof r!="string"?o=n:(n=n,this.getMapContainer().style.height=typeof n=="number"?"".concat(n,"px"):n,this.getMapContainer().style.width=typeof r=="number"?"".concat(r,"px"):r),n=this.getMapContainer().style.overflow,this.getMapContainer().style.overflow="hidden",this.map.resize(o),this.getMapContainer().style.overflow=n},t.prototype.pixelsToPositions=function(n){var r,o,i=[];try{for(var l=oI(n),c=l.next();!c.done;c=l.next()){var f=c.value,p=this.map.unproject(f);i.push(new Sl(p.lng,p.lat))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return i},t.prototype.positionsToPixels=function(n){var r,o,i=[];try{for(var l=oI(n),c=l.next();!c.done;c=l.next()){var f=c.value,p=this.map.project(f);i.push(new Tl(p.x,p.y))}}catch(g){r={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return i},t.prototype.areTilesLoaded=function(){return this.map.areTilesLoaded()},t.prototype.stop=function(){this.map.stop()},t.prototype.triggerRepaint=function(){this.map.triggerRepaint()},t.prototype.enableElevation=function(n,r){this.map.setTerrain(typeof n=="string"?{source:n,exaggeration:r}:{source:n.getId(),exaggeration:r})},t.prototype.disableElevation=function(){this.map.setTerrain(null)},t.prototype._getMap=function(){return this.map},t.prototype._rebuildStyle=function(n){return n===void 0&&(n=!0),hFe(this,void 0,void 0,function(){return fFe(this,function(r){return this.styles.setStyle(this.styleOptions,n),this.imageSprite._restoreImages(),[2]})})},t.prototype._isLoaded=function(){return this.loaded},t.prototype._isReady=function(){return this.ready},t.prototype._getLocalizedStrings=function(){return this.localizedStringsPromise},t.prototype._sendRequest=function(n,r,o){var i;return(i=typeof this.serviceOptions.transformRequest=="function"?this.serviceOptions.transformRequest(n,r):i)?fetch(i.url||n,{credentials:i.credentials,headers:jp(jp({},o),i.headers),method:"GET",mode:"cors"}):fetch(n,{headers:o,method:"GET",mode:"cors"})},t.prototype._substituteDomainLanguageViewAndSignInRequest=function(n,r){var o;(n.includes(Pr.legacyDomainPlaceHolder)||n.includes(Pr.domainPlaceHolder))&&(o=new RegExp("[^{]".concat(Pr.legacyDomainPlaceHolder,"[^}]")),n.match(o)&&(r.url=r.url.replace(Pr.legacyDomainPlaceHolder,Pr.domainPlaceHolder)),Af.protoRegEx.test(this.serviceOptions.domain)?(o=r.url.indexOf(Pr.domainPlaceHolder),r.url=this.serviceOptions.domain+r.url.substring(o+Pr.domainPlaceHolder.length)):r.url=r.url.replace(Pr.domainPlaceHolder,this.serviceOptions.domain)),(r.url.toLocaleLowerCase().includes(this.serviceOptions.domain.toLocaleLowerCase())||r.url.toLocaleLowerCase().includes(this.serviceOptions.staticAssetsDomain.toLocaleLowerCase()))&&(o=this.authentication)!=null&&o.signRequest(r),n.includes(Pr.languagePlaceHolder)&&(r.url=r.url.replace(Pr.languagePlaceHolder,this.styleOptions.language)),n.includes(Pr.viewPlaceHolder)&&(r.url=this.styleOptions.view?r.url.replace(Pr.viewPlaceHolder,this.styleOptions.view):r.url.replace(Pr.viewPlaceHolder,"").replace("&".concat(Pr.viewParameter,"="),""))},t.prototype._setAutoResize=function(n){n?(this.resizeObserver||(this.resizeObserver=new ResizeObserver(this._resizeCallback)),this.resizeObserver.observe(this.map.getContainer())):this.resizeObserver&&this.resizeObserver.unobserve(this.map.getContainer())},t.prototype._setStyleComponents=function(n,r){var o=this;r===void 0&&(r=!0),this.removed||this.styles.definitions().then(function(i){var l,c,f=!0;if(o.styleOptions.style)try{for(var p=oI(i.configurations),g=p.next();!g.done;g=p.next()){var v=g.value;if(o.styleOptions.style===v.name){f=!1;break}}}catch(w){l={error:w}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}f&&(o.styleOptions.style=i.defaultConfiguration),o.styleOptions=n,o._rebuildStyle(r)})},t.prototype._updateGlobalDefaults=function(n){n&&(n.authOptions&&!cL()&&dW(n.authOptions),n.domain&&!wW()&&hW(n.domain),n.styleDefinitionsPath&&!xW()&&fW(n.styleDefinitionsPath),n.workerCount&&!CW()&&pW(n.workerCount),n.maxParallelImageRequests&&!SW()&&mW(n.maxParallelImageRequests),!n.subscriptionKey&&!n["subscription-key"]||cL()||vW(n.subscriptionKey||n["subscription-key"]),!n.sessionId&&!n["session-id"]||TW()||yW(n.sessionId||n["session-id"]),n.language&&!EW()&&gW(n.language),!n.userRegion&&!n.view||IW()||_W(n.userRegion||n.view))},t.prototype._generateSafeBounds=function(n){if(n){var r=so.getSouth(n),o=so.getWest(n),i=so.getNorth(n),l=so.getEast(n);if(!(isFinite(r)&&isFinite(o)&&isFinite(i)&&isFinite(l)))throw new Error("The bounds specified are invalid: [".concat(n,"]"));for(;l<o;)l+=360;return new so([o,r,l,i])}return n},t.prototype._detectHighContrast=function(){var n,r;switch(Zke.getHighContrastMode()){case"invert":case"light":n=t.Css.hcLight,r="high_contrast_light";break;case"dark":n=t.Css.hcDark,r="high_contrast_dark"}n&&this.map.getContainer().classList.add(n),r&&this.styleOptions.style==="road"&&(this.styleOptions.style=r)},t.Css={canvasContainer:"atlas-map-canvas-container",canvas:"atlas-map-canvas",container:"atlas-map",hcDark:"high-contrast-dark",hcLight:"high-contrast-light"},t}(Cm),gFe=window&&window.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),l=[];try{for(;(t===void 0||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return l},yFe=window&&window.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},vFe=function(){function e(){this.detectHyperlinks=!0,this.parsePropertyPaths=!0}return e.applyTemplate=function(t,n){var r,o,i,l=this,c=document.createElement("div");return c.classList.add(e.Css.template),t&&(typeof(n=n||{}).singleDescription!="boolean"&&(n.singleDescription=!0),n.sandboxContent=typeof n.sandboxContent!="boolean"||n.sandboxContent,n.title&&typeof n.content=="string"&&(n.content.includes("{title}")||n.content.includes("{name}"))||(t.title?n.title="{title}":t.name&&(n.title="{name}")),typeof n.detectHyperlinks!="boolean"&&(n.detectHyperlinks=!0),typeof n.parsePropertyPaths!="boolean"&&(n.parsePropertyPaths=!0),n.textColor&&(c.style.color=n.textColor),n.fillColor&&(c.style.backgroundColor=n.fillColor),n.title&&((i=this._applyStringTemplate(t,n.title,n)).innerText=i.textContent||i.innerText||"",this._appendChild(c,i,e.Css.title)),(r=document.createElement("div")).classList.add(e.Css.content),Array.isArray(n.content)?0<n.content.length&&n.content[0].propertyPath?this._appendChild(r,this._generateContent(t,n.content,n),e.Css.item):n.content.forEach(function(f){l._appendChild(r,l._generateContent(t,f,n),e.Css.item)}):(o=0,i=void(t.description&&Object.keys(t).forEach(function(f){l._ignoreProperty(f,t[f])||o++})),o===1||n.singleDescription&&t.description||o===2&&t.Snippet?(i=document.createElement("div")).innerHTML=t.description:i=this._generateContent(t,n.content,n),this._appendChild(r,i,e.Css.item)),r.innerHTML!=="")&&(n.sandboxContent?c.appendChild(e._createSandboxedIframe(r,n)):c.appendChild(r)),c},e._createSandboxedIframe=function(o,n){var r=document.createElement("iframe"),o=(r.sandbox.add("allow-popups"),o.innerHTML),i=!1,v=100,l=550,c=10,g=(document.body.scrollWidth<=340&&(l=300,v=50),o.split(/<(tr|div|br|li|h[0-9]|p>)/)),p=Math.max.apply(Math,yFe([],gFe(g.map(function(w){return w.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length})),!1))-1,f=Math.ceil(3.5*p),p=(f<l&&(l=f,v=p),o.includes("<img")||o.includes("<video")?(i=!0,r.width="550px"):(f=-1<o.indexOf(e.Css.table)?25:20,c+=Math.max(.5*g.length*f,Math.ceil(o.replace(/<[a-zA-Z0-9\s=\/]+>/g,"").length/v)*f)),r.width=l+"px",r.height=i||280<c?"280px":c+"px",n.textColor?"color:".concat(n.textColor,";"):""),g=n.fillColor?"background-color:".concat(n.fillColor,";"):"",v='<html><head><title></title><meta charset="utf-8" /><meta http-equiv="x-ua-compatible" content="IE=Edge" />'+'<link rel="stylesheet" href="'.concat(e._cssUrl,'" type="text/css"/>')+"<style>html, body{margin:0;padding:0;".concat(p).concat(g,"}</style></head>")+'<body><div class="'.concat(e.Css.template,'" style="padding:0;width:').concat(l-20,'px">').concat(o,"</div></body></html>");return r.srcdoc===void 0?r.src="data:text/html;charset=utf-8,"+encodeURI(v):r.srcdoc=v,r},e._appendChild=function(t,n,r){n&&(r&&(n.className=(n.className?n.className+" ":"")+r),t.appendChild(n))},e._generateContent=function(t,n,r){return n?Array.isArray(n)?this._generatePropertyInfoTable(t,n,r):this._applyStringTemplate(t,n,r):(n=this._generateDynamicTableHtml(t,null,r))?((t=document.createElement("div")).innerHTML=n,t):null},e._applyStringTemplate=function(t,n,r){if(n){for(var o,i,l=n,c=this._placeholderRx.exec(n);c;)2<=c.length&&(o=this._getPropertyValue(t,c[1],r),l=l.replace(c[0],o)),c=this._placeholderRx.exec(n);if(l)return(l=l.trim()).includes("<")&&(l=l.replace(/[\r\n]+/g,"<br/>")),(i=document.createElement("div")).innerHTML=l,i}return null},e._getPropertyValue=function(t,n,r,o){var i=r.parsePropertyPaths?n.split("/"):[n],l=i.length;if(0<l&&t){var c=i[0],f=t[c];if(r.detectHyperlinks&&n==="link"&&(!o||o.hyperlinkFormat)){var p,g,v,w=[];if(Array.isArray(f)?f.forEach(function(O){O.href?w.push(O):typeof O=="string"&&w.push({href:O})}):f.href&&w.push(f),0<w.length)return o&&o.hyperlinkFormat?p=o.hyperlinkFormat:r&&r.hyperlinkFormat&&(p=r.hyperlinkFormat),g=p&&p.target?p.target:"_blank",v=[],w.forEach(function(O){O.title||p&&p.label||!O.rel||v.push(O.rel," - "),v.push('<a href="',O.href,'" target="',g,'">'),O.title?v.push(O.title):p&&p.label?v.push(p.label):v.push(O.href),v.push("</a>","<br/>")}),v.pop(),v.join("")}if(f!=null){for(var C=void 0,C=1;C<l&&(f=f[i[C]],c=i[C],f!=null);C++);if(C===l&&f!=null){if(t=void 0,(t=f.value!==void 0?f.value:f)instanceof Date)return o&&o.dateFormat?t.toLocaleString(void 0,o.dateFormat):r.dateFormat?t.toLocaleString(void 0,r.dateFormat):t.toISOString();if(typeof t=="object")return(T=this._generateDynamicTableHtml(t,i.slice(1),r))||"";if(typeof t=="number"){if(o){if(o.dateFormat)return new Date(t).toLocaleString(void 0,o.dateFormat);if(o.numberFormat)return t.toLocaleString(void 0,o.numberFormat)}else if(/(timestamp|date)/gi.test(c))return new Date(t).toISOString();return t.toLocaleString(void 0,r.numberFormat)}if(typeof t=="string"&&t!==""&&!/[\n\r<>\s]/g.test(t)&&(r.detectHyperlinks||o&&o.hyperlinkFormat)){var T,t=t.trim(),n=this._isUrlRx.test(t)||o&&o.hyperlinkFormat,k=this._isImageUrlRx.test(t)&&(n||t.startsWith("data:image")),P=this._emailRx.test(t);if(n||k||P)return n=void 0,T=void(o&&o.hyperlinkFormat?n=o.hyperlinkFormat:r&&r.hyperlinkFormat&&(n=r.hyperlinkFormat)),T=n&&n.target?' target="'.concat(n.target,'"'):' target="_blank"',o="".concat(n&&n.label?n.label:t),n&&n.scheme?t=n.scheme+t:P&&(t="mailto:"+t),r=n&&n.label?' alt="'.concat(n.label,'"'):"",(n&&n.isImage||k)&&(o='<img src="'.concat(t,'" style="max-width:100%"').concat(r,'"/>')),'<a href="'.concat(t,'"').concat(T,">").concat(o,"</a>")}return t.toString()}}}return""},e._generatePropertyInfoTable=function(t,n,r){var o,i;return t&&n&&0<n.length?((o=[]).push('<table class="'.concat((i=this).Css.table,'">')),n.forEach(function(l){var c=i._getPropertyValue(t,l.propertyPath,r,l);l.hideLabel?o.push('<tr><td colspan="2">',c,"</td></tr>"):(l=l.label||l.propertyPath.split("/")[0],o.push("<tr><th>",l,"</th><td>",c,"</td></tr>"))}),o.push("</table>"),(n=document.createElement("div")).innerHTML=o.join(""),n):null},e._generateDynamicTableHtml=function(t,n,r){var o,i,l,c,f=this;return!t||((o=[]).push('<table class="'.concat((i=this).Css.table,'">')),l=n&&0<n.length?n.join("/")+"/":"",c=0,Object.keys(t).forEach(function(p){f._ignoreProperty(p,t[p])||(o.push("<tr><th>",p,"</th><td>",i._getPropertyValue(t,l+p,r),"</td></tr>"),c++)}),c===0)?null:(o.push("</table>"),o.join(""))},e._ignoreProperty=function(t,n){switch(t){case"title":case"name":case"base":case"popupTemplate":case"anchor":case"icon":case"image":case"imageUrl":case"rotation":case"color":case"size":case"offset":case"strokeColor":case"strokeWidth":case"strokeOpacity":case"subType":case"fillColor":case"fillOpacity":case"visibility":case"visible":return!0;default:if(t.indexOf("_")===0||n==null||n==="")return!0}return!1},e._placeholderRx=/\{([a-zA-Z0-9_\/\s]+)\}/gi,e._isUrlRx=/^(http|https|ftp|tel|mailto):\/\//i,e._isImageUrlRx=/(^data:image|.png$|.jpg$|.jpeg$|.gif$|.bmp$|.svg|.tif|.tiff$)/i,e._emailRx=/^[^\.\s@:](?:[^\s@:]*[^\s@:\.])?@[^\.\s@]+(?:\.[^\.\s@]+)*$/,e._cssUrl=new Af({domain:Mh.staticAssetsDomain,path:"sdk/javascript/mapcontrol/".concat(MA.getEndpointVersion(),"/atlas.min.css")}).toString(),e.Css={template:"azure-maps-control-popup-template",title:"azure-maps-control-popup-template-title",content:"azure-maps-control-popup-template-content",item:"azure-maps-control-popup-template-content-item",table:"azure-maps-control-popup-template-table"},e}(),Ta=(TH(),Object.freeze({__proto__:null,get AuthenticationType(){return Ai},get ControlPosition(){return Iu},get ControlStyle(){return Qs},HtmlMarker:Lz,Map:zZ,Pixel:Tl,Popup:VA,PopupTemplate:vFe,Shape:ia,_enableRTLTextPlugin:TH,_getAssetDomain:Vve,_getDomain:qve,_hasMaxParallelImageRequests:SW,_hasSetAuthenticationOptions:cL,_hasSetDomain:wW,_hasSetLanguage:EW,_hasSetSessionId:TW,_hasSetStyleDefinitionsPath:xW,_hasSetStyleDefinitionsVersion:Hve,_hasSetView:IW,_hasWorkerCount:CW,addImageTemplate:Fve,addProtocol:jve,clearPrewarmedResources:Uve,control:HIe,data:u1,getAllImageTemplateNames:zve,getAuthenticationOptions:eW,getDomain:Ck,getImageTemplate:bW,getLanguage:sW,getMaxParallelImageRequests:aW,getSessionId:lW,getStaticAssetsDomain:tW,getStyleAPIVersion:oW,getStyleDefinitionsPath:nW,getStyleDefinitionsVersion:rW,getSubscriptionKey:uW,getUserRegion:Mve,getVersion:Rve,getView:cW,getWorkerCount:iW,internal:Yve,isSupported:Ove,layer:$A,math:DIe,prewarm:Bve,removeProtocol:$ve,setAuthenticationOptions:dW,setDomain:hW,setLanguage:gW,setMaxParallelImageRequests:mW,setSessionId:yW,setStyleAPIVersion:Lve,setStyleDefinitionsPath:fW,setStyleDefinitionsVersion:Dve,setSubscriptionKey:vW,setUserRegion:_W,setView:Nve,setWorkerCount:pW,source:M7})),iI={},sq;function _Fe(){if(sq)return iI;sq=1,iI.__esModule=!0;var e=function(){function t(n){if(!n)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,n&&t.isGuid(n)&&(this.value=n)}return t.isGuid=function(n){var r=n.toString();return n&&(n instanceof t||t.validator.test(r))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(n){return new t(n)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(n){for(var r="",o=0;o<n;o++)r+=((1+Math.random())*65536|0).toString(16).substring(1);return r},t.prototype.equals=function(n){return t.isGuid(n)&&this.value===n.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();return iI.Guid=e,iI}var lq=_Fe(),yg={},pv={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uq;function bFe(){if(uq)return pv;uq=1;var e=w_();function t(Y){for(var be="https://reactjs.org/docs/error-decoder.html?invariant="+Y,Ue=1;Ue<arguments.length;Ue++)be+="&args[]="+encodeURIComponent(arguments[Ue]);return"Minified React error #"+Y+"; visit "+be+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=Object.prototype.hasOwnProperty,r=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o={},i={};function l(Y){return n.call(i,Y)?!0:n.call(o,Y)?!1:r.test(Y)?i[Y]=!0:(o[Y]=!0,!1)}function c(Y,be,Ue,Je,Mt,It,Gt){this.acceptsBooleans=be===2||be===3||be===4,this.attributeName=Je,this.attributeNamespace=Mt,this.mustUseProperty=Ue,this.propertyName=Y,this.type=be,this.sanitizeURL=It,this.removeEmptyString=Gt}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(Y){f[Y]=new c(Y,0,!1,Y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(Y){var be=Y[0];f[be]=new c(be,1,!1,Y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(Y){f[Y]=new c(Y,2,!1,Y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(Y){f[Y]=new c(Y,2,!1,Y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(Y){f[Y]=new c(Y,3,!1,Y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(Y){f[Y]=new c(Y,3,!0,Y,null,!1,!1)}),["capture","download"].forEach(function(Y){f[Y]=new c(Y,4,!1,Y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(Y){f[Y]=new c(Y,6,!1,Y,null,!1,!1)}),["rowSpan","start"].forEach(function(Y){f[Y]=new c(Y,5,!1,Y.toLowerCase(),null,!1,!1)});var p=/[\-:]([a-z])/g;function g(Y){return Y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(Y){var be=Y.replace(p,g);f[be]=new c(be,1,!1,Y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(Y){var be=Y.replace(p,g);f[be]=new c(be,1,!1,Y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(Y){var be=Y.replace(p,g);f[be]=new c(be,1,!1,Y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(Y){f[Y]=new c(Y,1,!1,Y.toLowerCase(),null,!1,!1)}),f.xlinkHref=new c("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(Y){f[Y]=new c(Y,1,!1,Y.toLowerCase(),null,!0,!0)});var v={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w=["Webkit","ms","Moz","O"];Object.keys(v).forEach(function(Y){w.forEach(function(be){be=be+Y.charAt(0).toUpperCase()+Y.substring(1),v[be]=v[Y]})});var C=/["'&<>]/;function T(Y){if(typeof Y=="boolean"||typeof Y=="number")return""+Y;Y=""+Y;var be=C.exec(Y);if(be){var Ue="",Je,Mt=0;for(Je=be.index;Je<Y.length;Je++){switch(Y.charCodeAt(Je)){case 34:be="&quot;";break;case 38:be="&amp;";break;case 39:be="&#x27;";break;case 60:be="&lt;";break;case 62:be="&gt;";break;default:continue}Mt!==Je&&(Ue+=Y.substring(Mt,Je)),Mt=Je+1,Ue+=be}Y=Mt!==Je?Ue+Y.substring(Mt,Je):Ue}return Y}var k=/([A-Z])/g,P=/^ms-/,O=Array.isArray;function L(Y,be){return{insertionMode:Y,selectedValue:be}}function D(Y,be,Ue){switch(be){case"select":return L(1,Ue.value!=null?Ue.value:Ue.defaultValue);case"svg":return L(2,null);case"math":return L(3,null);case"foreignObject":return L(1,null);case"table":return L(4,null);case"thead":case"tbody":case"tfoot":return L(5,null);case"colgroup":return L(7,null);case"tr":return L(6,null)}return 4<=Y.insertionMode||Y.insertionMode===0?L(1,null):Y}var N=new Map;function F(Y,be,Ue){if(typeof Ue!="object")throw Error(t(62));be=!0;for(var Je in Ue)if(n.call(Ue,Je)){var Mt=Ue[Je];if(Mt!=null&&typeof Mt!="boolean"&&Mt!==""){if(Je.indexOf("--")===0){var It=T(Je);Mt=T((""+Mt).trim())}else{It=Je;var Gt=N.get(It);Gt!==void 0||(Gt=T(It.replace(k,"-$1").toLowerCase().replace(P,"-ms-")),N.set(It,Gt)),It=Gt,Mt=typeof Mt=="number"?Mt===0||n.call(v,Je)?""+Mt:Mt+"px":T((""+Mt).trim())}be?(be=!1,Y.push(' style="',It,":",Mt)):Y.push(";",It,":",Mt)}}be||Y.push('"')}function B(Y,be,Ue,Je){switch(Ue){case"style":F(Y,be,Je);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<Ue.length)||Ue[0]!=="o"&&Ue[0]!=="O"||Ue[1]!=="n"&&Ue[1]!=="N"){if(be=f.hasOwnProperty(Ue)?f[Ue]:null,be!==null){switch(typeof Je){case"function":case"symbol":return;case"boolean":if(!be.acceptsBooleans)return}switch(Ue=be.attributeName,be.type){case 3:Je&&Y.push(" ",Ue,'=""');break;case 4:Je===!0?Y.push(" ",Ue,'=""'):Je!==!1&&Y.push(" ",Ue,'="',T(Je),'"');break;case 5:isNaN(Je)||Y.push(" ",Ue,'="',T(Je),'"');break;case 6:!isNaN(Je)&&1<=Je&&Y.push(" ",Ue,'="',T(Je),'"');break;default:be.sanitizeURL&&(Je=""+Je),Y.push(" ",Ue,'="',T(Je),'"')}}else if(l(Ue)){switch(typeof Je){case"function":case"symbol":return;case"boolean":if(be=Ue.toLowerCase().slice(0,5),be!=="data-"&&be!=="aria-")return}Y.push(" ",Ue,'="',T(Je),'"')}}}function V(Y,be,Ue){if(be!=null){if(Ue!=null)throw Error(t(60));if(typeof be!="object"||!("__html"in be))throw Error(t(61));be=be.__html,be!=null&&Y.push(""+be)}}function G(Y){var be="";return e.Children.forEach(Y,function(Ue){Ue!=null&&(be+=Ue)}),be}function q(Y,be,Ue,Je){Y.push(K(Ue));var Mt=Ue=null,It;for(It in be)if(n.call(be,It)){var Gt=be[It];if(Gt!=null)switch(It){case"children":Ue=Gt;break;case"dangerouslySetInnerHTML":Mt=Gt;break;default:B(Y,Je,It,Gt)}}return Y.push(">"),V(Y,Mt,Ue),typeof Ue=="string"?(Y.push(T(Ue)),null):Ue}var z=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,$=new Map;function K(Y){var be=$.get(Y);if(be===void 0){if(!z.test(Y))throw Error(t(65,Y));be="<"+Y,$.set(Y,be)}return be}function te(Y,be,Ue,Je,Mt){switch(be){case"select":Y.push(K("select"));var It=null,Gt=null;for(Sr in Ue)if(n.call(Ue,Sr)){var Cn=Ue[Sr];if(Cn!=null)switch(Sr){case"children":It=Cn;break;case"dangerouslySetInnerHTML":Gt=Cn;break;case"defaultValue":case"value":break;default:B(Y,Je,Sr,Cn)}}return Y.push(">"),V(Y,Gt,It),It;case"option":Gt=Mt.selectedValue,Y.push(K("option"));var kn=Cn=null,yr=null,Sr=null;for(It in Ue)if(n.call(Ue,It)){var Ho=Ue[It];if(Ho!=null)switch(It){case"children":Cn=Ho;break;case"selected":yr=Ho;break;case"dangerouslySetInnerHTML":Sr=Ho;break;case"value":kn=Ho;default:B(Y,Je,It,Ho)}}if(Gt!=null)if(Ue=kn!==null?""+kn:G(Cn),O(Gt)){for(Je=0;Je<Gt.length;Je++)if(""+Gt[Je]===Ue){Y.push(' selected=""');break}}else""+Gt===Ue&&Y.push(' selected=""');else yr&&Y.push(' selected=""');return Y.push(">"),V(Y,Sr,Cn),Cn;case"textarea":Y.push(K("textarea")),Sr=Gt=It=null;for(Cn in Ue)if(n.call(Ue,Cn)&&(kn=Ue[Cn],kn!=null))switch(Cn){case"children":Sr=kn;break;case"value":It=kn;break;case"defaultValue":Gt=kn;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:B(Y,Je,Cn,kn)}if(It===null&&Gt!==null&&(It=Gt),Y.push(">"),Sr!=null){if(It!=null)throw Error(t(92));if(O(Sr)&&1<Sr.length)throw Error(t(93));It=""+Sr}return typeof It=="string"&&It[0]===`
`&&Y.push(`
`),It!==null&&Y.push(T(""+It)),null;case"input":Y.push(K("input")),kn=Sr=Cn=It=null;for(Gt in Ue)if(n.call(Ue,Gt)&&(yr=Ue[Gt],yr!=null))switch(Gt){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":kn=yr;break;case"defaultValue":Cn=yr;break;case"checked":Sr=yr;break;case"value":It=yr;break;default:B(Y,Je,Gt,yr)}return Sr!==null?B(Y,Je,"checked",Sr):kn!==null&&B(Y,Je,"checked",kn),It!==null?B(Y,Je,"value",It):Cn!==null&&B(Y,Je,"value",Cn),Y.push("/>"),null;case"menuitem":Y.push(K("menuitem"));for(var Is in Ue)if(n.call(Ue,Is)&&(It=Ue[Is],It!=null))switch(Is){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:B(Y,Je,Is,It)}return Y.push(">"),null;case"title":Y.push(K("title")),It=null;for(Ho in Ue)if(n.call(Ue,Ho)&&(Gt=Ue[Ho],Gt!=null))switch(Ho){case"children":It=Gt;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:B(Y,Je,Ho,Gt)}return Y.push(">"),It;case"listing":case"pre":Y.push(K(be)),Gt=It=null;for(kn in Ue)if(n.call(Ue,kn)&&(Cn=Ue[kn],Cn!=null))switch(kn){case"children":It=Cn;break;case"dangerouslySetInnerHTML":Gt=Cn;break;default:B(Y,Je,kn,Cn)}if(Y.push(">"),Gt!=null){if(It!=null)throw Error(t(60));if(typeof Gt!="object"||!("__html"in Gt))throw Error(t(61));Ue=Gt.__html,Ue!=null&&(typeof Ue=="string"&&0<Ue.length&&Ue[0]===`
`?Y.push(`
`,Ue):Y.push(""+Ue))}return typeof It=="string"&&It[0]===`
`&&Y.push(`
`),It;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":Y.push(K(be));for(var Qa in Ue)if(n.call(Ue,Qa)&&(It=Ue[Qa],It!=null))switch(Qa){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,be));default:B(Y,Je,Qa,It)}return Y.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return q(Y,Ue,be,Je);case"html":return Mt.insertionMode===0&&Y.push("<!DOCTYPE html>"),q(Y,Ue,be,Je);default:if(be.indexOf("-")===-1&&typeof Ue.is!="string")return q(Y,Ue,be,Je);Y.push(K(be)),Gt=It=null;for(yr in Ue)if(n.call(Ue,yr)&&(Cn=Ue[yr],Cn!=null))switch(yr){case"children":It=Cn;break;case"dangerouslySetInnerHTML":Gt=Cn;break;case"style":F(Y,Je,Cn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:l(yr)&&typeof Cn!="function"&&typeof Cn!="symbol"&&Y.push(" ",yr,'="',T(Cn),'"')}return Y.push(">"),V(Y,Gt,It),It}}function re(Y,be,Ue){if(Y.push('<!--$?--><template id="'),Ue===null)throw Error(t(395));return Y.push(Ue),Y.push('"></template>')}function oe(Y,be,Ue,Je){switch(Ue.insertionMode){case 0:case 1:return Y.push('<div hidden id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 2:return Y.push('<svg aria-hidden="true" style="display:none" id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 3:return Y.push('<math aria-hidden="true" style="display:none" id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 4:return Y.push('<table hidden id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 5:return Y.push('<table hidden><tbody id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 6:return Y.push('<table hidden><tr id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');case 7:return Y.push('<table hidden><colgroup id="'),Y.push(be.segmentPrefix),be=Je.toString(16),Y.push(be),Y.push('">');default:throw Error(t(397))}}function ue(Y,be){switch(be.insertionMode){case 0:case 1:return Y.push("</div>");case 2:return Y.push("</svg>");case 3:return Y.push("</math>");case 4:return Y.push("</table>");case 5:return Y.push("</tbody></table>");case 6:return Y.push("</tr></table>");case 7:return Y.push("</colgroup></table>");default:throw Error(t(397))}}var Q=/[<\u2028\u2029]/g;function ce(Y){return JSON.stringify(Y).replace(Q,function(be){switch(be){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function ae(Y,be){return be=be===void 0?"":be,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:be+"P:",segmentPrefix:be+"S:",boundaryPrefix:be+"B:",idPrefix:be,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:Y}}function fe(Y,be,Ue,Je){return Ue.generateStaticMarkup?(Y.push(T(be)),!1):(be===""?Y=Je:(Je&&Y.push("<!-- -->"),Y.push(T(be)),Y=!0),Y)}var le=Object.assign,pe=Symbol.for("react.element"),Fe=Symbol.for("react.portal"),Be=Symbol.for("react.fragment"),Ze=Symbol.for("react.strict_mode"),it=Symbol.for("react.profiler"),ot=Symbol.for("react.provider"),ut=Symbol.for("react.context"),st=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ee=Symbol.for("react.scope"),ye=Symbol.for("react.debug_trace_mode"),Ie=Symbol.for("react.legacy_hidden"),ge=Symbol.for("react.default_value"),$e=Symbol.iterator;function nt(Y){if(Y==null)return null;if(typeof Y=="function")return Y.displayName||Y.name||null;if(typeof Y=="string")return Y;switch(Y){case Be:return"Fragment";case Fe:return"Portal";case it:return"Profiler";case Ze:return"StrictMode";case ct:return"Suspense";case Ae:return"SuspenseList"}if(typeof Y=="object")switch(Y.$$typeof){case ut:return(Y.displayName||"Context")+".Consumer";case ot:return(Y._context.displayName||"Context")+".Provider";case st:var be=Y.render;return Y=Y.displayName,Y||(Y=be.displayName||be.name||"",Y=Y!==""?"ForwardRef("+Y+")":"ForwardRef"),Y;case Z:return be=Y.displayName||null,be!==null?be:nt(Y.type)||"Memo";case ne:be=Y._payload,Y=Y._init;try{return nt(Y(be))}catch{}}return null}var pt={};function wt(Y,be){if(Y=Y.contextTypes,!Y)return pt;var Ue={},Je;for(Je in Y)Ue[Je]=be[Je];return Ue}var mt=null;function zt(Y,be){if(Y!==be){Y.context._currentValue2=Y.parentValue,Y=Y.parent;var Ue=be.parent;if(Y===null){if(Ue!==null)throw Error(t(401))}else{if(Ue===null)throw Error(t(401));zt(Y,Ue)}be.context._currentValue2=be.value}}function Pt(Y){Y.context._currentValue2=Y.parentValue,Y=Y.parent,Y!==null&&Pt(Y)}function Zt(Y){var be=Y.parent;be!==null&&Zt(be),Y.context._currentValue2=Y.value}function We(Y,be){if(Y.context._currentValue2=Y.parentValue,Y=Y.parent,Y===null)throw Error(t(402));Y.depth===be.depth?zt(Y,be):We(Y,be)}function Ge(Y,be){var Ue=be.parent;if(Ue===null)throw Error(t(402));Y.depth===Ue.depth?zt(Y,Ue):Ge(Y,Ue),be.context._currentValue2=be.value}function Rt(Y){var be=mt;be!==Y&&(be===null?Zt(Y):Y===null?Pt(be):be.depth===Y.depth?zt(be,Y):be.depth>Y.depth?We(be,Y):Ge(be,Y),mt=Y)}var Dt={isMounted:function(){return!1},enqueueSetState:function(Y,be){Y=Y._reactInternals,Y.queue!==null&&Y.queue.push(be)},enqueueReplaceState:function(Y,be){Y=Y._reactInternals,Y.replace=!0,Y.queue=[be]},enqueueForceUpdate:function(){}};function qt(Y,be,Ue,Je){var Mt=Y.state!==void 0?Y.state:null;Y.updater=Dt,Y.props=Ue,Y.state=Mt;var It={queue:[],replace:!1};Y._reactInternals=It;var Gt=be.contextType;if(Y.context=typeof Gt=="object"&&Gt!==null?Gt._currentValue2:Je,Gt=be.getDerivedStateFromProps,typeof Gt=="function"&&(Gt=Gt(Ue,Mt),Mt=Gt==null?Mt:le({},Mt,Gt),Y.state=Mt),typeof be.getDerivedStateFromProps!="function"&&typeof Y.getSnapshotBeforeUpdate!="function"&&(typeof Y.UNSAFE_componentWillMount=="function"||typeof Y.componentWillMount=="function"))if(be=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),be!==Y.state&&Dt.enqueueReplaceState(Y,Y.state,null),It.queue!==null&&0<It.queue.length)if(be=It.queue,Gt=It.replace,It.queue=null,It.replace=!1,Gt&&be.length===1)Y.state=be[0];else{for(It=Gt?be[0]:Y.state,Mt=!0,Gt=Gt?1:0;Gt<be.length;Gt++){var Cn=be[Gt];Cn=typeof Cn=="function"?Cn.call(Y,It,Ue,Je):Cn,Cn!=null&&(Mt?(Mt=!1,It=le({},It,Cn)):le(It,Cn))}Y.state=It}else It.queue=null}var Yt={id:1,overflow:""};function xt(Y,be,Ue){var Je=Y.id;Y=Y.overflow;var Mt=32-Et(Je)-1;Je&=~(1<<Mt),Ue+=1;var It=32-Et(be)+Mt;if(30<It){var Gt=Mt-Mt%5;return It=(Je&(1<<Gt)-1).toString(32),Je>>=Gt,Mt-=Gt,{id:1<<32-Et(be)+Mt|Ue<<Mt|Je,overflow:It+Y}}return{id:1<<It|Ue<<Mt|Je,overflow:Y}}var Et=Math.clz32?Math.clz32:cn,St=Math.log,kt=Math.LN2;function cn(Y){return Y>>>=0,Y===0?32:31-(St(Y)/kt|0)|0}function an(Y,be){return Y===be&&(Y!==0||1/Y===1/be)||Y!==Y&&be!==be}var Qn=typeof Object.is=="function"?Object.is:an,tr=null,lr=null,Le=null,de=null,xe=!1,Ee=!1,Ye=0,lt=null,Ce=0;function ke(){if(tr===null)throw Error(t(321));return tr}function De(){if(0<Ce)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function He(){return de===null?Le===null?(xe=!1,Le=de=De()):(xe=!0,de=Le):de.next===null?(xe=!1,de=de.next=De()):(xe=!0,de=de.next),de}function vt(){lr=tr=null,Ee=!1,Le=null,Ce=0,de=lt=null}function Ct(Y,be){return typeof be=="function"?be(Y):be}function Nt(Y,be,Ue){if(tr=ke(),de=He(),xe){var Je=de.queue;if(be=Je.dispatch,lt!==null&&(Ue=lt.get(Je),Ue!==void 0)){lt.delete(Je),Je=de.memoizedState;do Je=Y(Je,Ue.action),Ue=Ue.next;while(Ue!==null);return de.memoizedState=Je,[Je,be]}return[de.memoizedState,be]}return Y=Y===Ct?typeof be=="function"?be():be:Ue!==void 0?Ue(be):be,de.memoizedState=Y,Y=de.queue={last:null,dispatch:null},Y=Y.dispatch=Ht.bind(null,tr,Y),[de.memoizedState,Y]}function jt(Y,be){if(tr=ke(),de=He(),be=be===void 0?null:be,de!==null){var Ue=de.memoizedState;if(Ue!==null&&be!==null){var Je=Ue[1];e:if(Je===null)Je=!1;else{for(var Mt=0;Mt<Je.length&&Mt<be.length;Mt++)if(!Qn(be[Mt],Je[Mt])){Je=!1;break e}Je=!0}if(Je)return Ue[0]}}return Y=Y(),de.memoizedState=[Y,be],Y}function Ht(Y,be,Ue){if(25<=Ce)throw Error(t(301));if(Y===tr)if(Ee=!0,Y={action:Ue,next:null},lt===null&&(lt=new Map),Ue=lt.get(be),Ue===void 0)lt.set(be,Y);else{for(be=Ue;be.next!==null;)be=be.next;be.next=Y}}function Ft(){throw Error(t(394))}function vn(){}var gn={readContext:function(Y){return Y._currentValue2},useContext:function(Y){return ke(),Y._currentValue2},useMemo:jt,useReducer:Nt,useRef:function(Y){tr=ke(),de=He();var be=de.memoizedState;return be===null?(Y={current:Y},de.memoizedState=Y):be},useState:function(Y){return Nt(Ct,Y)},useInsertionEffect:vn,useLayoutEffect:function(){},useCallback:function(Y,be){return jt(function(){return Y},be)},useImperativeHandle:vn,useEffect:vn,useDebugValue:vn,useDeferredValue:function(Y){return ke(),Y},useTransition:function(){return ke(),[!1,Ft]},useId:function(){var Y=lr.treeContext,be=Y.overflow;Y=Y.id,Y=(Y&~(1<<32-Et(Y)-1)).toString(32)+be;var Ue=_n;if(Ue===null)throw Error(t(404));return be=Ye++,Y=":"+Ue.idPrefix+"R"+Y,0<be&&(Y+="H"+be.toString(32)),Y+":"},useMutableSource:function(Y,be){return ke(),be(Y._source)},useSyncExternalStore:function(Y,be,Ue){if(Ue===void 0)throw Error(t(407));return Ue()}},_n=null,Dn=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function ft(Y){return console.error(Y),null}function dt(){}function Wt(Y,be,Ue,Je,Mt,It,Gt,Cn,kn){var yr=[],Sr=new Set;return be={destination:null,responseState:be,progressiveChunkSize:Je===void 0?12800:Je,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:Sr,pingedTasks:yr,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Mt===void 0?ft:Mt,onAllReady:dt,onShellReady:Gt===void 0?dt:Gt,onShellError:dt,onFatalError:dt},Ue=Bn(be,0,null,Ue,!1,!1),Ue.parentFlushed=!0,Y=Mn(be,Y,null,Ue,Sr,pt,null,Yt),yr.push(Y),be}function Mn(Y,be,Ue,Je,Mt,It,Gt,Cn){Y.allPendingTasks++,Ue===null?Y.pendingRootTasks++:Ue.pendingTasks++;var kn={node:be,ping:function(){var yr=Y.pingedTasks;yr.push(kn),yr.length===1&&Mo(Y)},blockedBoundary:Ue,blockedSegment:Je,abortSet:Mt,legacyContext:It,context:Gt,treeContext:Cn};return Mt.add(kn),kn}function Bn(Y,be,Ue,Je,Mt,It){return{status:0,id:-1,index:be,parentFlushed:!1,chunks:[],children:[],formatContext:Je,boundary:Ue,lastPushedText:Mt,textEmbedded:It}}function dr(Y,be){if(Y=Y.onError(be),Y!=null&&typeof Y!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof Y+'" instead');return Y}function qn(Y,be){var Ue=Y.onShellError;Ue(be),Ue=Y.onFatalError,Ue(be),Y.destination!==null?(Y.status=2,Y.destination.destroy(be)):(Y.status=1,Y.fatalError=be)}function to(Y,be,Ue,Je,Mt){for(tr={},lr=be,Ye=0,Y=Ue(Je,Mt);Ee;)Ee=!1,Ye=0,Ce+=1,de=null,Y=Ue(Je,Mt);return vt(),Y}function la(Y,be,Ue,Je){var Mt=Ue.render(),It=Je.childContextTypes;if(It!=null){var Gt=be.legacyContext;if(typeof Ue.getChildContext!="function")Je=Gt;else{Ue=Ue.getChildContext();for(var Cn in Ue)if(!(Cn in It))throw Error(t(108,nt(Je)||"Unknown",Cn));Je=le({},Gt,Ue)}be.legacyContext=Je,_i(Y,be,Mt),be.legacyContext=Gt}else _i(Y,be,Mt)}function ua(Y,be){if(Y&&Y.defaultProps){be=le({},be),Y=Y.defaultProps;for(var Ue in Y)be[Ue]===void 0&&(be[Ue]=Y[Ue]);return be}return be}function lo(Y,be,Ue,Je,Mt){if(typeof Ue=="function")if(Ue.prototype&&Ue.prototype.isReactComponent){Mt=wt(Ue,be.legacyContext);var It=Ue.contextType;It=new Ue(Je,typeof It=="object"&&It!==null?It._currentValue2:Mt),qt(It,Ue,Je,Mt),la(Y,be,It,Ue)}else{It=wt(Ue,be.legacyContext),Mt=to(Y,be,Ue,Je,It);var Gt=Ye!==0;if(typeof Mt=="object"&&Mt!==null&&typeof Mt.render=="function"&&Mt.$$typeof===void 0)qt(Mt,Ue,Je,It),la(Y,be,Mt,Ue);else if(Gt){Je=be.treeContext,be.treeContext=xt(Je,1,0);try{_i(Y,be,Mt)}finally{be.treeContext=Je}}else _i(Y,be,Mt)}else if(typeof Ue=="string"){switch(Mt=be.blockedSegment,It=te(Mt.chunks,Ue,Je,Y.responseState,Mt.formatContext),Mt.lastPushedText=!1,Gt=Mt.formatContext,Mt.formatContext=D(Gt,Ue,Je),no(Y,be,It),Mt.formatContext=Gt,Ue){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Mt.chunks.push("</",Ue,">")}Mt.lastPushedText=!1}else{switch(Ue){case Ie:case ye:case Ze:case it:case Be:_i(Y,be,Je.children);return;case Ae:_i(Y,be,Je.children);return;case ee:throw Error(t(343));case ct:e:{Ue=be.blockedBoundary,Mt=be.blockedSegment,It=Je.fallback,Je=Je.children,Gt=new Set;var Cn={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:Gt,errorDigest:null},kn=Bn(Y,Mt.chunks.length,Cn,Mt.formatContext,!1,!1);Mt.children.push(kn),Mt.lastPushedText=!1;var yr=Bn(Y,0,null,Mt.formatContext,!1,!1);yr.parentFlushed=!0,be.blockedBoundary=Cn,be.blockedSegment=yr;try{if(no(Y,be,Je),Y.responseState.generateStaticMarkup||yr.lastPushedText&&yr.textEmbedded&&yr.chunks.push("<!-- -->"),yr.status=1,ur(Cn,yr),Cn.pendingTasks===0)break e}catch(Sr){yr.status=4,Cn.forceClientRender=!0,Cn.errorDigest=dr(Y,Sr)}finally{be.blockedBoundary=Ue,be.blockedSegment=Mt}be=Mn(Y,It,Ue,kn,Gt,be.legacyContext,be.context,be.treeContext),Y.pingedTasks.push(be)}return}if(typeof Ue=="object"&&Ue!==null)switch(Ue.$$typeof){case st:if(Je=to(Y,be,Ue.render,Je,Mt),Ye!==0){Ue=be.treeContext,be.treeContext=xt(Ue,1,0);try{_i(Y,be,Je)}finally{be.treeContext=Ue}}else _i(Y,be,Je);return;case Z:Ue=Ue.type,Je=ua(Ue,Je),lo(Y,be,Ue,Je,Mt);return;case ot:if(Mt=Je.children,Ue=Ue._context,Je=Je.value,It=Ue._currentValue2,Ue._currentValue2=Je,Gt=mt,mt=Je={parent:Gt,depth:Gt===null?0:Gt.depth+1,context:Ue,parentValue:It,value:Je},be.context=Je,_i(Y,be,Mt),Y=mt,Y===null)throw Error(t(403));Je=Y.parentValue,Y.context._currentValue2=Je===ge?Y.context._defaultValue:Je,Y=mt=Y.parent,be.context=Y;return;case ut:Je=Je.children,Je=Je(Ue._currentValue2),_i(Y,be,Je);return;case ne:Mt=Ue._init,Ue=Mt(Ue._payload),Je=ua(Ue,Je),lo(Y,be,Ue,Je,void 0);return}throw Error(t(130,Ue==null?Ue:typeof Ue,""))}}function _i(Y,be,Ue){if(be.node=Ue,typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case pe:lo(Y,be,Ue.type,Ue.props,Ue.ref);return;case Fe:throw Error(t(257));case ne:var Je=Ue._init;Ue=Je(Ue._payload),_i(Y,be,Ue);return}if(O(Ue)){$n(Y,be,Ue);return}if(Ue===null||typeof Ue!="object"?Je=null:(Je=$e&&Ue[$e]||Ue["@@iterator"],Je=typeof Je=="function"?Je:null),Je&&(Je=Je.call(Ue))){if(Ue=Je.next(),!Ue.done){var Mt=[];do Mt.push(Ue.value),Ue=Je.next();while(!Ue.done);$n(Y,be,Mt)}return}throw Y=Object.prototype.toString.call(Ue),Error(t(31,Y==="[object Object]"?"object with keys {"+Object.keys(Ue).join(", ")+"}":Y))}typeof Ue=="string"?(Je=be.blockedSegment,Je.lastPushedText=fe(be.blockedSegment.chunks,Ue,Y.responseState,Je.lastPushedText)):typeof Ue=="number"&&(Je=be.blockedSegment,Je.lastPushedText=fe(be.blockedSegment.chunks,""+Ue,Y.responseState,Je.lastPushedText))}function $n(Y,be,Ue){for(var Je=Ue.length,Mt=0;Mt<Je;Mt++){var It=be.treeContext;be.treeContext=xt(It,Je,Mt);try{no(Y,be,Ue[Mt])}finally{be.treeContext=It}}}function no(Y,be,Ue){var Je=be.blockedSegment.formatContext,Mt=be.legacyContext,It=be.context;try{return _i(Y,be,Ue)}catch(kn){if(vt(),typeof kn=="object"&&kn!==null&&typeof kn.then=="function"){Ue=kn;var Gt=be.blockedSegment,Cn=Bn(Y,Gt.chunks.length,null,Gt.formatContext,Gt.lastPushedText,!0);Gt.children.push(Cn),Gt.lastPushedText=!1,Y=Mn(Y,be.node,be.blockedBoundary,Cn,be.abortSet,be.legacyContext,be.context,be.treeContext).ping,Ue.then(Y,Y),be.blockedSegment.formatContext=Je,be.legacyContext=Mt,be.context=It,Rt(It)}else throw be.blockedSegment.formatContext=Je,be.legacyContext=Mt,be.context=It,Rt(It),kn}}function vr(Y){var be=Y.blockedBoundary;Y=Y.blockedSegment,Y.status=3,ci(this,be,Y)}function uo(Y,be,Ue){var Je=Y.blockedBoundary;Y.blockedSegment.status=3,Je===null?(be.allPendingTasks--,be.status!==2&&(be.status=2,be.destination!==null&&be.destination.push(null))):(Je.pendingTasks--,Je.forceClientRender||(Je.forceClientRender=!0,Y=Ue===void 0?Error(t(432)):Ue,Je.errorDigest=be.onError(Y),Je.parentFlushed&&be.clientRenderedBoundaries.push(Je)),Je.fallbackAbortableTasks.forEach(function(Mt){return uo(Mt,be,Ue)}),Je.fallbackAbortableTasks.clear(),be.allPendingTasks--,be.allPendingTasks===0&&(Je=be.onAllReady,Je()))}function ur(Y,be){if(be.chunks.length===0&&be.children.length===1&&be.children[0].boundary===null){var Ue=be.children[0];Ue.id=be.id,Ue.parentFlushed=!0,Ue.status===1&&ur(Y,Ue)}else Y.completedSegments.push(be)}function ci(Y,be,Ue){if(be===null){if(Ue.parentFlushed){if(Y.completedRootSegment!==null)throw Error(t(389));Y.completedRootSegment=Ue}Y.pendingRootTasks--,Y.pendingRootTasks===0&&(Y.onShellError=dt,be=Y.onShellReady,be())}else be.pendingTasks--,be.forceClientRender||(be.pendingTasks===0?(Ue.parentFlushed&&Ue.status===1&&ur(be,Ue),be.parentFlushed&&Y.completedBoundaries.push(be),be.fallbackAbortableTasks.forEach(vr,Y),be.fallbackAbortableTasks.clear()):Ue.parentFlushed&&Ue.status===1&&(ur(be,Ue),be.completedSegments.length===1&&be.parentFlushed&&Y.partialBoundaries.push(be)));Y.allPendingTasks--,Y.allPendingTasks===0&&(Y=Y.onAllReady,Y())}function Mo(Y){if(Y.status!==2){var be=mt,Ue=Dn.current;Dn.current=gn;var Je=_n;_n=Y.responseState;try{var Mt=Y.pingedTasks,It;for(It=0;It<Mt.length;It++){var Gt=Mt[It],Cn=Y,kn=Gt.blockedSegment;if(kn.status===0){Rt(Gt.context);try{_i(Cn,Gt,Gt.node),Cn.responseState.generateStaticMarkup||kn.lastPushedText&&kn.textEmbedded&&kn.chunks.push("<!-- -->"),Gt.abortSet.delete(Gt),kn.status=1,ci(Cn,Gt.blockedBoundary,kn)}catch(wa){if(vt(),typeof wa=="object"&&wa!==null&&typeof wa.then=="function"){var yr=Gt.ping;wa.then(yr,yr)}else{Gt.abortSet.delete(Gt),kn.status=4;var Sr=Gt.blockedBoundary,Ho=wa,Is=dr(Cn,Ho);if(Sr===null?qn(Cn,Ho):(Sr.pendingTasks--,Sr.forceClientRender||(Sr.forceClientRender=!0,Sr.errorDigest=Is,Sr.parentFlushed&&Cn.clientRenderedBoundaries.push(Sr))),Cn.allPendingTasks--,Cn.allPendingTasks===0){var Qa=Cn.onAllReady;Qa()}}}finally{}}}Mt.splice(0,It),Y.destination!==null&&ba(Y,Y.destination)}catch(wa){dr(Y,wa),qn(Y,wa)}finally{_n=Je,Dn.current=Ue,Ue===gn&&Rt(be)}}}function Vi(Y,be,Ue){switch(Ue.parentFlushed=!0,Ue.status){case 0:var Je=Ue.id=Y.nextSegmentId++;return Ue.lastPushedText=!1,Ue.textEmbedded=!1,Y=Y.responseState,be.push('<template id="'),be.push(Y.placeholderPrefix),Y=Je.toString(16),be.push(Y),be.push('"></template>');case 1:Ue.status=2;var Mt=!0;Je=Ue.chunks;var It=0;Ue=Ue.children;for(var Gt=0;Gt<Ue.length;Gt++){for(Mt=Ue[Gt];It<Mt.index;It++)be.push(Je[It]);Mt=Ji(Y,be,Mt)}for(;It<Je.length-1;It++)be.push(Je[It]);return It<Je.length&&(Mt=be.push(Je[It])),Mt;default:throw Error(t(390))}}function Ji(Y,be,Ue){var Je=Ue.boundary;if(Je===null)return Vi(Y,be,Ue);if(Je.parentFlushed=!0,Je.forceClientRender)return Y.responseState.generateStaticMarkup||(Je=Je.errorDigest,be.push("<!--$!-->"),be.push("<template"),Je&&(be.push(' data-dgst="'),Je=T(Je),be.push(Je),be.push('"')),be.push("></template>")),Vi(Y,be,Ue),Y=Y.responseState.generateStaticMarkup?!0:be.push("<!--/$-->"),Y;if(0<Je.pendingTasks){Je.rootSegmentID=Y.nextSegmentId++,0<Je.completedSegments.length&&Y.partialBoundaries.push(Je);var Mt=Y.responseState,It=Mt.nextSuspenseID++;return Mt=Mt.boundaryPrefix+It.toString(16),Je=Je.id=Mt,re(be,Y.responseState,Je),Vi(Y,be,Ue),be.push("<!--/$-->")}if(Je.byteSize>Y.progressiveChunkSize)return Je.rootSegmentID=Y.nextSegmentId++,Y.completedBoundaries.push(Je),re(be,Y.responseState,Je.id),Vi(Y,be,Ue),be.push("<!--/$-->");if(Y.responseState.generateStaticMarkup||be.push("<!--$-->"),Ue=Je.completedSegments,Ue.length!==1)throw Error(t(391));return Ji(Y,be,Ue[0]),Y=Y.responseState.generateStaticMarkup?!0:be.push("<!--/$-->"),Y}function tl(Y,be,Ue){return oe(be,Y.responseState,Ue.formatContext,Ue.id),Ji(Y,be,Ue),ue(be,Ue.formatContext)}function di(Y,be,Ue){for(var Je=Ue.completedSegments,Mt=0;Mt<Je.length;Mt++)nl(Y,be,Ue,Je[Mt]);if(Je.length=0,Y=Y.responseState,Je=Ue.id,Ue=Ue.rootSegmentID,be.push(Y.startInlineScript),Y.sentCompleteBoundaryFunction?be.push('$RC("'):(Y.sentCompleteBoundaryFunction=!0,be.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),Je===null)throw Error(t(395));return Ue=Ue.toString(16),be.push(Je),be.push('","'),be.push(Y.segmentPrefix),be.push(Ue),be.push('")<\/script>')}function nl(Y,be,Ue,Je){if(Je.status===2)return!0;var Mt=Je.id;if(Mt===-1){if((Je.id=Ue.rootSegmentID)===-1)throw Error(t(392));return tl(Y,be,Je)}return tl(Y,be,Je),Y=Y.responseState,be.push(Y.startInlineScript),Y.sentCompleteSegmentFunction?be.push('$RS("'):(Y.sentCompleteSegmentFunction=!0,be.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),be.push(Y.segmentPrefix),Mt=Mt.toString(16),be.push(Mt),be.push('","'),be.push(Y.placeholderPrefix),be.push(Mt),be.push('")<\/script>')}function ba(Y,be){try{var Ue=Y.completedRootSegment;if(Ue!==null&&Y.pendingRootTasks===0){Ji(Y,be,Ue),Y.completedRootSegment=null;var Je=Y.responseState.bootstrapChunks;for(Ue=0;Ue<Je.length-1;Ue++)be.push(Je[Ue]);Ue<Je.length&&be.push(Je[Ue])}var Mt=Y.clientRenderedBoundaries,It;for(It=0;It<Mt.length;It++){var Gt=Mt[It];Je=be;var Cn=Y.responseState,kn=Gt.id,yr=Gt.errorDigest,Sr=Gt.errorMessage,Ho=Gt.errorComponentStack;if(Je.push(Cn.startInlineScript),Cn.sentClientRenderFunction?Je.push('$RX("'):(Cn.sentClientRenderFunction=!0,Je.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),kn===null)throw Error(t(395));if(Je.push(kn),Je.push('"'),yr||Sr||Ho){Je.push(",");var Is=ce(yr||"");Je.push(Is)}if(Sr||Ho){Je.push(",");var Qa=ce(Sr||"");Je.push(Qa)}if(Ho){Je.push(",");var wa=ce(Ho);Je.push(wa)}if(!Je.push(")<\/script>")){Y.destination=null,It++,Mt.splice(0,It);return}}Mt.splice(0,It);var Pl=Y.completedBoundaries;for(It=0;It<Pl.length;It++)if(!di(Y,be,Pl[It])){Y.destination=null,It++,Pl.splice(0,It);return}Pl.splice(0,It);var ds=Y.partialBoundaries;for(It=0;It<ds.length;It++){var hs=ds[It];e:{Mt=Y,Gt=be;var xa=hs.completedSegments;for(Cn=0;Cn<xa.length;Cn++)if(!nl(Mt,Gt,hs,xa[Cn])){Cn++,xa.splice(0,Cn);var ks=!1;break e}xa.splice(0,Cn),ks=!0}if(!ks){Y.destination=null,It++,ds.splice(0,It);return}}ds.splice(0,It);var fs=Y.completedBoundaries;for(It=0;It<fs.length;It++)if(!di(Y,be,fs[It])){Y.destination=null,It++,fs.splice(0,It);return}fs.splice(0,It)}finally{Y.allPendingTasks===0&&Y.pingedTasks.length===0&&Y.clientRenderedBoundaries.length===0&&Y.completedBoundaries.length===0&&be.push(null)}}function Or(Y,be){try{var Ue=Y.abortableTasks;Ue.forEach(function(Je){return uo(Je,Y,be)}),Ue.clear(),Y.destination!==null&&ba(Y,Y.destination)}catch(Je){dr(Y,Je),qn(Y,Je)}}function Ua(){}function wr(Y,be,Ue,Je){var Mt=!1,It=null,Gt="",Cn={push:function(yr){return yr!==null&&(Gt+=yr),!0},destroy:function(yr){Mt=!0,It=yr}},kn=!1;if(Y=Wt(Y,ae(Ue,be?be.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,Ua,void 0,function(){kn=!0}),Mo(Y),Or(Y,Je),Y.status===1)Y.status=2,Cn.destroy(Y.fatalError);else if(Y.status!==2&&Y.destination===null){Y.destination=Cn;try{ba(Y,Cn)}catch(yr){dr(Y,yr),qn(Y,yr)}}if(Mt)throw It;if(!kn)throw Error(t(426));return Gt}return pv.renderToNodeStream=function(){throw Error(t(207))},pv.renderToStaticMarkup=function(Y,be){return wr(Y,be,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},pv.renderToStaticNodeStream=function(){throw Error(t(208))},pv.renderToString=function(Y,be){return wr(Y,be,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},pv.version="18.3.1",pv}var aI={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cq;function wFe(){if(cq)return aI;cq=1;var e=w_();function t(X){for(var ve="https://reactjs.org/docs/error-decoder.html?invariant="+X,ze=1;ze<arguments.length;ze++)ve+="&args[]="+encodeURIComponent(arguments[ze]);return"Minified React error #"+X+"; visit "+ve+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=null,r=0;function o(X,ve){if(ve.length!==0)if(512<ve.length)0<r&&(X.enqueue(new Uint8Array(n.buffer,0,r)),n=new Uint8Array(512),r=0),X.enqueue(ve);else{var ze=n.length-r;ze<ve.length&&(ze===0?X.enqueue(n):(n.set(ve.subarray(0,ze),r),X.enqueue(n),ve=ve.subarray(ze)),n=new Uint8Array(512),r=0),n.set(ve,r),r+=ve.length}}function i(X,ve){return o(X,ve),!0}function l(X){n&&0<r&&(X.enqueue(new Uint8Array(n.buffer,0,r)),n=null,r=0)}var c=new TextEncoder;function f(X){return c.encode(X)}function p(X){return c.encode(X)}function g(X,ve){typeof X.error=="function"?X.error(ve):X.close()}var v=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},T={};function k(X){return v.call(T,X)?!0:v.call(C,X)?!1:w.test(X)?T[X]=!0:(C[X]=!0,!1)}function P(X,ve,ze,Qe,Ot,At,nn){this.acceptsBooleans=ve===2||ve===3||ve===4,this.attributeName=Qe,this.attributeNamespace=Ot,this.mustUseProperty=ze,this.propertyName=X,this.type=ve,this.sanitizeURL=At,this.removeEmptyString=nn}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(X){O[X]=new P(X,0,!1,X,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(X){var ve=X[0];O[ve]=new P(ve,1,!1,X[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(X){O[X]=new P(X,2,!1,X.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(X){O[X]=new P(X,2,!1,X,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(X){O[X]=new P(X,3,!1,X.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(X){O[X]=new P(X,3,!0,X,null,!1,!1)}),["capture","download"].forEach(function(X){O[X]=new P(X,4,!1,X,null,!1,!1)}),["cols","rows","size","span"].forEach(function(X){O[X]=new P(X,6,!1,X,null,!1,!1)}),["rowSpan","start"].forEach(function(X){O[X]=new P(X,5,!1,X.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function D(X){return X[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(X){var ve=X.replace(L,D);O[ve]=new P(ve,1,!1,X,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(X){var ve=X.replace(L,D);O[ve]=new P(ve,1,!1,X,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(X){var ve=X.replace(L,D);O[ve]=new P(ve,1,!1,X,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(X){O[X]=new P(X,1,!1,X.toLowerCase(),null,!1,!1)}),O.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(X){O[X]=new P(X,1,!1,X.toLowerCase(),null,!0,!0)});var N={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F=["Webkit","ms","Moz","O"];Object.keys(N).forEach(function(X){F.forEach(function(ve){ve=ve+X.charAt(0).toUpperCase()+X.substring(1),N[ve]=N[X]})});var B=/["'&<>]/;function V(X){if(typeof X=="boolean"||typeof X=="number")return""+X;X=""+X;var ve=B.exec(X);if(ve){var ze="",Qe,Ot=0;for(Qe=ve.index;Qe<X.length;Qe++){switch(X.charCodeAt(Qe)){case 34:ve="&quot;";break;case 38:ve="&amp;";break;case 39:ve="&#x27;";break;case 60:ve="&lt;";break;case 62:ve="&gt;";break;default:continue}Ot!==Qe&&(ze+=X.substring(Ot,Qe)),Ot=Qe+1,ze+=ve}X=Ot!==Qe?ze+X.substring(Ot,Qe):ze}return X}var G=/([A-Z])/g,q=/^ms-/,z=Array.isArray,$=p("<script>"),K=p("<\/script>"),te=p('<script src="'),re=p('<script type="module" src="'),oe=p('" async=""><\/script>'),ue=/(<\/|<)(s)(cript)/gi;function Q(X,ve,ze,Qe){return""+ve+(ze==="s"?"\\u0073":"\\u0053")+Qe}function ce(X,ve,ze,Qe,Ot){X=X===void 0?"":X,ve=ve===void 0?$:p('<script nonce="'+V(ve)+'">');var At=[];if(ze!==void 0&&At.push(ve,f((""+ze).replace(ue,Q)),K),Qe!==void 0)for(ze=0;ze<Qe.length;ze++)At.push(te,f(V(Qe[ze])),oe);if(Ot!==void 0)for(Qe=0;Qe<Ot.length;Qe++)At.push(re,f(V(Ot[Qe])),oe);return{bootstrapChunks:At,startInlineScript:ve,placeholderPrefix:p(X+"P:"),segmentPrefix:p(X+"S:"),boundaryPrefix:X+"B:",idPrefix:X,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function ae(X,ve){return{insertionMode:X,selectedValue:ve}}function fe(X){return ae(X==="http://www.w3.org/2000/svg"?2:X==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function le(X,ve,ze){switch(ve){case"select":return ae(1,ze.value!=null?ze.value:ze.defaultValue);case"svg":return ae(2,null);case"math":return ae(3,null);case"foreignObject":return ae(1,null);case"table":return ae(4,null);case"thead":case"tbody":case"tfoot":return ae(5,null);case"colgroup":return ae(7,null);case"tr":return ae(6,null)}return 4<=X.insertionMode||X.insertionMode===0?ae(1,null):X}var pe=p("<!-- -->");function Fe(X,ve,ze,Qe){return ve===""?Qe:(Qe&&X.push(pe),X.push(f(V(ve))),!0)}var Be=new Map,Ze=p(' style="'),it=p(":"),ot=p(";");function ut(X,ve,ze){if(typeof ze!="object")throw Error(t(62));ve=!0;for(var Qe in ze)if(v.call(ze,Qe)){var Ot=ze[Qe];if(Ot!=null&&typeof Ot!="boolean"&&Ot!==""){if(Qe.indexOf("--")===0){var At=f(V(Qe));Ot=f(V((""+Ot).trim()))}else{At=Qe;var nn=Be.get(At);nn!==void 0||(nn=p(V(At.replace(G,"-$1").toLowerCase().replace(q,"-ms-"))),Be.set(At,nn)),At=nn,Ot=typeof Ot=="number"?Ot===0||v.call(N,Qe)?f(""+Ot):f(Ot+"px"):f(V((""+Ot).trim()))}ve?(ve=!1,X.push(Ze,At,it,Ot)):X.push(ot,At,it,Ot)}}ve||X.push(Ae)}var st=p(" "),ct=p('="'),Ae=p('"'),Z=p('=""');function ne(X,ve,ze,Qe){switch(ze){case"style":ut(X,ve,Qe);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<ze.length)||ze[0]!=="o"&&ze[0]!=="O"||ze[1]!=="n"&&ze[1]!=="N"){if(ve=O.hasOwnProperty(ze)?O[ze]:null,ve!==null){switch(typeof Qe){case"function":case"symbol":return;case"boolean":if(!ve.acceptsBooleans)return}switch(ze=f(ve.attributeName),ve.type){case 3:Qe&&X.push(st,ze,Z);break;case 4:Qe===!0?X.push(st,ze,Z):Qe!==!1&&X.push(st,ze,ct,f(V(Qe)),Ae);break;case 5:isNaN(Qe)||X.push(st,ze,ct,f(V(Qe)),Ae);break;case 6:!isNaN(Qe)&&1<=Qe&&X.push(st,ze,ct,f(V(Qe)),Ae);break;default:ve.sanitizeURL&&(Qe=""+Qe),X.push(st,ze,ct,f(V(Qe)),Ae)}}else if(k(ze)){switch(typeof Qe){case"function":case"symbol":return;case"boolean":if(ve=ze.toLowerCase().slice(0,5),ve!=="data-"&&ve!=="aria-")return}X.push(st,f(ze),ct,f(V(Qe)),Ae)}}}var ee=p(">"),ye=p("/>");function Ie(X,ve,ze){if(ve!=null){if(ze!=null)throw Error(t(60));if(typeof ve!="object"||!("__html"in ve))throw Error(t(61));ve=ve.__html,ve!=null&&X.push(f(""+ve))}}function ge(X){var ve="";return e.Children.forEach(X,function(ze){ze!=null&&(ve+=ze)}),ve}var $e=p(' selected=""');function nt(X,ve,ze,Qe){X.push(zt(ze));var Ot=ze=null,At;for(At in ve)if(v.call(ve,At)){var nn=ve[At];if(nn!=null)switch(At){case"children":ze=nn;break;case"dangerouslySetInnerHTML":Ot=nn;break;default:ne(X,Qe,At,nn)}}return X.push(ee),Ie(X,Ot,ze),typeof ze=="string"?(X.push(f(V(ze))),null):ze}var pt=p(`
`),wt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,mt=new Map;function zt(X){var ve=mt.get(X);if(ve===void 0){if(!wt.test(X))throw Error(t(65,X));ve=p("<"+X),mt.set(X,ve)}return ve}var Pt=p("<!DOCTYPE html>");function Zt(X,ve,ze,Qe,Ot){switch(ve){case"select":X.push(zt("select"));var At=null,nn=null;for(xr in ze)if(v.call(ze,xr)){var xn=ze[xr];if(xn!=null)switch(xr){case"children":At=xn;break;case"dangerouslySetInnerHTML":nn=xn;break;case"defaultValue":case"value":break;default:ne(X,Qe,xr,xn)}}return X.push(ee),Ie(X,nn,At),At;case"option":nn=Ot.selectedValue,X.push(zt("option"));var fr=xn=null,Tr=null,xr=null;for(At in ze)if(v.call(ze,At)){var Jo=ze[At];if(Jo!=null)switch(At){case"children":xn=Jo;break;case"selected":Tr=Jo;break;case"dangerouslySetInnerHTML":xr=Jo;break;case"value":fr=Jo;default:ne(X,Qe,At,Jo)}}if(nn!=null)if(ze=fr!==null?""+fr:ge(xn),z(nn)){for(Qe=0;Qe<nn.length;Qe++)if(""+nn[Qe]===ze){X.push($e);break}}else""+nn===ze&&X.push($e);else Tr&&X.push($e);return X.push(ee),Ie(X,xr,xn),xn;case"textarea":X.push(zt("textarea")),xr=nn=At=null;for(xn in ze)if(v.call(ze,xn)&&(fr=ze[xn],fr!=null))switch(xn){case"children":xr=fr;break;case"value":At=fr;break;case"defaultValue":nn=fr;break;case"dangerouslySetInnerHTML":throw Error(t(91));default:ne(X,Qe,xn,fr)}if(At===null&&nn!==null&&(At=nn),X.push(ee),xr!=null){if(At!=null)throw Error(t(92));if(z(xr)&&1<xr.length)throw Error(t(93));At=""+xr}return typeof At=="string"&&At[0]===`
`&&X.push(pt),At!==null&&X.push(f(V(""+At))),null;case"input":X.push(zt("input")),fr=xr=xn=At=null;for(nn in ze)if(v.call(ze,nn)&&(Tr=ze[nn],Tr!=null))switch(nn){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,"input"));case"defaultChecked":fr=Tr;break;case"defaultValue":xn=Tr;break;case"checked":xr=Tr;break;case"value":At=Tr;break;default:ne(X,Qe,nn,Tr)}return xr!==null?ne(X,Qe,"checked",xr):fr!==null&&ne(X,Qe,"checked",fr),At!==null?ne(X,Qe,"value",At):xn!==null&&ne(X,Qe,"value",xn),X.push(ye),null;case"menuitem":X.push(zt("menuitem"));for(var Yr in ze)if(v.call(ze,Yr)&&(At=ze[Yr],At!=null))switch(Yr){case"children":case"dangerouslySetInnerHTML":throw Error(t(400));default:ne(X,Qe,Yr,At)}return X.push(ee),null;case"title":X.push(zt("title")),At=null;for(Jo in ze)if(v.call(ze,Jo)&&(nn=ze[Jo],nn!=null))switch(Jo){case"children":At=nn;break;case"dangerouslySetInnerHTML":throw Error(t(434));default:ne(X,Qe,Jo,nn)}return X.push(ee),At;case"listing":case"pre":X.push(zt(ve)),nn=At=null;for(fr in ze)if(v.call(ze,fr)&&(xn=ze[fr],xn!=null))switch(fr){case"children":At=xn;break;case"dangerouslySetInnerHTML":nn=xn;break;default:ne(X,Qe,fr,xn)}if(X.push(ee),nn!=null){if(At!=null)throw Error(t(60));if(typeof nn!="object"||!("__html"in nn))throw Error(t(61));ze=nn.__html,ze!=null&&(typeof ze=="string"&&0<ze.length&&ze[0]===`
`?X.push(pt,f(ze)):X.push(f(""+ze)))}return typeof At=="string"&&At[0]===`
`&&X.push(pt),At;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":X.push(zt(ve));for(var ca in ze)if(v.call(ze,ca)&&(At=ze[ca],At!=null))switch(ca){case"children":case"dangerouslySetInnerHTML":throw Error(t(399,ve));default:ne(X,Qe,ca,At)}return X.push(ye),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return nt(X,ze,ve,Qe);case"html":return Ot.insertionMode===0&&X.push(Pt),nt(X,ze,ve,Qe);default:if(ve.indexOf("-")===-1&&typeof ze.is!="string")return nt(X,ze,ve,Qe);X.push(zt(ve)),nn=At=null;for(Tr in ze)if(v.call(ze,Tr)&&(xn=ze[Tr],xn!=null))switch(Tr){case"children":At=xn;break;case"dangerouslySetInnerHTML":nn=xn;break;case"style":ut(X,Qe,xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:k(Tr)&&typeof xn!="function"&&typeof xn!="symbol"&&X.push(st,f(Tr),ct,f(V(xn)),Ae)}return X.push(ee),Ie(X,nn,At),At}}var We=p("</"),Ge=p(">"),Rt=p('<template id="'),Dt=p('"></template>'),qt=p("<!--$-->"),Yt=p('<!--$?--><template id="'),xt=p('"></template>'),Et=p("<!--$!-->"),St=p("<!--/$-->"),kt=p("<template"),cn=p('"'),an=p(' data-dgst="');p(' data-msg="'),p(' data-stck="');var Qn=p("></template>");function tr(X,ve,ze){if(o(X,Yt),ze===null)throw Error(t(395));return o(X,ze),i(X,xt)}var lr=p('<div hidden id="'),Le=p('">'),de=p("</div>"),xe=p('<svg aria-hidden="true" style="display:none" id="'),Ee=p('">'),Ye=p("</svg>"),lt=p('<math aria-hidden="true" style="display:none" id="'),Ce=p('">'),ke=p("</math>"),De=p('<table hidden id="'),He=p('">'),vt=p("</table>"),Ct=p('<table hidden><tbody id="'),Nt=p('">'),jt=p("</tbody></table>"),Ht=p('<table hidden><tr id="'),Ft=p('">'),vn=p("</tr></table>"),gn=p('<table hidden><colgroup id="'),_n=p('">'),Dn=p("</colgroup></table>");function ft(X,ve,ze,Qe){switch(ze.insertionMode){case 0:case 1:return o(X,lr),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,Le);case 2:return o(X,xe),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,Ee);case 3:return o(X,lt),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,Ce);case 4:return o(X,De),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,He);case 5:return o(X,Ct),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,Nt);case 6:return o(X,Ht),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,Ft);case 7:return o(X,gn),o(X,ve.segmentPrefix),o(X,f(Qe.toString(16))),i(X,_n);default:throw Error(t(397))}}function dt(X,ve){switch(ve.insertionMode){case 0:case 1:return i(X,de);case 2:return i(X,Ye);case 3:return i(X,ke);case 4:return i(X,vt);case 5:return i(X,jt);case 6:return i(X,vn);case 7:return i(X,Dn);default:throw Error(t(397))}}var Wt=p('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Mn=p('$RS("'),Bn=p('","'),dr=p('")<\/script>'),qn=p('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),to=p('$RC("'),la=p('","'),ua=p('")<\/script>'),lo=p('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),_i=p('$RX("'),$n=p('"'),no=p(")<\/script>"),vr=p(","),uo=/[<\u2028\u2029]/g;function ur(X){return JSON.stringify(X).replace(uo,function(ve){switch(ve){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var ci=Object.assign,Mo=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Ji=Symbol.for("react.fragment"),tl=Symbol.for("react.strict_mode"),di=Symbol.for("react.profiler"),nl=Symbol.for("react.provider"),ba=Symbol.for("react.context"),Or=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),wr=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Ue=Symbol.for("react.scope"),Je=Symbol.for("react.debug_trace_mode"),Mt=Symbol.for("react.legacy_hidden"),It=Symbol.for("react.default_value"),Gt=Symbol.iterator;function Cn(X){if(X==null)return null;if(typeof X=="function")return X.displayName||X.name||null;if(typeof X=="string")return X;switch(X){case Ji:return"Fragment";case Vi:return"Portal";case di:return"Profiler";case tl:return"StrictMode";case Ua:return"Suspense";case wr:return"SuspenseList"}if(typeof X=="object")switch(X.$$typeof){case ba:return(X.displayName||"Context")+".Consumer";case nl:return(X._context.displayName||"Context")+".Provider";case Or:var ve=X.render;return X=X.displayName,X||(X=ve.displayName||ve.name||"",X=X!==""?"ForwardRef("+X+")":"ForwardRef"),X;case Y:return ve=X.displayName||null,ve!==null?ve:Cn(X.type)||"Memo";case be:ve=X._payload,X=X._init;try{return Cn(X(ve))}catch{}}return null}var kn={};function yr(X,ve){if(X=X.contextTypes,!X)return kn;var ze={},Qe;for(Qe in X)ze[Qe]=ve[Qe];return ze}var Sr=null;function Ho(X,ve){if(X!==ve){X.context._currentValue=X.parentValue,X=X.parent;var ze=ve.parent;if(X===null){if(ze!==null)throw Error(t(401))}else{if(ze===null)throw Error(t(401));Ho(X,ze)}ve.context._currentValue=ve.value}}function Is(X){X.context._currentValue=X.parentValue,X=X.parent,X!==null&&Is(X)}function Qa(X){var ve=X.parent;ve!==null&&Qa(ve),X.context._currentValue=X.value}function wa(X,ve){if(X.context._currentValue=X.parentValue,X=X.parent,X===null)throw Error(t(402));X.depth===ve.depth?Ho(X,ve):wa(X,ve)}function Pl(X,ve){var ze=ve.parent;if(ze===null)throw Error(t(402));X.depth===ze.depth?Ho(X,ze):Pl(X,ze),ve.context._currentValue=ve.value}function ds(X){var ve=Sr;ve!==X&&(ve===null?Qa(X):X===null?Is(ve):ve.depth===X.depth?Ho(ve,X):ve.depth>X.depth?wa(ve,X):Pl(ve,X),Sr=X)}var hs={isMounted:function(){return!1},enqueueSetState:function(X,ve){X=X._reactInternals,X.queue!==null&&X.queue.push(ve)},enqueueReplaceState:function(X,ve){X=X._reactInternals,X.replace=!0,X.queue=[ve]},enqueueForceUpdate:function(){}};function xa(X,ve,ze,Qe){var Ot=X.state!==void 0?X.state:null;X.updater=hs,X.props=ze,X.state=Ot;var At={queue:[],replace:!1};X._reactInternals=At;var nn=ve.contextType;if(X.context=typeof nn=="object"&&nn!==null?nn._currentValue:Qe,nn=ve.getDerivedStateFromProps,typeof nn=="function"&&(nn=nn(ze,Ot),Ot=nn==null?Ot:ci({},Ot,nn),X.state=Ot),typeof ve.getDerivedStateFromProps!="function"&&typeof X.getSnapshotBeforeUpdate!="function"&&(typeof X.UNSAFE_componentWillMount=="function"||typeof X.componentWillMount=="function"))if(ve=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),ve!==X.state&&hs.enqueueReplaceState(X,X.state,null),At.queue!==null&&0<At.queue.length)if(ve=At.queue,nn=At.replace,At.queue=null,At.replace=!1,nn&&ve.length===1)X.state=ve[0];else{for(At=nn?ve[0]:X.state,Ot=!0,nn=nn?1:0;nn<ve.length;nn++){var xn=ve[nn];xn=typeof xn=="function"?xn.call(X,At,ze,Qe):xn,xn!=null&&(Ot?(Ot=!1,At=ci({},At,xn)):ci(At,xn))}X.state=At}else At.queue=null}var ks={id:1,overflow:""};function fs(X,ve,ze){var Qe=X.id;X=X.overflow;var Ot=32-Ja(Qe)-1;Qe&=~(1<<Ot),ze+=1;var At=32-Ja(ve)+Ot;if(30<At){var nn=Ot-Ot%5;return At=(Qe&(1<<nn)-1).toString(32),Qe>>=nn,Ot-=nn,{id:1<<32-Ja(ve)+Ot|ze<<Ot|Qe,overflow:At+X}}return{id:1<<At|ze<<Ot|Qe,overflow:X}}var Ja=Math.clz32?Math.clz32:Im,Ps=Math.log,ps=Math.LN2;function Im(X){return X>>>=0,X===0?32:31-(Ps(X)/ps|0)|0}function Mu(X,ve){return X===ve&&(X!==0||1/X===1/ve)||X!==X&&ve!==ve}var Bh=typeof Object.is=="function"?Object.is:Mu,es=null,eu=null,Ru=null,po=null,As=!1,Dr=!1,Al=0,Ca=null,fc=0;function ea(){if(es===null)throw Error(t(321));return es}function Aa(){if(0<fc)throw Error(t(312));return{memoizedState:null,queue:null,next:null}}function Ou(){return po===null?Ru===null?(As=!1,Ru=po=Aa()):(As=!0,po=Ru):po.next===null?(As=!1,po=po.next=Aa()):(As=!0,po=po.next),po}function tu(){eu=es=null,Dr=!1,Ru=null,fc=0,po=Ca=null}function Xc(X,ve){return typeof ve=="function"?ve(X):ve}function Ml(X,ve,ze){if(es=ea(),po=Ou(),As){var Qe=po.queue;if(ve=Qe.dispatch,Ca!==null&&(ze=Ca.get(Qe),ze!==void 0)){Ca.delete(Qe),Qe=po.memoizedState;do Qe=X(Qe,ze.action),ze=ze.next;while(ze!==null);return po.memoizedState=Qe,[Qe,ve]}return[po.memoizedState,ve]}return X=X===Xc?typeof ve=="function"?ve():ve:ze!==void 0?ze(ve):ve,po.memoizedState=X,X=po.queue={last:null,dispatch:null},X=X.dispatch=nu.bind(null,es,X),[po.memoizedState,X]}function qd(X,ve){if(es=ea(),po=Ou(),ve=ve===void 0?null:ve,po!==null){var ze=po.memoizedState;if(ze!==null&&ve!==null){var Qe=ze[1];e:if(Qe===null)Qe=!1;else{for(var Ot=0;Ot<Qe.length&&Ot<ve.length;Ot++)if(!Bh(ve[Ot],Qe[Ot])){Qe=!1;break e}Qe=!0}if(Qe)return ze[0]}}return X=X(),po.memoizedState=[X,ve],X}function nu(X,ve,ze){if(25<=fc)throw Error(t(301));if(X===es)if(Dr=!0,X={action:ze,next:null},Ca===null&&(Ca=new Map),ze=Ca.get(ve),ze===void 0)Ca.set(ve,X);else{for(ve=ze;ve.next!==null;)ve=ve.next;ve.next=X}}function Qc(){throw Error(t(394))}function rl(){}var ms={readContext:function(X){return X._currentValue},useContext:function(X){return ea(),X._currentValue},useMemo:qd,useReducer:Ml,useRef:function(X){es=ea(),po=Ou();var ve=po.memoizedState;return ve===null?(X={current:X},po.memoizedState=X):ve},useState:function(X){return Ml(Xc,X)},useInsertionEffect:rl,useLayoutEffect:function(){},useCallback:function(X,ve){return qd(function(){return X},ve)},useImperativeHandle:rl,useEffect:rl,useDebugValue:rl,useDeferredValue:function(X){return ea(),X},useTransition:function(){return ea(),[!1,Qc]},useId:function(){var X=eu.treeContext,ve=X.overflow;X=X.id,X=(X&~(1<<32-Ja(X)-1)).toString(32)+ve;var ze=Du;if(ze===null)throw Error(t(404));return ve=Al++,X=":"+ze.idPrefix+"R"+X,0<ve&&(X+="H"+ve.toString(32)),X+":"},useMutableSource:function(X,ve){return ea(),ve(X._source)},useSyncExternalStore:function(X,ve,ze){if(ze===void 0)throw Error(t(407));return ze()}},Du=null,qi=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function pc(X){return console.error(X),null}function ru(){}function ol(X,ve,ze,Qe,Ot,At,nn,xn,fr){var Tr=[],xr=new Set;return ve={destination:null,responseState:ve,progressiveChunkSize:Qe===void 0?12800:Qe,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:xr,pingedTasks:Tr,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:Ot===void 0?pc:Ot,onAllReady:At===void 0?ru:At,onShellReady:nn===void 0?ru:nn,onShellError:xn===void 0?ru:xn,onFatalError:fr===void 0?ru:fr},ze=il(ve,0,null,ze,!1,!1),ze.parentFlushed=!0,X=Gd(ve,X,null,ze,xr,kn,null,ks),Tr.push(X),ve}function Gd(X,ve,ze,Qe,Ot,At,nn,xn){X.allPendingTasks++,ze===null?X.pendingRootTasks++:ze.pendingTasks++;var fr={node:ve,ping:function(){var Tr=X.pingedTasks;Tr.push(fr),Tr.length===1&&Jc(X)},blockedBoundary:ze,blockedSegment:Qe,abortSet:Ot,legacyContext:At,context:nn,treeContext:xn};return Ot.add(fr),fr}function il(X,ve,ze,Qe,Ot,At){return{status:0,id:-1,index:ve,parentFlushed:!1,chunks:[],children:[],formatContext:Qe,boundary:ze,lastPushedText:Ot,textEmbedded:At}}function Ms(X,ve){if(X=X.onError(ve),X!=null&&typeof X!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof X+'" instead');return X}function ou(X,ve){var ze=X.onShellError;ze(ve),ze=X.onFatalError,ze(ve),X.destination!==null?(X.status=2,g(X.destination,ve)):(X.status=1,X.fatalError=ve)}function mc(X,ve,ze,Qe,Ot){for(es={},eu=ve,Al=0,X=ze(Qe,Ot);Dr;)Dr=!1,Al=0,fc+=1,po=null,X=ze(Qe,Ot);return tu(),X}function Zr(X,ve,ze,Qe){var Ot=ze.render(),At=Qe.childContextTypes;if(At!=null){var nn=ve.legacyContext;if(typeof ze.getChildContext!="function")Qe=nn;else{ze=ze.getChildContext();for(var xn in ze)if(!(xn in At))throw Error(t(108,Cn(Qe)||"Unknown",xn));Qe=ci({},nn,ze)}ve.legacyContext=Qe,ts(X,ve,Ot),ve.legacyContext=nn}else ts(X,ve,Ot)}function Wd(X,ve){if(X&&X.defaultProps){ve=ci({},ve),X=X.defaultProps;for(var ze in X)ve[ze]===void 0&&(ve[ze]=X[ze]);return ve}return ve}function Qf(X,ve,ze,Qe,Ot){if(typeof ze=="function")if(ze.prototype&&ze.prototype.isReactComponent){Ot=yr(ze,ve.legacyContext);var At=ze.contextType;At=new ze(Qe,typeof At=="object"&&At!==null?At._currentValue:Ot),xa(At,ze,Qe,Ot),Zr(X,ve,At,ze)}else{At=yr(ze,ve.legacyContext),Ot=mc(X,ve,ze,Qe,At);var nn=Al!==0;if(typeof Ot=="object"&&Ot!==null&&typeof Ot.render=="function"&&Ot.$$typeof===void 0)xa(Ot,ze,Qe,At),Zr(X,ve,Ot,ze);else if(nn){Qe=ve.treeContext,ve.treeContext=fs(Qe,1,0);try{ts(X,ve,Ot)}finally{ve.treeContext=Qe}}else ts(X,ve,Ot)}else if(typeof ze=="string"){switch(Ot=ve.blockedSegment,At=Zt(Ot.chunks,ze,Qe,X.responseState,Ot.formatContext),Ot.lastPushedText=!1,nn=Ot.formatContext,Ot.formatContext=le(nn,ze,Qe),Jf(X,ve,At),Ot.formatContext=nn,ze){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:Ot.chunks.push(We,f(ze),Ge)}Ot.lastPushedText=!1}else{switch(ze){case Mt:case Je:case tl:case di:case Ji:ts(X,ve,Qe.children);return;case wr:ts(X,ve,Qe.children);return;case Ue:throw Error(t(343));case Ua:e:{ze=ve.blockedBoundary,Ot=ve.blockedSegment,At=Qe.fallback,Qe=Qe.children,nn=new Set;var xn={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:nn,errorDigest:null},fr=il(X,Ot.chunks.length,xn,Ot.formatContext,!1,!1);Ot.children.push(fr),Ot.lastPushedText=!1;var Tr=il(X,0,null,Ot.formatContext,!1,!1);Tr.parentFlushed=!0,ve.blockedBoundary=xn,ve.blockedSegment=Tr;try{if(Jf(X,ve,Qe),Tr.lastPushedText&&Tr.textEmbedded&&Tr.chunks.push(pe),Tr.status=1,Uh(xn,Tr),xn.pendingTasks===0)break e}catch(xr){Tr.status=4,xn.forceClientRender=!0,xn.errorDigest=Ms(X,xr)}finally{ve.blockedBoundary=ze,ve.blockedSegment=Ot}ve=Gd(X,At,ze,fr,nn,ve.legacyContext,ve.context,ve.treeContext),X.pingedTasks.push(ve)}return}if(typeof ze=="object"&&ze!==null)switch(ze.$$typeof){case Or:if(Qe=mc(X,ve,ze.render,Qe,Ot),Al!==0){ze=ve.treeContext,ve.treeContext=fs(ze,1,0);try{ts(X,ve,Qe)}finally{ve.treeContext=ze}}else ts(X,ve,Qe);return;case Y:ze=ze.type,Qe=Wd(ze,Qe),Qf(X,ve,ze,Qe,Ot);return;case nl:if(Ot=Qe.children,ze=ze._context,Qe=Qe.value,At=ze._currentValue,ze._currentValue=Qe,nn=Sr,Sr=Qe={parent:nn,depth:nn===null?0:nn.depth+1,context:ze,parentValue:At,value:Qe},ve.context=Qe,ts(X,ve,Ot),X=Sr,X===null)throw Error(t(403));Qe=X.parentValue,X.context._currentValue=Qe===It?X.context._defaultValue:Qe,X=Sr=X.parent,ve.context=X;return;case ba:Qe=Qe.children,Qe=Qe(ze._currentValue),ts(X,ve,Qe);return;case be:Ot=ze._init,ze=Ot(ze._payload),Qe=Wd(ze,Qe),Qf(X,ve,ze,Qe,void 0);return}throw Error(t(130,ze==null?ze:typeof ze,""))}}function ts(X,ve,ze){if(ve.node=ze,typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case Mo:Qf(X,ve,ze.type,ze.props,ze.ref);return;case Vi:throw Error(t(257));case be:var Qe=ze._init;ze=Qe(ze._payload),ts(X,ve,ze);return}if(z(ze)){Lu(X,ve,ze);return}if(ze===null||typeof ze!="object"?Qe=null:(Qe=Gt&&ze[Gt]||ze["@@iterator"],Qe=typeof Qe=="function"?Qe:null),Qe&&(Qe=Qe.call(ze))){if(ze=Qe.next(),!ze.done){var Ot=[];do Ot.push(ze.value),ze=Qe.next();while(!ze.done);Lu(X,ve,Ot)}return}throw X=Object.prototype.toString.call(ze),Error(t(31,X==="[object Object]"?"object with keys {"+Object.keys(ze).join(", ")+"}":X))}typeof ze=="string"?(Qe=ve.blockedSegment,Qe.lastPushedText=Fe(ve.blockedSegment.chunks,ze,X.responseState,Qe.lastPushedText)):typeof ze=="number"&&(Qe=ve.blockedSegment,Qe.lastPushedText=Fe(ve.blockedSegment.chunks,""+ze,X.responseState,Qe.lastPushedText))}function Lu(X,ve,ze){for(var Qe=ze.length,Ot=0;Ot<Qe;Ot++){var At=ve.treeContext;ve.treeContext=fs(At,Qe,Ot);try{Jf(X,ve,ze[Ot])}finally{ve.treeContext=At}}}function Jf(X,ve,ze){var Qe=ve.blockedSegment.formatContext,Ot=ve.legacyContext,At=ve.context;try{return ts(X,ve,ze)}catch(fr){if(tu(),typeof fr=="object"&&fr!==null&&typeof fr.then=="function"){ze=fr;var nn=ve.blockedSegment,xn=il(X,nn.chunks.length,null,nn.formatContext,nn.lastPushedText,!0);nn.children.push(xn),nn.lastPushedText=!1,X=Gd(X,ve.node,ve.blockedBoundary,xn,ve.abortSet,ve.legacyContext,ve.context,ve.treeContext).ping,ze.then(X,X),ve.blockedSegment.formatContext=Qe,ve.legacyContext=Ot,ve.context=At,ds(At)}else throw ve.blockedSegment.formatContext=Qe,ve.legacyContext=Ot,ve.context=At,ds(At),fr}}function _y(X){var ve=X.blockedBoundary;X=X.blockedSegment,X.status=3,jh(this,ve,X)}function Kd(X,ve,ze){var Qe=X.blockedBoundary;X.blockedSegment.status=3,Qe===null?(ve.allPendingTasks--,ve.status!==2&&(ve.status=2,ve.destination!==null&&ve.destination.close())):(Qe.pendingTasks--,Qe.forceClientRender||(Qe.forceClientRender=!0,X=ze===void 0?Error(t(432)):ze,Qe.errorDigest=ve.onError(X),Qe.parentFlushed&&ve.clientRenderedBoundaries.push(Qe)),Qe.fallbackAbortableTasks.forEach(function(Ot){return Kd(Ot,ve,ze)}),Qe.fallbackAbortableTasks.clear(),ve.allPendingTasks--,ve.allPendingTasks===0&&(Qe=ve.onAllReady,Qe()))}function Uh(X,ve){if(ve.chunks.length===0&&ve.children.length===1&&ve.children[0].boundary===null){var ze=ve.children[0];ze.id=ve.id,ze.parentFlushed=!0,ze.status===1&&Uh(X,ze)}else X.completedSegments.push(ve)}function jh(X,ve,ze){if(ve===null){if(ze.parentFlushed){if(X.completedRootSegment!==null)throw Error(t(389));X.completedRootSegment=ze}X.pendingRootTasks--,X.pendingRootTasks===0&&(X.onShellError=ru,ve=X.onShellReady,ve())}else ve.pendingTasks--,ve.forceClientRender||(ve.pendingTasks===0?(ze.parentFlushed&&ze.status===1&&Uh(ve,ze),ve.parentFlushed&&X.completedBoundaries.push(ve),ve.fallbackAbortableTasks.forEach(_y,X),ve.fallbackAbortableTasks.clear()):ze.parentFlushed&&ze.status===1&&(Uh(ve,ze),ve.completedSegments.length===1&&ve.parentFlushed&&X.partialBoundaries.push(ve)));X.allPendingTasks--,X.allPendingTasks===0&&(X=X.onAllReady,X())}function Jc(X){if(X.status!==2){var ve=Sr,ze=qi.current;qi.current=ms;var Qe=Du;Du=X.responseState;try{var Ot=X.pingedTasks,At;for(At=0;At<Ot.length;At++){var nn=Ot[At],xn=X,fr=nn.blockedSegment;if(fr.status===0){ds(nn.context);try{ts(xn,nn,nn.node),fr.lastPushedText&&fr.textEmbedded&&fr.chunks.push(pe),nn.abortSet.delete(nn),fr.status=1,jh(xn,nn.blockedBoundary,fr)}catch(bi){if(tu(),typeof bi=="object"&&bi!==null&&typeof bi.then=="function"){var Tr=nn.ping;bi.then(Tr,Tr)}else{nn.abortSet.delete(nn),fr.status=4;var xr=nn.blockedBoundary,Jo=bi,Yr=Ms(xn,Jo);if(xr===null?ou(xn,Jo):(xr.pendingTasks--,xr.forceClientRender||(xr.forceClientRender=!0,xr.errorDigest=Yr,xr.parentFlushed&&xn.clientRenderedBoundaries.push(xr))),xn.allPendingTasks--,xn.allPendingTasks===0){var ca=xn.onAllReady;ca()}}}finally{}}}Ot.splice(0,At),X.destination!==null&&ko(X,X.destination)}catch(bi){Ms(X,bi),ou(X,bi)}finally{Du=Qe,qi.current=ze,ze===ms&&ds(ve)}}}function gc(X,ve,ze){switch(ze.parentFlushed=!0,ze.status){case 0:var Qe=ze.id=X.nextSegmentId++;return ze.lastPushedText=!1,ze.textEmbedded=!1,X=X.responseState,o(ve,Rt),o(ve,X.placeholderPrefix),X=f(Qe.toString(16)),o(ve,X),i(ve,Dt);case 1:ze.status=2;var Ot=!0;Qe=ze.chunks;var At=0;ze=ze.children;for(var nn=0;nn<ze.length;nn++){for(Ot=ze[nn];At<Ot.index;At++)o(ve,Qe[At]);Ot=Vo(X,ve,Ot)}for(;At<Qe.length-1;At++)o(ve,Qe[At]);return At<Qe.length&&(Ot=i(ve,Qe[At])),Ot;default:throw Error(t(390))}}function Vo(X,ve,ze){var Qe=ze.boundary;if(Qe===null)return gc(X,ve,ze);if(Qe.parentFlushed=!0,Qe.forceClientRender)Qe=Qe.errorDigest,i(ve,Et),o(ve,kt),Qe&&(o(ve,an),o(ve,f(V(Qe))),o(ve,cn)),i(ve,Qn),gc(X,ve,ze);else if(0<Qe.pendingTasks){Qe.rootSegmentID=X.nextSegmentId++,0<Qe.completedSegments.length&&X.partialBoundaries.push(Qe);var Ot=X.responseState,At=Ot.nextSuspenseID++;Ot=p(Ot.boundaryPrefix+At.toString(16)),Qe=Qe.id=Ot,tr(ve,X.responseState,Qe),gc(X,ve,ze)}else if(Qe.byteSize>X.progressiveChunkSize)Qe.rootSegmentID=X.nextSegmentId++,X.completedBoundaries.push(Qe),tr(ve,X.responseState,Qe.id),gc(X,ve,ze);else{if(i(ve,qt),ze=Qe.completedSegments,ze.length!==1)throw Error(t(391));Vo(X,ve,ze[0])}return i(ve,St)}function Yd(X,ve,ze){return ft(ve,X.responseState,ze.formatContext,ze.id),Vo(X,ve,ze),dt(ve,ze.formatContext)}function Hr(X,ve,ze){for(var Qe=ze.completedSegments,Ot=0;Ot<Qe.length;Ot++)Fo(X,ve,ze,Qe[Ot]);if(Qe.length=0,X=X.responseState,Qe=ze.id,ze=ze.rootSegmentID,o(ve,X.startInlineScript),X.sentCompleteBoundaryFunction?o(ve,to):(X.sentCompleteBoundaryFunction=!0,o(ve,qn)),Qe===null)throw Error(t(395));return ze=f(ze.toString(16)),o(ve,Qe),o(ve,la),o(ve,X.segmentPrefix),o(ve,ze),i(ve,ua)}function Fo(X,ve,ze,Qe){if(Qe.status===2)return!0;var Ot=Qe.id;if(Ot===-1){if((Qe.id=ze.rootSegmentID)===-1)throw Error(t(392));return Yd(X,ve,Qe)}return Yd(X,ve,Qe),X=X.responseState,o(ve,X.startInlineScript),X.sentCompleteSegmentFunction?o(ve,Mn):(X.sentCompleteSegmentFunction=!0,o(ve,Wt)),o(ve,X.segmentPrefix),Ot=f(Ot.toString(16)),o(ve,Ot),o(ve,Bn),o(ve,X.placeholderPrefix),o(ve,Ot),i(ve,dr)}function ko(X,ve){n=new Uint8Array(512),r=0;try{var ze=X.completedRootSegment;if(ze!==null&&X.pendingRootTasks===0){Vo(X,ve,ze),X.completedRootSegment=null;var Qe=X.responseState.bootstrapChunks;for(ze=0;ze<Qe.length-1;ze++)o(ve,Qe[ze]);ze<Qe.length&&i(ve,Qe[ze])}var Ot=X.clientRenderedBoundaries,At;for(At=0;At<Ot.length;At++){var nn=Ot[At];Qe=ve;var xn=X.responseState,fr=nn.id,Tr=nn.errorDigest,xr=nn.errorMessage,Jo=nn.errorComponentStack;if(o(Qe,xn.startInlineScript),xn.sentClientRenderFunction?o(Qe,_i):(xn.sentClientRenderFunction=!0,o(Qe,lo)),fr===null)throw Error(t(395));o(Qe,fr),o(Qe,$n),(Tr||xr||Jo)&&(o(Qe,vr),o(Qe,f(ur(Tr||"")))),(xr||Jo)&&(o(Qe,vr),o(Qe,f(ur(xr||"")))),Jo&&(o(Qe,vr),o(Qe,f(ur(Jo)))),i(Qe,no)}Ot.splice(0,At);var Yr=X.completedBoundaries;for(At=0;At<Yr.length;At++)Hr(X,ve,Yr[At]);Yr.splice(0,At),l(ve),n=new Uint8Array(512),r=0;var ca=X.partialBoundaries;for(At=0;At<ca.length;At++){var bi=ca[At];e:{Ot=X,nn=ve;var yc=bi.completedSegments;for(xn=0;xn<yc.length;xn++)if(!Fo(Ot,nn,bi,yc[xn])){xn++,yc.splice(0,xn);var Xd=!1;break e}yc.splice(0,xn),Xd=!0}if(!Xd){X.destination=null,At++,ca.splice(0,At);return}}ca.splice(0,At);var iu=X.completedBoundaries;for(At=0;At<iu.length;At++)Hr(X,ve,iu[At]);iu.splice(0,At)}finally{l(ve),X.allPendingTasks===0&&X.pingedTasks.length===0&&X.clientRenderedBoundaries.length===0&&X.completedBoundaries.length===0&&ve.close()}}function Zd(X,ve){try{var ze=X.abortableTasks;ze.forEach(function(Qe){return Kd(Qe,X,ve)}),ze.clear(),X.destination!==null&&ko(X,X.destination)}catch(Qe){Ms(X,Qe),ou(X,Qe)}}return aI.renderToReadableStream=function(X,ve){return new Promise(function(ze,Qe){var Ot,At,nn=new Promise(function(xr,Jo){At=xr,Ot=Jo}),xn=ol(X,ce(ve?ve.identifierPrefix:void 0,ve?ve.nonce:void 0,ve?ve.bootstrapScriptContent:void 0,ve?ve.bootstrapScripts:void 0,ve?ve.bootstrapModules:void 0),fe(ve?ve.namespaceURI:void 0),ve?ve.progressiveChunkSize:void 0,ve?ve.onError:void 0,At,function(){var xr=new ReadableStream({type:"bytes",pull:function(Jo){if(xn.status===1)xn.status=2,g(Jo,xn.fatalError);else if(xn.status!==2&&xn.destination===null){xn.destination=Jo;try{ko(xn,Jo)}catch(Yr){Ms(xn,Yr),ou(xn,Yr)}}},cancel:function(){Zd(xn)}},{highWaterMark:0});xr.allReady=nn,ze(xr)},function(xr){nn.catch(function(){}),Qe(xr)},Ot);if(ve&&ve.signal){var fr=ve.signal,Tr=function(){Zd(xn,fr.reason),fr.removeEventListener("abort",Tr)};fr.addEventListener("abort",Tr)}Jc(xn)})},aI.version="18.3.1",aI}var dq;function xFe(){if(dq)return yg;dq=1;var e,t;return e=bFe(),t=wFe(),yg.version=e.version,yg.renderToString=e.renderToString,yg.renderToStaticMarkup=e.renderToStaticMarkup,yg.renderToNodeStream=e.renderToNodeStream,yg.renderToStaticNodeStream=e.renderToStaticNodeStream,yg.renderToReadableStream=t.renderToReadableStream,yg}var FP=xFe();const r0=A.createContext({mapRef:null,isMapReady:!1,setMapRef:e=>{},removeMapRef:()=>{},setMapReady:()=>{}}),{Provider:CFe,Consumer:KFe}=r0,SFe=({children:e})=>{const[t,n]=A.useState(null),[r,o]=A.useState(!1);return Es.createElement(CFe,{value:{mapRef:t,setMapRef:n,isMapReady:r,setMapReady:o,removeMapRef:()=>n(null)}},e)};function GN(e,t,n){A.useEffect(()=>{if(e&&t)return n(e,t)},[t])}function BZ(e,t,n){A.useEffect(()=>{if(e&&t)return n(e,t)},[])}const EFe=(e,t)=>{switch(e){case"CompassControl":return new Ta.control.CompassControl(t);case"PitchControl":return new Ta.control.PitchControl(t);case"StyleControl":return new Ta.control.StyleControl(t);case"ZoomControl":return new Ta.control.ZoomControl(t);case"TrafficControl":return new Ta.control.TrafficControl(t);case"TrafficLegendControl":return new Ta.control.TrafficLegendControl;case"ScaleControl":return new Ta.control.ScaleControl(t);case"FullscreenControl":return new Ta.control.FullscreenControl(t);default:console.warn("Check the type and passed props properties or try CustomControl")}},TFe=A.memo(({children:e,LoaderComponent:t=()=>Es.createElement("div",null,"Loading ..."),providedMapId:n,containerClassName:r,styles:o,options:i={},imageSprites:l,controls:c,customControls:f,events:p,cameraOptions:g,trafficOptions:v,userInteraction:w,styleOptions:C,serviceOptions:T})=>{const{setMapRef:k,removeMapRef:P,mapRef:O,setMapReady:L,isMapReady:D}=A.useContext(r0),[N]=A.useState(n||lq.Guid.create().toString()),F=A.useRef(null);return A.useEffect(()=>{O&&O.setTraffic(v)},[v]),A.useEffect(()=>{O&&O.setUserInteraction(w)},[w]),A.useEffect(()=>{O&&O.setCamera(g)},[g]),A.useEffect(()=>{O&&O.setStyle(C)},[C]),A.useEffect(()=>{O&&T&&O.setServiceOptions(T)},[T]),GN(O,O,B=>{B.events.add("ready",()=>{l&&(async(V,G)=>{await Promise.all(G.map(async({id:q,templateName:z,color:$,secondaryColor:K,scale:te,icon:re})=>(re&&await V.imageSprite.add(q,re),V.imageSprite.createFromTemplate(q,z||"marker",$,K,te))))})(B,l),c&&((V,G)=>{G.forEach(q=>{const{controlName:z,options:$,controlOptions:K}=q;V.controls.add(EFe(z,K),$)})})(B,c),f&&((V,G)=>{G.forEach(({control:q,controlOptions:z})=>{V.controls.add(q,z)})})(B,f),v&&B.setTraffic(v),w&&B.setUserInteraction(w),g&&B.setCamera(g),C&&B.setStyle(C),T&&B.setServiceOptions(T),L(!0)});for(const V in p)B.events.add(V,p[V])}),A.useEffect(()=>(F.current===null&&(F.current=new Ta.Map(N,{...i||{},sessionId:(i==null?void 0:i.sessionId)||`react-azure-maps:${lq.Guid.create().toString()}`})),k(F.current),()=>{P()}),[]),Es.createElement(Es.Fragment,null,!D&&t&&Es.createElement(t,null),Es.createElement("div",{className:r,id:N,style:{...o,height:"100%"}},D&&e))});A.memo(({markerContent:e,options:t,events:n,isPopupVisible:r})=>{const[o]=A.useState(new Ta.HtmlMarker({...t,htmlContent:e&&FP.renderToStaticMarkup(e)})),{mapRef:i}=A.useContext(r0);return BZ(i,!0,l=>(l.markers.add(o),n&&n.forEach(({eventName:c,callback:f})=>{l.events.add(c,o,f)}),()=>{l.markers.remove(o)})),A.useEffect(()=>{o&&i&&o.setOptions({...t,htmlContent:e&&FP.renderToStaticMarkup(e)})},[e,t]),A.useEffect(()=>{if(o&&o.getOptions().popup&&i){const l=o.getOptions().popup;r?(l==null||l.setOptions({position:o.getOptions().position}),l==null||l.open(i)):l==null||l.close()}},[r,t,i]),null});const IFe=A.createContext({dataSourceRef:null});A.memo(e=>{const{properties:t,id:n,variant:r="feature"}=e,{dataSourceRef:o}=A.useContext(IFe),[i,l]=Es.useState(null),[c,f]=Es.useState(null);return(({setCoords:p,setProperties:g},v,w,C)=>{GN(v,C,(T,k)=>{if(T instanceof Ta.source.DataSource)return T.add(k),()=>{T.remove(k)};v instanceof Ta.source.VectorTileSource&&console.error(`Unable to add Feature(${k.id}) to VectorTileSource(${v.getId()}): AzureMapFeature has to be a child of AzureMapDataSourceProvider`)}),GN(v,w,(T,k)=>{if(T instanceof Ta.source.DataSource)return T.add(k),()=>{T.remove(k)};v instanceof Ta.source.VectorTileSource&&console.error(`Unable to add Shape(${k.getId()}) to VectorTileSource(${v.getId()}): AzureMapFeature has to be a child of AzureMapDataSourceProvider`)}),A.useEffect(()=>{w&&p&&w.setCoordinates(p)},[p]),A.useEffect(()=>{w&&g&&w.setProperties(g)},[g])})(e,o,c,i),A.useEffect(()=>{const p=(({type:g,coordinate:v,coordinates:w,multipleCoordinates:C,multipleDimensionCoordinates:T,bbox:k})=>{switch(g){case"Point":return v&&new Ta.data.Point(v);case"MultiPoint":return w&&new Ta.data.MultiPoint(w,k);case"LineString":return w&&new Ta.data.LineString(w,k);case"MultiLineString":return C&&new Ta.data.MultiLineString(C,k);case"Polygon":return w&&new Ta.data.Polygon(w,k);case"MultiPolygon":return T&&new Ta.data.MultiPolygon(T,k);default:console.warn("Check the type and passed props properties")}})(e);if((!i||!c)&&p)switch(r){case"shape":f(new Ta.Shape(p,n,t));break;case"feature":l(new Ta.data.Feature(p,t,n))}},[]),null});A.createContext({layerRef:null});const UZ=({options:e,popupContent:t,isVisible:n})=>{const[r]=A.useState(new Ta.Popup({...e,content:FP.renderToStaticMarkup(t)})),{mapRef:o}=A.useContext(r0);return A.useEffect(()=>{r.setOptions({...e,content:FP.renderToStaticMarkup(t)}),o&&n&&!r.isOpen()&&r.open(o)},[e,t]),r};A.memo(({isVisible:e,popupContent:t,options:n,events:r})=>{const{mapRef:o}=A.useContext(r0),i=UZ({options:n,popupContent:t,isVisible:e});return BZ(o,!0,l=>(r&&r.forEach(({eventName:c,callback:f})=>{l.events.add(c,i,f)}),()=>{l.popups.remove(i)})),A.useEffect(()=>{o&&(e&&!i.isOpen()?i.open(o):o.popups.getPopups().length&&!e&&i.isOpen()&&i.close())},[e]),null});const kFe={authOptions:{authType:Ai.anonymous,clientId:"6c2581ec-8018-4346-8b4e-d18b27b420b2",getToken:function(e){fetch("https://spurious2.azurewebsites.net/api/azure-maps-token").then(function(t){return t.text()}).then(function(t){e(t)})}}},PFe=()=>ie.jsx("div",{style:{height:"400px"},children:ie.jsx(TFe,{options:kFe})}),KI=dz({reducerPath:"storeApi",baseQuery:az({baseUrl:hz}),endpoints:e=>({getStoresBySubdivisionId:e.query({query:t=>`subdivisions/${t}/stores`})})}),{useLazyGetStoresBySubdivisionIdQuery:AFe}=KI,Bg=new M7.DataSource,MFe=new $A.LineLayer(Bg,void 0,{strokeColor:"black",strokeWidth:.7}),RFe=new $A.PolygonLayer(Bg,void 0,{fillOpacity:.3,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]]}),aD=new $A.SymbolLayer(Bg,"symbol",{filter:["==",["geometry-type"],"Point"],iconOptions:{allowOverlap:!0,image:"pin-blue"}}),OFe=({subdivisionId:e})=>{const{mapRef:t,isMapReady:n}=A.useContext(r0),[r,o]=AFe(),[i,l]=Qye(),[c,f]=A.useState(void 0),[p,g]=A.useState(""),[v,w]=A.useState(""),[C,T]=A.useState([]),k=A.useRef(UZ({options:{pixelOffset:[0,-18]},popupContent:ie.jsxs("div",{className:"customInfobox",children:[ie.jsx("div",{className:"name",children:p}),ie.jsx("div",{className:"name",children:v}),C.map(P=>ie.jsxs("div",{children:[P.alcoholType,": ",P.volume]},P.alcoholType))]}),isVisible:!1}));return A.useEffect(()=>{n&&t&&(t.sources.add(Bg),t.layers.add(MFe),t.layers.add(RFe),t.layers.add(aD),t.popups.add(k.current),t.events.add("mouseenter",aD,P=>{if(P.shapes&&P.shapes.length>0){const O=P.shapes[0],L=O.getProperties().name;g(L);const D=O.getProperties().city;w(D);const N=O.getProperties().inventories;T(N),k.current.setOptions({position:O.getCoordinates(),pixelOffset:[0,-18]}),k.current.open()}}),t.events.add("mouseleave",aD,()=>{k.current.close()}))},[n,t,k]),A.useEffect(()=>{console.debug("subdivid changed, closing popup"),k.current.close(),e&&(console.debug("launching getboundaryquery"),i(e,!0),f(e))},[e,i,k]),A.useEffect(()=>{if(l.isSuccess&&!l.isFetching&&!l.isLoading){console.debug("clearing datasource"),Bg.clear(),Bg.add(l.data);const O=Bg.getShapes()[0].getBounds(),L=u1.BoundingBox.getCenter(O);t==null||t.setCamera({bounds:O,center:L});const D=t==null?void 0:t.getCamera().zoom;D&&t.setCamera({zoom:D-1}),c&&(console.debug("launching getstoresquery"),r(c,!0))}console.debug("completed shape update")},[l,t,r,c]),A.useEffect(()=>{console.debug("getStoresResult",o),o.isSuccess&&!o.isFetching&&!o.isLoading&&o.data.forEach(P=>{if(console.debug("s",P),P.locationCoordinates&&P.locationCoordinates.coordinates){const O=new u1.Feature(new u1.Point(new u1.Position(P.locationCoordinates.coordinates[0],P.locationCoordinates.coordinates[1])),{name:P.name,city:P.city,inventories:P.inventories});Bg.add(O),console.debug("added store",O)}})},[o]),ie.jsx(PFe,{})},DFe=({subdivisionId:e})=>(A.useEffect(()=>{console.debug("subdivisionId in MapWrapper",e)},[e]),ie.jsx(SFe,{children:ie.jsx(OFe,{subdivisionId:e})})),LFe=()=>{const{id:e}=fF();A.useMemo(()=>{console.debug("id in home",e)},[e]);const[t,n]=A.useState(void 0),r=o=>{console.debug("subdivisionId in onSubdivisionChange",o),n(o)};return ie.jsx(ie.Fragment,{children:ie.jsxs(JP,{children:[ie.jsx(DFe,{subdivisionId:t}),ie.jsx(eve,{onSubdivisionChange:r})]})})},YI=dz({reducerPath:"densityApi",baseQuery:az({baseUrl:hz}),endpoints:e=>({getDensities:e.query({query:()=>"densities"})})}),jZ=Tge({reducer:{[bI.reducerPath]:bI.reducer,[YI.reducerPath]:YI.reducer,[KI.reducerPath]:KI.reducer},middleware:e=>e().concat(bI.middleware).concat(YI.middleware).concat(KI.middleware)}),NFe=fo(ie.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),FFe=()=>{const e=c8("root"),[t,n]=A.useState(null),r=c=>{n(c.currentTarget)},o=()=>{n(null)},i=R2(),l=_m();return i.state==="loading"?ie.jsx("h1",{children:"Loading!"}):ie.jsx(ie.Fragment,{children:ie.jsx(Kme,{position:"static",children:ie.jsx(JP,{maxWidth:"xl",children:ie.jsxs(ZG,{disableGutters:!0,children:[ie.jsxs(XD,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[ie.jsx(Ug,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:r,color:"inherit",children:ie.jsx(NFe,{})}),ie.jsxs(GG,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!t,onClose:o,sx:{display:{xs:"block",md:"none"}},children:[e.map(c=>ie.jsx(Rd,{component:Sv,to:`/${c.shortName.toLowerCase()}`,onClick:o,children:ie.jsx(bf,{textAlign:"center",children:c.title})},c.shortName.toLowerCase())),ie.jsx(Rd,{component:Sv,to:"/about",onClick:o,children:ie.jsx(bf,{textAlign:"center",children:"About"})},"about")]})]}),ie.jsxs(XD,{sx:{flexGrow:1,display:{xs:"none",md:"flex"},"& > :not(style) ~ :not(style)":{ml:2}},children:[ie.jsx(sR,{variant:"h5",sx:{my:2,color:"white",display:"block"},component:Sv,to:"/",children:"Spurious Alcohol Statistics"},"home"),e.map(c=>ie.jsx(sR,{sx:{my:2,color:l.pathname.toLowerCase().endsWith(c.shortName.toLowerCase())||l.pathname==="/"&&c.shortName.toLowerCase()===e[0].shortName.toLowerCase()?"white":"lightgray",display:"block",alignContent:"center"},component:Sv,to:`/${c.shortName.toLowerCase()}`,children:c.title},c.shortName.toLowerCase())),ie.jsx(sR,{sx:{my:2,color:l.pathname.endsWith("/about")?"white":"lightgray",display:"block",alignContent:"center"},component:Sv,to:"/about",children:"About"},"about")]})]})})})})},zFe=()=>{const{id:e}=fF(),t=_m(),n=O2(),r=u8();return A.useEffect(()=>{console.debug("location",t),console.debug("id in shell",e),console.debug("result in shell",n),(!e&&n.length>0&&!$Z.find(o=>`/${o.route.toLowerCase()}`===t.pathname.toLowerCase())||e&&!n.find(o=>o.shortName.toLowerCase()===e.toLowerCase()))&&r(`/${n[0].shortName.toLowerCase()}`,{replace:!0})},[e,n,r,t]),ie.jsxs(ie.Fragment,{children:[ie.jsx(FFe,{}),ie.jsx(JP,{children:ie.jsx("div",{children:ie.jsx("h1",{children:"Alcohol Density per Census Subdivision"})})}),ie.jsx(j2,{})]})},BFe=async()=>{const e=jZ.dispatch(YI.endpoints.getDensities.initiate());try{const t=await e.unwrap();return console.debug("densities in Shell",t),t}finally{e.unsubscribe()}},UFe=()=>ie.jsx(ie.Fragment,{children:ie.jsx("div",{className:"App",children:ie.jsxs(JP,{sx:{marginY:5},children:[ie.jsx("h3",{children:"About"}),ie.jsx("br",{}),"What does the amount of alcohol in a census subdivision mean? Nothing. But it's fun to map it out like it does. (For instance, there might be an LCBO at the border of 2 areas that serve both, but the population of the second area won't get counted.)",ie.jsx("br",{}),ie.jsx("br",{}),"Population and census subdivision data comes from Statistics Canada's 2021 census data.",ie.jsx("br",{}),ie.jsx("br",{}),"Alcohol inventory comes from a custom LCBO website scraper based on"," ",ie.jsx("a",{href:"https://github.com/heycarsten/lcbo-api",children:"Carsten Nielson's LCBO API"}),". It's a series of Azure Functions. Note: this website and the scraped data are not used for commercial purposes. It is just a pet learning project.",ie.jsx("br",{}),ie.jsx("br",{}),"Azure SQL Server provides data storage and the geographic matching of LCBO locations inside subdivisions.",ie.jsx("br",{}),ie.jsx("br",{}),"The backend is ASP.NET Core. The front end is React written in TypeScript. The map is by"," ",ie.jsx("a",{href:"https://azure.microsoft.com/en-us/services/azure-maps/",children:"Azure Maps"}),". Material UI provides the good looks and data grid. It all lives in Azure.",ie.jsx("br",{}),ie.jsx("br",{}),ie.jsx("a",{href:"https://github.com/claq2/spurious2",children:"Fork it on GitHub."}),ie.jsx("br",{}),ie.jsx("br",{})]})})}),$Z=[{route:"about",element:ie.jsx(UFe,{})}],jFe=f3(H2(ie.jsx(ie.Fragment,{children:ie.jsxs(hI,{path:"/",element:ie.jsx(zFe,{}),id:"root",loader:BFe,children:[$Z.map(e=>ie.jsx(hI,{path:e.route,element:e.element},e.route)),ie.jsx(hI,{path:":id",element:ie.jsx(LFe,{})})]})}))),$Fe=()=>ie.jsx(ie.Fragment,{children:ie.jsx(E3,{router:jFe})}),HFe=rX.createRoot(document.getElementById("root"));HFe.render(ie.jsx(Es.StrictMode,{children:ie.jsx(Rye,{store:jZ,children:ie.jsx($Fe,{})})}));
